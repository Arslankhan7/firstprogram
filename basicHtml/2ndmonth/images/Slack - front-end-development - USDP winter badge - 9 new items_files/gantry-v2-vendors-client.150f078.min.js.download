(()=>{var qS=Object.defineProperty;var o=(j,l)=>qS(j,"name",{value:l,configurable:!0});(window.webpackJsonp=window.webpackJsonp||[]).push([["gantry-v2-vendors-client","gantry-v2-vendors-workflow-builder"],{"+7ft":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=S},"+D+n":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("dWQL")),m=h(f("t9Fz")),a=h(f("QzVx")),s=f("KyYT"),i=h(f("JTre"));let e=o(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return S(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const n=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,n.destroy()})}bindVideoElement(n,r){const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${n}`);return}c.bindVideoElement(r)}unbindVideoElement(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${n}`);return}this.logger.info("Unbinding the video element");const p=c.stateRef().boundVideoElement;c.bindVideoElement(null),r&&(this.logger.info("Cleaning up the video element"),i.default.disconnectVideoStreamFromVideoElement(p,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===u.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const n=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),n.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)||(this.audioVideoController.pauseReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.add(n)),r.pause())}unpauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)&&(this.audioVideoController.resumeReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.delete(n)),r.unpause())}getVideoTile(n){return this.tileMap.has(n)?this.tileMap.get(n):null}getVideoTileArea(n){const r=n.state();let c=0,p=0;return r.boundVideoElement&&(c=r.boundVideoElement.clientHeight*r.devicePixelRatio,p=r.boundVideoElement.clientWidth*r.devicePixelRatio),c*p}getAllRemoteVideoTiles(){const n=new Array;return this.tileMap.forEach((r,c)=>{(!this.currentLocalTile||c!==this.currentLocalTile.id())&&n.push(r)}),n}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const c=this.tileFactory.makeTile(r,n,this,this.devicePixelRatioMonitor);return this.tileMap.set(r,c),c}removeVideoTile(n){if(!this.tileMap.has(n))return;const r=this.tileMap.get(n);this.currentLocalTile===r&&(this.currentLocalTile=null),r.destroy(),this.tileMap.delete(n),this.audioVideoController.forEachObserver(c=>{s.Maybe.of(c.videoTileWasRemoved).map(p=>p.bind(c)(n))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(n){const r=[];for(const c of this.getAllVideoTiles()){const p=c.state();p.boundAttendeeId===n&&(this.removeVideoTile(p.tileId),r.push(p.tileId))}return r}removeAllVideoTiles(){const n=Array.from(this.tileMap.keys());for(const r of n)this.removeVideoTile(r)}sendTileStateUpdate(n){this.audioVideoController.forEachObserver(r=>{s.Maybe.of(r.videoTileDidUpdate).map(c=>c.bind(r)(n))})}haveVideoTilesWithStreams(){for(const n of this.getAllVideoTiles())if(n.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(n){return!!this.getVideoTileForAttendeeId(n)}getVideoTileForAttendeeId(n){for(const r of this.getAllVideoTiles())if(r.state().boundAttendeeId===n)return r}captureVideoTile(n){const r=this.getVideoTile(n);return r?r.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(n,r,c){this.tileFactory=n,this.audioVideoController=r,this.logger=c,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=r.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},"+DE9":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{destroy(){return S(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,a){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(i=>{i.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const s=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof s.addEventListener=="function"?(s.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=s):typeof s.addListener=="function"?(s.addListener(this.mediaQueryListener),this.mediaQueryList=s):a.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=h},"+JPr":function(j,l){function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(f,"_nonIterableRest"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},"+W1r":function(j,l,f){"use strict";f.d(l,"a",function(){return e});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e=Object(a.a)("help.getRecommendedArticles generated fetcher",function(){var t=Object(S.coroutine)(function*(n,r,c){try{const p=["reason"],g=Object(u.a)(c,p),d=Object(i.b)(g);return yield n(Object(m.apiCall)({method:"help.getRecommendedArticles",args:d,reason:c.reason}))}catch(p){throw Object(s.a)({getState:r}).error(`API call to help.getRecommendedArticles
				with reason ${c.reason} failed, initiated by generated fetcher`),p}});return function(n,r,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpGetRecommendedArticlesFetcher",description:"help.getRecommendedArticles generated fetcher"}},"+br/":function(j,l,f){"use strict";f.r(l),f.d(l,"__extends",function(){return h}),f.d(l,"__assign",function(){return u}),f.d(l,"__rest",function(){return m}),f.d(l,"__decorate",function(){return a}),f.d(l,"__param",function(){return s}),f.d(l,"__metadata",function(){return i}),f.d(l,"__awaiter",function(){return e}),f.d(l,"__generator",function(){return t}),f.d(l,"__createBinding",function(){return n}),f.d(l,"__exportStar",function(){return r}),f.d(l,"__values",function(){return c}),f.d(l,"__read",function(){return p}),f.d(l,"__spread",function(){return g}),f.d(l,"__spreadArrays",function(){return d}),f.d(l,"__await",function(){return y}),f.d(l,"__asyncGenerator",function(){return E}),f.d(l,"__asyncDelegator",function(){return w}),f.d(l,"__asyncValues",function(){return k}),f.d(l,"__makeTemplateObject",function(){return V}),f.d(l,"__importStar",function(){return F}),f.d(l,"__importDefault",function(){return N}),f.d(l,"__classPrivateFieldGet",function(){return P}),f.d(l,"__classPrivateFieldSet",function(){return x});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=o(function(O,M){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,J){D.__proto__=J}||function(D,J){for(var q in J)J.hasOwnProperty(q)&&(D[q]=J[q])},S(O,M)},"extendStatics");function h(O,M){S(O,M);function D(){this.constructor=O}o(D,"__"),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}o(h,"__extends");var u=o(function(){return u=Object.assign||o(function(M){for(var D,J=1,q=arguments.length;J<q;J++){D=arguments[J];for(var $ in D)Object.prototype.hasOwnProperty.call(D,$)&&(M[$]=D[$])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(O,M){var D={};for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&M.indexOf(J)<0&&(D[J]=O[J]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,J=Object.getOwnPropertySymbols(O);q<J.length;q++)M.indexOf(J[q])<0&&Object.prototype.propertyIsEnumerable.call(O,J[q])&&(D[J[q]]=O[J[q]]);return D}o(m,"__rest");function a(O,M,D,J){var q=arguments.length,$=q<3?M:J===null?J=Object.getOwnPropertyDescriptor(M,D):J,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,M,D,J);else for(var Ee=O.length-1;Ee>=0;Ee--)(de=O[Ee])&&($=(q<3?de($):q>3?de(M,D,$):de(M,D))||$);return q>3&&$&&Object.defineProperty(M,D,$),$}o(a,"__decorate");function s(O,M){return function(D,J){M(D,J,O)}}o(s,"__param");function i(O,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,M)}o(i,"__metadata");function e(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})}o(e,"__awaiter");function t(O,M){var D={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,q,$,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(ye){return function(Be){return _e([ye,Be])}}function _e(ye){if(J)throw new TypeError("Generator is already executing.");for(;D;)try{if(J=1,q&&($=ye[0]&2?q.return:ye[0]?q.throw||(($=q.return)&&$.call(q),0):q.next)&&!($=$.call(q,ye[1])).done)return $;switch(q=0,$&&(ye=[ye[0]&2,$.value]),ye[0]){case 0:case 1:$=ye;break;case 4:return D.label++,{value:ye[1],done:!1};case 5:D.label++,q=ye[1],ye=[0];continue;case 7:ye=D.ops.pop(),D.trys.pop();continue;default:if($=D.trys,!($=$.length>0&&$[$.length-1])&&(ye[0]===6||ye[0]===2)){D=0;continue}if(ye[0]===3&&(!$||ye[1]>$[0]&&ye[1]<$[3])){D.label=ye[1];break}if(ye[0]===6&&D.label<$[1]){D.label=$[1],$=ye;break}if($&&D.label<$[2]){D.label=$[2],D.ops.push(ye);break}$[2]&&D.ops.pop(),D.trys.pop();continue}ye=M.call(O,D)}catch(Be){ye=[6,Be],q=0}finally{J=$=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}}o(t,"__generator");function n(O,M,D,J){J===void 0&&(J=D),O[J]=M[D]}o(n,"__createBinding");function r(O,M){for(var D in O)D!=="default"&&!M.hasOwnProperty(D)&&(M[D]=O[D])}o(r,"__exportStar");function c(O){var M=typeof Symbol=="function"&&Symbol.iterator,D=M&&O[M],J=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&J>=O.length&&(O=void 0),{value:O&&O[J++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}o(c,"__values");function p(O,M){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var J=D.call(O),q,$=[],de;try{for(;(M===void 0||M-- >0)&&!(q=J.next()).done;)$.push(q.value)}catch(Ee){de={error:Ee}}finally{try{q&&!q.done&&(D=J.return)&&D.call(J)}finally{if(de)throw de.error}}return $}o(p,"__read");function g(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(p(arguments[M]));return O}o(g,"__spread");function d(){for(var O=0,M=0,D=arguments.length;M<D;M++)O+=arguments[M].length;for(var J=Array(O),q=0,M=0;M<D;M++)for(var $=arguments[M],de=0,Ee=$.length;de<Ee;de++,q++)J[q]=$[de];return J}o(d,"__spreadArrays");function y(O){return this instanceof y?(this.v=O,this):new y(O)}o(y,"__await");function E(O,M,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=D.apply(O,M||[]),q,$=[];return q={},de("next"),de("throw"),de("return"),q[Symbol.asyncIterator]=function(){return this},q;function de(Ve){J[Ve]&&(q[Ve]=function(gt){return new Promise(function(dt,Je){$.push([Ve,gt,dt,Je])>1||Ee(Ve,gt)})})}function Ee(Ve,gt){try{_e(J[Ve](gt))}catch(dt){pt($[0][3],dt)}}function _e(Ve){Ve.value instanceof y?Promise.resolve(Ve.value.v).then(ye,Be):pt($[0][2],Ve)}function ye(Ve){Ee("next",Ve)}function Be(Ve){Ee("throw",Ve)}function pt(Ve,gt){Ve(gt),$.shift(),$.length&&Ee($[0][0],$[0][1])}}o(E,"__asyncGenerator");function w(O){var M,D;return M={},J("next"),J("throw",function(q){throw q}),J("return"),M[Symbol.iterator]=function(){return this},M;function J(q,$){M[q]=O[q]?function(de){return(D=!D)?{value:y(O[q](de)),done:q==="return"}:$?$(de):de}:$}}o(w,"__asyncDelegator");function k(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O[Symbol.asyncIterator],D;return M?M.call(O):(O=typeof c=="function"?c(O):O[Symbol.iterator](),D={},J("next"),J("throw"),J("return"),D[Symbol.asyncIterator]=function(){return this},D);function J($){D[$]=O[$]&&function(de){return new Promise(function(Ee,_e){de=O[$](de),q(Ee,_e,de.done,de.value)})}}function q($,de,Ee,_e){Promise.resolve(_e).then(function(ye){$({value:ye,done:Ee})},de)}}o(k,"__asyncValues");function V(O,M){return Object.defineProperty?Object.defineProperty(O,"raw",{value:M}):O.raw=M,O}o(V,"__makeTemplateObject");function F(O){if(O&&O.__esModule)return O;var M={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(M[D]=O[D]);return M.default=O,M}o(F,"__importStar");function N(O){return O&&O.__esModule?O:{default:O}}o(N,"__importDefault");function P(O,M){if(!M.has(O))throw new TypeError("attempted to get private field on non-instance");return M.get(O)}o(P,"__classPrivateFieldGet");function x(O,M,D){if(!M.has(O))throw new TypeError("attempted to set private field on non-instance");return M.set(O,D),D}o(x,"__classPrivateFieldSet")},"+j7y":function(j,l,f){"use strict";var S=f("YXGX"),h=f("ifKl"),u=S.a?function(m){return S.a.get(m)}:h.a;l.a=u},"/AJg":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const S=f("XCDq");var h;(function(s){s[s.Default=0]="Default",s[s.None=1]="None",s[s.BandwidthProbing=2]="BandwidthProbing",s[s.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function u(s){return s===h.None||s===h.Default}o(u,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=u;function m(s){switch(s){case S.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case S.SdkServerSideNetworkAdaption.NONE:return h.None;case S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}o(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=m;function a(s){switch(s){case h.Default:return S.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return S.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}o(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},"/N6y":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=S},"/U1e":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("wR/T")),u=S(f("dWQL")),m=f("R4Nl"),a=S(f("v9PG")),s=S(f("a16/")),i=S(f("iNgN"));let e=o(class{constructor(n,r){var c,p;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,n){n=m.toLowerCasePropertyNames(n),n.meeting&&(n=n.meeting),this.meetingId=n.meetingid,this.externalMeetingId=n.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=n.mediaplacement.audiohosturl,this.urls.signalingURL=n.mediaplacement.signalingurl,this.urls.turnControlURL=n.mediaplacement.turncontrolurl,n.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=n.mediaplacement.eventingestionurl);const g=o((d,y)=>{switch(d){case"None":return u.default.VideoDisabled;case"HD":return u.default.VideoResolutionHD;case"FHD":return u.default.VideoResolutionFHD;case"UHD":return u.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((c=n.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((p=n.meetingfeatures)===null||p===void 0?void 0:p.content)!==void 0){const d=n.meetingfeatures.video===void 0?"HD":n.meetingfeatures.video.maxresolution,y=n.meetingfeatures.content===void 0?"FHD":n.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(g(d,u.default.VideoResolutionHD),g(y,u.default.VideoResolutionFHD))}}r&&(r=m.toLowerCasePropertyNames(r),r.attendee&&(r=r.attendee),this.credentials=new s.default,this.credentials.attendeeId=r.attendeeid,this.credentials.externalUserId=r.externaluserid,this.credentials.joinToken=r.jointoken)}},"MeetingSessionConfiguration");l.default=e},"/sFY":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{equals(u){return u!==void 0&&this.mid===u.mid&&this.attendeeId===u.attendeeId&&this.streamId===u.streamId&&this.groupId===u.groupId&&this.priority===u.priority&&this.targetBitrateKbps===u.targetBitrateKbps&&this.qualityAdaptationPreference===u.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=S},"046c":function(j,l,f){"use strict";f.d(l,"a",function(){return h});const S={Shortcut:"shortcut",Event:"event",Webhook:"webhook",Scheduled:"scheduled",External:"external"},h={Shortcut:"shortcut",Event:"event",Webhook:"webhook",Scheduled:"scheduled",External:"external"}},"0JTw":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("HbHZ"));let u=o(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,s,i,e,t){this.client=a,this.type=s,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=u},"0Kz9":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{mute(m){return S(this,void 0,void 0,function*(){})}stop(){var m;return S(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return S(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var a;return S(this,void 0,void 0,function*(){return(a=this.node)===null||a===void 0||a.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");l.default=h},"0LIx":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("XCDq"),u=S(f("MpTp")),m=S(f("OEM7"));let a=o(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const n of i.sources){if(!e.has(n.attendeeId)){e.set(n.attendeeId,n.groupId);continue}const r=e.get(n.attendeeId);r<n.groupId&&(this.logger.warn(`Old group ID ${r} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),e.set(n.attendeeId,n.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(n=>e.get(n.attendeeId)===n.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(n=>n.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const n of this.currentIndex.sources){const{attendeeId:r,externalUserId:c,mediaType:p}=n;r!==i&&p===h.SdkStreamMediaType.VIDEO&&(t.has(r)||(e.push({attendee:{attendeeId:r,externalUserId:c}}),t.add(r)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,n){const r=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===i||y.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&r.add(y.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),p=new Map;let g=0;c.forEach((y,E)=>{p.set(E,y[0]),g+=y[0].maxBitrateKbps}),g=this.trySelectHighBitrateForAttendees(c,e,g,n,p),this.trySelectHighBitrateForAttendees(c,r,g,n,p);const d=new u.default;for(const y of p.values())d.add(y.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new u.default;if(this.currentIndex){const t=new Map;for(const n of this.currentIndex.sources)n.attendeeId===i||n.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(n.groupId)||n.maxBitrateKbps>t.get(n.groupId).maxBitrateKbps)&&t.set(n.groupId,n);for(const n of t.values())e.add(n.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,n]of this.subscribeTrackToStreamMap.entries())if(i===n){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,n]of this.subscribeSsrcToStreamMap.entries())if(i===n){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,n,r){for(const c of e){if(t>=n)break;if(i.has(c)){const p=i.get(c);for(const g of p.reverse())if(t-r.get(c).maxBitrateKbps+g.maxBitrateKbps<n){t=t-r.get(c).maxBitrateKbps+g.maxBitrateKbps,r.set(c,g);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,n)=>{t.sort((r,c)=>r.maxBitrateKbps>c.maxBitrateKbps?1:r.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},"0NFC":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("dWQL")),m=h(f("/U1e")),a=h(f("a16/")),s=h(f("bTau")),i=h(f("6/h7")),e=f("KyYT"),t=h(f("NWIo")),n=h(f("34ho"));let r=o(class{static createContentShareMeetingSessionConfigure(p){const g=new m.default;return g.meetingId=p.meetingId,g.externalMeetingId=p.externalMeetingId,g.urls=p.urls,g.disablePeriodicKeyframeRequestOnContentSender=p.disablePeriodicKeyframeRequestOnContentSender,g.credentials=new a.default,g.credentials.attendeeId=p.credentials.attendeeId+n.default.Modality,g.credentials.externalUserId=p.credentials.externalUserId,g.credentials.joinToken=p.credentials.joinToken+n.default.Modality,g.meetingFeatures=p.meetingFeatures.clone(),g}setContentAudioProfile(p){this.contentAudioVideo.setAudioProfile(p)}enableSimulcastForContentShare(p,g){p?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new t.default(this.contentAudioVideo.logger,g)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(p){p?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(p){return S(this,void 0,void 0,function*(){if(p){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===u.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=p;for(let g=0;g<this.mediaStreamBroker.mediaStream.getTracks().length;g++)this.mediaStreamBroker.mediaStream.getTracks()[g].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(p,g){return S(this,void 0,void 0,function*(){const d=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(p,g);return yield this.startContentShare(d),d})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidPause).map(g=>g.call(p))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidUnpause).map(g=>g.call(p))})}setContentShareVideoCodecPreferences(p){this.contentAudioVideo.setVideoCodecSendPreferences(p)}destroy(){return S(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(p){this.observerQueue.add(p)}removeContentShareObserver(p){this.observerQueue.delete(p)}forEachContentShareObserver(p){for(const g of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(g)&&p(g)})}audioVideoDidStart(){var p;((p=this.mediaStreamBroker.mediaStream)===null||p===void 0?void 0:p.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(p){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(g=>{e.Maybe.of(g.contentShareDidStop).map(d=>d.call(g))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((p,g,d,y)=>{const E=new s.default(p).hasModality(s.default.MODALITY_CONTENT),w=new s.default(p).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!E||!w||!g||this.contentShareTile)return;const k=this.mediaStreamBroker.mediaStream;if(k!=null&&k.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const V=k.getVideoTracks()[0];let F,N;if(V.getSettings){const P=V.getSettings();F=P.width,N=P.height}else{const P=V.getCapabilities();F=P.width,N=P.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,k,F,N,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(V=>{e.Maybe.of(V.contentShareDidStart).map(F=>F.call(V))})})}constructor(p,g,d){this.mediaStreamBroker=p,this.contentAudioVideo=g,this.attendeeAudioVideo=d,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=r},"0OOd":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function S(h){return!!h&&typeof h=="object"&&"transformStream"in h&&"stop"in h&&"intrinsicDevice"in h}o(S,"isVideoTransformDevice"),l.isVideoTransformDevice=S},"0XZN":function(j,l,f){"use strict";f.d(l,"a",function(){return S});const S={Name:"name",Email:"email",Phone:"phone",Company:"company",Channel:"channel",Stage:"stage",Priority:"priority",DealValue:"deal_value",Owner:"owner",Notes:"notes",DateAdded:"date_added"}},"0YRd":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var S;(function(h){h.Host="host",h.ServerReflexive="srflx",h.PeerReflexive="prflx",h.Relay="relay"})(S=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=S},"0jNb":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("CtrA")),m=h(f("hEYi")),a=f("f2XL"),s=h(f("aVV0"));let i=o(class Vf extends s.default{run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const n of t.message.dataMessage.messages){const r=new u.default(n.ingestTimeNs/1e6,n.topic,n.data,n.senderAttendeeId,n.senderExternalUserId,n.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(r)}}validateDataMessage(t,n,r){if(!Vf.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(n.length>Vf.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(r&&r<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(n,r,c)=>{if(this.context.signalingClient.ready()){let p;r instanceof Uint8Array?p=r:typeof r=="string"?p=new TextEncoder().encode(r):p=new TextEncoder().encode(JSON.stringify(r)),this.validateDataMessage(n,p,c);const g=a.SdkDataMessagePayload.create();g.topic=n,g.lifetimeMs=c,g.data=p;const d=a.SdkDataMessageFrame.create();d.messages=[g],this.context.signalingClient.sendDataMessage(d)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},"1+fu":function(j,l,f){"use strict";var S=f("uRGJ"),h=f("LV2V"),u=f("FLqD"),m=f("IzLi");function a(n,r,c,p,g,d){return Object(m.a)(n)&&Object(m.a)(r)&&(d.set(r,n),Object(u.a)(n,r,void 0,a,d),d.delete(r)),n}o(a,"customDefaultsMerge");var s=a,i=f("dhcM"),e=Object(h.a)(function(n){return n.push(void 0,s),Object(S.a)(i.a,void 0,n)}),t=l.a=e},"10yS":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var S;(function(h){h[h.InputAttached=0]="InputAttached",h[h.SendingFailed=1]="SendingFailed",h[h.SendingSuccess=2]="SendingSuccess"})(S=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=S},"18tZ":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.Connect="connect"})(S||(S={})),l.default=S},"1AO7":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return o(e,"adopt"),new(s||(s=Promise))(function(t,n){function r(g){try{p(i.next(g))}catch(d){n(d)}}o(r,"fulfilled");function c(g){try{p(i.throw(g))}catch(d){n(d)}}o(c,"rejected");function p(g){g.done?t(g.value):e(g.value).then(r,c)}o(p,"step"),p((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=f("Lxy7");let u=o(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return S(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const s=document.createElement("canvas");s.width=this.streamParameters.width,s.height=this.streamParameters.height,s.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return S(this,void 0,void 0,function*(){const s=a.backgroundReplacement.backgroundImageURL,i=a.backgroundReplacement.defaultColor;if(s)try{const e=yield this.loadImage(s);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}resizeAndSetReplacementColor(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.fillStyle=a,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}loadImage(a){return S(this,void 0,void 0,function*(){const i=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,n)=>{e.onload=()=>{t(e)},e.onerror=r=>{n(r)}})})}constructor(a,s){this.streamParameters=a,this.outputCanvas=s,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=u},"1Cbm":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("8wPz"));let m=o(class{needUpdate(s){return this.activeSpeakers?this.speakerScores[s]===0&&this.activeSpeakers.includes(s)||this.speakerScores[s]>0&&!this.activeSpeakers.includes(s):!0}updateActiveSpeakers(s,i,e){if(!this.needUpdate(e))return;const t=[],n=Object.keys(this.speakerScores);for(let d=0;d<n.length;d++){const y=n[d];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const r=t.sort((d,y)=>y.activeScore-d.activeScore).filter(function(d){return d.activeScore>0}).map(function(d){return d.attendeeId});this.activeSpeakers=r,i(r);const p=r.length>0&&r[0]===this.selfAttendeeId&&s.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==p&&(this.hasBandwidthPriority=p,this.hasBandwidthPriorityCallback(p))}updateScore(s,i,e,t,n){const r=s.calculateScore(e,t,n);this.speakerScores[e]!==r&&(this.speakerScores[e]=r,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(s,i,e))}subscribe(s,i,e,t){const n=o((c,p)=>{if(!p){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(s,i,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(g,d,y,E)=>{this.mostRecentUpdateTimestamp[g]=Date.now(),y!==null&&(this.speakerMuteState[g]=y),this.updateScore(s,i,g,d,y)})},"handler");this.detectorCallbackToHandler.set(i,n);const r=new u.default(this.updateIntervalMs);if(r.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(s,i,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(i,r),e&&t){const c=new u.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}unsubscribe(s){const i=this.detectorCallbackToHandler.get(s);this.detectorCallbackToHandler.delete(s),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(s);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(s));const t=this.detectorCallbackToScoresTimer.get(s);t&&(t.stop(),this.detectorCallbackToHandler.delete(s))}destroy(){return S(this,void 0,void 0,function*(){for(const s of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s);for(const s of this.detectorCallbackToActivityTimer.values())s.stop();for(const s of this.detectorCallbackToScoresTimer.values())s.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(s,i,e,t=1e3,n=200){this.realtimeController=s,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=n,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=m},"1GR6":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("oHvd"));let u=o(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),s=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&s}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,s,i){super(s,i,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=s.sendingAudioFailureSamplesToConsider>0?s.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=s.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=s.maximumTimesToWarn,this.coolDownTimeMs=s.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=u},"1J7j":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(r,c,p,g){function d(y){return y instanceof p?y:new p(function(E){E(y)})}return o(d,"adopt"),new(p||(p=Promise))(function(y,E){function w(F){try{V(g.next(F))}catch(N){E(N)}}o(w,"fulfilled");function k(F){try{V(g.throw(F))}catch(N){E(N)}}o(k,"rejected");function V(F){F.done?y(F.value):d(F.value).then(w,k)}o(V,"step"),V((g=g.apply(r,c||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("v8aG")),m=h(f("bTau")),a=h(f("CLOt")),s=h(f("hEYi")),i=f("f2XL"),e=f("KyYT"),t=h(f("aVV0"));let n=o(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return S(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==s.default.ReceivedSignalFrame||c.message.type!==i.SdkSignalFrame.Type.INDEX)return;const p=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(p)}`),this.handleIndexFrame(p)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const p=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(k=>{const V=new m.default(k.attendeeId);return!(V.base()===p&&V.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:g,videoDownlinkBandwidthPolicy:d,videoUplinkBandwidthPolicy:y}=this.context,E=g.allVideoSendingSourcesExcludingSelf(p);g.integrateIndexFrame(c),d.updateIndex(g),y.updateIndex(g),this.resubscribe(d,y),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const w=g.allVideoSendingSourcesExcludingSelf(p);this.areVideoSourcesEqual(E,w)||this.context.audioVideoController.forEachObserver(k=>{e.Maybe.of(k.remoteVideoSourcesDidChange).map(V=>V.bind(k)(w))})}areVideoSourcesEqual(c,p){if(c.length!==p.length)return!1;const g=o((E,w)=>E.attendee.attendeeId.localeCompare(w.attendee.attendeeId),"compare"),d=[...c].sort(g),y=[...p].sort(g);for(let E=0;E<d.length;E++)if(d[E].attendee.attendeeId!==y[E].attendee.attendeeId)return!1;return!0}resubscribe(c,p){const g=c.wantsResubscribe(),d=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&p.wantsResubscribe(),y=g||d;if(this.logger.info(`should resubscribe: ${y} (downlink: ${g} uplink: ${d})`),!y)return;const E=c.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=p.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${d} down=${g}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const p=new u.default;p.remoteVideoAvailable=!this.context.videosToReceive.empty(),p.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(p))&&(this.context.lastKnownVideoAvailability=p.clone(),this.context.audioVideoController.forEachObserver(g=>{e.Maybe.of(g.videoAvailabilityDidChange).map(d=>d.bind(g)(p.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const p=[];let g=!1;for(const d of this.context.videoSendCodecPreferences){let y=!1;for(const E of c.supportedReceiveCodecIntersection)if(d.equals(a.default.fromSignaled(E))){y=!0,p.push(d);break}this.context.currentVideoSendCodec!==void 0&&!y&&d.equals(this.context.currentVideoSendCodec)&&(g=!0)}p.length>0?this.context.meetingSupportedVideoSendCodecPreferences=p:(this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0),this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),g&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const p of this.context.videoTileController.getAllVideoTiles()){const g=p.state();c.contain(g.streamId)?p.markPoorConnection()&&this.logger.info(`marks the tile ${g.tileId} as having a poor connection`):p.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${g.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=n},"1ZHK":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}onFallback(u,m){var a;for(const s of this.observers)(a=s.voiceFocusFellBackToInnerStream)===null||a===void 0||a.call(s,u,m)}onCPUWarning(){var u;for(const m of this.observers)(u=m.voiceFocusInsufficientResources)===null||u===void 0||u.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=S},"1i73":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("MpTp"));let u=o(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=u},"1uai":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let S=o(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=S},"25+x":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54"));let m=o(class cS{getInnerDevice(){return this.device}mute(i){return S(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return S(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return S(this,void 0,void 0,function*(){return this.device===i&&!a(i)?this:new cS(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return S(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return S(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const r=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,r),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const g of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(g);this.createMixSourceNode()}const c=this.node,p=this.node;return{start:c,end:p}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(i){return S(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return S(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return S(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return S(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return S(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return S(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,n,r=!1,c=void 0,p=new u.default,g=new Map,d=void 0,y=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=n,this.failed=r,this.node=c,this.browserBehavior=p,this.farEndStreamToAudioSourceNode=g,this.mixDestNode=d,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function a(s){return s==="default"?!0:!s||typeof s!="object"?!1:"deviceId"in s&&s.deviceId==="default"||"id"in s&&s.id==="default"}o(a,"isDefaultDevice"),l.default=m},"2Bsk":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.PermissionDenied=2]="PermissionDenied",h[h.TimedOut=3]="TimedOut",h[h.ConnectionFailed=4]="ConnectionFailed"})(S=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=S},"2IS5":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=f("XCDq"),u=S(f("VPK4")),m=S(f("PbSJ")),a=S(f("HrOX")),s=S(f("QPT4")),i={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=o(class{static from(n){let r;try{r=h.SdkTranscriptFrame.decode(n.data)}catch(p){throw new Error("Cannot decode transcript data message: "+p)}const c=[];for(const p of r.events)if(p.status){const g=i[p.status.type];if(!g)continue;const d=new m.default;d.type=g,d.eventTimeMs=p.status.eventTime,d.transcriptionRegion=p.status.transcriptionRegion,d.transcriptionConfiguration=p.status.transcriptionConfiguration,p.status.message&&(d.message=p.status.message),c.push(d)}else if(p.transcript){const g=new u.default;g.results=[];for(const d of p.transcript.results){const y={channelId:d.channelId,isPartial:d.isPartial,resultId:d.resultId,startTimeMs:d.startTime,endTimeMs:d.endTime,alternatives:[]};if(d.languageCode&&(y.languageCode=d.languageCode),d.languageIdentification&&d.languageIdentification.length>0){y.languageIdentification=[];for(const E of d.languageIdentification){const w={languageCode:E.languageCode,score:E.score};y.languageIdentification.push(w)}}for(const E of d.alternatives){const w={items:[],transcript:E.transcript};for(const k of E.items){const V={content:k.content,attendee:{attendeeId:k.speakerAttendeeId,externalUserId:k.speakerExternalUserId},startTimeMs:k.startTime,endTimeMs:k.endTime,type:null};switch(k.vocabularyFilterMatch&&(V.vocabularyFilterMatch=k.vocabularyFilterMatch),k.hasOwnProperty("stable")&&(V.stable=k.stable),k.hasOwnProperty("confidence")&&(V.confidence=k.confidence),k.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:V.type=s.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:V.type=s.default.PUNCTUATION;break}w.items.push(V)}for(const k of E.entities){w.entities||(w.entities=[]);const V={category:k.category,confidence:k.confidence,content:k.content,startTimeMs:k.startTime,endTimeMs:k.endTime};k.type&&(V.type=k.type),w.entities.push(V)}y.alternatives.push(w)}g.results.push(y)}c.push(g)}return c}},"TranscriptEventConverter");l.TranscriptEventConverter=e},"2M37":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("my46"));let u=o(class uS{clone(){return new uS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,s=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=s}},"MeetingFeatures");l.default=u},"2ZyS":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var S=f("V7js"),h=function(){function u(){this.state=Int32Array.from(S.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return o(u,"RawSha2561"),u.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>S.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===S.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},u.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%S.BLOCK_SIZE>=S.BLOCK_SIZE-8){for(var i=this.bufferLength;i<S.BLOCK_SIZE;i++)a.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<S.BLOCK_SIZE-8;i++)a.setUint8(i,0);a.setUint32(S.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(S.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(S.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},u.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],c=s[5],p=s[6],g=s[7],d=0;d<S.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(a[d*4]&255)<<24|(a[d*4+1]&255)<<16|(a[d*4+2]&255)<<8|a[d*4+3]&255;else{var y=this.temp[d-2],E=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var w=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(E+this.temp[d-7]|0)+(w+this.temp[d-16]|0)}var k=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&p)|0)+(g+(S.KEY[d]+this.temp[d]|0)|0)|0,V=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;g=p,p=c,c=r,r=n+k|0,n=t,t=e,e=i,i=k+V|0}s[0]+=i,s[1]+=e,s[2]+=t,s[3]+=n,s[4]+=r,s[5]+=c,s[6]+=p,s[7]+=g},u}();l.RawSha256=h},"2ede":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let S=o(class{getPromise(){return this.promise}resolvePromise(u){this.resolve(u)}resolveAndReplacePromise(u){this.resolve(u),this.promise=new Promise((m,a)=>{this.resolve=m,this.reject=a})}rejectPromise(u){this.reject(u)}rejectAndReplacePromise(u){this.reject(u),this.promise=new Promise((m,a)=>{this.resolve=m,this.reject=a})}constructor(){this.promise=new Promise((u,m)=>{this.resolve=u,this.reject=m})}},"DeferredPromise");l.DeferredPromise=S},"2nae":function(j,l,f){"use strict";var S=this&&this.__createBinding||(Object.create?function(jt,pe,Re,Fe){Fe===void 0&&(Fe=Re),Object.defineProperty(jt,Fe,{enumerable:!0,get:function(){return pe[Re]}})}:function(jt,pe,Re,Fe){Fe===void 0&&(Fe=Re),jt[Fe]=pe[Re]}),h=this&&this.__setModuleDefault||(Object.create?function(jt,pe){Object.defineProperty(jt,"default",{enumerable:!0,value:pe})}:function(jt,pe){jt.default=pe}),u=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var pe={};if(jt!=null)for(var Re in jt)Re!=="default"&&Object.prototype.hasOwnProperty.call(jt,Re)&&S(pe,jt,Re);return h(pe,jt),pe},m=this&&this.__awaiter||function(jt,pe,Re,Fe){function qe(vt){return vt instanceof Re?vt:new Re(function(lt){lt(vt)})}return o(qe,"adopt"),new(Re||(Re=Promise))(function(vt,lt){function Nt(Bt){try{fn(Fe.next(Bt))}catch(Ci){lt(Ci)}}o(Nt,"fulfilled");function ln(Bt){try{fn(Fe.throw(Bt))}catch(Ci){lt(Ci)}}o(ln,"rejected");function fn(Bt){Bt.done?vt(Bt.value):qe(Bt.value).then(Nt,ln)}o(fn,"step"),fn((Fe=Fe.apply(jt,pe||[])).next())})},a=this&&this.__importDefault||function(jt){return jt&&jt.__esModule?jt:{default:jt}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(f("1Cbm")),i=a(f("WHnE")),e=a(f("SO8M")),t=a(f("Sa54")),n=a(f("RfPO")),r=a(f("8dVZ")),c=a(f("dWQL")),p=a(f("6Bxv")),g=a(f("lUhs")),d=a(f("v8aG")),y=a(f("bTau")),E=a(f("ML5K")),w=a(f("gTDO")),k=a(f("6/h7")),V=a(f("9ETa")),F=a(f("JHsX")),N=a(f("I0Bj")),P=a(f("87Nr")),x=a(f("jP1N")),O=u(f("DUgj")),M=a(f("hEYi")),D=a(f("/sFY")),J=f("f2XL"),q=a(f("R9j3")),$=a(f("5ViG")),de=a(f("yMiq")),Ee=a(f("teem")),_e=a(f("Fyq9")),ye=a(f("7W6Z")),Be=a(f("N9oo")),pt=a(f("xJ9D")),Ve=a(f("FCN7")),gt=a(f("curu")),dt=a(f("3Ft5")),Je=a(f("mjQB")),_t=a(f("mv1L")),ot=a(f("LNXf")),Et=a(f("LhvI")),Mt=a(f("WRer")),ze=a(f("cizm")),$t=a(f("5z6C")),Un=a(f("1J7j")),ni=a(f("0jNb")),an=a(f("8tla")),Gn=a(f("ohOv")),si=a(f("CRwe")),ri=a(f("ZPwG")),On=a(f("L+i+")),Gi=a(f("yqyw")),ui=a(f("IBi3")),Fi=a(f("riOr")),Hi=a(f("OND3")),Sn=a(f("NUAg")),un=f("KyYT"),bn=a(f("XJrD")),Ot=a(f("nYR4")),En=a(f("5mR7")),Lt=f("P7D+"),Hn=a(f("Zkgh")),Ji=a(f("ldli")),$n=a(f("nq15")),Ti=a(f("+D+n")),Ir=a(f("rcF0")),er=a(f("LUct")),cr=a(f("hhlX")),gi=a(f("P3Bx")),Yi=a(f("rEUf"));let Xi=o(class Vc{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new s.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(pe){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(pe):null}setAudioProfile(pe){this._audioProfile=pe}addObserver(pe){this.logger.info("adding meeting observer"),this.observerQueue.add(pe)}removeObserver(pe){this.logger.info("removing meeting observer"),this.observerQueue.delete(pe)}forEachObserver(pe){for(const Re of this.observerQueue)k.default.nextTick(()=>{this.observerQueue.has(Re)&&pe(Re)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new Yi.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new x.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const pe=o(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(Re){Re.type===M.default.WebSocketClosed&&pe()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(pe=>{this.logger.error(`Signaling task pre-start failed: ${pe}`),this.signalingTask=void 0})}start(pe){this.startReturningPromise(pe).then(()=>{this.logger.info("start completed")}).catch(Re=>{this.logger.error(`start failed: ${Re}`)})}startReturningPromise(pe){return(pe==null?void 0:pe.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((Re,Fe)=>{this.sessionStateController.perform(F.default.Connect,()=>{this.actionConnect(!1).then(Re).catch(Fe)})}))}connectWithPromises(pe){const Re=this.meetingSessionContext,Fe=o((tr,ai)=>new On.default(this.logger,ai,tr),"timeout");this.monitorTask=new dt.default(Re,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const qe=this.monitorTask.once(),vt=new Et.default(Re).once();this.receiveIndexTask=new Un.default(Re),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const lt=new an.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new gt.default(Re),new ni.default(Re),new pt.default(Re),new ze.default(Re),this.receiveIndexTask]).once(),Nt=new _e.default(Re).once(lt),ln=new $.default(Re).once(Nt,vt),fn=new ye.default(Re).once(ln),Bt=new Gn.default(Re).once(fn),Ci=new Be.default(Re).once(Bt),Si=new ri.default(Re).once(Ci),gr=new Mt.default(Re).once(Si);return new an.default(this.logger,this.wrapTaskName("AudioVideoStart"),[qe,Fe(this.configuration.connectionTimeoutMs,new an.default(this.logger,"Peer",[Si,gr,pe?new On.default(this.logger,new _t.default(this.logger,"FinalizeConnection",[new Gi.default(Re),new si.default(Re)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new si.default(Re)]))])}actionConnect(pe){var Re;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const Fe=!!this.configuration.urls.audioHostURL;if(Fe?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Fi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Hi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new ui.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new Sn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new gi.default(this.logger,this._realtimeController,Vc.MIN_VOLUME_DECIBELS,Vc.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let lt=this.meetingSessionContext.videoUplinkBandwidthPolicy;lt||(lt=new er.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=lt),lt.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new En.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new $n.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Ji.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new cr.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Ot.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const lt=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;lt&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(lt)}else{const lt=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(lt)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new d.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new bn.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new Hn.default,this.meetingSessionContext.videosPaused=new Hn.default,this.meetingSessionContext.statsCollector=new q.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new r.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,Vc.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},pe||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(lt=>{un.Maybe.of(lt.audioVideoDidStartConnecting).map(Nt=>Nt.bind(lt)(!1))}),(Re=this.eventController)===null||Re===void 0||Re.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const qe=Fe&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+qe);const vt=this.connectWithPromises(qe);try{yield vt.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(F.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(lt){this.signalingTask=void 0;const Nt=new p.default(this.getMeetingStatusCode(lt)||g.default.TaskFailed);if(this.logger.info(`Start failed: ${Nt} due to error ${lt}.`),this.sessionStateController.state()===N.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(F.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(Nt,!0,lt),this.handleMeetingSessionStatus(Nt,lt)||this.notifyStop(Nt,lt)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new On.default(this.logger,new Je.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=J.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(pe=>{un.Maybe.of(pe.audioVideoDidStart).map(Re=>Re.bind(pe)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var pe;return this.sessionStateController.state()===N.default.NotConnected?((pe=this.meetingSessionContext.signalingClient)===null||pe===void 0||pe.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((Re,Fe)=>{this.sessionStateController.perform(F.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new p.default(g.default.Left),!1,null).then(Re).catch(Fe)})})}stop(){this.stopReturningPromise()}actionDisconnect(pe,Re,Fe){return m(this,void 0,void 0,function*(){try{yield new an.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new On.default(this.logger,new Ve.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const qe=[new On.default(this.logger,new Ee.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new an.default(this.logger,this.wrapTaskName("AudioVideoClean"),qe).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(F.default.FinishDisconnecting,()=>{Re||this.notifyStop(pe,Fe)})})}update(){let Re=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(Re||(Re=this.meetingSessionContext.peer===void 0),Re||(Re=!this.updateRemoteVideosFromPolicy()),Re||(Re=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!Re)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const Fe=this.sessionStateController.perform(F.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return Fe===P.default.Transitioned||Fe===P.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!O.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===O.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const pe=this.detectChangesInVideosToReceive();if(pe===void 0)return!1;const Re=pe.added,Fe=pe.simulcastStreamUpdates,qe=pe.removed,vt=this.meetingSessionContext,lt=[];for(const[Nt,ln]of Fe.entries()){const fn=new D.default;if(fn.streamId=ln,fn.attendeeId=vt.videoStreamIndex.attendeeIdForStreamId(ln),fn.mid=vt.transceiverController.getMidForStreamId(Nt),fn.mid===void 0)return this.logger.info(`No MID found for stream ID ${Nt}, cannot update stream without renegotiation`),!1;if(lt.push(fn),vt.transceiverController.setStreamIdForMid(fn.mid,ln),vt.videoStreamIndex.overrideStreamIdMappings(Nt,ln),vt.videoTileController.haveVideoTileForAttendeeId(fn.attendeeId)){const Bt=vt.videoTileController.getVideoTileForAttendeeId(fn.attendeeId);if(!Bt.setStreamId)return!1;Bt.setStreamId(ln)}}return lt.length!==0&&vt.signalingClient.remoteVideoUpdate(lt,[]),Re.length!==0||qe.length!==0?!1:(vt.videoStreamIndex.subscribeFrameSent(),!0)}detectChangesInVideosToReceive(){const pe=this.meetingSessionContext;if(pe.videosToReceive===null||!pe.transceiverController||!pe.transceiverController.getMidForStreamId||!pe.transceiverController.setStreamIdForMid||!pe.videosToReceive.forEach||!pe.signalingClient.remoteVideoUpdate||!pe.videoStreamIndex.overrideStreamIdMappings)return;let Re=[];const Fe=new Map;let qe=[];if(pe.lastVideosToReceive===null)Re=pe.videosToReceive.array();else{const vt=pe.videoStreamIndex;pe.videosToReceive.forEach(lt=>{if(pe.lastVideosToReceive.contain(lt))return;let Nt=!1;pe.lastVideosToReceive.forEach(ln=>{Nt||vt.StreamIdsInSameGroup(ln,lt)&&(Fe.set(ln,lt),Nt=!0)}),Nt||Re.push(lt)}),qe=pe.lastVideosToReceive.array().filter(lt=>{const Nt=pe.videosToReceive.contain(lt),ln=Fe.has(lt);return!Nt&&!ln})}return this.logger.info(`Request to update remote videos with added: ${Re}, updated: ${[...Fe.entries()]}, removed: ${qe}`),{added:Re,removed:qe,simulcastStreamUpdates:Fe}}isNotAddingOrRemovingStreams(){const pe=this.detectChangesInVideosToReceive();if(pe===void 0)return!1;const Re=pe.added,Fe=pe.removed;return!(Re.length!==0||Fe.length!==0)}sendRemoteVideoUpdate(){const pe=this.meetingSessionContext;if(pe.videosToReceive===null)return!1;const Re=pe.videosToReceive.array().map(Nt=>pe.videoStreamIndex.groupIdForStreamId(Nt)),Fe=Lt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(pe,Re,pe.videoDownlinkBandwidthPolicy.getVideoPreferences()),qe=new Map,vt=[];for(const Nt of Fe){let ln=!1;if(!pe.lastVideoSubscriptionConfiguration.has(Nt.groupId))ln=!0;else{const fn=pe.lastVideoSubscriptionConfiguration.get(Nt.groupId);Nt.equals(fn)||(this.logger.debug(`${JSON.stringify(Nt)} does not equal ${JSON.stringify(fn)}, sending update`),ln=!0)}qe.set(Nt.groupId,Nt),ln&&vt.push(Nt)}pe.lastVideoSubscriptionConfiguration=qe;const lt=[];if(pe.lastVideosToReceive!==null){const Nt=new Set(Re);for(const ln of pe.lastVideosToReceive.array()){const fn=pe.videoStreamIndex.groupIdForStreamId(ln);if(!Nt.has(fn)){const Bt=pe.transceiverController.getMidForGroupId(fn);if(Bt===void 0){pe.logger.warn(`Could not find MID for group ID to remove: ${fn}`);continue}lt.push(Bt)}}}return(vt.length!==0||lt.length!==0)&&pe.signalingClient.remoteVideoUpdate(vt,lt),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const pe=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(pe)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const pe=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!pe||!pe.headerExtensions?!1:pe.headerExtensions.some(Re=>Re.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(pe){const Re=o(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),pe()}),"restartVideo"),Fe=this.sessionStateController.perform(F.default.Update,()=>{Re()});return Fe===P.default.Transitioned||Fe===P.default.DeferredTransition}replaceLocalVideo(pe){return m(this,void 0,void 0,function*(){if(!pe||pe.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const Re=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(Re){const Fe=Re.state(),qe=pe.getVideoTracks()[0].getSettings();Re.bindVideoStream(Fe.boundAttendeeId,!0,pe,qe.width,qe.height,Fe.streamId,Fe.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(pe.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=pe,this.logger.info("Local video input is updated")})}replaceLocalAudio(pe){return m(this,void 0,void 0,function*(){if(!pe||pe.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(pe.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=pe,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(pe){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new an.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new $t.default(this.meetingSessionContext),new On.default(this.logger,new an.default(this.logger,"UpdateSession",[new $.default(this.meetingSessionContext),new ye.default(this.meetingSessionContext),new Gn.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new ri.default(this.meetingSessionContext),new si.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),pe&&this.sessionStateController.perform(F.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(Re){this.sessionStateController.perform(F.default.FinishUpdating,()=>{const Fe=new p.default(this.getMeetingStatusCode(Re)||g.default.TaskFailed);Fe.statusCode()!==g.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(Fe,Re)})}})}notifyStop(pe,Re){var Fe;if(this.forEachObserver(qe=>{un.Maybe.of(qe.audioVideoDidStop).map(vt=>vt.bind(qe)(pe))}),this.promotedToPrimaryMeeting&&Re&&this.forEachObserver(qe=>{this.promotedToPrimaryMeeting=!1,un.Maybe.of(qe.audioVideoWasDemotedFromPrimaryMeeting).map(vt=>vt.bind(qe)(new p.default(g.default.SignalingInternalServerError)))}),this.eventController){const{signalingOpenDurationMs:qe,poorConnectionCount:vt,startTimeMs:lt,iceGatheringDurationMs:Nt,attendeePresenceDurationMs:ln,meetingStartDurationMs:fn}=this.meetingSessionContext,Bt={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:lt===null?0:Math.round(Date.now()-lt),meetingStatus:g.default[pe.statusCode()],signalingOpenDurationMs:qe,iceGatheringDurationMs:Nt,attendeePresenceDurationMs:ln,poorConnectionCount:vt,meetingStartDurationMs:fn,retryCount:this.totalRetryCount},Ci=Re&&Re.message||((Fe=pe.toString)===null||Fe===void 0?void 0:Fe.call(pe))||"";Bt.meetingDurationMs===0?(Bt.meetingErrorMessage=Ci,delete Bt.meetingDurationMs,delete Bt.attendeePresenceDurationMs,delete Bt.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Bt)):pe.isFailure()||pe.isAudioConnectionFailure()?(Bt.meetingErrorMessage=Ci,this.eventController.publishEvent("meetingFailed",Bt)):this.eventController.publishEvent("meetingEnded",Bt)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const pe=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(pe)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(pe,Re){const Fe=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===N.default.NotConnected?this.sessionStateController.perform(F.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(F.default.Reconnect,()=>{this.actionReconnect(pe)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return Fe||this.sessionStateController.perform(F.default.Fail,()=>{this.actionDisconnect(pe,!1,Re)}),Fe}actionReconnect(pe){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(Re=>{un.Maybe.of(Re.audioVideoDidStartConnecting).map(Fe=>Fe.bind(Re)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new an.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new On.default(this.logger,new an.default(this.logger,"Media",[new de.default(this.meetingSessionContext),new an.default(this.logger,"Signaling",[new Je.default(this.meetingSessionContext),new pt.default(this.meetingSessionContext),new ze.default(this.meetingSessionContext)]),new _e.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new $t.default(this.meetingSessionContext),new On.default(this.logger,new an.default(this.logger,"UpdateSession",[new $.default(this.meetingSessionContext),new ye.default(this.meetingSessionContext),new Gn.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new ri.default(this.meetingSessionContext),new si.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(F.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:Re,poorConnectionCount:Fe,startTimeMs:qe,iceGatheringDurationMs:vt,attendeePresenceDurationMs:lt,meetingStartDurationMs:Nt}=this.meetingSessionContext,ln={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-qe),meetingStatus:g.default[pe.statusCode()],signalingOpenDurationMs:Re,iceGatheringDurationMs:vt,attendeePresenceDurationMs:lt,poorConnectionCount:Fe,meetingStartDurationMs:Nt,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",ln)}this.actionFinishConnecting()})}catch(Re){this.sessionStateController.perform(F.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const Fe=new p.default(this.getMeetingStatusCode(Re)||g.default.TaskFailed);this.handleMeetingSessionStatus(Fe,Re)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(pe){return`${pe}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(pe){const Re=/the meeting status code: (\d+)/.exec(pe&&pe.message);return Re&&Re.length>1?Number.parseInt(Re[1],10):null}enforceBandwidthLimitationForSender(pe){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(pe)})}handleMeetingSessionStatus(pe,Re){if(this.logger.info(`handling status: ${g.default[pe.statusCode()]}`),pe.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(pe),pe.statusCode()===g.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(pe.statusCode()===g.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(Fe=>{un.Maybe.of(Fe.videoSendDidBecomeUnavailable).map(qe=>qe.bind(Fe)())}),!1;if(pe.statusCode()===g.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(Fe=>{un.Maybe.of(Fe.audioVideoWasDemotedFromPrimaryMeeting).map(qe=>qe.bind(Fe)(pe))}),!1;if(pe.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(pe.isFailure()||pe.isTerminal())&&this.meetingSessionContext.reconnectController){const Fe=this.reconnect(pe,Re);return Fe?this.logger.warn(`will retry due to status code ${g.default[pe.statusCode()]}${Re?` and error: ${Re.message}`:""}`):this.logger.error(`failed with status code ${g.default[pe.statusCode()]}${Re?` and error: ${Re.message}`:""}`),Fe}return!1}setVideoMaxBandwidthKbps(pe){if(pe<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${pe} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(pe)),this.maxUplinkBandwidthKbps=pe}handleHasBandwidthPriority(pe){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(pe),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const Re=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(pe);const Fe=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();Re!==Fe&&(this.logger.info(`video send bandwidth priority ${pe} max has changed from ${Re} kbps to ${Fe} kbps`),yield this.enforceBandwidthLimitationForSender(Fe))}})}pauseReceivingStream(pe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([pe])}resumeReceivingStream(pe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([pe])}setVideoCodecSendPreferences(pe){this.videoSendCodecPreferences=pe,this.meetingSessionContext.videoSendCodecPreferences=pe,this.sessionStateController.state()!==N.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:pe}=this.meetingSessionContext;if(!pe)return this.logger.info("meeting has not started"),[];const Re=this.configuration.credentials.attendeeId;return pe.allVideoSendingSourcesExcludingSelf(Re)}encodingSimulcastLayersDidChange(pe){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(Re=>{un.Maybe.of(Re.encodingSimulcastLayersDidChange).map(Fe=>Fe.bind(Re)(pe))})}promoteToPrimaryMeeting(pe){return this.actionPromoteToPrimaryMeeting(pe)}actionPromoteToPrimaryMeeting(pe){return m(this,void 0,void 0,function*(){let Re=new p.default(g.default.SignalingRequestFailed);return yield new an.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new On.default(this.logger,new ot.default(this.meetingSessionContext,pe,Fe=>{Re=Fe}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=Re.statusCode()===g.default.OK,Re})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(pe=>{un.Maybe.of(pe.audioVideoWasDemotedFromPrimaryMeeting).map(Re=>Re.bind(pe)(new p.default(g.default.OK)))})}videoInputDidChange(pe){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(pe?yield this.replaceLocalVideo(pe):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(pe){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!pe)try{pe=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(pe)})}constructor(pe,Re,Fe,qe,vt,lt){this._audioProfile=new e.default,this.connectionHealthData=new n.default,this.observerQueue=new Set,this.meetingSessionContext=new Yi.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this._logger=Re,this.sessionStateController=new V.default(this._logger),this._configuration=pe,this._webSocketAdapter=Fe,this._realtimeController=new w.default(qe),this._realtimeController.realtimeSetLocalAttendeeId(pe.credentials.attendeeId,pe.credentials.externalUserId),this._mediaStreamBroker=qe,this._reconnectController=vt,this._videoTileController=new Ti.default(new Ir.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=lt}},"DefaultAudioVideoController");l.default=Xi,Xi.MIN_VOLUME_DECIBELS=-42,Xi.MAX_VOLUME_DECIBELS=-14,Xi.PING_PONG_INTERVAL_MS=1e4},"2oFa":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=S},"2q7c":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("aVV0"));let u=o(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,s,i="RunnableTask"){super(a),this.fn=s,this.taskName=i}},"RunnableTask");l.default=u},"2vi8":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("HbHZ")),m=f("XCDq"),a=h(f("j+uH"));let s=o(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let n=o(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(p){if(p.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}p.type===u.default.ReceivedSignalFrame&&p.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(p,g){this.signalingClient=p,this.logger=g}},"Interceptor");const r=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=r,this.context.signalingClient.registerObserver(r)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=s},"2wCG":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"SDPMediaSection");l.default=S},"2xSc":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptEntity");l.default=S},"2y31":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("uctb"));let u=o(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=u},"34ho":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.Modality="#content"})(S||(S={})),l.default=S},"3E7f":function(j,l,f){"use strict";j.exports={}},"3EKQ":function(j,l,f){"use strict";(function(S){var h=this&&this.__awaiter||function(n,r,c,p){function g(d){return d instanceof c?d:new c(function(y){y(d)})}return o(g,"adopt"),new(c||(c=Promise))(function(d,y){function E(V){try{k(p.next(V))}catch(F){y(F)}}o(E,"fulfilled");function w(V){try{k(p.throw(V))}catch(F){y(F)}}o(w,"rejected");function k(V){V.done?d(V.value):g(V.value).then(E,w)}o(k,"step"),k((p=p.apply(n,r||[])).next())})},u=this&&this.__rest||function(n,r){var c={};for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&r.indexOf(p)<0&&(c[p]=n[p]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,p=Object.getOwnPropertySymbols(n);g<p.length;g++)r.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(n,p[g])&&(c[p[g]]=n[p[g]]);return c},m=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(f("Np2I")),s=m(f("8wPz")),i=m(f("X3Fi")),e=f("R4Nl");let t=o(class dl{addEventListeners(){!this.beaconEventListener||!("window"in S)||!window.addEventListener||!("document"in S)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(r){(r.type==="visibilitychange"&&document.visibilityState==="hidden"||r.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in S)||!window.removeEventListener||!("document"in S)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var r;this.removeEventListeners(),this.addEventListeners(),(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=new s.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var r;(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(r){return h(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(r)}`);const{name:c,ts:p,attributes:g}=r,d=g&&this.filterAttributes(g,this.attributesToFilter),y=Object.assign({name:c,ts:p},d);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(y)}`);const E=this.getSize(y);if(E>dl.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${E} bytes. Item cannot exceed max item size allowed of ${dl.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(c)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(y)}`),this.sendEventImmediately({name:c,ts:p,attributes:d});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(y),this.ingestionEventSize+=E,this.bufferItemThresholdReached(E)){const w=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(w),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(r,c){const p=new Set(c);return Object.keys(r).filter(d=>p.has(d)).forEach(d=>delete r[d]),r}initializeAndGetCurrentIngestionEvent(){const r={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(r),r}bufferItemThresholdReached(r){return r+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===dl.MAX_PAYLOAD_ITEMS}getSize(r){let c=0;if(typeof r=="object")for(const[p,g]of Object.entries(r))c+=this.getPrimitiveSize(p),c+=this.getSize(g);else c+=this.getPrimitiveSize(r);return c}getPrimitiveSize(r){let c=0;return typeof r=="string"?c+=r.length*2:typeof r=="number"&&(c+=8),c}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(r){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(r=Math.min(this.buffer.length,r+1),this.buffer.splice(c,r))}makeBeaconRequestBody(r){const c={metadata:this.metadata,events:r,authorization:this.authenticationToken};return JSON.stringify(c)}makeRequestBody(r){const c={metadata:this.metadata,events:r};return JSON.stringify(c)}sendEventImmediately(r){return h(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(r)}`);const{name:c,ts:p,attributes:g}=r,d={type:this.type,v:this.v,payloads:[Object.assign({name:c,ts:p},g)]};let y=!1,E=null;const w=this.makeRequestBody([d]);try{if(E=yield this.send(w),E.ok){try{const k=yield E.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${w}, message: ${JSON.stringify(k)}`)}catch(k){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${k} for event ${w}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${w} with response status ${E.status}`),y=!0}catch(k){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${w} to the ingestion endpoint ${k}.`),y=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const V=this.makeBeaconRequestBody([d]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${V}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,V)?y=!1:y=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${w}`),y=!0}}y&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${w}`),this.failedIngestionEvents.push(d))})}send(r){return h(this,void 0,void 0,function*(){const c=new a.default(dl.RETRY_FIXED_BACKOFF_WAIT_MS,dl.RETRY_SHORT_BACKOFF_MS,dl.RETRY_LONG_BACKOFF_MS);try{let p=0;for(;p<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:r});if(g.ok||!dl.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${r} due to status code ${g.status}.`),p++,p<this.retryCountLimit){const d=c.nextBackoffAmountMs();yield e.wait(d)}}if(p===this.retryCountLimit)throw new Error(`Retry count limit reached for ${r}`)}catch(p){throw p}})}sendBeacon(){return h(this,void 0,void 0,function*(){const r=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(r)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const p=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);r.push(p),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(p)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const p=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));r.push(...p),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(p)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(p=>{r.push(...p),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(p)}`)}),this.cancellableEvents.clear()),r.length===0)return;const c=this.makeBeaconRequestBody(r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${c}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,c)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${c}`)}catch(p){this.logger.warn(`Event Reporting - Sending beacon data ${c} failed with error ${p}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return h(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(r,c,p,g,d){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=J=>({type:J.type,v:J.v,payloads:[...J.payloads]}),this.sendEvents=()=>h(this,void 0,void 0,function*(){if(this.lock)return;const J=this.getItems(this.flushSize);if(J.length===0)return;this.lock=!0;const q=this.makeRequestBody(J);let $=!1;const de=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(de,J);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${q}`);const Ee=yield this.send(q);if(this.cancellableEvents.delete(de),!Ee.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${q} with response status ${Ee.status}`),$=!0;else try{const _e=yield Ee.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${q} message: ${JSON.stringify(_e)}`)}catch(_e){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${_e} for events ${q}`)}}catch(Ee){$=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${q} to the ingestion endpoint ${Ee}`)}finally{this.lock=!1}$&&(this.cancellableEvents.delete(de),this.failedIngestionEvents.push(...J))});const y=new i.default(d).getParserResult(),{browserMajorVersion:E}=y,w=u(y,["browserMajorVersion"]),k=c.toJSON(),{type:V,v:F}=k,N=u(k,["type","v"]);this.authenticationToken=c.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},w),N),Object.keys(this.metadata).forEach(J=>this.attributesToFilter.push(J)),this.type=V,this.v=F,this.ingestionURL=p,this.logger=d,this.importantEvents=new Set(g);const{maxBufferCapacityKb:P,totalBufferItems:x,flushSize:O,flushIntervalMs:M,retryCountLimit:D}=r;this.maxBufferCapacityBytes=P*1024,this.totalBufferItems=x,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/x),this.flushIntervalMs=M,this.flushSize=O,this.retryCountLimit=D,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=J=>this.beaconEventHandler(J),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=t,t.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),t.RETRY_FIXED_BACKOFF_WAIT_MS=0,t.RETRY_SHORT_BACKOFF_MS=1e3,t.RETRY_LONG_BACKOFF_MS=15e3,t.MAX_PAYLOAD_ITEMS=2,t.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3}).call(this,f("yLpj"))},"3Ft5":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(y,E,w,k){function V(F){return F instanceof w?F:new w(function(N){N(F)})}return o(V,"adopt"),new(w||(w=Promise))(function(F,N){function P(M){try{O(k.next(M))}catch(D){N(D)}}o(P,"fulfilled");function x(M){try{O(k.throw(M))}catch(D){N(D)}}o(x,"rejected");function O(M){M.done?F(M.value):V(M.value).then(P,x)}o(O,"step"),O((k=k.apply(y,E||[])).next())})},h=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("LmyK")),m=h(f("mpmV")),a=h(f("kItj")),s=h(f("LuEC")),i=h(f("pCf5")),e=h(f("6Bxv")),t=h(f("lUhs")),n=h(f("hEYi")),r=f("f2XL"),c=h(f("J+fJ")),p=f("KyYT"),g=h(f("aVV0"));let d=o(class extends g.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(E){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(E){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=E;return}else this.pendingMetricsReport=void 0;const w=E.getObservableMetrics(),k=w.availableOutgoingBitrate,V=w.nackCountReceivedPerSecond;let F=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(E);const N=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(F=F||N,N){const P=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=P.truncate(this.context.videoSubscriptionLimit),P.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${N}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:k/1e3,nackCountPerSecond:V});const P=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();F=F||P,P&&(this.logger.info(`trigger resubscribe for up=${P}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(),this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints())}return F}metricsDidReceive(E){if(this.checkResubscribe(E)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const w=E.streamMetricReports,k=new Map;for(const V in w)w[V].mediaType===m.default.VIDEO&&w[V].direction===u.default.DOWNSTREAM&&k.set(w[V].streamId,w[V])}connectionHealthDidChange(E){E.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,E,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,E,()=>{var w;this.context.poorConnectionCount+=1;const k=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("receivingAudioDropped",k),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(V=>{p.Maybe.of(V.connectionDidSuggestStopVideo).map(F=>F.bind(V)())}):this.context.audioVideoController.forEachObserver(V=>{p.Maybe.of(V.connectionDidBecomePoor).map(F=>F.bind(V)())})},()=>{this.context.audioVideoController.forEachObserver(w=>{p.Maybe.of(w.connectionDidBecomeGood).map(k=>k.bind(w)())})}),this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,E,()=>{var w;const k=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioFailed",k)},()=>{var w;const k=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioRecovered",k)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(E){this.isMeetingConnected=!1}audioVideoDidStop(E){this.isMeetingConnected=!1}applyHealthPolicy(E,w,k,V){E.update(w);const F=E.healthIfChanged();F!==null&&(this.logger.info(`${E.name} value is now ${F}`),F<=E.minimumHealth()?p.Maybe.of(k).map(N=>N.bind(this)()):p.Maybe.of(V).map(N=>N.bind(this)()))}handleBitrateFrame(E){this.currentAvailableStreamAvgBitrates=E,E.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${E.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",E.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(E){var w;if(E.type===n.default.WebSocketClosed&&(E.closeCode===4410||E.closeCode>=4500&&E.closeCode<4600)||E.type===n.default.WebSocketError||E.type===n.default.WebSocketFailed){if(!this.hasSignalingError){const k=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("signalingDropped",k),this.hasSignalingError=!0}}else E.type===n.default.WebSocketOpen&&(this.hasSignalingError=!1);if(E.type===n.default.ReceivedSignalFrame){if(E.message.type===r.SdkSignalFrame.Type.NOTIFICATION){switch(E.message.notification.level){case r.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${E.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${E.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${E.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${E.message.notification.level}: ${E.message.notification.message}`);break}return}if(E.message.bitrates){const V=E.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(V),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(E.message.bitrates)}const k=e.default.fromSignalFrame(E.message);E.message.type!==r.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&k.statusCode()!==t.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(k,null)}}constructor(E,w,k){super(E.logger),this.context=E,this.initialConnectionHealthData=k,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.checkAndSendWeakSignalEvent=V=>{const F=V<1,N=this.prevSignalStrength<1,P=F?N?null:c.default.RedmicStartLoss:N?c.default.RedmicEndLoss:null;P&&this.context.statsCollector.logAudioEvent(P),this.prevSignalStrength=V},this.realtimeFatalErrorCallback=V=>{this.logger.error(`realtime error: ${V}: ${V.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.RealtimeApiFailed),V)},this.realtimeAttendeeIdPresenceHandler=(V,F)=>{var N;const P=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${P}`),P===V&&F&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(N=this.context.eventController)===null||N===void 0||N.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:V,startTimeMs:F,iceGatheringDurationMs:N,attendeePresenceDurationMs:P,meetingStartDurationMs:x}=this.context;return{meetingDurationMs:F===null?0:Math.round(Date.now()-F),signalingOpenDurationMs:V,iceGatheringDurationMs:N,attendeePresenceDurationMs:P,meetingStartDurationMs:x}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const V=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},V),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(E.logger,Object.assign({},w),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},w),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new s.default(E.logger,Object.assign({},w),this.initialConnectionHealthData.clone())}},"MonitorTask");l.default=d},"3ZJV":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Czkq"));let u=o(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=u},"3i7i":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(u,m,a,s,i,e){this.timestampMs=u,this.topic=m,this.data=a,this.senderAttendeeId=s,this.senderExternalUserId=i,this.throttled=!!e}},"DataMessage");l.default=S},"3jln":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("ac3q")),u=S(f("z8+u"));let m=o(class{create(s,i,e){this.connection=new WebSocket(e?s:h.default.urlWithVersion(s),i),this.connection.binaryType="arraybuffer"}send(s){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return s instanceof Uint8Array?this.connection.send(s.buffer):this.connection.send(s),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${u.default[this.readyState()]}`),!1}}close(s,i){var e;(e=this.connection)===null||e===void 0||e.close(s,i)}destroy(){this.connection=void 0}addEventListener(s,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(s,i)}removeEventListener(s,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(s,i)}readyState(){if(!this.connection)return u.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return u.default.Connecting;case WebSocket.OPEN:return u.default.Open;case WebSocket.CLOSING:return u.default.Closing;case WebSocket.CLOSED:return u.default.Closed}}constructor(s){this.logger=s}},"DefaultWebSocketAdapter");l.default=m},"3niY":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(u){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(u){}removeMediaStreamBrokerObserver(u){}},"NoOpMediaStreamBroker");l.default=S},"3sEM":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class Ls{static initializeWorker(){Ls.log("Initializing RedundantAudioEncoder");const u=new Ls;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?u.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?u.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&u.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(u.setupSenderTransform(m.data.send.readable,m.data.send.writable),u.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?u.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?u.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?u.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?u.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&u.setRedundancyEnabled(!1)}}static log(u){Ls.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${u}`})}static getNumRedundantEncodingsForPacketLoss(u){let m=0,a=!1;return u<=8?m=0:u<=18?m=1:u<=75?m=2:(m=0,a=!0),[m,a]}setupPassthroughTransform(u,m){Ls.log("Setting up passthrough transform"),u.pipeTo(m)}setupSenderTransform(u,m){Ls.log("Setting up sender RED transform");const a=new TransformStream({transform:this.senderTransform.bind(this)});u.pipeThrough(a).pipeTo(m)}setupReceiverTransform(u,m){Ls.log("Setting up receiver RED transform");const a=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});u.pipeThrough(a).pipeTo(m)}setRedPayloadType(u){this.redPayloadType=u,Ls.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(u){this.opusPayloadType=u,Ls.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(u){this.numRedundantEncodings=u,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),Ls.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(u){this.redundancyEnabled=u,Ls.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(u,m){u.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(u)}senderTransform(u,m){if(u.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const s=this.getPrimaryPayload(u.timestamp,u.data);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const i=this.encode(u.timestamp,s);if(!i){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}u.data=i,this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}getPrimaryPayload(u,m){const a=this.splitEncodings(u,m);return!a||a.length<1?null:a[a.length-1].payload}splitEncodings(u,m){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const i=new DataView(m);let e=i.byteLength,t=0,n=0,r=0,c=0,p=!1;const g=new Array,d=new Array,y=new Array;for(;e>0;)if(p=(i.getUint8(c)&128)===0,p){if((i.getUint8(c)&127)!==this.opusPayloadType||(t+=this.redLastHeaderSizeBytes,n+=this.redLastHeaderSizeBytes,t>=i.byteLength))return null;r=i.byteLength-t;break}else{if(e<this.redHeaderSizeBytes)return null;const N=((i.getUint8(c+2)&3)<<8)+i.getUint8(c+3);d.push(N);const P=i.getUint16(c+1)>>2,x=u-P;y.push(x),t+=N+this.redHeaderSizeBytes,n+=this.redHeaderSizeBytes,c+=this.redHeaderSizeBytes,e-=this.redHeaderSizeBytes}if(!p)return null;let E=n;for(let N=0;N<y.length;N++){const P=new ArrayBuffer(d[N]);new Uint8Array(P).set(new Uint8Array(i.buffer,E,d[N]),0);const O={timestamp:y[N],payload:P,isRedundant:!0};a&&(O.hasFec=this.opusPacketHasFec(new DataView(P),P.byteLength)),g.push(O),E+=d[N]}const w=i.byteLength-r,k=new ArrayBuffer(r);new Uint8Array(k).set(new Uint8Array(i.buffer,w,r),0);const F={timestamp:u,payload:k,isRedundant:!1,seq:s};return a&&(F.hasFec=this.opusPacketHasFec(new DataView(k),k.byteLength)),g.push(F),g}encode(u,m){const a=m.byteLength;if(a===0||a>=this.maxRedPacketSizeBytes||a>=this.maxAudioPayloadSizeBytes)return null;const s=this.numRedundantEncodings;let i=this.redLastHeaderSizeBytes,e=a,t=this.maxAudioPayloadSizeBytes-a-i;const n=new Array,r=new Array;if(this.redundancyEnabled){let y=this.uint32WrapAround(u-this.redPacketizationTime*this.redPacketDistance);for(let E=0;E<s&&!(this.uint32WrapAround(u-y)>=this.maxRedTimestampOffset);E++){let w=y,k=this.encodingHistory.find(V=>V.timestamp===w);if(k||(w=this.uint32WrapAround(y-this.redPacketizationTime),k=this.encodingHistory.find(V=>V.timestamp===w)),k){const V=k.payload.byteLength;if(t<this.redHeaderSizeBytes+V)break;t-=this.redHeaderSizeBytes+V,i+=this.redHeaderSizeBytes,e+=V,n.unshift(k.timestamp),r.unshift(k.payload)}y-=this.redPacketizationTime*this.redPacketDistance,y=this.uint32WrapAround(y)}}const c=new ArrayBuffer(i+e),p=new DataView(c);let g=0;for(let y=0;y<n.length;y++){const E=u-n[y];p.setUint8(g,this.opusPayloadType|128),p.setUint16(g+1,E<<2|r[y].byteLength>>8),p.setUint8(g+3,r[y].byteLength&255),g+=this.redHeaderSizeBytes}p.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const d=new Uint8Array(c);for(let y=0;y<r.length;y++)d.set(new Uint8Array(r[y]),g),g+=r[y].byteLength;return d.set(new Uint8Array(m),g),g+=m.byteLength,g!==i+e?null:(this.updateEncodingHistory(u,m),c)}updateEncodingHistory(u,m){for(const s of this.encodingHistory){const i=this.redPacketizationTime*this.redMaxRecoveryDistance;if(u-s.timestamp>=i)this.encodingHistory.shift();else break}const a=new DataView(m);(this.opusPacketIsCeltOnly(a)||this.opusPacketHasVoiceActivity(a,a.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:u,payload:m}))}initializePacketLogs(){const u=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(u),index:0,windowSize:u},this.redRecoveryLog={window:new Array(u),index:0,windowSize:u},this.fecRecoveryLog={window:new Array(u),index:0,windowSize:u},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(u,m){const a=u.getMetadata();if(a.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const s=this.splitEncodings(u.timestamp,u.data,!0,a.sequenceNumber);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}for(let i=s.length-1;i>=0;i--)this.updateLossStats(s[i])&&(this.updateRedStats(s[i]),this.updateFecStats(s[i]));this.maybeReportLossStats(s[s.length-1].timestamp,a.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}updateLossStats(u){if(u.isRedundant)return!0;const m=u.timestamp,a=u.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=a,this.addTimestamp(this.primaryPacketLog,m),!0;const s=this.int16(a-this.newestSequenceNumber);return s<-this.maxOutOfOrderPacketDistance?!1:(s<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):s>1&&(this.totalAudioPacketsLost+=s-1),s>0&&(this.totalAudioPacketsExpected+=s,this.newestSequenceNumber=u.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(u){if(!u.isRedundant||this.totalAudioPacketsLost===0)return;const m=u.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(u){if(!u.hasFec||this.totalAudioPacketsLost===0)return;const m=u.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(u,m){u-this.lastLossReportTimestamp<this.lossReportInterval||(Ls.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=u)}addTimestamp(u,m){u.window[u.index]=m,u.index=(u.index+1)%u.windowSize}hasTimestamp(u,m){return!!u.window.find(s=>s===m)}removeTimestamp(u,m){const a=u.window.indexOf(m);return a>=0?(u.window[a]=void 0,!0):!1}removeFromRecoveryWindows(u){let m=this.removeTimestamp(this.redRecoveryLog,u);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,u),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(u){let a=u;return u>=4294967296?a=u-4294967296:u<0&&(a=4294967296+u),a}int16(u){return u<<16>>16}opusPacketIsCeltOnly(u){return!!(u.getUint8(0)&128)}opusPacketGetSamplesPerFrame(u,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let a,s;return this.opusPacketIsCeltOnly(u)?(s=u.getUint8(0)>>3&3,a=(m<<s)/400):(u.getUint8(0)&96)===96?a=u.getUint8(0)&8?m/50:m/100:(s=u.getUint8(0)>>3&3,s===3?a=m*60/1e3:a=(m<<s)/100),a}opusNumSilkFrames(u){let m=this.opusPacketGetSamplesPerFrame(u,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(u){return u.getUint8(0)&4?2:1}opusParseSize(u,m,a,s){return a<1?(s[0]=-1,-1):u.getUint8(m)<252?(s[0]=u.getUint8(m),1):a<2?(s[0]=-1,-1):(s[0]=4*u.getUint8(m+1)+u.getUint8(m),2)}opusPacketParseImpl(u,m,a,s,i,e,t,n){if(!e||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let r,c,p=0,g=!1;const d=u.getUint8(0);s&&(s[0]=d);let y=m-1,E=1,w=y;switch(d&3){case 0:r=1;break;case 1:if(r=2,g=!0,!a){if(y&1)return this.OPUS_INVALID_PACKET;w=y/2,e[0][0]=w}break;case 2:if(r=2,c=this.opusParseSize(u,E,y,e[0]),y-=c,e[0][0]<0||e[0][0]>y)return this.OPUS_INVALID_PACKET;E+=c,w=y-e[0][0];break;default:if(y<1)return this.OPUS_INVALID_PACKET;const k=u.getUint8(E++);if(--y,r=k&63,r<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(u,48e3)*r>5760)return this.OPUS_INVALID_PACKET;if(k&64){let F,N;do{if(y<=0)return this.OPUS_INVALID_PACKET;F=u.getUint8(E++),--y,N=F===255?254:F,y-=N,p+=N}while(F===255)}if(y<0)return this.OPUS_INVALID_PACKET;if(g=!(k&128),g){if(!a){if(w=Math.trunc(y/r),w*r!==y)return this.OPUS_INVALID_PACKET;for(let F=0;F<r-1;++F)e[F][0]=w}}else{w=y;for(let F=0;F<r-1;++F){if(c=this.opusParseSize(u,E,y,e[F]),y-=c,e[F][0]<0||e[F][0]>y)return this.OPUS_INVALID_PACKET;E+=c,w-=c+e[F][0]}if(w<0)return this.OPUS_INVALID_PACKET}}if(a){if(c=this.opusParseSize(u,E,y,e[r-1]),y-=c,e[r-1][0]<0||e[r-1][0]>y)return this.OPUS_INVALID_PACKET;if(E+=c,g){if(e[r-1][0]*r>y)return this.OPUS_INVALID_PACKET;for(let k=0;k<r-1;++k)e[k][0]=e[r-1][0]}else if(!(c+e[r-1][0]<=w))return this.OPUS_INVALID_PACKET}else{if(w>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;e[r-1][0]=w}t&&(t[0]=E);for(let k=0;k<r;++k)i&&(i[k][0]=E),E+=e[k][0];return n&&(n[0]=E+p),r}opusPacketParse(u,m,a,s,i,e){return this.opusPacketParseImpl(u,m,!1,a,s,i,e,null)}opusPacketHasVoiceActivity(u,m){if(!u||m<=0)return 0;if(this.opusPacketIsCeltOnly(u))return-1;const a=this.opusNumSilkFrames(u);if(a===0)return-1;const s=new Array(this.OPUS_MAX_OPUS_FRAMES),i=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)s[t]=[void 0],i[t]=[void 0];const e=this.opusPacketParse(u,m,null,s,i,null);if(e<0)return-1;for(let t=0;t<e;++t){if(i[t][0]<1)continue;if(u.getUint8(s[t][0])>>8-a||this.opusPacketGetNumChannels(u)===2&&u.getUint8(s[t][0])<<a+1>>8-a)return 1}return 0}opusPacketHasFec(u,m){if(!u||m<=0||this.opusPacketIsCeltOnly(u))return!1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let n=0;n<this.OPUS_MAX_OPUS_FRAMES;++n)a[n]=[void 0],s[n]=[void 0];if(this.opusPacketParse(u,m,null,a,s,null)<0||s[0][0]<=1)return!1;const e=this.opusNumSilkFrames(u);if(e===0)return!1;const t=this.opusPacketGetNumChannels(u);if(t!==1&&t!==2)return!1;for(let n=0;n<t;n++)if(u.getUint8(a[0][0])&128>>(n+1)*(e+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=S,S.shouldLog=!1,S.shouldReportStats=!1},"3taG":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("HbHZ")),m=f("XCDq"),a=h(f("j+uH"));let s=o(class extends a.default{run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===u.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=s},"3wzr":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S=f("+br/");S.__exportStar(f("irli"),l)},"3zPy":function(j,l){l=j.exports=function(a){if(a&&typeof a=="object"){var s=a.which||a.keyCode||a.charCode;s&&(a=s)}if(typeof a=="number")return u[a];var i=String(a),e=f[i.toLowerCase()];if(e)return e;var e=S[i.toLowerCase()];if(e)return e;if(i.length===1)return i.charCodeAt(0)};var f=l.code=l.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},S=l.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(h=97;h<123;h++)f[String.fromCharCode(h)]=h-32;for(var h=48;h<58;h++)f[h-48]=h;for(h=1;h<13;h++)f["f"+h]=h+111;for(h=0;h<10;h++)f["numpad "+h]=h+96;var u=l.names=l.title={};for(h in f)u[f[h]]=h;for(var m in S)f[m]=S[m]},"3zlU":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("KsuK")),m=h(f("EkGV")),a=15;let s=o(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return S(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return S(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new u.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,n=new m.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=r=>S(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let p=[];p.push(this.sourceBuffers[0]);try{for(const V of this.processors)p=yield V.process(p)}catch{this.forEachObserver(F=>{F.processingDidFailToStart&&F.processingDidFailToStart()});return}this.destBuffers=p;let g;try{g=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(F=>{F.processingDidFailToStart&&F.processingDidFailToStart()}));return}const d=g.width,y=g.height;d!==0&&y!==0&&(this.canvasOutput.width!==d&&this.canvasOutput.height!==y&&(this.canvasOutput.width=d,this.canvasOutput.height=y),this.outputCtx.drawImage(g,0,0,d,y,0,0,d,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(V=>{V.processingDidStart&&V.processingDidStart()})));const E=performance.now()-c,w=1e3*2/this.framerate-E,k=Math.max(0,1e3/this.framerate-E);w<=0&&this.forEachObserver(V=>{V.processingLatencyTooHigh&&V.processingLatencyTooHigh(E)}),yield this.timer.start(k,this.process.bind(this))}),this.timer=n}},"DefaultVideoFrameProcessorPipeline");l.default=s},"42jQ":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=S},"4EN+":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var S;(function(h){h[h.None=0]="None",h[h.Connecting=1]="Connecting",h[h.Open=2]="Open",h[h.Closing=3]="Closing",h[h.Closed=4]="Closed"})(S=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=S},"4k7n":function(j,l,f){"use strict";var S=f("Yvae"),h=f("uT1x"),u=f("jLvU");function m(a,s,i){var e=a.length;if(e<2)return e?Object(u.a)(a[0]):[];for(var t=-1,n=Array(e);++t<e;)for(var r=a[t],c=-1;++c<e;)c!=t&&(n[t]=Object(S.a)(n[t]||r,a[c],s,i));return Object(u.a)(Object(h.a)(n,1),s,i)}o(m,"baseXor"),l.a=m},"4vb1":function(j,l,f){"use strict";f.r(l),f.d(l,"__extends",function(){return h}),f.d(l,"__assign",function(){return u}),f.d(l,"__rest",function(){return m}),f.d(l,"__decorate",function(){return a}),f.d(l,"__param",function(){return s}),f.d(l,"__metadata",function(){return i}),f.d(l,"__awaiter",function(){return e}),f.d(l,"__generator",function(){return t}),f.d(l,"__createBinding",function(){return n}),f.d(l,"__exportStar",function(){return r}),f.d(l,"__values",function(){return c}),f.d(l,"__read",function(){return p}),f.d(l,"__spread",function(){return g}),f.d(l,"__spreadArrays",function(){return d}),f.d(l,"__await",function(){return y}),f.d(l,"__asyncGenerator",function(){return E}),f.d(l,"__asyncDelegator",function(){return w}),f.d(l,"__asyncValues",function(){return k}),f.d(l,"__makeTemplateObject",function(){return V}),f.d(l,"__importStar",function(){return F}),f.d(l,"__importDefault",function(){return N}),f.d(l,"__classPrivateFieldGet",function(){return P}),f.d(l,"__classPrivateFieldSet",function(){return x});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=o(function(O,M){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,J){D.__proto__=J}||function(D,J){for(var q in J)J.hasOwnProperty(q)&&(D[q]=J[q])},S(O,M)},"extendStatics");function h(O,M){S(O,M);function D(){this.constructor=O}o(D,"__"),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}o(h,"__extends");var u=o(function(){return u=Object.assign||o(function(M){for(var D,J=1,q=arguments.length;J<q;J++){D=arguments[J];for(var $ in D)Object.prototype.hasOwnProperty.call(D,$)&&(M[$]=D[$])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(O,M){var D={};for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&M.indexOf(J)<0&&(D[J]=O[J]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,J=Object.getOwnPropertySymbols(O);q<J.length;q++)M.indexOf(J[q])<0&&Object.prototype.propertyIsEnumerable.call(O,J[q])&&(D[J[q]]=O[J[q]]);return D}o(m,"__rest");function a(O,M,D,J){var q=arguments.length,$=q<3?M:J===null?J=Object.getOwnPropertyDescriptor(M,D):J,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,M,D,J);else for(var Ee=O.length-1;Ee>=0;Ee--)(de=O[Ee])&&($=(q<3?de($):q>3?de(M,D,$):de(M,D))||$);return q>3&&$&&Object.defineProperty(M,D,$),$}o(a,"__decorate");function s(O,M){return function(D,J){M(D,J,O)}}o(s,"__param");function i(O,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,M)}o(i,"__metadata");function e(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})}o(e,"__awaiter");function t(O,M){var D={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,q,$,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(ye){return function(Be){return _e([ye,Be])}}function _e(ye){if(J)throw new TypeError("Generator is already executing.");for(;D;)try{if(J=1,q&&($=ye[0]&2?q.return:ye[0]?q.throw||(($=q.return)&&$.call(q),0):q.next)&&!($=$.call(q,ye[1])).done)return $;switch(q=0,$&&(ye=[ye[0]&2,$.value]),ye[0]){case 0:case 1:$=ye;break;case 4:return D.label++,{value:ye[1],done:!1};case 5:D.label++,q=ye[1],ye=[0];continue;case 7:ye=D.ops.pop(),D.trys.pop();continue;default:if($=D.trys,!($=$.length>0&&$[$.length-1])&&(ye[0]===6||ye[0]===2)){D=0;continue}if(ye[0]===3&&(!$||ye[1]>$[0]&&ye[1]<$[3])){D.label=ye[1];break}if(ye[0]===6&&D.label<$[1]){D.label=$[1],$=ye;break}if($&&D.label<$[2]){D.label=$[2],D.ops.push(ye);break}$[2]&&D.ops.pop(),D.trys.pop();continue}ye=M.call(O,D)}catch(Be){ye=[6,Be],q=0}finally{J=$=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}}o(t,"__generator");function n(O,M,D,J){J===void 0&&(J=D),O[J]=M[D]}o(n,"__createBinding");function r(O,M){for(var D in O)D!=="default"&&!M.hasOwnProperty(D)&&(M[D]=O[D])}o(r,"__exportStar");function c(O){var M=typeof Symbol=="function"&&Symbol.iterator,D=M&&O[M],J=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&J>=O.length&&(O=void 0),{value:O&&O[J++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}o(c,"__values");function p(O,M){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var J=D.call(O),q,$=[],de;try{for(;(M===void 0||M-- >0)&&!(q=J.next()).done;)$.push(q.value)}catch(Ee){de={error:Ee}}finally{try{q&&!q.done&&(D=J.return)&&D.call(J)}finally{if(de)throw de.error}}return $}o(p,"__read");function g(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(p(arguments[M]));return O}o(g,"__spread");function d(){for(var O=0,M=0,D=arguments.length;M<D;M++)O+=arguments[M].length;for(var J=Array(O),q=0,M=0;M<D;M++)for(var $=arguments[M],de=0,Ee=$.length;de<Ee;de++,q++)J[q]=$[de];return J}o(d,"__spreadArrays");function y(O){return this instanceof y?(this.v=O,this):new y(O)}o(y,"__await");function E(O,M,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=D.apply(O,M||[]),q,$=[];return q={},de("next"),de("throw"),de("return"),q[Symbol.asyncIterator]=function(){return this},q;function de(Ve){J[Ve]&&(q[Ve]=function(gt){return new Promise(function(dt,Je){$.push([Ve,gt,dt,Je])>1||Ee(Ve,gt)})})}function Ee(Ve,gt){try{_e(J[Ve](gt))}catch(dt){pt($[0][3],dt)}}function _e(Ve){Ve.value instanceof y?Promise.resolve(Ve.value.v).then(ye,Be):pt($[0][2],Ve)}function ye(Ve){Ee("next",Ve)}function Be(Ve){Ee("throw",Ve)}function pt(Ve,gt){Ve(gt),$.shift(),$.length&&Ee($[0][0],$[0][1])}}o(E,"__asyncGenerator");function w(O){var M,D;return M={},J("next"),J("throw",function(q){throw q}),J("return"),M[Symbol.iterator]=function(){return this},M;function J(q,$){M[q]=O[q]?function(de){return(D=!D)?{value:y(O[q](de)),done:q==="return"}:$?$(de):de}:$}}o(w,"__asyncDelegator");function k(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O[Symbol.asyncIterator],D;return M?M.call(O):(O=typeof c=="function"?c(O):O[Symbol.iterator](),D={},J("next"),J("throw"),J("return"),D[Symbol.asyncIterator]=function(){return this},D);function J($){D[$]=O[$]&&function(de){return new Promise(function(Ee,_e){de=O[$](de),q(Ee,_e,de.done,de.value)})}}function q($,de,Ee,_e){Promise.resolve(_e).then(function(ye){$({value:ye,done:Ee})},de)}}o(k,"__asyncValues");function V(O,M){return Object.defineProperty?Object.defineProperty(O,"raw",{value:M}):O.raw=M,O}o(V,"__makeTemplateObject");function F(O){if(O&&O.__esModule)return O;var M={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(M[D]=O[D]);return M.default=O,M}o(F,"__importStar");function N(O){return O&&O.__esModule?O:{default:O}}o(N,"__importDefault");function P(O,M){if(!M.has(O))throw new TypeError("attempted to get private field on non-instance");return M.get(O)}o(P,"__classPrivateFieldGet");function x(O,M,D){if(!M.has(O))throw new TypeError("attempted to set private field on non-instance");return M.set(O,D),D}o(x,"__classPrivateFieldSet")},"4w5z":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("cKqT")),u=S(f("KEX5")),m=S(f("ZHiL")),a=S(f("3niY")),s=S(f("94P3")),i=S(f("/N6y")),e=S(f("aZba")),t=S(f("papz")),n=S(f("GZjp")),r=S(f("l7oq")),c=S(f("3jln")),p=S(f("a6MJ"));let g=o(class extends p.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const E=new s.default;E.meetingId="",E.externalMeetingId="",E.credentials=new i.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new n.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const w=new m.default;super(y||E,w,new c.default(new m.default),new a.default,new r.default(0,new h.default(0,0,0)),new u.default(y||E,w))}},"NoOpAudioVideoController");l.default=g},"5/Tg":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Np2I"));let u=o(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,s,i,e){super(a,s,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=u},"5/lR":function(j,l,f){"use strict";var S=this&&this.__createBinding||(Object.create?function(F,N,P,x){x===void 0&&(x=P),Object.defineProperty(F,x,{enumerable:!0,get:function(){return N[P]}})}:function(F,N,P,x){x===void 0&&(x=P),F[x]=N[P]}),h=this&&this.__setModuleDefault||(Object.create?function(F,N){Object.defineProperty(F,"default",{enumerable:!0,value:N})}:function(F,N){F.default=N}),u=this&&this.__importStar||function(F){if(F&&F.__esModule)return F;var N={};if(F!=null)for(var P in F)P!=="default"&&Object.prototype.hasOwnProperty.call(F,P)&&S(N,F,P);return h(N,F),N},m=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(f("beBF")),s=m(f("bjg3")),i=m(f("x8On")),e=m(f("r3TB")),t=f("mlaT"),n=u(f("/AJg")),r=m(f("7p5e")),c=m(f("MpTp")),p=m(f("uTAD")),g=m(f("w1x/")),d=m(f("h96U")),y=f("T44/"),E=m(f("BY2i")),w=m(f("aCJD"));let k=o(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),V=o(class Ur{reset(){this.allHighestPolicy=new p.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=Ur.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=Ur.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new k,this.prevDownlinkStats=new k,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(N){this.tileController=N,this.logger.info("tileController bound")}setWantsResubscribeObserver(N){this.wantsResubscribeObserver=N}chooseRemoteVideoSources(N){var P;if(!(!((P=this.videoPreferences)===null||P===void 0)&&P.equals(N))){if(this.videoPreferences=N==null?void 0:N.clone(),!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const x=new Array;for(const O of this.videoPreferences){const M=new r.default;M.attendee=new a.default,M.attendee.attendeeId=O.attendeeId,x.push(M)}this.allHighestPolicy.chooseRemoteVideoSources(x);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(N)}`)}}updateIndex(N){this.videoIndex=N,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(N),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const N=new Set;for(const M of this.videoIndex.remoteStreamDescriptions())N.add(M.attendeeId);const P=y.VideoPreferences.prepare(),x=N.size;let O=g.default.Maximum;x>8?O=g.default.Low:x>4&&(O=g.default.Medium);for(const M of N)P.add(new d.default(M,1,O));this.defaultVideoPreferences=P.build()}updateMetrics(N){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new k;const P=N.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=P.availableIncomingBitrate/1e3;for(const x in N.streamMetricReports){const O=Number.parseInt(x,10),M=N.streamMetricReports[O];M.direction===s.default.DOWNSTREAM&&M.mediaType===i.default.VIDEO&&(M.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=N.countPerSecond("nackCount",O)),M.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=N.countPerSecond("packetsLost",O)),M.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=N.bitsPerSecond("bytesReceived",O)/1e3))}}wantsResubscribe(){let N=!1;return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(N||(N=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?N||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),N||(N=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),N)}chooseSubscriptions(){return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(N){this.observerQueue.add(N)}removeObserver(N){this.observerQueue.delete(N)}forEachObserver(N){for(const P of this.observerQueue)N(P)}setVideoPriorityBasedPolicyConfigs(N){this.videoPriorityBasedPolicyConfig=N}calculateOptimalReceiveStreams(){var N;const P=[],x=this.videoIndex.remoteStreamDescriptions();if(x.length===0||!((N=this.videoPreferences)===null||N===void 0)&&N.isEmpty()){this.optimalReceiveStreams=[];return}const O=this.rateProbeState;this.cleanBwPausedTiles(x),this.handleAppPausedStreams(P,x);const M=new Map;for(const Je of this.getCurrentVideoPreferences())M.set(Je.attendeeId,Je);const D=x.filter(Je=>M.has(Je.attendeeId)),J=!this.streamsWithPreferenceDidChange(D),q=!this.startupPeriod&&J;if(q&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;D.sort((Je,_t)=>Je.maxBitrateKbps===_t.maxBitrateKbps?Je.streamId-_t.streamId:Je.maxBitrateKbps-_t.maxBitrateKbps);for(const Je of D)(Je.avgBitrateKbps===0||Je.avgBitrateKbps>Je.maxBitrateKbps)&&(Je.attendeeId.endsWith(e.default.Modality)&&Je.maxBitrateKbps<100?Je.maxBitrateKbps=Je.avgBitrateKbps:Je.avgBitrateKbps=Je.maxBitrateKbps);const $=new Set;for(const Je of this.getCurrentVideoPreferences()){const _t=D.filter(ze=>ze.attendeeId===Je.attendeeId);if(_t.length<3)continue;let ot=15,Et=320*480;_t.forEach(ze=>{ot=Math.max(ot,ze.maxFrameRate),Et=Math.max(Et,ze.totalPixels())}),_t.sort((ze,$t)=>{if(Je.degradationPreference===w.default.MaintainResolution)return Math.abs(ze.maxFrameRate-$t.maxFrameRate)<2?ze.totalPixels()-$t.totalPixels():ze.maxFrameRate-$t.maxFrameRate;if(Je.degradationPreference===w.default.MaintainFramerate)return ze.totalPixels()===$t.totalPixels()?ze.maxFrameRate-$t.maxFrameRate:ze.totalPixels()-$t.totalPixels();{const an=o(Gn=>Gn.avgBitrateKbps*Math.pow(2,5*Gn.maxFrameRate/ot*Math.pow(4,Gn.totalPixels()/Et)),"weighByFramerate");return an(ze)-an($t)}});let Mt;for(const ze of _t){if(Mt!==void 0&&(ze.maxFrameRate<Mt.maxFrameRate&&Math.abs(Mt.maxFrameRate-ze.maxFrameRate)>2||ze.totalPixels()<Mt.totalPixels())){$.add(ze.streamId);continue}Mt=ze}}const de=D.filter(Je=>!$.has(Je.streamId));this.logger.info(`Filtered to ${JSON.stringify(de)}`);const Ee={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};Ee.targetDownlinkBitrate=this.determineTargetRate();const _e=this.subscribedReceiveSet.size(),ye=this.downlinkStats.bandwidthEstimateKbps,Be=!this.videoPriorityBasedPolicyConfig.allowSubscribe(_e,ye);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=Ur.MIN_TIME_BETWEEN_SUBSCRIBE_MS,q&&Be))return;const pt=this.priorityPolicy(Ee,de,P),Ve=!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let gt=0;if(!Ve&&!this.startupPeriod&&J?this.rateProbeState==="Probing"?gt=this.handleProbe(P,Ee.targetDownlinkBitrate):Ee.deltaToNextUpgrade!==0&&(gt=this.maybeOverrideOrProbe(P,Ee,pt)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=D,this.videoPreferencesUpdated=!1,gt===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=Ee.targetDownlinkBitrate;return}if(gt===2){const Je=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(D,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Je);return}this.optimalNonPausedReceiveStreams=P.slice();const dt=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(D,P),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==O||this.optimalReceiveStreams.length!==P.length||dt!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(x,Ee.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=Ee.targetDownlinkBitrate,this.optimalReceiveStreams=P.slice()}calculateOptimalReceiveSet(){const N=new c.default;this.calculateOptimalReceiveStreams();for(const P of this.optimalReceiveStreams)N.add(P.streamId);if(!this.optimalReceiveSet.equal(N)){const P=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(N)} subscribedRate:${P}`)}this.optimalReceiveSet=N}determineTargetRate(){let N=0;const P=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=P),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>Ur.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||P-this.firstEstimateTimestamp>Ur.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?N=Ur.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<Ur.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),N=this.downlinkStats.usedBandwidthKbps+Ur.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):N=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?N=Ur.DEFAULT_BANDWIDTH_KBPS:N=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-Ur.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*Ur.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,N=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,N>15e3&&this.logger.warn("bwe: "+N+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(N,15e3)}setProbeState(N){if(this.rateProbeState===N)return!1;const P=Date.now();switch(N){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||P-this.lastProbeTimestamp>Ur.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=P;else return!1;break;case"Probing":if(P-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=P,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,Ur.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+N+" from "+this.rateProbeState),this.rateProbeState=N,!0}upgradeToStream(N,P){for(let x=0;x<N.length;x++)if(N[x].groupId===P.groupId){const O=P.avgBitrateKbps-N[x].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(N[x])+" to "+P),this.lastUpgradeRateKbps=O,N[x]=P,O}return N.push(P),this.lastUpgradeRateKbps=P.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(N,P){if(Date.now()-this.lastProbeTimestamp>Ur.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>Ur.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(Ur.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const x=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(N)||P>x?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=Ur.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(N,P,x){const O=this.chosenStreamsSameAsLast(N);let M=0;const D=P.targetDownlinkBitrate>Ur.LOW_BITRATE_THRESHOLD_KBPS?Ur.TARGET_RATE_CHANGE_TRIGGER_PERCENT:Ur.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,J=P.targetDownlinkBitrate*D/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!O&&Math.abs(P.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<J?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),M=1):this.targetRateBaselineForDeltaCheckKbps=P.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,M;if(O||M===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(N,x),M=0);break}else this.setProbeState("Not Probing");return M}calculateSubscribeRate(N){let P=0;for(const x of N)!this.pausedStreamIds.contain(x.streamId)&&!this.pausedBwAttendeeIds.has(x.attendeeId)&&(P+=x.maxBitrateKbps);return P}handleAppPausedStreams(N,P){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const x=this.tileController.getAllRemoteVideoTiles();for(const O of x){const M=O.state();if(M.paused&&!this.pausedBwAttendeeIds.has(M.boundAttendeeId)){let D=P.length;for(;D--;)P[D].attendeeId===M.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+M.boundAttendeeId+" streamId: "+P[D].streamId),this.pausedStreamIds.add(P[D].streamId),this.subscribedReceiveSet.contain(P[D].streamId)&&N.push(P[D]),P.splice(D,1))}}}processBwPausedStreams(N,P){if(!this.tileController){this.logger.warn("tileController not found!");return}const x=this.getCurrentVideoPreferences();if(x&&this.shouldPauseTiles){const O=this.tileController.getAllVideoTiles();for(const M of x){const D=this.getVideoTileForAttendeeId(M.attendeeId,O),J=(D==null?void 0:D.state().paused)||!1;if(P.some(q=>q.attendeeId===M.attendeeId))J&&this.pausedBwAttendeeIds.has(M.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(q=>{q.tileWillBeUnpausedByDownlinkPolicy(D.id())}),this.tileController.unpauseVideoTile(D.id()),this.pausedBwAttendeeIds.delete(M.attendeeId));else{const q=N.some($=>$.attendeeId===M.attendeeId);if(D&&q){const $=this.optimalReceiveStreams.find(de=>de.attendeeId===M.attendeeId);$!==void 0&&(J||(this.logger.info(`bwe: pausing streamId ${$.streamId} attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(de=>{de.tileWillBePausedByDownlinkPolicy(D.id())}),this.tileController.pauseVideoTile(D.id())),P.push($)),this.pausedBwAttendeeIds.add(M.attendeeId)}else if(q){const $=this.tileController.addVideoTile();$.bindVideoStream(M.attendeeId,!1,null,0,0,0,null),this.forEachObserver(de=>{de.tileWillBePausedByDownlinkPolicy($.id())}),$.pause(),this.logger.info(`bwe: Created video tile ${$.id()} for bw paused attendee ${M.attendeeId}`),this.pausedBwAttendeeIds.add(M.attendeeId)}}}}}cleanBwPausedTiles(N){if(!this.tileController){this.logger.warn("tileController not found!");return}const P=this.tileController.getAllRemoteVideoTiles(),x=this.getCurrentVideoPreferences();for(const O of P){const M=O.state();M.boundVideoStream||(N.some(D=>D.attendeeId===M.boundAttendeeId)?x!==void 0&&!x.some(D=>D.attendeeId===M.boundAttendeeId)&&this.tileController.removeVideoTile(M.tileId):(this.tileController.removeVideoTile(M.tileId),this.logger.info(`bwe: Removed video tile ${M.tileId} for bw paused attendee ${M.boundAttendeeId}`)))}}priorityPolicy(N,P,x){let O;const M=this.getCurrentVideoPreferences(),D=M.highestPriority();let J,q=D;for(;q!==-1;){J=-1;for(const $ of M)if($.priority===q)for(const de of P)de.attendeeId===$.attendeeId&&(x.some(Ee=>Ee.groupId===de.groupId)||(N.chosenTotalBitrate+de.avgBitrateKbps<=N.targetDownlinkBitrate?(x.push(de),N.chosenTotalBitrate+=de.avgBitrateKbps):N.deltaToNextUpgrade===0&&(N.deltaToNextUpgrade=de.avgBitrateKbps,O=de)));else if($.priority>q){J=$.priority;break}for(const $ of M)if($.priority===q){for(const de of P)if(de.attendeeId===$.attendeeId){const Ee=x.findIndex(_e=>_e.groupId===de.groupId&&_e.maxBitrateKbps<=de.maxBitrateKbps&&_e.avgBitrateKbps<de.avgBitrateKbps);if(Ee!==-1){const _e=de.avgBitrateKbps-x[Ee].avgBitrateKbps;this.hasSimulcastStreams(P,de.attendeeId,de.groupId)&&this.canUpgrade(de.avgBitrateKbps,$.targetSize,$.targetSizeToBitrateKbps($.targetSize),de.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${de.attendeeId} group: ${de.groupId} has simulcast and can upgrade avgBitrate: ${de.avgBitrateKbps} target: ${$.targetSizeToBitrateKbps($.targetSize)} targetTotalBitrate: ${N.targetDownlinkBitrate}`),N.chosenTotalBitrate+_e<=N.targetDownlinkBitrate?(N.chosenTotalBitrate+=_e,x[Ee]=de):N.deltaToNextUpgrade===0&&(N.deltaToNextUpgrade=_e,O=de)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if($.priority>q)break;if(q===D&&N.deltaToNextUpgrade!==0)break;q=J}return O}getVideoTileForAttendeeId(N,P){for(const x of P)if(x.state().boundAttendeeId===N)return x;return null}canUpgrade(N,P,x,O){let M=!1;return(P===g.default.High||!O&&N<=x||O&&P===g.default.Medium&&N<=x)&&(M=!0),M?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${N} targetBitrateKbps: ${x}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${N} targetBitrateKbps: ${x}`),!1)}hasSimulcastStreams(N,P,x){let O=0;for(const M of N)M.attendeeId===P&&M.groupId===x&&O++;return this.logger.info(`bwe: attendeeId: ${P} groupId: ${x} hasSimulcastStreams: streamCount: ${O}`),O>1}streamsWithPreferenceDidChange(N){if(this.previousStreamsWithPreference===void 0||N.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const P of N)if(this.previousStreamsWithPreference.find(O=>O.groupId===P.groupId&&O.streamId===P.streamId&&O.maxBitrateKbps===P.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(N){if(this.optimalNonPausedReceiveStreams.length!==N.length)return!1;for(const P of this.optimalNonPausedReceiveStreams)if(!N.some(x=>x.streamId===P.streamId))return!1;return!0}policyStateLogStr(N,P){const x=this.calculateSubscribeRate(this.optimalReceiveStreams),O={targetBitrate:P,subscribedRate:x,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let M="remoteInfos: [";for(const J of N)M+=`{grpId:${J.groupId} strId:${J.streamId} maxBr:${J.maxBitrateKbps} avgBr:${J.avgBitrateKbps}}, `;M+="]";let D=`bwe: optimalReceiveSet ${JSON.stringify(O)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${M}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(D+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?D+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:D+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,D}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(N){this.serverSideNetworkAdaption=N,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[n.default.None,n.default.BandwidthProbing,n.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let N=this.getCurrentVideoPreferences();return N||(N=y.VideoPreferences.prepare().build()),N}wantsAllTemporalLayersInIndex(){return!0}constructor(N,P=E.default.Default){this.logger=N,this.videoPriorityBasedPolicyConfig=P,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.reset()}},"VideoPriorityBasedPolicy");l.default=V,V.DEFAULT_BANDWIDTH_KBPS=2800,V.STARTUP_PERIOD_MS=6e3,V.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,V.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,V.LOW_BITRATE_THRESHOLD_KBPS=300,V.MIN_TIME_BETWEEN_PROBE_MS=5e3,V.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,V.MAX_HOLD_BEFORE_PROBE_MS=3e4,V.MAX_ALLOWED_PROBE_TIME_MS=6e4,V.SPURIOUS_PACKET_LOST_THRESHOLD=2,V.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},"59sL":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Sa54")),u=S(f("AM8c"));let m=o(class oc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return u.default.semverString}static get sdkVersionSemVer(){var s,i,e,t;const n=u.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(s=n==null?void 0:n.groups)===null||s===void 0?void 0:s.major,minor:(i=n==null?void 0:n.groups)===null||i===void 0?void 0:i.minor,patch:(e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return u.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const s=new h.default;return`${s.name()}-${s.majorVersion()}`}static urlWithVersion(s){const i=new URL(s);return i.searchParams.append(oc.X_AMZN_VERSION,oc.sdkVersion),i.searchParams.append(oc.X_AMZN_USER_AGENT,oc.sdkUserAgentLowResolution),i.toString()}},"Versioning");l.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},"5ViG":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("DG83")),m=h(f("aVV0"));let a=o(class extends m.default{run(){return S(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer);try{i.setupLocalTransceivers()}catch(n){throw n}const e=this.context.activeAudioInput;if(e){const n=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(n.length?n[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const n=t.getVideoTracks(),r=n.length?n[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(r),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(c)}r&&this.context.statsCollector.logVideoEvent(u.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:n}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(n,null,4)}`);const r=n.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(r>=0){const c=n[r];n.splice(r,1),e?(n.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(n);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},"5Y0c":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("HbHZ")),m=f("XCDq"),a=h(f("j+uH"));let s=o(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return S(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(e){if(e.type!==u.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,n=e.message.type;if(this.context.logger.info(`received new ${n===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const r=t.groupIds.map(c=>{const p=this.context.videoStreamIndex.attendeeIdForGroupId(c);return this.context.videoTileController.getVideoTileForAttendeeId(p)});for(const c of r)c!==void 0&&(n===m.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=s},"5i9P":function(j,l){function f(S){return j.exports=f=Object.setPrototypeOf?Object.getPrototypeOf.bind():o(function(u){return u.__proto__||Object.getPrototypeOf(u)},"_getPrototypeOf"),j.exports.__esModule=!0,j.exports.default=j.exports,f(S)}o(f,"_getPrototypeOf"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},"5mR7":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("34ho")),u=S(f("uaNU")),m=f("P7D+"),a=S(f("knPd"));let s=o(class extends a.default{reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=m.VideoPreferences.prepare();let n=!1;const r=e.remoteStreamDescriptions();for(const c of r)t.some(p=>p.attendeeId===c.attendeeId)||(c.attendeeId.endsWith(h.default.Modality)?(t.add(new u.default(c.attendeeId,1)),n=!0):t.add(new u.default(c.attendeeId,2)));n?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=s},"5mqp":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class fS{clone(){const u=new fS;return u.tileId=this.tileId,u.localTile=this.localTile,u.isContent=this.isContent,u.active=this.active,u.paused=this.paused,u.poorConnection=this.poorConnection,u.boundAttendeeId=this.boundAttendeeId,u.boundExternalUserId=this.boundExternalUserId,u.boundVideoStream=this.boundVideoStream,u.boundVideoElement=this.boundVideoElement,u.nameplate=this.nameplate,u.videoStreamContentWidth=this.videoStreamContentWidth,u.videoStreamContentHeight=this.videoStreamContentHeight,u.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,u.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,u.devicePixelRatio=this.devicePixelRatio,u.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,u.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,u.streamId=this.streamId,u}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}},"VideoTileState");l.default=S},"5rM1":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(u,m){this.signalingURL=u,this.joinToken=m}},"SignalingClientConnectionRequest");l.default=S},"5rZr":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptResult");l.default=S},"5xrR":function(j,l,f){"use strict";j.exports=u;var S=f("s0Ci");(u.prototype=Object.create(S.prototype)).constructor=u;var h=f("kU+7");function u(m){S.call(this,m)}o(u,"BufferReader"),u._configure=function(){h.Buffer&&(u.prototype._slice=h.Buffer.prototype.slice)},u.prototype.string=o(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),u._configure()},"5z6C":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("bTau")),m=f("f2XL"),a=h(f("aVV0"));let s=o(class extends a.default{checkAndApplyVideoConstraint(e,t,n,r,c){return S(this,void 0,void 0,function*(){const p=t.getSettings();let g;if(e?g=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:g=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,n>g.videoWidth||r>g.videoHeight||c>g.videoFrameRate){const d={width:{ideal:g.videoWidth},height:{ideal:g.videoHeight},frameRate:{ideal:g.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(d)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(p)}`);try{yield t.applyConstraints(d)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return S(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const r=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(r.values()))}if(this.context.activeVideoInput=n,n){const r=n.getVideoTracks();if(!r||r.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,p=new u.default(c).hasModality(u.default.MODALITY_CONTENT),g=r[0].getSettings();if(this.context.enableSimulcast){const y=this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints();this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(y)}`);try{yield r[0].applyConstraints(y)}catch{this.context.logger.info("simulcast: pass video without more constraint")}}else this.checkAndApplyVideoConstraint(p,r[0],g.width,g.height,g.frameRate);const d=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,n,g.width,g.height,null,d);for(let y=0;y<r.length;y++){const E=r[y];this.logger.info(`using video device label=${E.label} id=${E.id}`),this.context.videoDeviceInformation.current_camera_name=E.label,this.context.videoDeviceInformation.current_camera_id=E.id}}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=s},"6/h7":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("yQ3g"));let u=o(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=u},"6Bxv":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("f2XL"),u=S(f("lUhs"));let m=o(class br{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:case u.default.VideoCallAtSourceCapacity:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.ICEGatheringTimeoutWorkaround:case u.default.ConnectionHealthReconnect:case u.default.RealtimeApiFailed:case u.default.TaskFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case u.default.Left:case u.default.AudioJoinedFromAnotherDevice:case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.MeetingEnded:case u.default.AudioDisconnected:case u.default.TURNCredentialsForbidden:case u.default.SignalingBadRequest:case u.default.SignalingRequestFailed:case u.default.VideoCallAtSourceCapacity:case u.default.RealtimeApiFailed:case u.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.ICEGatheringTimeoutWorkaround:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.RealtimeApiFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case u.default.OK:return"Everything is OK so far.";case u.default.Left:return"The attendee left the meeting.";case u.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case u.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case u.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case u.default.MeetingEnded:return"The meeting ended.";case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:return"The audio connection failed.";case u.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case u.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:return"The signaling connection failed.";case u.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case u.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case u.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case u.default.TaskFailed:return"The connection failed. See the error message for more details.";case u.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case u.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case u.default.NoAttendeePresent:return"The attendee was not present.";case u.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case u.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case u.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const s=this._statusCode;throw new Error(`Unhandled case: ${s}`)}}}static fromSignalFrame(s){return s.error&&s.error.status?this.fromSignalingStatus(s.error.status):s.type===h.SdkSignalFrame.Type.AUDIO_STATUS?s.audioStatus?this.fromAudioStatus(s.audioStatus.audioStatus):new br(u.default.SignalingRequestFailed):s.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new br(u.default.AudioVideoWasRemovedFromPrimaryMeeting):new br(u.default.OK)}static fromAudioStatus(s){switch(s){case 200:return new br(u.default.OK);case 301:return new br(u.default.AudioJoinedFromAnotherDevice);case 302:return new br(u.default.AudioDisconnectAudio);case 403:return new br(u.default.AudioAuthenticationRejected);case 409:return new br(u.default.AudioCallAtCapacity);case 410:return new br(u.default.MeetingEnded);case 411:return new br(u.default.AudioAttendeeRemoved);case 500:return new br(u.default.AudioInternalServerError);case 503:return new br(u.default.AudioServiceUnavailable);default:switch(Math.floor(s/100)){case 2:return new br(u.default.OK);default:return new br(u.default.AudioDisconnected)}}}static fromSignalingStatus(s){switch(s){case 206:return new br(u.default.VideoCallSwitchToViewOnly);case 509:return new br(u.default.VideoCallAtSourceCapacity);case 403:return new br(u.default.AudioAuthenticationRejected);case 409:return new br(u.default.AudioCallAtCapacity);default:switch(Math.floor(s/100)){case 2:return new br(u.default.OK);case 4:return new br(u.default.SignalingBadRequest);case 5:return new br(u.default.SignalingInternalServerError);default:return new br(u.default.SignalingRequestFailed)}}}constructor(s){this._statusCode=s}},"MeetingSessionStatus");l.default=m},"6DYs":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{matchesConstraints(u){return JSON.stringify(this.constraints)===JSON.stringify(u)}constructor(){this.groupId=""}},"DeviceSelection");l.default=S},"6JeQ":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(n,r,c,p){function g(d){return d instanceof c?d:new c(function(y){y(d)})}return o(g,"adopt"),new(c||(c=Promise))(function(d,y){function E(V){try{k(p.next(V))}catch(F){y(F)}}o(E,"fulfilled");function w(V){try{k(p.throw(V))}catch(F){y(F)}}o(w,"rejected");function k(V){V.done?d(V.value):g(V.value).then(E,w)}o(k,"step"),k((p=p.apply(n,r||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const u=f("o4xN"),m=f("R4Nl"),a=h(f("59sL")),s=h(f("X9Jc")),i=h(f("25+x")),e=h(f("8Bz5"));let t=o(class _a{static isSupported(r,c){var p,g;const d=_a.defaultFetchBehavior(),y=c!=null&&c.logger?new s.default(c.logger):void 0,E={fetchBehavior:d,logger:y};if(m.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(p=c==null?void 0:c.logger)===null||p===void 0||p.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(g=c==null?void 0:c.logger)===null||g===void 0||g.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return u.VoiceFocus.isSupported(_a.augmentSpec(r),E)}static create(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2?arguments[2]:void 0,g=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;var y,E,w;return S(this,void 0,void 0,function*(){g&&g.Meeting.Meeting&&(g=g.Meeting);const k=((w=(E=(y=g==null?void 0:g.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||w===void 0?void 0:w.EchoReduction)==="AVAILABLE",V=p&&p.supported===!0&&p.model.name==="ns_es"&&!k,F=r.name==="ns_es"&&!k;if(V||F)throw new Error("Echo Reduction requested but not enabled.");const N=new _a(r,c,p);return yield N.init(),N})}static configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S(this,void 0,void 0,function*(){return new _a(r,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(r,c){return S(this,void 0,void 0,function*(){if(this.supported)try{const[g,d]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new i.default(r,g,d,y)}catch{return}})}static destroyVoiceFocus(r){var c;return S(this,void 0,void 0,function*(){(c=r==null?void 0:r.vf)===null||c===void 0||c.destroy()})}static augmentSpec(r){return!r||!r.assetGroup&&!r.revisionID?Object.assign(Object.assign({},r),{assetGroup:_a.currentSDKAssetGroup()}):r}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:r,logger:this.vfLogger};return u.VoiceFocus.configure(this.spec,c)})}init(){var r;return S(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(p){(r=this.logger)===null||r===void 0||r.error(`Unable to initialize Amazon Voice Focus: ${p}`),this.supported=!1}})}createVoiceFocus(r,c){return S(this,void 0,void 0,function*(){const p=new e.default;return this.vf=yield u.VoiceFocus.init(r,{delegate:p,preload:c,logger:this.vfLogger}),[this.vf,p]})}allocateVoiceFocus(r){return S(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,r)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const r=this.majorVersion();return r?`sdk-${r}`:"stable-v1"}static defaultFetchBehavior(){const r=_a.majorMinorVersion()||"unknown",c=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(r)}&ua=${encodeURIComponent(c)}`}}constructor(r,{preload:c=!0,logger:p,fetchBehavior:g=_a.defaultFetchBehavior()},d){this.spec=r,this.supported=!0,this.logger=p,this.vfLogger=p?new s.default(p):void 0,this.preload=c,this.fetchBehavior=g,this.spec=_a.augmentSpec(this.spec),d&&(this.configuration=Promise.resolve(d))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},"6SO8":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("XCDq"),u=S(f("bjg3")),m=S(f("x8On")),a=S(f("U3GI"));let s=o(class hS{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case u.default.UPSTREAM:return this.audioUpstreamMetricMap;case u.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case u.default.UPSTREAM:return this.videoUpstreamMetricMap;case u.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],r=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:p}=r;if(t.hasOwnProperty("media"))for(const g in this.streamMetricReports){const d=this.streamMetricReports[g];if(d.direction===t.dir&&d.mediaType===t.media)return c(p||t.source,Number(g))}else return c(p||t.source);return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],c=this.getMetricMap(n.media,n.dir)[n.source],{transform:p,source:g}=c;return p(g||n.source,t)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const n={};for(const g in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[g].dir===this.streamMetricReports[t].direction){const d=this.getObservableVideoMetricValue(g,Number(t));isNaN(d)||(n[g]=d)}const r=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let p="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?p=r?this.videoStreamIndex.attendeeIdForGroupId(r):this.selfAttendeeId:p=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[p]=e[p]?e[p]:{},e[p][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new hS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[r])},this.decoderLossPercent=(r,c)=>{const p=this.streamMetricReports[c],g=p.currentMetrics.concealedSamples-(p.previousMetrics.concealedSamples||0),d=p.currentMetrics.totalSamplesReceived-(p.previousMetrics.totalSamplesReceived||0);return d<=0||d-g<=0?0:g/d*100},this.packetLossPercent=(r,c)=>{const p=this.streamMetricReports[c],g=p.currentMetrics[r]-(p.previousMetrics[r]||0),d=p.currentMetrics.packetsLost-(p.previousMetrics.packetsLost||0),y=g+d;return y<=0||d<=0?0:d*100/y},this.jitterBufferMs=(r,c)=>{const p=this.streamMetricReports[c],g=p.currentMetrics.jitterBufferDelay-(p.previousMetrics.jitterBufferDelay||0),d=p.currentMetrics.jitterBufferEmittedCount-(p.previousMetrics.jitterBufferEmittedCount||0);return g<=0||d<=0?0:g/d*1e3},this.countPerSecond=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);const d=p.currentMetrics[r]-(p.previousMetrics[r]||0);return d<=0?0:Math.trunc(d/g)},this.bitsPerSecond=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);const d=(p.currentMetrics[r]-(p.previousMetrics[r]||0))*8;return d<=0?0:Math.trunc(d/g)},this.secondsToMilliseconds=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[r]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);const d=p.currentMetrics[r]-(p.previousMetrics[r]||0);return d<=0?0:d*1e3/g},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(r,c)=>{const p=this.streamMetricReports[c];let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);let d=0,y=0;for(const[w,k]of Object.entries(p.previousObjectMetrics[r]))w==="cpu"&&(d=k);for(const[w,k]of Object.entries(p.currentObjectMetrics[r]))w==="cpu"&&(y=k);const E=y-d;return E<=0?0:E*1e3/g},this.isHardwareImplementation=(r,c)=>{const p=this.streamMetricReports[c],g=String(p.currentStringMetrics[r]),d=g.includes("ExternalDecoder")||g.includes("ExternalEncoder")||g.includes("EncodeAccelerator")||g.includes("DecodeAccelerator"),y=g.includes("fallback from");return d&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:u.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:u.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:u.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=s},"6k+I":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function S(h){return!!h&&typeof h=="object"&&"mute"in h&&"stop"in h&&"intrinsicDevice"in h}o(S,"isAudioTransformDevice"),l.isAudioTransformDevice=S},"6k9T":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.PermissionDenied=2]="PermissionDenied"})(S=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=S},"6qF3":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const S="/ml_media_fx/otherassets";l.WORKER_PATH=`${S}/worker.js`,l.FXLIB_PATH=`${S}/fxlib.js`},"725M":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});function S(u){return u.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}o(S,"stringify");let h=o(class{debug(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.debug(S(a))}info(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.info(S(a))}warn(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.warn(S(a))}error(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.error(S(a))}constructor(m){this.base=m}},"LoggerAdapter");l.default=h},"75SI":function(j,l,f){var S=f("bBgO");function h(u,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(m&&m.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),m&&S(u,m)}o(h,"_inherits"),j.exports=h,j.exports.__esModule=!0,j.exports.default=j.exports},"7Dzo":function(j,l,f){"use strict";f.d(l,"a",function(){return S});const S={NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",OrgsSevered:"orgs_severed",OrgNotVerified:"org_not_verified",UserIsRestricted:"user_is_restricted",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match",Generic:"generic"}},"7EAL":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("j+uH"));let m=o(class extends u.default{run(){return S(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(s){super(s.logger),this.context=s,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=m},"7H4U":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=o(h=>{const u={};for(const[m,a]of Object.entries(h))if(!(a==null||a===""))if(typeof a=="number"||typeof a=="string")u[m]=a;else throw new TypeError("Unhandled type received while flattening attributes.");return u},"flattenEventAttributes");l.default=S},"7JaV":function(j,l,f){"use strict";f.r(l),f.d(l,"__extends",function(){return h}),f.d(l,"__assign",function(){return u}),f.d(l,"__rest",function(){return m}),f.d(l,"__decorate",function(){return a}),f.d(l,"__param",function(){return s}),f.d(l,"__metadata",function(){return i}),f.d(l,"__awaiter",function(){return e}),f.d(l,"__generator",function(){return t}),f.d(l,"__createBinding",function(){return n}),f.d(l,"__exportStar",function(){return r}),f.d(l,"__values",function(){return c}),f.d(l,"__read",function(){return p}),f.d(l,"__spread",function(){return g}),f.d(l,"__spreadArrays",function(){return d}),f.d(l,"__await",function(){return y}),f.d(l,"__asyncGenerator",function(){return E}),f.d(l,"__asyncDelegator",function(){return w}),f.d(l,"__asyncValues",function(){return k}),f.d(l,"__makeTemplateObject",function(){return V}),f.d(l,"__importStar",function(){return F}),f.d(l,"__importDefault",function(){return N}),f.d(l,"__classPrivateFieldGet",function(){return P}),f.d(l,"__classPrivateFieldSet",function(){return x});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=o(function(O,M){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,J){D.__proto__=J}||function(D,J){for(var q in J)J.hasOwnProperty(q)&&(D[q]=J[q])},S(O,M)},"extendStatics");function h(O,M){S(O,M);function D(){this.constructor=O}o(D,"__"),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}o(h,"__extends");var u=o(function(){return u=Object.assign||o(function(M){for(var D,J=1,q=arguments.length;J<q;J++){D=arguments[J];for(var $ in D)Object.prototype.hasOwnProperty.call(D,$)&&(M[$]=D[$])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(O,M){var D={};for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&M.indexOf(J)<0&&(D[J]=O[J]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,J=Object.getOwnPropertySymbols(O);q<J.length;q++)M.indexOf(J[q])<0&&Object.prototype.propertyIsEnumerable.call(O,J[q])&&(D[J[q]]=O[J[q]]);return D}o(m,"__rest");function a(O,M,D,J){var q=arguments.length,$=q<3?M:J===null?J=Object.getOwnPropertyDescriptor(M,D):J,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,M,D,J);else for(var Ee=O.length-1;Ee>=0;Ee--)(de=O[Ee])&&($=(q<3?de($):q>3?de(M,D,$):de(M,D))||$);return q>3&&$&&Object.defineProperty(M,D,$),$}o(a,"__decorate");function s(O,M){return function(D,J){M(D,J,O)}}o(s,"__param");function i(O,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,M)}o(i,"__metadata");function e(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})}o(e,"__awaiter");function t(O,M){var D={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,q,$,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(ye){return function(Be){return _e([ye,Be])}}function _e(ye){if(J)throw new TypeError("Generator is already executing.");for(;D;)try{if(J=1,q&&($=ye[0]&2?q.return:ye[0]?q.throw||(($=q.return)&&$.call(q),0):q.next)&&!($=$.call(q,ye[1])).done)return $;switch(q=0,$&&(ye=[ye[0]&2,$.value]),ye[0]){case 0:case 1:$=ye;break;case 4:return D.label++,{value:ye[1],done:!1};case 5:D.label++,q=ye[1],ye=[0];continue;case 7:ye=D.ops.pop(),D.trys.pop();continue;default:if($=D.trys,!($=$.length>0&&$[$.length-1])&&(ye[0]===6||ye[0]===2)){D=0;continue}if(ye[0]===3&&(!$||ye[1]>$[0]&&ye[1]<$[3])){D.label=ye[1];break}if(ye[0]===6&&D.label<$[1]){D.label=$[1],$=ye;break}if($&&D.label<$[2]){D.label=$[2],D.ops.push(ye);break}$[2]&&D.ops.pop(),D.trys.pop();continue}ye=M.call(O,D)}catch(Be){ye=[6,Be],q=0}finally{J=$=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}}o(t,"__generator");function n(O,M,D,J){J===void 0&&(J=D),O[J]=M[D]}o(n,"__createBinding");function r(O,M){for(var D in O)D!=="default"&&!M.hasOwnProperty(D)&&(M[D]=O[D])}o(r,"__exportStar");function c(O){var M=typeof Symbol=="function"&&Symbol.iterator,D=M&&O[M],J=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&J>=O.length&&(O=void 0),{value:O&&O[J++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}o(c,"__values");function p(O,M){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var J=D.call(O),q,$=[],de;try{for(;(M===void 0||M-- >0)&&!(q=J.next()).done;)$.push(q.value)}catch(Ee){de={error:Ee}}finally{try{q&&!q.done&&(D=J.return)&&D.call(J)}finally{if(de)throw de.error}}return $}o(p,"__read");function g(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(p(arguments[M]));return O}o(g,"__spread");function d(){for(var O=0,M=0,D=arguments.length;M<D;M++)O+=arguments[M].length;for(var J=Array(O),q=0,M=0;M<D;M++)for(var $=arguments[M],de=0,Ee=$.length;de<Ee;de++,q++)J[q]=$[de];return J}o(d,"__spreadArrays");function y(O){return this instanceof y?(this.v=O,this):new y(O)}o(y,"__await");function E(O,M,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=D.apply(O,M||[]),q,$=[];return q={},de("next"),de("throw"),de("return"),q[Symbol.asyncIterator]=function(){return this},q;function de(Ve){J[Ve]&&(q[Ve]=function(gt){return new Promise(function(dt,Je){$.push([Ve,gt,dt,Je])>1||Ee(Ve,gt)})})}function Ee(Ve,gt){try{_e(J[Ve](gt))}catch(dt){pt($[0][3],dt)}}function _e(Ve){Ve.value instanceof y?Promise.resolve(Ve.value.v).then(ye,Be):pt($[0][2],Ve)}function ye(Ve){Ee("next",Ve)}function Be(Ve){Ee("throw",Ve)}function pt(Ve,gt){Ve(gt),$.shift(),$.length&&Ee($[0][0],$[0][1])}}o(E,"__asyncGenerator");function w(O){var M,D;return M={},J("next"),J("throw",function(q){throw q}),J("return"),M[Symbol.iterator]=function(){return this},M;function J(q,$){M[q]=O[q]?function(de){return(D=!D)?{value:y(O[q](de)),done:q==="return"}:$?$(de):de}:$}}o(w,"__asyncDelegator");function k(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O[Symbol.asyncIterator],D;return M?M.call(O):(O=typeof c=="function"?c(O):O[Symbol.iterator](),D={},J("next"),J("throw"),J("return"),D[Symbol.asyncIterator]=function(){return this},D);function J($){D[$]=O[$]&&function(de){return new Promise(function(Ee,_e){de=O[$](de),q(Ee,_e,de.done,de.value)})}}function q($,de,Ee,_e){Promise.resolve(_e).then(function(ye){$({value:ye,done:Ee})},de)}}o(k,"__asyncValues");function V(O,M){return Object.defineProperty?Object.defineProperty(O,"raw",{value:M}):O.raw=M,O}o(V,"__makeTemplateObject");function F(O){if(O&&O.__esModule)return O;var M={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(M[D]=O[D]);return M.default=O,M}o(F,"__importStar");function N(O){return O&&O.__esModule?O:{default:O}}o(N,"__importDefault");function P(O,M){if(!M.has(O))throw new TypeError("attempted to get private field on non-instance");return M.get(O)}o(P,"__classPrivateFieldGet");function x(O,M,D){if(!M.has(O))throw new TypeError("attempted to set private field on non-instance");return M.set(O,D),D}o(x,"__classPrivateFieldSet")},"7JpI":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"ClientVideoStreamReceivingReport");l.default=S},"7TH8":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR")),m=h(f("eFki"));let a=o(class pS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new pS(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return S(this,void 0,void 0,function*(){return this.device})}transformStream(i){return S(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return S(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}constructor(i,e,t,n=new u.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=n,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},"7UVU":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("j+uH"));let m=o(class extends u.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const s in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[s]()}addPeerConnectionEventLogger(){const s=this.context.peer;s.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${s.connectionState}`)}),s.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),s.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${s.iceGatheringState}`)}),s.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),s.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${s.iceConnectionState}`)})}run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(s){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(s)):!1}addRemoteVideoTrack(s,i){var e;const t=i.id,n=this.context.videoStreamIndex.attendeeIdForTrack(t);let r,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(n),r=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):r=this.context.videoTileController.haveVideoTileForAttendeeId(n),r){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let p=this.context.videoStreamIndex.streamIdForTrack(t);typeof p>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),p=null);for(let V=0;V<this.trackEvents.length;V++){const F=this.trackEvents[V],N=i.getVideoTracks();if(N&&N.length){const P=N[0],x=o(()=>{this.context.logger.info(`received the ${F} event for tile=${c.id()} id=${s.id} streamId=${p}`),F==="ended"&&this.removeRemoteVideoTrack(s,c.state())},"callback");P.addEventListener(F,x),this.removeVideoTrackEventListeners[s.id]||(this.removeVideoTrackEventListeners[s.id]=[]),this.removeVideoTrackEventListeners[s.id].push(()=>{P.removeEventListener(F,x)})}}let g,d;if(s.getSettings){const V=s.getSettings();g=V.width,d=V.height}else{const V=s.getCapabilities();g=V.width,d=V.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(n,!1,i,g,d,p,y),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${p}`);const E="removetrack",w=i,k=o(()=>this.removeRemoteVideoTrack(s,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[s.id]=()=>{w.removeEventListener(E,k),delete this.removeTrackRemovedEventListeners[s.id]},w.addEventListener(E,k)}removeRemoteVideoTrack(s,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(s.id)){this.removeTrackRemovedEventListeners[s.id]();for(const e of this.removeVideoTrackEventListeners[s.id])e();delete this.removeVideoTrackEventListeners[s.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${s.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(s){super(s.logger),this.context=s,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},"7W6Z":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("lUhs")),m=h(f("AUdx")),a=h(f("aVV0"));let s=o(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),r=t||n;return this.context.logger.info(`uses video: ${r} (enabled: ${!0}, sending: ${t}, receiving: ${n})`),r}run(){return S(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,n)=>S(this,void 0,void 0,function*(){this.cancelPromise=r=>{n(r)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const r=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,n(r);return}t()}catch(r){n(r)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=s},"7nob":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"Transcript");l.default=S},"7p5e":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"VideoSource");l.default=S},"83pg":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Mr6q"));let u=o(class extends h.default{},"BackgroundReplacementVideoFrameProcessorDelegate");l.default=u},"87Nr":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var S;(function(h){h[h.Transitioned=0]="Transitioned",h[h.NoTransitionAvailable=1]="NoTransitionAvailable",h[h.DeferredTransition=2]="DeferredTransition",h[h.TransitionFailed=3]="TransitionFailed"})(S=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=S},"8Bz5":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}onFallback(u,m){var a;for(const s of this.observers)(a=s.voiceFocusFellBackToInnerStream)===null||a===void 0||a.call(s,u,m)}onCPUWarning(){var u;for(const m of this.observers)(u=m.voiceFocusInsufficientResources)===null||u===void 0||u.call(m)}constructor(){this.observers=new Set}},"VoiceFocusTransformDeviceDelegate");l.default=S},"8FET":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u=5e3,m=2,a=64,s=100,i=15){this.flushIntervalMs=u,this.flushSize=m,this.maxBufferCapacityKb=a,this.totalBufferItems=s,this.retryCountLimit=i}},"EventBufferConfiguration");l.default=S},"8V8Y":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=.8;let h=o(class{reportEvent(m){const a=m-this.lastReportedEventTimestamp;if(a>=this.reportingPeriodMillis){const s=this.filterCount,i=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||s===0)return;const e=Math.round(i/s),t=Math.round(this.framerate*(a/1e3))-s,n=Math.round(100*i/a);e>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:t,avgFilterDurationMillis:e,framerate:this.framerate,periodMillis:a}),n>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:n,filterMillis:i,periodMillis:a})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*S)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const a=Date.now();this.reportEvent(a)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,a,s,i){this.delegate=m,this.reportingPeriodMillis=a,this.filterCPUUtilization=s,this.logger=i,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=h},"8dVZ":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("KyYT");let h=o(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,a,s){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",s),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let a=0,s=0;const i=m.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,n=i.audioSpeakerDelayMs;if(typeof n=="number"&&!isNaN(n)&&this.connectionHealthData.setAudioSpeakerDelayMs(n),typeof e=="number"&&typeof t=="number"){if(a=e,s=t,a<0||s<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,s),a>0?(this.hasSeenValidPacketMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidPacketMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||s>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}addToMinuteWindow(m,a){m.unshift(a),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{S.Maybe.of(m.connectionHealthDidChange).map(a=>a.bind(m)(this.connectionHealthData.clone()))})}constructor(m,a,s,i,e){this.audioVideoController=m,this.realtimeController=a,this.connectionHealthData=s,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidPacketMetricsBefore=!1,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},"8pZh":function(j,l,f){"use strict";var S=f("MkRQ"),h=f("LV2V"),u=f("4k7n"),m=f("AQwl"),a=f("qAkX"),s=Object(h.a)(function(i){var e=Object(a.a)(i);return e=typeof e=="function"?e:void 0,Object(u.a)(Object(S.a)(i,m.a),void 0,e)});l.a=s},"8tla":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("aVV0")),m=h(f("Sl5A"));let a=o(class extends u.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return S(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const n of t)n.setParent(this)}},"SerialGroupTask");l.default=a},"8wPz":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{start(u){this.stop(),this.timer=setInterval(u,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(u){this.intervalMs=u}},"IntervalScheduler");l.default=S},"91j7":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u,m,a,s){this.sequenceNumber=u,this.message=m,this.timestampMs=a,this.logLevel=s}},"Log");l.default=S},"92Bn":function(j,l,f){"use strict";j.exports=u;var S=f("hl97");(u.prototype=Object.create(S.prototype)).constructor=u;var h=f("kU+7");function u(){S.call(this)}o(u,"BufferWriter"),u._configure=function(){u.alloc=h._Buffer_allocUnsafe,u.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?o(function(s,i,e){i.set(s,e)},"writeBytesBuffer_set"):o(function(s,i,e){if(s.copy)s.copy(i,e,0,s.length);else for(var t=0;t<s.length;)i[e++]=s[t++]},"writeBytesBuffer_copy")},u.prototype.bytes=o(function(s){h.isString(s)&&(s=h._Buffer_from(s,"base64"));var i=s.length>>>0;return this.uint32(i),i&&this._push(u.writeBytesBuffer,i,s),this},"write_bytes_buffer");function m(a,s,i){a.length<40?h.utf8.write(a,s,i):s.utf8Write?s.utf8Write(a,i):s.write(a,i)}o(m,"writeStringBuffer"),u.prototype.string=o(function(s){var i=h.Buffer.byteLength(s);return this.uint32(i),i&&this._push(m,i,s),this},"write_string_buffer"),u._configure()},"94P3":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("U++r")),u=S(f("my46")),m=f("VCUZ"),a=S(f("2M37")),s=S(f("/N6y")),i=S(f("GZjp"));let e=o(class{constructor(n,r){var c,p;if(this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new h.default,this.reconnectTimeoutMs=120*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1*1e3,this.reconnectLongBackOffMs=5*1e3,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.enableSVC=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.keepLastFrameWhenPaused=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1,this.meetingFeatures=new a.default,n){n=m.toLowerCasePropertyNames(n),n.meeting&&(n=n.meeting),this.meetingId=n.meetingid,this.externalMeetingId=n.externalmeetingid,this.urls=new i.default,this.urls.audioHostURL=n.mediaplacement.audiohosturl,this.urls.signalingURL=n.mediaplacement.signalingurl,this.urls.turnControlURL=n.mediaplacement.turncontrolurl,n.mediaplacement.eventingestionurl&&(this.urls.eventIngestionURL=n.mediaplacement.eventingestionurl);const g=o((d,y)=>{switch(d){case"None":return u.default.VideoDisabled;case"HD":return u.default.VideoResolutionHD;case"FHD":return u.default.VideoResolutionFHD;case"UHD":return u.default.VideoResolutionUHD;default:return y}},"parseVideoResolution");if(((c=n.meetingfeatures)===null||c===void 0?void 0:c.video)!==void 0||((p=n.meetingfeatures)===null||p===void 0?void 0:p.content)!==void 0){const d=n.meetingfeatures.video===void 0?"HD":n.meetingfeatures.video.maxresolution,y=n.meetingfeatures.content===void 0?"FHD":n.meetingfeatures.content.maxresolution;this.meetingFeatures=new a.default(g(d,u.default.VideoResolutionHD),g(y,u.default.VideoResolutionFHD))}}r&&(r=m.toLowerCasePropertyNames(r),r.attendee&&(r=r.attendee),this.credentials=new s.default,this.credentials.attendeeId=r.attendeeid,this.credentials.externalUserId=r.externaluserid,this.credentials.joinToken=r.jointoken)}},"MeetingSessionConfiguration");l.default=e},"9AGb":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("KvYa"),u=f("nJ1/");let m=o(class extends u.VoiceFocusAudioWorkletNode{enable(){return S(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return S(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return S(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(s){var i;const e=s.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(s){var i;const e=s.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(s,i){super(s,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:n,fetchBehavior:r,delegate:c}=i;this.delegate=c,this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:p,agc:g,supportFarendStream:d}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:s.sampleRate===16e3?160:480,enabled:p,agc:g,fetchBehavior:r,model:e,supportFarendStream:d});const y=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:r,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=m},"9BEE":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class mS{static create(u,m){const a=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!u||u.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!a.test(u))throw new Error(`appName must satisfy ${a} regular expression`);const s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!s.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new mS(u,m)}constructor(u,m){this.appName=u,this.appVersion=m}},"ApplicationMetadata");l.default=S},"9Bli":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=S},"9ETa":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("JHsX"),h=f("hWev"),u=f("I0Bj"),m=f("87Nr");let a=o(class{perform(i,e){const t=this.currentState;if(t===u.SessionStateControllerState.NotConnected&&i===S.SessionStateControllerAction.Connect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===S.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===S.SessionStateControllerAction.FinishConnecting)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Disconnect)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Reconnect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Update)this.transition(u.SessionStateControllerState.Updating,i);else if(t===u.SessionStateControllerState.Updating&&i===S.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Updating&&i===S.SessionStateControllerAction.FinishUpdating)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Disconnecting&&i===S.SessionStateControllerAction.FinishDisconnecting)this.transition(u.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${u.SessionStateControllerState[this.currentState]} with ${S.SessionStateControllerAction[i]}`),this.deferAction(i,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${u.SessionStateControllerState[this.currentState]} with ${S.SessionStateControllerAction[i]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(n){return this.logger.error(`error during state ${u.SessionStateControllerState[this.currentState]} with action ${S.SessionStateControllerAction[i]}: ${n}`),this.logger.info(`rolling back transition to ${u.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${u.SessionStateControllerState[this.currentState]} to ${u.SessionStateControllerState[i]} with ${S.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case S.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case S.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case S.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case S.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===u.SessionStateControllerState.Connecting||this.currentState===u.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${S.SessionStateControllerAction[i]}`),this.perform(i,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${S.SessionStateControllerAction[i]} in state ${u.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=u.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},"9IN5":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},"9bRS":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{create(){const u={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{u.paused=!0},play:()=>(u.paused=!1,Promise.resolve())};return u}},"NoOpVideoElementFactory");l.default=S},"9mJw":function(j,l,f){"use strict";var S=f("wpDl"),h=Object(S.a)("round");l.a=h},"9oOt":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const u=h(f("3niY")),m=h(f("my46"));let a=o(class extends u.default{destroy(){return S(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let s=o(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=s},A4hc:function(j,l,f){"use strict";j.exports=f("PhnE")},AI3F:function(j,l,f){"use strict";(function(S){Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var h=f("f/KM"),u=typeof S<"u"&&S.from?function(a){return S.from(a,"utf8")}:h.fromUtf8;function m(a){return a instanceof Uint8Array?a:typeof a=="string"?u(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}o(m,"convertToBuffer"),l.convertToBuffer=m}).call(this,f("HDXh").Buffer)},AM8c:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"7b41b42",raw:"v3.19.0",semverString:"3.19.0"}},AUdx:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("0YRd")),u=S(f("Iwfh")),m=S(f("CLOt"));let a=o(class Xt{clone(){return new Xt(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new Xt(i.join(Xt.CRLF))}static candidateTypeFromString(i){switch(i){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:Xt.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,n)=>(n>0?"m="+t:t).trim()+Xt.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const n of i){if(/^m=video/.test(n)&&(n.indexOf("sendrecv")>-1||n.indexOf("sendonly")===-1&&n.indexOf("recvonly")===-1&&n.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return Xt.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Xt.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return Xt.linesToSDP(this.lines().filter(e=>Xt.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,Xt.rfc7587LowestBitrate),Xt.rfc7587HighestBitrate));const e=this.lines(),t=Xt.findOpusFmtpAttributes(e),n=Xt.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return Xt.linesToSDP(n)}withStereoAudio(){const i=this.lines(),e=Xt.findOpusFmtpAttributes(i),t=Xt.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return Xt.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const n=[];for(const r of i)if(r.startsWith("m=audio")&&(n.push(null),t=!0),r.startsWith("m=video")&&(t=!1),t){const c=e.exec(r);c!==null&&(n[n.length-1]=`a=fmtp:${c[1]} `)}return n}static updateOpusFmtpAttributes(i,e,t){const n=[];let r=0,c=null;for(const p of i)if(p.startsWith("m=audio")&&(c=e[r],r++),p.startsWith("m=video")&&(c=null),c&&p.startsWith(c)){const g=p.slice(c.length).split(";"),d=[];for(const y of g)t.findIndex(w=>w.startsWith(y.split("=")[0]))<0&&d.push(y);for(const y of t)d.push(y);n.push(c+d.join(";"))}else n.push(p);return n}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new Xt(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const n of i)if(/^a=extmap:/.test(n.trim())){const c=+n.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((n,r)=>n-r);let t=0;for(const n of e){if(n-t>1)return t+1;t=n}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,Xt.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,Xt.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=Xt.splitLines(this.sdp).filter(e=>!e.includes(Xt.dependencyDescriptorRtpHeaderExtensionUrl));return new Xt(i.join(Xt.CRLF)+Xt.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,n=t===-1?this.getUniqueRtpHeaderExtensionId(Xt.splitLines(this.sdp)):t,r=Xt.splitSections(this.sdp),c=[];for(let g of r){if(/^m=video/.test(g)&&Xt.getRtpHeaderExtensionIdInSection(g,e)===-1){const d=Xt.splitLines(g),y=[];if(n===-1||this.hasRtpHeaderExtensionId(n)){c.push(g);continue}for(const E of d)if(y.push(E),/^a=sendrecv/.test(E.trim())){const w="a=extmap:"+n+" "+e;y.push(w)}g=y.join(Xt.CRLF)+Xt.CRLF}else if(t!==-1&&/^m=video/.test(g)&&Xt.getRtpHeaderExtensionIdInSection(g,e)!==t){const d=Xt.splitLines(g),y=[];for(const E of d){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const k="a=extmap:"+t+" "+e;y.push(k)}continue}y.push(E)}g=y.join(Xt.CRLF)+Xt.CRLF}c.push(g)}const p=c.join("");return new Xt(p)}ssrcForVideoSendingSection(){const i=this.sdp,e=Xt.splitSections(i);if(e.length<2)return"";const t=Xt.findActiveCameraSection(e);if(t===-1)return"";const n=Xt.matchPrefix(e[t],"a=ssrc-group:FID ");if(n.length<1)return"";const r=Xt.extractSSRCsFromFIDGroupLine(n[0]),[c]=r.split(" ").map(p=>parseInt(p,10));return c.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const n=parseInt(e,10),r=parseInt(t,10);return n!==r}removeH264SupportFromSendSection(){const i=this.sdp,e=Xt.splitSections(i),t=Xt.findActiveCameraSection(e);if(t===-1)return new Xt(this.sdp);const n=e[t],r=Xt.splitLines(n),c=[],p=new Map;r.forEach(E=>{if(/^a=rtpmap:/.test(E)){const w=/^a=rtpmap:([0-9]+)\s/.exec(E);w&&E.toLowerCase().includes("h264")&&c.push(parseInt(w[1],10))}if(/^a=fmtp:/.test(E)){const w=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(w&&w.length===3){const k=parseInt(w[1],10),V=parseInt(w[2],10);p.has(V)?p.get(V).push(k):p.set(V,[k])}}});const g=new Set;for(const E of c){g.add(E);const w=p.get(E);if(w)for(const k of w)g.add(k)}if(c.length>0){const E=r[0].split(" ");r[0]=E.filter(w=>!g.has(parseInt(w))).join(" ")}const d=r.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const w of g)if(E.includes(w.toString()))return!1;return!0});e[t]=d.join(Xt.CRLF)+Xt.CRLF;const y=e.join("");return new Xt(y)}mediaSections(){const i=Xt.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const n=new u.default,r=Xt.splitLines(i[t]);for(const c of r){const p=Xt.mediaType(c);if(p!==void 0){n.mediaType=p;continue}const g=Xt.direction(c);if(g!==void 0){n.direction=g;continue}const d=Xt.mid(c);if(d!==void 0){n.mid=d;continue}}e.push(n)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=Xt.splitLines(i);for(const n of t)if(/^a=extmap:/.test(n.trim())){const r=n.split("a=extmap:")[1].split(" "),c=+r[0];if(r[1]===e)return c}return-1}getRtpHeaderExtensionId(i){const e=Xt.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const n=Xt.getRtpHeaderExtensionIdInSection(t,i);if(n!==-1)return n}return-1}hasRtpHeaderExtensionId(i){const e=Xt.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=Xt.splitSections(e),n=Xt.findActiveCameraSection(t);if(n===-1)return new Xt(this.sdp);t[n]=this.sectionWithCodecPreferences(t[n],i);const r=t.join("");return new Xt(r)}sectionWithCodecPreferences(i,e){const t=new Map,n=Xt.splitLines(i);n.forEach(g=>{if(/^a=rtpmap:/.test(g))for(const d of e){if(!g.includes(`${d.codecName}/${d.codecCapability.clockRate}`))continue;const y=/^a=rtpmap:([0-9]+)\s/.exec(g);let E=!1;if(d.codecCapability.sdpFmtpLine!==void 0){let w=!1;for(const k of n){if(k.startsWith(`a=fmtp:${y[1]} ${d.codecCapability.sdpFmtpLine}`)){E=!0;break}k.startsWith(`a=fmtp:${y[1]} profile-id=`)&&(w=!0)}d.equals(m.default.vp9Profile0())&&!w&&(E=!0)}else E=!0;if(E){t.set(d.codecName,y[1]);break}}});const r=new Set(t.values()),c=n[0].split(" ").filter(g=>!r.has(g)),p=Array.from(t.values()).sort((g,d)=>{const y=e.findIndex(w=>t.get(w.codecName)===g),E=e.findIndex(w=>t.get(w.codecName)===d);return y-E});return c.splice(3,0,...p.values()),n[0]=c.join(" "),n.join(Xt.CRLF)+Xt.CRLF}highestPriorityVideoSendCodec(){const i=this.sdp,e=Xt.splitSections(i),t=Xt.findActiveCameraSection(e);if(t===-1)return;const n=Xt.splitLines(e[t]),r=n[0].split(" ");if(r.length<4)return;const c=r[3];let p,g,d;for(const y of n){const E=/^a=rtpmap:([0-9]+)\s/.exec(y);if(E===null||E.length<2||E[1]!==c)continue;const k=y.split(" ")[1].split("/");if(!(k===void 0||k.length<2)){p=k[0],g=k[1];for(const V of n)if(V.startsWith(`a=fmtp:${c}`)){const F=V.split(" ");if(F===void 0||F.length<2)return;d=F[1];continue}break}}if(p!==void 0)return new m.default(p,{clockRate:parseInt(g),mimeType:`video/${p}`,sdpFmtpLine:d})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=Xt.splitSections(e);return i.set("opus",Xt.findAudioPayloadType("opus",t)),i.set("red",Xt.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,n=new RegExp(t);for(const r of e)if(/^m=audio/.test(r)){const c=n.exec(r);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(i){const e=Xt.splitSections(this.sdp),t=Xt.findActiveCameraSection(e);if(t===-1)return this;const n=Xt.splitLines(e[t]),r=[];for(const p of n)if(/^a=fmtp:\d*/.test(p)){const g=p+`;x-google-start-bitrate=${i*1e3}`;r.push(g)}else r.push(p);e[t]=r.join(Xt.CRLF)+Xt.CRLF;const c=e.join("");return new Xt(c)}constructor(i){this.sdp=i}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},AXyi:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var S;(function(h){h[h.NotConnected=0]="NotConnected",h[h.Connecting=1]="Connecting",h[h.Connected=2]="Connected",h[h.Updating=3]="Updating",h[h.Disconnecting=4]="Disconnecting"})(S=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=S},AaDX:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={InvalidCampaign:"invalid_campaign"},t=Object(a.a)("promo.campaigns.eligibilityInfo generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d),E=yield r(Object(m.apiCall)({method:"promo.campaigns.eligibilityInfo",args:y,reason:p.reason}));return Object(i.a)(E)}catch(g){throw Object(s.a)({getState:c}).error(`API call to promo.campaigns.eligibilityInfo
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsEligibilityInfoFetcher",description:"promo.campaigns.eligibilityInfo generated fetcher"}},"Agw+":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(n,r,c,p){function g(d){return d instanceof c?d:new c(function(y){y(d)})}return o(g,"adopt"),new(c||(c=Promise))(function(d,y){function E(V){try{k(p.next(V))}catch(F){y(F)}}o(E,"fulfilled");function w(V){try{k(p.throw(V))}catch(F){y(F)}}o(w,"rejected");function k(V){V.done?d(V.value):g(V.value).then(E,w)}o(k,"step"),k((p=p.apply(n,r||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ywpn")),m=h(f("e/ca")),a=h(f("uctb")),s=h(f("Wjms")),i=h(f("raQ4"));let e=o(class extends s.default{loadAssets(){return S(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return S(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=o(class gS extends u.default{static create(r,c){return S(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:p}=c;if(!(yield gS.isSupported(r,c)))return p.warn("Using no-op processor because background replacement is not supported"),new e;p.info("Using background replacement filter");const d=new i.default(r,c);return yield d.loadAssets(),d})}static resolveOptions(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},r);return c.logger||(c.logger=new m.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(r){return S(this,void 0,void 0,function*(){if(!r.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const p=c.getContext("2d");p.fillStyle="blue",p.fillRect(0,0,100,100);const g=yield new Promise(d=>{c.toBlob(d)});r.imageBlob=g}})}static isSupported(r,c){const p=Object.create(null,{isSupported:{get:()=>super.isSupported}});return S(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const g=c.imageBlob,d=URL.createObjectURL(g);try{yield i.default.loadImage(d)}catch(y){return c.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(d)}return p.isSupported.call(this,r,c)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},Aplu:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let S=o(class{static of(a){return a==null?u.of():h.of(a)}},"Maybe");l.Maybe=S;let h=o(class SS{map(a){return S.of(a(this.value))}flatMap(a){return a(this.value)}get(){return this.value}getOrElse(a){return this.value}defaulting(a){return S.of(this.getOrElse(a))}static of(a){if(a==null)throw new Error("value is ${value}");return new SS(a)}constructor(a){this.value=a,this.isSome=!0,this.isNone=!1}},"Some");l.Some=h;let u=o(class Uc{get(){throw new Error("value is null")}getOrElse(a){return a}map(a){return new Uc}flatMap(a){return new Uc}defaulting(a){return S.of(this.getOrElse(a))}static of(){return new Uc}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=u},AqXs:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={ListNotFound:"list_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found",InvalidCursor:"invalid_cursor"},t=Object(a.a)("lists.records.list generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"lists.records.list",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to lists.records.list
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherlistsRecordsListFetcher",description:"lists.records.list generated fetcher"}},AtlK:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(y,E,w,k){function V(F){return F instanceof w?F:new w(function(N){N(F)})}return o(V,"adopt"),new(w||(w=Promise))(function(F,N){function P(M){try{O(k.next(M))}catch(D){N(D)}}o(P,"fulfilled");function x(M){try{O(k.throw(M))}catch(D){N(D)}}o(x,"rejected");function O(M){M.done?F(M.value):V(M.value).then(P,x)}o(O,"step"),O((k=k.apply(y,E||[])).next())})},h=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("o3U+"),m=f("EkyC"),a=f("KvYa"),s=h(f("U9CR")),i=h(f("aZJ3")),e=f("VCUZ"),t=h(f("ac3q")),n=h(f("Xv43")),r=f("O9RP"),c=f("1AO7"),p=f("Lxy7"),g=f("C5KY");let d=o(class wd{process(E){return S(this,void 0,void 0,function*(){return E})}fxProcess(E){return S(this,void 0,void 0,function*(){const w=E[0].asCanvasElement();this.didStreamParametersChange(w)&&(yield this.adjustProcessorForNewStreamParameters(w));try{yield this.manageSegmentationMask(w)}catch(k){throw this.logger.error(k),new Error("Video stream could not be processed")}return yield this.renderer.render(w,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return S(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return S(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return S(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:p.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return S(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const w=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(w),this.segmentationRateManager.completeSegmentation()}}catch(w){throw this.logger.error(w.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return S(this,void 0,void 0,function*(){wd.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(w){throw this.logger.error(w.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setEffectConfig(E){return S(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const w=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(w)}catch(k){throw this.logger.error(k.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}w.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(w),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,w),this.effectConfig=w,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return S(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return S(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(k){throw this.logger.error(k.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const w=E.backgroundReplacement.defaultColor;if(w&&w!=="black"&&w!=="#000000"&&w!=="#000"){if(w.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(w))throw new Error(`Invalid hexadecimal color code for default replacement background: ${w}`);const V=document.createElement("canvas").getContext("2d"),F=V.fillStyle;if(V.fillStyle=w,V.fillStyle===F)throw new Error(`Invalid color for default replacement background: ${w}`)}})}validateProcessingBudgetPerFrame(E){if(E<p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return S(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,w){const k=new URL(E);for(const[V,F]of Object.entries(w))if(F!==void 0){const N=encodeURIComponent(V),P=encodeURIComponent(F);k.searchParams.set(N,P)}return k.toString()}loadEngineWorker(E){return S(this,void 0,void 0,function*(){try{const w=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.WORKER_PATH,E);this.engineWorker=yield m.loadWorker(w,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",k=>this.engineWorkerReceiver(k))}catch(w){throw this.logger.error(w.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return S(this,void 0,void 0,function*(){this.buildEnginePromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:p.CDN_BASE_PATH,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(w){throw this.logger.error(w.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return S(this,void 0,void 0,function*(){const w=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.FXLIB_PATH,E),k={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const V=yield u.fetchWithBehavior(w,k,{});if(!V.ok)throw new Error("Fetch failed.");const F=window.URL.createObjectURL(yield V.blob());yield new Promise((N,P)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",F),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",N),this.fxLibScript.addEventListener("error",P),document.body.appendChild(this.fxLibScript)})}catch(V){throw this.logger.error(V.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const w=E.data;switch(w.msg){case p.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(w.payload);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(w.payload.output);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case p.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(w)}`);break}}settleEngineBuildPromise(E){E!==p.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return S(this,void 0,void 0,function*(){let k=!0;const V=o((P,x)=>{P&&(E.info(x),k=!1)},"checkEnv");V(typeof globalThis>"u","Browser does not have globalThis."),V(!a.supportsWorker(globalThis,E),"Browser does not support web workers."),V(!a.supportsWASM(globalThis,E),"Browser does not support wasm."),V(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const F=new s.default;V(!F.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const N=o(()=>S(this,void 0,void 0,function*(){if(w)try{const P=new wd(E);yield P.loadAssets(),yield P.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(k?yield N():!1)})}static create(E,w){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return S(this,void 0,void 0,function*(){const V=new wd(E,k);try{return yield V.loadAssets(),yield V.setEffectConfig(w),V}catch(F){throw E.error(F.toString()),V.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,w){return E.backgroundBlur.isEnabled===w.backgroundBlur.isEnabled&&E.backgroundBlur.strength===w.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===w.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===w.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===w.backgroundReplacement.isEnabled}constructor(E,w=p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,k){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new n.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(w)}catch(V){throw this.logger.error(V),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${w}`)}k&&(this.eventController=k),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new r.DeferredPromise,this.segmentationRateManager=new g.VideoFxSegmentationRateManager(this.logger,w),this.streamParameters={framerate:p.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:p.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:p.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:p.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},wd.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${wd.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${w}`)}},"VideoFxProcessor");l.default=d,d.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},B7cK:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("xzjI"));let u=o(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=u},BEtg:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("K4CH"),u=S(f("ac3q"));let m=o(class xl{getParserResult(){var s,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((s=this.parserResult)===null||s===void 0?void 0:s.os.name)||xl.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||xl.UNAVAILABLE,sdkVersion:u.default.sdkVersion,sdkName:u.default.sdkName}}constructor(s){var i,e,t,n,r,c,p;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(g){s.error(g.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||xl.UNAVAILABLE,this.browserName=((n=this.parserResult)===null||n===void 0?void 0:n.browser.name)||xl.UNAVAILABLE,this.browserVersion=((r=this.parserResult)===null||r===void 0?void 0:r.browser.version)||xl.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((p=this.parserResult)===null||p===void 0?void 0:p.device.model)||""].join(" ").trim()||xl.UNAVAILABLE}},"DefaultUserAgentParser");l.default=m,m.UNAVAILABLE="Unavailable"},BGMr:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("ezoW")),u=S(f("VYs+")),m=f("Aplu"),a=S(f("Biyp")),s=S(f("p5Ac"));let i=o(class Cr{updateConnectionMetric(t){let{uplinkKbps:n=0}=t;if(isNaN(n))return;this.startTimeMs===0&&(this.startTimeMs=Date.now()),Date.now()-this.startTimeMs<Cr.startupDurationMs?this.lastUplinkBandwidthKbps=Cr.defaultUplinkBandwidthKbps:this.lastUplinkBandwidthKbps=n,this.logger.debug(()=>`simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`);let r=Cr.holdDownDurationMs;this.currentActiveStreams===3?r=Cr.holdDownDurationMs*2:(this.currentActiveStreams===2&&n<=this.midDisabledRate||this.currentActiveStreams===1&&n<=this.hiDisabledRate)&&(r=Cr.holdDownDurationMs/2),!(Date.now()<this.lastUpdatedMs+r)&&(this.newQualityMap=this.calculateEncodingParameters(!1))}calculateEncodingParameters(t){const n=[new s.default,new s.default,new s.default];let r=0,c=0;if(this.currentActiveStreams===0?(r=this.lastUplinkBandwidthKbps+1,c=0):this.currentActiveStreams===1?(r=this.enableFhdVideo?4e3:2400,c=this.hiDisabledRate):this.currentActiveStreams===2?(r=this.enableFhdVideo?1600:1e3,c=this.midDisabledRate):(r=this.enableFhdVideo?500:300,c=0),t||this.lastUplinkBandwidthKbps>=r||this.lastUplinkBandwidthKbps<=c){this.shouldDisableSimulcast?(this.newActiveStreams=0,n[0].maxBitrateKbps=0,n[1].maxBitrateKbps=this.hiTargetBitrateKbps,n[2].maxBitrateKbps=0):this.numSenders<=4&&this.lastUplinkBandwidthKbps>=this.hiDisabledRate?(this.newActiveStreams=1,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=this.hiTargetBitrateKbps):this.lastUplinkBandwidthKbps>=this.midDisabledRate?(this.newActiveStreams=2,n[0].maxBitrateKbps=this.lastUplinkBandwidthKbps>=this.midTargetBitrateKbps*.7?this.lowTargetBitrateKbps*2/3:this.lowTargetBitrateKbps/2,n[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,n[2].maxBitrateKbps=0):(this.newActiveStreams=3,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=0);const p=n.map((g,d,y)=>g.maxBitrateKbps);this.newQualityMap=this.fillEncodingParamWithBitrates(p),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`)}return this.newQualityMap}chooseMediaTrackConstraints(){return{width:{ideal:this.enableFhdVideo?1920:1280},height:{ideal:this.enableFhdVideo?1080:768},frameRate:{ideal:15}}}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.currentActiveStreams=this.newActiveStreams,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const n=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,r=n!==this.numSenders,c=t.numberOfParticipants(),p=c>=0&&c<=2,g=this.shouldDisableSimulcast!==p;this.numSenders=n,this.shouldDisableSimulcast=p,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,this.newQualityMap=this.calculateEncodingParameters(r||g)}wantsResubscribe(){let t=!this.encodingParametersEqual();this.nextLocalDescriptions=this.videoIndex.localStreamDescriptions();for(let n=0;n<this.nextLocalDescriptions.length;n++){const r=this.nextLocalDescriptions[n].streamId;if(r!==0&&r){const c=this.currLocalDescriptions.findIndex(p=>p.streamId===r);c!==-1&&this.nextLocalDescriptions[n].disabledByWebRTC!==this.currLocalDescriptions[c].disabledByWebRTC&&(t=!0)}}return t&&(this.lastUpdatedMs=Date.now()),this.currLocalDescriptions=this.nextLocalDescriptions,t}compareEncodingParameter(t,n){return JSON.stringify(t)===JSON.stringify(n)}encodingParametersEqual(){let t=!1;for(const n of u.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(n),this.currentQualityMap.get(n)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiDisabledRate=t?Cr.kHiDisabledRateFhd:Cr.kHiDisabledRateHd,this.midDisabledRate=t?Cr.kMidDisabledRateFhd:Cr.kMidDisabledRateHd,this.hiTargetBitrateKbps=t?Cr.kHiTargetBitrateKbpsFhd:Cr.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?Cr.kMidTargetBitrateKbpsFhd:Cr.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?Cr.kLowTargetBitrateKbpsFhd:Cr.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const n=new Map,r=1e3,c=u.default.NAME_ARR_ASCENDING,p=t;let g=this.shouldDisableSimulcast?1:4;for(let d=0;d<c.length;d++){const y=c[d];n.set(y,{rid:y,active:p[d]>0,scaleResolutionDownBy:Math.max(g,1),maxBitrate:p[d]*r}),g=g/2}return n}getQualityMapString(t){let n="";const r=this.videoIndex.localStreamDescriptions();return r.length===3&&t.forEach(c=>{let p=!1;c.rid==="low"?p=r[0].disabledByWebRTC:c.rid==="mid"?p=r[1].disabledByWebRTC:p=r[2].disabledByWebRTC,n+=`{ rid: ${c.rid} active:${c.active} disabledByWebRTC: ${p} maxBitrate:${c.maxBitrate}}`}),n}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium;case 3:return h.default.Low}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(n=>{m.Maybe.of(n.encodingSimulcastLayersDidChange).map(r=>r.bind(n)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)t(n)}constructor(t,n){this.selfAttendeeId=t,this.logger=n,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.currentActiveStreams=1,this.lastUplinkBandwidthKbps=Cr.defaultUplinkBandwidthKbps,this.startTimeMs=0,this.lastUpdatedMs=Date.now(),this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.observerQueue=new Set,this.hiDisabledRate=Cr.kHiDisabledRateHd,this.midDisabledRate=Cr.kMidDisabledRateHd,this.hiTargetBitrateKbps=Cr.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=Cr.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=Cr.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.lastUplinkBandwidthKbps=Cr.defaultUplinkBandwidthKbps,this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=i,i.defaultUplinkBandwidthKbps=1200,i.startupDurationMs=6e3,i.holdDownDurationMs=4e3,i.defaultMaxFrameRate=15,i.kHiDisabledRateHd=700,i.kMidDisabledRateHd=240,i.kHiDisabledRateFhd=1200,i.kMidDisabledRateFhd=400,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},BQaj:function(j,l,f){"use strict";f.r(l),f.d(l,"fromHex",function(){return u}),f.d(l,"toHex",function(){return m});const S={},h={};for(let a=0;a<256;a++){let s=a.toString(16).toLowerCase();s.length===1&&(s=`0${s}`),S[a]=s,h[s]=a}function u(a){if(a.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const s=new Uint8Array(a.length/2);for(let i=0;i<a.length;i+=2){const e=a.slice(i,i+2).toLowerCase();if(e in h)s[i/2]=h[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return s}o(u,"fromHex");function m(a){let s="";for(let i=0;i<a.byteLength;i++)s+=S[a[i]];return s}o(m,"toHex")},BY2i:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("/AJg"));let u=o(class sc{allowSubscribe(a,s){let i=0;const e=this.currentNetworkEvent;if(s>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=s,!0;if(s<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=s,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,s){let i=sc.MINIMUM_DELAY_MS;const e=sc.MAXIMUM_DELAY_MS-sc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:i+=e*t*(1+s/10),i=Math.min(sc.MAXIMUM_DELAY_MS,i);break}return i}constructor(a=0,s=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=s,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.Default,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,s<0?s=0:s>1&&(s=1),this.networkIssueRecoveryDelayFactor=s}},"VideoPriorityBasedPolicyConfig");l.default=u,u.MINIMUM_DELAY_MS=2e3,u.MAXIMUM_DELAY_MS=8e3,u.Default=new u(0,0),u.UnstableNetworkPreset=new u(0,1),u.StableNetworkPreset=new u(1,0)},Biyp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class vS{equal(u){let m=u.captureWidth()===this.cameraWidth&&u.captureHeight()===this.cameraHeight&&u.captureFrameRate()===this.cameraFrameRate&&u.encodeBitrates().length===this.encodeBitrates().length&&u.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&u.encodeWidths().length===this.encodeWidths().length&&u.encodeHeights().length===this.encodeHeights().length&&u.isSVCEncoding()===this.isSVC;if(m){for(let a=0;a<u.encodeWidths().length;a++)if(u.encodeWidths()[a]!==this.encodeWidths()[a]||u.encodeHeights()[a]!==this.encodeHeights()[a]||u.encodeBitrates()[a]!==this.encodeBitrates()[a]||u.encodeScaleResolutionDownBy()[a]!==this.encodeScaleResolutionDownBy()[a])return m=!1,m}return m}clone(){return new vS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(u,m,a,s,i,e=1,t=!1){this.cameraWidth=u,this.cameraHeight=m,this.cameraFrameRate=a,this.maxEncodeBitrateKbps=s,this.isSimulcast=i,this.scaleResolutionDownBy=e,this.isSVC=t}},"DefaultVideoCaptureAndEncodeParameter");l.default=S},BkFD:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{start(u){this.stop(),this.timer=setInterval(u,this.intervalMs)}stop(){this.timer!==void 0&&(clearInterval(this.timer),this.timer=void 0)}running(){return this.timer!==void 0}constructor(u){this.intervalMs=u}},"IntervalScheduler");l.default=S},Bkbp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var S=f("dJwD"),h=f("V7js"),u=f("2ZyS"),m=f("MdQ0"),a=function(){function i(e){if(this.hash=new u.RawSha256,e){this.outer=new u.RawSha256;var t=s(e),n=new Uint8Array(h.BLOCK_SIZE);n.set(t);for(var r=0;r<h.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}}return o(i,"Sha2561"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){return[2,this.digestSync()]})})},i}();l.Sha256=a;function s(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>h.BLOCK_SIZE){var t=new u.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(h.BLOCK_SIZE);return n.set(e),n}o(s,"bufferFromSecret")},BvK0:function(j,l,f){"use strict";var S=f("YBmv"),h=f("fywt"),u=f("eP7z");function m(a,s){return a&&a.length?Object(S.a)(a,Object(h.a)(s,2),u.a):void 0}o(m,"minBy"),l.a=m},C5KY:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const S=f("Lxy7");let h=o(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=S.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,a){this.logger=m,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=S.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},C5aR:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function S(h){return typeof h=="string"?h.length===0:h.byteLength===0}o(S,"isEmptyData"),l.isEmptyData=S},CAce:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("XCDq");let h=o(class cl{equals(m){return m!==void 0&&this.codecName===m.codecName&&this.codecCapability.mimeType===m.codecCapability.mimeType&&this.codecCapability.clockRate===m.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===m.codecCapability.sdpFmtpLine}static vp8(){return new cl("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264ConstrainedBaselineProfile(){return new cl("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264(){return cl.h264ConstrainedBaselineProfile()}static av1Main(){return new cl("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static vp9Profile0(){return new cl("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static fromSignaled(m){switch(m){case S.SdkVideoCodecCapability.VP8:return cl.vp8();case S.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return cl.h264ConstrainedBaselineProfile();case S.SdkVideoCodecCapability.VP9_PROFILE_0:return this.vp9Profile0();case S.SdkVideoCodecCapability.AV1_MAIN:return this.av1Main();default:return}}constructor(m,a){this.codecName=m,this.codecCapability=a}},"VideoCodecCapability");l.default=h},CLOt:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("f2XL");let h=o(class ul{equals(m){return m!==void 0&&this.codecName===m.codecName&&this.codecCapability.mimeType===m.codecCapability.mimeType&&this.codecCapability.clockRate===m.codecCapability.clockRate&&this.codecCapability.sdpFmtpLine===m.codecCapability.sdpFmtpLine}static vp8(){return new ul("VP8",{clockRate:9e4,mimeType:"video/VP8"})}static h264ConstrainedBaselineProfile(){return new ul("H264",{clockRate:9e4,mimeType:"video/H264",sdpFmtpLine:"level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f"})}static h264(){return ul.h264ConstrainedBaselineProfile()}static av1Main(){return new ul("AV1",{clockRate:9e4,mimeType:"video/AV1"})}static vp9Profile0(){return new ul("VP9",{clockRate:9e4,mimeType:"video/VP9",sdpFmtpLine:"profile-id=0"})}static fromSignaled(m){switch(m){case S.SdkVideoCodecCapability.VP8:return ul.vp8();case S.SdkVideoCodecCapability.H264_CONSTRAINED_BASELINE_PROFILE:return ul.h264ConstrainedBaselineProfile();case S.SdkVideoCodecCapability.VP9_PROFILE_0:return this.vp9Profile0();case S.SdkVideoCodecCapability.AV1_MAIN:return this.av1Main();default:return}}constructor(m,a){this.codecName=m,this.codecCapability=a}},"VideoCodecCapability");l.default=h},COTZ:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("DUgj"));let u=o(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=u},CPHI:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.ResolutionNotSupported=2]="ResolutionNotSupported",h[h.PermissionDenied=3]="PermissionDenied"})(S=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=S},CRwe:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("bTau")),m=h(f("AUdx")),a=h(f("CLOt")),s=h(f("aVV0"));let i=o(class extends s.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return S(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let r=this.context.sdpAnswer;r=new m.default(r).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(r=new m.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new m.default(r).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new m.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.currentVideoSendCodec=new m.default(r).highestPriorityVideoSendCodec();const c=this.context.activeVideoInput;if(c!==void 0){const g=this.context.audioVideoController.configuration.credentials.attendeeId,d=new u.default(g).hasModality(u.default.MODALITY_CONTENT),y=c.getVideoTracks()[0];d&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${g}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${g}`)))}this.logger.info(`processed remote description is >>>${r}<<<`);const p={type:"answer",sdp:r,toJSON:null};try{yield this.createICEConnectionCompletedPromise(p)}catch(g){throw g}})}createICEConnectionCompletedPromise(t){return new Promise((n,r)=>S(this,void 0,void 0,function*(){const c=o(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),n())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),r(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(p){r(p)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=i},CWxj:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(d,y,E,w){function k(V){return V instanceof E?V:new E(function(F){F(V)})}return o(k,"adopt"),new(E||(E=Promise))(function(V,F){function N(O){try{x(w.next(O))}catch(M){F(M)}}o(N,"fulfilled");function P(O){try{x(w.throw(O))}catch(M){F(M)}}o(P,"rejected");function x(O){O.done?V(O.value):k(O.value).then(N,P)}o(x,"step"),x((w=w.apply(d,y||[])).next())})},h=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("a6MJ")),m=h(f("Fm4y")),a=h(f("cKqT")),s=h(f("U9CR")),i=h(f("InPl")),e=h(f("egzF")),t=h(f("p7bP")),n=f("crgu"),r=h(f("KEX5")),c=h(f("l7oq")),p=h(f("3jln"));let g=o(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return S(this,void 0,void 0,function*(){n.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),n.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),n.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new s.default,E=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${E}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,E,w,k){this._eventController=k,this._configuration=y,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new r.default(y,E)),w.eventController||(w.eventController=this.eventController),this.audioVideoController=new u.default(this._configuration,this._logger,new p.default(this._logger),w,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=w,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const V=new i.default(this._logger);this.contentShareController=new e.default(V,new u.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new p.default(this._logger),V,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=g},CmE0:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const u=f("GEtQ"),m=h(f("KsuK")),a=h(f("8V8Y"));let s=o(class{whenNext(){return this.promise||(this.promise=new Promise(n=>this.resolve=n)),this.promise}next(n){this.value=n,this.resolve(n),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=o(class Uf{static createWorkerPromise(){const n={resolve:null,reject:null,promise:null};return n.promise=new Promise((r,c)=>{n.resolve=r,n.reject=c}),n}validateSpec(n){if(!n)throw new Error("processor has null spec");if(!n.model)throw new Error("processor spec has null model");if(!n.paths)throw new Error("processor spec has null paths")}validateOptions(n){if(!n)throw new Error("processor has null options");if(!n.logger)throw new Error("processor has null options - logger");if(!n.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!n.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(n){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,n.reportingPeriodMillis,n.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(n){return JSON.stringify(n,null,2)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const r=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:r.path,inputHeight:r.input.height,inputWidth:r.input.width,inputChannels:4,modelRangeMin:r.input.range[0],modelRangeMax:r.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(n){if(this.logger.info(`received load model message: ${this.stringify(n)}`),n.payload!==2){this.logger.error("failed to load model! status: "+n.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+n.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(n){this.mask$.next(n.payload.output)}handleWorkerEvent(n){const r=n.data;switch(r.msg){case"initialize":this.handleInitialize(r);break;case"loadModel":this.handleLoadModel(r);break;case"predict":this.handlePredict(r);break;default:this.logger.info(`unexpected event msg: ${this.stringify(r)}`);break}}loadAssets(){return S(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield u.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",n=>this.handleWorkerEvent(n)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(n){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${n.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(n){return S(this,void 0,void 0,function*(){if(this.destroyed)return n;this.frameCounter.frameReceived(n[0].framerate),this.cpuMonitor.frameReceived();const r=n[0].asCanvasElement();if(!r)return n;if(!this.modelInitialized)return n[0]=this.canvasVideoFrameBuffer,n;const c=r.width,p=r.height;if(c===0||p===0)return n;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==p)&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let g=this.mask$.value;const d=this.spec.model.input.width/r.width,y=this.spec.model.input.height/r.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(d,y),E.drawImage(r,0,0),E.restore();const w=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const k=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:w},[w.data.buffer]),g=yield k}this.destroyed||this.drawImageWithMask(r,g)}catch(g){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${g}`),n}finally{this.frameCounter.filterComplete(),this.frameNumber++}return n[0]=this.canvasVideoFrameBuffer,n})}updateVideoFramesPerFilterUpdate(n){n!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=n,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var n,r,c,p;return S(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(n=this.worker)===null||n===void 0||n.postMessage({msg:"destroy"}),(r=this.worker)===null||r===void 0||r.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(p=this.scaledCanvas)===null||p===void 0||p.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(n,r,c,p,g){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new s,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=Uf.createWorkerPromise(),this.loadModelPromise=Uf.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=n,this.validateSpec(r),this.validateOptions(c),this.spec=r,this.logger=c.logger,this.delegate=p,this.initCPUMonitor(c),this.eventController=g}},"BackgroundFilterProcessor");l.default=i;let e=o(class{filterCPUUtilizationHigh(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=n,this.observer.reduceCPUUtilization())}frameReceived(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=n,this.observer.increaseCPUUtilization())}constructor(n,r){this.monitoringPeriodMillis=n,this.observer=r,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},CtrA:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{text(){return new TextDecoder().decode(this.data)}json(){return JSON.parse(new TextDecoder().decode(this.data))}constructor(u,m,a,s,i,e){this.timestampMs=u,this.topic=m,this.data=a,this.senderAttendeeId=s,this.senderExternalUserId=i,this.throttled=!!e}},"DataMessage");l.default=S},CxCb:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{calculateScore(u,m,a){(a||m===null)&&(m=0),this.volumes.hasOwnProperty(u)||(this.volumes[u]=0),m>this.silenceThreshold?m=1:m=0;const s=this.volumes[u]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[u]=s;for(const i in this.volumes)i!==u&&(this.volumes[i]=Math.max(this.volumes[i]-this.takeoverRate*m,0));return s<this.cutoffThreshold?0:s}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(u=.9,m=.01,a=.2,s=.2){this.speakerWeight=u,this.cutoffThreshold=m,this.silenceThreshold=a,this.takeoverRate=s,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=S},Czkq:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}filterFrameDurationHigh(u){var m;for(const a of this.observers)(m=a.filterFrameDurationHigh)===null||m===void 0||m.call(a,u)}filterCPUUtilizationHigh(u){var m;for(const a of this.observers)(m=a.filterCPUUtilizationHigh)===null||m===void 0||m.call(a,u)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=S},D3pN:function(j,l,f){"use strict";f.r(l),f.d(l,"__extends",function(){return h}),f.d(l,"__assign",function(){return u}),f.d(l,"__rest",function(){return m}),f.d(l,"__decorate",function(){return a}),f.d(l,"__param",function(){return s}),f.d(l,"__metadata",function(){return i}),f.d(l,"__awaiter",function(){return e}),f.d(l,"__generator",function(){return t}),f.d(l,"__createBinding",function(){return n}),f.d(l,"__exportStar",function(){return r}),f.d(l,"__values",function(){return c}),f.d(l,"__read",function(){return p}),f.d(l,"__spread",function(){return g}),f.d(l,"__spreadArrays",function(){return d}),f.d(l,"__await",function(){return y}),f.d(l,"__asyncGenerator",function(){return E}),f.d(l,"__asyncDelegator",function(){return w}),f.d(l,"__asyncValues",function(){return k}),f.d(l,"__makeTemplateObject",function(){return V}),f.d(l,"__importStar",function(){return F}),f.d(l,"__importDefault",function(){return N}),f.d(l,"__classPrivateFieldGet",function(){return P}),f.d(l,"__classPrivateFieldSet",function(){return x});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=o(function(O,M){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,J){D.__proto__=J}||function(D,J){for(var q in J)J.hasOwnProperty(q)&&(D[q]=J[q])},S(O,M)},"extendStatics");function h(O,M){S(O,M);function D(){this.constructor=O}o(D,"__"),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}o(h,"__extends");var u=o(function(){return u=Object.assign||o(function(M){for(var D,J=1,q=arguments.length;J<q;J++){D=arguments[J];for(var $ in D)Object.prototype.hasOwnProperty.call(D,$)&&(M[$]=D[$])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(O,M){var D={};for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&M.indexOf(J)<0&&(D[J]=O[J]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,J=Object.getOwnPropertySymbols(O);q<J.length;q++)M.indexOf(J[q])<0&&Object.prototype.propertyIsEnumerable.call(O,J[q])&&(D[J[q]]=O[J[q]]);return D}o(m,"__rest");function a(O,M,D,J){var q=arguments.length,$=q<3?M:J===null?J=Object.getOwnPropertyDescriptor(M,D):J,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,M,D,J);else for(var Ee=O.length-1;Ee>=0;Ee--)(de=O[Ee])&&($=(q<3?de($):q>3?de(M,D,$):de(M,D))||$);return q>3&&$&&Object.defineProperty(M,D,$),$}o(a,"__decorate");function s(O,M){return function(D,J){M(D,J,O)}}o(s,"__param");function i(O,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,M)}o(i,"__metadata");function e(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})}o(e,"__awaiter");function t(O,M){var D={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,q,$,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(ye){return function(Be){return _e([ye,Be])}}function _e(ye){if(J)throw new TypeError("Generator is already executing.");for(;D;)try{if(J=1,q&&($=ye[0]&2?q.return:ye[0]?q.throw||(($=q.return)&&$.call(q),0):q.next)&&!($=$.call(q,ye[1])).done)return $;switch(q=0,$&&(ye=[ye[0]&2,$.value]),ye[0]){case 0:case 1:$=ye;break;case 4:return D.label++,{value:ye[1],done:!1};case 5:D.label++,q=ye[1],ye=[0];continue;case 7:ye=D.ops.pop(),D.trys.pop();continue;default:if($=D.trys,!($=$.length>0&&$[$.length-1])&&(ye[0]===6||ye[0]===2)){D=0;continue}if(ye[0]===3&&(!$||ye[1]>$[0]&&ye[1]<$[3])){D.label=ye[1];break}if(ye[0]===6&&D.label<$[1]){D.label=$[1],$=ye;break}if($&&D.label<$[2]){D.label=$[2],D.ops.push(ye);break}$[2]&&D.ops.pop(),D.trys.pop();continue}ye=M.call(O,D)}catch(Be){ye=[6,Be],q=0}finally{J=$=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}}o(t,"__generator");function n(O,M,D,J){J===void 0&&(J=D),O[J]=M[D]}o(n,"__createBinding");function r(O,M){for(var D in O)D!=="default"&&!M.hasOwnProperty(D)&&(M[D]=O[D])}o(r,"__exportStar");function c(O){var M=typeof Symbol=="function"&&Symbol.iterator,D=M&&O[M],J=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&J>=O.length&&(O=void 0),{value:O&&O[J++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}o(c,"__values");function p(O,M){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var J=D.call(O),q,$=[],de;try{for(;(M===void 0||M-- >0)&&!(q=J.next()).done;)$.push(q.value)}catch(Ee){de={error:Ee}}finally{try{q&&!q.done&&(D=J.return)&&D.call(J)}finally{if(de)throw de.error}}return $}o(p,"__read");function g(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(p(arguments[M]));return O}o(g,"__spread");function d(){for(var O=0,M=0,D=arguments.length;M<D;M++)O+=arguments[M].length;for(var J=Array(O),q=0,M=0;M<D;M++)for(var $=arguments[M],de=0,Ee=$.length;de<Ee;de++,q++)J[q]=$[de];return J}o(d,"__spreadArrays");function y(O){return this instanceof y?(this.v=O,this):new y(O)}o(y,"__await");function E(O,M,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=D.apply(O,M||[]),q,$=[];return q={},de("next"),de("throw"),de("return"),q[Symbol.asyncIterator]=function(){return this},q;function de(Ve){J[Ve]&&(q[Ve]=function(gt){return new Promise(function(dt,Je){$.push([Ve,gt,dt,Je])>1||Ee(Ve,gt)})})}function Ee(Ve,gt){try{_e(J[Ve](gt))}catch(dt){pt($[0][3],dt)}}function _e(Ve){Ve.value instanceof y?Promise.resolve(Ve.value.v).then(ye,Be):pt($[0][2],Ve)}function ye(Ve){Ee("next",Ve)}function Be(Ve){Ee("throw",Ve)}function pt(Ve,gt){Ve(gt),$.shift(),$.length&&Ee($[0][0],$[0][1])}}o(E,"__asyncGenerator");function w(O){var M,D;return M={},J("next"),J("throw",function(q){throw q}),J("return"),M[Symbol.iterator]=function(){return this},M;function J(q,$){M[q]=O[q]?function(de){return(D=!D)?{value:y(O[q](de)),done:q==="return"}:$?$(de):de}:$}}o(w,"__asyncDelegator");function k(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O[Symbol.asyncIterator],D;return M?M.call(O):(O=typeof c=="function"?c(O):O[Symbol.iterator](),D={},J("next"),J("throw"),J("return"),D[Symbol.asyncIterator]=function(){return this},D);function J($){D[$]=O[$]&&function(de){return new Promise(function(Ee,_e){de=O[$](de),q(Ee,_e,de.done,de.value)})}}function q($,de,Ee,_e){Promise.resolve(_e).then(function(ye){$({value:ye,done:Ee})},de)}}o(k,"__asyncValues");function V(O,M){return Object.defineProperty?Object.defineProperty(O,"raw",{value:M}):O.raw=M,O}o(V,"__makeTemplateObject");function F(O){if(O&&O.__esModule)return O;var M={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(M[D]=O[D]);return M.default=O,M}o(F,"__importStar");function N(O){return O&&O.__esModule?O:{default:O}}o(N,"__importDefault");function P(O,M){if(!M.has(O))throw new TypeError("attempted to get private field on non-instance");return M.get(O)}o(P,"__classPrivateFieldGet");function x(O,M,D){if(!M.has(O))throw new TypeError("attempted to set private field on non-instance");return M.set(O,D),D}o(x,"__classPrivateFieldSet")},D7wJ:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("3i7i")),m=h(f("HbHZ")),a=f("XCDq"),s=h(f("j+uH"));let i=o(class Hf extends s.default{run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(t){if(t.type===m.default.ReceivedSignalFrame&&t.message.type===a.SdkSignalFrame.Type.DATA_MESSAGE)for(const n of t.message.dataMessage.messages){const r=new u.default(n.ingestTimeNs/1e6,n.topic,n.data,n.senderAttendeeId,n.senderExternalUserId,n.ingestTimeNs===0);this.context.realtimeController.realtimeReceiveDataMessage(r)}}validateDataMessage(t,n,r){if(!Hf.TOPIC_REGEX.test(t))throw new Error("Invalid topic");if(n.length>Hf.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(r&&r<0)throw new Error("The life time of the message has to be non negative")}constructor(t){super(t.logger),this.context=t,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(n,r,c)=>{if(this.context.signalingClient.ready()){let p;r instanceof Uint8Array?p=r:typeof r=="string"?p=new TextEncoder().encode(r):p=new TextEncoder().encode(JSON.stringify(r)),this.validateDataMessage(n,p,c);const g=a.SdkDataMessagePayload.create();g.topic=n,g.lifetimeMs=c,g.data=p;const d=a.SdkDataMessageFrame.create();d.messages=[g],this.context.signalingClient.sendDataMessage(d)}else this.context.logger.error("Signaling client is not ready")}}},"SendAndReceiveDataMessagesTask");l.default=i,i.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),i.DATA_SIZE=2048},DE61:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class yS{static builder(){return new yS}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const u={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},a="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=a,this.input=u,this.output=m,this}withPath(u){return this.path=u,this}withInput(u){return this.input=u,this}withOutput(u){return this.output=u,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=S},DG83:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoLogEvent=void 0;var S;(function(h){h[h.InputAttached=0]="InputAttached",h[h.SendingFailed=1]="SendingFailed",h[h.SendingSuccess=2]="SendingSuccess"})(S=l.VideoLogEvent||(l.VideoLogEvent={})),l.default=S},DJNY:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.default={hash:"7b41b42",raw:"v3.19.0",semverString:"3.19.0"}},DJgg:function(j,l,f){"use strict";j.exports=h;var S=f("kU+7");(h.prototype=Object.create(S.EventEmitter.prototype)).constructor=h;function h(u,m,a){if(typeof u!="function")throw TypeError("rpcImpl must be a function");S.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(a)}o(h,"Service"),h.prototype.rpcCall=o(function u(m,a,s,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return S.asPromise(u,t,m,a,s,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,a[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),o(function(r,c){if(r)return t.emit("error",r,m),e(r);if(c===null){t.end(!0);return}if(!(c instanceof s))try{c=s[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(p){return t.emit("error",p,m),e(p)}return t.emit("data",c,m),e(null,c)},"rpcCallback"))}catch(n){t.emit("error",n,m),setTimeout(function(){e(n)},0);return}},"rpcCall"),h.prototype.end=o(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},DUgj:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.convertServerSideNetworkAdaptionEnumToSignaled=l.convertServerSideNetworkAdaptionEnumFromSignaled=l.serverSideNetworkAdaptionIsNoneOrDefault=l.ServerSideNetworkAdaption=void 0;const S=f("f2XL");var h;(function(s){s[s.Default=0]="Default",s[s.None=1]="None",s[s.BandwidthProbing=2]="BandwidthProbing",s[s.BandwidthProbingAndRemoteVideoQualityAdaption=3]="BandwidthProbingAndRemoteVideoQualityAdaption"})(h=l.ServerSideNetworkAdaption||(l.ServerSideNetworkAdaption={})),l.default=h;function u(s){return s===h.None||s===h.Default}o(u,"serverSideNetworkAdaptionIsNoneOrDefault"),l.serverSideNetworkAdaptionIsNoneOrDefault=u;function m(s){switch(s){case S.SdkServerSideNetworkAdaption.DEFAULT:return h.Default;case S.SdkServerSideNetworkAdaption.NONE:return h.None;case S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING:return h.BandwidthProbing;case S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION:return h.BandwidthProbingAndRemoteVideoQualityAdaption}}o(m,"convertServerSideNetworkAdaptionEnumFromSignaled"),l.convertServerSideNetworkAdaptionEnumFromSignaled=m;function a(s){switch(s){case h.Default:return S.SdkServerSideNetworkAdaption.DEFAULT;case h.None:return S.SdkServerSideNetworkAdaption.NONE;case h.BandwidthProbing:return S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING;case h.BandwidthProbingAndRemoteVideoQualityAdaption:return S.SdkServerSideNetworkAdaption.BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION}}o(a,"convertServerSideNetworkAdaptionEnumToSignaled"),l.convertServerSideNetworkAdaptionEnumToSignaled=a},DbLV:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{matchesConstraints(u){return JSON.stringify(this.constraints)===JSON.stringify(u)}constructor(){this.groupId=""}},"DeviceSelection");l.default=S},DcUe:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("XJrD"));let u=o(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=u},DmQM:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class bS{static create(u,m){const a=/^[a-zA-Z0-9]+[a-zA-Z0-9_-]*[a-zA-Z0-9]+$/g;if(!u||u.length>32)throw new Error("appName should be a valid string and 1 to 32 characters in length");if(!a.test(u))throw new Error(`appName must satisfy ${a} regular expression`);const s=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/gm;if(!m||m.length>32)throw new Error("appVersion should be a valid string and 1 to 32 characters in length");if(!s.test(m))throw new Error("appVersion must satisfy Semantic Versioning format");return new bS(u,m)}constructor(u,m){this.appName=u,this.appVersion=m}},"ApplicationMetadata");l.default=S},E5fQ:function(j,l){function f(S){return j.exports=f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},j.exports.__esModule=!0,j.exports.default=j.exports,f(S)}o(f,"_typeof"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},E6e8:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S=f("dJwD");S.__exportStar(f("Bkbp"),l)},EIHC:function(j,l,f){var S=f("jSME"),h=f("jqgp"),u=f("H/VS"),m=f("e0fW");function a(s){return S(s)||h(s)||u(s)||m()}o(a,"_toConsumableArray"),j.exports=a,j.exports.__esModule=!0,j.exports.default=j.exports},"EX/T":function(j,l,f){"use strict";f.r(l),f.d(l,"fromHex",function(){return u}),f.d(l,"toHex",function(){return m});const S={},h={};for(let a=0;a<256;a++){let s=a.toString(16).toLowerCase();s.length===1&&(s=`0${s}`),S[a]=s,h[s]=a}function u(a){if(a.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const s=new Uint8Array(a.length/2);for(let i=0;i<a.length;i+=2){const e=a.slice(i,i+2).toLowerCase();if(e in h)s[i/2]=h[e];else throw new Error(`Cannot decode unrecognized sequence ${e} as hexadecimal`)}return s}o(u,"fromHex");function m(a){let s="";for(let i=0;i<a.byteLength;i++)s+=S[a[i]];return s}o(m,"toHex")},EjQB:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxSegmentationRateManager=void 0;const S=f("6qF3");let h=o(class{submitFrame(){this.frameCountOverSamplingPeriod++}shouldApplySegmentation(){return this.frameCountOverSamplingPeriod%this.framesPerSegmentation===0}startSegmentation(){this.frameSegmentationStartTime=performance.now()}completeSegmentation(){this.totalSegmentationDurationOverSamplingPeriod+=performance.now()-this.frameSegmentationStartTime,this.frameCountOverSamplingPeriod>=S.RESOURCE_CONSTRAINTS.SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT&&this.adjustFramesPerSegmentation(this.totalSegmentationDurationOverSamplingPeriod/(performance.now()-this.samplingPeriodStartTime))}adjustFramesPerSegmentation(m){m>this.targetSegmentationCyclePercentage?(this.framesPerSegmentation++,this.logger.info(`Segmentation cycle percentage above the configured maximal value. Decreasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)):this.framesPerSegmentation>1&&m<this.targetSegmentationCyclePercentage&&(this.framesPerSegmentation--,this.logger.info(`Segmentation cycle percentage below the configured maximal value. Increasing segmentation rate to 1 segmentation per ${this.framesPerSegmentation} frames`)),this.totalSegmentationDurationOverSamplingPeriod=0,this.frameCountOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now()}constructor(m,a){this.logger=m,this.targetSegmentationCyclePercentage=a/100,this.frameCountOverSamplingPeriod=0,this.totalSegmentationDurationOverSamplingPeriod=0,this.samplingPeriodStartTime=performance.now(),this.framesPerSegmentation=S.RESOURCE_CONSTRAINTS.SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION}},"VideoFxSegmentationRateManager");l.VideoFxSegmentationRateManager=h},EkGV:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,a){return S(this,void 0,void 0,function*(){this.callback=a,this.workerTimer?(this.workerTimer.onmessage=s=>{this.lastTimeout=s.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return S(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=h},EkyC:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const S=f("o3U+"),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},u=o((m,a,s,i)=>{i==null||i.debug(`Loading ${a} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=S.withQueryString(m,s);return Promise.resolve(new Worker(t,{name:a}))}return S.fetchWithBehavior(m,h,s).then(t=>{if(t.ok)return t.blob().then(n=>new Worker(window.URL.createObjectURL(n)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=u},F7zz:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("zcg+"));let u=o(class extends h.default{static nextTick(a){setTimeout(a,0)}constructor(){super(0)}},"AsyncScheduler");l.default=u},FCN7:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("hEYi")),m=f("f2XL"),a=h(f("aVV0"));let s=o(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())})}receiveLeaveAck(){return new Promise((e,t)=>{let n=o(class{cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(p){if(p.isConnectionTerminated()){this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),e();return}p.type===u.default.ReceivedSignalFrame&&p.message.type===m.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}constructor(p,g){this.signalingClient=p,this.logger=g}},"Interceptor");const r=new n(this.context.signalingClient,this.context.logger);this.taskCanceler=r,this.context.signalingClient.registerObserver(r)})}constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}},"LeaveAndReceiveLeaveAckTask");l.default=s},FKpq:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Mr6q"));let u=o(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=u},FMuk:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{add(u){return new Promise((m,a)=>{this.queue=this.queue.then(u).then(m).catch(a)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=S},Fm4y:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return o(e,"adopt"),new(s||(s=Promise))(function(t,n){function r(g){try{p(i.next(g))}catch(d){n(d)}}o(r,"fulfilled");function c(g){try{p(i.throw(g))}catch(d){n(d)}}o(c,"rejected");function p(g){g.done?t(g.value):e(g.value).then(r,c)}o(p,"step"),p((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("0OOd");let u=o(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const s=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,s),s}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,s){this.videoTileController.bindVideoElement(a,s),this.trace("bindVideoElement",{tileId:a,videoElementId:s.id})}unbindVideoElement(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,s),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:s})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const s=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),s}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const s=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,s),s}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const s=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),s}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,s){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,s),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,s){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,s),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,s)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,s,i){this.realtimeController.realtimeSendDataMessage(a,s,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,s){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,s),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,s,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,s,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,s),s})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const s=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,s),s})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,s),s})}startAudioInput(a){return S(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return S(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return S(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return S(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const s=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),s}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const s=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),s}chooseVideoInputQuality(a,s,i){this.deviceController.chooseVideoInputQuality(a,s,i),this.trace("chooseVideoInputQuality",{width:a,height:s,frameRate:i})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,s){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,s)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const s=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),s}startContentShareFromScreenCapture(a,s){const i=this.contentShareController.startContentShareFromScreenCapture(a,s);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,s,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let n=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof s<"u"&&(n+=` ${JSON.stringify(s)}`),typeof i<"u"&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const s=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,s),s}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,s,i,e,t,n){this.audioVideoController=a,this.videoTileController=s,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=n}},"DefaultAudioVideoFacade");l.default=u},FtwJ:function(j,l){function f(){return j.exports=f=Object.assign?Object.assign.bind():function(S){for(var h=1;h<arguments.length;h++){var u=arguments[h];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(S[m]=u[m])}return S},j.exports.__esModule=!0,j.exports.default=j.exports,f.apply(this,arguments)}o(f,"_extends"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},FxSh:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54")),m=h(f("3zlU"));let a=o(class CS{get outputMediaStream(){return this.pipe.outputMediaStream}passEventControllerToProcessors(i){if(this.pipe.processors)for(const e of this.pipe.processors)typeof e.setEventController=="function"&&e.setEventController(i)}chooseNewInnerDevice(i){const e=new CS(this.logger,i,this.processors,this.browserBehavior);return e.pipe=this.pipe,e}getInnerDevice(){return this.device}intrinsicDevice(){return S(this,void 0,void 0,function*(){return this.device})}transformStream(i){return S(this,void 0,void 0,function*(){return yield this.pipe.setInputMediaStream(i),this.inputMediaStream=i,this.pipe.getActiveOutputMediaStream()})}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const i=this.device&&this.device.id;if(this.pipe.stop(),!i&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return S(this,void 0,void 0,function*(){if(this.inputMediaStream)for(const i of this.inputMediaStream.getVideoTracks())i.stop();this.pipe.destroy(),this.inputMediaStream=null})}addObserver(i){this.observers.add(i)}removeObserver(i){this.observers.delete(i)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver(i=>{i.processingDidStart&&i.processingDidStart()})}processingLatencyTooHigh(i){this.forEachObserver(e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(i)})}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver(i=>{i.processingDidFailToStart&&i.processingDidFailToStart()})}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver(i=>{i.processingDidStop&&i.processingDidStop()})}forEachObserver(i){for(const e of this.observers)setTimeout(()=>{i(e)},0)}constructor(i,e,t,n=new u.default){this.logger=i,this.device=e,this.processors=t,this.browserBehavior=n,this.observers=new Set,this.pipe=new m.default(this.logger,this.processors),this.pipe.addObserver(this)}},"DefaultVideoTransformDevice");l.default=a},Fyq9:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("aVV0"));let m=o(class extends u.default{removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const s in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[s]()}addPeerConnectionEventLogger(){const s=this.context.peer;s.addEventListener("connectionstatechange",()=>{this.context.logger.info(`peer connection state changed: ${s.connectionState}`)}),s.addEventListener("negotiationneeded",()=>{this.context.logger.info("peer connection negotiation is needed")}),s.addEventListener("icegatheringstatechange",()=>{this.context.logger.info(`peer connection ice gathering state changed: ${s.iceGatheringState}`)}),s.addEventListener("icecandidate",i=>{this.context.logger.info(`peer connection ice candidate: ${i.candidate?i.candidate.candidate:"(null)"}`)}),s.addEventListener("iceconnectionstatechange",()=>{this.context.logger.info(`peer connection ice connection state changed: ${s.iceConnectionState}`)})}run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this);const i=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};i.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),i.sdpSemantics="unified-plan",i.encodedInsertableStreams=this.context.audioProfile.hasRedundancyEnabled(),this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(i),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)})}trackIsVideoInput(s){return this.context.transceiverController.useTransceivers()?(this.logger.debug(()=>"getting video track type"),this.context.transceiverController.trackIsVideoInput(s)):!1}addRemoteVideoTrack(s,i){var e;const t=i.id,n=this.context.videoStreamIndex.attendeeIdForTrack(t);let r,c;if(this.context.videoTileController.getVideoTileForAttendeeId?(c=this.context.videoTileController.getVideoTileForAttendeeId(n),r=!!(!((e=c==null?void 0:c.state())===null||e===void 0)&&e.boundVideoStream)):r=this.context.videoTileController.haveVideoTileForAttendeeId(n),r){this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);return}c||(c=this.context.videoTileController.addVideoTile(),this.logger.info(`Created video tile ${c.id()}`));let p=this.context.videoStreamIndex.streamIdForTrack(t);typeof p>"u"&&(this.logger.warn(`stream not found for tile=${c.id()} track=${t}`),p=null);for(let V=0;V<this.trackEvents.length;V++){const F=this.trackEvents[V],N=i.getVideoTracks();if(N&&N.length){const P=N[0],x=o(()=>{this.context.logger.info(`received the ${F} event for tile=${c.id()} id=${s.id} streamId=${p}`),F==="ended"&&this.removeRemoteVideoTrack(s,c.state())},"callback");P.addEventListener(F,x),this.removeVideoTrackEventListeners[s.id]||(this.removeVideoTrackEventListeners[s.id]=[]),this.removeVideoTrackEventListeners[s.id].push(()=>{P.removeEventListener(F,x)})}}let g,d;if(s.getSettings){const V=s.getSettings();g=V.width,d=V.height}else{const V=s.getCapabilities();g=V.width,d=V.height}const y=this.context.videoStreamIndex.externalUserIdForTrack(t);c.bindVideoStream(n,!1,i,g,d,p,y),this.logger.info(`video track added, use tile=${c.id()} track=${t} streamId=${p}`);const E="removetrack",w=i,k=o(()=>this.removeRemoteVideoTrack(s,c.state()),"trackRemovedHandler");this.removeTrackRemovedEventListeners[s.id]=()=>{w.removeEventListener(E,k),delete this.removeTrackRemovedEventListeners[s.id]},w.addEventListener(E,k)}removeRemoteVideoTrack(s,i){if(this.removeTrackRemovedEventListeners.hasOwnProperty(s.id)){this.removeTrackRemovedEventListeners[s.id]();for(const e of this.removeVideoTrackEventListeners[s.id])e();delete this.removeVideoTrackEventListeners[s.id]}this.logger.info(`video track ended, removing tile=${i.tileId} id=${s.id} stream=${i.streamId}`),i.streamId?this.context.videosPaused.remove(i.streamId):this.logger.warn(`no stream found for tile=${i.tileId}`),this.context.videoTileController.removeVideoTile(i.tileId)}constructor(s){super(s.logger),this.context=s,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=i=>{const e=i.track;if(this.context.logger.info(`received track event: kind=${e.kind} id=${e.id} label=${e.label}`),i.transceiver&&i.transceiver.currentDirection==="inactive")return;if(i.streams.length===0){this.context.logger.warn("Track event but no stream");return}const t=i.streams[0];e.kind==="audio"?this.context.audioMixController.bindAudioStream(t):e.kind==="video"&&!this.trackIsVideoInput(e)&&this.addRemoteVideoTrack(e,t)}}},"CreatePeerConnectionTask");l.default=m,m.REMOVE_HANDLER_INTERVAL_MS=1e4},GAXn:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={UnknownMethod:"unknown_method",UnknownWorkflowId:"unknown_workflow_id",AccessDenied:"access_denied"},t=Object(a.a)("workflows.get generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"workflows.get",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to workflows.get
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherworkflowsGetFetcher",description:"workflows.get generated fetcher"}},GEtQ:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.loadWorker=void 0;const S=f("XEV2"),h={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"},u=o((m,a,s,i)=>{i==null||i.debug(`Loading ${a} worker from ${m}.`);let e=!1;try{e=self.origin===new URL(m).origin}catch(t){i==null||i.error("Could not compare origins.",t)}if(e){const t=S.withQueryString(m,s);return Promise.resolve(new Worker(t,{name:a}))}return S.fetchWithBehavior(m,h,s).then(t=>{if(t.ok)return t.blob().then(n=>new Worker(window.URL.createObjectURL(n)));throw new Error("Fetch failed.")})},"loadWorker");l.loadWorker=u},GVX8:function(j,l,f){"use strict";f.d(l,"a",function(){return h});function S(m){return o(({dispatch:s,getState:i})=>e=>t=>typeof t=="function"?t(s,i,m):e(t),"middleware")}o(S,"createThunkMiddleware");var h=S(),u=S},GW5S:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{mute(m){return S(this,void 0,void 0,function*(){})}stop(){var m;return S(this,void 0,void 0,function*(){(m=this.node)===null||m===void 0||m.disconnect()})}intrinsicDevice(){return S(this,void 0,void 0,function*(){return this.inner})}createAudioNode(m){var a;return S(this,void 0,void 0,function*(){return(a=this.node)===null||a===void 0||a.disconnect(),this.node=yield this.createSingleAudioNode(m),{start:this.node,end:this.node}})}constructor(m){this.inner=m}},"SingleNodeAudioTransformDevice");l.default=h},GZjp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(u){this._audioHostURL=u}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(u){this._signalingURL=u}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(u){this._turnControlURL=u}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(u){this._eventIngestionURL=u}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=u=>u}},"MeetingSessionURLs");l.default=S},Gn1W:function(j,l,f){"use strict";var S=f("c3gm"),h=f("XFRR");function u(m,a){this.__wrapped__=m,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=void 0}o(u,"LodashWrapper"),u.prototype=Object(S.a)(h.a.prototype),u.prototype.constructor=u,l.a=u},"Gs2/":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("zH6K"));let u=o(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=u},GtHv:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("CmE0")),m=f("vjEy"),a=h(f("l8QA"));let s=o(class extends u.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:r,targetCanvas:c}=this,{width:p,height:g}=c;r.save(),r.clearRect(0,0,p,g),r.drawImage(this.scaledCanvas,0,0,p,g),r.globalCompositeOperation="source-in",r.drawImage(e,0,0,p,g),r.globalCompositeOperation="destination-over",r.filter=`blur(${this.blurAmount}px)`,r.drawImage(e,0,0,c.width,c.height),r.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return S(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=s},GxrV:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"BitrateParameters");l.default=S},GzZI:function(j,l,f){"use strict";var S=f("u37q"),h=f("ZnfP"),u=f("fshX"),m=9007199254740991,a=4294967295,s=Math.min;function i(e,t){if(e=Object(u.a)(e),e<1||e>m)return[];var n=a,r=s(e,a);t=Object(h.a)(t),e-=a;for(var c=Object(S.a)(r,t);++n<e;)t(n);return c}o(i,"times"),l.a=i},"H/VS":function(j,l,f){var S=f("M5uj");function h(u,m){if(u){if(typeof u=="string")return S(u,m);var a=Object.prototype.toString.call(u).slice(8,-1);if(a==="Object"&&u.constructor&&(a=u.constructor.name),a==="Map"||a==="Set")return Array.from(u);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(u,m)}}o(h,"_unsupportedIterableToArray"),j.exports=h,j.exports.__esModule=!0,j.exports.default=j.exports},H7ma:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var S;(function(h){h[h.Low=0]="Low",h[h.LowAndMedium=1]="LowAndMedium",h[h.LowAndHigh=2]="LowAndHigh",h[h.Medium=3]="Medium",h[h.MediumAndHigh=4]="MediumAndHigh",h[h.High=5]="High"})(S=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=S},HAqy:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("BkFD"));let m=o(class{needUpdate(s){return this.activeSpeakers?this.speakerScores[s]===0&&this.activeSpeakers.includes(s)||this.speakerScores[s]>0&&!this.activeSpeakers.includes(s):!0}updateActiveSpeakers(s,i,e){if(!this.needUpdate(e))return;const t=[],n=Object.keys(this.speakerScores);for(let d=0;d<n.length;d++){const y=n[d];t.push({attendeeId:y,activeScore:this.speakerScores[y]})}const r=t.sort((d,y)=>y.activeScore-d.activeScore).filter(function(d){return d.activeScore>0}).map(function(d){return d.attendeeId});this.activeSpeakers=r,i(r);const p=r.length>0&&r[0]===this.selfAttendeeId&&s.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==p&&(this.hasBandwidthPriority=p,this.hasBandwidthPriorityCallback(p))}updateScore(s,i,e,t,n){const r=s.calculateScore(e,t,n);this.speakerScores[e]!==r&&(this.speakerScores[e]=r,this.mostRecentUpdateTimestamp[e]=Date.now(),this.updateActiveSpeakers(s,i,e))}subscribe(s,i,e,t){const n=o((c,p)=>{if(!p){this.speakerScores[c]=0,this.mostRecentUpdateTimestamp[c]=Date.now(),this.updateActiveSpeakers(s,i,c);return}this.realtimeController.realtimeSubscribeToVolumeIndicator(c,(g,d,y,E)=>{this.mostRecentUpdateTimestamp[g]=Date.now(),y!==null&&(this.speakerMuteState[g]=y),this.updateScore(s,i,g,d,y)})},"handler");this.detectorCallbackToHandler.set(i,n);const r=new u.default(this.updateIntervalMs);if(r.start(()=>{for(const c in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[c]>this.waitIntervalMs&&this.updateScore(s,i,c,0,this.speakerMuteState[c])}),this.detectorCallbackToActivityTimer.set(i,r),e&&t){const c=new u.default(t);c.start(()=>{e(this.speakerScores)}),this.detectorCallbackToScoresTimer.set(i,c)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}unsubscribe(s){const i=this.detectorCallbackToHandler.get(s);this.detectorCallbackToHandler.delete(s),i&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(i);const e=this.detectorCallbackToActivityTimer.get(s);e&&(e.stop(),this.detectorCallbackToActivityTimer.delete(s));const t=this.detectorCallbackToScoresTimer.get(s);t&&(t.stop(),this.detectorCallbackToHandler.delete(s))}destroy(){return S(this,void 0,void 0,function*(){for(const s of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(s);for(const s of this.detectorCallbackToActivityTimer.values())s.stop();for(const s of this.detectorCallbackToScoresTimer.values())s.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()})}constructor(s,i,e,t=1e3,n=200){this.realtimeController=s,this.selfAttendeeId=i,this.hasBandwidthPriorityCallback=e,this.waitIntervalMs=t,this.updateIntervalMs=n,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}},"DefaultActiveSpeakerDetector");l.default=m},HCbE:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("cKqT"));let u=o(class extends h.default{nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}constructor(a,s,i,e){super(a,s,i),this.limit=e,this.attempts=0}},"FullJitterLimitedBackoff");l.default=u},HG8V:function(j,l,f){"use strict";(function(S){var h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR")),m=h(f("zcg+")),a=f("XCDq"),s=f("VCUZ"),i=h(f("ac3q")),e=h(f("aCJD")),t=h(f("z8+u")),n=f("/AJg"),r=h(f("0JTw")),c=h(f("HbHZ"));let p=o(class ac{registerObserver(d){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(d)}openConnection(d){this.logger.info("adding connection request to queue: "+d.url()),this.connectionRequestQueue.push(d),this.closeConnection()}pingPong(d){this.logger.debug(()=>"sending ping");const y=a.SdkSignalFrame.create();return y.type=a.SdkSignalFrame.Type.PING_PONG,y.pingPong=d,this.sendMessage(y),y.timestampMs}join(d){this.logger.info("sending join");const y=a.SdkJoinFrame.create();y.protocolVersion=2,y.flags=a.SdkJoinFlags.HAS_STREAM_UPDATE;const E=new u.default,w={platformName:E.name(),platformVersion:E.version(),clientSource:i.default.sdkName,chimeSdkVersion:i.default.sdkVersion,clientUtcOffset:s.getFormattedOffset(new Date().getTimezoneOffset())};if(d.applicationMetadata){const{appName:V,appVersion:F}=d.applicationMetadata;w.appName=V,w.appVersion=F}y.clientDetails=a.SdkClientDetails.create(w),y.audioSessionId=this.audioSessionId,y.wantsCompressedSdp=ac.CLIENT_SUPPORTS_COMPRESSION,y.disablePeriodicKeyframeRequestOnContentSender=d.disablePeriodicKeyframeRequestOnContentSender,y.serverSideNetworkAdaption=n.convertServerSideNetworkAdaptionEnumToSignaled(d.serverSideNetworkAdaption),y.supportedServerSideNetworkAdaptions=d.supportedServerSideNetworkAdaptions.map(n.convertServerSideNetworkAdaptionEnumToSignaled),y.wantsAllTemporalLayersInIndex=d.wantsAllTemporalLayersInIndex;const k=a.SdkSignalFrame.create();k.type=a.SdkSignalFrame.Type.JOIN,k.join=y,this.sendMessage(k)}subscribe(d){const y=a.SdkSubscribeFrame.create();if(y.sendStreams=[],y.sdpOffer=d.sdpOffer,d.connectionTypeHasVideo&&(y.receiveStreamIds=d.receiveStreamIds),d.audioHost&&(y.audioCheckin=d.audioCheckin,y.audioHost=d.audioHost,y.audioMuted=d.audioMuted,!d.audioCheckin)){const w=a.SdkStreamDescriptor.create();w.mediaType=a.SdkStreamMediaType.AUDIO,w.trackLabel="AmazonChimeExpressAudio",w.attendeeId=d.attendeeId,w.streamId=1,w.groupId=1,w.framerate=15,w.maxBitrateKbps=600,w.avgBitrateBps=4e5,y.sendStreams.push(w)}if(y.compressedSdpOffer=d.compressedSdpOffer,y.duplex=a.SdkStreamServiceType.RX,d.localVideoEnabled){y.duplex=a.SdkStreamServiceType.DUPLEX;for(let w=0;w<d.videoStreamDescriptions.length;w++){const k=d.videoStreamDescriptions[w].clone();k.attendeeId=d.attendeeId,y.sendStreams.push(k.toStreamDescriptor())}}d.videoSubscriptionConfiguration.length>0&&(y.videoSubscriptionConfiguration=d.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const E=a.SdkSignalFrame.create();E.type=a.SdkSignalFrame.Type.SUBSCRIBE,E.sub=y,this.sendMessage(E)}remoteVideoUpdate(d,y){const E=a.SdkRemoteVideoUpdateFrame.create();E.addedOrUpdatedVideoSubscriptions=d.map(this.convertSignalingClientVideoSubscriptionConfiguration),E.removedVideoSubscriptionMids=y;const w=a.SdkSignalFrame.create();w.type=a.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,w.remoteVideoUpdate=E,this.sendMessage(w)}convertSignalingClientVideoSubscriptionConfiguration(d){const y=new a.SdkVideoSubscriptionConfiguration;switch(y.mid=d.mid,y.attendeeId=d.attendeeId,y.streamId=d.streamId,y.groupId=d.groupId,y.priority=d.priority,y.targetBitrateKbps=d.targetBitrateKbps,d.qualityAdaptationPreference){case e.default.Balanced:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.BALANCED;break;case e.default.MaintainFramerate:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case e.default.MaintainResolution:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.BALANCED}return y}leave(){const d=a.SdkSignalFrame.create();d.type=a.SdkSignalFrame.Type.LEAVE,d.leave=a.SdkLeaveFrame.create(),this.sendMessage(d),this.logger.debug(()=>"sent leave")}sendClientMetrics(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.CLIENT_METRIC,y.clientMetric=d,this.sendMessage(y)}sendDataMessage(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.DATA_MESSAGE,y.dataMessage=d,this.sendMessage(y)}closeConnection(){var d,y;if(this.webSocket.readyState()!==t.default.None&&this.webSocket.readyState()!==t.default.Closed){this.isClosing=!0,this.sendEvent(new r.default(this,c.default.WebSocketClosing,null));const E=new m.default(ac.CLOSE_EVENT_TIMEOUT_MS),w=o(k=>{var V,F;(F=(V=this.webSocket).removeEventListener)===null||F===void 0||F.call(V,"close",w),E.stop(),this.closeEventHandler(k)},"handler");(y=(d=this.webSocket).removeEventListener)===null||y===void 0||y.call(d,"close",this.closeEventHandler),this.webSocket.addEventListener("close",w),E.start(()=>{w(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===t.default.Open&&!this.isClosing&&this.wasOpened}mute(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.AUDIO_CONTROL;const E=a.SdkAudioControlFrame.create();E.muted=d,y.audioControl=E,this.sendMessage(y)}pause(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.PAUSE,y.pause=a.SdkPauseResumeFrame.create(),y.pause.streamIds=d,this.sendMessage(y)}resume(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.RESUME,y.pause=a.SdkPauseResumeFrame.create(),y.pause.streamIds=d,this.sendMessage(y)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(d){d.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(d)}`);const y=this.prependWithFrameTypeRTC(a.SdkSignalFrame.encode(d).finish());if(this.ready()){if(!this.webSocket.send(y)){this.sendEvent(new r.default(this,c.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new r.default(this,c.default.WebSocketSentMessage,null))}else this.sendEvent(new r.default(this,c.default.WebSocketSkippedMessage,null))}receiveMessage(d){let y;try{y=a.SdkSignalFrame.decode(d)}catch{this.logger.info(`failed to decode: ${d}`),this.sendEvent(new r.default(this,c.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(y)}`),this.webSocket.readyState()===t.default.Open?this.sendEvent(new r.default(this,c.default.ReceivedSignalFrame,y)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(y)}`)}stripFrameTypeRTC(d){const y=d[0];return y!==ac.FRAME_TYPE_RTC&&y!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${y}`),d.slice(1)}prependWithFrameTypeRTC(d){const y=new Uint8Array(d.length+1);return y[0]=ac.FRAME_TYPE_RTC,y.set(d,1),y}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const d=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${d.url()}`),this.isClosing=!1,this.webSocket.create(d.url(),d.protocols()),this.setUpEventListeners(),this.sendEvent(new r.default(this,c.default.WebSocketConnecting,null))}sendEvent(d){switch(d.type){case c.default.WebSocketMessage:case c.default.ReceivedSignalFrame:case c.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${c.default[d.type]}`);break;case c.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${c.default[d.type]}, websocket state=${t.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${c.default[d.type]}`);break}for(const y of this.observerQueue)y.handleSignalingClientEvent(d)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new r.default(this,c.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",d=>{this.sendEvent(new r.default(this,c.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(d.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new r.default(this,c.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new r.default(this,c.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const d=S;d.window&&d.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const d=S;d.window&&d.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const d=new Uint32Array(1);return window.crypto.getRandomValues(d)[0]}promoteToPrimaryMeeting(d){const y=a.SdkMeetingSessionCredentials.create();y.attendeeId=d.attendeeId,y.externalUserId=d.externalUserId,y.joinToken=d.joinToken;const E=a.SdkPrimaryMeetingJoinFrame.create();E.credentials=y;const w=a.SdkSignalFrame.create();w.type=a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,w.primaryMeetingJoin=E,this.sendMessage(w)}demoteFromPrimaryMeeting(){const d=a.SdkPrimaryMeetingLeaveFrame.create(),y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,y.primaryMeetingLeave=d,this.sendMessage(y)}constructor(d,y){this.webSocket=d,this.logger=y,this.unloadHandler=null,this.closeEventHandler=E=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new r.default(this,c.default.WebSocketClosed,null,E.code,E.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=p,p.FRAME_TYPE_RTC=5,p.CLOSE_EVENT_TIMEOUT_MS=2e3,p.CLIENT_SUPPORTS_COMPRESSION=!0}).call(this,f("yLpj"))},HK1f:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("IKDz"));let u=o(class{constructor(a,s,i=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=s,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");l.default=u},HLgz:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return o(e,"adopt"),new(s||(s=Promise))(function(t,n){function r(g){try{p(i.next(g))}catch(d){n(d)}}o(r,"fulfilled");function c(g){try{p(i.throw(g))}catch(d){n(d)}}o(c,"rejected");function p(g){g.done?t(g.value):e(g.value).then(r,c)}o(p,"step"),p((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("dWP+");let u=o(class{addObserver(a){this.audioVideoController.addObserver(a),this.trace("addObserver")}removeObserver(a){this.audioVideoController.removeObserver(a),this.trace("removeObserver")}setAudioProfile(a){this.trace("setAudioProfile",a),this.audioVideoController.setAudioProfile(a)}start(a){this.audioVideoController.start(a),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(a){return this.trace("getRTCPeerConnectionStats",a?a.id:null),this.audioVideoController.getRTCPeerConnectionStats(a)}bindAudioElement(a){const s=this.audioMixController.bindAudioElement(a);return this.trace("bindAudioElement",a.id,s),s}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}getCurrentMeetingAudioStream(){return this.trace("getCurrentConferenceStream"),this.audioMixController.getCurrentMeetingAudioStream()}addAudioMixObserver(a){this.trace("addAudioMixObserver"),this.audioMixController.addAudioMixObserver(a)}removeAudioMixObserver(a){this.trace("removeAudioMixObserver"),this.audioMixController.removeAudioMixObserver(a)}bindVideoElement(a,s){this.videoTileController.bindVideoElement(a,s),this.trace("bindVideoElement",{tileId:a,videoElementId:s.id})}unbindVideoElement(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.videoTileController.unbindVideoElement(a,s),this.trace("unbindVideoElement",{tileId:a,cleanUpVideoElement:s})}startLocalVideoTile(){const a=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,a),a}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const a=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,a),a}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const a=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),a}pauseVideoTile(a){this.videoTileController.pauseVideoTile(a),this.trace("pauseVideoTile",a)}unpauseVideoTile(a){this.videoTileController.unpauseVideoTile(a),this.trace("unpauseVideoTile",a)}getVideoTile(a){const s=this.videoTileController.getVideoTile(a);return this.trace("getVideoTile",a),s}getAllRemoteVideoTiles(){const a=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),a}getAllVideoTiles(){const a=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),a}addVideoTile(){const a=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,a.state()),a}removeVideoTile(a){this.videoTileController.removeVideoTile(a),this.trace("removeVideoTile",a)}removeVideoTilesByAttendeeId(a){const s=this.videoTileController.removeVideoTilesByAttendeeId(a);return this.trace("removeVideoTilesByAttendeeId",a,s),s}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(a){const s=this.videoTileController.captureVideoTile(a);return this.trace("captureVideoTile",a),s}realtimeSubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(a),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(a){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(a),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSetCanUnmuteLocalAudio(a),this.trace("realtimeSetCanUnmuteLocalAudio",a)}realtimeSubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToSetCanUnmuteLocalAudio")}realtimeCanUnmuteLocalAudio(){const a=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,a),a}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const a=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),a}realtimeSubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(a),this.trace("realtimeUnsubscribeToMuteAndUnmuteLocalAudio")}realtimeIsLocalAudioMuted(){const a=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),a}realtimeSubscribeToVolumeIndicator(a,s){this.realtimeController.realtimeSubscribeToVolumeIndicator(a,s),this.trace("realtimeSubscribeToVolumeIndicator",a)}realtimeUnsubscribeFromVolumeIndicator(a,s){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(a,s),this.trace("realtimeUnsubscribeFromVolumeIndicator",a,s)}realtimeSubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(a),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(a){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(a),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(a,s,i){this.realtimeController.realtimeSendDataMessage(a,s,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(a,s){this.realtimeController.realtimeSubscribeToReceiveDataMessage(a,s),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(a){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(a),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(a){this.realtimeController.realtimeSubscribeToFatalError(a),this.trace("realtimeSubscribeToFatalError")}realtimeUnsubscribeToFatalError(a){this.realtimeController.realtimeUnsubscribeToFatalError(a),this.trace("realtimeUnsubscribeToFatalError")}subscribeToActiveSpeakerDetector(a,s,i,e){this.audioVideoController.activeSpeakerDetector.subscribe(a,s,i,e),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(a){this.audioVideoController.activeSpeakerDetector.unsubscribe(a),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioInputDevices(a);return this.trace("listAudioInputDevices",a,s),s})}listVideoInputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const s=yield this.deviceController.listVideoInputDevices(a);return this.trace("listVideoInputDevices",a,s),s})}listAudioOutputDevices(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const s=yield this.deviceController.listAudioOutputDevices(a);return this.trace("listAudioOutputDevices",a,s),s})}startAudioInput(a){return S(this,void 0,void 0,function*(){return this.trace("startAudioInput",a),this.deviceController.startAudioInput(a)})}stopAudioInput(){return S(this,void 0,void 0,function*(){return this.trace("stopAudioInput"),this.deviceController.stopAudioInput()})}startVideoInput(a){return S(this,void 0,void 0,function*(){return h.isVideoTransformDevice(a)?this.trace("startVideoInput with transform device"):this.trace("startVideoInput",a),this.deviceController.startVideoInput(a)})}stopVideoInput(){return S(this,void 0,void 0,function*(){return this.trace("stopVideoInput"),this.deviceController.stopVideoInput()})}chooseAudioOutput(a){const s=this.deviceController.chooseAudioOutput(a);return this.trace("chooseAudioOutput",a),s}addDeviceChangeObserver(a){this.deviceController.addDeviceChangeObserver(a),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(a){this.deviceController.removeDeviceChangeObserver(a),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const a=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),a}startVideoPreviewForVideoInput(a){this.deviceController.startVideoPreviewForVideoInput(a),this.trace("startVideoPreviewForVideoInput",a.id)}stopVideoPreviewForVideoInput(a){this.deviceController.stopVideoPreviewForVideoInput(a),this.trace("stopVideoPreviewForVideoInput",a.id)}setDeviceLabelTrigger(a){this.deviceController.setDeviceLabelTrigger(a),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(a){const s=this.deviceController.mixIntoAudioInput(a);return this.trace("mixIntoAudioInput",a.id),s}chooseVideoInputQuality(a,s,i){this.deviceController.chooseVideoInputQuality(a,s,i),this.trace("chooseVideoInputQuality",{width:a,height:s,frameRate:i})}setVideoMaxBandwidthKbps(a){this.audioVideoController.setVideoMaxBandwidthKbps(a),this.trace("setVideoMaxBandwidthKbps",a)}setVideoCodecSendPreferences(a){this.audioVideoController.setVideoCodecSendPreferences(a),this.trace("setVideoCodecSendPreferences",a)}getVideoInputQualitySettings(){const a=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),a}setContentAudioProfile(a){this.trace("setContentAudioProfile",a),this.contentShareController.setContentAudioProfile(a)}enableSimulcastForContentShare(a,s){this.trace("enableSimulcastForContentShare"),this.contentShareController.enableSimulcastForContentShare(a,s)}enableSVCForContentShare(a){this.trace("enableSVCForContentShare"),this.contentShareController.enableSVCForContentShare(a)}startContentShare(a){const s=this.contentShareController.startContentShare(a);return this.trace("startContentShare"),s}startContentShareFromScreenCapture(a,s){const i=this.contentShareController.startContentShareFromScreenCapture(a,s);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(a){this.contentShareController.addContentShareObserver(a),this.trace("addContentShareObserver")}removeContentShareObserver(a){this.contentShareController.removeContentShareObserver(a),this.trace("removeContentShareObserver")}setContentShareVideoCodecPreferences(a){this.contentShareController.setContentShareVideoCodecPreferences(a),this.trace("setContentShareVideoCodecPreferences")}trace(a,s,i){const e=this.audioVideoController.configuration.meetingId,t=this.audioVideoController.configuration.credentials.attendeeId;let n=`API/DefaultAudioVideoFacade/${e}/${t}/${a}`;typeof s<"u"&&(n+=` ${JSON.stringify(s)}`),typeof i<"u"&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const a=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,a),a}get transcriptionController(){return this.realtimeController.transcriptionController}promoteToPrimaryMeeting(a){this.audioVideoController.removeObserver(this),this.audioVideoController.addObserver(this);const s=this.audioVideoController.promoteToPrimaryMeeting(a);return this.trace("promoteToPrimaryMeeting",null,s),s}demoteFromPrimaryMeeting(){this.trace("demoteFromPrimaryMeeting"),this.audioVideoController.demoteFromPrimaryMeeting()}audioVideoWasDemotedFromPrimaryMeeting(a){this.contentShareController.stopContentShare(),this.audioVideoController.removeObserver(this)}constructor(a,s,i,e,t,n){this.audioVideoController=a,this.videoTileController=s,this.realtimeController=i,this.audioMixController=e,this.deviceController=t,this.contentShareController=n}},"DefaultAudioVideoFacade");l.default=u},HXIC:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u,m,a){this.type=u,this.headers=m,this.payload=a}},"Message");l.default=S},HbHZ:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var S;(function(h){h[h.WebSocketConnecting=0]="WebSocketConnecting",h[h.WebSocketOpen=1]="WebSocketOpen",h[h.WebSocketError=2]="WebSocketError",h[h.WebSocketClosing=3]="WebSocketClosing",h[h.WebSocketClosed=4]="WebSocketClosed",h[h.WebSocketFailed=5]="WebSocketFailed",h[h.WebSocketMessage=6]="WebSocketMessage",h[h.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",h[h.WebSocketSentMessage=8]="WebSocketSentMessage",h[h.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",h[h.ReceivedSignalFrame=10]="ReceivedSignalFrame",h[h.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(S=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=S},Hi4k:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(y,E,w,k){function V(F){return F instanceof w?F:new w(function(N){N(F)})}return o(V,"adopt"),new(w||(w=Promise))(function(F,N){function P(M){try{O(k.next(M))}catch(D){N(D)}}o(P,"fulfilled");function x(M){try{O(k.throw(M))}catch(D){N(D)}}o(x,"rejected");function O(M){M.done?F(M.value):V(M.value).then(P,x)}o(O,"step"),O((k=k.apply(y,E||[])).next())})},h=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("bjg3")),m=h(f("x8On")),a=h(f("Zful")),s=h(f("1GR6")),i=h(f("I/xa")),e=h(f("aZba")),t=h(f("papz")),n=h(f("HbHZ")),r=f("XCDq"),c=h(f("PPZC")),p=f("Aplu"),g=h(f("j+uH"));let d=o(class extends g.default{removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)})}pauseResubscribeCheck(){this.isResubscribeCheckPaused=!0}resumeResubscribeCheck(){this.isResubscribeCheckPaused&&(this.isResubscribeCheckPaused=!1,this.pendingMetricsReport&&(this.context.logger.info("Resuming resubscribe check with pending metrics report"),this.checkResubscribe(this.pendingMetricsReport)&&this.context.audioVideoController.update({needsRenegotiation:!1})))}videoTileDidUpdate(E){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}checkResubscribe(E){if(this.isResubscribeCheckPaused){this.context.logger.info("Resubscribe check is paused, setting incoming client metric report as pending"),this.pendingMetricsReport=E;return}else this.pendingMetricsReport=void 0;const w=E.getObservableMetrics(),k=w.availableOutgoingBitrate,V=w.nackCountReceivedPerSecond;let F=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(E);const N=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(F=F||N,N){const P=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions();this.context.videosToReceive=P.truncate(this.context.videoSubscriptionLimit),P.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.logger.info(`trigger resubscribe for down=${N}; videosToReceive=[${this.context.videosToReceive.array()}]`)}if(this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:k/1e3,nackCountPerSecond:V});const P=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();F=F||P,P&&(this.logger.info(`trigger resubscribe for up=${P}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(),this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints())}return F}metricsDidReceive(E){if(this.checkResubscribe(E)&&this.context.audioVideoController.update({needsRenegotiation:!1}),!this.currentAvailableStreamAvgBitrates)return;const w=E.streamMetricReports,k=new Map;for(const V in w)w[V].mediaType===m.default.VIDEO&&w[V].direction===u.default.DOWNSTREAM&&k.set(w[V].streamId,w[V])}connectionHealthDidChange(E){E.consecutiveMissedPongs===0&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.applyHealthPolicy(this.reconnectionHealthPolicy,E,()=>{this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.ConnectionHealthReconnect),null)}),this.applyHealthPolicy(this.unusableAudioWarningHealthPolicy,E,()=>{var w;this.context.poorConnectionCount+=1;const k=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("receivingAudioDropped",k),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver(V=>{p.Maybe.of(V.connectionDidSuggestStopVideo).map(F=>F.bind(V)())}):this.context.audioVideoController.forEachObserver(V=>{p.Maybe.of(V.connectionDidBecomePoor).map(F=>F.bind(V)())})},()=>{this.context.audioVideoController.forEachObserver(w=>{p.Maybe.of(w.connectionDidBecomeGood).map(k=>k.bind(w)())})}),this.isMeetingConnected&&this.applyHealthPolicy(this.sendingAudioFailureHealthPolicy,E,()=>{var w;const k=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioFailed",k)},()=>{var w;const k=this.generateBaseAudioVideoEventAttributes();(w=this.context.eventController)===null||w===void 0||w.publishEvent("sendingAudioRecovered",k)})}audioVideoDidStart(){this.isMeetingConnected=!0}audioVideoDidStartConnecting(E){this.isMeetingConnected=!1}audioVideoDidStop(E){this.isMeetingConnected=!1}applyHealthPolicy(E,w,k,V){E.update(w);const F=E.healthIfChanged();F!==null&&(this.logger.info(`${E.name} value is now ${F}`),F<=E.minimumHealth()?p.Maybe.of(k).map(N=>N.bind(this)()):p.Maybe.of(V).map(N=>N.bind(this)()))}handleBitrateFrame(E){this.currentAvailableStreamAvgBitrates=E,E.serverAvailableOutgoingBitrate>0&&(this.logger.info(`Received server side estimation of available incoming bitrate ${E.serverAvailableOutgoingBitrate}kbps`),this.context.statsCollector.overrideObservableMetric("availableIncomingBitrate",E.serverAvailableOutgoingBitrate*1e3))}handleSignalingClientEvent(E){var w;if(E.type===n.default.WebSocketClosed&&(E.closeCode===4410||E.closeCode>=4500&&E.closeCode<4600)||E.type===n.default.WebSocketError||E.type===n.default.WebSocketFailed){if(!this.hasSignalingError){const k=this.generateAudioVideoEventAttributesForReceivingAudioDropped();(w=this.context.eventController)===null||w===void 0||w.publishEvent("signalingDropped",k),this.hasSignalingError=!0}}else E.type===n.default.WebSocketOpen&&(this.hasSignalingError=!1);if(E.type===n.default.ReceivedSignalFrame){if(E.message.type===r.SdkSignalFrame.Type.NOTIFICATION){switch(E.message.notification.level){case r.SdkNotificationFrame.NotificationLevel.INFO:this.logger.info(`Received notification from server: ${E.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.WARNING:this.logger.warn(`Received warning from server: ${E.message.notification.message}`);break;case r.SdkNotificationFrame.NotificationLevel.ERROR:this.logger.error(`Received error from server: ${E.message.notification.message}`);break;default:this.logger.error(`Received notification from server with unknown level ${E.message.notification.level}: ${E.message.notification.message}`);break}return}if(E.message.bitrates){const V=E.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(V),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(E.message.bitrates)}const k=e.default.fromSignalFrame(E.message);E.message.type!==r.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&k.statusCode()!==t.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(k,null)}}constructor(E,w,k){super(E.logger),this.context=E,this.initialConnectionHealthData=k,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.isResubscribeCheckPaused=!1,this.pendingMetricsReport=void 0,this.isMeetingConnected=!1,this.checkAndSendWeakSignalEvent=V=>{const F=V<1,N=this.prevSignalStrength<1,P=F?N?null:c.default.RedmicStartLoss:N?c.default.RedmicEndLoss:null;P&&this.context.statsCollector.logAudioEvent(P),this.prevSignalStrength=V},this.realtimeFatalErrorCallback=V=>{this.logger.error(`realtime error: ${V}: ${V.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new e.default(t.default.RealtimeApiFailed),V)},this.realtimeAttendeeIdPresenceHandler=(V,F)=>{var N;const P=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${P}`),P===V&&F&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,(N=this.context.eventController)===null||N===void 0||N.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.generateBaseAudioVideoEventAttributes=()=>{const{signalingOpenDurationMs:V,startTimeMs:F,iceGatheringDurationMs:N,attendeePresenceDurationMs:P,meetingStartDurationMs:x}=this.context;return{meetingDurationMs:F===null?0:Math.round(Date.now()-F),signalingOpenDurationMs:V,iceGatheringDurationMs:N,attendeePresenceDurationMs:P,meetingStartDurationMs:x}},this.generateAudioVideoEventAttributesForReceivingAudioDropped=()=>{const V=this.generateBaseAudioVideoEventAttributes();return Object.assign(Object.assign({},V),{maxVideoTileCount:this.context.maxVideoTileCount,poorConnectionCount:this.context.poorConnectionCount})},this.reconnectionHealthPolicy=new a.default(E.logger,Object.assign({},w),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new i.default(Object.assign({},w),this.initialConnectionHealthData.clone()),this.sendingAudioFailureHealthPolicy=new s.default(E.logger,Object.assign({},w),this.initialConnectionHealthData.clone())}},"MonitorTask");l.default=d},HlBM:function(j,l,f){"use strict";f.d(l,"a",function(){return i});var S=f("VDtp"),h=f.n(S);const u=S.Reader,m=S.Writer,a=S.util,s=S.roots.default||(S.roots.default={}),i=s.PeerMessage=(()=>{function e(t){if(t)for(let n=Object.keys(t),r=0;r<n.length;++r)t[n[r]]!=null&&(this[n[r]]=t[n[r]])}return o(e,"PeerMessage1"),e.prototype.reacji=null,e.prototype.draw=null,e.prototype.fromPeerId=a.Long?a.Long.fromBits(0,0,!0):0,e.prototype.fromPeerIdString="",e.prototype.capabilities=null,e.prototype.background=null,e.prototype.muteRequest=null,e.prototype.awarenessBroadcast=null,e.prototype.awarenessQuery=null,e.prototype.awarenessClose=null,e.prototype.jukeboxRequest=null,e.prototype.contentShareDetails=null,e.create=o(function(n){return new e(n)},"create"),e.encode=o(function(n,r){return r||(r=m.create()),n.reacji!=null&&Object.hasOwnProperty.call(n,"reacji")&&s.PeerMessage.Reacji.encode(n.reacji,r.uint32(10).fork()).ldelim(),n.draw!=null&&Object.hasOwnProperty.call(n,"draw")&&s.PeerMessage.Draw.encode(n.draw,r.uint32(18).fork()).ldelim(),n.fromPeerId!=null&&Object.hasOwnProperty.call(n,"fromPeerId")&&r.uint32(24).uint64(n.fromPeerId),n.fromPeerIdString!=null&&Object.hasOwnProperty.call(n,"fromPeerIdString")&&r.uint32(34).string(n.fromPeerIdString),n.capabilities!=null&&Object.hasOwnProperty.call(n,"capabilities")&&s.PeerMessage.Capabilities.encode(n.capabilities,r.uint32(42).fork()).ldelim(),n.background!=null&&Object.hasOwnProperty.call(n,"background")&&s.PeerMessage.Background.encode(n.background,r.uint32(50).fork()).ldelim(),n.muteRequest!=null&&Object.hasOwnProperty.call(n,"muteRequest")&&s.PeerMessage.MuteRequest.encode(n.muteRequest,r.uint32(82).fork()).ldelim(),n.awarenessBroadcast!=null&&Object.hasOwnProperty.call(n,"awarenessBroadcast")&&s.PeerMessage.AwarenessBroadcast.encode(n.awarenessBroadcast,r.uint32(90).fork()).ldelim(),n.awarenessQuery!=null&&Object.hasOwnProperty.call(n,"awarenessQuery")&&s.PeerMessage.AwarenessQuery.encode(n.awarenessQuery,r.uint32(98).fork()).ldelim(),n.awarenessClose!=null&&Object.hasOwnProperty.call(n,"awarenessClose")&&s.PeerMessage.AwarenessClose.encode(n.awarenessClose,r.uint32(106).fork()).ldelim(),n.jukeboxRequest!=null&&Object.hasOwnProperty.call(n,"jukeboxRequest")&&s.PeerMessage.JukeboxRequest.encode(n.jukeboxRequest,r.uint32(114).fork()).ldelim(),n.contentShareDetails!=null&&Object.hasOwnProperty.call(n,"contentShareDetails")&&s.PeerMessage.ContentShareDetails.encode(n.contentShareDetails,r.uint32(122).fork()).ldelim(),r},"encode"),e.encodeDelimited=o(function(n,r){return this.encode(n,r).ldelim()},"encodeDelimited"),e.decode=o(function(n,r){n instanceof u||(n=u.create(n));let c=r===void 0?n.len:n.pos+r,p=new s.PeerMessage;for(;n.pos<c;){let g=n.uint32();switch(g>>>3){case 1:{p.reacji=s.PeerMessage.Reacji.decode(n,n.uint32());break}case 2:{p.draw=s.PeerMessage.Draw.decode(n,n.uint32());break}case 3:{p.fromPeerId=n.uint64();break}case 4:{p.fromPeerIdString=n.string();break}case 5:{p.capabilities=s.PeerMessage.Capabilities.decode(n,n.uint32());break}case 6:{p.background=s.PeerMessage.Background.decode(n,n.uint32());break}case 10:{p.muteRequest=s.PeerMessage.MuteRequest.decode(n,n.uint32());break}case 11:{p.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.decode(n,n.uint32());break}case 12:{p.awarenessQuery=s.PeerMessage.AwarenessQuery.decode(n,n.uint32());break}case 13:{p.awarenessClose=s.PeerMessage.AwarenessClose.decode(n,n.uint32());break}case 14:{p.jukeboxRequest=s.PeerMessage.JukeboxRequest.decode(n,n.uint32());break}case 15:{p.contentShareDetails=s.PeerMessage.ContentShareDetails.decode(n,n.uint32());break}default:n.skipType(g&7);break}}return p},"decode"),e.decodeDelimited=o(function(n){return n instanceof u||(n=new u(n)),this.decode(n,n.uint32())},"decodeDelimited"),e.verify=o(function(n){if(typeof n!="object"||n===null)return"object expected";if(n.reacji!=null&&n.hasOwnProperty("reacji")){let r=s.PeerMessage.Reacji.verify(n.reacji);if(r)return"reacji."+r}if(n.draw!=null&&n.hasOwnProperty("draw")){let r=s.PeerMessage.Draw.verify(n.draw);if(r)return"draw."+r}if(n.fromPeerId!=null&&n.hasOwnProperty("fromPeerId")&&!a.isInteger(n.fromPeerId)&&!(n.fromPeerId&&a.isInteger(n.fromPeerId.low)&&a.isInteger(n.fromPeerId.high)))return"fromPeerId: integer|Long expected";if(n.fromPeerIdString!=null&&n.hasOwnProperty("fromPeerIdString")&&!a.isString(n.fromPeerIdString))return"fromPeerIdString: string expected";if(n.capabilities!=null&&n.hasOwnProperty("capabilities")){let r=s.PeerMessage.Capabilities.verify(n.capabilities);if(r)return"capabilities."+r}if(n.background!=null&&n.hasOwnProperty("background")){let r=s.PeerMessage.Background.verify(n.background);if(r)return"background."+r}if(n.muteRequest!=null&&n.hasOwnProperty("muteRequest")){let r=s.PeerMessage.MuteRequest.verify(n.muteRequest);if(r)return"muteRequest."+r}if(n.awarenessBroadcast!=null&&n.hasOwnProperty("awarenessBroadcast")){let r=s.PeerMessage.AwarenessBroadcast.verify(n.awarenessBroadcast);if(r)return"awarenessBroadcast."+r}if(n.awarenessQuery!=null&&n.hasOwnProperty("awarenessQuery")){let r=s.PeerMessage.AwarenessQuery.verify(n.awarenessQuery);if(r)return"awarenessQuery."+r}if(n.awarenessClose!=null&&n.hasOwnProperty("awarenessClose")){let r=s.PeerMessage.AwarenessClose.verify(n.awarenessClose);if(r)return"awarenessClose."+r}if(n.jukeboxRequest!=null&&n.hasOwnProperty("jukeboxRequest")){let r=s.PeerMessage.JukeboxRequest.verify(n.jukeboxRequest);if(r)return"jukeboxRequest."+r}if(n.contentShareDetails!=null&&n.hasOwnProperty("contentShareDetails")){let r=s.PeerMessage.ContentShareDetails.verify(n.contentShareDetails);if(r)return"contentShareDetails."+r}return null},"verify"),e.fromObject=o(function(n){if(n instanceof s.PeerMessage)return n;let r=new s.PeerMessage;if(n.reacji!=null){if(typeof n.reacji!="object")throw TypeError(".PeerMessage.reacji: object expected");r.reacji=s.PeerMessage.Reacji.fromObject(n.reacji)}if(n.draw!=null){if(typeof n.draw!="object")throw TypeError(".PeerMessage.draw: object expected");r.draw=s.PeerMessage.Draw.fromObject(n.draw)}if(n.fromPeerId!=null&&(a.Long?(r.fromPeerId=a.Long.fromValue(n.fromPeerId)).unsigned=!0:typeof n.fromPeerId=="string"?r.fromPeerId=parseInt(n.fromPeerId,10):typeof n.fromPeerId=="number"?r.fromPeerId=n.fromPeerId:typeof n.fromPeerId=="object"&&(r.fromPeerId=new a.LongBits(n.fromPeerId.low>>>0,n.fromPeerId.high>>>0).toNumber(!0))),n.fromPeerIdString!=null&&(r.fromPeerIdString=String(n.fromPeerIdString)),n.capabilities!=null){if(typeof n.capabilities!="object")throw TypeError(".PeerMessage.capabilities: object expected");r.capabilities=s.PeerMessage.Capabilities.fromObject(n.capabilities)}if(n.background!=null){if(typeof n.background!="object")throw TypeError(".PeerMessage.background: object expected");r.background=s.PeerMessage.Background.fromObject(n.background)}if(n.muteRequest!=null){if(typeof n.muteRequest!="object")throw TypeError(".PeerMessage.muteRequest: object expected");r.muteRequest=s.PeerMessage.MuteRequest.fromObject(n.muteRequest)}if(n.awarenessBroadcast!=null){if(typeof n.awarenessBroadcast!="object")throw TypeError(".PeerMessage.awarenessBroadcast: object expected");r.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.fromObject(n.awarenessBroadcast)}if(n.awarenessQuery!=null){if(typeof n.awarenessQuery!="object")throw TypeError(".PeerMessage.awarenessQuery: object expected");r.awarenessQuery=s.PeerMessage.AwarenessQuery.fromObject(n.awarenessQuery)}if(n.awarenessClose!=null){if(typeof n.awarenessClose!="object")throw TypeError(".PeerMessage.awarenessClose: object expected");r.awarenessClose=s.PeerMessage.AwarenessClose.fromObject(n.awarenessClose)}if(n.jukeboxRequest!=null){if(typeof n.jukeboxRequest!="object")throw TypeError(".PeerMessage.jukeboxRequest: object expected");r.jukeboxRequest=s.PeerMessage.JukeboxRequest.fromObject(n.jukeboxRequest)}if(n.contentShareDetails!=null){if(typeof n.contentShareDetails!="object")throw TypeError(".PeerMessage.contentShareDetails: object expected");r.contentShareDetails=s.PeerMessage.ContentShareDetails.fromObject(n.contentShareDetails)}return r},"fromObject"),e.toObject=o(function(n,r){r||(r={});let c={};if(r.defaults){if(c.reacji=null,c.draw=null,a.Long){let p=new a.Long(0,0,!0);c.fromPeerId=r.longs===String?p.toString():r.longs===Number?p.toNumber():p}else c.fromPeerId=r.longs===String?"0":0;c.fromPeerIdString="",c.capabilities=null,c.background=null,c.muteRequest=null,c.awarenessBroadcast=null,c.awarenessQuery=null,c.awarenessClose=null,c.jukeboxRequest=null,c.contentShareDetails=null}return n.reacji!=null&&n.hasOwnProperty("reacji")&&(c.reacji=s.PeerMessage.Reacji.toObject(n.reacji,r)),n.draw!=null&&n.hasOwnProperty("draw")&&(c.draw=s.PeerMessage.Draw.toObject(n.draw,r)),n.fromPeerId!=null&&n.hasOwnProperty("fromPeerId")&&(typeof n.fromPeerId=="number"?c.fromPeerId=r.longs===String?String(n.fromPeerId):n.fromPeerId:c.fromPeerId=r.longs===String?a.Long.prototype.toString.call(n.fromPeerId):r.longs===Number?new a.LongBits(n.fromPeerId.low>>>0,n.fromPeerId.high>>>0).toNumber(!0):n.fromPeerId),n.fromPeerIdString!=null&&n.hasOwnProperty("fromPeerIdString")&&(c.fromPeerIdString=n.fromPeerIdString),n.capabilities!=null&&n.hasOwnProperty("capabilities")&&(c.capabilities=s.PeerMessage.Capabilities.toObject(n.capabilities,r)),n.background!=null&&n.hasOwnProperty("background")&&(c.background=s.PeerMessage.Background.toObject(n.background,r)),n.muteRequest!=null&&n.hasOwnProperty("muteRequest")&&(c.muteRequest=s.PeerMessage.MuteRequest.toObject(n.muteRequest,r)),n.awarenessBroadcast!=null&&n.hasOwnProperty("awarenessBroadcast")&&(c.awarenessBroadcast=s.PeerMessage.AwarenessBroadcast.toObject(n.awarenessBroadcast,r)),n.awarenessQuery!=null&&n.hasOwnProperty("awarenessQuery")&&(c.awarenessQuery=s.PeerMessage.AwarenessQuery.toObject(n.awarenessQuery,r)),n.awarenessClose!=null&&n.hasOwnProperty("awarenessClose")&&(c.awarenessClose=s.PeerMessage.AwarenessClose.toObject(n.awarenessClose,r)),n.jukeboxRequest!=null&&n.hasOwnProperty("jukeboxRequest")&&(c.jukeboxRequest=s.PeerMessage.JukeboxRequest.toObject(n.jukeboxRequest,r)),n.contentShareDetails!=null&&n.hasOwnProperty("contentShareDetails")&&(c.contentShareDetails=s.PeerMessage.ContentShareDetails.toObject(n.contentShareDetails,r)),c},"toObject"),e.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),e.getTypeUrl=o(function(n){return n===void 0&&(n="type.googleapis.com"),n+"/PeerMessage"},"getTypeUrl"),e.Reacji=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"Reacji"),t.prototype.emoji="",t.prototype.type=0,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.emoji!=null&&Object.hasOwnProperty.call(r,"emoji")&&c.uint32(10).string(r.emoji),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&c.uint32(16).int32(r.type),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.Reacji;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.emoji=r.string();break}case 2:{g.type=r.int32();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.emoji!=null&&r.hasOwnProperty("emoji")&&!a.isString(r.emoji))return"emoji: string expected";if(r.type!=null&&r.hasOwnProperty("type"))switch(r.type){default:return"type: enum value expected";case 0:case 1:case 2:break}return null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.Reacji)return r;let c=new s.PeerMessage.Reacji;switch(r.emoji!=null&&(c.emoji=String(r.emoji)),r.type){default:if(typeof r.type=="number"){c.type=r.type;break}break;case"Unknown_reaction_type":case 0:c.type=0;break;case"Effect":case 1:c.type=1;break;case"Standard":case 2:c.type=2;break}return c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.emoji="",p.type=c.enums===String?"Unknown_reaction_type":0),r.emoji!=null&&r.hasOwnProperty("emoji")&&(p.emoji=r.emoji),r.type!=null&&r.hasOwnProperty("type")&&(p.type=c.enums===String?s.PeerMessage.Reacji.Type[r.type]===void 0?r.type:s.PeerMessage.Reacji.Type[r.type]:r.type),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Reacji"},"getTypeUrl"),t.Type=function(){const n={},r=Object.create(n);return r[n[0]="Unknown_reaction_type"]=0,r[n[1]="Effect"]=1,r[n[2]="Standard"]=2,r}(),t}(),e.Point=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"Point"),t.prototype.x=0,t.prototype.y=0,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.x!=null&&Object.hasOwnProperty.call(r,"x")&&c.uint32(9).double(r.x),r.y!=null&&Object.hasOwnProperty.call(r,"y")&&c.uint32(17).double(r.y),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.Point;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.x=r.double();break}case 2:{g.y=r.double();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.x!=null&&r.hasOwnProperty("x")&&typeof r.x!="number"?"x: number expected":r.y!=null&&r.hasOwnProperty("y")&&typeof r.y!="number"?"y: number expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.Point)return r;let c=new s.PeerMessage.Point;return r.x!=null&&(c.x=Number(r.x)),r.y!=null&&(c.y=Number(r.y)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.x=0,p.y=0),r.x!=null&&r.hasOwnProperty("x")&&(p.x=c.json&&!isFinite(r.x)?String(r.x):r.x),r.y!=null&&r.hasOwnProperty("y")&&(p.y=c.json&&!isFinite(r.y)?String(r.y):r.y),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Point"},"getTypeUrl"),t}(),e.Segment=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"Segment"),t.prototype.a=null,t.prototype.b=null,t.prototype.c=null,t.prototype.d=null,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.a!=null&&Object.hasOwnProperty.call(r,"a")&&s.PeerMessage.Point.encode(r.a,c.uint32(10).fork()).ldelim(),r.b!=null&&Object.hasOwnProperty.call(r,"b")&&s.PeerMessage.Point.encode(r.b,c.uint32(18).fork()).ldelim(),r.c!=null&&Object.hasOwnProperty.call(r,"c")&&s.PeerMessage.Point.encode(r.c,c.uint32(26).fork()).ldelim(),r.d!=null&&Object.hasOwnProperty.call(r,"d")&&s.PeerMessage.Point.encode(r.d,c.uint32(34).fork()).ldelim(),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.Segment;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.a=s.PeerMessage.Point.decode(r,r.uint32());break}case 2:{g.b=s.PeerMessage.Point.decode(r,r.uint32());break}case 3:{g.c=s.PeerMessage.Point.decode(r,r.uint32());break}case 4:{g.d=s.PeerMessage.Point.decode(r,r.uint32());break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.a!=null&&r.hasOwnProperty("a")){let c=s.PeerMessage.Point.verify(r.a);if(c)return"a."+c}if(r.b!=null&&r.hasOwnProperty("b")){let c=s.PeerMessage.Point.verify(r.b);if(c)return"b."+c}if(r.c!=null&&r.hasOwnProperty("c")){let c=s.PeerMessage.Point.verify(r.c);if(c)return"c."+c}if(r.d!=null&&r.hasOwnProperty("d")){let c=s.PeerMessage.Point.verify(r.d);if(c)return"d."+c}return null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.Segment)return r;let c=new s.PeerMessage.Segment;if(r.a!=null){if(typeof r.a!="object")throw TypeError(".PeerMessage.Segment.a: object expected");c.a=s.PeerMessage.Point.fromObject(r.a)}if(r.b!=null){if(typeof r.b!="object")throw TypeError(".PeerMessage.Segment.b: object expected");c.b=s.PeerMessage.Point.fromObject(r.b)}if(r.c!=null){if(typeof r.c!="object")throw TypeError(".PeerMessage.Segment.c: object expected");c.c=s.PeerMessage.Point.fromObject(r.c)}if(r.d!=null){if(typeof r.d!="object")throw TypeError(".PeerMessage.Segment.d: object expected");c.d=s.PeerMessage.Point.fromObject(r.d)}return c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.a=null,p.b=null,p.c=null,p.d=null),r.a!=null&&r.hasOwnProperty("a")&&(p.a=s.PeerMessage.Point.toObject(r.a,c)),r.b!=null&&r.hasOwnProperty("b")&&(p.b=s.PeerMessage.Point.toObject(r.b,c)),r.c!=null&&r.hasOwnProperty("c")&&(p.c=s.PeerMessage.Point.toObject(r.c,c)),r.d!=null&&r.hasOwnProperty("d")&&(p.d=s.PeerMessage.Point.toObject(r.d,c)),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Segment"},"getTypeUrl"),t}(),e.Draw=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"Draw"),t.prototype.type=0,t.prototype.segment=null,t.prototype.hue=0,t.prototype.itemId="",t.prototype.x=0,t.prototype.y=0,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.type!=null&&Object.hasOwnProperty.call(r,"type")&&c.uint32(8).int32(r.type),r.segment!=null&&Object.hasOwnProperty.call(r,"segment")&&s.PeerMessage.Segment.encode(r.segment,c.uint32(18).fork()).ldelim(),r.hue!=null&&Object.hasOwnProperty.call(r,"hue")&&c.uint32(24).int32(r.hue),r.itemId!=null&&Object.hasOwnProperty.call(r,"itemId")&&c.uint32(34).string(r.itemId),r.x!=null&&Object.hasOwnProperty.call(r,"x")&&c.uint32(41).double(r.x),r.y!=null&&Object.hasOwnProperty.call(r,"y")&&c.uint32(49).double(r.y),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.Draw;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.type=r.int32();break}case 2:{g.segment=s.PeerMessage.Segment.decode(r,r.uint32());break}case 3:{g.hue=r.int32();break}case 4:{g.itemId=r.string();break}case 5:{g.x=r.double();break}case 6:{g.y=r.double();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.type!=null&&r.hasOwnProperty("type"))switch(r.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:break}if(r.segment!=null&&r.hasOwnProperty("segment")){let c=s.PeerMessage.Segment.verify(r.segment);if(c)return"segment."+c}return r.hue!=null&&r.hasOwnProperty("hue")&&!a.isInteger(r.hue)?"hue: integer expected":r.itemId!=null&&r.hasOwnProperty("itemId")&&!a.isString(r.itemId)?"itemId: string expected":r.x!=null&&r.hasOwnProperty("x")&&typeof r.x!="number"?"x: number expected":r.y!=null&&r.hasOwnProperty("y")&&typeof r.y!="number"?"y: number expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.Draw)return r;let c=new s.PeerMessage.Draw;switch(r.type){default:if(typeof r.type=="number"){c.type=r.type;break}break;case"UNKNOWN_DRAW_TYPE":case 0:c.type=0;break;case"NEW":case 1:c.type=1;break;case"EDIT":case 2:c.type=2;break;case"END":case 3:c.type=3;break;case"CHANGE_HUE":case 4:c.type=4;break;case"POSITION":case 5:c.type=5;break}if(r.segment!=null){if(typeof r.segment!="object")throw TypeError(".PeerMessage.Draw.segment: object expected");c.segment=s.PeerMessage.Segment.fromObject(r.segment)}return r.hue!=null&&(c.hue=r.hue|0),r.itemId!=null&&(c.itemId=String(r.itemId)),r.x!=null&&(c.x=Number(r.x)),r.y!=null&&(c.y=Number(r.y)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.type=c.enums===String?"UNKNOWN_DRAW_TYPE":0,p.segment=null,p.hue=0,p.itemId="",p.x=0,p.y=0),r.type!=null&&r.hasOwnProperty("type")&&(p.type=c.enums===String?s.PeerMessage.Draw.Type[r.type]===void 0?r.type:s.PeerMessage.Draw.Type[r.type]:r.type),r.segment!=null&&r.hasOwnProperty("segment")&&(p.segment=s.PeerMessage.Segment.toObject(r.segment,c)),r.hue!=null&&r.hasOwnProperty("hue")&&(p.hue=r.hue),r.itemId!=null&&r.hasOwnProperty("itemId")&&(p.itemId=r.itemId),r.x!=null&&r.hasOwnProperty("x")&&(p.x=c.json&&!isFinite(r.x)?String(r.x):r.x),r.y!=null&&r.hasOwnProperty("y")&&(p.y=c.json&&!isFinite(r.y)?String(r.y):r.y),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Draw"},"getTypeUrl"),t.Type=function(){const n={},r=Object.create(n);return r[n[0]="UNKNOWN_DRAW_TYPE"]=0,r[n[1]="NEW"]=1,r[n[2]="EDIT"]=2,r[n[3]="END"]=3,r[n[4]="CHANGE_HUE"]=4,r[n[5]="POSITION"]=5,r}(),t}(),e.Capabilities=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"Capabilities"),t.prototype.isDrawEnabled=!1,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.isDrawEnabled!=null&&Object.hasOwnProperty.call(r,"isDrawEnabled")&&c.uint32(8).bool(r.isDrawEnabled),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.Capabilities;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.isDrawEnabled=r.bool();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.isDrawEnabled!=null&&r.hasOwnProperty("isDrawEnabled")&&typeof r.isDrawEnabled!="boolean"?"isDrawEnabled: boolean expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.Capabilities)return r;let c=new s.PeerMessage.Capabilities;return r.isDrawEnabled!=null&&(c.isDrawEnabled=Boolean(r.isDrawEnabled)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.isDrawEnabled=!1),r.isDrawEnabled!=null&&r.hasOwnProperty("isDrawEnabled")&&(p.isDrawEnabled=r.isDrawEnabled),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Capabilities"},"getTypeUrl"),t}(),e.ContentShareDetails=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"ContentShareDetails"),t.prototype.sourceType="",t.prototype.itemId="",t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.sourceType!=null&&Object.hasOwnProperty.call(r,"sourceType")&&c.uint32(10).string(r.sourceType),r.itemId!=null&&Object.hasOwnProperty.call(r,"itemId")&&c.uint32(18).string(r.itemId),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.ContentShareDetails;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.sourceType=r.string();break}case 2:{g.itemId=r.string();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.sourceType!=null&&r.hasOwnProperty("sourceType")&&!a.isString(r.sourceType)?"sourceType: string expected":r.itemId!=null&&r.hasOwnProperty("itemId")&&!a.isString(r.itemId)?"itemId: string expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.ContentShareDetails)return r;let c=new s.PeerMessage.ContentShareDetails;return r.sourceType!=null&&(c.sourceType=String(r.sourceType)),r.itemId!=null&&(c.itemId=String(r.itemId)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.sourceType="",p.itemId=""),r.sourceType!=null&&r.hasOwnProperty("sourceType")&&(p.sourceType=r.sourceType),r.itemId!=null&&r.hasOwnProperty("itemId")&&(p.itemId=r.itemId),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.ContentShareDetails"},"getTypeUrl"),t}(),e.Background=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"Background"),t.prototype.url="",t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.url!=null&&Object.hasOwnProperty.call(r,"url")&&c.uint32(10).string(r.url),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.Background;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.url=r.string();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.url!=null&&r.hasOwnProperty("url")&&!a.isString(r.url)?"url: string expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.Background)return r;let c=new s.PeerMessage.Background;return r.url!=null&&(c.url=String(r.url)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.url=""),r.url!=null&&r.hasOwnProperty("url")&&(p.url=r.url),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.Background"},"getTypeUrl"),t}(),e.MuteRequest=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"MuteRequest"),t.prototype.peerId="",t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.peerId!=null&&Object.hasOwnProperty.call(r,"peerId")&&c.uint32(10).string(r.peerId),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.MuteRequest;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.peerId=r.string();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.peerId!=null&&r.hasOwnProperty("peerId")&&!a.isString(r.peerId)?"peerId: string expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.MuteRequest)return r;let c=new s.PeerMessage.MuteRequest;return r.peerId!=null&&(c.peerId=String(r.peerId)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.peerId=""),r.peerId!=null&&r.hasOwnProperty("peerId")&&(p.peerId=r.peerId),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.MuteRequest"},"getTypeUrl"),t}(),e.JukeboxRequest=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"JukeboxRequest"),t.prototype.songKey="",t.prototype.stop=!1,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.songKey!=null&&Object.hasOwnProperty.call(r,"songKey")&&c.uint32(10).string(r.songKey),r.stop!=null&&Object.hasOwnProperty.call(r,"stop")&&c.uint32(16).bool(r.stop),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.JukeboxRequest;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.songKey=r.string();break}case 2:{g.stop=r.bool();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.songKey!=null&&r.hasOwnProperty("songKey")&&!a.isString(r.songKey)?"songKey: string expected":r.stop!=null&&r.hasOwnProperty("stop")&&typeof r.stop!="boolean"?"stop: boolean expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.JukeboxRequest)return r;let c=new s.PeerMessage.JukeboxRequest;return r.songKey!=null&&(c.songKey=String(r.songKey)),r.stop!=null&&(c.stop=Boolean(r.stop)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.songKey="",p.stop=!1),r.songKey!=null&&r.hasOwnProperty("songKey")&&(p.songKey=r.songKey),r.stop!=null&&r.hasOwnProperty("stop")&&(p.stop=r.stop),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.JukeboxRequest"},"getTypeUrl"),t}(),e.AwarenessPayload=function(){function t(r){if(r)for(let c=Object.keys(r),p=0;p<c.length;++p)r[c[p]]!=null&&(this[c[p]]=r[c[p]])}o(t,"AwarenessPayload"),t.prototype.fieldName="",t.prototype.fieldValue="",t.prototype.fieldTimestampMs=null;let n;return Object.defineProperty(t.prototype,"_fieldTimestampMs",{get:a.oneOfGetter(n=["fieldTimestampMs"]),set:a.oneOfSetter(n)}),t.create=o(function(c){return new t(c)},"create"),t.encode=o(function(c,p){return p||(p=m.create()),c.fieldName!=null&&Object.hasOwnProperty.call(c,"fieldName")&&p.uint32(10).string(c.fieldName),c.fieldValue!=null&&Object.hasOwnProperty.call(c,"fieldValue")&&p.uint32(18).string(c.fieldValue),c.fieldTimestampMs!=null&&Object.hasOwnProperty.call(c,"fieldTimestampMs")&&p.uint32(24).int64(c.fieldTimestampMs),p},"encode"),t.encodeDelimited=o(function(c,p){return this.encode(c,p).ldelim()},"encodeDelimited"),t.decode=o(function(c,p){c instanceof u||(c=u.create(c));let g=p===void 0?c.len:c.pos+p,d=new s.PeerMessage.AwarenessPayload;for(;c.pos<g;){let y=c.uint32();switch(y>>>3){case 1:{d.fieldName=c.string();break}case 2:{d.fieldValue=c.string();break}case 3:{d.fieldTimestampMs=c.int64();break}default:c.skipType(y&7);break}}return d},"decode"),t.decodeDelimited=o(function(c){return c instanceof u||(c=new u(c)),this.decode(c,c.uint32())},"decodeDelimited"),t.verify=o(function(c){if(typeof c!="object"||c===null)return"object expected";let p={};return c.fieldName!=null&&c.hasOwnProperty("fieldName")&&!a.isString(c.fieldName)?"fieldName: string expected":c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&!a.isString(c.fieldValue)?"fieldValue: string expected":c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(p._fieldTimestampMs=1,!a.isInteger(c.fieldTimestampMs)&&!(c.fieldTimestampMs&&a.isInteger(c.fieldTimestampMs.low)&&a.isInteger(c.fieldTimestampMs.high)))?"fieldTimestampMs: integer|Long expected":null},"verify"),t.fromObject=o(function(c){if(c instanceof s.PeerMessage.AwarenessPayload)return c;let p=new s.PeerMessage.AwarenessPayload;return c.fieldName!=null&&(p.fieldName=String(c.fieldName)),c.fieldValue!=null&&(p.fieldValue=String(c.fieldValue)),c.fieldTimestampMs!=null&&(a.Long?(p.fieldTimestampMs=a.Long.fromValue(c.fieldTimestampMs)).unsigned=!1:typeof c.fieldTimestampMs=="string"?p.fieldTimestampMs=parseInt(c.fieldTimestampMs,10):typeof c.fieldTimestampMs=="number"?p.fieldTimestampMs=c.fieldTimestampMs:typeof c.fieldTimestampMs=="object"&&(p.fieldTimestampMs=new a.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber())),p},"fromObject"),t.toObject=o(function(c,p){p||(p={});let g={};return p.defaults&&(g.fieldName="",g.fieldValue=""),c.fieldName!=null&&c.hasOwnProperty("fieldName")&&(g.fieldName=c.fieldName),c.fieldValue!=null&&c.hasOwnProperty("fieldValue")&&(g.fieldValue=c.fieldValue),c.fieldTimestampMs!=null&&c.hasOwnProperty("fieldTimestampMs")&&(typeof c.fieldTimestampMs=="number"?g.fieldTimestampMs=p.longs===String?String(c.fieldTimestampMs):c.fieldTimestampMs:g.fieldTimestampMs=p.longs===String?a.Long.prototype.toString.call(c.fieldTimestampMs):p.longs===Number?new a.LongBits(c.fieldTimestampMs.low>>>0,c.fieldTimestampMs.high>>>0).toNumber():c.fieldTimestampMs,p.oneofs&&(g._fieldTimestampMs="fieldTimestampMs")),g},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(c){return c===void 0&&(c="type.googleapis.com"),c+"/PeerMessage.AwarenessPayload"},"getTypeUrl"),t}(),e.AwarenessBroadcast=function(){function t(n){if(this.awarenessState=[],n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"AwarenessBroadcast"),t.prototype.channel="",t.prototype.user="",t.prototype.awarenessState=a.emptyArray,t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){if(c||(c=m.create()),r.channel!=null&&Object.hasOwnProperty.call(r,"channel")&&c.uint32(10).string(r.channel),r.user!=null&&Object.hasOwnProperty.call(r,"user")&&c.uint32(18).string(r.user),r.awarenessState!=null&&r.awarenessState.length)for(let p=0;p<r.awarenessState.length;++p)s.PeerMessage.AwarenessPayload.encode(r.awarenessState[p],c.uint32(26).fork()).ldelim();return c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.AwarenessBroadcast;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.channel=r.string();break}case 2:{g.user=r.string();break}case 3:{g.awarenessState&&g.awarenessState.length||(g.awarenessState=[]),g.awarenessState.push(s.PeerMessage.AwarenessPayload.decode(r,r.uint32()));break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){if(typeof r!="object"||r===null)return"object expected";if(r.channel!=null&&r.hasOwnProperty("channel")&&!a.isString(r.channel))return"channel: string expected";if(r.user!=null&&r.hasOwnProperty("user")&&!a.isString(r.user))return"user: string expected";if(r.awarenessState!=null&&r.hasOwnProperty("awarenessState")){if(!Array.isArray(r.awarenessState))return"awarenessState: array expected";for(let c=0;c<r.awarenessState.length;++c){let p=s.PeerMessage.AwarenessPayload.verify(r.awarenessState[c]);if(p)return"awarenessState."+p}}return null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.AwarenessBroadcast)return r;let c=new s.PeerMessage.AwarenessBroadcast;if(r.channel!=null&&(c.channel=String(r.channel)),r.user!=null&&(c.user=String(r.user)),r.awarenessState){if(!Array.isArray(r.awarenessState))throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: array expected");c.awarenessState=[];for(let p=0;p<r.awarenessState.length;++p){if(typeof r.awarenessState[p]!="object")throw TypeError(".PeerMessage.AwarenessBroadcast.awarenessState: object expected");c.awarenessState[p]=s.PeerMessage.AwarenessPayload.fromObject(r.awarenessState[p])}}return c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};if((c.arrays||c.defaults)&&(p.awarenessState=[]),c.defaults&&(p.channel="",p.user=""),r.channel!=null&&r.hasOwnProperty("channel")&&(p.channel=r.channel),r.user!=null&&r.hasOwnProperty("user")&&(p.user=r.user),r.awarenessState&&r.awarenessState.length){p.awarenessState=[];for(let g=0;g<r.awarenessState.length;++g)p.awarenessState[g]=s.PeerMessage.AwarenessPayload.toObject(r.awarenessState[g],c)}return p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.AwarenessBroadcast"},"getTypeUrl"),t}(),e.AwarenessQuery=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"AwarenessQuery"),t.prototype.channel="",t.prototype.user="",t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.channel!=null&&Object.hasOwnProperty.call(r,"channel")&&c.uint32(10).string(r.channel),r.user!=null&&Object.hasOwnProperty.call(r,"user")&&c.uint32(18).string(r.user),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.AwarenessQuery;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.channel=r.string();break}case 2:{g.user=r.string();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.channel!=null&&r.hasOwnProperty("channel")&&!a.isString(r.channel)?"channel: string expected":r.user!=null&&r.hasOwnProperty("user")&&!a.isString(r.user)?"user: string expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.AwarenessQuery)return r;let c=new s.PeerMessage.AwarenessQuery;return r.channel!=null&&(c.channel=String(r.channel)),r.user!=null&&(c.user=String(r.user)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.channel="",p.user=""),r.channel!=null&&r.hasOwnProperty("channel")&&(p.channel=r.channel),r.user!=null&&r.hasOwnProperty("user")&&(p.user=r.user),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.AwarenessQuery"},"getTypeUrl"),t}(),e.AwarenessClose=function(){function t(n){if(n)for(let r=Object.keys(n),c=0;c<r.length;++c)n[r[c]]!=null&&(this[r[c]]=n[r[c]])}return o(t,"AwarenessClose"),t.prototype.channel="",t.prototype.user="",t.create=o(function(r){return new t(r)},"create"),t.encode=o(function(r,c){return c||(c=m.create()),r.channel!=null&&Object.hasOwnProperty.call(r,"channel")&&c.uint32(10).string(r.channel),r.user!=null&&Object.hasOwnProperty.call(r,"user")&&c.uint32(18).string(r.user),c},"encode"),t.encodeDelimited=o(function(r,c){return this.encode(r,c).ldelim()},"encodeDelimited"),t.decode=o(function(r,c){r instanceof u||(r=u.create(r));let p=c===void 0?r.len:r.pos+c,g=new s.PeerMessage.AwarenessClose;for(;r.pos<p;){let d=r.uint32();switch(d>>>3){case 1:{g.channel=r.string();break}case 2:{g.user=r.string();break}default:r.skipType(d&7);break}}return g},"decode"),t.decodeDelimited=o(function(r){return r instanceof u||(r=new u(r)),this.decode(r,r.uint32())},"decodeDelimited"),t.verify=o(function(r){return typeof r!="object"||r===null?"object expected":r.channel!=null&&r.hasOwnProperty("channel")&&!a.isString(r.channel)?"channel: string expected":r.user!=null&&r.hasOwnProperty("user")&&!a.isString(r.user)?"user: string expected":null},"verify"),t.fromObject=o(function(r){if(r instanceof s.PeerMessage.AwarenessClose)return r;let c=new s.PeerMessage.AwarenessClose;return r.channel!=null&&(c.channel=String(r.channel)),r.user!=null&&(c.user=String(r.user)),c},"fromObject"),t.toObject=o(function(r,c){c||(c={});let p={};return c.defaults&&(p.channel="",p.user=""),r.channel!=null&&r.hasOwnProperty("channel")&&(p.channel=r.channel),r.user!=null&&r.hasOwnProperty("user")&&(p.user=r.user),p},"toObject"),t.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),t.getTypeUrl=o(function(r){return r===void 0&&(r="type.googleapis.com"),r+"/PeerMessage.AwarenessClose"},"getTypeUrl"),t}(),e})()},HpkP:function(j,l,f){"use strict";f.d(l,"a",function(){return e}),f.d(l,"b",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={NoAliasSelected:"no_alias_selected",RateLimited:"rate_limited",NoImageUploaded:"no_image_uploaded",InvalidMode:"invalid_mode",ErrorBadNameI18N:"error_bad_name_i18n",ErrorNameTaken:"error_name_taken",ErrorNameTakenI18N:"error_name_taken_i18n",ErrorInvalidAlias:"error_invalid_alias",ErrorBadUpload:"error_bad_upload",ErrorTooBig:"error_too_big",ErrorBadWide:"error_bad_wide",ErrorMissingName:"error_missing_name",ErrorNoImage:"error_no_image",ErrorBadFormat:"error_bad_format",ResizedButStillTooLarge:"resized_but_still_too_large",UnableToEnqueue:"unable_to_enqueue",TooManyFrames:"too_many_frames",UnknownMethod:"unknown_method",NoPermission:"no_permission",UnableToFetchEmoji:"unable_to_fetch_emoji",EmojiLimitReached:"emoji_limit_reached",NoUrlProvided:"no_url_provided",NoUrlImage:"no_url_image"},t=Object(a.a)("emoji.add generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"emoji.add",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to emoji.add
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcheremojiAddFetcher",description:"emoji.add generated fetcher"}},HrOX:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.STARTED="started",h.INTERRUPTED="interrupted",h.RESUMED="resumed",h.STOPPED="stopped",h.FAILED="failed"})(S||(S={})),l.default=S},"I/xa":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("oHvd"));let u=o(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,s=a*this.packetsExpected;let i=0;for(let e=0;e<a;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/s,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,s){super(a,s,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=u},I0Bj:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerState=void 0;var S;(function(h){h[h.NotConnected=0]="NotConnected",h[h.Connecting=1]="Connecting",h[h.Connected=2]="Connected",h[h.Updating=3]="Updating",h[h.Disconnecting=4]="Disconnecting"})(S=l.SessionStateControllerState||(l.SessionStateControllerState={})),l.default=S},IBi3:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("SO8M")),m=h(f("Xf/8")),a=h(f("aNtF")),s=h(f("i2nt")),i=h(f("6/h7"));let e=o(class{setEncodingParameters(n){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!n||n.size===0)return;const c=Array.from(n.values()),p=r.getParameters();if(!p.encodings||p.encodings.length===0)p.encodings=c;else for(const g of p.encodings)for(const d of c){if((g.rid||d.rid)&&g.rid!==d.rid)continue;let y;for(y in d)y==="rid"||y==="codecPayloadType"||d.hasOwnProperty(y)&&(g[y]=d[y])}yield r.setParameters(p)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(n){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!r||n<=0)return;const c=r.getParameters();c.encodings||(c.encodings=[{}]);for(const p of c.encodings)p.maxBitrate=n*1e3;yield r.setParameters(c)})}setPeer(n){this.peer=n}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(n){return this._localCameraTransceiver?n===this._localCameraTransceiver.sender.track||n===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var n,r;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((r=(n=this.meetingSessionContext)===null||n===void 0?void 0:n.audioProfile)===null||r===void 0)&&r.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(n){return S(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(n),!0)})}setAudioInput(n){return S(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,n)})}setVideoInput(n){return S(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,n)})}updateVideoTransceivers(n,r){if(!this.useTransceivers())return r.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],r=r.clone(),this.updateTransceivers(c,n,r),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(n,r,c){const p=c.array();n.length!==0&&!n[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(n,r,p)):n.length!==0&&this.updateTransceiverWithStop(n,r,p);for(const g of p){const d=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(g,d),this.groupIdToTransceiver.set(r.groupIdForStreamId(g),d),this.videoSubscriptions.push(g),this.logger.info(`adding transceiver mid: ${d.mid} subscription: ${g} direction: recvonly`)}}updateTransceiverWithStop(n,r,c){let p=1;this.videoSubscriptions=[0];for(const g of n){if(g===this._localCameraTransceiver||!this.transceiverIsVideo(g)||!g.mid)continue;let d=!1;const y=r.streamIdForTrack("v_"+g.mid);if(g.direction!=="inactive"&&y!==void 0){for(const[E,w]of c.entries())if(r.StreamIdsInSameGroup(y,w)){g.direction="recvonly",this.videoSubscriptions[p]=w,d=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(w,g),c.splice(E,1);break}}if(!d){this.videoSubscriptions[p]=0,this.logger.info(`Stopping MID: ${g.mid}, direction: ${g.direction}, current direction: ${g.currentDirection}`),g.stop();for(const[E,w]of this.streamIdToTransceiver.entries())g.mid===w.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(r.groupIdForStreamId(E)))}p+=1}}updateTransceiverWithoutStop(n,r,c){let p=1;for(const g of n)if(!(g===this._localCameraTransceiver||!this.transceiverIsVideo(g))){if(this.videoSubscriptions[p]=0,g.direction!=="inactive"){const d=r.streamIdForTrack("v_"+g.mid);if(d!==void 0){for(const[y,E]of c.entries())if(r.StreamIdsInSameGroup(d,E)){g.direction="recvonly",this.videoSubscriptions[p]=E,this.streamIdToTransceiver.delete(d),this.streamIdToTransceiver.set(E,g),c.splice(y,1);break}}}p+=1}p=1;for(const g of n)if(!(g===this._localCameraTransceiver||!this.transceiverIsVideo(g))){if(g.direction==="inactive"&&c.length>0){g.direction="recvonly";const d=c.shift();this.videoSubscriptions[p]=d,this.streamIdToTransceiver.set(d,g),this.groupIdToTransceiver.set(r.groupIdForStreamId(d),g)}else if(this.videoSubscriptions[p]===0){g.direction="inactive";for(const[d,y]of this.streamIdToTransceiver.entries())g===y&&(this.streamIdToTransceiver.delete(d),this.groupIdToTransceiver.delete(r.groupIdForStreamId(d)))}p+=1}}getMidForStreamId(n){var r;return(r=this.streamIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}setStreamIdForMid(n,r){for(const[c,p]of this.streamIdToTransceiver.entries())if(p.mid===n){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(r,p);return}}getMidForGroupId(n){var r;return(r=this.groupIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}transceiverIsVideo(n){return n.receiver&&n.receiver.track&&n.receiver.track.kind==="video"||n.sender&&n.sender.track&&n.sender.track.kind==="video"}debugDumpTransceivers(){let n="",r=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(n+=`transceiver index=${r} mid=${c.mid} subscription=${this.videoSubscriptions[r]} direction=${c.direction}
`,r+=1);return n}setTransceiverInput(n,r){return S(this,void 0,void 0,function*(){n&&(r?n.direction="sendrecv":n.direction="inactive",yield n.sender.replaceTrack(r))})}forEachRedMetricsObserver(n){for(const r of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(r)&&r.recoveryMetricsDidReceive(n)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new u.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var n,r;const c=!!window.RTCRtpScriptTransform,p=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(p)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([s.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(g){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${g}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),g}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=g=>{if(g.data.type==="REDWorkerLog")this.logger.info(g.data.log);else if(g.data.type==="RedundantAudioEncoderStats"){const d=new m.default;d.currentTimestampMs=Date.now(),d.ssrc=g.data.ssrc,d.totalAudioPacketsLost=g.data.totalAudioPacketsLost,d.totalAudioPacketsExpected=g.data.totalAudioPacketsExpected,d.totalAudioPacketsRecoveredRed=g.data.totalAudioPacketsRecoveredRed,d.totalAudioPacketsRecoveredFec=g.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(d)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(p){const g=this._localAudioTransceiver.sender.createEncodedStreams(),d=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:g,receive:d},[g.readable,g.writable,d.readable,d.writable])}(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector)}addTransceiver(n,r){var c;const p=this.peer.addTransceiver(n,r);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return p;const g=!!window.RTCRtpScriptTransform,d=!!RTCRtpSender.prototype.createEncodedStreams;if(g)p.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),p.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(d){const y=p.sender.createEncodedStreams();y.readable.pipeTo(y.writable);const E=p.receiver.createEncodedStreams();E.readable.pipeTo(E.writable)}return p}destroyAudioRedWorkerAndStates(){var n,r;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector))}setAudioPayloadTypes(n){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:n.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:n.get("opus")}))}metricsDidReceive(n){const{currentTimestampMs:r}=n,c=n.getRTCStatsReport();let p=0,g=0,d=0;c.forEach(F=>{F.kind==="audio"&&(F.type==="outbound-rtp"?g=F.packetsSent:F.type==="remote-inbound-rtp"&&(p=F.timestamp,d=F.packetsLost))}),(this.audioMetricsHistory.length===0||p>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:p,totalPacketsSent:g,totalPacketsLost:d}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),w=Math.max(y,E),[k,V]=a.default.getNumRedundantEncodingsForPacketLoss(w);if(V){this.lastHighPacketLossEventTimestampMs=r,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=r);return}else if(!this.audioRedEnabled){const F=r-this.lastAudioRedTurnOffTimestampMs,N=r-this.lastHighPacketLossEventTimestampMs;if(F>=this.audioRedPacketLossLongEvalPeriodMs&&N<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(r)}this.shouldUpdateAudioRedWorkerEncodings(r,k)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:k})}maybeResetHoldDownTimer(n){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=n)}lossPercent(n){if(this.audioMetricsHistory.length<2)return 0;const r=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,p=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let g=this.audioMetricsHistory.length-2;g>=0;g--)if(r-this.audioMetricsHistory[g].timestampMs>=n){const d=p-this.audioMetricsHistory[g].totalPacketsLost,y=c-this.audioMetricsHistory[g].totalPacketsSent,E=100*(d/y);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(n,r){return this.currentNumRedundantEncodings===r?(this.maybeResetHoldDownTimer(n),!1):r<this.currentNumRedundantEncodings&&n-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=r,this.maybeResetHoldDownTimer(n),!0)}addRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.add(n)}removeRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.delete(n)}constructor(n,r,c){this.logger=n,this.browserBehavior=r,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},IGBW:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.IDLE="IDLE",h.RUNNING="RUNNING",h.CANCELED="CANCELED",h.FINISHED="FINISHED"})(S||(S={})),l.default=S},IKDz:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u=5e3,m=2,a=64,s=100,i=15){this.flushIntervalMs=u,this.flushSize=m,this.maxBufferCapacityKb=a,this.totalBufferItems=s,this.retryCountLimit=i}},"EventBufferConfiguration");l.default=S},IVKD:function(j,l){function f(S){if(Array.isArray(S))return S}o(f,"_arrayWithHoles"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},InPl:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR")),m=h(f("ZsEg"));let a=o(class zf{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return S(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return S(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return S(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return S(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new u.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||zf.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||zf.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},IrJe:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=S},IsLT:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("EkyC"),m=f("KvYa"),a=h(f("DE61")),s=h(f("U9CR")),i=h(f("ac3q")),e=o(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",n={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let r=o(class{static defaultAssetSpec(){const p=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${p.major}.${p.minor}`}}static createUrlWithParams(p,g){const d=new URL(p),y=Object.keys(g);for(const E of y)g[E]!==void 0&&d.searchParams.set(E,g[E]);return d.toString()}static resolveSpec(p){const{paths:g=n,model:d=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=p||{},w={assetGroup:y,revisionID:E,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return g.worker=this.createUrlWithParams(g.worker,w),g.wasm=this.createUrlWithParams(g.wasm,w),g.simd=this.createUrlWithParams(g.simd,w),d.path=this.createUrlWithParams(d.path,w),{paths:g,model:d,assetGroup:y,revisionID:E}}static resolveOptions(p){p.reportingPeriodMillis||(p.reportingPeriodMillis=1e3);const g=30;return p.filterCPUUtilization?(p.filterCPUUtilization<0||p.filterCPUUtilization>100)&&(p.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${g} percent`),p.filterCPUUtilization=g):p.filterCPUUtilization=g,p}static isSupported(p,g){const{logger:d}=g;return typeof globalThis>"u"?(d.info("Browser does not have globalThis."),Promise.resolve(!1)):new s.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,d)?this.supportsBackgroundFilter(globalThis,p,d):(d.info("Browser does not support WASM."),Promise.resolve(!1)):(d.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,g=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;return S(this,void 0,void 0,function*(){if(!m.supportsWorker(p,d))return d.info("Browser does not support web workers."),!1;const y=g.paths.worker;try{const E=yield u.loadWorker(y,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(w){d.info(`Failed to terminate worker. ${w.message}`)}return!0}catch(E){return d.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=r},Iwfh:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"SDPMediaSection");l.default=S},"J+fJ":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var S;(function(h){h[h.DeviceChanged=0]="DeviceChanged",h[h.MutedLocal=1]="MutedLocal",h[h.UnmutedLocal=2]="UnmutedLocal",h[h.Connected=3]="Connected",h[h.ConnectFailed=4]="ConnectFailed",h[h.RedmicStartLoss=5]="RedmicStartLoss",h[h.RedmicEndLoss=6]="RedmicEndLoss"})(S=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=S},J1op:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("DUgj"));let u=o(class lc{allowSubscribe(a,s){let i=0;const e=this.currentNetworkEvent;if(s>this.referenceBitrate)return this.currentNetworkEvent=2,this.referenceBitrate=s,!0;if(s<this.referenceBitrate){if(this.currentNetworkEvent=1,i=this.getSubscribeDelay(this.currentNetworkEvent,a),e!==1)this.bandwidthDecreaseTimestamp=Date.now();else if(Date.now()-this.bandwidthDecreaseTimestamp>i)return this.referenceBitrate=s,!0;return!1}else return this.currentNetworkEvent=0,!1}getSubscribeDelay(a,s){let i=lc.MINIMUM_DELAY_MS;const e=lc.MAXIMUM_DELAY_MS-lc.MINIMUM_DELAY_MS,t=this.networkIssueResponseDelayFactor;switch(a){case 1:i+=e*t*(1+s/10),i=Math.min(lc.MAXIMUM_DELAY_MS,i);break}return i}constructor(a=0,s=0){this.networkIssueResponseDelayFactor=a,this.networkIssueRecoveryDelayFactor=s,this.currentNetworkEvent=0,this.bandwidthDecreaseTimestamp=0,this.referenceBitrate=0,this.serverSideNetworkAdaption=h.default.Default,a<0?a=0:a>1&&(a=1),this.networkIssueResponseDelayFactor=a,s<0?s=0:s>1&&(s=1),this.networkIssueRecoveryDelayFactor=s}},"VideoPriorityBasedPolicyConfig");l.default=u,u.MINIMUM_DELAY_MS=2e3,u.MAXIMUM_DELAY_MS=8e3,u.Default=new u(0,0),u.UnstableNetworkPreset=new u(0,1),u.StableNetworkPreset=new u(1,0)},J5JU:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const S=f("2IS5");l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=o(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const s of S.TranscriptEventConverter.from(a))for(const i of this.transcriptEventCallbacks)i(s)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},J93s:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class ES{static builder(){return new ES}withDefaultModel(){return this.withSelfieSegmentationDefaults()}withSelfieSegmentationDefaults(){const u={height:144,width:256,range:[0,1],channels:3},m={height:144,width:256,range:[0,1],channels:1},a="https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite";return this.path=a,this.input=u,this.output=m,this}withPath(u){return this.path=u,this}withInput(u){return this.input=u,this}withOutput(u){return this.output=u,this}validate(){if(!this.path)throw new Error("model spec path is not set");if(!this.input)throw new Error("model spec input is not set");if(!this.output)throw new Error("model spec output is not set")}build(){return this.validate(),{path:this.path,input:this.input,output:this.output}}constructor(){this.path=null,this.input=null,this.output=null}},"ModelSpecBuilder");l.default=S},JBVX:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0})},JEbH:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0})},JHsX:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var S;(function(h){h[h.Connect=0]="Connect",h[h.FinishConnecting=1]="FinishConnecting",h[h.Update=2]="Update",h[h.FinishUpdating=3]="FinishUpdating",h[h.Reconnect=4]="Reconnect",h[h.Disconnect=5]="Disconnect",h[h.Fail=6]="Fail",h[h.FinishDisconnecting=7]="FinishDisconnecting"})(S=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=S},JJ3a:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(g,d,y,E){function w(k){return k instanceof y?k:new y(function(V){V(k)})}return o(w,"adopt"),new(y||(y=Promise))(function(k,V){function F(x){try{P(E.next(x))}catch(O){V(O)}}o(F,"fulfilled");function N(x){try{P(E.throw(x))}catch(O){V(O)}}o(N,"rejected");function P(x){x.done?k(x.value):w(x.value).then(F,N)}o(P,"step"),P((E=E.apply(g,d||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("Zit3"),m=h(f("Np2I")),a=h(f("Q8+J")),s=h(f("evlv")),i=h(f("ULlC")),e=h(f("6/h7")),t=h(f("PsbS")),n=h(f("jHTc")),r=h(f("4EN+")),c=h(f("p3mT"));let p=o(class{addObserver(d){this.logger.info("adding messaging observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.info("removing messaging observer"),this.observerQueue.delete(d)}start(){return S(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(d){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&d(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",d=>{this.receiveMessageHandler(d.data)}),this.webSocket.addEventListener("close",d=>{this.closeEventHandler(d)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(d){return S(this,void 0,void 0,function*(){return yield this.startConnectingInternal(d),yield new Promise((y,E)=>{this.bootstrapResolved=y,this.bootstrapRejected=E})})}startConnectingInternal(d){var y;return S(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),d||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const k=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=k.Endpoint)===null||y===void 0)&&y.Url?E=k.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new u.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(k){this.logger.error(`Messaging Session failed to resolve endpoint: ${k}`);const V=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(V);return}const w=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${w}`),d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(w,[],!0),this.forEachObserver(k=>{k.messagingSessionDidStartConnecting&&k.messagingSessionDidStartConnecting(d)}),this.setUpEventListeners()})}prepareWebSocketUrl(d){return S(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&y.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",d,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===r.default.None||this.webSocket.readyState()===r.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(d){try{const y=JSON.parse(d),E=y.Headers["x-amz-chime-event-type"],w=new s.default(E,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(V=>{V.messagingSessionDidStart&&V.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const k=this.preBootstrapMessages.length;for(let V=0;V<k;V++){const F=this.preBootstrapMessages.shift();this.forEachObserver(N=>{this.sendMessageToObserver(N,F)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(w);return}this.forEachObserver(k=>{this.sendMessageToObserver(k,w)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(d,y){d.messagingSessionDidReceiveMessage&&d.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>S(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(d){this.logger.info(`WebSocket close: ${d.code} ${d.reason}`),d.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(d.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(d)}):this.bootstrapRejected(d))}canReconnect(d){return d===1001||d===1006||d>=1011&&d<=1014||d>4e3&&d!==4002&&d!==4003&&d!==4401}constructor(d,y,E,w,k){this.configuration=d,this.logger=y,this.webSocket=E,this.reconnectController=w,this.sigV4=k,this.observerQueue=new Set,this.webSocket||(this.webSocket=new n.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(d.reconnectTimeoutMs,new m.default(d.reconnectFixedWaitMs,d.reconnectShortBackoffMs,d.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=p},"JMN+":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptAlternative");l.default=S},JOZa:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var S;(function(h){h[h.DoNotDefer=0]="DoNotDefer",h[h.Low=1]="Low",h[h.Medium=2]="Medium",h[h.High=3]="High",h[h.VeryHigh=4]="VeryHigh"})(S=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=S},JTre:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Sa54")),u=S(f("bTau")),m=S(f("5mqp"));let a=o(class fl{static connectVideoStreamToVideoElement(i,e,t){const n=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(fl.setVideoElementFlag(e,"disablePictureInPicture",t),fl.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==n&&(e.style.transform=n),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const r=e.play();r!==void 0&&r.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",fl.setVideoElementFlag(i,"disablePictureInPicture",!1),fl.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&fl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,n,r,c,p){let g=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new u.default(i).hasModality(u.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),g=!0),this.tileState.boundExternalUserId!==p&&(this.tileState.boundExternalUserId=p,g=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,g=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,g=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,g=!0),this.tileState.videoStreamContentHeight!==r&&(this.tileState.videoStreamContentHeight=r,g=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,g=!0),g&&this.sendTileStateUpdate()}bindVideoElement(i){let e=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?fl.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):fl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,n){this.tileController=t,this.devicePixelRatioMonitor=n,this.tileState=new m.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},JXEU:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={FailedToRecordInteraction:"failed_to_record_interaction",InvalidComponent:"invalid_component",InvalidType:"invalid_type"},t=Object(a.a)("users.interactions.set generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d),E=yield r(Object(m.apiCall)({method:"users.interactions.set",args:y,reason:p.reason}));return Object(i.a)(E)}catch(g){throw Object(s.a)({getState:c}).error(`API call to users.interactions.set
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersInteractionsSetFetcher",description:"users.interactions.set generated fetcher"}},JsnC:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SDPCandidateType=void 0;var S;(function(h){h.Host="host",h.ServerReflexive="srflx",h.PeerReflexive="prflx",h.Relay="relay"})(S=l.SDPCandidateType||(l.SDPCandidateType={})),l.default=S},Jsna:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Np2I")),u=S(f("eeYi")),m=S(f("ir/0")),a=S(f("r9Lw")),s=S(f("/U1e")),i=S(f("a16/")),e=S(f("6Bxv")),t=S(f("lUhs")),n=S(f("iNgN")),r=S(f("ULlC")),c=S(f("jHTc")),p=S(f("2nae"));let g=o(class extends p.default{setAudioProfile(y){}start(){}stop(){}promoteToPrimaryMeeting(y){return Promise.resolve(new e.default(t.default.OK))}demoteFromPrimaryMeeting(){}constructor(y){const E=new s.default;E.meetingId="",E.externalMeetingId="",E.credentials=new i.default,E.credentials.attendeeId="",E.credentials.joinToken="",E.urls=new n.default,E.urls.turnControlURL="",E.urls.audioHostURL="",E.urls.signalingURL="wss://localhost/";const w=new m.default;super(y||E,w,new c.default(new m.default),new a.default,new r.default(0,new h.default(0,0,0)),new u.default(y||E,w))}},"NoOpAudioVideoController");l.default=g},"K+bq":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("j+uH")),m=h(f("IGBW"));let a=o(class extends u.default{cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return S(this,void 0,void 0,function*(){for(const i of this.tasksToRunSerially){this.getStatus()===m.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${i.name()}`),this.currentTask=i,yield i.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${i.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskName=e,this.tasksToRunSerially=t,this.currentTask=null;for(const n of t)n.setParent(this)}},"SerialGroupTask");l.default=a},K4CH:function(j,l,f){var S;(function(h,u){"use strict";var m="1.0.2",a="",s="?",i="function",e="undefined",t="object",n="string",r="major",c="model",p="name",g="type",d="vendor",y="version",E="architecture",w="console",k="mobile",V="tablet",F="smarttv",N="wearable",P="embedded",x=255,O="Amazon",M="Apple",D="ASUS",J="BlackBerry",q="Browser",$="Chrome",de="Edge",Ee="Firefox",_e="Google",ye="Huawei",Be="LG",pt="Microsoft",Ve="Motorola",gt="Opera",dt="Samsung",Je="Sony",_t="Xiaomi",ot="Zebra",Et="Facebook",Mt=o(function(Sn,un){var bn={};for(var Ot in Sn)un[Ot]&&un[Ot].length%2===0?bn[Ot]=un[Ot].concat(Sn[Ot]):bn[Ot]=Sn[Ot];return bn},"extend"),ze=o(function(Sn){for(var un={},bn=0;bn<Sn.length;bn++)un[Sn[bn].toUpperCase()]=Sn[bn];return un},"enumerize"),$t=o(function(Sn,un){return typeof Sn===n?Un(un).indexOf(Un(Sn))!==-1:!1},"has"),Un=o(function(Sn){return Sn.toLowerCase()},"lowerize"),ni=o(function(Sn){return typeof Sn===n?Sn.replace(/[^\d\.]/g,a).split(".")[0]:u},"majorize"),an=o(function(Sn,un){if(typeof Sn===n)return Sn=Sn.replace(/^\s\s*/,a).replace(/\s\s*$/,a),typeof un===e?Sn:Sn.substring(0,x)},"trim"),Gn=o(function(Sn,un){for(var bn=0,Ot,En,Lt,Hn,Ji,$n;bn<un.length&&!Ji;){var Ti=un[bn],Ir=un[bn+1];for(Ot=En=0;Ot<Ti.length&&!Ji;)if(Ji=Ti[Ot++].exec(Sn),Ji)for(Lt=0;Lt<Ir.length;Lt++)$n=Ji[++En],Hn=Ir[Lt],typeof Hn===t&&Hn.length>0?Hn.length===2?typeof Hn[1]==i?this[Hn[0]]=Hn[1].call(this,$n):this[Hn[0]]=Hn[1]:Hn.length===3?typeof Hn[1]===i&&!(Hn[1].exec&&Hn[1].test)?this[Hn[0]]=$n?Hn[1].call(this,$n,Hn[2]):u:this[Hn[0]]=$n?$n.replace(Hn[1],Hn[2]):u:Hn.length===4&&(this[Hn[0]]=$n?Hn[3].call(this,$n.replace(Hn[1],Hn[2])):u):this[Hn]=$n||u;bn+=2}},"rgxMapper"),si=o(function(Sn,un){for(var bn in un)if(typeof un[bn]===t&&un[bn].length>0){for(var Ot=0;Ot<un[bn].length;Ot++)if($t(un[bn][Ot],Sn))return bn===s?u:bn}else if($t(un[bn],Sn))return bn===s?u:bn;return Sn},"strMapper"),ri={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},On={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Gi={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[y,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[y,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,y],[/opios[\/ ]+([\w\.]+)/i],[y,[p,gt+" Mini"]],[/\bopr\/([\w\.]+)/i],[y,[p,gt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[p,y],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[y,[p,"UC"+q]],[/\bqbcore\/([\w\.]+)/i],[y,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[y,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[y,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[y,[p,"IE"]],[/yabrowser\/([\w\.]+)/i],[y,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+q],y],[/\bfocus\/([\w\.]+)/i],[y,[p,Ee+" Focus"]],[/\bopt\/([\w\.]+)/i],[y,[p,gt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[y,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[y,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[y,[p,gt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[y,[p,"MIUI "+q]],[/fxios\/([-\w\.]+)/i],[y,[p,Ee]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+q]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+q],y],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],y],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,y],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,Et],y],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,y],[/\bgsa\/([\w\.]+) .*safari\//i],[y,[p,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[y,[p,$+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,$+" WebView"],y],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[y,[p,"Android "+q]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,y],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[y,[p,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[y,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[y,si,ri]],[/(webkit|khtml)\/([\w\.]+)/i],[p,y],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],y],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[y,[p,Ee+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[E,"amd64"]],[/(ia32(?=;))/i],[[E,Un]],[/((?:i[346]|x)86)[;\)]/i],[[E,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[E,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[E,"armhf"]],[/windows (ce|mobile); ppc;/i],[[E,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[E,/ower/,a,Un]],[/(sun4\w)[;\)]/i],[[E,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[E,Un]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[d,dt],[g,V]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,dt],[g,k]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[d,M],[g,k]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,M],[g,V]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,ye],[g,V]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[c,[d,ye],[g,k]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,_t],[g,k]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,_t],[g,V]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[g,k]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[g,k]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[g,k]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,Ve],[g,k]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,Ve],[g,V]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,Be],[g,V]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,Be],[g,k]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[g,V]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[g,k]],[/(pixel c)\b/i],[c,[d,_e],[g,V]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,_e],[g,k]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,Je],[g,k]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,Je],[g,V]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[g,k]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,O],[g,V]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,O],[g,k]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[g,V]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,J],[g,k]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,D],[g,V]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,D],[g,k]],[/(nexus 9)/i],[c,[d,"HTC"],[g,V]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[g,k]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[g,V]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[g,k]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,"Sharp"],[g,k]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[g,k]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[g,V]],[/(surface duo)/i],[c,[d,pt],[g,V]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[g,k]],[/(u304aa)/i],[c,[d,"AT&T"],[g,k]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[g,k]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[g,V]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[g,V]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[g,V]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[g,V]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[g,V]],[/\b(k88) b/i],[c,[d,"ZTE"],[g,V]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[g,k]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[g,k]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[g,V]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[g,V]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[g,V]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[g,V]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[g,V]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[g,k]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[g,k]],[/\b(ph-1) /i],[c,[d,"Essential"],[g,k]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[g,V]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[g,V]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[g,V]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[g,V]],[/(sprint) (\w+)/i],[d,c,[g,k]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,pt],[g,k]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,ot],[g,V]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,ot],[g,k]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[g,w]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[g,w]],[/(playstation [345portablevi]+)/i],[c,[d,Je],[g,w]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,pt],[g,w]],[/smart-tv.+(samsung)/i],[d,[g,F]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,dt],[g,F]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,Be],[g,F]],[/(apple) ?tv/i],[d,[c,M+" TV"],[g,F]],[/crkey/i],[[c,$+"cast"],[d,_e],[g,F]],[/droid.+aft(\w)( bui|\))/i],[c,[d,O],[g,F]],[/\(dtv[\);].+(aquos)/i],[c,[d,"Sharp"],[g,F]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,an],[c,an],[g,F]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[g,F]],[/((pebble))app/i],[d,c,[g,N]],[/droid.+; (glass) \d/i],[c,[d,_e],[g,N]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,ot],[g,N]],[/(quest( 2)?)/i],[c,[d,Et],[g,N]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[g,P]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[g,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[g,V]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[g,V]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[g,k]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[y,[p,de+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[y,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[p,y],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[y,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,y],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[y,si,On]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[y,si,On]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[y,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[y,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[y,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,y],[/\(bb(10);/i],[y,[p,J]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[y,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[y,[p,Ee+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[y,[p,"webOS"]],[/crkey\/([\d\.]+)/i],[y,[p,$+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[p,"Chromium OS"],y],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,y],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],y],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[p,y]]},ui=o(function(Sn,un){if(typeof Sn===t&&(un=Sn,Sn=u),!(this instanceof ui))return new ui(Sn,un).getResult();var bn=Sn||(typeof h!==e&&h.navigator&&h.navigator.userAgent?h.navigator.userAgent:a),Ot=un?Mt(Gi,un):Gi;return this.getBrowser=function(){var En={};return En[p]=u,En[y]=u,Gn.call(En,bn,Ot.browser),En.major=ni(En.version),En},this.getCPU=function(){var En={};return En[E]=u,Gn.call(En,bn,Ot.cpu),En},this.getDevice=function(){var En={};return En[d]=u,En[c]=u,En[g]=u,Gn.call(En,bn,Ot.device),En},this.getEngine=function(){var En={};return En[p]=u,En[y]=u,Gn.call(En,bn,Ot.engine),En},this.getOS=function(){var En={};return En[p]=u,En[y]=u,Gn.call(En,bn,Ot.os),En},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return bn},this.setUA=function(En){return bn=typeof En===n&&En.length>x?an(En,x):En,this},this.setUA(bn),this},"UAParser");ui.VERSION=m,ui.BROWSER=ze([p,y,r]),ui.CPU=ze([E]),ui.DEVICE=ze([c,d,g,w,k,F,V,N,P]),ui.ENGINE=ui.OS=ze([p,y]),typeof l!==e?(typeof j!==e&&j.exports&&(l=j.exports=ui),l.UAParser=ui):i==="function"&&f("PDX0")?(S=function(){return ui}.call(l,f,l,j),S!==u&&(j.exports=S)):typeof h!==e&&(h.UAParser=ui);var Fi=typeof h!==e&&(h.jQuery||h.Zepto);if(Fi&&!Fi.ua){var Hi=new ui;Fi.ua=Hi.getResult(),Fi.ua.get=function(){return Hi.getUA()},Fi.ua.set=function(Sn){Hi.setUA(Sn);var un=Hi.getResult();for(var bn in un)Fi.ua[bn]=un[bn]}}})(typeof window=="object"?window:this)},K5tc:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerAction=void 0;var S;(function(h){h[h.Connect=0]="Connect",h[h.FinishConnecting=1]="FinishConnecting",h[h.Update=2]="Update",h[h.FinishUpdating=3]="FinishUpdating",h[h.Reconnect=4]="Reconnect",h[h.Disconnect=5]="Disconnect",h[h.Fail=6]="Fail",h[h.FinishDisconnecting=7]="FinishDisconnecting"})(S=l.SessionStateControllerAction||(l.SessionStateControllerAction={})),l.default=S},K7TJ:function(j,l,f){"use strict";function S(h){for(var u=-1,m=h==null?0:h.length,a={};++u<m;){var s=h[u];a[s[0]]=s[1]}return a}o(S,"fromPairs"),l.a=S},KCGh:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u,m,a,s){this.sequenceNumber=u,this.message=m,this.timestampMs=a,this.logLevel=s}},"Log");l.default=S},KEX5:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("K4CH"),m=f("crgu"),a=h(f("HK1f")),s=h(f("pewp")),i=h(f("V2kw")),e=h(f("F7zz")),t=h(f("ac3q")),n=h(f("iAlb"));let r=o(class Bl{addObserver(p){this.observerSet.add(p)}removeObserver(p){this.observerSet.delete(p)}forEachObserver(p){for(const g of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(g)&&p(g)})}publishEvent(p,g){return S(this,void 0,void 0,function*(){const d=Date.now();this.meetingHistoryStates.push({name:p,timestampMs:d});const y=Object.freeze(Object.assign(this.getAttributes(d),g));this.forEachObserver(E=>{E.eventDidReceive(p,y)}),this.reportEvent(p,d,g)})}reportEvent(p,g,d){var y;return S(this,void 0,void 0,function*(){let E;try{d&&(E=n.default(d)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(g,p,E)}catch(w){this.logger.error(`Error reporting event ${w}`)}})}setupEventReporter(p,g,d){if(d)this._eventReporter=d;else if(p.urls){const y=p.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:w,joinToken:k}}=p,V=new i.default(E,w,k),F=new a.default(V,y);this._eventReporter=new s.default(F,g)}}}getAttributes(p){var g,d;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((g=this.parserResult)===null||g===void 0?void 0:g.os.name)||Bl.UNAVAILABLE,osVersion:((d=this.parserResult)===null||d===void 0?void 0:d.os.version)||Bl.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:p}}get eventReporter(){return this._eventReporter}destroy(){return S(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(p,g,d){var y,E,w,k,V,F,N;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=g,this.configuration=p,this.setupEventReporter(p,g,d);try{this.parserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null}catch(P){this.logger.error(P.message)}this.browserMajorVersion=((w=(E=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||E===void 0?void 0:E.version)===null||w===void 0?void 0:w.split(".")[0])||Bl.UNAVAILABLE,this.browserName=((k=this.parserResult)===null||k===void 0?void 0:k.browser.name)||Bl.UNAVAILABLE,this.browserVersion=((V=this.parserResult)===null||V===void 0?void 0:V.browser.version)||Bl.UNAVAILABLE,this.deviceName=[((F=this.parserResult)===null||F===void 0?void 0:F.device.vendor)||"",((N=this.parserResult)===null||N===void 0?void 0:N.device.model)||""].join(" ").trim()||Bl.UNAVAILABLE}},"DefaultEventController");l.default=r,r.UNAVAILABLE="Unavailable"},KJDN:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class extends Error{constructor(u,m){super(m||"Error fetching device."),this.cause=u,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=S},KSud:function(j,l,f){"use strict";function S(h){var u=h;return u.placeholder}o(S,"getHolder"),l.a=S},Ka3M:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptLanguageWithScore");l.default=S},KsuK:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return S(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=h},KvYa:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(d,y,E,w){function k(V){return V instanceof E?V:new E(function(F){F(V)})}return o(k,"adopt"),new(E||(E=Promise))(function(V,F){function N(O){try{x(w.next(O))}catch(M){F(M)}}o(N,"fulfilled");function P(O){try{x(w.throw(O))}catch(M){F(M)}}o(P,"rejected");function x(O){O.done?V(O.value):k(O.value).then(N,P)}o(x,"step"),x((w=w.apply(d,y||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=f("EkyC"),u=o(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=o(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=y.match(/Safari\//),w=y.match(/Chrom(?:e|ium)\//);return!!(E&&!w)},"isSafari");l.isSafari=m;const a=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(d)?!1:u(d)?(p(d)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const s=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return S(void 0,void 0,void 0,function*(){if(!l.supportsWorker(d,E))return!1;const w=`${y.paths.workers}worker-v1.js`;try{const k=yield h.loadWorker(w,"VoiceFocusTestWorker",y,E);try{k.terminate()}catch(V){E==null||E.debug("Failed to terminate worker.",V)}return!0}catch(k){return E==null||E.info("Failed to fetch and instantiate test worker",k),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=s;const i=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.Worker}catch(E){return y==null||y.info("Does not support Worker",E),!1}},"supportsWorker");l.supportsWorker=i;const e=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.AudioWorklet&&!!d.AudioWorkletNode}catch(E){return y==null||y.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.WebAssembly&&(!!d.WebAssembly.compile||!!d.WebAssembly.compileStreaming)}catch(E){return y==null||y.info("Does not support WASM",E),!1}},"supportsWASM");l.supportsWASM=t;const n=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!d.SharedArrayBuffer&&(!!y.chrome||!!d.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=n;const r=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=d.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(w){return y==null||y.info("Does not support WASM streaming compilation",w),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=r;const c=90,p=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!d.chrome)return}catch{}const y=d.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),g=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const E=p(d);return E&&E<c?(y==null||y.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=g},KyYT:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.None=l.Some=l.Maybe=void 0;let S=o(class{static of(a){return a==null?u.of():h.of(a)}},"Maybe");l.Maybe=S;let h=o(class TS{map(a){return S.of(a(this.value))}flatMap(a){return a(this.value)}get(){return this.value}getOrElse(a){return this.value}defaulting(a){return S.of(this.getOrElse(a))}static of(a){if(a==null)throw new Error("value is ${value}");return new TS(a)}constructor(a){this.value=a,this.isSome=!0,this.isNone=!1}},"Some");l.Some=h;let u=o(class Hc{get(){throw new Error("value is null")}getOrElse(a){return a}map(a){return new Hc}flatMap(a){return new Hc}defaulting(a){return S.of(this.getOrElse(a))}static of(){return new Hc}constructor(){this.isSome=!1,this.isNone=!0}},"None");l.None=u},"L+i+":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("yQ3g")),m=h(f("aVV0"));let a=o(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return S(this,void 0,void 0,function*(){const i=new u.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},LDIi:function(j,l,f){"use strict";j.exports=s;var S=f("j4TH"),h,u=S.LongBits,m=S.utf8;function a(c,p){return RangeError("index out of range: "+c.pos+" + "+(p||1)+" > "+c.len)}o(a,"indexOutOfRange");function s(c){this.buf=c,this.pos=0,this.len=c.length}o(s,"Reader");var i=typeof Uint8Array<"u"?o(function(p){if(p instanceof Uint8Array||Array.isArray(p))return new s(p);throw Error("illegal buffer")},"create_typed_array"):o(function(p){if(Array.isArray(p))return new s(p);throw Error("illegal buffer")},"create_array"),e=o(function(){return S.Buffer?o(function(g){return(s.create=o(function(y){return S.Buffer.isBuffer(y)?new h(y):i(y)},"create_buffer"))(g)},"create_buffer_setup"):i},"create");s.create=e(),s.prototype._slice=S.Array.prototype.subarray||S.Array.prototype.slice,s.prototype.uint32=o(function(){var p=4294967295;return o(function(){if(p=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(p=(p|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return p;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return p},"read_uint32")},"read_uint32_setup")(),s.prototype.int32=o(function(){return this.uint32()|0},"read_int32"),s.prototype.sint32=o(function(){var p=this.uint32();return p>>>1^-(p&1)|0},"read_sint32");function t(){var c=new u(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw a(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,c}if(this.len-this.pos>4){for(;p<5;++p)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;p<5;++p){if(this.pos>=this.len)throw a(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}o(t,"readLongVarint"),s.prototype.bool=o(function(){return this.uint32()!==0},"read_bool");function n(c,p){return(c[p-4]|c[p-3]<<8|c[p-2]<<16|c[p-1]<<24)>>>0}o(n,"readFixed32_end"),s.prototype.fixed32=o(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)},"read_fixed32"),s.prototype.sfixed32=o(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)|0},"read_sfixed32");function r(){if(this.pos+8>this.len)throw a(this,8);return new u(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}o(r,"readFixed64"),s.prototype.float=o(function(){if(this.pos+4>this.len)throw a(this,4);var p=S.float.readFloatLE(this.buf,this.pos);return this.pos+=4,p},"read_float"),s.prototype.double=o(function(){if(this.pos+8>this.len)throw a(this,4);var p=S.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,p},"read_double"),s.prototype.bytes=o(function(){var p=this.uint32(),g=this.pos,d=this.pos+p;if(d>this.len)throw a(this,p);if(this.pos+=p,Array.isArray(this.buf))return this.buf.slice(g,d);if(g===d){var y=S.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,g,d)},"read_bytes"),s.prototype.string=o(function(){var p=this.bytes();return m.read(p,0,p.length)},"read_string"),s.prototype.skip=o(function(p){if(typeof p=="number"){if(this.pos+p>this.len)throw a(this,p);this.pos+=p}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),s.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},s._configure=function(c){h=c,s.create=e(),h._configure();var p=S.Long?"toLong":"toNumber";S.merge(s.prototype,{int64:o(function(){return t.call(this)[p](!1)},"read_int64"),uint64:o(function(){return t.call(this)[p](!0)},"read_uint64"),sint64:o(function(){return t.call(this).zzDecode()[p](!1)},"read_sint64"),fixed64:o(function(){return r.call(this)[p](!0)},"read_fixed64"),sfixed64:o(function(){return r.call(this)[p](!1)},"read_sfixed64")})}},LEQH:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("GtHv")),m=f("vjEy");let a=o(class extends u.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:n,targetCanvas:r}=this,{width:c,height:p}=r;if(!e||!t){n.clearRect(0,0,c,p);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),n.save(),n.clearRect(0,0,c,p),n.drawImage(this.scaledCanvas,0,0,c,p),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,p),n.globalCompositeOperation="destination-over",n.drawImage(this.blurCanvas,0,0,c,p),n.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return S(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},LIUS:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("XCDq"),u=S(f("0LIx")),m=S(f("OEM7"));let a=o(class ka extends u.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let n=0;n<i.length;n++){const r=i[n].maxBitrate/1e3,c=i[n].maxFramerate;if(!e||n===this._localStreamInfos.length){e=!1;const p=new m.default;p.maxBitrateKbps=r,p.maxFrameRate=c,p.disabledByUplinkPolicy=r===0,p.rid=i[n].rid,r!==0&&(p.timeEnabled=Date.now()),this._localStreamInfos.push(p),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&r>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=r,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=r===0,this._localStreamInfos[t].disabledByUplinkPolicy===!0&&(this._localStreamInfos[t].disabledByWebRTC=!1),t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of i.bitrates)e.add(n.sourceStreamId),this.streamIdToBitrateKbpsMap.set(n.sourceStreamId,this.convertBpsToKbps(n.avgBitrateBps));for(const n of t)e.has(n)||(this.streamIdToBitrateKbpsMap.get(n)===ka.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(n,ka.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(n,ka.NOT_SENDING_STREAM_BITRATE));for(let n=0;n<this._localStreamInfos.length;n++){this._localStreamInfos[n].disabledByWebRTC=!1;const r=this._localStreamInfos[n].streamId;this._localStreamInfos[n].disabledByUplinkPolicy||(this.streamIdToBitrateKbpsMap.has(r)?this.streamIdToBitrateKbpsMap.get(r)===ka.NOT_SENDING_STREAM_BITRATE&&this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>ka.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0):this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>ka.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0))}this._lastBitRateMsgTime=Date.now(),this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByWebRTC=${e.disabledByWebRTC} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of this.currentIndex.sources)n.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(n.streamId),this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,ka.UNSEEN_STREAM_BITRATE));for(const n of t)e.has(n)||this.streamIdToBitrateKbpsMap.delete(n)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,ka.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(i){super(i),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map,this._lastBitRateMsgTime=Date.now()}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},LK2A:function(j,l,f){"use strict";f.r(l),function(S){f.d(l,"AutocompleteActions",function(){return ln}),f.d(l,"CardRenderType",function(){return Si}),f.d(l,"CollabApi",function(){return Sn}),f.d(l,"CollabPopoverDismissSource",function(){return Fe}),f.d(l,"CollabUrlType",function(){return Qi}),f.d(l,"CommentFocusTarget",function(){return Kt}),f.d(l,"CommentLevel",function(){return yt}),f.d(l,"DocBlockStyle",function(){return Yi}),f.d(l,"DocInlineStyle",function(){return gi}),f.d(l,"EmbeddedMoveDirection",function(){return gr}),f.d(l,"EmbeddedObjectType",function(){return Ci}),f.d(l,"EmbeddedUIAttributes",function(){return lr}),f.d(l,"EmbeddedUiAction",function(){return Zn}),f.d(l,"EmbeddedUiContext",function(){return dn}),f.d(l,"ErrorSource",function(){return Zi}),f.d(l,"Feature",function(){return qe}),f.d(l,"FullTableModification",function(){return li}),f.d(l,"GetSlackObjectFailureReason",function(){return Nt}),f.d(l,"GrafterUrls",function(){return e}),f.d(l,"NavigationTypeMetric",function(){return cr}),f.d(l,"SectionInsertionType",function(){return _r}),f.d(l,"ShortcutModifier",function(){return vt}),f.d(l,"SlackObjectActionType",function(){return st}),f.d(l,"SlackObjectType",function(){return lt}),f.d(l,"SlackShortcutCommandType",function(){return fn}),f.d(l,"SlackShortcutMetricSource",function(){return Bt}),f.d(l,"TablePart",function(){return tr}),f.d(l,"TablePartModificationType",function(){return ai}),f.d(l,"TableSelectionMergeAction",function(){return Or}),f.d(l,"TableSelectionModification",function(){return wr}),f.d(l,"TemplateControlAction",function(){return Jn}),f.d(l,"TemplateTriggerType",function(){return Xi}),f.d(l,"TemplateType",function(){return wn}),f.d(l,"ToastMessageContext",function(){return Re}),f.d(l,"UnfurlType",function(){return zr});class h{constructor(){this.o=!1,this.l=[]}run(){this.o=!0;const ue=this.l;this.l=[];for(let Me=0;Me<ue.length;Me++)ue[Me]()}add(ue){this.o?ue():this.l.push(ue)}}o(h,"t");var u,m;(function(z){var ue;(ue=z.Op||(z.Op={}))[ue.DID_INITIALIZE=8]="DID_INITIALIZE",ue[ue.DID_FAIL_TO_INITIALIZE=9]="DID_FAIL_TO_INITIALIZE"})(u||(u={})),function(z){var ue;(ue=z.Op||(z.Op={}))[ue.INIT=0]="INIT"}(m||(m={}));class a{constructor(ue){this._=new Map,this.u=null,this.destinationFn=ue}setTransportHook(ue){this.u=ue}tearDown(){}addHandler(ue,Me){this._.has(ue)&&this.logError(`Already had handler for op ${ue} will overwrite.`),this._.set(ue,Me)}getHandler(ue){const Me=this._.get(ue);return Me?this.u?(Le,Ye)=>{var St;return(St=this.u)===null||St===void 0||St.call(this,ue,Le,i.INCOMING),Me(Le,Ct=>{var Tt;return(Tt=this.u)===null||Tt===void 0||Tt.call(this,ue,Ct,i.OUTGOING_REPLY),Ye(Ct)})}:Me:null}invoke(ue,Me,Le){var Ye;if((Ye=this.u)===null||Ye===void 0||Ye.call(this,ue,Me,i.OUTGOING),this.u&&Le){const Tt=Le;Le=o(Ke=>{var Pt;(Pt=this.u)===null||Pt===void 0||Pt.call(this,ue,Ke,i.INCOMING_REPLY),Tt(Ke)},"i")}const St=this.destinationFn().getHandler(ue);if(!St)return void this.logError(`Bridge transport doesn't have handler for op ${ue}`);let Ct;try{Ct=St(Me,Tt=>{Le?Le(Tt):this.logError(`Invoke response received without callback for op ${ue}`)})}catch{s(ue,Me)}Ct instanceof Promise&&Ct.catch(Tt=>s(ue,Me))}logError(ue){}}o(a,"s");let s=o((z,ue,Me)=>{let Le="";try{Le=JSON.stringify(ue)}catch{Le="(Unserializable message)"}},"n");var i,e,t;(function(z){z[z.INCOMING=1]="INCOMING",z[z.INCOMING_REPLY=2]="INCOMING_REPLY",z[z.OUTGOING=3]="OUTGOING",z[z.OUTGOING_REPLY=4]="OUTGOING_REPLY"})(i||(i={})),function(z){z.CONTROLLER_CSS="https://quip.codes/-/static/less/stylesheet/-?retina=True&mode=normal&less=collab%2Fcontroller.less",z.CONTROLLER_JS="https://slackdocs.codes:3000/ts/src/collab/controller/bundle.ts",z.EMBEDDED_JS="https://slackdocs.codes/-/static-script-files?grafted=True&resource_bundle_name=collab_embedded"}(e||(e={})),function(z){z.BRIDGE_TRANSPORT_SET="bridge-transport-set",z.BRIDGE_TRANSPORT_READY="bridge-transport-ready",z.HANDLER_REGISTERED="handler-registered",z.HANDLER_REGISTRATION_FINISHED="handler_registration_finished",z.MESSAGE_SENT="message_sent",z.MESSAGE_HANDLED="message-handled",z.INIT_SENT="init_sent",z.INIT_RECEIVED="init_received",z.DID_INIT_SENT="did_init_sent",z.DID_INIT_RECEIVED="did_init_received",z.BRIDGE_OPEN="bridge-open",z.ERROR="error",z.SYSTEMJS_LOADED="systemjs-loaded",z.CONTROLLER_SYSTEMJS_MODULE_IMPORTED="controller-systemjs-imported",z.CONTROLLER_INIT_DATA_FETCHED="controller-init-data-fetched",z.CONTROLLER_RESOURCE_DATA_FETCHED="controller-resource-data-fetched",z.PROBE="probe",z.OTHER="misc"}(t||(t={}));class n{constructor(ue){this.T=ue,this.O=[],this.I=[],this.S=[],this.A=[],this.N=[],this.L=Date.now(),this.onlyBefore("Handler registered late",t.HANDLER_REGISTERED,[t.HANDLER_REGISTRATION_FINISHED]),this.onlyAfter("Message sent before bridge open",t.MESSAGE_SENT,[t.BRIDGE_OPEN]),this.onlyAfter("Message handled before bridge open",t.MESSAGE_HANDLED,[t.BRIDGE_OPEN])}getTimeoutForPromise(){return n.TIMEOUT_FOR_PROMISE}fireEvent(ue,Me=null){if(this.I.filter(Ye=>Ye.beforeEvent==ue).forEach(Ye=>{Ye.afterEvents.some(St=>this.O.includes(St))&&Ye.message&&this.m(`${this.T}: ${Ye.message}`)}),this.S.filter(Ye=>Ye.afterEvent==ue).forEach(Ye=>{Ye.beforeEvents.some(St=>!this.O.includes(St))&&Ye.message&&this.m(`${this.T}: ${Ye.message}`)}),ue!=t.HANDLER_REGISTERED&&this.m(Me?Promise.resolve(Me).then(Ye=>`${ue}: ${Ye}`):ue),this.O.includes(ue))return;this.O.push(ue);const Le=[];this.A=this.A.filter(Ye=>!Ye.events.every(St=>this.O.includes(St))||(Le.push(Ye),!1)),Le.forEach(Ye=>{Ye.description&&this.m(`${ue} -> ${Ye.description}`),Ye.callback()})}after(ue,Me,Le=null){ue.every(Ye=>this.O.includes(Ye))?Me():(Le&&this.m(`${Le} deferred`),this.A.push({events:ue,description:Le,callback:Me}))}onlyBefore(ue,Me,Le){this.I.push({beforeEvent:Me,afterEvents:Le,message:ue})}onlyAfter(ue,Me,Le){this.S.push({beforeEvents:Le,afterEvent:Me,message:ue})}m(ue){if(this.N.length>n.MAX_INIT_LOG)return;const Me=Date.now()-this.L,Le=Promise.resolve(ue);this.N.push({timestamp:Me,message:Le}),Le.then(Ye=>{console.debug(`${this.T}: ${Ye}`)})}getInitLog(ue){const Me=(ue?this.N.slice(0,ue):this.N).map(async Le=>({t:Le.timestamp,e:await Le.message}));return Promise.all(Me).then(Le=>({id:this.T,log:Le}))}}o(n,"l"),n.MAX_INIT_LOG=50,n.TIMEOUT_FOR_PROMISE=3e4;function r(z,{logCallback:ue=o(()=>{},"e"),timeoutMillis:Me=3e4,name:Le="Unnamed",context:Ye=""}={}){return new Promise((St,Ct)=>{let Tt=window.setTimeout(()=>{Tt=null,ue(`${Le} promise timed out: ${Ye}`),Ct(new Error(`${Le} promise timed out`))},Me);const Ke=o(()=>{Tt&&(clearTimeout(Tt),Tt=null)},"l");z.then(Pt=>{Tt?(Ke(),St(Pt)):ue(`${Le} promise resolved after timeout: ${Ye}`)}).catch(Pt=>{Tt?(Ke(),Ct(Pt)):ue(`${Le} promise rejected after timeout: ${Ye}`)})})}o(r,"_");function c(z,ue,Me,Le,Ye){const{span:St,closeSpanFn:Ct}=Le.createBasicTraceSpan(Ye,Me,{[Ti.URL]:z}),{closeSpanFn:Tt}=Le.createBasicTraceSpan(St,$n.HTTP_FETCH_HEADER),Ke=new AbortController,Pt=setTimeout(()=>{Ke.abort()},Le.bridgeInit.getTimeoutForPromise());return fetch(z,Object.assign({signal:Ke.signal},ue)).catch(Dt=>{throw Tt(Dt),Error(`${Me} fetch failed: ${Dt}`)}).then(Dt=>{if(clearTimeout(Pt),!Dt.ok)return Tt(new Error(`returned ${Dt.status}`)),g(Le,Me,Dt,St).then(pn=>{throw Error(pn)});Tt();const{closeSpanFn:Rn}=Le.createBasicTraceSpan(St,$n.HTTP_FETCH_CONTENT,{[Ti.URL]:z});return Dt.text().catch(pn=>{throw Rn(pn),pn}).then(pn=>{Rn();const{closeSpanFn:zn}=Le.createBasicTraceSpan(St,$n.JSON_PARSE);try{const di=JSON.parse(pn);return zn(),di}catch(di){throw zn(new Error(`${di}`)),Le.bridgeInit.fireEvent(t.ERROR,g(Le,Me,Dt,null)),di}})}).finally(()=>{Ct()})}o(c,"h");function p(z,ue,Me,Le){const Ye=new AbortController,St=setTimeout(()=>{Ye.abort()},Me.bridgeInit.getTimeoutForPromise());Me.bridgeInit.fireEvent(t.OTHER,`${ue} prefetch start`);const{span:Ct,closeSpanFn:Tt}=Me.createBasicTraceSpan(Le,$n.MODULE_PREFETCH,{[Ti.URL]:z}),{closeSpanFn:Ke}=Me.createBasicTraceSpan(Ct,$n.HTTP_FETCH_HEADER);return fetch(z,{method:"GET",mode:"cors",cache:"default",signal:Ye.signal}).catch(Pt=>{throw Ke(Pt),Error(`${ue} fetch failed: ${Pt}`)}).then(Pt=>{if(!Pt.ok)return Ke(new Error(`Returned ${Pt.status}`)),g(Me,ue,Pt,Ct).then(Rn=>{throw Error(Rn)});Ke();const{closeSpanFn:Dt}=Me.createBasicTraceSpan(Ct,$n.HTTP_FETCH_CONTENT);return Pt.text().then(()=>{Dt(),Me.bridgeInit.fireEvent(t.OTHER,`${ue} prefetch ok`)}).catch(Rn=>{throw Dt(Rn),Rn})}).finally(()=>{Tt(),clearTimeout(St)})}o(p,"c");function g(z,ue,Me,Le){const{closeSpanFn:Ye}=z.createBasicTraceSpan(Le,$n.HTTP_FETCH_CONTENT);return Me.text().then(St=>{const Ct=function(Ke){if(!Ke||Ke.trim().length==0)return"response body empty";try{const Pt=new DOMParser().parseFromString(Ke,"text/html").documentElement.textContent;if(Pt&&Pt.trim().length>0)return Pt.trim().replace(/\s+/g," ").slice(0,50)}catch{}return Ke.trim().slice(0,50)}(St),Tt=`${ue} fetch returned ${Me.status}: ${Ct}`;return Ye(new Error(Tt)),Tt}).catch(St=>{const Ct=`${ue} fetch returned ${Me.status}: response body unavailable (${St})`;return Ye(new Error(Ct)),Ct})}o(g,"a");function d(z,ue,Me){let Le=null;const{id:Ye,promise:St}=function(Ke){const Pt=Symbol(),Dt=new Promise(Rn=>{D.push({id:Pt,callback:pn=>{Ke(),Rn(pn)}})});return J||(J=!0,window._collabInit=Rn=>{var pn;(pn=D.shift())===null||pn===void 0||pn.callback(Rn)}),{promise:Dt,id:Pt}}(()=>{var Ke,Pt;(Pt=(Ke=z==null?void 0:z.platformDelegate)===null||Ke===void 0?void 0:Ke.endTraceOrSpan)===null||Pt===void 0||Pt.call(Ke,Le)}),Ct=St.then(Ke=>(z.bridgeInit.fireEvent(t.OTHER,"_collabInit called"),Ke));return function(Ke,Pt,Dt){return Pt.then(Rn=>{if(Rn.module_loader_url==null)throw Error("No module loader URL.  Server likely isn't in SystemJS mode.");const{span:pn,closeSpanFn:zn}=Ke.createBasicTraceSpan(Dt,$n.LOAD_CONTROLLER),di=Ke.config.useGraftedMode?e.CONTROLLER_JS:Rn.controller_entry_module_url;return function(Ri,Pi,fi,hi){fi&&(M=fi);const Cn=Ri.bridgeInit;if(F){const Ui=V;return Cn.fireEvent(t.OTHER,`Collab ${Ui} is loading systemjs, reusing the promise`),F.then(()=>{Cn.fireEvent(t.OTHER,`Systemjs promise reused from collab ${Ui} succeeded`)}).catch(Rr=>{throw Cn.fireEvent(t.ERROR,`Systemjs promise reused from collab ${Ui} failed: ${Rr}`),Rr})}let zi,Vi=null;if(N())Cn.fireEvent(t.OTHER,"systemjs already loaded, running prepareImport"),Vi="System.prepareImport() promise resolved",zi=r(System.prepareImport(!0),{name:"System.prepareImport",timeoutMillis:Cn.getTimeoutForPromise()});else{Cn.fireEvent(t.OTHER,"No SystemJS found, loading it");const{span:Ui,closeSpanFn:Rr}=Ri.createBasicTraceSpan(hi,$n.LOAD_SYSTEMJS,{[Ti.JS_PREFETCH_ENABLED]:"true",[Ti.URL]:Pi});Vi="systemjs script tag onload fired",zi=function(Ii,Sr,Xn){return p(Sr,"systemjs-module-loader",Ii,Xn).then(()=>{const vi=document.createElement("script");return new Promise((pi,_i)=>{const{closeSpanFn:Yn}=Ii.createBasicTraceSpan(Xn,$n.SCRIPT_TAG);vi.src=Sr,vi.defer=!0,vi.crossOrigin="anonymous",vi.onload=()=>{Yn(),pi()},vi.onerror=Ht=>{const nr=Error(`systemjs onerror called: ${Ht}`);Yn(nr),_i(nr)},document.body.appendChild(vi)}).then(()=>{if(!N())throw Error("SystemJS not found after it was loaded")}).catch(pi=>{throw typeof System=="object"&&(delete window.System,Ii.bridgeInit.fireEvent(t.OTHER,"Cleaned up systemjs global object")),vi.onload=null,vi.onerror=null,vi.parentNode&&(vi.parentNode.removeChild(vi),Ii.bridgeInit.fireEvent(t.OTHER,"Cleaned up systemjs loader script tag")),pi})})}(Ri,Pi,Ui).finally(()=>{Rr()})}return V=Ri.id,F=zi.then(()=>{Cn.fireEvent(t.SYSTEMJS_LOADED,Vi)}).finally(()=>{F=null,V=null}),F}(Ke,Rn.module_loader_url,Rn.import_map,pn).then(()=>{var Ri,Pi;return w(di,(Pi=(Ri=Rn.import_map)===null||Ri===void 0?void 0:Ri.imports)!==null&&Pi!==void 0?Pi:{},Ke,pn)}).finally(()=>{zn()})})}(z,ue,Me).then(()=>{var Ke,Pt,Dt;return Le=(Dt=(Pt=(Ke=z==null?void 0:z.platformDelegate)===null||Ke===void 0?void 0:Ke.startSpan)===null||Pt===void 0?void 0:Pt.call(Ke,Me,$n.AWAIT_CALLBACK))!==null&&Dt!==void 0?Dt:null,r(Ct,{name:"_collabInit callback",timeoutMillis:z.bridgeInit.getTimeoutForPromise()}).catch(Rn=>{var pn,zn;throw(zn=(pn=z==null?void 0:z.platformDelegate)===null||pn===void 0?void 0:pn.endTraceOrSpan)===null||zn===void 0||zn.call(pn,Le,{[Ti.ERROR]:`${Rn}`}),Rn})}).catch(Ke=>{var Pt;throw Pt=Ye,D=D.filter(Dt=>Dt.id!==Pt),Ke})}o(d,"d");let y=null,E=null;function w(z,ue,Me,Le){var Ye;const St=Me.bridgeInit;if(E){const Pt=y;return St.fireEvent(t.OTHER,`Collab ${Pt} is loading the controller, waiting for it to finish...`),E.then(()=>(St.fireEvent(t.OTHER,`Collab ${Pt} module loading complete`),w(z,ue,Me,Le))).catch(Dt=>(St.fireEvent(t.OTHER,`Collab ${Pt} module loading failed`),w(z,ue,Me,Le)))}if(St.fireEvent(t.OTHER,"Loading controller module"),System.fork===void 0)return Promise.reject(Error("SystemJS is missing the fork() method"));if(Me.config.useSystemJsSharedFork&&!O){const Pt=((Ye=Object.entries(ue).find(([Dt])=>Dt.endsWith("-ancillary.js")))===null||Ye===void 0?void 0:Ye[1])||null;O=Pt?System.sharedFork([Pt]):null}const Ct=System.fork(ue,O);St.fireEvent(t.OTHER,`controller module${System.isAlreadyLoaded(z)?" ":" not "}in systemjs cache`);const{span:Tt,closeSpanFn:Ke}=Me.createBasicTraceSpan(Le,$n.LOAD_CONTROLLER_MODULE,{[Ti.JS_PREFETCH_ENABLED]:"true",[Ti.URL]:z});return E=p(z,"controller-module",Me,Tt).then(()=>{const{closeSpanFn:Pt}=Me.createBasicTraceSpan(Tt,$n.SYSTEMJS_IMPORT_MODULE,{[Ti.URL]:z}),Dt=[],Rn=new MutationObserver(pn=>{Dt.push(...k(pn))});return Rn.observe(document.head,{childList:!0}),Ct.import(z).then(()=>{Pt(),St.fireEvent(t.CONTROLLER_SYSTEMJS_MODULE_IMPORTED)}).catch(pn=>{Pt(pn),Dt.push(...k(Rn.takeRecords()));let zn=0;throw Dt.forEach(di=>{di.onload=null,di.onerror=null,di.parentNode&&(di.parentNode.removeChild(di),zn++)}),zn>0&&St.fireEvent(t.OTHER,`Cleaned up ${zn} SystemJS script tags`),System.resetInstantiationCache()&&St.fireEvent(t.OTHER,"SystemJS cache cleared"),pn}).finally(()=>{Rn.disconnect()})}).finally(()=>{Ke(),y=null,E=null}),y=Me.id,E}o(w,"O");function k(z){const ue=[];return z.forEach(Me=>{Me.addedNodes.forEach(Le=>{Le instanceof HTMLScriptElement&&Le.getAttribute("systemjs")==="1"&&ue.push(Le)})}),ue}o(k,"I");let V=null,F=null;function N(){return typeof System=="object"&&typeof System.register=="function"}o(N,"N");function P(){if(!M)return console.warn("No import map data found"),[];const z=M.imports;return!z||typeof z!="object"?(console.warn("Imports property missing from importMapsData"),[]):Object.values(z).filter(ue=>typeof ue=="string"||ue instanceof String)}o(P,"L");const x={};let O,M,D=[],J=!1,q=null;class $ extends a{constructor(ue,Me){super(Me),this.C=ue,this.R=ue.bridgeInit,this.D()}tearDown(){super.tearDown()}p(ue){var Me,Le;console.error("EmbeddedSameOriginBridgeTransport did not load",ue),ue&&console.error(ue.stack),this.R.fireEvent(t.ERROR,`Failure constructing EmbeddedSameOriginBridgeTransport: ${ue}`),(Le=(Me=this.C.config.delegate)===null||Me===void 0?void 0:Me.didFailToInitialize)===null||Le===void 0||Le.call(Me,"exception",ue)}D(){var ue,Me,Le;const Ye=(Le=(Me=(ue=this.C.platformDelegate)===null||ue===void 0?void 0:ue.startTrace)===null||Me===void 0?void 0:Me.call(ue,$n.COLLAB_INIT,{[Ti.CONTROLLER_ID]:`${this.C.id}`}))!==null&&Le!==void 0?Le:null,St=function(Tt,Ke){const Pt=new FormData,{authToken:Dt,userJwt:Rn,getSlackToken:pn,isGov:zn}=Tt.config;Dt&&Pt.append("oauth_token",Dt),Rn&&Pt.append("user_jwt",Rn),pn&&Pt.append("token",pn());const di=Tt.config.xhrWithCredentials===!0?"include":void 0,Ri=c(`${Ji(Tt)}/collab/controller-init?format=map`,{method:"POST",body:Pt,credentials:di},$n.CONTROLLER_INIT,Tt,Ke).then(hi=>(Tt.bridgeInit.fireEvent(t.CONTROLLER_INIT_DATA_FETCHED),hi)),Pi=window.QUIP_VERSION_NAME||"server",fi=new URLSearchParams([["version-name",Pi]]);return Tt.config.language&&fi.append("language-code",Tt.config.language),fi.append("cdn_fallback",`${Tt.getAttemptNumber()}`),zn&&fi.append("serve_gov","1"),q=c(`${Ji(Tt)}/collab/controller-resources?${fi.toString()}`,{method:"GET",credentials:di},$n.CONTROLLER_RESORCES,Tt,Ke).then(hi=>(Tt.bridgeInit.fireEvent(t.CONTROLLER_RESOURCE_DATA_FETCHED),hi)).catch(hi=>(q=null,Tt.bridgeInit.fireEvent(t.ERROR,`controller-resources request failed: ${hi}`),{module_loader_url:null,controller_entry_module_url:null,import_map:null})),Promise.all([Ri,q]).then(hi=>{const[Cn,zi]=hi;return Object.assign(Object.assign({},Cn),zi)})}(this.C,Ye),Ct=d(this.C,St,Ye);Promise.all([Ct,St]).then(Tt=>{var Ke;const Pt=Tt[0],Dt=Tt[1];Pt.main(Dt.init_options,Dt.preserialized,this.C.config.getSlackToken?null:Dt.oauth_token,this.C.config.getSlackToken?null:Dt.oauth_token_expiry,(Ke=this.C.config.getSlackToken)!==null&&Ke!==void 0?Ke:null,Ji(this.C),this.destinationFn(),Dt.js_initializer,Dt.user_id,this.C.config.xhrWithCredentials,this.C.config.enableWebCaching?Dt.web_cache_key:void 0,this.C.config.enableWebCaching?Dt.web_cache_key_version:void 0,this.C.config.requestsAreCors,Dt.body_classes,Dt.css_url,!!this.C.config.useGraftedMode,this.C.config.pathRewriteHook),this.R.fireEvent(t.BRIDGE_TRANSPORT_READY)}).catch(Tt=>this.p(Tt)).finally(()=>{var Tt,Ke;(Ke=(Tt=this.C.platformDelegate)===null||Tt===void 0?void 0:Tt.endTraceOrSpan)===null||Ke===void 0||Ke.call(Tt,Ye)})}logError(ue){this.R.fireEvent(t.ERROR,ue)}}o($,"M");class de{constructor(ue){this.embeddedSide=new $(ue,()=>this.controllerSide),this.controllerSide=new a(()=>this.embeddedSide)}}o(de,"v");function Ee(z,ue){let Me=null;for(const Le of function(Ye){const St=[];for(const Ct of Object.keys(Ye))isNaN(Number(Ct))&&St.push(Ct);return St}(z))z[Le]===ue&&(Me=Le);return Me||(Me=String(ue)),Me+=` (${ue})`,Me}o(Ee,"P");const _e={[i.INCOMING]:"ToEmbedded",[i.OUTGOING]:"FromEmbedded",[i.INCOMING_REPLY]:"ReplyToEmbedded",[i.OUTGOING_REPLY]:"ReplyFromEmbedded"},ye=[u.Op.DID_INITIALIZE,u.Op.DID_FAIL_TO_INITIALIZE],Be=[];class pt{constructor(ue,Me){this.M=ue,this.v=Me,this.N=[],this.P=[],this.U={[_e[i.INCOMING]]:{},[_e[i.OUTGOING_REPLY]]:{},[_e[i.OUTGOING]]:{},[_e[i.INCOMING_REPLY]]:{}}}getHook(){const ue=this.N,Me=this.P,Le=this.U;return(Ye,St,Ct)=>{var Tt,Ke;const Pt={ts:Date.now(),op:Ye,message:St,type:Ct},Dt=gt(Ct,Ye);if((Tt=(Ke=Le[_e[Ct]])[Dt])!==null&&Tt!==void 0||(Ke[Dt]=0),Le[_e[Ct]][Dt]+=1,ue.length>=30)for(Me.push(Pt);Me.length>20;)Me.shift();else ue.push(Pt)}}getReport(ue=!0){var Me;return{collabInstanceId:this.M,collabInstanceTeamId:(Me=this.v)!==null&&Me!==void 0?Me:"not_provided",reportTimestamp:Date.now(),messageCounts:this.U,startupLog:Ve(this.N,ue),recentLog:Ve(this.P,ue)}}}o(pt,"b");function Ve(z,ue=!0){return z.map(Me=>{const Le={op:gt(Me.type,Me.op),type:_e[Me.type]};var Ye,St;return ue&&(Ye=Me.type,St=Me.op,!([i.INCOMING,i.OUTGOING_REPLY].includes(Ye)?ye.includes(St):Be.includes(St)))||(Le.message=Me.message),ue||(Le.ts=Me.ts),Le})}o(Ve,"F");function gt(z,ue){return[i.INCOMING,i.OUTGOING_REPLY].includes(z)?Ee(u.Op,ue):Ee(m.Op,ue)}o(gt,"B");class dt{constructor(ue){this.R=ue.bridgeInit,this.F=function(Me){return new de(Me).embeddedSide}(ue),this.B=new pt(ue.id,ue.config.teamId),this.R.fireEvent(t.BRIDGE_TRANSPORT_SET),this.F.setTransportHook(this.B.getHook())}init(ue){this.R.after([t.BRIDGE_TRANSPORT_SET,t.BRIDGE_TRANSPORT_READY,t.HANDLER_REGISTRATION_FINISHED],()=>{this.invoke(m.Op.INIT,ue),this.R.fireEvent(t.INIT_SENT)})}tearDown(){this.F.tearDown()}invoke(ue,Me){const Le=ue==m.Op.INIT,Ye=o(()=>{this.F.invoke(ue,Me),Le||this.R.fireEvent(t.MESSAGE_SENT,`Op ${ue}`)},"n");Le?Ye():this.R.after([t.BRIDGE_OPEN],Ye,`Send op ${ue}`)}addHandler(ue,Me){this.F.addHandler(ue,ue===u.Op.DID_INITIALIZE?Me:Le=>{this.R.after([t.BRIDGE_OPEN],()=>{Me(Le),this.R.fireEvent(t.MESSAGE_HANDLED,`Op ${ue}`)},`Handle op ${ue}`)})}getDebugReport(ue=!0){return this.B.getReport(ue)}}o(dt,"G");class Je{constructor(ue,Me){this.G=new WeakMap,this.H=ue,this.K=Me}get(){const ue=this.H.get();return this.$(ue)}getAsync(){return this.H.getAsync().then(ue=>this.$(ue))}listen(ue){let Me=this.G.get(ue);Me||(Me=o((Le,Ye)=>{ue(this.$(Le),this.K(Ye))},"e"),this.G.set(ue,Me)),this.H.listen(Me)}once(ue){let Me=this.G.get(ue);Me||(Me=o((Le,Ye)=>{ue(this.$(Le),this.K(Ye))},"e"),this.G.set(ue,Me)),this.H.once(Me)}unlisten(ue){const Me=this.G.get(ue);Me&&this.H.unlisten(Me)}$(ue){if(ue!==void 0)return this.K(ue)}}o(Je,"y");class _t{constructor(ue,Me){this.H=ue,this.V=Me}get(){return this.H.get()}getAsync(){const ue=this.H.getAsync();return new Promise((Me,Le)=>{ue.then(Ye=>{Ye?Me(Ye):this.H.once((St,Ct)=>{Me(Ct??this.V)})}).catch(Le)})}listen(ue){this.H.listen(ue)}unlisten(ue){this.H.unlisten(ue)}once(ue){this.H.once(ue)}}o(_t,"H");var ot;(function(z){z[z.DOC_DISPLAY_TITLE=0]="DOC_DISPLAY_TITLE",z[z.DOC_UPDATED_USEC=1]="DOC_UPDATED_USEC",z[z.DOC_EMBED_SCROLL_POSITION=2]="DOC_EMBED_SCROLL_POSITION",z[z.DOC_BLOCK_KIT_THUMBNAIL=3]="DOC_BLOCK_KIT_THUMBNAIL",z[z.SECTION_SNIPPET=4]="SECTION_SNIPPET",z[z.CANNED_DOC_NAME=5]="CANNED_DOC_NAME",z[z.DOC_IS_EMPTY=6]="DOC_IS_EMPTY",z[z.DOC_LAST_UPDATED_USER_ID=8]="DOC_LAST_UPDATED_USER_ID",z[z.A11Y_READ_ONLY_MODE=9]="A11Y_READ_ONLY_MODE",z[z.DOC_EMBED_FOCUS_STATE=10]="DOC_EMBED_FOCUS_STATE",z[z.DOC_EMBED_SELECTION_STATE=11]="DOC_EMBED_SELECTION_STATE",z[z.TEXT_SECTION_OVERLAY_SHOWING=12]="TEXT_SECTION_OVERLAY_SHOWING",z[z.DOC_HAS_FILE_UNFURLS=13]="DOC_HAS_FILE_UNFURLS",z[z.TEMPLATE_CONTROLS_BE=14]="TEMPLATE_CONTROLS_BE",z[z.DOC_NEW_SECTION_USEC=15]="DOC_NEW_SECTION_USEC",z[z.TEMPLATE_CONTROLS_FE=16]="TEMPLATE_CONTROLS_FE",z[z.DOC_HAS_HEADER_IMAGE=17]="DOC_HAS_HEADER_IMAGE"})(ot||(ot={}));const Et=new WeakMap;class Mt{constructor(ue={}){this.Y=new Set,this.W=ue}add(ue,Me){if(!this.Y.has(ue)&&(this.Y.add(ue),Me&&Et.set(ue,Me),this.Y.size===1)){const{didStartHavingListeners:Le}=this.W;Le&&Le()}}addOneShot(ue,Me){const Le=o((...Ye)=>{this.remove(Le),ue.apply(window,Ye)},"i");this.add(Le,Me)}remove(ue){if(this.Y.delete(ue)&&this.Y.size===0){const{didStopHavingListeners:Me}=this.W;Me&&Me()}}removeAll(){this.Y.forEach(ue=>this.remove(ue))}empty(){return this.Y.size===0}notify(...ue){if(this.Y.size===0)return;const{notifyDecorator:Me,catchError:Le}=this.W;let Ye;Me&&(Ye=Me());const St=Array.from(this.Y);for(let Ct=0;Ct<St.length;Ct++)if(Le)try{St[Ct].apply(window,ue)}catch(Tt){Le(Tt)}else St[Ct].apply(window,ue);Ye&&Ye.clear()}debugGetDescriptions(){return Array.from(this.Y,(ue,Me)=>Et.get(ue)||`<anonymous-${Me}>`)}}o(Mt,"V");class ze{constructor(ue,Me,Le,Ye=!1){this.X=ue,this.J=Me,this.Z=Le,this.q=Ye;const St=o((Ct,Tt)=>{this.Y.notify(Ct,Tt)},"n");this.Y=new Mt({didStartHavingListeners:()=>this.Z.addListener(ue,Me,St),didStopHavingListeners:()=>{this.Z.removeListener(ue,Me,St),this.q||this.Z.cleanupStorage(ue,Me)}})}get(){return this.Z.getValue(this.X,this.J)}getAsync(){return this.Z.getValueAsync(this.X,this.J)}listen(ue){this.Y.add(ue)}unlisten(ue){this.Y.remove(ue)}unlistenAll(){this.Y.removeAll()}once(ue){this.Y.addOneShot(ue)}}o(ze,"k");class $t{constructor(ue){this.Y=new Mt,this.tt=ue}set(ue){const Me=this.tt;this.tt=ue,this.Y.notify(Me,ue)}get(){return this.tt}getAsync(){return Promise.resolve(this.get())}listen(ue){this.Y.add(ue)}unlisten(ue){this.Y.remove(ue)}once(ue){this.Y.addOneShot(ue)}}o($t,"j");class Un{constructor(ue){this.et=new Map,this.C=ue}didCreateDoc(ue,Me){const Le=this.et.get(ue);Le?(this.et.set(Me,Le),Le.idInternal.set(Me)):console.warn(`Could not find doc mapped to ID ${ue}`)}didDeleteDoc(ue){const Me=this.et.get(ue);Me==null||Me.deletedInternal.set(!0)}create(ue={}){const{title:Me,cannedDoc:Le,context:Ye,usesOnlyInlineTextComments:St,content:Ct}=ue;return this.controllerAccess.docs.createDoc(Me,Le,Ye,St,Ct).then(Tt=>this.get(Tt))}get(ue){let Me=this.et.get(ue);return Me||(Me=new ni(ue,this.C),this.et.set(ue,Me)),Me}get controllerAccess(){return this.C.controllerAccess}setEditsDisabled(ue,Me){for(const Le of Gn.values())Le.doc().id.get()===ue&&Le.docEditor.setEditsDisabled(Me);this.controllerAccess.docs.reloadThread(ue)}getBlockKitThumbnail(ue,Me=!0,Le){const Ye=Ot(this.C),St=Le?`${ue}/${Le}`:ue;return new _t(new ze(ot.DOC_BLOCK_KIT_THUMBNAIL,St,Ye,!0),'{"blocks": []}').getAsync().then(JSON.parse).then(Ct=>(Me&&Ct.blocks.length>0&&Ct.blocks.shift(),Ct))}getCannedDocName(ue){const Me=Ot(this.C);return new _t(new ze(ot.CANNED_DOC_NAME,ue,Me,!0),"").getAsync().then(Le=>Le.length===0?null:Le)}getSectionSnippet(ue){const Me=Ot(this.C);return new _t(new ze(ot.SECTION_SNIPPET,ue,Me,!0),"").getAsync()}setDebugOption(ue,Me){this.controllerAccess.docs.setDebugOption(ue,Me)}findSlackObject(ue,Me,Le){return this.controllerAccess.docs.findSlackObject(ue,Me,Le)}insertSlackObject(ue,Me,Le,Ye,St){return this.controllerAccess.docs.insertSlackObject(ue,Me,Le,Ye,St)}editLink(ue,Me,Le){this.controllerAccess.docs.editLink(ue,Me,Le)}loadData(ue,Me){return this.controllerAccess.docs.loadData([ue],Me)}it(){return un(this.C)}}o(Un,"Y");class ni{constructor(ue,Me){this.st=null,this.id=this.idInternal=new $t(ue),this.C=Me;const Le=Ot(this.C);this.title=new ze(ot.DOC_DISPLAY_TITLE,ue,Le),this.lastUpdated=new Je(new ze(ot.DOC_UPDATED_USEC,ue,Le,!0),Ye=>new Date(Ye/1e3)),this.lastUpdatedUsec=new ze(ot.DOC_UPDATED_USEC,ue,Le,!0),this.lastUpdatedSlackUserId=new ze(ot.DOC_LAST_UPDATED_USER_ID,ue,Le,!0),this.deleted=this.deletedInternal=new $t(!1),this.isEmpty=new ze(ot.DOC_IS_EMPTY,ue,Le,!0),this.hasPerformedEditingAction=new $t(!1),this.hasFileUnfurls=new ze(ot.DOC_HAS_FILE_UNFURLS,ue,Le,!0),this.templateControlsInfo=new ze(ot.TEMPLATE_CONTROLS_BE,ue,Le,!0),this.lastNewSectionUpdated=new Je(new ze(ot.DOC_NEW_SECTION_USEC,ue,Le,!0),Ye=>new Date(Ye/1e3)),this.hasHeaderImage=new ze(ot.DOC_HAS_HEADER_IMAGE,ue,Le,!0)}getBlockKitThumbnailValue(){if(!this.st&&this.isCreated()){const ue=Ot(this.C);this.st=new Je(new ze(ot.DOC_BLOCK_KIT_THUMBNAIL,this.idInternal.get(),ue,!0),JSON.parse)}return this.st}embed(ue,Me={mode:"editor",templateOptions:{allowTemplateOverlay:!1}}){let Le=an.get(ue);return Le||(Le=new ri(this,ue,Me,this.C),an.set(ue,Le),Le.mount()),Le.doc()!==this&&console.error("There was a different document embedded in the container",ue),Le}isCreated(){return!this.idInternal.get().startsWith("temp:")}}o(ni,"W");const an=new WeakMap,Gn=new Map,si={mode:"editor"};class ri{constructor(ue,Me,Le,Ye){this.rendered=new $t(!1),this.incrementalRendered=new $t(!1),this.failedToLoad=new $t(!1),this.loadInfo=new $t(void 0),this.editingActionPerformed=new $t(!1),this.loadError=new $t(void 0),this.editorContainer=new $t(void 0),this.nt=!1,this.ot=!1,this.rt=[],this.Et=ue,this.lt=Me,this.W=Object.assign(Object.assign({},si),Le),this.C=Ye,this._t=`${Gi}-${this.C.id}-${ui++}`,this.ht=function(){const St=document.createElement("div");return St.classList.add("collab-root"),St}(),this.ct(ot.DOC_EMBED_SCROLL_POSITION),this.scrollPosition=this.ct(ot.DOC_EMBED_SCROLL_POSITION),this.focusState=this.ct(ot.DOC_EMBED_FOCUS_STATE),this.selectionState=this.ct(ot.DOC_EMBED_SELECTION_STATE),this.a11yReadOnlyMode=this.ct(ot.A11Y_READ_ONLY_MODE),this.textSectionOverlayShowing=this.ct(ot.TEXT_SECTION_OVERLAY_SHOWING),this.templateControls=this.at(ot.TEMPLATE_CONTROLS_FE,new Map),this.hasHeaderImage=this.ct(ot.DOC_HAS_HEADER_IMAGE),this.title=this.Et.title,this.controllerAccess.run(()=>{this.dt=this.controllerAccess.docs.getDocEditor(this._t)})}get docEditor(){if(!this.dt)throw new Error("DocEditor object not set");return this.dt}get controllerAccess(){return this.C.controllerAccess}ct(ue){const Me=Ot(this.C),Le=new ze(ue,this._t,Me,!1);return this.rt.push(Le),Le}at(ue,Me){return new _t(this.ct(ue),Me)}onEditorLoadError(ue){console.info("[QUIP] Editor load error",ue),this.failedToLoad.set(!0),this.loadError.set(ue),this.ut()}didLoadModel(ue){this.loadInfo.set(ue)}didRender(ue){this.rendered.set(!0),this.failedToLoad.set(!1),this.loadError.set(void 0),this.editorContainer.set(ue)}didFinishIncrementalRender(){this.incrementalRendered.set(!0)}didPerformEditingAction(){this.editingActionPerformed.set(!0)}doc(){return this.Et}docId(){return this.Et.id.get()}containerElement(){return this.lt}frameName(){return this._t}mount(){if(Gn.set(this._t,this),!this.ot){const ue=this.ht;ue.style.visibility="hidden",this.lt.appendChild(ue);let Me=ue.ownerDocument.defaultView;Me||(console.warn(`Mounting ${this._t} into element with no window`),Me=window),this.nt=!0,this.controllerAccess.run(()=>{this.docEditor.createdViewFrame(ue)}),ue.style.visibility="visible",this.ot&&this.Tt(),this.ot=!0}this.nt&&this.Tt()}unmount(){try{console.info(`[Quip] unmount doc with frame name ${this._t}. Frame loaded ${this.nt}`),this.nt&&(this.ut(),this.rendered.set(!1),this.incrementalRendered.set(!1),this.failedToLoad.set(!1),this.loadError.set(void 0),this.nt=!1),this.ot&&(an.delete(this.lt),this.ht.remove(),this.ot=!1),Gn.delete(this._t),this.rt.forEach(ue=>ue.unlistenAll())}catch(ue){console.warn("[Quip] Error thrown in unmount",ue)}}it(){return un(this.C)}Tt(){this.controllerAccess.run(()=>{this.docEditor.renderDoc(this.Et.id.get(),this.W)})}ut(){this.controllerAccess.run(()=>{this.docEditor.cleanupViewFrame()})}setCommentsUiProvider(ue){this.commentsUiProvider=ue,ue==null||ue.setDelegate(this.docEditor)}setAutocompleteUiProvider(ue){this.autocompleteUiProvider=ue,ue==null||ue.setDelegate(this.docEditor)}setPermalinkUiProvider(ue){this.permalinkUiProvider=ue}setEmbeddedUiProvider(ue){this.embeddedUiProvider=ue}setErrorUiProvider(ue){this.errorUiProvider=ue}setEditorUiConnector(ue){this.editorUiConnector=ue,ue==null||ue.setDelegate(this.docEditor)}}o(ri,"Z");class On{constructor(ue){this.Ot=ue}getFrameByName(ue){return this.Ot.get(ue)}withFrame(ue,Me){const Le=this.getFrameByName(ue);Le||console.warn(`Could not find a frame with name ${ue}.`),Me(Le)}}o(On,"q");const Gi=`collab-doc-${(1e3*Math.random()).toString(36)}`;let ui=0;class Fi{constructor(){this.It=[],this.St=!1}get docs(){return this.At}get settings(){return this.Nt}get providers(){return this.Lt}run(ue){this.St?ue():this.It.push(ue)}setObjects({docs:ue,settings:Me,providers:Le}){this.St=!0,this.At=ue,this.Nt=Me,this.Lt=Le;for(const Ye of this.It)Ye();this.It=[]}}o(Fi,"tt");let Hi=0;class Sn{constructor(ue){this.id=Hi++,this.o=!1,this.Ct=!1,this.config=ue,this.platformDelegate=ue.delegate,this.bridgeInit=Sn.Rt(`embedded ${this.id}`);const Me=new dt(this);bn.set(this,Me),this.controllerAccess=new Fi,this.docs=new Un(this),this.failedToInitialize=new $t(!1),this.initializationError=new $t(void 0),this.Dt()}Dt(){if(this.o)return void this.bridgeInit.fireEvent(t.ERROR,"Collab instance initialized more than once");const{appearance:ue,language:Me,delegate:Le,commentsDataProvider:Ye,bookmarksDataProvider:St,fileDataProvider:Ct,slackObjectProvider:Tt,features:Ke,documentEventProvider:Pt,underlineAllLinks:Dt,enableAnimations:Rn,displayEmojiAsPlainText:pn,spellcheckEnabled:zn,embeddedConfigProvider:di,embeddedUiProvider:Ri,topLevelTeamId:Pi,anchorLinkProvider:fi,slackObjectUIProvider:hi,slackTextyHtmlConversionProvider:Cn,useSmartQuotesAndDashes:zi,atomStorageProvider:Vi}=this.config,Ui=this.it();Ui.init({features:Ke,delegate:Le,anchorLinkProvider:fi,bookmarksDataProvider:St,commentsDataProvider:Ye,documentEventProvider:Pt,fileDataProvider:Ct,slackObjectProvider:Tt,slackObjectUIProvider:hi,slackTextyHtmlConversionProvider:Cn,mountedFrameProvider:new On(Gn),embeddedAccessDelegate:this.controllerAccess,docs:this.docs}),this.controllerAccess.run(()=>{this.atomClient=this.controllerAccess.providers.getAtomClient(Vi)});const Rr=new h;var Ii,Sr;Rr.add(()=>{ue&&this.ft(ue),Me&&this.Mt(Me),Dt!==void 0&&this.setUnderlineAllLinks(Dt),Rn!==void 0&&this.setEnableAnimations(Rn),pn!==void 0&&this.setDisplayEmojiAsPlainText(pn),zn!==void 0&&this.setSpellcheckEnabled(zn),Pi&&this.vt(Pi),zi!==void 0&&this.setUseSmartQuotesAndDashes(zi)}),function(Xn,vi,pi){if(!pi)return;const _i=pi.supportedAutocompleteTypes;_i&&vi.add(()=>{Xn.providers.registerAutocompleteTypes(_i)}),Xn.run(()=>pi.setDelegate(Xn.providers.getSlackObjectProviderDelegate()))}(this.controllerAccess,Rr,Tt),function(Xn,vi={},pi,_i,Yn=Ht=>{}){Xn.addHandler(u.Op.DID_INITIALIZE,()=>{var Ht;(Ht=vi.didInitialize)===null||Ht===void 0||Ht.call(vi),pi.run(),_i.fireEvent(t.DID_INIT_RECEIVED)}),Xn.addHandler(u.Op.DID_FAIL_TO_INITIALIZE,({initError:Ht})=>{var nr;Yn(Ht),(nr=vi.didFailToInitialize)===null||nr===void 0||nr.call(vi,Ht)})}(Ui,Le,Rr,this.bridgeInit,Xn=>{this.Pt(!0,Xn)}),Ii=this.controllerAccess,Sr=Ye,Ii.run(()=>{Sr==null||Sr.setDelegate(Ii.providers.getCommentsDataProviderDelegate())}),function(Xn,vi){Xn.run(()=>{vi==null||vi.setDelegate(Xn.providers.getBookmarksDataProviderDelegate())})}(this.controllerAccess,St),function(Xn,vi){Xn.run(()=>vi==null?void 0:vi.setDelegate(Xn.providers.getDocumentEventProviderDelegate()))}(this.controllerAccess,Pt),function(Xn,vi,pi){pi&&vi.add(()=>{Xn.providers.registerEmbeddedUiProvider(pi.config())})}(this.controllerAccess,Rr,di||Ri),this.o=!0,this.bridgeInit.fireEvent(t.HANDLER_REGISTRATION_FINISHED)}Pt(ue,Me){const Le=this.failedToInitialize,Ye=this.initializationError;Le.set(ue),Ye.set(Me)}static Rt(ue){const Me=new n(ue);return Me.after([t.BRIDGE_TRANSPORT_SET,t.BRIDGE_TRANSPORT_READY,t.INIT_SENT,t.DID_INIT_RECEIVED,t.HANDLER_REGISTRATION_FINISHED],()=>{Me.fireEvent(t.BRIDGE_OPEN)}),Me}controllerModuleUrls(){return P()}preload(){return!this.Ct&&(P().forEach(ue=>{if(!x[ue]){const Me=document.createElement("link");Me.rel="preload",Me.as="script",Me.href=ue,Me.crossOrigin="anonymous",x[ue]=Me,document.head.appendChild(Me)}}),this.Ct=!0,!0)}tearDown(){this.it().tearDown(),bn.delete(this),this.Pt(!1),this.o=!1}createBasicTraceSpan(ue,Me,Le){var Ye,St,Ct;const Tt=(Ct=(St=(Ye=this.platformDelegate)===null||Ye===void 0?void 0:Ye.startSpan)===null||St===void 0?void 0:St.call(Ye,ue,Me,Le))!==null&&Ct!==void 0?Ct:null;return Tt?{span:Tt,closeSpanFn:Ke=>{var Pt,Dt;(Dt=(Pt=this.platformDelegate)===null||Pt===void 0?void 0:Pt.endTraceOrSpan)===null||Dt===void 0||Dt.call(Pt,Tt,Ke?{[Ti.ERROR]:`${Ke}`}:{})}}:{span:null,closeSpanFn:()=>{}}}getAttemptNumber(){var ue;return(ue=this.config.attemptNumber)!==null&&ue!==void 0?ue:0}preloadThreads(ue,Me){this.controllerAccess.run(()=>this.controllerAccess.docs.preloadData(ue,Me))}setAppearance(ue){this.config.appearance=ue,this.ft(ue)}setLanguage(ue){this.config.language=ue}setAppKeyboardFocusModeEnabled(ue,Me){this.Ut(ue,Me)}ft(ue){this.controllerAccess.settings.setAppearance(ue)}Mt(ue){this.controllerAccess.settings.setLanguage(ue)}Ut(ue,Me){this.controllerAccess.settings.setAppKeyboardFocusModeEnabled(ue,Me)}vt(ue){this.controllerAccess.settings.setDefaultTeamId(ue)}setUnderlineAllLinks(ue){this.controllerAccess.settings.setUnderlineLinks(ue)}setEnableAnimations(ue){this.controllerAccess.settings.setEnableAnimations(ue)}setDisplayEmojiAsPlainText(ue){this.controllerAccess.settings.setDisplayEmojiAsPlainText(ue)}setSpellcheckEnabled(ue){this.controllerAccess.settings.setSpellcheckEnabled(ue)}setUseSmartQuotesAndDashes(ue){this.controllerAccess.settings.setUseSmartQuotesAndDashes(ue)}async getInitLog(ue){return Object.assign(Object.assign({},await this.bridgeInit.getInitLog(ue)),{lm:"SYSTEMJS_SCRIPT_CONTROLLER",dr:!0})}async getInitLogStr(ue){for(let Me=n.MAX_INIT_LOG;Me>=0;Me--){const Le=JSON.stringify(await this.getInitLog(Me));if(Le.length<=ue)return Le}return"Failed to generate"}getDebugReport(ue){return this.getBridgeDebugReport(ue)}getBridgeDebugReport(ue=!0){return this.it().getDebugReport(ue)}it(){return bn.get(this)}}o(Sn,"it");function un(z){return bn.get(z)}o(un,"st");const bn=new Map;function Ot(z){return z.atomClient}o(Ot,"ot");const En=document.querySelector("script[src*='/collab/embedded.js']"),Lt=En==null?void 0:En.src,Hn=Lt?new URL(Lt).origin:"https://prod.slack.quip.systems";function Ji(z){return z.config.origin||Hn}o(Ji,"_t");var $n,Ti;(function(z){z.COLLAB_INIT="collab-init",z.CONTROLLER_INIT="controller-init",z.CONTROLLER_RESORCES="controller-resources",z.HTTP_FETCH_HEADER="http-fetch-header",z.HTTP_FETCH_CONTENT="http-fetch-content",z.JSON_PARSE="json-parse",z.LOAD_CONTROLLER="load-controller",z.AWAIT_CALLBACK="await-callback",z.LOAD_SYSTEMJS="load-systemjs",z.MODULE_PREFETCH="module-prefetch",z.SCRIPT_TAG="script-tag",z.LOAD_CONTROLLER_MODULE="load-controller-module",z.SYSTEMJS_IMPORT_MODULE="systemjs-import-module"})($n||($n={})),function(z){z.CONTROLLER_ID="controller-id",z.ERROR="error",z.JS_PREFETCH_ENABLED="js-prefetch-enabled",z.URL="url"}(Ti||(Ti={}));const Ir=(()=>{if(typeof S=="object")return S;if(typeof window=="object")return window;if(typeof self=="object")return self;throw new Error("Cannot find global")})();function er(z,ue,Me){const Le=z.split(".");let Ye=Me||Ir;for(let St=0;St<Le.length;St++){const Ct=Le[St];St===Le.length-1?Ye[Ct]=ue:(Ct in Ye||(Ye[Ct]={}),Ye=Ye[Ct])}}o(er,"dt");var cr,gi,Yi,Xi,jt,pe,Re,Fe,qe,vt,lt,Nt,ln,fn,Bt,Ci,Si,gr,tr,ai,wr,li,lr,Zn,Or,Qi,zr,_r,Zi,ro,yt,st,dn,Kt,wn,Jn;(function(z){z[z.IN_APP_USER_INITIATED=0]="IN_APP_USER_INITIATED",z[z.PERMALINK=1]="PERMALINK",z[z.POPOUT=2]="POPOUT"})(cr||(cr={})),function(z){z.BOLD="bold",z.ITALIC="italic",z.UNDERLINE="underline",z.STRIKETHROUGH="strikethrough",z.CODE="code",z.SUBSCRIPT="subscript",z.SUPERSCRIPT="superscript",z.LINK="link"}(gi||(gi={})),function(z){z.PLAIN="plain",z.H1="h1",z.H2="h2",z.H3="h3",z.CODE="code",z.BLOCKQUOTE="blockquote",z.LIST_BULLET="list_bullet",z.LIST_NUMBERED="list_numbered",z.LIST_CHECKLIST="list_checklist"}(Yi||(Yi={})),function(z){z.TODO_LISTS="todo_lists",z.LINKS_N_RESOURCES="links_and_resources",z.MEETING_NOTES="meeting_notes",z.BLANK_PAGE="blank_page"}(Xi||(Xi={})),function(z){z.CACHE="cache",z.MEMORY="memory",z.NETWORK="network"}(jt||(jt={})),function(z){z.NONE="none",z.SCROLL_TO_SECTION="scroll_to_section",z.FOCUS_SECTION="focus_section"}(pe||(pe={})),function(z){z[z.LINK_COPIED=0]="LINK_COPIED",z[z.LINK_FILE_SHARE_BLOCKED=1]="LINK_FILE_SHARE_BLOCKED",z[z.TABLE_SIZE_LIMIT_REACHED=2]="TABLE_SIZE_LIMIT_REACHED"}(Re||(Re={})),function(z){z[z.ANY=1]="ANY",z[z.ON_MOUSE_LEAVE=2]="ON_MOUSE_LEAVE"}(Fe||(Fe={})),function(z){z[z.COMMENTS=0]="COMMENTS",z[z.FILE_UPLOADS=1]="FILE_UPLOADS",z[z.DOCUMENT_EVENTS=2]="DOCUMENT_EVENTS",z[z.SPREADSHEETS=3]="SPREADSHEETS",z[z.HOVERCARDS=4]="HOVERCARDS",z[z.LINK_UNFURL=5]="LINK_UNFURL",z[z.UNREAD_COMMENTS=6]="UNREAD_COMMENTS",z[z.REMINDERS=7]="REMINDERS",z[z.DOCUMENT_UPDATE=8]="DOCUMENT_UPDATE",z[z.FLEXBOX_COLLAB=9]="FLEXBOX_COLLAB",z[z.SLACK_WORKFLOW_BUTTON_PROTOTYPE=10]="SLACK_WORKFLOW_BUTTON_PROTOTYPE",z[z.DOPE_TABLE=11]="DOPE_TABLE",z[z.UI_PARITY=12]="UI_PARITY",z[z.MOBILE_DOCUMENT_EDITING=13]="MOBILE_DOCUMENT_EDITING",z[z.MOBILE_IMAGE_LOADING=14]="MOBILE_IMAGE_LOADING",z[z.GALLERY_LAYOUT=15]="GALLERY_LAYOUT",z[z.ANCHOR_LINKS=16]="ANCHOR_LINKS",z[z.IMAGE_EMBEDS=17]="IMAGE_EMBEDS",z[z.IMAGE_CAPTION=18]="IMAGE_CAPTION",z[z.EMBEDS_DRAG_HANDLE=19]="EMBEDS_DRAG_HANDLE",z[z.SLACK_AUTOCOMPLETE=20]="SLACK_AUTOCOMPLETE",z[z.DOCUMENT_SLASH_COMMANDS=23]="DOCUMENT_SLASH_COMMANDS",z[z.DRAG_AND_DROP_MAX_DISTANCE=24]="DRAG_AND_DROP_MAX_DISTANCE",z[z.APP_UNFURL_NON_IFRAME_RENDERS=25]="APP_UNFURL_NON_IFRAME_RENDERS",z[z.A11Y_KEYBOARD_NAVIGATION=28]="A11Y_KEYBOARD_NAVIGATION",z[z.INSERT_TOOLBAR=29]="INSERT_TOOLBAR",z[z.MENTIONS_SHARE=30]="MENTIONS_SHARE",z[z.TEXT_IN_GALLERY_LAYOUT=31]="TEXT_IN_GALLERY_LAYOUT",z[z.AUTOSIZE_FLEXBOX=32]="AUTOSIZE_FLEXBOX",z[z.FORMATTING_TOOLBAR=33]="FORMATTING_TOOLBAR",z[z.UI_PARITY_SLACK_LINK_INSPECTOR=34]="UI_PARITY_SLACK_LINK_INSPECTOR",z[z.PREVENT_OBJECTS_IN_LISTS=35]="PREVENT_OBJECTS_IN_LISTS",z[z.DISALLOW_SECTION_COMMENTS=37]="DISALLOW_SECTION_COMMENTS",z[z.SECTION_TOOLBAR_ON_LEFT=38]="SECTION_TOOLBAR_ON_LEFT",z[z.MOBILE_WEBVIEW_UNFURLS=39]="MOBILE_WEBVIEW_UNFURLS",z[z.INLINE_COMMENTS=40]="INLINE_COMMENTS",z[z.UNIVERSAL_DRAG_PREVIEW=41]="UNIVERSAL_DRAG_PREVIEW",z[z.DISABLE_GLOBAL_SHORTCUTS=42]="DISABLE_GLOBAL_SHORTCUTS",z[z.NARROW_COLLAB_INDENTATION=43]="NARROW_COLLAB_INDENTATION",z[z.EXPANDED_FLEXBOX_MARGIN=44]="EXPANDED_FLEXBOX_MARGIN",z[z.ADD_COLUMN_FROM_SECTION_MENU=45]="ADD_COLUMN_FROM_SECTION_MENU",z[z.REQUEST_COMPLETION_HOOK=46]="REQUEST_COMPLETION_HOOK",z[z.A11Y_CARET=47]="A11Y_CARET",z[z.BOOKMARKS=48]="BOOKMARKS",z[z.GRIDLIKE_DRAG_AND_DROP_PLACEMENT=50]="GRIDLIKE_DRAG_AND_DROP_PLACEMENT",z[z.SLACK_MESSAGE_TITLE=51]="SLACK_MESSAGE_TITLE",z[z.LENIENT_STARTUP=52]="LENIENT_STARTUP",z[z.ALLOW_SELECTING_ARCHIVED_COMMENTS=53]="ALLOW_SELECTING_ARCHIVED_COMMENTS",z[z.ANIMATE_LAYOUT_DRAG=54]="ANIMATE_LAYOUT_DRAG",z[z.STATIC_TITLES=55]="STATIC_TITLES",z[z.PROFILE_UNFURLS=56]="PROFILE_UNFURLS",z[z.DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES=57]="DISABLE_PERSISTING_CLIENT_USER_DOCUMENT_OVERLAY_UPDATES",z[z.MOBILE_NATIVE_UNFURLS=58]="MOBILE_NATIVE_UNFURLS",z[z.DEFAULT_UNFURLS_ON_PASTE=59]="DEFAULT_UNFURLS_ON_PASTE",z[z.SAVED_FOR_LATER=60]="SAVED_FOR_LATER",z[z.COMMENTS_REDESIGN=61]="COMMENTS_REDESIGN",z[z.SLACK_USER_CONTEXT_MENU=62]="SLACK_USER_CONTEXT_MENU",z[z.SLACK_OBJECT_CONTROL_CONTEXT_MENUS=63]="SLACK_OBJECT_CONTROL_CONTEXT_MENUS",z[z.JS_MODULE_PREFETCH=64]="JS_MODULE_PREFETCH",z[z.SLACK_SECTION_MENUS=65]="SLACK_SECTION_MENUS",z[z.PADDING_RESIZING=66]="PADDING_RESIZING",z[z.HOVERABLE_SECTION_MENU=68]="HOVERABLE_SECTION_MENU",z[z.SLACK_PRESENCE_UPDATES=69]="SLACK_PRESENCE_UPDATES",z[z.HIDE_INLINE_COMMENT_BUBBLES=70]="HIDE_INLINE_COMMENT_BUBBLES",z[z.HIDE_ADD_COMMENT_BUBBLE=71]="HIDE_ADD_COMMENT_BUBBLE",z[z.HYPERLINK_CONTEXT_MENU=72]="HYPERLINK_CONTEXT_MENU",z[z.UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI=73]="UNIVERSAL_DRAG_PREVIEW_EMBEDDED_UI",z[z.LOCK_SECTION_FOR_INLINE_ANNOTATION=74]="LOCK_SECTION_FOR_INLINE_ANNOTATION",z[z.EDITABLE_CONTROL=75]="EDITABLE_CONTROL",z[z.OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION=76]="OPEN_ANNOTATION_TAB_IN_FOCUSED_SECTION",z[z.MOVE_CARET_WHEN_OPENING_ANNOTATION=77]="MOVE_CARET_WHEN_OPENING_ANNOTATION",z[z.DISABLE_TITLE_UNFURL=79]="DISABLE_TITLE_UNFURL",z[z.HIDE_STUB_ANNOTATIONS=80]="HIDE_STUB_ANNOTATIONS",z[z.OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS=81]="OBSERVE_CONTENT_OUTSIDE_SECTION_MUTATIONS",z[z.USE_EXTERNAL_EDITOR_SAVE=82]="USE_EXTERNAL_EDITOR_SAVE",z[z.IMPROVED_WORD_WRAPPING=83]="IMPROVED_WORD_WRAPPING",z[z.HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS=84]="HIGHLIGHT_TEXT_WITH_SECTION_LEVEL_COMMENTS",z[z.USE_NEW_FIND_MODAL=85]="USE_NEW_FIND_MODAL",z[z.DISPLAY_COMMENT_TOOLTIP=86]="DISPLAY_COMMENT_TOOLTIP",z[z.HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT=87]="HIDE_SLACK_SECTION_HIGHLIGHT_FOR_OPEN_COMMENT",z[z.SLACK_FILE_UNFURL_PLACEHOLDER=88]="SLACK_FILE_UNFURL_PLACEHOLDER",z[z.PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS=89]="PRIORITIZE_OPENING_ANNOTATIONS_OVER_LINKS",z[z.CLEANUP_SENTINEL=90]="CLEANUP_SENTINEL",z[z.OPEN_COMMENTS_HIGHLIGHT_TEMPORARY=91]="OPEN_COMMENTS_HIGHLIGHT_TEMPORARY",z[z.UNFURL_PRIVATE_MESSAGES=92]="UNFURL_PRIVATE_MESSAGES",z[z.MOBILE_DISABLE_PRESENCE_MENU_POPOVER=93]="MOBILE_DISABLE_PRESENCE_MENU_POPOVER",z[z.CANVAS_GA_FAST_FOLLOW=95]="CANVAS_GA_FAST_FOLLOW",z[z.BRIDGE_REFACTORING=96]="BRIDGE_REFACTORING",z[z.SIMPLE_TABLES=97]="SIMPLE_TABLES",z[z.ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS=98]="ALLOW_LARGE_SIZE_FILE_IMAGE_UPLOADS",z[z.ALLOW_SLACK_OBJECT_TITLE_UNFURL=99]="ALLOW_SLACK_OBJECT_TITLE_UNFURL",z[z.ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL=100]="ALLOW_SLACK_WEB_OR_APP_LINKS_TITLE_UNFURL",z[z.CANVAS_GA_FAST_FOLLOW_2=101]="CANVAS_GA_FAST_FOLLOW_2",z[z.USE_LEFT_GUTTER_DISPLAY=102]="USE_LEFT_GUTTER_DISPLAY",z[z.USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD=103]="USE_PRIVATE_MESSAGE_SPEEDBUMP_IN_CARD",z[z.TITLE_BLOCK_KIT_FORMAT=104]="TITLE_BLOCK_KIT_FORMAT",z[z.USE_LIST_ITEM_MARKER_CONTAINER=105]="USE_LIST_ITEM_MARKER_CONTAINER",z[z.ALLOW_SLACK_TEMPLATE_PLACEHOLDER=106]="ALLOW_SLACK_TEMPLATE_PLACEHOLDER",z[z.USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS=107]="USE_INLINE_TOOLBAR_PERF_IMPROVEMENTS",z[z.IMAGE_RESIZING=108]="IMAGE_RESIZING",z[z.PRIVATE_MESSAGE_SPEEDBUMP_MODAL=109]="PRIVATE_MESSAGE_SPEEDBUMP_MODAL",z[z.ALLOW_HEADER_IMAGE=110]="ALLOW_HEADER_IMAGE",z[z.PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS=111]="PRIVATE_MESSAGE_SPEEDBUMP_FOR_TITLE_UNFURLS",z[z.USE_NEW_SECTION_HIGHLIGHT=112]="USE_NEW_SECTION_HIGHLIGHT",z[z.MODEL_INTEGRITY_PROBE=113]="MODEL_INTEGRITY_PROBE",z[z.MODEL_INTEGRITY_CHANGES_CHECK=114]="MODEL_INTEGRITY_CHANGES_CHECK",z[z.MODEL_FSCK_PROBE=115]="MODEL_FSCK_PROBE",z[z.MODEL_UPDATES_PROBE=116]="MODEL_UPDATES_PROBE",z[z.SIMPLE_TABLES_FULL_BLEED=117]="SIMPLE_TABLES_FULL_BLEED",z[z.IMAGE_MIN_DIMENSIONS=118]="IMAGE_MIN_DIMENSIONS",z[z.SIMPLE_TABLES_MOBILE_DISPLAY_SCALE=119]="SIMPLE_TABLES_MOBILE_DISPLAY_SCALE",z[z.SLACK_TEXTY_CLIPBOARD=120]="SLACK_TEXTY_CLIPBOARD",z[z.ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE=121]="ONLY_OPEN_ANNOTATION_WHEN_CARET_IS_INSIDE",z[z.SINGLE_HOVERABLE_SECTION_MENU=122]="SINGLE_HOVERABLE_SECTION_MENU",z[z.SIMPLE_TABLES_FIT_TO_PAGE=123]="SIMPLE_TABLES_FIT_TO_PAGE",z[z.TRANSIENT_SECTION_HIGHLIGHTING=124]="TRANSIENT_SECTION_HIGHLIGHTING",z[z.OPTIMIZE_CONTROLS_RENDERING=125]="OPTIMIZE_CONTROLS_RENDERING",z[z.SIMPLE_TABLES_MOBILE_EDITING=126]="SIMPLE_TABLES_MOBILE_EDITING",z[z.OPTIMIZE_EMBEDS_RENDERING=127]="OPTIMIZE_EMBEDS_RENDERING",z[z.CONTENT_REACTION_BAR=128]="CONTENT_REACTION_BAR",z[z.GUTTER_REDESIGN=129]="GUTTER_REDESIGN",z[z.SLASH_SHORTCUT_COMMANDS=130]="SLASH_SHORTCUT_COMMANDS",z[z.USE_NATIVE_LINK_INSPECTOR=131]="USE_NATIVE_LINK_INSPECTOR",z[z.SECTION_UPDATE_PILL_ENABLED=132]="SECTION_UPDATE_PILL_ENABLED",z[z.SIMPLE_TABLES_CELL_MERGING=133]="SIMPLE_TABLES_CELL_MERGING",z[z.HIGHLIGHT_IN_STANDALONE_CANVASES=134]="HIGHLIGHT_IN_STANDALONE_CANVASES",z[z.BLUE_GREY_MENTIONS=135]="BLUE_GREY_MENTIONS",z[z.SLASH_SHORTCUT_COMMANDS_NUX=136]="SLASH_SHORTCUT_COMMANDS_NUX",z[z.OPTIMIZE_SECTION_STATUS=137]="OPTIMIZE_SECTION_STATUS",z[z.UNFURL_EMBED=138]="UNFURL_EMBED",z[z.SLACK_REACT_17=139]="SLACK_REACT_17",z[z.ENABLE_REACT_18=140]="ENABLE_REACT_18"}(qe||(qe={})),function(z){z[z.NONE=0]="NONE",z[z.SHIFT=1]="SHIFT",z[z.ALT=2]="ALT",z[z.META=4]="META",z[z.CTRL=8]="CTRL",z[z.MOD=16]="MOD"}(vt||(vt={})),function(z){z[z.CHANNEL=0]="CHANNEL",z[z.USER=1]="USER",z[z.EMOJI=2]="EMOJI",z[z.FILE=4]="FILE",z[z.UNFURL=5]="UNFURL",z[z.DOCUMENT=6]="DOCUMENT",z[z.LINK=7]="LINK",z[z.DOCUMENT_USER_ACCESS=9]="DOCUMENT_USER_ACCESS",z[z.PENDING_URL=10]="PENDING_URL",z[z.GENERIC=11]="GENERIC",z[z.TEMPLATE=12]="TEMPLATE",z[z.BACKGROUND=13]="BACKGROUND",z[z.WIDGET=14]="WIDGET"}(lt||(lt={})),function(z){z[z.NOT_FOUND=0]="NOT_FOUND"}(Nt||(Nt={})),function(z){z[z.CLOSE=0]="CLOSE",z[z.SELECT=1]="SELECT",z[z.MOVE_SELECTION_DOWN=2]="MOVE_SELECTION_DOWN",z[z.MOVE_SELECTION_UP=3]="MOVE_SELECTION_UP"}(ln||(ln={})),function(z){z.CANVAS="insert-canvas",z.AUDIO="insert-audio",z.VIDEO="insert-video",z.FILE="insert-file",z.WORKFLOW="insert-workflow",z.CODE="inline-code",z.CODEBLOCK="insert-codeblock",z.BLOCKQUOTE="insert-blockquote",z.PLAIN="insert-plain",z.H1="insert-h1",z.H2="insert-h2",z.H3="insert-h3",z.IMAGE="insert-image",z.TABLE="insert-table",z.CHECKLIST="insert-checklist",z.BULLET_LIST="insert-bullet-list",z.ORDERED_LIST="insert-ordered-list",z.DIVIDER="insert-divider",z.TWO_COLUMNS="layout-two-columns",z.THREE_COLUMNS="layout-three-columns"}(fn||(fn={})),function(z){z.DEFAULT_SOURCE="canvas-shortcut-command"}(Bt||(Bt={})),function(z){z[z.SLACK_OBJECT=0]="SLACK_OBJECT",z[z.LINK=1]="LINK",z[z.HEADER=2]="HEADER",z[z.TEXT=3]="TEXT",z[z.DIVIDER=4]="DIVIDER",z[z.HYPERLINK=5]="HYPERLINK",z[z.TITLE=6]="TITLE",z[z.TABLE=7]="TABLE",z[z.DRAG_OVERLAY=8]="DRAG_OVERLAY",z[z.COMMENT_METADATA=9]="COMMENT_METADATA"}(Ci||(Ci={})),function(z){z[z.DEFAULT=0]="DEFAULT",z[z.BUTTON=1]="BUTTON"}(Si||(Si={})),function(z){z[z.PREVIOUS=0]="PREVIOUS",z[z.NEXT=1]="NEXT"}(gr||(gr={})),function(z){z.ROW="row",z.COLUMN="column"}(tr||(tr={})),function(z){z.INSERT_BEFORE="insert_before",z.INSERT_AFTER="insert_after",z.DELETE="delete"}(ai||(ai={})),function(z){z.CLEAR_CONTENTS="clear_contents",z.MERGE_CELLS="merge_cells",z.UNMERGE_CELLS="unmerge_cells"}(wr||(wr={})),function(z){z.TOGGLE_HAS_HEADER_ROW="toggle_has_header_row",z.TOGGLE_HAS_HEADER_COLUMN="toggle_has_header_column",z.DISTRIBUTE_COLUMNS="distribute_columns",z.TOGGLE_FIT_TO_PAGE="toggle_fit_to_page"}(li||(li={})),function(z){z.NO_FOCUS_ON_CLICK="data-no-focus-section-on-click",z.NO_DRAG_ON_MOUSE_MOVE="data-no-drag-on-mouse-move",z.EMBEDDED_FILE_CARD_CLASSNAME="card-view__file_card",z.EMBEDDED_IMAGE_CARD_CLASSNAME="card-view__image_card"}(lr||(lr={})),function(z){z[z.DISMISS_POPOVER=0]="DISMISS_POPOVER",z[z.REMOVE_ASSOCIATED_CONTENT=1]="REMOVE_ASSOCIATED_CONTENT",z[z.COPY_OBJECT=2]="COPY_OBJECT",z[z.CREATE_OR_VIEW_COMMENT=3]="CREATE_OR_VIEW_COMMENT",z[z.REPLACE_FILE=4]="REPLACE_FILE",z[z.SWITCH_UNFURL_TYPE=5]="SWITCH_UNFURL_TYPE",z[z.PREVENT_POPOVER_DISMISS=6]="PREVENT_POPOVER_DISMISS",z[z.SYNC_METADATA=7]="SYNC_METADATA",z[z.COPY_SECTION_LINK=8]="COPY_SECTION_LINK",z[z.SET_BLOCK_STYLE=9]="SET_BLOCK_STYLE",z[z.ADD_COLUMN=10]="ADD_COLUMN",z[z.MOVE_LINE=11]="MOVE_LINE",z[z.TOGGLE_COLLAPSE=12]="TOGGLE_COLLAPSE",z[z.CHECK_ALL=13]="CHECK_ALL",z[z.UNCHECK_ALL=14]="UNCHECK_ALL",z[z.REMOVE_CHECKED=15]="REMOVE_CHECKED",z[z.MOVE_CHECKED_TO_BOTTOM=16]="MOVE_CHECKED_TO_BOTTOM",z[z.SORT_ALPHA=17]="SORT_ALPHA",z[z.TAKE_OVER_EDITING=18]="TAKE_OVER_EDITING",z[z.ADD_TEXT_BELOW=19]="ADD_TEXT_BELOW",z[z.UPDATE_INLINE_ENTITY_DISPLAY_INFO=20]="UPDATE_INLINE_ENTITY_DISPLAY_INFO",z[z.ON_LINK_INSPECTOR_INPUT_CHANGE=21]="ON_LINK_INSPECTOR_INPUT_CHANGE",z[z.FOCUS_ASSOCIATED_SECTION=22]="FOCUS_ASSOCIATED_SECTION",z[z.UNFURL_URL=23]="UNFURL_URL",z[z.MODIFY_TABLE=24]="MODIFY_TABLE",z[z.RESUME_SNAPSHOTS=25]="RESUME_SNAPSHOTS",z[z.OPEN_POPOVER=26]="OPEN_POPOVER",z[z.CANCEL_HEADER_IMAGE=27]="CANCEL_HEADER_IMAGE",z[z.PREVIEW_HEADER_IMAGE=28]="PREVIEW_HEADER_IMAGE",z[z.SAVE_HEADER_IMAGE=29]="SAVE_HEADER_IMAGE"}(Zn||(Zn={})),function(z){z.MERGE="merge",z.UNMERGE="unmerge"}(Or||(Or={})),function(z){z[z.SLACK_MESSAGE=0]="SLACK_MESSAGE",z[z.SLACK_FILE=1]="SLACK_FILE",z[z.SLACK_IMAGE_FILE=8]="SLACK_IMAGE_FILE",z[z.SLACK_DOCUMENT=2]="SLACK_DOCUMENT",z[z.SLACK_DOCUMENT_SECTION=3]="SLACK_DOCUMENT_SECTION",z[z.SLACK_PUBLIC_LINK=4]="SLACK_PUBLIC_LINK",z[z.SLACK_USER=5]="SLACK_USER",z[z.SLACK_CHANNEL=6]="SLACK_CHANNEL",z[z.SLACK_WORKFLOW=7]="SLACK_WORKFLOW",z[z.SLACK_WIDGET=9]="SLACK_WIDGET",z[z.SLACK_EMBED=10]="SLACK_EMBED"}(Qi||(Qi={})),function(z){z[z.CARD=0]="CARD",z[z.INLINE=1]="INLINE",z[z.LINK=2]="LINK",z[z.WIDGET=3]="WIDGET"}(zr||(zr={})),function(z){z.IMAGE="image",z.HORIZONTAL_RULE="horizontal-rule",z.CHECKLIST="checklist",z.NUMBERED_LIST="numbered-list",z.BULLETED_LIST="bullet-list",z.TABLE="table",z.CODE="code",z.TEXT_H1_STYLE="large-heading",z.TEXT_H2_STYLE="medium-heading",z.TEXT_H3_STYLE="small-heading",z.TEXT_PLAIN_STYLE="plain",z.BLOCKQUOTE="blockquote"}(_r||(_r={})),function(z){z[z.DOCUMENT_SAVING=1]="DOCUMENT_SAVING",z[z.IO=2]="IO",z[z.LISTENER=3]="LISTENER",z[z.ELEMENT=4]="ELEMENT"}(Zi||(Zi={})),function(z){z[z.NONE=0]="NONE",z[z.DOCUMENT_FAILED_TO_LOAD=1]="DOCUMENT_FAILED_TO_LOAD",z[z.DOCUMENT_SAVE_FAILED=2]="DOCUMENT_SAVE_FAILED",z[z.DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE=3]="DOCUMENT_SAVE_FAILED_CONNECTION_OFFLINE",z[z.DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE=4]="DOCUMENT_SAVE_FAILED_SERVER_NOT_REACHABLE",z[z.DOCUMENT_TOO_LARGE_TO_SAVE=5]="DOCUMENT_TOO_LARGE_TO_SAVE",z[z.SESSION_EXPIRED=6]="SESSION_EXPIRED",z[z.THREAD_CLOSED=7]="THREAD_CLOSED",z[z.DOCUMENT_SAVE_FAILED_TO_COMPLETE=8]="DOCUMENT_SAVE_FAILED_TO_COMPLETE",z[z.DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES=9]="DOCUMENT_SAVE_FAILED_DUE_TO_PREVIOUS_FAILURES"}(ro||(ro={})),function(z){z[z.WRITE=0]="WRITE",z[z.READ=1]="READ",z[z.NONE=2]="NONE"}(yt||(yt={})),function(z){z.DOWNLOAD="download",z.EDIT_FILE="edit-file",z.OPEN_IN_NEW_WINDOW="open-in-new-window",z.PREVIEW_FILE="preview-file",z.VIEW_FULL_SCREEN="view-full-screen",z.SHARE="share"}(st||(st={})),function(z){z[z.HOVERCARD=0]="HOVERCARD",z[z.CARD=1]="CARD",z[z.HEADER=2]="HEADER",z[z.CONTROL_CONTEXT_MENU=3]="CONTROL_CONTEXT_MENU",z[z.SECTION_MENU=4]="SECTION_MENU",z[z.HYPERLINK_CONTEXT_MENU=5]="HYPERLINK_CONTEXT_MENU",z[z.HYPERLINK_INSPECTOR_TOOLBAR=6]="HYPERLINK_INSPECTOR_TOOLBAR",z[z.CONTROL_OBJECT_OBSERVER=7]="CONTROL_OBJECT_OBSERVER",z[z.TABLE_SELECTION_MENU=8]="TABLE_SELECTION_MENU",z[z.FILE_UPLOAD_BLOCKED_OVERLAY=9]="FILE_UPLOAD_BLOCKED_OVERLAY",z[z.EPHEMERAL_MESSAGE_MODAL_TRIGGER=10]="EPHEMERAL_MESSAGE_MODAL_TRIGGER",z[z.VARIABLE_EDIT_POPOVER=11]="VARIABLE_EDIT_POPOVER",z[z.CONTENT_REACTION_BAR=12]="CONTENT_REACTION_BAR",z[z.GUTTER_REACTION_ICON=13]="GUTTER_REACTION_ICON",z[z.HEADER_IMAGE_PICKER=14]="HEADER_IMAGE_PICKER"}(dn||(dn={})),function(z){z.NONE="none",z.THREAD_ROOT="thread_root",z.THREAD_COMPOSER="thread_composer"}(Kt||(Kt={})),function(z){z.TEXT="text",z.USER="user",z.CHANNEL="channel",z.DATE="date"}(wn||(wn={})),function(z){z.INSERT="insert",z.EDIT="edit",z.REMOVE="remove",z.SHOW_CREATION_POPOVER="show_creation_popover",z.HIGHLIGHT="highlight"}(Jn||(Jn={})),er("Collab",Sn),er("dumpCollabDebugReport",function(){bn.forEach((z,ue)=>{ue.getInitLog().then(Me=>{console.log(`Collab instance ${ue.id} debug report:`,ue.getBridgeDebugReport(!1),Me)})})}),window.JS_CLIENT_HASH="tbMxr5na0PcaIclaE8gg_Q",window.QUIP_VERSION_NAME="quipbuild_2024_02_08T03_20_49819e1"}.call(this,f("yLpj"))},LNXf:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("hGh8"),m=h(f("hEYi")),a=f("f2XL"),s=h(f("aVV0"));let i=o(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,n)=>{let r=o(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(g){g.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()),g.type===m.default.ReceivedSignalFrame&&g.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(u.MeetingSessionStatus.fromSignalFrame(g.message)),t())}constructor(g,d,y){this.signalingClient=g,this.completionCallback=d,this.logger=y}},"Interceptor");const c=new r(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,n,r){super(t.logger),this.context=t,this.credentials=n,this.completionCallback=r,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=i},LUct:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("H7ma")),u=S(f("OND3")),m=f("KyYT"),a=S(f("XJrD")),s=S(f("GxrV"));let i=o(class Er{updateConnectionMetric(t){let{uplinkKbps:n=0}=t;if(isNaN(n))return;this.startTimeMs===0&&(this.startTimeMs=Date.now()),Date.now()-this.startTimeMs<Er.startupDurationMs?this.lastUplinkBandwidthKbps=Er.defaultUplinkBandwidthKbps:this.lastUplinkBandwidthKbps=n,this.logger.debug(()=>`simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`);let r=Er.holdDownDurationMs;this.currentActiveStreams===3?r=Er.holdDownDurationMs*2:(this.currentActiveStreams===2&&n<=this.midDisabledRate||this.currentActiveStreams===1&&n<=this.hiDisabledRate)&&(r=Er.holdDownDurationMs/2),!(Date.now()<this.lastUpdatedMs+r)&&(this.newQualityMap=this.calculateEncodingParameters(!1))}calculateEncodingParameters(t){const n=[new s.default,new s.default,new s.default];let r=0,c=0;if(this.currentActiveStreams===0?(r=this.lastUplinkBandwidthKbps+1,c=0):this.currentActiveStreams===1?(r=this.enableFhdVideo?4e3:2400,c=this.hiDisabledRate):this.currentActiveStreams===2?(r=this.enableFhdVideo?1600:1e3,c=this.midDisabledRate):(r=this.enableFhdVideo?500:300,c=0),t||this.lastUplinkBandwidthKbps>=r||this.lastUplinkBandwidthKbps<=c){this.shouldDisableSimulcast?(this.newActiveStreams=0,n[0].maxBitrateKbps=0,n[1].maxBitrateKbps=this.hiTargetBitrateKbps,n[2].maxBitrateKbps=0):this.numSenders<=4&&this.lastUplinkBandwidthKbps>=this.hiDisabledRate?(this.newActiveStreams=1,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=this.hiTargetBitrateKbps):this.lastUplinkBandwidthKbps>=this.midDisabledRate?(this.newActiveStreams=2,n[0].maxBitrateKbps=this.lastUplinkBandwidthKbps>=this.midTargetBitrateKbps*.7?this.lowTargetBitrateKbps*2/3:this.lowTargetBitrateKbps/2,n[1].maxBitrateKbps=this.numSenders<=6?this.midTargetBitrateKbps:this.midTargetBitrateKbps*.6,n[2].maxBitrateKbps=0):(this.newActiveStreams=3,n[0].maxBitrateKbps=this.lowTargetBitrateKbps,n[1].maxBitrateKbps=0,n[2].maxBitrateKbps=0);const p=n.map((g,d,y)=>g.maxBitrateKbps);this.newQualityMap=this.fillEncodingParamWithBitrates(p),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} shouldDisableSimulcast:${this.shouldDisableSimulcast} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`)}return this.newQualityMap}chooseMediaTrackConstraints(){return{width:{ideal:this.enableFhdVideo?1920:1280},height:{ideal:this.enableFhdVideo?1080:768},frameRate:{ideal:15}}}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.currentActiveStreams=this.newActiveStreams,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(t){const n=t.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,r=n!==this.numSenders,c=t.numberOfParticipants(),p=c>=0&&c<=2,g=this.shouldDisableSimulcast!==p;this.numSenders=n,this.shouldDisableSimulcast=p,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=t,this.newQualityMap=this.calculateEncodingParameters(r||g)}wantsResubscribe(){let t=!this.encodingParametersEqual();this.nextLocalDescriptions=this.videoIndex.localStreamDescriptions();for(let n=0;n<this.nextLocalDescriptions.length;n++){const r=this.nextLocalDescriptions[n].streamId;if(r!==0&&r){const c=this.currLocalDescriptions.findIndex(p=>p.streamId===r);c!==-1&&this.nextLocalDescriptions[n].disabledByWebRTC!==this.currLocalDescriptions[c].disabledByWebRTC&&(t=!0)}}return t&&(this.lastUpdatedMs=Date.now()),this.currLocalDescriptions=this.nextLocalDescriptions,t}compareEncodingParameter(t,n){return JSON.stringify(t)===JSON.stringify(n)}encodingParametersEqual(){let t=!1;for(const n of u.default.NAME_ARR_ASCENDING)if(t=t||!this.compareEncodingParameter(this.newQualityMap.get(n),this.currentQualityMap.get(n)),t)break;return!t}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return this.enableFhdVideo?1920:1280}captureHeight(){return this.enableFhdVideo?1080:768}captureFrameRate(){return 15}maxBandwidthKbps(){return this.enableFhdVideo?2500:1400}setIdealMaxBandwidthKbps(t){}setHasBandwidthPriority(t){}setHighResolutionFeatureEnabled(t){this.enableFhdVideo=t,this.hiDisabledRate=t?Er.kHiDisabledRateFhd:Er.kHiDisabledRateHd,this.midDisabledRate=t?Er.kMidDisabledRateFhd:Er.kMidDisabledRateHd,this.hiTargetBitrateKbps=t?Er.kHiTargetBitrateKbpsFhd:Er.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=t?Er.kMidTargetBitrateKbpsFhd:Er.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=t?Er.kLowTargetBitrateKbpsFhd:Er.kLowTargetBitrateKbpsHd}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!0}fillEncodingParamWithBitrates(t){const n=new Map,r=1e3,c=u.default.NAME_ARR_ASCENDING,p=t;let g=this.shouldDisableSimulcast?1:4;for(let d=0;d<c.length;d++){const y=c[d];n.set(y,{rid:y,active:p[d]>0,scaleResolutionDownBy:Math.max(g,1),maxBitrate:p[d]*r}),g=g/2}return n}getQualityMapString(t){let n="";const r=this.videoIndex.localStreamDescriptions();return r.length===3&&t.forEach(c=>{let p=!1;c.rid==="low"?p=r[0].disabledByWebRTC:c.rid==="mid"?p=r[1].disabledByWebRTC:p=r[2].disabledByWebRTC,n+=`{ rid: ${c.rid} active:${c.active} disabledByWebRTC: ${p} maxBitrate:${c.maxBitrate}}`}),n}getEncodingSimulcastLayer(t){switch(t){case 0:return h.default.High;case 1:return h.default.LowAndHigh;case 2:return h.default.LowAndMedium;case 3:return h.default.Low}}publishEncodingSimulcastLayer(){const t=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver(n=>{m.Maybe.of(n.encodingSimulcastLayersDidChange).map(r=>r.bind(n)(t))})}addObserver(t){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)t(n)}constructor(t,n){this.selfAttendeeId=t,this.logger=n,this.numSenders=0,this.shouldDisableSimulcast=!1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.currentActiveStreams=1,this.lastUplinkBandwidthKbps=Er.defaultUplinkBandwidthKbps,this.startTimeMs=0,this.lastUpdatedMs=Date.now(),this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.observerQueue=new Set,this.hiDisabledRate=Er.kHiDisabledRateHd,this.midDisabledRate=Er.kMidDisabledRateHd,this.hiTargetBitrateKbps=Er.kHiTargetBitrateKbpsHd,this.midTargetBitrateKbps=Er.kMidTargetBitrateKbpsHd,this.lowTargetBitrateKbps=Er.kLowTargetBitrateKbpsHd,this.enableFhdVideo=!1,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.lastUplinkBandwidthKbps=Er.defaultUplinkBandwidthKbps,this.currentQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps]),this.newQualityMap=this.fillEncodingParamWithBitrates([this.lowTargetBitrateKbps,0,this.hiTargetBitrateKbps])}},"DefaultSimulcastUplinkPolicy");l.default=i,i.defaultUplinkBandwidthKbps=1200,i.startupDurationMs=6e3,i.holdDownDurationMs=4e3,i.defaultMaxFrameRate=15,i.kHiDisabledRateHd=700,i.kMidDisabledRateHd=240,i.kHiDisabledRateFhd=1200,i.kMidDisabledRateFhd=400,i.kHiTargetBitrateKbpsHd=1200,i.kMidTargetBitrateKbpsHd=600,i.kLowTargetBitrateKbpsHd=300,i.kHiTargetBitrateKbpsFhd=2e3,i.kMidTargetBitrateKbpsFhd=1e3,i.kLowTargetBitrateKbpsFhd=500},LVIV:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0})},LhvI:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("aVV0"));let m=o(class extends u.default{run(){var s,i;return S(this,void 0,void 0,function*(){if(!(!((i=(s=this.context.meetingSessionConfiguration)===null||s===void 0?void 0:s.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(s){super(s.logger),this.context=s,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=m},LmyK:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var S;(function(h){h[h.UPSTREAM=0]="UPSTREAM",h[h.DOWNSTREAM=1]="DOWNSTREAM"})(S=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=S},Lrln:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54")),m=h(f("RUbL"));let a=o(class Wf{get mediaStream(){return this._mediaStream}set mediaStream(i){this._mediaStream=i}acquireAudioInputStream(){return S(this,void 0,void 0,function*(){return this._mediaStream.getAudioTracks().length===0?(this.logger.info("No audio stream available. Synthesizing an audio stream."),m.default.synthesizeAudioDevice(0)):this._mediaStream})}acquireVideoInputStream(){return S(this,void 0,void 0,function*(){return this._mediaStream})}acquireDisplayInputStream(i){return S(this,void 0,void 0,function*(){return i&&i.video&&i.video.mandatory&&i.video.mandatory.chromeMediaSource&&i.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(i):navigator.mediaDevices.getDisplayMedia(i)})}acquireScreenCaptureDisplayInputStream(i,e){return S(this,void 0,void 0,function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(i,e))})}screenCaptureDisplayMediaConstraints(i,e){return{audio:!!(!i&&new u.default().getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!i&&{frameRate:{max:e||Wf.defaultFrameRate}}),i&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:e||Wf.defaultFrameRate}})}}toggleMediaStream(i){let e=!1;if(this.mediaStream)for(let t=0;t<this.mediaStream.getTracks().length;t++)this.mediaStream.getTracks()[t].enabled!==i&&(this.mediaStream.getTracks()[t].enabled=i,e=!0);return e}cleanup(){if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].stop();this.mediaStream=null}muteLocalAudioInputStream(){throw new Error("unsupported")}unmuteLocalAudioInputStream(){throw new Error("unsupported")}addMediaStreamBrokerObserver(i){}removeMediaStreamBrokerObserver(i){}constructor(i){this.logger=i}},"ContentShareMediaStreamBroker");l.default=a,a.defaultFrameRate=15},Lspx:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var S;(function(h){h[h.Low=0]="Low",h[h.Medium=1]="Medium",h[h.High=2]="High",h[h.Maximum=3]="Maximum"})(S=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=S},LuEC:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("ghxq"));let u=o(class extends h.default{isSendingAudioUnhealthy(){const a=!this.currentData.isConnectionStartRecent(this.sendingAudioFailureInitialWaitTimeMs),s=this.currentData.consecutiveStatsWithNoAudioPacketsSent>=this.sendingAudioFailureSamplesToConsider;return a&&s}health(){if(this.isSendingAudioUnhealthy()){const a=Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs;return this.currentHealth>this.minimumHealth()&&!a?(this.logger.warn(`Sending Audio is unhealthy for ${this.sendingAudioFailureSamplesToConsider} seconds consecutively.`),this.warnCount++,this.warnCount>this.maximumTimesToWarn?(this.logger.warn("SendingAudioFailure health policy maximum warnings breached. Falling back to reporting healthy."),this.maximumHealth()):(this.lastWarnTimestampMs=Date.now(),this.minimumHealth())):this.currentHealth}return this.maximumHealth()}constructor(a,s,i){super(s,i,"Sending Audio Health"),this.logger=a,this.sendingAudioFailureSamplesToConsider=s.sendingAudioFailureSamplesToConsider>0?s.sendingAudioFailureSamplesToConsider:1,this.sendingAudioFailureInitialWaitTimeMs=s.sendingAudioFailureInitialWaitTimeMs,this.maximumTimesToWarn=s.maximumTimesToWarn,this.coolDownTimeMs=s.cooldownTimeMs,this.lastWarnTimestampMs=0,this.warnCount=0}},"SendingAudioFailureConnectionHealthPolicy");l.default=u},Lxy7:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.FXLIB_PATH=l.WORKER_PATH=l.CDN_BASE_PATH=l.RESOURCE_CONSTRAINTS=l.SEGMENTATION_MODEL=l.DEFAULT_STREAM_PARAMETERS=l.WORKER_MSG=void 0,l.WORKER_MSG={BUILD_ENGINE_REQUEST:"BuildEngineRequest",BUILD_ENGINE_RESPONSE:"BuildEngineResponse",PERFORM_SEGMENTATION_REQUEST:"PerformSegmentationRequest",PERFORM_SEGMENTATION_RESPONSE:"PerformSegmentationResponse",PERFORM_SEGMENTATION_SAB_REQUEST:"PerformSegmentationSABRequest",PERFORM_SEGMENTATION_SAB_RESPONSE:"PerformSegmentationSABResponse",DESTROY_ASSETS_REQUEST:"DestroyAssetsRequest",DESTROY_ASSETS_RESPONSE:"DestroyAssetsResponse",CLOSE_WORKER_REQUEST:"CloseWorkerRequest"},l.DEFAULT_STREAM_PARAMETERS={FRAMES_PER_SECOND:15,WIDTH_IN_PIXEL:960,HEIGHT_IN_PIXEL:540,CHANNEL_COUNT:4},l.SEGMENTATION_MODEL={LOAD_SUCCESS:2,WIDTH_IN_PIXELS:176,HEIGHT_IN_PIXELS:160},l.RESOURCE_CONSTRAINTS={DEFAULT_PROCESSING_BUDGET_PER_FRAME:50,SEGMENTATION_DEFAULT_FRAMES_PER_SEGMENTATION:1,SEGMENTATION_SAMPLING_PERIOD_FRAME_COUNT:500,BLUR_DEFAULT_CYCLE_PERCENTAGE:10,BLUR_SAMPLING_PERIOD_FRAME_COUNT:1e3,MIN_PROCESSING_BUDGET:0,MAX_PROCESSING_BUDGET:100},l.CDN_BASE_PATH="https://static.sdkassets.chime.aws";const S="/ml_media_fx/otherassets";l.WORKER_PATH=`${S}/worker.js`,l.FXLIB_PATH=`${S}/fxlib.js`},M1uR:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",h[h.ConnectionFailed=2]="ConnectionFailed",h[h.ICENegotiationFailed=3]="ICENegotiationFailed"})(S=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=S},M2az:function(j){j.exports=JSON.parse(`{"name":"@aws-sdk/client-chime-sdk-messaging","description":"AWS SDK for JavaScript Chime Sdk Messaging Client for Node.js, Browser and React Native","version":"3.341.0","scripts":{"build":"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4","clean":"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo chime-sdk-messaging"},"main":"./dist-cjs/index.js","types":"./dist-types/index.d.ts","module":"./dist-es/index.js","sideEffects":false,"dependencies":{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.341.0","@aws-sdk/config-resolver":"3.341.0","@aws-sdk/credential-provider-node":"3.341.0","@aws-sdk/fetch-http-handler":"3.341.0","@aws-sdk/hash-node":"3.341.0","@aws-sdk/invalid-dependency":"3.341.0","@aws-sdk/middleware-content-length":"3.341.0","@aws-sdk/middleware-endpoint":"3.341.0","@aws-sdk/middleware-host-header":"3.341.0","@aws-sdk/middleware-logger":"3.341.0","@aws-sdk/middleware-recursion-detection":"3.341.0","@aws-sdk/middleware-retry":"3.341.0","@aws-sdk/middleware-serde":"3.341.0","@aws-sdk/middleware-signing":"3.341.0","@aws-sdk/middleware-stack":"3.341.0","@aws-sdk/middleware-user-agent":"3.341.0","@aws-sdk/node-config-provider":"3.341.0","@aws-sdk/node-http-handler":"3.341.0","@aws-sdk/smithy-client":"3.341.0","@aws-sdk/types":"3.341.0","@aws-sdk/url-parser":"3.341.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.341.0","@aws-sdk/util-defaults-mode-node":"3.341.0","@aws-sdk/util-endpoints":"3.341.0","@aws-sdk/util-retry":"3.341.0","@aws-sdk/util-user-agent-browser":"3.341.0","@aws-sdk/util-user-agent-node":"3.341.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0","tslib":"^2.5.0","uuid":"^8.3.2"},"devDependencies":{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31","@types/uuid":"^8.3.0","concurrently":"7.0.0","downlevel-dts":"0.10.1","rimraf":"3.0.2","typedoc":"0.23.23","typescript":"~4.9.5"},"engines":{"node":">=14.0.0"},"typesVersions":{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},"files":["dist-*/**"],"author":{"name":"AWS SDK for JavaScript Team","url":"https://aws.amazon.com/javascript/"},"license":"Apache-2.0","browser":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},"homepage":"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-chime-sdk-messaging","repository":{"type":"git","url":"https://github.com/aws/aws-sdk-js-v3.git","directory":"clients/client-chime-sdk-messaging"}}`)},M39V:function(j,l,f){(function(S,h){j.exports=h()})(this,function(){return function(S){var h={};function u(m){if(h[m])return h[m].exports;var a=h[m]={i:m,l:!1,exports:{}};return S[m].call(a.exports,a,a.exports,u),a.l=!0,a.exports}return o(u,"r"),u.m=S,u.c=h,u.d=function(m,a,s){u.o(m,a)||Object.defineProperty(m,a,{enumerable:!0,get:s})},u.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})},u.t=function(m,a){if(1&a&&(m=u(m)),8&a||4&a&&typeof m=="object"&&m&&m.__esModule)return m;var s=Object.create(null);if(u.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:m}),2&a&&typeof m!="string")for(var i in m)u.d(s,i,function(e){return m[e]}.bind(null,i));return s},u.n=function(m){var a=m&&m.__esModule?function(){return m.default}:function(){return m};return u.d(a,"a",a),a},u.o=function(m,a){return Object.prototype.hasOwnProperty.call(m,a)},u.p="",u(u.s=90)}({17:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m=u(18),a=function(){function s(){}return o(s,"e"),s.getFirstMatch=function(i,e){var t=e.match(i);return t&&t.length>0&&t[1]||""},s.getSecondMatch=function(i,e){var t=e.match(i);return t&&t.length>1&&t[2]||""},s.matchAndReturnConst=function(i,e,t){if(i.test(e))return t},s.getWindowsVersionName=function(i){switch(i){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(i){var e=i.split(".").splice(0,2).map(function(t){return parseInt(t,10)||0});if(e.push(0),e[0]===10)switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(i){var e=i.split(".").splice(0,2).map(function(t){return parseInt(t,10)||0});if(e.push(0),!(e[0]===1&&e[1]<5))return e[0]===1&&e[1]<6?"Cupcake":e[0]===1&&e[1]>=6?"Donut":e[0]===2&&e[1]<2?"Eclair":e[0]===2&&e[1]===2?"Froyo":e[0]===2&&e[1]>2?"Gingerbread":e[0]===3?"Honeycomb":e[0]===4&&e[1]<1?"Ice Cream Sandwich":e[0]===4&&e[1]<4?"Jelly Bean":e[0]===4&&e[1]>=4?"KitKat":e[0]===5?"Lollipop":e[0]===6?"Marshmallow":e[0]===7?"Nougat":e[0]===8?"Oreo":e[0]===9?"Pie":void 0},s.getVersionPrecision=function(i){return i.split(".").length},s.compareVersions=function(i,e,t){t===void 0&&(t=!1);var n=s.getVersionPrecision(i),r=s.getVersionPrecision(e),c=Math.max(n,r),p=0,g=s.map([i,e],function(d){var y=c-s.getVersionPrecision(d),E=d+new Array(y+1).join(".0");return s.map(E.split("."),function(w){return new Array(20-w.length).join("0")+w}).reverse()});for(t&&(p=c-Math.min(n,r)),c-=1;c>=p;){if(g[0][c]>g[1][c])return 1;if(g[0][c]===g[1][c]){if(c===p)return 0;c-=1}else if(g[0][c]<g[1][c])return-1}},s.map=function(i,e){var t,n=[];if(Array.prototype.map)return Array.prototype.map.call(i,e);for(t=0;t<i.length;t+=1)n.push(e(i[t]));return n},s.find=function(i,e){var t,n;if(Array.prototype.find)return Array.prototype.find.call(i,e);for(t=0,n=i.length;t<n;t+=1){var r=i[t];if(e(r,t))return r}},s.assign=function(i){for(var e,t,n=i,r=arguments.length,c=new Array(r>1?r-1:0),p=1;p<r;p++)c[p-1]=arguments[p];if(Object.assign)return Object.assign.apply(Object,[i].concat(c));var g=o(function(){var d=c[e];typeof d=="object"&&d!==null&&Object.keys(d).forEach(function(y){n[y]=d[y]})},"o");for(e=0,t=c.length;e<t;e+=1)g();return i},s.getBrowserAlias=function(i){return m.BROWSER_ALIASES_MAP[i]},s.getBrowserTypeByAlias=function(i){return m.BROWSER_MAP[i]||""},s}();h.default=a,S.exports=h.default},18:function(S,h,u){"use strict";h.__esModule=!0,h.ENGINE_MAP=h.OS_MAP=h.PLATFORMS_MAP=h.BROWSER_MAP=h.BROWSER_ALIASES_MAP=void 0,h.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},h.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},h.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},h.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},h.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m,a=(m=u(91))&&m.__esModule?m:{default:m},s=u(18);function i(t,n){for(var r=0;r<n.length;r++){var c=n[r];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}o(i,"a");var e=function(){function t(){}o(t,"e");var n,r,c;return t.getParser=function(p,g){if(g===void 0&&(g=!1),typeof p!="string")throw new Error("UserAgent should be a string");return new a.default(p,g)},t.parse=function(p){return new a.default(p).getResult()},n=t,c=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(r=null)&&i(n.prototype,r),c&&i(n,c),t}();h.default=e,S.exports=h.default},91:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m=t(u(92)),a=t(u(93)),s=t(u(94)),i=t(u(95)),e=t(u(17));function t(r){return r&&r.__esModule?r:{default:r}}o(t,"u");var n=function(){function r(p,g){if(g===void 0&&(g=!1),p==null||p==="")throw new Error("UserAgent parameter can't be empty");this._ua=p,this.parsedResult={},g!==!0&&this.parse()}o(r,"e");var c=r.prototype;return c.getUA=function(){return this._ua},c.test=function(p){return p.test(this._ua)},c.parseBrowser=function(){var p=this;this.parsedResult.browser={};var g=e.default.find(m.default,function(d){if(typeof d.test=="function")return d.test(p);if(d.test instanceof Array)return d.test.some(function(y){return p.test(y)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.browser=g.describe(this.getUA())),this.parsedResult.browser},c.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},c.getBrowserName=function(p){return p?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},c.getBrowserVersion=function(){return this.getBrowser().version},c.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},c.parseOS=function(){var p=this;this.parsedResult.os={};var g=e.default.find(a.default,function(d){if(typeof d.test=="function")return d.test(p);if(d.test instanceof Array)return d.test.some(function(y){return p.test(y)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.os=g.describe(this.getUA())),this.parsedResult.os},c.getOSName=function(p){var g=this.getOS().name;return p?String(g).toLowerCase()||"":g||""},c.getOSVersion=function(){return this.getOS().version},c.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},c.getPlatformType=function(p){p===void 0&&(p=!1);var g=this.getPlatform().type;return p?String(g).toLowerCase()||"":g||""},c.parsePlatform=function(){var p=this;this.parsedResult.platform={};var g=e.default.find(s.default,function(d){if(typeof d.test=="function")return d.test(p);if(d.test instanceof Array)return d.test.some(function(y){return p.test(y)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.platform=g.describe(this.getUA())),this.parsedResult.platform},c.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},c.getEngineName=function(p){return p?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},c.parseEngine=function(){var p=this;this.parsedResult.engine={};var g=e.default.find(i.default,function(d){if(typeof d.test=="function")return d.test(p);if(d.test instanceof Array)return d.test.some(function(y){return p.test(y)});throw new Error("Browser's test function is not valid")});return g&&(this.parsedResult.engine=g.describe(this.getUA())),this.parsedResult.engine},c.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},c.getResult=function(){return e.default.assign({},this.parsedResult)},c.satisfies=function(p){var g=this,d={},y=0,E={},w=0;if(Object.keys(p).forEach(function(M){var D=p[M];typeof D=="string"?(E[M]=D,w+=1):typeof D=="object"&&(d[M]=D,y+=1)}),y>0){var k=Object.keys(d),V=e.default.find(k,function(M){return g.isOS(M)});if(V){var F=this.satisfies(d[V]);if(F!==void 0)return F}var N=e.default.find(k,function(M){return g.isPlatform(M)});if(N){var P=this.satisfies(d[N]);if(P!==void 0)return P}}if(w>0){var x=Object.keys(E),O=e.default.find(x,function(M){return g.isBrowser(M,!0)});if(O!==void 0)return this.compareVersion(E[O])}},c.isBrowser=function(p,g){g===void 0&&(g=!1);var d=this.getBrowserName().toLowerCase(),y=p.toLowerCase(),E=e.default.getBrowserTypeByAlias(y);return g&&E&&(y=E.toLowerCase()),y===d},c.compareVersion=function(p){var g=[0],d=p,y=!1,E=this.getBrowserVersion();if(typeof E=="string")return p[0]===">"||p[0]==="<"?(d=p.substr(1),p[1]==="="?(y=!0,d=p.substr(2)):g=[],p[0]===">"?g.push(1):g.push(-1)):p[0]==="="?d=p.substr(1):p[0]==="~"&&(y=!0,d=p.substr(1)),g.indexOf(e.default.compareVersions(E,d,y))>-1},c.isOS=function(p){return this.getOSName(!0)===String(p).toLowerCase()},c.isPlatform=function(p){return this.getPlatformType(!0)===String(p).toLowerCase()},c.isEngine=function(p){return this.getEngineName(!0)===String(p).toLowerCase()},c.is=function(p,g){return g===void 0&&(g=!1),this.isBrowser(p,g)||this.isOS(p)||this.isPlatform(p)},c.some=function(p){var g=this;return p===void 0&&(p=[]),p.some(function(d){return g.is(d)})},r}();h.default=n,S.exports=h.default},92:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m,a=(m=u(17))&&m.__esModule?m:{default:m},s=/version\/(\d+(\.?_?\d+)+)/i,i=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=a.default.getFirstMatch(s,e)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=a.default.getFirstMatch(s,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=e.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(t,e),version:a.default.getSecondMatch(t,e)}}}];h.default=i,S.exports=h.default},93:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m,a=(m=u(17))&&m.__esModule?m:{default:m},s=u(18),i=[{test:[/Roku\/DVP/],describe:function(e){var t=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=a.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},n=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=a.default.getMacOSVersionName(t),r={name:s.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=a.default.getAndroidVersionName(t),r={name:s.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:s.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||a.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];h.default=i,S.exports=h.default},94:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m,a=(m=u(17))&&m.__esModule?m:{default:m},s=u(18),i=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=a.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=a.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return e.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return e.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return e.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return e.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return e.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return e.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return e.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return e.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return e.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];h.default=i,S.exports=h.default},95:function(S,h,u){"use strict";h.__esModule=!0,h.default=void 0;var m,a=(m=u(17))&&m.__esModule?m:{default:m},s=u(18),i=[{test:function(e){return e.getBrowserName(!0)==="microsoft edge"},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},n=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},n=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},n=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},n=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];h.default=i,S.exports=h.default}})})},M5uj:function(j,l){function f(S,h){(h==null||h>S.length)&&(h=S.length);for(var u=0,m=new Array(h);u<h;u++)m[u]=S[u];return m}o(f,"_arrayLikeToArray"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},M9Lm:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("hlxM"),u=f("nSNv");let m=o(class extends u.VoiceFocusAudioWorkletNode{enable(){return S(this,void 0,void 0,function*(){this.worker.postMessage({message:"enable"})})}disable(){return S(this,void 0,void 0,function*(){this.worker.postMessage({message:"disable"})})}stop(){return S(this,void 0,void 0,function*(){try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(s){var i;const e=s.data;switch(e.message){case"ready":this.port.postMessage({message:"ready",shared:e.shared},e.shared?Object.values(e.shared):[]);break;case"data":if(!e.buffer)return;this.port.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(e);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"processing":this.port.postMessage(e);break;default:return}}onProcessorMessage(s){var i;const e=s.data;switch(e.message){case"data":if(!e.buffer)return;this.worker.postMessage({message:"data",buffer:e.buffer},[e.buffer]);break;case"cpu":(i=this.delegate)===null||i===void 0||i.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(e);break;default:return}}constructor(s,i){super(s,i.processor,i),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:e,audioBufferURL:t,worker:n,fetchBehavior:r,delegate:c}=i;this.delegate=c,this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:p,agc:g,supportFarendStream:d}=i.processorOptions;this.worker.postMessage({message:"init",approach:"postMessage",frames:s.sampleRate===16e3?160:480,enabled:p,agc:g,fetchBehavior:r,model:e,supportFarendStream:d});const y=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:y,key:"buffer",fetchBehavior:r,path:t})}},"VoiceFocusWorkerPostMessageNode");l.default=m},MFJ1:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("rwhO"),m=h(f("3EKQ"));let a=o(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return S(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(n){this.logger.error(`Event Reporting - Error adding event to buffer ${n}`)}})}destroy(){return S(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),u.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:n,eventBufferConfiguration:r}=i,{eventsToIgnore:c}=t;this.eventBuffer=new m.default(r,t,n,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");l.default=a},ML5K:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("6/h7")),u=S(f("8wPz")),m=S(f("hEYi")),a=f("f2XL"),s=f("KyYT");let i=o(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(n)&&t(n)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(n=>{s.Maybe.of(n.didMissPongs).map(r=>r.bind(n)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const n=a.SdkPingPongFrame.create();n.pingId=t,n.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(n)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const n=t.message.pingPong.pingId;if(n!==this.pingId){this.logger.warn(`unexpected ping id ${n} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let r;if(typeof t.message.timestampMs=="number")r=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${n} with timestamp ${r}`);const p=t.timestampMs-this.pingTimestampLocalMs,g=Math.round(r-p/2),d=this.pingTimestampLocalMs-g;this.logger.info(`local clock skew estimate=${d}ms from ping-pong time=${p}ms`),this.forEachObserver(y=>{s.Maybe.of(y.didReceivePong).map(E=>E.bind(y)(n,d,p))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,n,r){this.signalingClient=t,this.intervalMs=n,this.logger=r,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new u.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=i},MW3S:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function S(h){return new Uint8Array([(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255])}o(S,"numToUint8"),l.numToUint8=S},MdQ0:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var S=f("xsFo");Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return S.convertToBuffer}});var h=f("C5aR");Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var u=f("MW3S");Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return u.numToUint8}});var m=f("ZzQ1");Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},MelK:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("cYl2");let h=o(class zc{compress(m,a){if(a.length>0){const e=Math.min(a.length,zc.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={memLevel:zc.Z_MEM_LEVEL,dictionary:a};return S.deflateRaw(m,s)}decompress(m,a){if(a.length>0){const e=Math.min(a.length,zc.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={to:"string",dictionary:a,chunkSize:4096};let i="";try{i=S.inflateRaw(m,s)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(m){this.logger=m}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},MhWp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("f2XL");let h=o(class IS{clone(){const m=new IS;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByWebRTC=this.disabledByWebRTC,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=S.SdkStreamDescriptor.create();return m.mediaType=S.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy||this.disabledByWebRTC?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,a,s,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=a,this.streamId=s,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},MpTp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class jf{add(u){this.ids.add(u)}array(){return Array.from(this.ids.values()).sort((m,a)=>m-a)}contain(u){return this.ids.has(u)}forEach(u){this.ids.forEach(u)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(u){if(!u)return this.ids.size===0;const m=this.array(),a=u.array();if(m.length!==a.length)return!1;for(let s=0;s<m.length;s++)if(m[s]!==a[s])return!1;return!0}clone(){return new jf(this.array())}remove(u){this.ids.delete(u)}toJSON(){return this.array()}truncate(u){const m=this.array();return new jf(m.splice(0,u))}constructor(u){this.ids=new Set(u)}},"DefaultVideoStreamIdSet");l.default=S},Mr6q:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{addObserver(u){this.observers.add(u)}removeObserver(u){this.observers.delete(u)}filterFrameDurationHigh(u){var m;for(const a of this.observers)(m=a.filterFrameDurationHigh)===null||m===void 0||m.call(a,u)}filterCPUUtilizationHigh(u){var m;for(const a of this.observers)(m=a.filterCPUUtilizationHigh)===null||m===void 0||m.call(a,u)}constructor(){this.observers=new Set}},"BackgroundFilterVideoFrameProcessorDelegate");l.default=S},MvPG:function(j,l,f){"use strict";f.d(l,"a",function(){return e}),f.d(l,"b",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={UnknownMethod:"unknown_method",AccessDenied:"access_denied",TriggerNotFound:"trigger_not_found"},t=Object(a.a)("workflows.triggers.info generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"workflows.triggers.info",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to workflows.triggers.info
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherworkflowsTriggersInfoFetcher",description:"workflows.triggers.info generated fetcher"}},MwVV:function(j,l,f){(function(S){var h,u,m;j.exports=function(W){var s={},i={exports:s},e=W.AbortController,t=W.AbortSignal,n=W.addEventListener,r=W.alert,c=W.AnalyserNode,p=W.Animation,g=W.AnimationEffectReadOnly,d=W.AnimationEffectTiming,y=W.AnimationEffectTimingReadOnly,E=W.AnimationEvent,w=W.AnimationPlaybackEvent,k=W.AnimationTimeline,V=W.applicationCache,F=W.ApplicationCache,N=W.ApplicationCacheErrorEvent,P=W.atob,x=W.Attr,O=W.Audio,M=W.AudioBuffer,D=W.AudioBufferSourceNode,J=W.AudioContext,q=W.AudioDestinationNode,$=W.AudioListener,de=W.AudioNode,Ee=W.AudioParam,_e=W.AudioProcessingEvent,ye=W.AudioScheduledSourceNode,Be=W.AudioWorkletGlobalScope,pt=W.AudioWorkletNode,Ve=W.AudioWorkletProcessor,gt=W.BarProp,dt=W.BaseAudioContext,Je=W.BatteryManager,_t=W.BeforeUnloadEvent,ot=W.BiquadFilterNode,Et=W.Blob,Mt=W.BlobEvent,ze=W.blur,$t=W.BroadcastChannel,Un=W.btoa,ni=W.BudgetService,an=W.ByteLengthQueuingStrategy,Gn=W.Cache,si=W.CacheStorage,ri=W.cancelAnimationFrame,On=W.cancelIdleCallback,Gi=W.CanvasCaptureMediaStreamTrack,ui=W.CanvasGradient,Fi=W.CanvasPattern,Hi=W.CanvasRenderingContext2D,Sn=W.ChannelMergerNode,un=W.ChannelSplitterNode,bn=W.CharacterData,Ot=W.clearInterval,En=W.clearTimeout,Lt=W.clientInformation,Hn=W.ClipboardEvent,Ji=W.close,$n=W.closed,Ti=W.CloseEvent,Ir=W.Comment,er=W.CompositionEvent,cr=W.confirm,gi=W.console,Yi=W.ConstantSourceNode,Xi=W.ConvolverNode,jt=W.CountQueuingStrategy,pe=W.createImageBitmap,Re=W.Credential,Fe=W.CredentialsContainer,qe=W.crypto,vt=W.Crypto,lt=W.CryptoKey,Nt=W.CSS,ln=W.CSSConditionRule,fn=W.CSSFontFaceRule,Bt=W.CSSGroupingRule,Ci=W.CSSImportRule,Si=W.CSSKeyframeRule,gr=W.CSSKeyframesRule,tr=W.CSSMatrixComponent,ai=W.CSSMediaRule,wr=W.CSSNamespaceRule,li=W.CSSPageRule,lr=W.CSSPerspective,Zn=W.CSSRotate,Or=W.CSSRule,Qi=W.CSSRuleList,zr=W.CSSScale,_r=W.CSSSkew,Zi=W.CSSSkewX,ro=W.CSSSkewY,yt=W.CSSStyleDeclaration,st=W.CSSStyleRule,dn=W.CSSStyleSheet,Kt=W.CSSSupportsRule,wn=W.CSSTransformValue,Jn=W.CSSTranslate,z=W.CustomElementRegistry,ue=W.customElements,Me=W.CustomEvent,Le=W.DataTransfer,Ye=W.DataTransferItem,St=W.DataTransferItemList,Ct=W.defaultstatus,Tt=W.defaultStatus,Ke=W.DelayNode,Pt=W.DeviceMotionEvent,Dt=W.DeviceOrientationEvent,Rn=W.devicePixelRatio,pn=W.dispatchEvent,zn=W.document,di=W.Document,Ri=W.DocumentFragment,Pi=W.DocumentType,fi=W.DOMError,hi=W.DOMException,Cn=W.DOMImplementation,zi=W.DOMMatrix,Vi=W.DOMMatrixReadOnly,Ui=W.DOMParser,Rr=W.DOMPoint,Ii=W.DOMPointReadOnly,Sr=W.DOMQuad,Xn=W.DOMRect,vi=W.DOMRectList,pi=W.DOMRectReadOnly,_i=W.DOMStringList,Yn=W.DOMStringMap,Ht=W.DOMTokenList,nr=W.DragEvent,Fs=W.DynamicsCompressorNode,qr=W.Element,dr=W.ErrorEvent,eo=W.event,to=W.Event,ur=W.EventSource,Vs=W.EventTarget,Us=W.external,Li=W.fetch,kr=W.File,xo=W.FileList,Hs=W.FileReader,Jr=W.find,bo=W.focus,uo=W.FocusEvent,Bo=W.FontFace,ys=W.FontFaceSetLoadEvent,bs=W.FormData,Zo=W.frameElement,Cs=W.frames,Es=W.GainNode,fo=W.Gamepad,no=W.GamepadButton,oo=W.GamepadEvent,ho=W.getComputedStyle,Co=W.getSelection,Eo=W.HashChangeEvent,Fo=W.Headers,qo=W.history,vr=W.History,es=W.HTMLAllCollection,Ts=W.HTMLAnchorElement,ts=W.HTMLAreaElement,Yr=W.HTMLAudioElement,Vo=W.HTMLBaseElement,Dr=W.HTMLBodyElement,po=W.HTMLBRElement,mo=W.HTMLButtonElement,Uo=W.HTMLCanvasElement,so=W.HTMLCollection,Wr=W.HTMLContentElement,To=W.HTMLDataElement,Io=W.HTMLDataListElement,jr=W.HTMLDetailsElement,go=W.HTMLDialogElement,Ho=W.HTMLDirectoryElement,Is=W.HTMLDivElement,zs=W.HTMLDListElement,Lr=W.HTMLDocument,ns=W.HTMLElement,Gr=W.HTMLEmbedElement,Ws=W.HTMLFieldSetElement,js=W.HTMLFontElement,Xr=W.HTMLFormControlsCollection,wo=W.HTMLFormElement,is=W.HTMLFrameElement,zo=W.HTMLFrameSetElement,ws=W.HTMLHeadElement,ir=W.HTMLHeadingElement,Wo=W.HTMLHRElement,Oo=W.HTMLHtmlElement,rs=W.HTMLIFrameElement,Os=W.HTMLImageElement,Qr=W.HTMLInputElement,Gs=W.HTMLLabelElement,jo=W.HTMLLegendElement,fr=W.HTMLLIElement,Go=W.HTMLLinkElement,os=W.HTMLMapElement,ss=W.HTMLMarqueeElement,$o=W.HTMLMediaElement,Ro=W.HTMLMenuElement,as=W.HTMLMetaElement,ls=W.HTMLMeterElement,ds=W.HTMLModElement,Zr=W.HTMLObjectElement,ao=W.HTMLOListElement,Mr=W.HTMLOptGroupElement,cs=W.HTMLOptionElement,lo=W.HTMLOptionsCollection,$r=W.HTMLOutputElement,Mo=W.HTMLParagraphElement,Rs=W.HTMLParamElement,Ko=W.HTMLPictureElement,$i=W.HTMLPreElement,Ms=W.HTMLProgressElement,Po=W.HTMLQuoteElement,Ni=W.HTMLScriptElement,$s=W.HTMLSelectElement,Jo=W.HTMLShadowElement,So=W.HTMLSlotElement,hr=W.HTMLSourceElement,Ks=W.HTMLSpanElement,us=W.HTMLStyleElement,Yo=W.HTMLTableCaptionElement,fs=W.HTMLTableCellElement,Js=W.HTMLTableColElement,Ys=W.HTMLTableElement,Xs=W.HTMLTableRowElement,Qs=W.HTMLTableSectionElement,Ps=W.HTMLTemplateElement,la=W.HTMLTextAreaElement,Xo=W.HTMLTimeElement,rr=W.HTMLTitleElement,Ao=W.HTMLTrackElement,hs=W.HTMLUListElement,ne=W.HTMLUnknownElement,te=W.HTMLVideoElement,Q=W.IDBCursor,A=W.IDBCursorWithValue,X=W.IDBDatabase,se=W.IDBFactory,oe=W.IDBIndex,ve=W.IDBKeyRange,Ie=W.IDBObjectStore,Ae=W.IDBOpenDBRequest,ke=W.IDBRequest,De=W.IDBTransaction,Ge=W.IDBVersionChangeEvent,Xe=W.IdleDeadline,ut=W.IIRFilterNode,Ze=W.Image,Zt=W.ImageBitmap,rn=W.ImageBitmapRenderingContext,Tn=W.ImageCapture,Pn=W.ImageData,qn=W.indexedDB,Kn=W.innerHeight,ti=W.innerWidth,ei=W.InputEvent,wi=W.IntersectionObserver,ki=W.IntersectionObserverEntry,ci=W.Intl,yi=W.isSecureContext,or=W.KeyboardEvent,Mi=W.KeyframeEffect,Wi=W.KeyframeEffectReadOnly,Kr=W.length,vo=W.localStorage,yr=W.location,In=W.Location,Jt=W.locationbar,jl=W.matchMedia,Dd=W.MediaDeviceInfo,ml=W.MediaDevices,sr=W.MediaElementAudioSourceNode,Gl=W.MediaEncryptedEvent,Na=W.MediaError,va=W.MediaKeyMessageEvent,Ld=W.MediaKeySession,gl=W.MediaKeyStatusMap,Sl=W.MediaKeySystemAccess,vl=W.MediaList,xa=W.MediaMetadata,Pr=W.MediaQueryList,sn=W.MediaQueryListEvent,Qn=W.MediaRecorder,At=W.MediaSettingsRange,Nd=W.MediaSource,yl=W.MediaStream,ps=W.MediaStreamAudioDestinationNode,da=W.MediaStreamAudioSourceNode,ca=W.MediaStreamEvent,Zs=W.MediaStreamTrack,ya=W.MediaStreamTrackEvent,xd=W.menubar,ms=W.MessageChannel,ba=W.MessageEvent,bl=W.MessagePort,Bd=W.MIDIAccess,Fd=W.MIDIConnectionEvent,Vd=W.MIDIInput,ua=W.MIDIInputMap,$l=W.MIDIMessageEvent,Ca=W.MIDIOutput,Ea=W.MIDIOutputMap,Kl=W.MIDIPort,Ba=W.MimeType,Ud=W.MimeTypeArray,Jl=W.MouseEvent,Hd=W.moveBy,Yl=W.moveTo,zd=W.MutationEvent,Fa=W.MutationObserver,Va=W.MutationRecord,Ua=W.name,Cl=W.NamedNodeMap,pr=W.NavigationPreloadManager,As=W.navigator,Ha=W.Navigator,za=W.NetworkInformation,Wa=W.Node,ja=W.NodeFilter,C=W.NodeIterator,U=W.NodeList,R=W.Notification,Y=W.OfflineAudioCompletionEvent,G=W.OfflineAudioContext,re=W.offscreenBuffering,Ce=W.OffscreenCanvas,ge=W.OffscreenCanvasRenderingContext2D,et=W.onabort,he=W.onafterprint,Te=W.onanimationend,tn=W.onanimationiteration,Qe=W.onanimationstart,Ne=W.onappinstalled,It=W.onauxclick,Wn=W.onbeforeinstallprompt,en=W.onbeforeprint,Ft=W.onbeforeunload,gn=W.onblur,Yt=W.oncancel,$e=W.oncanplay,nn=W.oncanplaythrough,We=W.onchange,Rt=W.onclick,nt=W.onclose,vn=W.oncontextmenu,Vt=W.oncuechange,zt=W.ondblclick,io=W.ondevicemotion,mn=W.ondeviceorientation,El=W.ondeviceorientationabsolute,hn=W.ondrag,qs=W.ondragend,_s=W.ondragenter,ih=W.ondragleave,rh=W.ondragover,oh=W.ondragstart,sh=W.ondrop,qc=W.ondurationchange,Ta=W.onemptied,Tl=W.onended,Il=W.onerror,Xl=W.onfocus,ah=W.ongotpointercapture,eu=W.onhashchange,lh=W.oninput,dh=W.oninvalid,ch=W.onkeydown,uc=W.onkeypress,uh=W.onkeyup,fc=W.onlanguagechange,fh=W.onload,$S=W.onloadeddata,hh=W.onloadedmetadata,ph=W.onloadstart,mh=W.onlostpointercapture,tu=W.onmessage,gh=W.onmessageerror,nu=W.onmousedown,fa=W.onmouseenter,ha=W.onmouseleave,wl=W.onmousemove,iu=W.onmouseout,yo=W.onmouseover,Ol=W.onmouseup,Ql=W.onmousewheel,hc=W.onoffline,ru=W.ononline,ou=W.onpagehide,su=W.onpageshow,au=W.onpause,lu=W.onplay,ea=W.onplaying,du=W.onpointercancel,cu=W.onpointerdown,uu=W.onpointerenter,fu=W.onpointerleave,hu=W.onpointermove,KS=W.onpointerout,Sh=W.onpointerover,vh=W.onpointerup,pc=W.onpopstate,mc=W.onprogress,gc=W.onratechange,Sc=W.onrejectionhandled,vc=W.onreset,yc=W.onresize,bc=W.onscroll,Cc=W.onsearch,Ec=W.onseeked,yh=W.onseeking,bh=W.onselect,Ch=W.onstalled,Eh=W.onstorage,Th=W.onsubmit,_o=W.onsuspend,Tc=W.ontimeupdate,Ih=W.ontoggle,wh=W.ontransitionend,Mn=W.onunhandledrejection,Oh=W.onunload,Rh=W.onvolumechange,JS=W.onwaiting,ko=W.onwheel,Mh=W.open,Ph=W.openDatabase,Ah=W.opener,Zl=W.Option,ql=W.origin,ed=W.OscillatorNode,td=W.outerHeight,nd=W.outerWidth,id=W.OverconstrainedError,rd=W.PageTransitionEvent,od=W.pageXOffset,sd=W.pageYOffset,_h=W.PannerNode,kh=W.parent,Dh=W.Path2D,Lh=W.PaymentAddress,Nh=W.PaymentRequest,xh=W.PaymentRequestUpdateEvent,Bh=W.PaymentResponse,Fh=W.performance,Vh=W.Performance,Uh=W.PerformanceEntry,Hh=W.PerformanceLongTaskTiming,zh=W.PerformanceMark,Wh=W.PerformanceMeasure,Nr=W.PerformanceNavigation,pu=W.PerformanceNavigationTiming,mu=W.PerformanceObserver,gu=W.PerformanceObserverEntryList,Su=W.PerformancePaintTiming,vu=W.PerformanceResourceTiming,yu=W.PerformanceTiming,ad=W.PeriodicWave,bu=W.Permissions,ld=W.PermissionStatus,Ic=W.personalbar,Cu=W.PhotoCapabilities,Eu=W.Plugin,Tu=W.PluginArray,Iu=W.PointerEvent,dd=W.PopStateEvent,wc=W.postMessage,wu=W.Presentation,Wd=W.PresentationAvailability,Ou=W.PresentationConnection,Ru=W.PresentationConnectionAvailableEvent,Mu=W.PresentationConnectionCloseEvent,Oc=W.PresentationConnectionList,Pu=W.PresentationReceiver,Au=W.PresentationRequest,cd=W.print,_u=W.ProcessingInstruction,ku=W.ProgressEvent,Du=W.PromiseRejectionEvent,Lu=W.prompt,Nu=W.PushManager,xu=W.PushSubscription,Bu=W.PushSubscriptionOptions,Fu=W.queueMicrotask,Vu=W.RadioNodeList,Uu=W.Range,Hu=W.ReadableStream,zu=W.registerProcessor,Wu=W.RemotePlayback,ju=W.removeEventListener,Gu=W.Request,$u=W.requestAnimationFrame,Ku=W.requestIdleCallback,Ju=W.resizeBy,Yu=W.ResizeObserver,Xu=W.ResizeObserverEntry,Qu=W.resizeTo,Zu=W.Response,qu=W.RTCCertificate,ef=W.RTCDataChannel,tf=W.RTCDataChannelEvent,nf=W.RTCDtlsTransport,rf=W.RTCIceCandidate,of=W.RTCIceGatherer,sf=W.RTCIceTransport,af=W.RTCPeerConnection,lf=W.RTCPeerConnectionIceEvent,df=W.RTCRtpContributingSource,cf=W.RTCRtpReceiver,uf=W.RTCRtpSender,ff=W.RTCSctpTransport,hf=W.RTCSessionDescription,pf=W.RTCStatsReport,mf=W.RTCTrackEvent,gf=W.screen,Sf=W.Screen,vf=W.screenLeft,yf=W.ScreenOrientation,bf=W.screenTop,Cf=W.screenX,Ef=W.screenY,jh=W.ScriptProcessorNode,Gh=W.scroll,$h=W.scrollbars,Kh=W.scrollBy,Jh=W.scrollTo,Yh=W.scrollX,Xh=W.scrollY,Qh=W.SecurityPolicyViolationEvent,Zh=W.Selection,ud=W.self,qh=W.ServiceWorker,ep=W.ServiceWorkerContainer,tp=W.ServiceWorkerRegistration,np=W.sessionStorage,ip=W.setInterval,Tf=W.setTimeout,rp=W.ShadowRoot,op=W.SharedWorker,sp=W.SourceBuffer,ap=W.SourceBufferList,lp=W.speechSynthesis,dp=W.SpeechSynthesisEvent,cp=W.SpeechSynthesisUtterance,up=W.StaticRange,fp=W.status,hp=W.statusbar,pp=W.StereoPannerNode,mp=W.stop,gp=W.Storage,Sp=W.StorageEvent,vp=W.StorageManager,yp=W.styleMedia,bp=W.StyleSheet,Cp=W.StyleSheetList,Ep=W.SubtleCrypto,Tp=W.SVGAElement,Ip=W.SVGAngle,wp=W.SVGAnimatedAngle,Op=W.SVGAnimatedBoolean,Rp=W.SVGAnimatedEnumeration,Mp=W.SVGAnimatedInteger,Pp=W.SVGAnimatedLength,Ap=W.SVGAnimatedLengthList,_p=W.SVGAnimatedNumber,kp=W.SVGAnimatedNumberList,Dp=W.SVGAnimatedPreserveAspectRatio,Lp=W.SVGAnimatedRect,Np=W.SVGAnimatedString,xp=W.SVGAnimatedTransformList,Bp=W.SVGAnimateElement,Fp=W.SVGAnimateMotionElement,Vp=W.SVGAnimateTransformElement,Up=W.SVGAnimationElement,Hp=W.SVGCircleElement,zp=W.SVGClipPathElement,Wp=W.SVGComponentTransferFunctionElement,jp=W.SVGDefsElement,Gp=W.SVGDescElement,$p=W.SVGDiscardElement,Kp=W.SVGElement,Jp=W.SVGEllipseElement,Yp=W.SVGFEBlendElement,Xp=W.SVGFEColorMatrixElement,Qp=W.SVGFEComponentTransferElement,Zp=W.SVGFECompositeElement,qp=W.SVGFEConvolveMatrixElement,em=W.SVGFEDiffuseLightingElement,tm=W.SVGFEDisplacementMapElement,nm=W.SVGFEDistantLightElement,im=W.SVGFEDropShadowElement,rm=W.SVGFEFloodElement,om=W.SVGFEFuncAElement,sm=W.SVGFEFuncBElement,am=W.SVGFEFuncGElement,lm=W.SVGFEFuncRElement,dm=W.SVGFEGaussianBlurElement,cm=W.SVGFEImageElement,um=W.SVGFEMergeElement,fm=W.SVGFEMergeNodeElement,hm=W.SVGFEMorphologyElement,pm=W.SVGFEOffsetElement,mm=W.SVGFEPointLightElement,gm=W.SVGFESpecularLightingElement,Sm=W.SVGFESpotLightElement,vm=W.SVGFETileElement,ym=W.SVGFETurbulenceElement,bm=W.SVGFilterElement,Cm=W.SVGForeignObjectElement,Em=W.SVGGElement,Tm=W.SVGGeometryElement,Im=W.SVGGradientElement,wm=W.SVGGraphicsElement,Om=W.SVGImageElement,Rm=W.SVGLength,Mm=W.SVGLengthList,Pm=W.SVGLinearGradientElement,Am=W.SVGLineElement,_m=W.SVGMarkerElement,km=W.SVGMaskElement,Dm=W.SVGMatrix,Lm=W.SVGMetadataElement,Nm=W.SVGMPathElement,xm=W.SVGNumber,Bm=W.SVGNumberList,Fm=W.SVGPathElement,Vm=W.SVGPatternElement,Um=W.SVGPoint,Hm=W.SVGPointList,zm=W.SVGPolygonElement,Wm=W.SVGPolylineElement,jm=W.SVGPreserveAspectRatio,Gm=W.SVGRadialGradientElement,$m=W.SVGRect,Km=W.SVGRectElement,Jm=W.SVGScriptElement,Ym=W.SVGSetElement,Xm=W.SVGStopElement,Qm=W.SVGStringList,Zm=W.SVGStyleElement,qm=W.SVGSVGElement,eg=W.SVGSwitchElement,tg=W.SVGSymbolElement,ng=W.SVGTextContentElement,ig=W.SVGTextElement,rg=W.SVGTextPathElement,og=W.SVGTextPositioningElement,sg=W.SVGTitleElement,ag=W.SVGTransform,lg=W.SVGTransformList,dg=W.SVGTSpanElement,cg=W.SVGUnitTypes,ug=W.SVGUseElement,fg=W.SVGViewElement,hg=W.TaskAttributionTiming,pg=W.Text,mg=W.TextDecoder,gg=W.TextEncoder,Sg=W.TextEvent,vg=W.TextMetrics,yg=W.TextTrack,bg=W.TextTrackCue,Cg=W.TextTrackCueList,Eg=W.TextTrackList,Tg=W.TimeRanges,Ig=W.toolbar,wg=W.top,Og=W.Touch,Rg=W.TouchEvent,Mg=W.TouchList,Pg=W.TrackEvent,Ag=W.TransitionEvent,_g=W.TreeWalker,kg=W.UIEvent,kn=W.URL,jn=W.URLSearchParams,xr=W.ValidityState,Dn=W.visualViewport,ta=W.VisualViewport,Ga=W.VTTCue,Ln=W.WaveShaperNode,Nn=W.WebAssembly,xn=W.WebGL2RenderingContext,Bn=W.WebGLActiveInfo,Dg=W.WebGLBuffer,Lg=W.WebGLContextEvent,Ng=W.WebGLFramebuffer,xg=W.WebGLProgram,Bg=W.WebGLQuery,If=W.WebGLRenderbuffer,Fg=W.WebGLRenderingContext,Vg=W.WebGLSampler,Ug=W.WebGLShader,Hg=W.WebGLShaderPrecisionFormat,wf=W.WebGLSync,zg=W.WebGLTexture,Wg=W.WebGLTransformFeedback,Rc=W.WebGLUniformLocation,Of=W.WebGLVertexArrayObject,Mc=W.WebSocket,Pc=W.WheelEvent,W=W.window,gs=W.Window,jg=W.Worker,mi=W.WritableStream,ii=W.XMLDocument,Fn=W.XMLHttpRequest,Vn=W.XMLHttpRequestEventTarget,fd=W.XMLHttpRequestUpload,hd=W.XMLSerializer,pd=W.XPathEvaluator,md=W.XPathExpression,gd=W.XPathResult,Sd=W.XSLTProcessor;return function(Oi,yn){typeof s=="object"&&typeof i<"u"?yn(s,f("q1tI"),f("wSSu")):(u=[s,f("q1tI"),f("wSSu")],h=yn,m=typeof h=="function"?h.apply(s,u):h,m!==void 0&&(i.exports=m))}(this,function(Oi,yn,Ia){"use strict";function Ki(ee,_){if(!(ee instanceof _))throw new TypeError("Cannot call a class as a function")}o(Ki,"_classCallCheck");function $a(ee,_){for(var L=0;L<_.length;L++){var Z=_[L];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(ee,Z.key,Z)}}o($a,"_defineProperties");function qi(ee,_,L){return _&&$a(ee.prototype,_),L&&$a(ee,L),ee}o(qi,"_createClass");function Ue(ee,_,L){return _ in ee?Object.defineProperty(ee,_,{value:L,enumerable:!0,configurable:!0,writable:!0}):ee[_]=L,ee}o(Ue,"_defineProperty");function co(){return(co=Object.assign||function(ee){for(var _=1;_<arguments.length;_++){var L=arguments[_];for(var Z in L)Object.prototype.hasOwnProperty.call(L,Z)&&(ee[Z]=L[Z])}return ee}).apply(this,arguments)}o(co,"_extends");function Ka(ee,_){var L=Object.keys(ee);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(ee);_&&(Z=Z.filter(function(ae){return Object.getOwnPropertyDescriptor(ee,ae).enumerable})),L.push.apply(L,Z)}return L}o(Ka,"ownKeys");function oi(ee){for(var _=1;_<arguments.length;_++){var L=arguments[_]!=null?arguments[_]:{};_%2?Ka(L,!0).forEach(function(Z){Ue(ee,Z,L[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ee,Object.getOwnPropertyDescriptors(L)):Ka(L).forEach(function(Z){Object.defineProperty(ee,Z,Object.getOwnPropertyDescriptor(L,Z))})}return ee}o(oi,"_objectSpread2");function Br(ee,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(_&&_.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),_&&Ja(ee,_)}o(Br,"_inherits");function Ar(ee){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)})(ee)}o(Ar,"_getPrototypeOf");function Ja(ee,_){return(Ja=Object.setPrototypeOf||function(L,Z){return L.__proto__=Z,L})(ee,_)}o(Ja,"_setPrototypeOf");function na(ee,_){if(ee==null)return{};var L,Z,ae=function(ce,be){if(ce==null)return{};var Oe,we,Pe={},xe=Object.keys(ce);for(we=0;we<xe.length;we++)Oe=xe[we],0<=be.indexOf(Oe)||(Pe[Oe]=ce[Oe]);return Pe}(ee,_);if(Object.getOwnPropertySymbols){var me=Object.getOwnPropertySymbols(ee);for(Z=0;Z<me.length;Z++)L=me[Z],0<=_.indexOf(L)||Object.prototype.propertyIsEnumerable.call(ee,L)&&(ae[L]=ee[L])}return ae}o(na,"_objectWithoutProperties");function ft(ee){if(ee===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}o(ft,"_assertThisInitialized");function Fr(ee,_){return!_||typeof _!="object"&&typeof _!="function"?ft(ee):_}o(Fr,"_possibleConstructorReturn");function Rl(ee,_){return function(L){if(Array.isArray(L))return L}(ee)||function(L,Z){if(Symbol.iterator in Object(L)||Object.prototype.toString.call(L)==="[object Arguments]"){var ae=[],me=!0,ce=!1,be=void 0;try{for(var Oe,we=L[Symbol.iterator]();!(me=(Oe=we.next()).done)&&(ae.push(Oe.value),!Z||ae.length!==Z);me=!0);}catch(Pe){ce=!0,be=Pe}finally{try{me||we.return==null||we.return()}finally{if(ce)throw be}}return ae}}(ee,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}o(Rl,"_slicedToArray");function Ml(ee){return function(_){if(Array.isArray(_)){for(var L=0,Z=new Array(_.length);L<_.length;L++)Z[L]=_[L];return Z}}(ee)||function(_){if(Symbol.iterator in Object(_)||Object.prototype.toString.call(_)==="[object Arguments]")return Array.from(_)}(ee)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}o(Ml,"_toConsumableArray");function Ya(){var ee=this.constructor.getDerivedStateFromProps(this.props,this.state);ee!=null&&this.setState(ee)}o(Ya,"componentWillMount");function Xa(ee){this.setState(function(_){var L=this.constructor.getDerivedStateFromProps(ee,_);return L??null}.bind(this))}o(Xa,"componentWillReceiveProps");function Qa(ee,_){try{var L=this.props,Z=this.state;this.props=ee,this.state=_,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(L,Z)}finally{this.props=L,this.state=Z}}o(Qa,"componentWillUpdate");function ia(ee){var _=ee.prototype;if(!_||!_.isReactComponent)throw new Error("Can only polyfill class components");if(typeof ee.getDerivedStateFromProps!="function"&&typeof _.getSnapshotBeforeUpdate!="function")return ee;var L=null,Z=null,ae=null;if(typeof _.componentWillMount=="function"?L="componentWillMount":typeof _.UNSAFE_componentWillMount=="function"&&(L="UNSAFE_componentWillMount"),typeof _.componentWillReceiveProps=="function"?Z="componentWillReceiveProps":typeof _.UNSAFE_componentWillReceiveProps=="function"&&(Z="UNSAFE_componentWillReceiveProps"),typeof _.componentWillUpdate=="function"?ae="componentWillUpdate":typeof _.UNSAFE_componentWillUpdate=="function"&&(ae="UNSAFE_componentWillUpdate"),L!==null||Z!==null||ae!==null){var me=ee.displayName||ee.name,ce=typeof ee.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+me+" uses "+ce+" but also contains the following legacy lifecycles:"+(L!==null?`
  `+L:"")+(Z!==null?`
  `+Z:"")+(ae!==null?`
  `+ae:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof ee.getDerivedStateFromProps=="function"&&(_.componentWillMount=Ya,_.componentWillReceiveProps=Xa),typeof _.getSnapshotBeforeUpdate=="function"){if(typeof _.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");_.componentWillUpdate=Qa;var be=_.componentDidUpdate;_.componentDidUpdate=function(Oe,we,Pe){var xe=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Pe;be.call(this,Oe,we,xe)}}return ee}o(ia,"polyfill"),Qa.__suppressDeprecationWarning=Xa.__suppressDeprecationWarning=Ya.__suppressDeprecationWarning=!0;var pa=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),Ue(ft(L),"_columnStartIndex",0),Ue(ft(L),"_columnStopIndex",0),Ue(ft(L),"_rowStartIndex",0),Ue(ft(L),"_rowStopIndex",0),Ue(ft(L),"_onKeyDown",function(ce){var be=L.props,Oe=be.columnCount,we=be.disabled,Pe=be.mode,xe=be.rowCount;if(!we){var He=L._getScrollState(),ht=He.scrollToColumn,je=He.scrollToRow,it=L._getScrollState(),mt=it.scrollToColumn,bt=it.scrollToRow;switch(ce.key){case"ArrowDown":bt=Math.min(Pe==="cells"?bt+1:L._rowStopIndex+1,xe-1);break;case"ArrowLeft":mt=Math.max(Pe==="cells"?mt-1:L._columnStartIndex-1,0);break;case"ArrowRight":mt=Math.min(Pe==="cells"?mt+1:L._columnStopIndex+1,Oe-1);break;case"ArrowUp":bt=Math.max(Pe==="cells"?bt-1:L._rowStartIndex-1,0)}mt===ht&&bt===je||(ce.preventDefault(),L._updateScrollState({scrollToColumn:mt,scrollToRow:bt}))}}),Ue(ft(L),"_onSectionRendered",function(ce){var be=ce.columnStartIndex,Oe=ce.columnStopIndex,we=ce.rowStartIndex,Pe=ce.rowStopIndex;L._columnStartIndex=be,L._columnStopIndex=Oe,L._rowStartIndex=we,L._rowStopIndex=Pe}),L}return o(ee,"ArrowKeyStepper"),Br(ee,yn.PureComponent),qi(ee,[{key:"setScrollIndexes",value:function(_){var L=_.scrollToColumn,Z=_.scrollToRow;this.setState({scrollToRow:Z,scrollToColumn:L})}},{key:"render",value:function(){var _=this.props,L=_.className,Z=_.children,ae=this._getScrollState(),me=ae.scrollToColumn,ce=ae.scrollToRow;return yn.createElement("div",{className:L,onKeyDown:this._onKeyDown},Z({onSectionRendered:this._onSectionRendered,scrollToColumn:me,scrollToRow:ce}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(_){var L=_.scrollToColumn,Z=_.scrollToRow,ae=this.props,me=ae.isControlled,ce=ae.onScrollToChange;typeof ce=="function"&&ce({scrollToColumn:L,scrollToRow:Z}),me||this.setState({scrollToColumn:L,scrollToRow:Z})}}],[{key:"getDerivedStateFromProps",value:function(_,L){return _.isControlled?{}:_.scrollToColumn!==L.instanceProps.prevScrollToColumn||_.scrollToRow!==L.instanceProps.prevScrollToRow?oi({},L,{scrollToColumn:_.scrollToColumn,scrollToRow:_.scrollToRow,instanceProps:{prevScrollToColumn:_.scrollToColumn,prevScrollToRow:_.scrollToRow}}):{}}}]),ee}();function wa(ee,_){var L,Z,ae,me=(L=_!==void 0?_:typeof W<"u"?W:typeof ud<"u"?ud:S).document!==void 0&&L.document.attachEvent;if(!me){var ce=(ae=L.requestAnimationFrame||L.mozRequestAnimationFrame||L.webkitRequestAnimationFrame||function(at){return L.setTimeout(at,20)},function(at){return ae(at)}),be=(Z=L.cancelAnimationFrame||L.mozCancelAnimationFrame||L.webkitCancelAnimationFrame||L.clearTimeout,function(at){return Z(at)}),Oe=o(function(at){var wt=at.__resizeTriggers__,tt=wt.firstElementChild,cn=wt.lastElementChild,An=tt.firstElementChild;cn.scrollLeft=cn.scrollWidth,cn.scrollTop=cn.scrollHeight,An.style.width=tt.offsetWidth+1+"px",An.style.height=tt.offsetHeight+1+"px",tt.scrollLeft=tt.scrollWidth,tt.scrollTop=tt.scrollHeight},"resetTriggers"),we=o(function(at){if(!(at.target.className&&typeof at.target.className.indexOf=="function"&&at.target.className.indexOf("contract-trigger")<0&&at.target.className.indexOf("expand-trigger")<0)){var wt=this;Oe(this),this.__resizeRAF__&&be(this.__resizeRAF__),this.__resizeRAF__=ce(function(){!function(tt){return tt.offsetWidth!=tt.__resizeLast__.width||tt.offsetHeight!=tt.__resizeLast__.height}(wt)||(wt.__resizeLast__.width=wt.offsetWidth,wt.__resizeLast__.height=wt.offsetHeight,wt.__resizeListeners__.forEach(function(tt){tt.call(wt,at)}))})}},"scrollListener"),Pe=!1,xe="",He="animationstart",ht="Webkit Moz O ms".split(" "),je="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),it=L.document.createElement("fakeelement");if(it.style.animationName!==void 0&&(Pe=!0),Pe===!1){for(var mt=0;mt<ht.length;mt++)if(it.style[ht[mt]+"AnimationName"]!==void 0){xe="-"+ht[mt].toLowerCase()+"-",He=je[mt],Pe=!0;break}}var bt="resizeanim",xt="@"+xe+"keyframes "+bt+" { from { opacity: 0; } to { opacity: 0; } } ",Gt=xe+"animation: 1ms "+bt+"; "}return{addResizeListener:function(at,wt){if(me)at.attachEvent("onresize",wt);else{if(!at.__resizeTriggers__){var tt=at.ownerDocument,cn=L.getComputedStyle(at);cn&&cn.position=="static"&&(at.style.position="relative"),function(Ai){if(!Ai.getElementById("detectElementResize")){var ji=(xt||"")+".resize-triggers { "+(Gt||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',Vr=Ai.head||Ai.getElementsByTagName("head")[0],mr=Ai.createElement("style");mr.id="detectElementResize",mr.type="text/css",ee!=null&&mr.setAttribute("nonce",ee),mr.styleSheet?mr.styleSheet.cssText=ji:mr.appendChild(Ai.createTextNode(ji)),Vr.appendChild(mr)}}(tt),at.__resizeLast__={},at.__resizeListeners__=[],(at.__resizeTriggers__=tt.createElement("div")).className="resize-triggers";var An='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(W.trustedTypes){var Di=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return An}});at.__resizeTriggers__.innerHTML=Di.createHTML("")}else at.__resizeTriggers__.innerHTML=An;at.appendChild(at.__resizeTriggers__),Oe(at),at.addEventListener("scroll",we,!0),He&&(at.__resizeTriggers__.__animationListener__=function(Ai){Ai.animationName==bt&&Oe(at)},at.__resizeTriggers__.addEventListener(He,at.__resizeTriggers__.__animationListener__))}at.__resizeListeners__.push(wt)}},removeResizeListener:function(at,wt){if(me)at.detachEvent("onresize",wt);else if(at.__resizeListeners__.splice(at.__resizeListeners__.indexOf(wt),1),!at.__resizeListeners__.length){at.removeEventListener("scroll",we,!0),at.__resizeTriggers__.__animationListener__&&(at.__resizeTriggers__.removeEventListener(He,at.__resizeTriggers__.__animationListener__),at.__resizeTriggers__.__animationListener__=null);try{at.__resizeTriggers__=!at.removeChild(at.__resizeTriggers__)}catch{}}}}}o(wa,"createDetectElementResize"),Ue(pa,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),ia(pa);var Oa=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"state",{height:L.props.defaultHeight||0,width:L.props.defaultWidth||0}),Ue(ft(L),"_parentNode",void 0),Ue(ft(L),"_autoSizer",void 0),Ue(ft(L),"_window",void 0),Ue(ft(L),"_detectElementResize",void 0),Ue(ft(L),"_onResize",function(){var ce=L.props,be=ce.disableHeight,Oe=ce.disableWidth,we=ce.onResize;if(L._parentNode){var Pe=L._parentNode.offsetHeight||0,xe=L._parentNode.offsetWidth||0,He=(L._window||W).getComputedStyle(L._parentNode)||{},ht=parseInt(He.paddingLeft,10)||0,je=parseInt(He.paddingRight,10)||0,it=parseInt(He.paddingTop,10)||0,mt=parseInt(He.paddingBottom,10)||0,bt=Pe-it-mt,xt=xe-ht-je;(!be&&L.state.height!==bt||!Oe&&L.state.width!==xt)&&(L.setState({height:Pe-it-mt,width:xe-ht-je}),we({height:Pe,width:xe}))}}),Ue(ft(L),"_setRef",function(ce){L._autoSizer=ce}),L}return o(ee,"AutoSizer"),Br(ee,yn.Component),qi(ee,[{key:"componentDidMount",value:function(){var _=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=wa(_,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var _=this.props,L=_.children,Z=_.className,ae=_.disableHeight,me=_.disableWidth,ce=_.style,be=this.state,Oe=be.height,we=be.width,Pe={overflow:"visible"},xe={};return ae||(Pe.height=0,xe.height=Oe),me||(Pe.width=0,xe.width=we),yn.createElement("div",{className:Z,ref:this._setRef,style:oi({},Pe,{},ce)},L(xe))}}]),ee}();Ue(Oa,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var ma=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"_child",void 0),Ue(ft(L),"_measure",function(){var ce=L.props,be=ce.cache,Oe=ce.columnIndex,we=Oe===void 0?0:Oe,Pe=ce.parent,xe=ce.rowIndex,He=xe===void 0?L.props.index||0:xe,ht=L._getCellMeasurements(),je=ht.height,it=ht.width;je===be.getHeight(He,we)&&it===be.getWidth(He,we)||(be.set(He,we,it,je),Pe&&typeof Pe.recomputeGridSize=="function"&&Pe.recomputeGridSize({columnIndex:we,rowIndex:He}))}),Ue(ft(L),"_registerChild",function(ce){!ce||ce instanceof qr||gi.warn("CellMeasurer registerChild expects to be passed Element or null"),(L._child=ce)&&L._maybeMeasureCell()}),L}return o(ee,"CellMeasurer"),Br(ee,yn.PureComponent),qi(ee,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var _=this.props.children;return typeof _=="function"?_({measure:this._measure,registerChild:this._registerChild}):_}},{key:"_getCellMeasurements",value:function(){var _=this.props.cache,L=this._child||Ia.findDOMNode(this);if(L&&L.ownerDocument&&L.ownerDocument.defaultView&&L instanceof L.ownerDocument.defaultView.HTMLElement){var Z=L.style.width,ae=L.style.height;_.hasFixedWidth()||(L.style.width="auto"),_.hasFixedHeight()||(L.style.height="auto");var me=Math.ceil(L.offsetHeight),ce=Math.ceil(L.offsetWidth);return Z&&(L.style.width=Z),ae&&(L.style.height=ae),{height:me,width:ce}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var _=this.props,L=_.cache,Z=_.columnIndex,ae=Z===void 0?0:Z,me=_.parent,ce=_.rowIndex,be=ce===void 0?this.props.index||0:ce;if(!L.has(be,ae)){var Oe=this._getCellMeasurements(),we=Oe.height,Pe=Oe.width;L.set(be,ae,Pe,we),me&&typeof me.invalidateCellSizeAfterRender=="function"&&me.invalidateCellSizeAfterRender({columnIndex:ae,rowIndex:be})}}}]),ee}();Ue(ma,"__internalCellMeasurerFlag",!1),ma.__internalCellMeasurerFlag=!0;var Za=function(){function ee(){var _=this,L=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Ki(this,ee),Ue(this,"_cellHeightCache",{}),Ue(this,"_cellWidthCache",{}),Ue(this,"_columnWidthCache",{}),Ue(this,"_rowHeightCache",{}),Ue(this,"_defaultHeight",void 0),Ue(this,"_defaultWidth",void 0),Ue(this,"_minHeight",void 0),Ue(this,"_minWidth",void 0),Ue(this,"_keyMapper",void 0),Ue(this,"_hasFixedHeight",void 0),Ue(this,"_hasFixedWidth",void 0),Ue(this,"_columnCount",0),Ue(this,"_rowCount",0),Ue(this,"columnWidth",function(Pe){var xe=Pe.index,He=_._keyMapper(0,xe);return _._columnWidthCache[He]!==void 0?_._columnWidthCache[He]:_._defaultWidth}),Ue(this,"rowHeight",function(Pe){var xe=Pe.index,He=_._keyMapper(xe,0);return _._rowHeightCache[He]!==void 0?_._rowHeightCache[He]:_._defaultHeight});var Z=L.defaultHeight,ae=L.defaultWidth,me=L.fixedHeight,ce=L.fixedWidth,be=L.keyMapper,Oe=L.minHeight,we=L.minWidth;this._hasFixedHeight=me===!0,this._hasFixedWidth=ce===!0,this._minHeight=Oe||0,this._minWidth=we||0,this._keyMapper=be||qa,this._defaultHeight=Math.max(this._minHeight,typeof Z=="number"?Z:30),this._defaultWidth=Math.max(this._minWidth,typeof ae=="number"?ae:100),this._hasFixedHeight===!1&&this._hasFixedWidth===!1&&gi.warn("CellMeasurerCache should only measure a cell's width or height. You have configured CellMeasurerCache to measure both. This will result in poor performance."),this._hasFixedHeight===!1&&this._defaultHeight===0&&gi.warn("Fixed height CellMeasurerCache should specify a :defaultHeight greater than 0. Failing to do so will lead to unnecessary layout and poor performance."),this._hasFixedWidth===!1&&this._defaultWidth===0&&gi.warn("Fixed width CellMeasurerCache should specify a :defaultWidth greater than 0. Failing to do so will lead to unnecessary layout and poor performance.")}return o(ee,"CellMeasurerCache"),qi(ee,[{key:"clear",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0,ae=this._keyMapper(_,Z);delete this._cellHeightCache[ae],delete this._cellWidthCache[ae],this._updateCachedColumnAndRowSizes(_,Z)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0;if(this._hasFixedHeight)return this._defaultHeight;var ae=this._keyMapper(_,Z);return this._cellHeightCache[ae]!==void 0?Math.max(this._minHeight,this._cellHeightCache[ae]):this._defaultHeight}},{key:"getWidth",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0;if(this._hasFixedWidth)return this._defaultWidth;var ae=this._keyMapper(_,Z);return this._cellWidthCache[ae]!==void 0?Math.max(this._minWidth,this._cellWidthCache[ae]):this._defaultWidth}},{key:"has",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0,ae=this._keyMapper(_,Z);return this._cellHeightCache[ae]!==void 0}},{key:"set",value:function(_,L,Z,ae){var me=this._keyMapper(_,L);L>=this._columnCount&&(this._columnCount=L+1),_>=this._rowCount&&(this._rowCount=_+1),this._cellHeightCache[me]=ae,this._cellWidthCache[me]=Z,this._updateCachedColumnAndRowSizes(_,L)}},{key:"_updateCachedColumnAndRowSizes",value:function(_,L){if(!this._hasFixedWidth){for(var Z=0,ae=0;ae<this._rowCount;ae++)Z=Math.max(Z,this.getWidth(ae,L));var me=this._keyMapper(0,L);this._columnWidthCache[me]=Z}if(!this._hasFixedHeight){for(var ce=0,be=0;be<this._columnCount;be++)ce=Math.max(ce,this.getHeight(_,be));var Oe=this._keyMapper(_,0);this._rowHeightCache[Oe]=ce}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),ee}();function qa(ee,_){return"".concat(ee,"-").concat(_)}o(qa,"defaultKeyMapper");function Ra(ee){return ee&&ee.__esModule&&Object.prototype.hasOwnProperty.call(ee,"default")?ee.default:ee}o(Ra,"unwrapExports");function ra(ee,_){return ee(_={exports:{}},_.exports),_.exports}o(ra,"createCommonjsModule");var Ei=ra(function(ee,_){Object.defineProperty(_,"__esModule",{value:!0});var L=typeof Symbol=="function"&&Symbol.for,Z=L?Symbol.for("react.element"):60103,ae=L?Symbol.for("react.portal"):60106,me=L?Symbol.for("react.fragment"):60107,ce=L?Symbol.for("react.strict_mode"):60108,be=L?Symbol.for("react.profiler"):60114,Oe=L?Symbol.for("react.provider"):60109,we=L?Symbol.for("react.context"):60110,Pe=L?Symbol.for("react.async_mode"):60111,xe=L?Symbol.for("react.concurrent_mode"):60111,He=L?Symbol.for("react.forward_ref"):60112,ht=L?Symbol.for("react.suspense"):60113,je=L?Symbol.for("react.suspense_list"):60120,it=L?Symbol.for("react.memo"):60115,mt=L?Symbol.for("react.lazy"):60116,bt=L?Symbol.for("react.fundamental"):60117,xt=L?Symbol.for("react.responder"):60118,Gt=L?Symbol.for("react.scope"):60119;function at(tt){if(typeof tt=="object"&&tt!==null){var cn=tt.$$typeof;switch(cn){case Z:switch(tt=tt.type){case Pe:case xe:case me:case be:case ce:case ht:return tt;default:switch(tt=tt&&tt.$$typeof){case we:case He:case Oe:return tt;default:return cn}}case mt:case it:case ae:return cn}}}o(at,"y");function wt(tt){return at(tt)===xe}o(wt,"z"),_.typeOf=at,_.AsyncMode=Pe,_.ConcurrentMode=xe,_.ContextConsumer=we,_.ContextProvider=Oe,_.Element=Z,_.ForwardRef=He,_.Fragment=me,_.Lazy=mt,_.Memo=it,_.Portal=ae,_.Profiler=be,_.StrictMode=ce,_.Suspense=ht,_.isValidElementType=function(tt){return typeof tt=="string"||typeof tt=="function"||tt===me||tt===xe||tt===be||tt===ce||tt===ht||tt===je||typeof tt=="object"&&tt!==null&&(tt.$$typeof===mt||tt.$$typeof===it||tt.$$typeof===Oe||tt.$$typeof===we||tt.$$typeof===He||tt.$$typeof===bt||tt.$$typeof===xt||tt.$$typeof===Gt)},_.isAsyncMode=function(tt){return wt(tt)||at(tt)===Pe},_.isConcurrentMode=wt,_.isContextConsumer=function(tt){return at(tt)===we},_.isContextProvider=function(tt){return at(tt)===Oe},_.isElement=function(tt){return typeof tt=="object"&&tt!==null&&tt.$$typeof===Z},_.isForwardRef=function(tt){return at(tt)===He},_.isFragment=function(tt){return at(tt)===me},_.isLazy=function(tt){return at(tt)===mt},_.isMemo=function(tt){return at(tt)===it},_.isPortal=function(tt){return at(tt)===ae},_.isProfiler=function(tt){return at(tt)===be},_.isStrictMode=function(tt){return at(tt)===ce},_.isSuspense=function(tt){return at(tt)===ht}});Ra(Ei),Ei.typeOf,Ei.AsyncMode,Ei.ConcurrentMode,Ei.ContextConsumer,Ei.ContextProvider,Ei.Element,Ei.ForwardRef,Ei.Fragment,Ei.Lazy,Ei.Memo,Ei.Portal,Ei.Profiler,Ei.StrictMode,Ei.Suspense,Ei.isValidElementType,Ei.isAsyncMode,Ei.isConcurrentMode,Ei.isContextConsumer,Ei.isContextProvider,Ei.isElement,Ei.isForwardRef,Ei.isFragment,Ei.isLazy,Ei.isMemo,Ei.isPortal,Ei.isProfiler,Ei.isStrictMode,Ei.isSuspense;var bi=ra(function(ee,_){(function(){Object.defineProperty(_,"__esModule",{value:!0});var L=typeof Symbol=="function"&&Symbol.for,Z=L?Symbol.for("react.element"):60103,ae=L?Symbol.for("react.portal"):60106,me=L?Symbol.for("react.fragment"):60107,ce=L?Symbol.for("react.strict_mode"):60108,be=L?Symbol.for("react.profiler"):60114,Oe=L?Symbol.for("react.provider"):60109,we=L?Symbol.for("react.context"):60110,Pe=L?Symbol.for("react.async_mode"):60111,xe=L?Symbol.for("react.concurrent_mode"):60111,He=L?Symbol.for("react.forward_ref"):60112,ht=L?Symbol.for("react.suspense"):60113,je=L?Symbol.for("react.suspense_list"):60120,it=L?Symbol.for("react.memo"):60115,mt=L?Symbol.for("react.lazy"):60116,bt=L?Symbol.for("react.fundamental"):60117,xt=L?Symbol.for("react.responder"):60118,Gt=L?Symbol.for("react.scope"):60119,at=o(function(_n,Id){if(Id===void 0)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!_n){for(var ll=arguments.length,rc=new Array(2<ll?ll-2:0),Bc=2;Bc<ll;Bc++)rc[Bc-2]=arguments[Bc];(function(QS){for(var Ff=arguments.length,lS=new Array(1<Ff?Ff-1:0),Fc=1;Fc<Ff;Fc++)lS[Fc-1]=arguments[Fc];var ZS=0,dS="Warning: "+QS.replace(/%s/g,function(){return lS[ZS++]});typeof gi<"u"&&gi.warn(dS);try{throw new Error(dS)}catch{}}).apply(void 0,[Id].concat(rc))}},"lowPriorityWarningWithoutStack$1");function wt(_n){if(typeof _n=="object"&&_n!==null){var Id=_n.$$typeof;switch(Id){case Z:var ll=_n.type;switch(ll){case Pe:case xe:case me:case be:case ce:case ht:return ll;default:var rc=ll&&ll.$$typeof;switch(rc){case we:case He:case Oe:return rc;default:return Id}}case mt:case it:case ae:return Id}}}o(wt,"typeOf");var tt=Pe,cn=xe,An=we,Di=Oe,Ai=Z,ji=He,Vr=me,mr=mt,No=it,vs=ae,nc=be,ic=ce,XS=ht,sS=!1;function aS(_n){return wt(_n)===xe}o(aS,"isConcurrentMode"),_.typeOf=wt,_.AsyncMode=tt,_.ConcurrentMode=cn,_.ContextConsumer=An,_.ContextProvider=Di,_.Element=Ai,_.ForwardRef=ji,_.Fragment=Vr,_.Lazy=mr,_.Memo=No,_.Portal=vs,_.Profiler=nc,_.StrictMode=ic,_.Suspense=XS,_.isValidElementType=function(_n){return typeof _n=="string"||typeof _n=="function"||_n===me||_n===xe||_n===be||_n===ce||_n===ht||_n===je||typeof _n=="object"&&_n!==null&&(_n.$$typeof===mt||_n.$$typeof===it||_n.$$typeof===Oe||_n.$$typeof===we||_n.$$typeof===He||_n.$$typeof===bt||_n.$$typeof===xt||_n.$$typeof===Gt)},_.isAsyncMode=function(_n){return sS||at(!(sS=!0),"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API."),aS(_n)||wt(_n)===Pe},_.isConcurrentMode=aS,_.isContextConsumer=function(_n){return wt(_n)===we},_.isContextProvider=function(_n){return wt(_n)===Oe},_.isElement=function(_n){return typeof _n=="object"&&_n!==null&&_n.$$typeof===Z},_.isForwardRef=function(_n){return wt(_n)===He},_.isFragment=function(_n){return wt(_n)===me},_.isLazy=function(_n){return wt(_n)===mt},_.isMemo=function(_n){return wt(_n)===it},_.isPortal=function(_n){return wt(_n)===ae},_.isProfiler=function(_n){return wt(_n)===be},_.isStrictMode=function(_n){return wt(_n)===ce},_.isSuspense=function(_n){return wt(_n)===ht}})()});Ra(bi),bi.typeOf,bi.AsyncMode,bi.ConcurrentMode,bi.ContextConsumer,bi.ContextProvider,bi.Element,bi.ForwardRef,bi.Fragment,bi.Lazy,bi.Memo,bi.Portal,bi.Profiler,bi.StrictMode,bi.Suspense,bi.isValidElementType,bi.isAsyncMode,bi.isConcurrentMode,bi.isContextConsumer,bi.isContextProvider,bi.isElement,bi.isForwardRef,bi.isFragment,bi.isLazy,bi.isMemo,bi.isPortal,bi.isProfiler,bi.isStrictMode,bi.isSuspense;var el=ra(function(ee){ee.exports=bi}),tl=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Al=Object.prototype.propertyIsEnumerable,Ma,nl=function(){try{if(!Object.assign)return!1;var ee=new String("abc");if(ee[5]="de",Object.getOwnPropertyNames(ee)[0]==="5")return!1;for(var _={},L=0;L<10;L++)_["_"+String.fromCharCode(L)]=L;if(Object.getOwnPropertyNames(_).map(function(ae){return _[ae]}).join("")!=="0123456789")return!1;var Z={};return"abcdefghijklmnopqrst".split("").forEach(function(ae){Z[ae]=ae}),Object.keys(Object.assign({},Z)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(ee,_){for(var L,Z,ae=function(Oe){if(Oe==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Oe)}(ee),me=1;me<arguments.length;me++){for(var ce in L=Object(arguments[me]))Pl.call(L,ce)&&(ae[ce]=L[ce]);if(tl){Z=tl(L);for(var be=0;be<Z.length;be++)Al.call(L,Z[be])&&(ae[Z[be]]=L[Z[be]])}}return ae},ks="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pa={},_l=Function.call.bind(Object.prototype.hasOwnProperty);function il(ee,_,L,Z,ae){for(var me in ee)if(_l(ee,me)){var ce;try{if(typeof ee[me]!="function"){var be=Error((Z||"React class")+": "+L+" type `"+me+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof ee[me]+"`.");throw be.name="Invariant Violation",be}ce=ee[me](_,me,Z,L,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(we){ce=we}if(!ce||ce instanceof Error||Ma((Z||"React class")+": type specification of "+L+" `"+me+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof ce+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),ce instanceof Error&&!(ce.message in Pa)){Pa[ce.message]=!0;var Oe=ae?ae():"";Ma("Failed "+L+" type: "+ce.message+(Oe??""))}}}o(il,"checkPropTypes"),Ma=o(function(ee){var _="Warning: "+ee;typeof gi<"u"&&gi.error(_);try{throw new Error(_)}catch{}},"printWarning"),il.resetWarningCache=function(){Pa={}};var oa,rl=il,kl=Function.call.bind(Object.prototype.hasOwnProperty);function vd(){return null}o(vd,"emptyFunctionThatReturnsNull"),oa=o(function(ee){var _="Warning: "+ee;typeof gi<"u"&&gi.error(_);try{throw new Error(_)}catch{}},"printWarning$1");function jd(ee,_){var L=typeof Symbol=="function"&&Symbol.iterator,Z="@@iterator",ae="<<anonymous>>",me={array:we("array"),bool:we("boolean"),func:we("function"),number:we("number"),object:we("object"),string:we("string"),symbol:we("symbol"),any:Oe(vd),arrayOf:function(je){return Oe(function(it,mt,bt,xt,Gt){if(typeof je!="function")return new be("Property `"+Gt+"` of component `"+bt+"` has invalid PropType notation inside arrayOf.");var at=it[mt];if(!Array.isArray(at))return new be("Invalid "+xt+" `"+Gt+"` of type `"+xe(at)+"` supplied to `"+bt+"`, expected an array.");for(var wt=0;wt<at.length;wt++){var tt=je(at,wt,bt,xt,Gt+"["+wt+"]",ks);if(tt instanceof Error)return tt}return null})},element:Oe(function(je,it,mt,bt,xt){var Gt=je[it];return ee(Gt)?null:new be("Invalid "+bt+" `"+xt+"` of type `"+xe(Gt)+"` supplied to `"+mt+"`, expected a single ReactElement.")}),elementType:Oe(function(je,it,mt,bt,xt){var Gt=je[it];return el.isValidElementType(Gt)?null:new be("Invalid "+bt+" `"+xt+"` of type `"+xe(Gt)+"` supplied to `"+mt+"`, expected a single ReactElement type.")}),instanceOf:function(je){return Oe(function(it,mt,bt,xt,Gt){if(it[mt]instanceof je)return null;var at=je.name||ae;return new be("Invalid "+xt+" `"+Gt+"` of type `"+function(wt){return wt.constructor&&wt.constructor.name?wt.constructor.name:ae}(it[mt])+"` supplied to `"+bt+"`, expected instance of `"+at+"`.")})},node:Oe(function(je,it,mt,bt,xt){return Pe(je[it])?null:new be("Invalid "+bt+" `"+xt+"` supplied to `"+mt+"`, expected a ReactNode.")}),objectOf:function(je){return Oe(function(it,mt,bt,xt,Gt){if(typeof je!="function")return new be("Property `"+Gt+"` of component `"+bt+"` has invalid PropType notation inside objectOf.");var at=it[mt],wt=xe(at);if(wt!=="object")return new be("Invalid "+xt+" `"+Gt+"` of type `"+wt+"` supplied to `"+bt+"`, expected an object.");for(var tt in at)if(kl(at,tt)){var cn=je(at,tt,bt,xt,Gt+"."+tt,ks);if(cn instanceof Error)return cn}return null})},oneOf:function(je){return Array.isArray(je)?Oe(function(it,mt,bt,xt,Gt){for(var at=it[mt],wt=0;wt<je.length;wt++)if(ce(at,je[wt]))return null;var tt=JSON.stringify(je,function(cn,An){return He(An)==="symbol"?String(An):An});return new be("Invalid "+xt+" `"+Gt+"` of value `"+String(at)+"` supplied to `"+bt+"`, expected one of "+tt+".")}):(oa(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array."),vd)},oneOfType:function(je){if(!Array.isArray(je))return oa("Invalid argument supplied to oneOfType, expected an instance of array."),vd;for(var it=0;it<je.length;it++){var mt=je[it];if(typeof mt!="function")return oa("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ht(mt)+" at index "+it+"."),vd}return Oe(function(bt,xt,Gt,at,wt){for(var tt=0;tt<je.length;tt++)if((0,je[tt])(bt,xt,Gt,at,wt,ks)==null)return null;return new be("Invalid "+at+" `"+wt+"` supplied to `"+Gt+"`.")})},shape:function(je){return Oe(function(it,mt,bt,xt,Gt){var at=it[mt],wt=xe(at);if(wt!=="object")return new be("Invalid "+xt+" `"+Gt+"` of type `"+wt+"` supplied to `"+bt+"`, expected `object`.");for(var tt in je){var cn=je[tt];if(cn){var An=cn(at,tt,bt,xt,Gt+"."+tt,ks);if(An)return An}}return null})},exact:function(je){return Oe(function(it,mt,bt,xt,Gt){var at=it[mt],wt=xe(at);if(wt!=="object")return new be("Invalid "+xt+" `"+Gt+"` of type `"+wt+"` supplied to `"+bt+"`, expected `object`.");var tt=nl({},it[mt],je);for(var cn in tt){var An=je[cn];if(!An)return new be("Invalid "+xt+" `"+Gt+"` key `"+cn+"` supplied to `"+bt+"`.\nBad object: "+JSON.stringify(it[mt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(je),null,"  "));var Di=An(at,cn,bt,xt,Gt+"."+cn,ks);if(Di)return Di}return null})}};function ce(je,it){return je===it?je!==0||1/je==1/it:je!=je&&it!=it}o(ce,"is");function be(je){this.message=je,this.stack=""}o(be,"PropTypeError");function Oe(je){var it={},mt=0;function bt(Gt,at,wt,tt,cn,An,Di){if(tt=tt||ae,An=An||wt,Di!==ks){if(_){var Ai=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Ai.name="Invariant Violation",Ai}if(typeof gi<"u"){var ji=tt+":"+wt;!it[ji]&&mt<3&&(oa("You are manually calling a React.PropTypes validation function for the `"+An+"` prop on `"+tt+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),it[ji]=!0,mt++)}}return at[wt]==null?Gt?at[wt]===null?new be("The "+cn+" `"+An+"` is marked as required in `"+tt+"`, but its value is `null`."):new be("The "+cn+" `"+An+"` is marked as required in `"+tt+"`, but its value is `undefined`."):null:je(at,wt,tt,cn,An)}o(bt,"checkType");var xt=bt.bind(null,!1);return xt.isRequired=bt.bind(null,!0),xt}o(Oe,"createChainableTypeChecker");function we(je){return Oe(function(it,mt,bt,xt,Gt,at){var wt=it[mt];return xe(wt)===je?null:new be("Invalid "+xt+" `"+Gt+"` of type `"+He(wt)+"` supplied to `"+bt+"`, expected `"+je+"`.")})}o(we,"createPrimitiveTypeChecker");function Pe(je){switch(typeof je){case"number":case"string":case"undefined":return!0;case"boolean":return!je;case"object":if(Array.isArray(je))return je.every(Pe);if(je===null||ee(je))return!0;var it=function(Gt){var at=Gt&&(L&&Gt[L]||Gt[Z]);if(typeof at=="function")return at}(je);if(!it)return!1;var mt,bt=it.call(je);if(it!==je.entries){for(;!(mt=bt.next()).done;)if(!Pe(mt.value))return!1}else for(;!(mt=bt.next()).done;){var xt=mt.value;if(xt&&!Pe(xt[1]))return!1}return!0;default:return!1}}o(Pe,"isNode");function xe(je){var it=typeof je;return Array.isArray(je)?"array":je instanceof RegExp?"object":function(mt,bt){return mt==="symbol"||!!bt&&(bt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&bt instanceof Symbol)}(it,je)?"symbol":it}o(xe,"getPropType");function He(je){if(je==null)return""+je;var it=xe(je);if(it==="object"){if(je instanceof Date)return"date";if(je instanceof RegExp)return"regexp"}return it}o(He,"getPreciseType");function ht(je){var it=He(je);switch(it){case"array":case"object":return"an "+it;case"boolean":case"date":case"regexp":return"a "+it;default:return it}}return o(ht,"getPostfixForTypeWarning"),be.prototype=Error.prototype,me.checkPropTypes=rl,me.resetWarningCache=rl.resetWarningCache,me.PropTypes=me}o(jd,"factoryWithTypeCheckers");var ct=ra(function(ee){var _=el;ee.exports=jd(_.isElement,!0)});function Gd(ee){var _,L,Z="";if(ee)if(typeof ee=="object")if(ee.push)for(_=0;_<ee.length;_++)ee[_]&&(L=Gd(ee[_]))&&(Z&&(Z+=" "),Z+=L);else for(_ in ee)ee[_]&&(L=Gd(_))&&(Z&&(Z+=" "),Z+=L);else typeof ee=="boolean"||ee.call||(Z&&(Z+=" "),Z+=ee);return Z}o(Gd,"toVal");function Do(){for(var ee,_=0,L="";_<arguments.length;)(ee=Gd(arguments[_++]))&&(L&&(L+=" "),L+=ee);return L}o(Do,"clsx");function ol(ee){var _=!(0<arguments.length&&ee!==void 0)||ee,L={};return function(Z){var ae=Z.callback,me=Z.indices,ce=Object.keys(me),be=!_||ce.every(function(we){var Pe=me[we];return Array.isArray(Pe)?0<Pe.length:0<=Pe}),Oe=ce.length!==Object.keys(L).length||ce.some(function(we){var Pe=L[we],xe=me[we];return Array.isArray(xe)?Pe.join(",")!==xe.join(","):Pe!==xe});L=me,be&&Oe&&ae(me)}}o(ol,"createCallbackMemoizer");var yd,$d=!(typeof W>"u"||!W.document||!W.document.createElement);function Kd(ee){if((!yd&&yd!==0||ee)&&$d){var _=zn.createElement("div");_.style.position="absolute",_.style.top="-9999px",_.style.width="50px",_.style.height="50px",_.style.overflow="scroll",zn.body.appendChild(_),yd=_.offsetWidth-_.clientWidth,zn.body.removeChild(_)}return yd}o(Kd,"scrollbarSize");var Rf="observed",Aa="requested",bd=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),Ue(ft(L),"_calculateSizeAndPositionDataOnNextUpdate",!1),Ue(ft(L),"_onSectionRenderedMemoizer",ol()),Ue(ft(L),"_onScrollMemoizer",ol(!1)),Ue(ft(L),"_invokeOnSectionRenderedHelper",function(){var ce=L.props,be=ce.cellLayoutManager,Oe=ce.onSectionRendered;L._onSectionRenderedMemoizer({callback:Oe,indices:{indices:be.getLastRenderedIndices()}})}),Ue(ft(L),"_setScrollingContainerRef",function(ce){L._scrollingContainer=ce}),Ue(ft(L),"_updateScrollPositionForScrollToCell",function(){var ce=L.props,be=ce.cellLayoutManager,Oe=ce.height,we=ce.scrollToAlignment,Pe=ce.scrollToCell,xe=ce.width,He=L.state,ht=He.scrollLeft,je=He.scrollTop;if(0<=Pe){var it=be.getScrollPositionForCell({align:we,cellIndex:Pe,height:Oe,scrollLeft:ht,scrollTop:je,width:xe});it.scrollLeft===ht&&it.scrollTop===je||L._setScrollPosition(it)}}),Ue(ft(L),"_onScroll",function(ce){if(ce.target===L._scrollingContainer){L._enablePointerEventsAfterDelay();var be=L.props,Oe=be.cellLayoutManager,we=be.height,Pe=be.isScrollingChange,xe=be.width,He=L._scrollbarSize,ht=Oe.getTotalSize(),je=ht.height,it=ht.width,mt=Math.max(0,Math.min(it-xe+He,ce.target.scrollLeft)),bt=Math.max(0,Math.min(je-we+He,ce.target.scrollTop));if(L.state.scrollLeft!==mt||L.state.scrollTop!==bt){var xt=ce.cancelable?Rf:Aa;L.state.isScrolling||Pe(!0),L.setState({isScrolling:!0,scrollLeft:mt,scrollPositionChangeReason:xt,scrollTop:bt})}L._invokeOnScrollMemoizer({scrollLeft:mt,scrollTop:bt,totalWidth:it,totalHeight:je})}}),L._scrollbarSize=Kd(),L._scrollbarSize===void 0?(L._scrollbarSizeMeasured=!1,L._scrollbarSize=0):L._scrollbarSizeMeasured=!0,L}return o(ee,"CollectionView"),Br(ee,yn.PureComponent),qi(ee,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var _=this.props,L=_.cellLayoutManager,Z=_.scrollLeft,ae=_.scrollToCell,me=_.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=Kd(),this._scrollbarSizeMeasured=!0,this.setState({})),0<=ae?this._updateScrollPositionForScrollToCell():(0<=Z||0<=me)&&this._setScrollPosition({scrollLeft:Z,scrollTop:me}),this._invokeOnSectionRenderedHelper();var ce=L.getTotalSize(),be=ce.height,Oe=ce.width;this._invokeOnScrollMemoizer({scrollLeft:Z||0,scrollTop:me||0,totalHeight:be,totalWidth:Oe})}},{key:"componentDidUpdate",value:function(_,L){var Z=this.props,ae=Z.height,me=Z.scrollToAlignment,ce=Z.scrollToCell,be=Z.width,Oe=this.state,we=Oe.scrollLeft,Pe=Oe.scrollPositionChangeReason,xe=Oe.scrollTop;Pe===Aa&&(0<=we&&we!==L.scrollLeft&&we!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=we),0<=xe&&xe!==L.scrollTop&&xe!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=xe)),ae===_.height&&me===_.scrollToAlignment&&ce===_.scrollToCell&&be===_.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&En(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var _=this.props,L=_.autoHeight,Z=_.cellCount,ae=_.cellLayoutManager,me=_.className,ce=_.height,be=_.horizontalOverscanSize,Oe=_.id,we=_.noContentRenderer,Pe=_.style,xe=_.verticalOverscanSize,He=_.width,ht=this.state,je=ht.isScrolling,it=ht.scrollLeft,mt=ht.scrollTop;this._lastRenderedCellCount===Z&&this._lastRenderedCellLayoutManager===ae&&!this._calculateSizeAndPositionDataOnNextUpdate||(this._lastRenderedCellCount=Z,this._lastRenderedCellLayoutManager=ae,this._calculateSizeAndPositionDataOnNextUpdate=!1,ae.calculateSizeAndPositionData());var bt=ae.getTotalSize(),xt=bt.height,Gt=bt.width,at=Math.max(0,it-be),wt=Math.max(0,mt-xe),tt=Math.min(Gt,it+He+be),cn=Math.min(xt,mt+ce+xe),An=0<ce&&0<He?ae.cellRenderers({height:cn-wt,isScrolling:je,width:tt-at,x:at,y:wt}):[],Di={boxSizing:"border-box",direction:"ltr",height:L?"auto":ce,position:"relative",WebkitOverflowScrolling:"touch",width:He,willChange:"transform"},Ai=ce<xt?this._scrollbarSize:0,ji=He<Gt?this._scrollbarSize:0;return Di.overflowX=Gt+Ai<=He?"hidden":"auto",Di.overflowY=xt+ji<=ce?"hidden":"auto",yn.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Do("ReactVirtualized__Collection",me),id:Oe,onScroll:this._onScroll,role:"grid",style:oi({},Di,{},Pe),tabIndex:0},0<Z&&yn.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:xt,maxHeight:xt,maxWidth:Gt,overflow:"hidden",pointerEvents:je?"none":"",width:Gt}},An),Z===0&&we())}},{key:"_enablePointerEventsAfterDelay",value:function(){var _=this;this._disablePointerEventsTimeoutId&&En(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Tf(function(){(0,_.props.isScrollingChange)(!1),_._disablePointerEventsTimeoutId=null,_.setState({isScrolling:!1})},150)}},{key:"_invokeOnScrollMemoizer",value:function(_){var L=this,Z=_.scrollLeft,ae=_.scrollTop,me=_.totalHeight,ce=_.totalWidth;this._onScrollMemoizer({callback:function(be){var Oe=be.scrollLeft,we=be.scrollTop,Pe=L.props,xe=Pe.height;(0,Pe.onScroll)({clientHeight:xe,clientWidth:Pe.width,scrollHeight:me,scrollLeft:Oe,scrollTop:we,scrollWidth:ce})},indices:{scrollLeft:Z,scrollTop:ae}})}},{key:"_setScrollPosition",value:function(_){var L=_.scrollLeft,Z=_.scrollTop,ae={scrollPositionChangeReason:Aa};0<=L&&(ae.scrollLeft=L),0<=Z&&(ae.scrollTop=Z),(0<=L&&L!==this.state.scrollLeft||0<=Z&&Z!==this.state.scrollTop)&&this.setState(ae)}}],[{key:"getDerivedStateFromProps",value:function(_,L){return _.cellCount!==0||L.scrollLeft===0&&L.scrollTop===0?_.scrollLeft!==L.scrollLeft||_.scrollTop!==L.scrollTop?{scrollLeft:_.scrollLeft!=null?_.scrollLeft:L.scrollLeft,scrollTop:_.scrollTop!=null?_.scrollTop:L.scrollTop,scrollPositionChangeReason:Aa}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:Aa}}}]),ee}();Ue(bd,"propTypes",{"aria-label":ct.string,autoHeight:ct.bool,cellCount:ct.number.isRequired,cellLayoutManager:ct.object.isRequired,className:ct.string,height:ct.number.isRequired,id:ct.string,horizontalOverscanSize:ct.number.isRequired,isScrollingChange:ct.func,noContentRenderer:ct.func.isRequired,onScroll:ct.func.isRequired,onSectionRendered:ct.func.isRequired,scrollLeft:ct.number,scrollToAlignment:ct.oneOf(["auto","end","start","center"]).isRequired,scrollToCell:ct.number.isRequired,scrollTop:ct.number,style:ct.object,verticalOverscanSize:ct.number.isRequired,width:ct.number.isRequired}),Ue(bd,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),ia(bd);var Mf=function(){function ee(_){var L=_.height,Z=_.width,ae=_.x,me=_.y;Ki(this,ee),this.height=L,this.width=Z,this.x=ae,this.y=me,this._indexMap={},this._indices=[]}return o(ee,"Section"),qi(ee,[{key:"addCellIndex",value:function(_){var L=_.index;this._indexMap[L]||(this._indexMap[L]=!0,this._indices.push(L))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),ee}(),Jd=function(){function ee(){var _=0<arguments.length&&arguments[0]!==void 0?arguments[0]:100;Ki(this,ee),this._sectionSize=_,this._cellMetadata=[],this._sections={}}return o(ee,"SectionManager"),qi(ee,[{key:"getCellIndices",value:function(_){var L=_.height,Z=_.width,ae=_.x,me=_.y,ce={};return this.getSections({height:L,width:Z,x:ae,y:me}).forEach(function(be){return be.getCellIndices().forEach(function(Oe){ce[Oe]=Oe})}),Object.keys(ce).map(function(be){return ce[be]})}},{key:"getCellMetadata",value:function(_){var L=_.index;return this._cellMetadata[L]}},{key:"getSections",value:function(_){for(var L=_.height,Z=_.width,ae=_.x,me=_.y,ce=Math.floor(ae/this._sectionSize),be=Math.floor((ae+Z-1)/this._sectionSize),Oe=Math.floor(me/this._sectionSize),we=Math.floor((me+L-1)/this._sectionSize),Pe=[],xe=ce;xe<=be;xe++)for(var He=Oe;He<=we;He++){var ht="".concat(xe,".").concat(He);this._sections[ht]||(this._sections[ht]=new Mf({height:this._sectionSize,width:this._sectionSize,x:xe*this._sectionSize,y:He*this._sectionSize})),Pe.push(this._sections[ht])}return Pe}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var _=this;return Object.keys(this._sections).map(function(L){return _._sections[L].toString()})}},{key:"registerCell",value:function(_){var L=_.cellMetadatum,Z=_.index;this._cellMetadata[Z]=L,this.getSections(L).forEach(function(ae){return ae.addCellIndex({index:Z})})}}]),ee}();function Ac(ee){var _=ee.align,L=_===void 0?"auto":_,Z=ee.cellOffset,ae=ee.cellSize,me=ee.containerSize,ce=ee.currentOffset,be=Z,Oe=be-me+ae;switch(L){case"start":return be;case"end":return Oe;case"center":return be-(me-ae)/2;default:return Math.max(Oe,Math.min(be,ce))}}o(Ac,"getUpdatedOffsetForIndex");var Yd=function(){function ee(_,L){var Z;return Ki(this,ee),(Z=Fr(this,Ar(ee).call(this,_,L)))._cellMetadata=[],Z._lastRenderedCellIndices=[],Z._cellCache=[],Z._isScrollingChange=Z._isScrollingChange.bind(ft(Z)),Z._setCollectionViewRef=Z._setCollectionViewRef.bind(ft(Z)),Z}return o(ee,"Collection"),Br(ee,yn.PureComponent),qi(ee,[{key:"forceUpdate",value:function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var _=co({},this.props);return yn.createElement(bd,co({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},_))}},{key:"calculateSizeAndPositionData",value:function(){var _=this.props,L=function(Z){for(var ae=Z.cellCount,me=Z.cellSizeAndPositionGetter,ce=Z.sectionSize,be=[],Oe=new Jd(ce),we=0,Pe=0,xe=0;xe<ae;xe++){var He=me({index:xe});if(He.height==null||isNaN(He.height)||He.width==null||isNaN(He.width)||He.x==null||isNaN(He.x)||He.y==null||isNaN(He.y))throw Error("Invalid metadata returned for cell ".concat(xe,`:
        x:`).concat(He.x,", y:").concat(He.y,", width:").concat(He.width,", height:").concat(He.height));we=Math.max(we,He.y+He.height),Pe=Math.max(Pe,He.x+He.width),be[xe]=He,Oe.registerCell({cellMetadatum:He,index:xe})}return{cellMetadata:be,height:we,sectionManager:Oe,width:Pe}}({cellCount:_.cellCount,cellSizeAndPositionGetter:_.cellSizeAndPositionGetter,sectionSize:_.sectionSize});this._cellMetadata=L.cellMetadata,this._sectionManager=L.sectionManager,this._height=L.height,this._width=L.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(_){var L=_.align,Z=_.cellIndex,ae=_.height,me=_.scrollLeft,ce=_.scrollTop,be=_.width,Oe=this.props.cellCount;if(0<=Z&&Z<Oe){var we=this._cellMetadata[Z];me=Ac({align:L,cellOffset:we.x,cellSize:we.width,containerSize:be,currentOffset:me,targetIndex:Z}),ce=Ac({align:L,cellOffset:we.y,cellSize:we.height,containerSize:ae,currentOffset:ce,targetIndex:Z})}return{scrollLeft:me,scrollTop:ce}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(_){var L=this,Z=_.height,ae=_.isScrolling,me=_.width,ce=_.x,be=_.y,Oe=this.props,we=Oe.cellGroupRenderer,Pe=Oe.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:Z,width:me,x:ce,y:be}),we({cellCache:this._cellCache,cellRenderer:Pe,cellSizeAndPositionGetter:function(xe){var He=xe.index;return L._sectionManager.getCellMetadata({index:He})},indices:this._lastRenderedCellIndices,isScrolling:ae})}},{key:"_isScrollingChange",value:function(_){_||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(_){this._collectionView=_}}]),ee}();Ue(Yd,"propTypes",{"aria-label":ct.string,cellCount:ct.number.isRequired,cellGroupRenderer:ct.func.isRequired,cellRenderer:ct.func.isRequired,cellSizeAndPositionGetter:ct.func.isRequired,sectionSize:ct.number}),Ue(Yd,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(ee){var _=ee.cellCache,L=ee.cellRenderer,Z=ee.cellSizeAndPositionGetter,ae=ee.indices,me=ee.isScrolling;return ae.map(function(ce){var be=Z({index:ce}),Oe={index:ce,isScrolling:me,key:ce,style:{height:be.height,left:be.x,position:"absolute",top:be.y,width:be.width}};return me?(ce in _||(_[ce]=L(Oe)),_[ce]):L(Oe)}).filter(function(ce){return!!ce})}});var Cd=function(){function ee(_,L){var Z;return Ki(this,ee),(Z=Fr(this,Ar(ee).call(this,_,L)))._registerChild=Z._registerChild.bind(ft(Z)),Z}return o(ee,"ColumnSizer"),Br(ee,yn.PureComponent),qi(ee,[{key:"componentDidUpdate",value:function(_){var L=this.props,Z=L.columnMaxWidth,ae=L.columnMinWidth,me=L.columnCount,ce=L.width;Z===_.columnMaxWidth&&ae===_.columnMinWidth&&me===_.columnCount&&ce===_.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var _=this.props,L=_.children,Z=_.columnMaxWidth,ae=_.columnMinWidth,me=_.columnCount,ce=_.width,be=ae||1,Oe=Z?Math.min(Z,ce):ce,we=ce/me;return we=Math.max(be,we),we=Math.min(Oe,we),we=Math.floor(we),L({adjustedWidth:Math.min(ce,we*me),columnWidth:we,getColumnWidth:function(){return we},registerChild:this._registerChild})}},{key:"_registerChild",value:function(_){if(_&&typeof _.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=_,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),ee}();function _c(ee){var _=ee.cellCount,L=ee.cellSize,Z=ee.computeMetadataCallback,ae=ee.computeMetadataCallbackProps,me=ee.nextCellsCount,ce=ee.nextCellSize,be=ee.nextScrollToIndex,Oe=ee.scrollToIndex,we=ee.updateScrollOffsetForScrollToIndex;_===me&&(typeof L!="number"&&typeof ce!="number"||L===ce)||(Z(ae),0<=Oe&&Oe===be&&we())}o(_c,"calculateSizeAndPositionDataAndUpdateScrollOffset"),Ue(Cd,"propTypes",{children:ct.func.isRequired,columnMaxWidth:ct.number,columnMinWidth:ct.number,columnCount:ct.number.isRequired,width:ct.number.isRequired});var Qo,Xd=function(){function ee(_){var L=_.cellCount,Z=_.cellSizeGetter,ae=_.estimatedCellSize;Ki(this,ee),Ue(this,"_cellSizeAndPositionData",{}),Ue(this,"_lastMeasuredIndex",-1),Ue(this,"_lastBatchedIndex",-1),Ue(this,"_cellCount",void 0),Ue(this,"_cellSizeGetter",void 0),Ue(this,"_estimatedCellSize",void 0),this._cellSizeGetter=Z,this._cellCount=L,this._estimatedCellSize=ae}return o(ee,"CellSizeAndPositionManager"),qi(ee,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(_){var L=_.cellCount,Z=_.estimatedCellSize,ae=_.cellSizeGetter;this._cellCount=L,this._estimatedCellSize=Z,this._cellSizeGetter=ae}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(_){if(_<0||_>=this._cellCount)throw Error("Requested index ".concat(_," is outside of range 0..").concat(this._cellCount));if(_>this._lastMeasuredIndex)for(var L=this.getSizeAndPositionOfLastMeasuredCell(),Z=L.offset+L.size,ae=this._lastMeasuredIndex+1;ae<=_;ae++){var me=this._cellSizeGetter({index:ae});if(me===void 0||isNaN(me))throw Error("Invalid size returned for cell ".concat(ae," of value ").concat(me));me===null?(this._cellSizeAndPositionData[ae]={offset:Z,size:0},this._lastBatchedIndex=_):(this._cellSizeAndPositionData[ae]={offset:Z,size:me},Z+=me,this._lastMeasuredIndex=_)}return this._cellSizeAndPositionData[_]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return 0<=this._lastMeasuredIndex?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var _=this.getSizeAndPositionOfLastMeasuredCell();return _.offset+_.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(_){var L=_.align,Z=L===void 0?"auto":L,ae=_.containerSize,me=_.currentOffset,ce=_.targetIndex;if(ae<=0)return 0;var be,Oe=this.getSizeAndPositionOfCell(ce),we=Oe.offset,Pe=we-ae+Oe.size;switch(Z){case"start":be=we;break;case"end":be=Pe;break;case"center":be=we-(ae-Oe.size)/2;break;default:be=Math.max(Pe,Math.min(we,me))}var xe=this.getTotalSize();return Math.max(0,Math.min(xe-ae,be))}},{key:"getVisibleCellRange",value:function(_){var L=_.containerSize,Z=_.offset;if(this.getTotalSize()===0)return{};var ae=Z+L,me=this._findNearestCell(Z),ce=this.getSizeAndPositionOfCell(me);Z=ce.offset+ce.size;for(var be=me;Z<ae&&be<this._cellCount-1;)be++,Z+=this.getSizeAndPositionOfCell(be).size;return{start:me,stop:be}}},{key:"resetCell",value:function(_){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,_-1)}},{key:"_binarySearch",value:function(_,L,Z){for(;L<=_;){var ae=L+Math.floor((_-L)/2),me=this.getSizeAndPositionOfCell(ae).offset;if(me===Z)return ae;me<Z?L=ae+1:Z<me&&(_=ae-1)}return 0<L?L-1:0}},{key:"_exponentialSearch",value:function(_,L){for(var Z=1;_<this._cellCount&&this.getSizeAndPositionOfCell(_).offset<L;)_+=Z,Z*=2;return this._binarySearch(Math.min(_,this._cellCount-1),Math.floor(_/2),L)}},{key:"_findNearestCell",value:function(_){if(isNaN(_))throw Error("Invalid offset ".concat(_," specified"));_=Math.max(0,_);var L=this.getSizeAndPositionOfLastMeasuredCell(),Z=Math.max(0,this._lastMeasuredIndex);return L.offset>=_?this._binarySearch(Z,0,_):this._exponentialSearch(Z,_)}}]),ee}(),Pf=o(function(){return typeof W<"u"&&W.chrome?16777100:15e5},"getMaxElementSize"),kc=function(){function ee(_){var L=_.maxScrollSize,Z=L===void 0?Pf():L,ae=na(_,["maxScrollSize"]);Ki(this,ee),Ue(this,"_cellSizeAndPositionManager",void 0),Ue(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Xd(ae),this._maxScrollSize=Z}return o(ee,"ScalingCellSizeAndPositionManager"),qi(ee,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(_){this._cellSizeAndPositionManager.configure(_)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(_){var L=_.containerSize,Z=_.offset,ae=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize(),ce=this._getOffsetPercentage({containerSize:L,offset:Z,totalSize:me});return Math.round(ce*(me-ae))}},{key:"getSizeAndPositionOfCell",value:function(_){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(_)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(_){var L=_.align,Z=L===void 0?"auto":L,ae=_.containerSize,me=_.currentOffset,ce=_.targetIndex;me=this._safeOffsetToOffset({containerSize:ae,offset:me});var be=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:Z,containerSize:ae,currentOffset:me,targetIndex:ce});return this._offsetToSafeOffset({containerSize:ae,offset:be})}},{key:"getVisibleCellRange",value:function(_){var L=_.containerSize,Z=_.offset;return Z=this._safeOffsetToOffset({containerSize:L,offset:Z}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:L,offset:Z})}},{key:"resetCell",value:function(_){this._cellSizeAndPositionManager.resetCell(_)}},{key:"_getOffsetPercentage",value:function(_){var L=_.containerSize,Z=_.offset,ae=_.totalSize;return ae<=L?0:Z/(ae-L)}},{key:"_offsetToSafeOffset",value:function(_){var L=_.containerSize,Z=_.offset,ae=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize();if(ae===me)return Z;var ce=this._getOffsetPercentage({containerSize:L,offset:Z,totalSize:ae});return Math.round(ce*(me-L))}},{key:"_safeOffsetToOffset",value:function(_){var L=_.containerSize,Z=_.offset,ae=this._cellSizeAndPositionManager.getTotalSize(),me=this.getTotalSize();if(ae===me)return Z;var ce=this._getOffsetPercentage({containerSize:L,offset:Z,totalSize:me});return Math.round(ce*(ae-L))}}]),ee}();function Ed(ee){var _=ee.cellCount,L=ee.overscanCellsCount,Z=ee.scrollDirection,ae=ee.startIndex,me=ee.stopIndex;return Z===1?{overscanStartIndex:Math.max(0,ae),overscanStopIndex:Math.min(_-1,me+L)}:{overscanStartIndex:Math.max(0,ae-L),overscanStopIndex:Math.min(_-1,me)}}o(Ed,"defaultOverscanIndicesGetter");function Dc(ee){var _=ee.cellSize,L=ee.cellSizeAndPositionManager,Z=ee.previousCellsCount,ae=ee.previousCellSize,me=ee.previousScrollToAlignment,ce=ee.previousScrollToIndex,be=ee.previousSize,Oe=ee.scrollOffset,we=ee.scrollToAlignment,Pe=ee.scrollToIndex,xe=ee.size,He=ee.sizeJustIncreasedFromZero,ht=ee.updateScrollIndexCallback,je=L.getCellCount(),it=0<=Pe&&Pe<je;it&&(xe!==be||He||!ae||typeof _=="number"&&_!==ae||we!==me||Pe!==ce)?ht(Pe):!it&&0<je&&(xe<be||je<Z)&&Oe>L.getTotalSize()-xe&&ht(je-1)}o(Dc,"updateScrollIndexHelper");function Lc(ee){for(var _=ee.cellCache,L=ee.cellRenderer,Z=ee.columnSizeAndPositionManager,ae=ee.columnStartIndex,me=ee.columnStopIndex,ce=ee.deferredMeasurementCache,be=ee.horizontalOffsetAdjustment,Oe=ee.isScrolling,we=ee.isScrollingOptOut,Pe=ee.parent,xe=ee.rowSizeAndPositionManager,He=ee.rowStartIndex,ht=ee.rowStopIndex,je=ee.styleCache,it=ee.verticalOffsetAdjustment,mt=ee.visibleColumnIndices,bt=ee.visibleRowIndices,xt=[],Gt=Z.areOffsetsAdjusted()||xe.areOffsetsAdjusted(),at=!Oe&&!Gt,wt=He;wt<=ht;wt++)for(var tt=xe.getSizeAndPositionOfCell(wt),cn=ae;cn<=me;cn++){var An=Z.getSizeAndPositionOfCell(cn),Di=cn>=mt.start&&cn<=mt.stop&&wt>=bt.start&&wt<=bt.stop,Ai="".concat(wt,"-").concat(cn),ji=void 0;at&&je[Ai]?ji=je[Ai]:ce&&!ce.has(wt,cn)?ji={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(ji={height:tt.size,left:An.offset+be,position:"absolute",top:tt.offset+it,width:An.size},je[Ai]=ji);var Vr={columnIndex:cn,isScrolling:Oe,isVisible:Di,key:Ai,parent:Pe,rowIndex:wt,style:ji},mr=void 0;(mr=!we&&!Oe||be||it?L(Vr):(_[Ai]||(_[Ai]=L(Vr)),_[Ai]))!=null&&mr!==!1&&(Qd(Pe,mr),xt.push(mr))}return xt}o(Lc,"defaultCellRangeRenderer");function Qd(ee,_){_&&(_.type&&_.type.__internalCellMeasurerFlag&&(_=_.props.children),_&&_.props&&_.props.style===void 0&&ee.__warnedAboutMissingStyle!==!0&&(ee.__warnedAboutMissingStyle=!0,gi.warn("Rendered cell should include style property for positioning.")))}o(Qd,"warnAboutMissingStyle");var Af=(Qo=typeof W<"u"?W:typeof ud<"u"?ud:{}).requestAnimationFrame||Qo.webkitRequestAnimationFrame||Qo.mozRequestAnimationFrame||Qo.oRequestAnimationFrame||Qo.msRequestAnimationFrame||function(ee){return Qo.setTimeout(ee,1e3/60)},_f=Qo.cancelAnimationFrame||Qo.webkitCancelAnimationFrame||Qo.mozCancelAnimationFrame||Qo.oCancelAnimationFrame||Qo.msCancelAnimationFrame||function(ee){Qo.clearTimeout(ee)},Td=Af,kf=_f,sl=o(function(ee){return kf(ee.id)},"cancelAnimationTimeout"),Dl=o(function(ee,_){var L;Promise.resolve().then(function(){L=Date.now()});var Z={id:Td(o(function ae(){Date.now()-L>=_?ee.call():Z.id=Td(ae)},"timeout"))};return Z},"requestAnimationTimeout"),Df="observed",Nc="requested",Ss=function(){function ee(_){var L;Ki(this,ee),Ue(ft(L=Fr(this,Ar(ee).call(this,_))),"_onGridRenderedMemoizer",ol()),Ue(ft(L),"_onScrollMemoizer",ol(!1)),Ue(ft(L),"_deferredInvalidateColumnIndex",null),Ue(ft(L),"_deferredInvalidateRowIndex",null),Ue(ft(L),"_recomputeScrollLeftFlag",!1),Ue(ft(L),"_recomputeScrollTopFlag",!1),Ue(ft(L),"_horizontalScrollBarSize",0),Ue(ft(L),"_verticalScrollBarSize",0),Ue(ft(L),"_scrollbarPresenceChanged",!1),Ue(ft(L),"_scrollingContainer",void 0),Ue(ft(L),"_childrenToDisplay",void 0),Ue(ft(L),"_columnStartIndex",void 0),Ue(ft(L),"_columnStopIndex",void 0),Ue(ft(L),"_rowStartIndex",void 0),Ue(ft(L),"_rowStopIndex",void 0),Ue(ft(L),"_renderedColumnStartIndex",0),Ue(ft(L),"_renderedColumnStopIndex",0),Ue(ft(L),"_renderedRowStartIndex",0),Ue(ft(L),"_renderedRowStopIndex",0),Ue(ft(L),"_initialScrollTop",void 0),Ue(ft(L),"_initialScrollLeft",void 0),Ue(ft(L),"_disablePointerEventsTimeoutId",void 0),Ue(ft(L),"_styleCache",{}),Ue(ft(L),"_cellCache",{}),Ue(ft(L),"_debounceScrollEndedCallback",function(){L._disablePointerEventsTimeoutId=null,L.setState({isScrolling:!1,needToResetStyleCache:!1})}),Ue(ft(L),"_invokeOnGridRenderedHelper",function(){var me=L.props.onSectionRendered;L._onGridRenderedMemoizer({callback:me,indices:{columnOverscanStartIndex:L._columnStartIndex,columnOverscanStopIndex:L._columnStopIndex,columnStartIndex:L._renderedColumnStartIndex,columnStopIndex:L._renderedColumnStopIndex,rowOverscanStartIndex:L._rowStartIndex,rowOverscanStopIndex:L._rowStopIndex,rowStartIndex:L._renderedRowStartIndex,rowStopIndex:L._renderedRowStopIndex}})}),Ue(ft(L),"_setScrollingContainerRef",function(me){L._scrollingContainer=me}),Ue(ft(L),"_onScroll",function(me){me.target===L._scrollingContainer&&L.handleScrollEvent(me.target)});var Z=new kc({cellCount:_.columnCount,cellSizeGetter:function(me){return ee._wrapSizeGetter(_.columnWidth)(me)},estimatedCellSize:ee._getEstimatedColumnSize(_)}),ae=new kc({cellCount:_.rowCount,cellSizeGetter:function(me){return ee._wrapSizeGetter(_.rowHeight)(me)},estimatedCellSize:ee._getEstimatedRowSize(_)});return L.state={instanceProps:{columnSizeAndPositionManager:Z,rowSizeAndPositionManager:ae,prevColumnWidth:_.columnWidth,prevRowHeight:_.rowHeight,prevColumnCount:_.columnCount,prevRowCount:_.rowCount,prevIsScrolling:_.isScrolling===!0,prevScrollToColumn:_.scrollToColumn,prevScrollToRow:_.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},0<_.scrollToRow&&(L._initialScrollTop=L._getCalculatedScrollTop(_,L.state)),0<_.scrollToColumn&&(L._initialScrollLeft=L._getCalculatedScrollLeft(_,L.state)),L}return o(ee,"Grid"),Br(ee,yn.PureComponent),qi(ee,[{key:"getOffsetForCell",value:function(_){var L=0<arguments.length&&_!==void 0?_:{},Z=L.alignment,ae=Z===void 0?this.props.scrollToAlignment:Z,me=L.columnIndex,ce=me===void 0?this.props.scrollToColumn:me,be=L.rowIndex,Oe=be===void 0?this.props.scrollToRow:be,we=oi({},this.props,{scrollToAlignment:ae,scrollToColumn:ce,scrollToRow:Oe});return{scrollLeft:this._getCalculatedScrollLeft(we),scrollTop:this._getCalculatedScrollTop(we)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(_){var L=_.scrollLeft,Z=L===void 0?0:L,ae=_.scrollTop,me=ae===void 0?0:ae;if(!(me<0)){this._debounceScrollEnded();var ce=this.props,be=ce.autoHeight,Oe=ce.autoWidth,we=ce.height,Pe=ce.width,xe=this.state.instanceProps,He=xe.scrollbarSize,ht=xe.rowSizeAndPositionManager.getTotalSize(),je=xe.columnSizeAndPositionManager.getTotalSize(),it=Math.min(Math.max(0,je-Pe+He),Z),mt=Math.min(Math.max(0,ht-we+He),me);if(this.state.scrollLeft!==it||this.state.scrollTop!==mt){var bt={isScrolling:!0,scrollDirectionHorizontal:it!==this.state.scrollLeft?it>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:mt!==this.state.scrollTop?mt>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:Df};be||(bt.scrollTop=mt),Oe||(bt.scrollLeft=it),bt.needToResetStyleCache=!1,this.setState(bt)}this._invokeOnScrollMemoizer({scrollLeft:it,scrollTop:mt,totalColumnsWidth:je,totalRowsHeight:ht})}}},{key:"invalidateCellSizeAfterRender",value:function(_){var L=_.columnIndex,Z=_.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,L):L,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,Z):Z}},{key:"measureAllCells",value:function(){var _=this.props,L=_.columnCount,Z=_.rowCount,ae=this.state.instanceProps;ae.columnSizeAndPositionManager.getSizeAndPositionOfCell(L-1),ae.rowSizeAndPositionManager.getSizeAndPositionOfCell(Z-1)}},{key:"recomputeGridSize",value:function(_){var L=0<arguments.length&&_!==void 0?_:{},Z=L.columnIndex,ae=Z===void 0?0:Z,me=L.rowIndex,ce=me===void 0?0:me,be=this.props,Oe=be.scrollToColumn,we=be.scrollToRow,Pe=this.state.instanceProps;Pe.columnSizeAndPositionManager.resetCell(ae),Pe.rowSizeAndPositionManager.resetCell(ce),this._recomputeScrollLeftFlag=0<=Oe&&(this.state.scrollDirectionHorizontal===1?ae<=Oe:Oe<=ae),this._recomputeScrollTopFlag=0<=we&&(this.state.scrollDirectionVertical===1?ce<=we:we<=ce),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(_){var L=_.columnIndex,Z=_.rowIndex,ae=this.props.columnCount,me=this.props;1<ae&&L!==void 0&&this._updateScrollLeftForScrollToColumn(oi({},me,{scrollToColumn:L})),Z!==void 0&&this._updateScrollTopForScrollToRow(oi({},me,{scrollToRow:Z}))}},{key:"componentDidMount",value:function(){var _=this.props,L=_.getScrollbarSize,Z=_.height,ae=_.scrollLeft,me=_.scrollToColumn,ce=_.scrollTop,be=_.scrollToRow,Oe=_.width,we=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),we.scrollbarSizeMeasured||this.setState(function(He){var ht=oi({},He,{needToResetStyleCache:!1});return ht.instanceProps.scrollbarSize=L(),ht.instanceProps.scrollbarSizeMeasured=!0,ht}),typeof ae=="number"&&0<=ae||typeof ce=="number"&&0<=ce){var Pe=ee._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:ae,scrollTop:ce});Pe&&(Pe.needToResetStyleCache=!1,this.setState(Pe))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var xe=0<Z&&0<Oe;0<=me&&xe&&this._updateScrollLeftForScrollToColumn(),0<=be&&xe&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:ae||0,scrollTop:ce||0,totalColumnsWidth:we.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:we.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(_,L){var Z=this,ae=this.props,me=ae.autoHeight,ce=ae.autoWidth,be=ae.columnCount,Oe=ae.height,we=ae.rowCount,Pe=ae.scrollToAlignment,xe=ae.scrollToColumn,He=ae.scrollToRow,ht=ae.width,je=this.state,it=je.scrollLeft,mt=je.scrollPositionChangeReason,bt=je.scrollTop,xt=je.instanceProps;this._handleInvalidatedGridSize();var Gt=0<be&&_.columnCount===0||0<we&&_.rowCount===0;mt===Nc&&(!ce&&0<=it&&(it!==this._scrollingContainer.scrollLeft||Gt)&&(this._scrollingContainer.scrollLeft=it),!me&&0<=bt&&(bt!==this._scrollingContainer.scrollTop||Gt)&&(this._scrollingContainer.scrollTop=bt));var at=(_.width===0||_.height===0)&&0<Oe&&0<ht;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Dc({cellSizeAndPositionManager:xt.columnSizeAndPositionManager,previousCellsCount:_.columnCount,previousCellSize:_.columnWidth,previousScrollToAlignment:_.scrollToAlignment,previousScrollToIndex:_.scrollToColumn,previousSize:_.width,scrollOffset:it,scrollToAlignment:Pe,scrollToIndex:xe,size:ht,sizeJustIncreasedFromZero:at,updateScrollIndexCallback:function(){return Z._updateScrollLeftForScrollToColumn(Z.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Dc({cellSizeAndPositionManager:xt.rowSizeAndPositionManager,previousCellsCount:_.rowCount,previousCellSize:_.rowHeight,previousScrollToAlignment:_.scrollToAlignment,previousScrollToIndex:_.scrollToRow,previousSize:_.height,scrollOffset:bt,scrollToAlignment:Pe,scrollToIndex:He,size:Oe,sizeJustIncreasedFromZero:at,updateScrollIndexCallback:function(){return Z._updateScrollTopForScrollToRow(Z.props)}}),this._invokeOnGridRenderedHelper(),it!==L.scrollLeft||bt!==L.scrollTop){var wt=xt.rowSizeAndPositionManager.getTotalSize(),tt=xt.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:it,scrollTop:bt,totalColumnsWidth:tt,totalRowsHeight:wt})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&sl(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var _=this.props,L=_.autoContainerWidth,Z=_.autoHeight,ae=_.autoWidth,me=_.className,ce=_.containerProps,be=_.containerRole,Oe=_.containerStyle,we=_.height,Pe=_.id,xe=_.noContentRenderer,He=_.role,ht=_.style,je=_.tabIndex,it=_.width,mt=this.state,bt=mt.instanceProps,xt=mt.needToResetStyleCache,Gt=this._isScrolling(),at={boxSizing:"border-box",direction:"ltr",height:Z?"auto":we,position:"relative",width:ae?"auto":it,WebkitOverflowScrolling:"touch",willChange:"transform"};xt&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var wt=bt.columnSizeAndPositionManager.getTotalSize(),tt=bt.rowSizeAndPositionManager.getTotalSize(),cn=we<tt?bt.scrollbarSize:0,An=it<wt?bt.scrollbarSize:0;An===this._horizontalScrollBarSize&&cn===this._verticalScrollBarSize||(this._horizontalScrollBarSize=An,this._verticalScrollBarSize=cn,this._scrollbarPresenceChanged=!0),at.overflowX=wt+cn<=it?"hidden":"auto",at.overflowY=tt+An<=we?"hidden":"auto";var Di=this._childrenToDisplay,Ai=Di.length===0&&0<we&&0<it;return yn.createElement("div",co({ref:this._setScrollingContainerRef},ce,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Do("ReactVirtualized__Grid",me),id:Pe,onScroll:this._onScroll,role:He,style:oi({},at,{},ht),tabIndex:je}),0<Di.length&&yn.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:be,style:oi({width:L?"auto":wt,height:tt,maxWidth:wt,maxHeight:tt,overflow:"hidden",pointerEvents:Gt?"none":"",position:"relative"},Oe)},Di),Ai&&xe())}},{key:"_calculateChildrenToRender",value:function(_,L){var Z=0<arguments.length&&_!==void 0?_:this.props,ae=1<arguments.length&&L!==void 0?L:this.state,me=Z.cellRenderer,ce=Z.cellRangeRenderer,be=Z.columnCount,Oe=Z.deferredMeasurementCache,we=Z.height,Pe=Z.overscanColumnCount,xe=Z.overscanIndicesGetter,He=Z.overscanRowCount,ht=Z.rowCount,je=Z.width,it=Z.isScrollingOptOut,mt=ae.scrollDirectionHorizontal,bt=ae.scrollDirectionVertical,xt=ae.instanceProps,Gt=0<this._initialScrollTop?this._initialScrollTop:ae.scrollTop,at=0<this._initialScrollLeft?this._initialScrollLeft:ae.scrollLeft,wt=this._isScrolling(Z,ae);if(this._childrenToDisplay=[],0<we&&0<je){var tt=xt.columnSizeAndPositionManager.getVisibleCellRange({containerSize:je,offset:at}),cn=xt.rowSizeAndPositionManager.getVisibleCellRange({containerSize:we,offset:Gt}),An=xt.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:je,offset:at}),Di=xt.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:we,offset:Gt});this._renderedColumnStartIndex=tt.start,this._renderedColumnStopIndex=tt.stop,this._renderedRowStartIndex=cn.start,this._renderedRowStopIndex=cn.stop;var Ai=xe({direction:"horizontal",cellCount:be,overscanCellsCount:Pe,scrollDirection:mt,startIndex:typeof tt.start=="number"?tt.start:0,stopIndex:typeof tt.stop=="number"?tt.stop:-1}),ji=xe({direction:"vertical",cellCount:ht,overscanCellsCount:He,scrollDirection:bt,startIndex:typeof cn.start=="number"?cn.start:0,stopIndex:typeof cn.stop=="number"?cn.stop:-1}),Vr=Ai.overscanStartIndex,mr=Ai.overscanStopIndex,No=ji.overscanStartIndex,vs=ji.overscanStopIndex;if(Oe){if(!Oe.hasFixedHeight()){for(var nc=No;nc<=vs;nc++)if(!Oe.has(nc,0)){Vr=0,mr=be-1;break}}if(!Oe.hasFixedWidth()){for(var ic=Vr;ic<=mr;ic++)if(!Oe.has(0,ic)){No=0,vs=ht-1;break}}}this._childrenToDisplay=ce({cellCache:this._cellCache,cellRenderer:me,columnSizeAndPositionManager:xt.columnSizeAndPositionManager,columnStartIndex:Vr,columnStopIndex:mr,deferredMeasurementCache:Oe,horizontalOffsetAdjustment:An,isScrolling:wt,isScrollingOptOut:it,parent:this,rowSizeAndPositionManager:xt.rowSizeAndPositionManager,rowStartIndex:No,rowStopIndex:vs,scrollLeft:at,scrollTop:Gt,styleCache:this._styleCache,verticalOffsetAdjustment:Di,visibleColumnIndices:tt,visibleRowIndices:cn}),this._columnStartIndex=Vr,this._columnStopIndex=mr,this._rowStartIndex=No,this._rowStopIndex=vs}}},{key:"_debounceScrollEnded",value:function(){var _=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&sl(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Dl(this._debounceScrollEndedCallback,_)}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var _=this._deferredInvalidateColumnIndex,L=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:_,rowIndex:L})}}},{key:"_invokeOnScrollMemoizer",value:function(_){var L=this,Z=_.scrollLeft,ae=_.scrollTop,me=_.totalColumnsWidth,ce=_.totalRowsHeight;this._onScrollMemoizer({callback:function(be){var Oe=be.scrollLeft,we=be.scrollTop,Pe=L.props,xe=Pe.height;(0,Pe.onScroll)({clientHeight:xe,clientWidth:Pe.width,scrollHeight:ce,scrollLeft:Oe,scrollTop:we,scrollWidth:me})},indices:{scrollLeft:Z,scrollTop:ae}})}},{key:"_isScrolling",value:function(_,L){var Z=0<arguments.length&&_!==void 0?_:this.props,ae=1<arguments.length&&L!==void 0?L:this.state;return Object.hasOwnProperty.call(Z,"isScrolling")?Boolean(Z.isScrolling):Boolean(ae.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var _=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,_({horizontal:0<this._horizontalScrollBarSize,size:this.state.instanceProps.scrollbarSize,vertical:0<this._verticalScrollBarSize})}}},{key:"scrollToPosition",value:function(_){var L=_.scrollLeft,Z=_.scrollTop,ae=ee._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:L,scrollTop:Z});ae&&(ae.needToResetStyleCache=!1,this.setState(ae))}},{key:"_getCalculatedScrollLeft",value:function(_,L){var Z=0<arguments.length&&_!==void 0?_:this.props,ae=1<arguments.length&&L!==void 0?L:this.state;return ee._getCalculatedScrollLeft(Z,ae)}},{key:"_updateScrollLeftForScrollToColumn",value:function(_,L){var Z=0<arguments.length&&_!==void 0?_:this.props,ae=1<arguments.length&&L!==void 0?L:this.state,me=ee._getScrollLeftForScrollToColumnStateUpdate(Z,ae);me&&(me.needToResetStyleCache=!1,this.setState(me))}},{key:"_getCalculatedScrollTop",value:function(_,L){var Z=0<arguments.length&&_!==void 0?_:this.props,ae=1<arguments.length&&L!==void 0?L:this.state;return ee._getCalculatedScrollTop(Z,ae)}},{key:"_resetStyleCache",value:function(){var _=this._styleCache,L=this._cellCache,Z=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var ae=this._rowStartIndex;ae<=this._rowStopIndex;ae++)for(var me=this._columnStartIndex;me<=this._columnStopIndex;me++){var ce="".concat(ae,"-").concat(me);this._styleCache[ce]=_[ce],Z&&(this._cellCache[ce]=L[ce])}}},{key:"_updateScrollTopForScrollToRow",value:function(_,L){var Z=0<arguments.length&&_!==void 0?_:this.props,ae=1<arguments.length&&L!==void 0?L:this.state,me=ee._getScrollTopForScrollToRowStateUpdate(Z,ae);me&&(me.needToResetStyleCache=!1,this.setState(me))}}],[{key:"getDerivedStateFromProps",value:function(_,L){var Z={};_.columnCount===0&&L.scrollLeft!==0||_.rowCount===0&&L.scrollTop!==0?(Z.scrollLeft=0,Z.scrollTop=0):(_.scrollLeft!==L.scrollLeft&&_.scrollToColumn<0||_.scrollTop!==L.scrollTop&&_.scrollToRow<0)&&Object.assign(Z,ee._getScrollToPositionStateUpdate({prevState:L,scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}));var ae,me,ce=L.instanceProps;return Z.needToResetStyleCache=!1,_.columnWidth===ce.prevColumnWidth&&_.rowHeight===ce.prevRowHeight||(Z.needToResetStyleCache=!0),ce.columnSizeAndPositionManager.configure({cellCount:_.columnCount,estimatedCellSize:ee._getEstimatedColumnSize(_),cellSizeGetter:ee._wrapSizeGetter(_.columnWidth)}),ce.rowSizeAndPositionManager.configure({cellCount:_.rowCount,estimatedCellSize:ee._getEstimatedRowSize(_),cellSizeGetter:ee._wrapSizeGetter(_.rowHeight)}),ce.prevColumnCount!==0&&ce.prevRowCount!==0||(ce.prevColumnCount=0,ce.prevRowCount=0),_.autoHeight&&_.isScrolling===!1&&ce.prevIsScrolling===!0&&Object.assign(Z,{isScrolling:!1}),_c({cellCount:ce.prevColumnCount,cellSize:typeof ce.prevColumnWidth=="number"?ce.prevColumnWidth:null,computeMetadataCallback:function(){return ce.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:_,nextCellsCount:_.columnCount,nextCellSize:typeof _.columnWidth=="number"?_.columnWidth:null,nextScrollToIndex:_.scrollToColumn,scrollToIndex:ce.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){ae=ee._getScrollLeftForScrollToColumnStateUpdate(_,L)}}),_c({cellCount:ce.prevRowCount,cellSize:typeof ce.prevRowHeight=="number"?ce.prevRowHeight:null,computeMetadataCallback:function(){return ce.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:_,nextCellsCount:_.rowCount,nextCellSize:typeof _.rowHeight=="number"?_.rowHeight:null,nextScrollToIndex:_.scrollToRow,scrollToIndex:ce.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){me=ee._getScrollTopForScrollToRowStateUpdate(_,L)}}),ce.prevColumnCount=_.columnCount,ce.prevColumnWidth=_.columnWidth,ce.prevIsScrolling=_.isScrolling===!0,ce.prevRowCount=_.rowCount,ce.prevRowHeight=_.rowHeight,ce.prevScrollToColumn=_.scrollToColumn,ce.prevScrollToRow=_.scrollToRow,ce.scrollbarSize=_.getScrollbarSize(),ce.scrollbarSize===void 0?(ce.scrollbarSizeMeasured=!1,ce.scrollbarSize=0):ce.scrollbarSizeMeasured=!0,Z.instanceProps=ce,oi({},Z,{},ae,{},me)}},{key:"_getEstimatedColumnSize",value:function(_){return typeof _.columnWidth=="number"?_.columnWidth:_.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(_){return typeof _.rowHeight=="number"?_.rowHeight:_.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(_){var L=_.prevState,Z=_.scrollLeft,ae=_.scrollTop,me={scrollPositionChangeReason:Nc};return typeof Z=="number"&&0<=Z&&(me.scrollDirectionHorizontal=Z>L.scrollLeft?1:-1,me.scrollLeft=Z),typeof ae=="number"&&0<=ae&&(me.scrollDirectionVertical=ae>L.scrollTop?1:-1,me.scrollTop=ae),typeof Z=="number"&&0<=Z&&Z!==L.scrollLeft||typeof ae=="number"&&0<=ae&&ae!==L.scrollTop?me:{}}},{key:"_wrapSizeGetter",value:function(_){return typeof _=="function"?_:function(){return _}}},{key:"_getCalculatedScrollLeft",value:function(_,L){var Z=_.columnCount,ae=_.height,me=_.scrollToAlignment,ce=_.scrollToColumn,be=_.width,Oe=L.scrollLeft,we=L.instanceProps;if(0<Z){var Pe=Z-1,xe=ce<0?Pe:Math.min(Pe,ce),He=we.rowSizeAndPositionManager.getTotalSize(),ht=we.scrollbarSizeMeasured&&ae<He?we.scrollbarSize:0;return we.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:me,containerSize:be-ht,currentOffset:Oe,targetIndex:xe})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(_,L){var Z=L.scrollLeft,ae=ee._getCalculatedScrollLeft(_,L);return typeof ae=="number"&&0<=ae&&Z!==ae?ee._getScrollToPositionStateUpdate({prevState:L,scrollLeft:ae,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(_,L){var Z=_.height,ae=_.rowCount,me=_.scrollToAlignment,ce=_.scrollToRow,be=_.width,Oe=L.scrollTop,we=L.instanceProps;if(0<ae){var Pe=ae-1,xe=ce<0?Pe:Math.min(Pe,ce),He=we.columnSizeAndPositionManager.getTotalSize(),ht=we.scrollbarSizeMeasured&&be<He?we.scrollbarSize:0;return we.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:me,containerSize:Z-ht,currentOffset:Oe,targetIndex:xe})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(_,L){var Z=L.scrollTop,ae=ee._getCalculatedScrollTop(_,L);return typeof ae=="number"&&0<=ae&&Z!==ae?ee._getScrollToPositionStateUpdate({prevState:L,scrollLeft:-1,scrollTop:ae}):{}}}]),ee}();Ue(Ss,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:Lc,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:Kd,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:Ed,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),ia(Ss);function T(ee){var _=ee.cellCount,L=ee.overscanCellsCount,Z=ee.scrollDirection,ae=ee.startIndex,me=ee.stopIndex;return L=Math.max(1,L),Z===1?{overscanStartIndex:Math.max(0,ae-1),overscanStopIndex:Math.min(_-1,me+L)}:{overscanStartIndex:Math.max(0,ae-L),overscanStopIndex:Math.min(_-1,me+1)}}o(T,"defaultOverscanIndicesGetter$1");var v=function(){function ee(_,L){var Z;return Ki(this,ee),(Z=Fr(this,Ar(ee).call(this,_,L)))._loadMoreRowsMemoizer=ol(),Z._onRowsRendered=Z._onRowsRendered.bind(ft(Z)),Z._registerChild=Z._registerChild.bind(ft(Z)),Z}return o(ee,"InfiniteLoader"),Br(ee,yn.PureComponent),qi(ee,[{key:"resetLoadMoreRowsCache",value:function(_){this._loadMoreRowsMemoizer=ol(),_&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(_){var L=this,Z=this.props.loadMoreRows;_.forEach(function(ae){var me=Z(ae);me&&me.then(function(){(function(ce){var be=ce.lastRenderedStartIndex,Oe=ce.lastRenderedStopIndex,we=ce.startIndex,Pe=ce.stopIndex;return!(Oe<we||Pe<be)})({lastRenderedStartIndex:L._lastRenderedStartIndex,lastRenderedStopIndex:L._lastRenderedStopIndex,startIndex:ae.startIndex,stopIndex:ae.stopIndex})&&L._registeredChild&&function(ce){var be=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,Oe=typeof ce.recomputeGridSize=="function"?ce.recomputeGridSize:ce.recomputeRowHeights;Oe?Oe.call(ce,be):ce.forceUpdate()}(L._registeredChild,L._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(_){var L=_.startIndex,Z=_.stopIndex;this._lastRenderedStartIndex=L,this._lastRenderedStopIndex=Z,this._doStuff(L,Z)}},{key:"_doStuff",value:function(_,L){var Z,ae=this,me=this.props,ce=me.isRowLoaded,be=me.minimumBatchSize,Oe=me.rowCount,we=me.threshold,Pe=function(He){for(var ht=He.isRowLoaded,je=He.minimumBatchSize,it=He.rowCount,mt=He.startIndex,bt=He.stopIndex,xt=[],Gt=null,at=null,wt=mt;wt<=bt;wt++)ht({index:wt})?at!==null&&(xt.push({startIndex:Gt,stopIndex:at}),Gt=at=null):(at=wt,Gt===null&&(Gt=wt));if(at!==null){for(var tt=Math.min(Math.max(at,Gt+je-1),it-1),cn=at+1;cn<=tt&&!ht({index:cn});cn++)at=cn;xt.push({startIndex:Gt,stopIndex:at})}if(xt.length)for(var An=xt[0];An.stopIndex-An.startIndex+1<je&&0<An.startIndex;){var Di=An.startIndex-1;if(ht({index:Di}))break;An.startIndex=Di}return xt}({isRowLoaded:ce,minimumBatchSize:be,rowCount:Oe,startIndex:Math.max(0,_-we),stopIndex:Math.min(Oe-1,L+we)}),xe=(Z=[]).concat.apply(Z,Ml(Pe.map(function(He){return[He.startIndex,He.stopIndex]})));this._loadMoreRowsMemoizer({callback:function(){ae._loadUnloadedRanges(Pe)},indices:{squashedUnloadedRanges:xe}})}},{key:"_registerChild",value:function(_){this._registeredChild=_}}]),ee}();Ue(v,"propTypes",{children:ct.func.isRequired,isRowLoaded:ct.func.isRequired,loadMoreRows:ct.func.isRequired,minimumBatchSize:ct.number.isRequired,rowCount:ct.number.isRequired,threshold:ct.number.isRequired}),Ue(v,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15});var b=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"Grid",void 0),Ue(ft(L),"_cellRenderer",function(ce){var be=ce.parent,Oe=ce.rowIndex,we=ce.style,Pe=ce.isScrolling,xe=ce.isVisible,He=ce.key,ht=L.props.rowRenderer,je=Object.getOwnPropertyDescriptor(we,"width");return je&&je.writable&&(we.width="100%"),ht({index:Oe,style:we,isScrolling:Pe,isVisible:xe,key:He,parent:be})}),Ue(ft(L),"_setRef",function(ce){L.Grid=ce}),Ue(ft(L),"_onScroll",function(ce){var be=ce.clientHeight,Oe=ce.scrollHeight,we=ce.scrollTop;(0,L.props.onScroll)({clientHeight:be,scrollHeight:Oe,scrollTop:we})}),Ue(ft(L),"_onSectionRendered",function(ce){var be=ce.rowOverscanStartIndex,Oe=ce.rowOverscanStopIndex,we=ce.rowStartIndex,Pe=ce.rowStopIndex;(0,L.props.onRowsRendered)({overscanStartIndex:be,overscanStopIndex:Oe,startIndex:we,stopIndex:Pe})}),L}return o(ee,"List"),Br(ee,yn.PureComponent),qi(ee,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(_){var L=_.alignment,Z=_.index;return this.Grid?this.Grid.getOffsetForCell({alignment:L,rowIndex:Z,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(_){var L=_.columnIndex,Z=_.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:Z,columnIndex:L})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(_){var L=0<arguments.length&&_!==void 0?_:{},Z=L.columnIndex,ae=Z===void 0?0:Z,me=L.rowIndex,ce=me===void 0?0:me;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ce,columnIndex:ae})}},{key:"recomputeRowHeights",value:function(_){var L=0<arguments.length&&_!==void 0?_:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:L,columnIndex:0})}},{key:"scrollToPosition",value:function(_){var L=0<arguments.length&&_!==void 0?_:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:L})}},{key:"scrollToRow",value:function(_){var L=0<arguments.length&&_!==void 0?_:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:L})}},{key:"render",value:function(){var _=this.props,L=_.className,Z=_.noRowsRenderer,ae=_.scrollToIndex,me=_.width,ce=Do("ReactVirtualized__List",L);return yn.createElement(Ss,co({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:ce,columnWidth:me,columnCount:1,noContentRenderer:Z,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:ae}))}}]),ee}();Ue(b,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:T,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var I={ge:function(ee,_,L,Z,ae){return typeof L=="function"?function(me,ce,be,Oe,we){for(var Pe=be+1;ce<=be;){var xe=ce+be>>>1;0<=we(me[xe],Oe)?be=(Pe=xe)-1:ce=1+xe}return Pe}(ee,Z===void 0?0:0|Z,ae===void 0?ee.length-1:0|ae,_,L):function(me,ce,be,Oe){for(var we=be+1;ce<=be;){var Pe=ce+be>>>1;Oe<=me[Pe]?be=(we=Pe)-1:ce=1+Pe}return we}(ee,L===void 0?0:0|L,Z===void 0?ee.length-1:0|Z,_)},gt:function(ee,_,L,Z,ae){return typeof L=="function"?function(me,ce,be,Oe,we){for(var Pe=be+1;ce<=be;){var xe=ce+be>>>1;0<we(me[xe],Oe)?be=(Pe=xe)-1:ce=1+xe}return Pe}(ee,Z===void 0?0:0|Z,ae===void 0?ee.length-1:0|ae,_,L):function(me,ce,be,Oe){for(var we=be+1;ce<=be;){var Pe=ce+be>>>1;Oe<me[Pe]?be=(we=Pe)-1:ce=1+Pe}return we}(ee,L===void 0?0:0|L,Z===void 0?ee.length-1:0|Z,_)},lt:function(ee,_,L,Z,ae){return typeof L=="function"?function(me,ce,be,Oe,we){for(var Pe=ce-1;ce<=be;){var xe=ce+be>>>1;we(me[xe],Oe)<0?ce=1+(Pe=xe):be=xe-1}return Pe}(ee,Z===void 0?0:0|Z,ae===void 0?ee.length-1:0|ae,_,L):function(me,ce,be,Oe){for(var we=ce-1;ce<=be;){var Pe=ce+be>>>1;me[Pe]<Oe?ce=1+(we=Pe):be=Pe-1}return we}(ee,L===void 0?0:0|L,Z===void 0?ee.length-1:0|Z,_)},le:function(ee,_,L,Z,ae){return typeof L=="function"?function(me,ce,be,Oe,we){for(var Pe=ce-1;ce<=be;){var xe=ce+be>>>1;we(me[xe],Oe)<=0?ce=1+(Pe=xe):be=xe-1}return Pe}(ee,Z===void 0?0:0|Z,ae===void 0?ee.length-1:0|ae,_,L):function(me,ce,be,Oe){for(var we=ce-1;ce<=be;){var Pe=ce+be>>>1;me[Pe]<=Oe?ce=1+(we=Pe):be=Pe-1}return we}(ee,L===void 0?0:0|L,Z===void 0?ee.length-1:0|Z,_)},eq:function(ee,_,L,Z,ae){return typeof L=="function"?function(me,ce,be,Oe,we){for(;ce<=be;){var Pe=ce+be>>>1,xe=we(me[Pe],Oe);if(xe===0)return Pe;xe<=0?ce=1+Pe:be=Pe-1}return-1}(ee,Z===void 0?0:0|Z,ae===void 0?ee.length-1:0|ae,_,L):function(me,ce,be,Oe){for(;ce<=be;){var we=ce+be>>>1,Pe=me[we];if(Pe===Oe)return we;Pe<=Oe?ce=1+we:be=we-1}return-1}(ee,L===void 0?0:0|L,Z===void 0?ee.length-1:0|Z,_)}};function B(ee,_,L,Z,ae){this.mid=ee,this.left=_,this.right=L,this.leftPoints=Z,this.rightPoints=ae,this.count=(_?_.count:0)+(L?L.count:0)+Z.length}o(B,"IntervalTreeNode");var H=B.prototype;function K(ee,_){ee.mid=_.mid,ee.left=_.left,ee.right=_.right,ee.leftPoints=_.leftPoints,ee.rightPoints=_.rightPoints,ee.count=_.count}o(K,"copy");function fe(ee,_){var L=on(_);ee.mid=L.mid,ee.left=L.left,ee.right=L.right,ee.leftPoints=L.leftPoints,ee.rightPoints=L.rightPoints,ee.count=L.count}o(fe,"rebuild");function ie(ee,_){var L=ee.intervals([]);L.push(_),fe(ee,L)}o(ie,"rebuildWithInterval");function Se(ee,_){var L=ee.intervals([]),Z=L.indexOf(_);return Z<0?0:(L.splice(Z,1),fe(ee,L),1)}o(Se,"rebuildWithoutInterval");function le(ee,_,L){for(var Z=0;Z<ee.length&&ee[Z][0]<=_;++Z){var ae=L(ee[Z]);if(ae)return ae}}o(le,"reportLeftRange");function rt(ee,_,L){for(var Z=ee.length-1;0<=Z&&ee[Z][1]>=_;--Z){var ae=L(ee[Z]);if(ae)return ae}}o(rt,"reportRightRange");function kt(ee,_){for(var L=0;L<ee.length;++L){var Z=_(ee[L]);if(Z)return Z}}o(kt,"reportRange");function qt(ee,_){return ee-_}o(qt,"compareNumbers");function Wt(ee,_){var L=ee[0]-_[0];return L||ee[1]-_[1]}o(Wt,"compareBegin");function Ut(ee,_){var L=ee[1]-_[1];return L||ee[0]-_[0]}o(Ut,"compareEnd");function on(ee){if(ee.length===0)return null;for(var _=[],L=0;L<ee.length;++L)_.push(ee[L][0],ee[L][1]);_.sort(qt);var Z=_[_.length>>1],ae=[],me=[],ce=[];for(L=0;L<ee.length;++L){var be=ee[L];be[1]<Z?ae.push(be):Z<be[0]?me.push(be):ce.push(be)}var Oe=ce,we=ce.slice();return Oe.sort(Wt),we.sort(Ut),new B(Z,on(ae),on(me),Oe,we)}o(on,"createIntervalTree");function ar(ee){this.root=ee}o(ar,"IntervalTree"),H.intervals=function(ee){return ee.push.apply(ee,this.leftPoints),this.left&&this.left.intervals(ee),this.right&&this.right.intervals(ee),ee},H.insert=function(ee){var _=this.count-this.leftPoints.length;if(this.count+=1,ee[1]<this.mid)this.left?4*(this.left.count+1)>3*(1+_)?ie(this,ee):this.left.insert(ee):this.left=on([ee]);else if(ee[0]>this.mid)this.right?4*(this.right.count+1)>3*(1+_)?ie(this,ee):this.right.insert(ee):this.right=on([ee]);else{var L=I.ge(this.leftPoints,ee,Wt),Z=I.ge(this.rightPoints,ee,Ut);this.leftPoints.splice(L,0,ee),this.rightPoints.splice(Z,0,ee)}},H.remove=function(ee){var _=this.count-this.leftPoints;if(ee[1]<this.mid)return this.left?3*(_-1)<4*(this.right?this.right.count:0)?Se(this,ee):(me=this.left.remove(ee))===2?(this.left=null,this.count-=1,1):(me===1&&(this.count-=1),me):0;if(ee[0]>this.mid)return this.right?3*(_-1)<4*(this.left?this.left.count:0)?Se(this,ee):(me=this.right.remove(ee))===2?(this.right=null,this.count-=1,1):(me===1&&(this.count-=1),me):0;if(this.count===1)return this.leftPoints[0]===ee?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===ee){if(this.left&&this.right){for(var L=this,Z=this.left;Z.right;)Z=(L=Z).right;if(L===this)Z.right=this.right;else{var ae=this.left;me=this.right,L.count-=Z.count,L.right=Z.left,Z.left=ae,Z.right=me}K(this,Z),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?K(this,this.left):K(this,this.right);return 1}for(ae=I.ge(this.leftPoints,ee,Wt);ae<this.leftPoints.length&&this.leftPoints[ae][0]===ee[0];++ae)if(this.leftPoints[ae]===ee){for(this.count-=1,this.leftPoints.splice(ae,1),me=I.ge(this.rightPoints,ee,Ut);me<this.rightPoints.length&&this.rightPoints[me][1]===ee[1];++me)if(this.rightPoints[me]===ee)return this.rightPoints.splice(me,1),1}return 0;var me},H.queryPoint=function(ee,_){if(ee<this.mid)return this.left&&(L=this.left.queryPoint(ee,_))?L:le(this.leftPoints,ee,_);if(ee>this.mid){var L;return this.right&&(L=this.right.queryPoint(ee,_))?L:rt(this.rightPoints,ee,_)}return kt(this.leftPoints,_)},H.queryInterval=function(ee,_,L){var Z;return ee<this.mid&&this.left&&(Z=this.left.queryInterval(ee,_,L))||_>this.mid&&this.right&&(Z=this.right.queryInterval(ee,_,L))?Z:_<this.mid?le(this.leftPoints,_,L):ee>this.mid?rt(this.rightPoints,ee,L):kt(this.leftPoints,L)};var Ds=ar.prototype;Ds.insert=function(ee){this.root?this.root.insert(ee):this.root=new B(ee[0],null,null,[ee],[ee])},Ds.remove=function(ee){if(this.root){var _=this.root.remove(ee);return _===2&&(this.root=null),_!==0}return!1},Ds.queryPoint=function(ee,_){if(this.root)return this.root.queryPoint(ee,_)},Ds.queryInterval=function(ee,_,L){if(ee<=_&&this.root)return this.root.queryInterval(ee,_,L)},Object.defineProperty(Ds,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(Ds,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var al=function(){function ee(){Ki(this,ee),Ue(this,"_columnSizeMap",{}),Ue(this,"_intervalTree",function(_){return _&&_.length!==0?new ar(on(_)):new ar(null)}()),Ue(this,"_leftMap",{})}return o(ee,"PositionCache"),qi(ee,[{key:"estimateTotalHeight",value:function(_,L,Z){var ae=_-this.count;return this.tallestColumnSize+Math.ceil(ae/L)*Z}},{key:"range",value:function(_,L,Z){var ae=this;this._intervalTree.queryInterval(_,_+L,function(me){var ce=Rl(me,3),be=ce[0],Oe=(ce[1],ce[2]);return Z(Oe,ae._leftMap[Oe],be)})}},{key:"setPosition",value:function(_,L,Z,ae){this._intervalTree.insert([Z,Z+ae,_]),this._leftMap[_]=L;var me=this._columnSizeMap,ce=me[L];me[L]=ce===void 0?Z+ae:Math.max(ce,Z+ae)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var _=this._columnSizeMap,L=0;for(var Z in _){var ae=_[Z];L=L===0?ae:Math.min(L,ae)}return L}},{key:"tallestColumnSize",get:function(){var _=this._columnSizeMap,L=0;for(var Z in _){var ae=_[Z];L=Math.max(L,ae)}return L}}]),ee}(),Zd=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"state",{isScrolling:!1,scrollTop:0}),Ue(ft(L),"_debounceResetIsScrollingId",void 0),Ue(ft(L),"_invalidateOnUpdateStartIndex",null),Ue(ft(L),"_invalidateOnUpdateStopIndex",null),Ue(ft(L),"_positionCache",new al),Ue(ft(L),"_startIndex",null),Ue(ft(L),"_startIndexMemoized",null),Ue(ft(L),"_stopIndex",null),Ue(ft(L),"_stopIndexMemoized",null),Ue(ft(L),"_debounceResetIsScrollingCallback",function(){L.setState({isScrolling:!1})}),Ue(ft(L),"_setScrollingContainerRef",function(ce){L._scrollingContainer=ce}),Ue(ft(L),"_onScroll",function(ce){var be=L.props.height,Oe=ce.currentTarget.scrollTop,we=Math.min(Math.max(0,L._getEstimatedTotalHeight()-be),Oe);Oe===we&&(L._debounceResetIsScrolling(),L.state.scrollTop!==we&&L.setState({isScrolling:!0,scrollTop:we}))}),L}return o(ee,"Masonry"),Br(ee,yn.PureComponent),qi(ee,[{key:"clearCellPositions",value:function(){this._positionCache=new al,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(_){var L=_.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=L,this._invalidateOnUpdateStopIndex=L):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,L),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,L))}},{key:"recomputeCellPositions",value:function(){var _=this._positionCache.count-1;this._positionCache=new al,this._populatePositionCache(0,_),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(_){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==_.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&sl(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var _,L=this,Z=this.props,ae=Z.autoHeight,me=Z.cellCount,ce=Z.cellMeasurerCache,be=Z.cellRenderer,Oe=Z.className,we=Z.height,Pe=Z.id,xe=Z.keyMapper,He=Z.overscanByPixels,ht=Z.role,je=Z.style,it=Z.tabIndex,mt=Z.width,bt=Z.rowDirection,xt=this.state,Gt=xt.isScrolling,at=xt.scrollTop,wt=[],tt=this._getEstimatedTotalHeight(),cn=this._positionCache.shortestColumnSize,An=this._positionCache.count,Di=0;if(this._positionCache.range(Math.max(0,at-He),we+2*He,function(Vr,mr,No){var vs;_=_===void 0?Di=Vr:(Di=Math.min(Di,Vr),Math.max(_,Vr)),wt.push(be({index:Vr,isScrolling:Gt,key:xe(Vr),parent:L,style:(vs={height:ce.getHeight(Vr)},Ue(vs,bt==="ltr"?"left":"right",mr),Ue(vs,"position","absolute"),Ue(vs,"top",No),Ue(vs,"width",ce.getWidth(Vr)),vs)}))}),cn<at+we+He&&An<me)for(var Ai=Math.min(me-An,Math.ceil((at+we+He-cn)/ce.defaultHeight*mt/ce.defaultWidth)),ji=An;ji<An+Ai;ji++)_=ji,wt.push(be({index:ji,isScrolling:Gt,key:xe(ji),parent:this,style:{width:ce.getWidth(ji)}}));return this._startIndex=Di,this._stopIndex=_,yn.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:Do("ReactVirtualized__Masonry",Oe),id:Pe,onScroll:this._onScroll,role:ht,style:oi({boxSizing:"border-box",direction:"ltr",height:ae?"auto":we,overflowX:"hidden",overflowY:tt<we?"hidden":"auto",position:"relative",width:mt,WebkitOverflowScrolling:"touch",willChange:"transform"},je),tabIndex:it},yn.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:tt,maxWidth:"100%",maxHeight:tt,overflow:"hidden",pointerEvents:Gt?"none":"",position:"relative"}},wt))}},{key:"_checkInvalidateOnUpdate",value:function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var _=this._invalidateOnUpdateStartIndex,L=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(_,L),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var _=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&sl(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Dl(this._debounceResetIsScrollingCallback,_)}},{key:"_getEstimatedTotalHeight",value:function(){var _=this.props,L=_.cellCount,Z=_.cellMeasurerCache,ae=_.width,me=Math.max(1,Math.floor(ae/Z.defaultWidth));return this._positionCache.estimateTotalHeight(L,me,Z.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var _=this.props,L=_.height,Z=_.onScroll,ae=this.state.scrollTop;this._onScrollMemoized!==ae&&(Z({clientHeight:L,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:ae}),this._onScrollMemoized=ae)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(_,L){for(var Z=this.props,ae=Z.cellMeasurerCache,me=Z.cellPositioner,ce=_;ce<=L;ce++){var be=me(ce),Oe=be.left,we=be.top;this._positionCache.setPosition(ce,Oe,we,ae.getHeight(ce))}}}],[{key:"getDerivedStateFromProps",value:function(_,L){return _.scrollTop!==void 0&&L.scrollTop!==_.scrollTop?{isScrolling:!0,scrollTop:_.scrollTop}:null}}]),ee}();function Gg(){}o(Gg,"noop"),Ue(Zd,"defaultProps",{autoHeight:!1,keyMapper:function(ee){return ee},onCellsRendered:Gg,onScroll:Gg,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"}),ia(Zd);var Lf=function(){function ee(){var _=this,L=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Ki(this,ee),Ue(this,"_cellMeasurerCache",void 0),Ue(this,"_columnIndexOffset",void 0),Ue(this,"_rowIndexOffset",void 0),Ue(this,"columnWidth",function(Oe){var we=Oe.index;_._cellMeasurerCache.columnWidth({index:we+_._columnIndexOffset})}),Ue(this,"rowHeight",function(Oe){var we=Oe.index;_._cellMeasurerCache.rowHeight({index:we+_._rowIndexOffset})});var Z=L.cellMeasurerCache,ae=L.columnIndexOffset,me=ae===void 0?0:ae,ce=L.rowIndexOffset,be=ce===void 0?0:ce;this._cellMeasurerCache=Z,this._columnIndexOffset=me,this._rowIndexOffset=be}return o(ee,"CellMeasurerCacheDecorator"),qi(ee,[{key:"clear",value:function(_,L){this._cellMeasurerCache.clear(_+this._rowIndexOffset,L+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0;return this._cellMeasurerCache.getHeight(_+this._rowIndexOffset,Z+this._columnIndexOffset)}},{key:"getWidth",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0;return this._cellMeasurerCache.getWidth(_+this._rowIndexOffset,Z+this._columnIndexOffset)}},{key:"has",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:0;return this._cellMeasurerCache.has(_+this._rowIndexOffset,Z+this._columnIndexOffset)}},{key:"set",value:function(_,L,Z,ae){this._cellMeasurerCache.set(_+this._rowIndexOffset,L+this._columnIndexOffset,Z,ae)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),ee}(),xc=function(){function ee(_,L){var Z;Ki(this,ee),Ue(ft(Z=Fr(this,Ar(ee).call(this,_,L))),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),Ue(ft(Z),"_deferredInvalidateColumnIndex",null),Ue(ft(Z),"_deferredInvalidateRowIndex",null),Ue(ft(Z),"_bottomLeftGridRef",function(be){Z._bottomLeftGrid=be}),Ue(ft(Z),"_bottomRightGridRef",function(be){Z._bottomRightGrid=be}),Ue(ft(Z),"_cellRendererBottomLeftGrid",function(be){var Oe=be.rowIndex,we=na(be,["rowIndex"]),Pe=Z.props,xe=Pe.cellRenderer,He=Pe.fixedRowCount;return Oe===Pe.rowCount-He?yn.createElement("div",{key:we.key,style:oi({},we.style,{height:20})}):xe(oi({},we,{parent:ft(Z),rowIndex:Oe+He}))}),Ue(ft(Z),"_cellRendererBottomRightGrid",function(be){var Oe=be.columnIndex,we=be.rowIndex,Pe=na(be,["columnIndex","rowIndex"]),xe=Z.props,He=xe.cellRenderer,ht=xe.fixedColumnCount,je=xe.fixedRowCount;return He(oi({},Pe,{columnIndex:Oe+ht,parent:ft(Z),rowIndex:we+je}))}),Ue(ft(Z),"_cellRendererTopRightGrid",function(be){var Oe=be.columnIndex,we=na(be,["columnIndex"]),Pe=Z.props,xe=Pe.cellRenderer,He=Pe.columnCount,ht=Pe.fixedColumnCount;return Oe===He-ht?yn.createElement("div",{key:we.key,style:oi({},we.style,{width:20})}):xe(oi({},we,{columnIndex:Oe+ht,parent:ft(Z)}))}),Ue(ft(Z),"_columnWidthRightGrid",function(be){var Oe=be.index,we=Z.props,Pe=we.columnCount,xe=we.fixedColumnCount,He=we.columnWidth,ht=Z.state,je=ht.scrollbarSize;return ht.showHorizontalScrollbar&&Oe===Pe-xe?je:typeof He=="function"?He({index:Oe+xe}):He}),Ue(ft(Z),"_onScroll",function(be){var Oe=be.scrollLeft,we=be.scrollTop;Z.setState({scrollLeft:Oe,scrollTop:we});var Pe=Z.props.onScroll;Pe&&Pe(be)}),Ue(ft(Z),"_onScrollbarPresenceChange",function(be){var Oe=be.horizontal,we=be.size,Pe=be.vertical,xe=Z.state,He=xe.showHorizontalScrollbar,ht=xe.showVerticalScrollbar;if(Oe!==He||Pe!==ht){Z.setState({scrollbarSize:we,showHorizontalScrollbar:Oe,showVerticalScrollbar:Pe});var je=Z.props.onScrollbarPresenceChange;typeof je=="function"&&je({horizontal:Oe,size:we,vertical:Pe})}}),Ue(ft(Z),"_onScrollLeft",function(be){var Oe=be.scrollLeft;Z._onScroll({scrollLeft:Oe,scrollTop:Z.state.scrollTop})}),Ue(ft(Z),"_onScrollTop",function(be){var Oe=be.scrollTop;Z._onScroll({scrollTop:Oe,scrollLeft:Z.state.scrollLeft})}),Ue(ft(Z),"_rowHeightBottomGrid",function(be){var Oe=be.index,we=Z.props,Pe=we.fixedRowCount,xe=we.rowCount,He=we.rowHeight,ht=Z.state,je=ht.scrollbarSize;return ht.showVerticalScrollbar&&Oe===xe-Pe?je:typeof He=="function"?He({index:Oe+Pe}):He}),Ue(ft(Z),"_topLeftGridRef",function(be){Z._topLeftGrid=be}),Ue(ft(Z),"_topRightGridRef",function(be){Z._topRightGrid=be});var ae=_.deferredMeasurementCache,me=_.fixedColumnCount,ce=_.fixedRowCount;return Z._maybeCalculateCachedStyles(!0),ae&&(Z._deferredMeasurementCacheBottomLeftGrid=0<ce?new Lf({cellMeasurerCache:ae,columnIndexOffset:0,rowIndexOffset:ce}):ae,Z._deferredMeasurementCacheBottomRightGrid=0<me||0<ce?new Lf({cellMeasurerCache:ae,columnIndexOffset:me,rowIndexOffset:ce}):ae,Z._deferredMeasurementCacheTopRightGrid=0<me?new Lf({cellMeasurerCache:ae,columnIndexOffset:me,rowIndexOffset:0}):ae),Z}return o(ee,"MultiGrid"),Br(ee,yn.PureComponent),qi(ee,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(_){var L=0<arguments.length&&_!==void 0?_:{},Z=L.columnIndex,ae=Z===void 0?0:Z,me=L.rowIndex,ce=me===void 0?0:me;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,ae):ae,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,ce):ce}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(_){var L=0<arguments.length&&_!==void 0?_:{},Z=L.columnIndex,ae=Z===void 0?0:Z,me=L.rowIndex,ce=me===void 0?0:me,be=this.props,Oe=be.fixedColumnCount,we=be.fixedRowCount,Pe=Math.max(0,ae-Oe),xe=Math.max(0,ce-we);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:ae,rowIndex:xe}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:Pe,rowIndex:xe}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:ae,rowIndex:ce}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:Pe,rowIndex:ce}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var _=this.props,L=_.scrollLeft,Z=_.scrollTop;if(0<L||0<Z){var ae={};0<L&&(ae.scrollLeft=L),0<Z&&(ae.scrollTop=Z),this.setState(ae)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var _=this.props,L=_.onScroll,Z=_.onSectionRendered,ae=(_.onScrollbarPresenceChange,_.scrollLeft,_.scrollToColumn),me=(_.scrollTop,_.scrollToRow),ce=na(_,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var be=this.state,Oe=be.scrollLeft,we=be.scrollTop;return yn.createElement("div",{style:this._containerOuterStyle},yn.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(ce),this._renderTopRightGrid(oi({},ce,{onScroll:L,scrollLeft:Oe}))),yn.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(oi({},ce,{onScroll:L,scrollTop:we})),this._renderBottomRightGrid(oi({},ce,{onScroll:L,onSectionRendered:Z,scrollLeft:Oe,scrollToColumn:ae,scrollToRow:me,scrollTop:we}))))}},{key:"_getBottomGridHeight",value:function(_){return _.height-this._getTopGridHeight(_)}},{key:"_getLeftGridWidth",value:function(_){var L=_.fixedColumnCount,Z=_.columnWidth;if(this._leftGridWidth==null)if(typeof Z=="function"){for(var ae=0,me=0;me<L;me++)ae+=Z({index:me});this._leftGridWidth=ae}else this._leftGridWidth=Z*L;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(_){return _.width-this._getLeftGridWidth(_)}},{key:"_getTopGridHeight",value:function(_){var L=_.fixedRowCount,Z=_.rowHeight;if(this._topGridHeight==null)if(typeof Z=="function"){for(var ae=0,me=0;me<L;me++)ae+=Z({index:me});this._topGridHeight=ae}else this._topGridHeight=Z*L;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var _=this._deferredInvalidateColumnIndex,L=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:_,rowIndex:L}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(_){var L=this.props,Z=L.columnWidth,ae=L.enableFixedColumnScroll,me=L.enableFixedRowScroll,ce=L.height,be=L.fixedColumnCount,Oe=L.fixedRowCount,we=L.rowHeight,Pe=L.style,xe=L.styleBottomLeftGrid,He=L.styleBottomRightGrid,ht=L.styleTopLeftGrid,je=L.styleTopRightGrid,it=L.width,mt=_||ce!==this._lastRenderedHeight||it!==this._lastRenderedWidth,bt=_||Z!==this._lastRenderedColumnWidth||be!==this._lastRenderedFixedColumnCount,xt=_||Oe!==this._lastRenderedFixedRowCount||we!==this._lastRenderedRowHeight;(_||mt||Pe!==this._lastRenderedStyle)&&(this._containerOuterStyle=oi({height:ce,overflow:"visible",width:it},Pe)),(_||mt||xt)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:it},this._containerBottomStyle={height:ce-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:it}),!_&&xe===this._lastRenderedStyleBottomLeftGrid||(this._bottomLeftGridStyle=oi({left:0,overflowX:"hidden",overflowY:ae?"auto":"hidden",position:"absolute"},xe)),(_||bt||He!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=oi({left:this._getLeftGridWidth(this.props),position:"absolute"},He)),!_&&ht===this._lastRenderedStyleTopLeftGrid||(this._topLeftGridStyle=oi({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},ht)),(_||bt||je!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=oi({left:this._getLeftGridWidth(this.props),overflowX:me?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},je)),this._lastRenderedColumnWidth=Z,this._lastRenderedFixedColumnCount=be,this._lastRenderedFixedRowCount=Oe,this._lastRenderedHeight=ce,this._lastRenderedRowHeight=we,this._lastRenderedStyle=Pe,this._lastRenderedStyleBottomLeftGrid=xe,this._lastRenderedStyleBottomRightGrid=He,this._lastRenderedStyleTopLeftGrid=ht,this._lastRenderedStyleTopRightGrid=je,this._lastRenderedWidth=it}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(_){var L=_.enableFixedColumnScroll,Z=_.fixedColumnCount,ae=_.fixedRowCount,me=_.rowCount,ce=_.hideBottomLeftGridScrollbar,be=this.state.showVerticalScrollbar;if(!Z)return null;var Oe=be?1:0,we=this._getBottomGridHeight(_),Pe=this._getLeftGridWidth(_),xe=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,He=ce?Pe+xe:Pe,ht=yn.createElement(Ss,co({},_,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:Z,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:we,onScroll:L?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,me-ae)+Oe,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:He}));return ce?yn.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:oi({},this._bottomLeftGridStyle,{height:we,width:Pe,overflowY:"hidden"})},ht):ht}},{key:"_renderBottomRightGrid",value:function(_){var L=_.columnCount,Z=_.fixedColumnCount,ae=_.fixedRowCount,me=_.rowCount,ce=_.scrollToColumn,be=_.scrollToRow;return yn.createElement(Ss,co({},_,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,L-Z),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(_),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,me-ae),rowHeight:this._rowHeightBottomGrid,scrollToColumn:ce-Z,scrollToRow:be-ae,style:this._bottomRightGridStyle,width:this._getRightGridWidth(_)}))}},{key:"_renderTopLeftGrid",value:function(_){var L=_.fixedColumnCount,Z=_.fixedRowCount;return L&&Z?yn.createElement(Ss,co({},_,{className:this.props.classNameTopLeftGrid,columnCount:L,height:this._getTopGridHeight(_),ref:this._topLeftGridRef,rowCount:Z,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(_)})):null}},{key:"_renderTopRightGrid",value:function(_){var L=_.columnCount,Z=_.enableFixedRowScroll,ae=_.fixedColumnCount,me=_.fixedRowCount,ce=_.scrollLeft,be=_.hideTopRightGridScrollbar,Oe=this.state,we=Oe.showHorizontalScrollbar,Pe=Oe.scrollbarSize;if(!me)return null;var xe=we?1:0,He=this._getTopGridHeight(_),ht=this._getRightGridWidth(_),je=we?Pe:0,it=He,mt=this._topRightGridStyle;be&&(it=He+je,mt=oi({},this._topRightGridStyle,{left:0}));var bt=yn.createElement(Ss,co({},_,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,L-ae)+xe,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:it,onScroll:Z?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:me,scrollLeft:ce,style:mt,tabIndex:null,width:ht}));return be?yn.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:oi({},this._topRightGridStyle,{height:He,width:ht,overflowX:"hidden"})},bt):bt}}],[{key:"getDerivedStateFromProps",value:function(_,L){return _.scrollLeft!==L.scrollLeft||_.scrollTop!==L.scrollTop?{scrollLeft:_.scrollLeft!=null&&0<=_.scrollLeft?_.scrollLeft:L.scrollLeft,scrollTop:_.scrollTop!=null&&0<=_.scrollTop?_.scrollTop:L.scrollTop}:null}}]),ee}();Ue(xc,"propTypes",{classNameBottomLeftGrid:ct.string.isRequired,classNameBottomRightGrid:ct.string.isRequired,classNameTopLeftGrid:ct.string.isRequired,classNameTopRightGrid:ct.string.isRequired,enableFixedColumnScroll:ct.bool.isRequired,enableFixedRowScroll:ct.bool.isRequired,fixedColumnCount:ct.number.isRequired,fixedRowCount:ct.number.isRequired,onScrollbarPresenceChange:ct.func,style:ct.object.isRequired,styleBottomLeftGrid:ct.object.isRequired,styleBottomRightGrid:ct.object.isRequired,styleTopLeftGrid:ct.object.isRequired,styleTopRightGrid:ct.object.isRequired,hideTopRightGridScrollbar:ct.bool,hideBottomLeftGridScrollbar:ct.bool}),Ue(xc,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),ia(xc);var $g=function(){function ee(_,L){var Z;return Ki(this,ee),(Z=Fr(this,Ar(ee).call(this,_,L))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},Z._onScroll=Z._onScroll.bind(ft(Z)),Z}return o(ee,"ScrollSync"),Br(ee,yn.PureComponent),qi(ee,[{key:"render",value:function(){var _=this.props.children,L=this.state,Z=L.clientHeight,ae=L.clientWidth,me=L.scrollHeight,ce=L.scrollLeft,be=L.scrollTop,Oe=L.scrollWidth;return _({clientHeight:Z,clientWidth:ae,onScroll:this._onScroll,scrollHeight:me,scrollLeft:ce,scrollTop:be,scrollWidth:Oe})}},{key:"_onScroll",value:function(_){var L=_.clientHeight,Z=_.clientWidth,ae=_.scrollHeight,me=_.scrollLeft,ce=_.scrollTop,be=_.scrollWidth;this.setState({clientHeight:L,clientWidth:Z,scrollHeight:ae,scrollLeft:me,scrollTop:ce,scrollWidth:be})}}]),ee}();function Kg(ee){var _=ee.dataKey,L=ee.rowData;return typeof L.get=="function"?L.get(_):L[_]}o(Kg,"defaultCellDataGetter");function Jg(ee){var _=ee.cellData;return _==null?"":String(_)}o(Jg,"defaultCellRenderer");function Yg(ee){var _=ee.className,L=ee.columns,Z=ee.style;return yn.createElement("div",{className:_,role:"row",style:Z},L)}o(Yg,"defaultHeaderRowRenderer"),Ue($g,"propTypes",{children:ct.func.isRequired});var Lo={ASC:"ASC",DESC:"DESC"};function Nf(ee){var _=ee.sortDirection,L=Do("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":_===Lo.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":_===Lo.DESC});return yn.createElement("svg",{className:L,width:18,height:18,viewBox:"0 0 24 24"},_===Lo.ASC?yn.createElement("path",{d:"M7 14l5-5 5 5z"}):yn.createElement("path",{d:"M7 10l5 5 5-5z"}),yn.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}o(Nf,"SortIndicator");function Xg(ee){var _=ee.dataKey,L=ee.label,Z=ee.sortBy,ae=ee.sortDirection,me=Z===_,ce=[yn.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof L=="string"?L:null},L)];return me&&ce.push(yn.createElement(Nf,{key:"SortIndicator",sortDirection:ae})),ce}o(Xg,"defaultHeaderRenderer");function Qg(ee){var _=ee.className,L=ee.columns,Z=ee.index,ae=ee.key,me=ee.onRowClick,ce=ee.onRowDoubleClick,be=ee.onRowMouseOut,Oe=ee.onRowMouseOver,we=ee.onRowRightClick,Pe=ee.rowData,xe=ee.style,He={"aria-rowindex":Z+1};return(me||ce||be||Oe||we)&&(He["aria-label"]="row",He.tabIndex=0,me&&(He.onClick=function(ht){return me({event:ht,index:Z,rowData:Pe})}),ce&&(He.onDoubleClick=function(ht){return ce({event:ht,index:Z,rowData:Pe})}),be&&(He.onMouseOut=function(ht){return be({event:ht,index:Z,rowData:Pe})}),Oe&&(He.onMouseOver=function(ht){return Oe({event:ht,index:Z,rowData:Pe})}),we&&(He.onContextMenu=function(ht){return we({event:ht,index:Z,rowData:Pe})})),yn.createElement("div",co({},He,{className:_,key:ae,role:"row",style:xe}),L)}o(Qg,"defaultRowRenderer"),Nf.propTypes={sortDirection:ct.oneOf([Lo.ASC,Lo.DESC])};var qd=function(){function ee(){return Ki(this,ee),Fr(this,Ar(ee).apply(this,arguments))}return o(ee,"Column"),Br(ee,yn.Component),ee}();Ue(qd,"propTypes",{"aria-label":ct.string,cellDataGetter:ct.func,cellRenderer:ct.func,className:ct.string,columnData:ct.object,dataKey:ct.any.isRequired,defaultSortDirection:ct.oneOf([Lo.ASC,Lo.DESC]),disableSort:ct.bool,flexGrow:ct.number,flexShrink:ct.number,headerClassName:ct.string,headerRenderer:ct.func.isRequired,headerStyle:ct.object,id:ct.string,label:ct.node,maxWidth:ct.number,minWidth:ct.number,style:ct.object,width:ct.number.isRequired}),Ue(qd,"defaultProps",{cellDataGetter:Kg,cellRenderer:Jg,defaultSortDirection:Lo.ASC,flexGrow:0,flexShrink:1,headerRenderer:Xg,style:{}});var xf=function(){function ee(_){var L;return Ki(this,ee),(L=Fr(this,Ar(ee).call(this,_))).state={scrollbarWidth:0},L._createColumn=L._createColumn.bind(ft(L)),L._createRow=L._createRow.bind(ft(L)),L._onScroll=L._onScroll.bind(ft(L)),L._onSectionRendered=L._onSectionRendered.bind(ft(L)),L._setRef=L._setRef.bind(ft(L)),L}return o(ee,"Table"),Br(ee,yn.PureComponent),qi(ee,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(_){var L=_.alignment,Z=_.index;return this.Grid?this.Grid.getOffsetForCell({alignment:L,rowIndex:Z}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(_){var L=_.columnIndex,Z=_.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:Z,columnIndex:L})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(_){var L=0<arguments.length&&_!==void 0?_:{},Z=L.columnIndex,ae=Z===void 0?0:Z,me=L.rowIndex,ce=me===void 0?0:me;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ce,columnIndex:ae})}},{key:"recomputeRowHeights",value:function(_){var L=0<arguments.length&&_!==void 0?_:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:L})}},{key:"scrollToPosition",value:function(_){var L=0<arguments.length&&_!==void 0?_:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:L})}},{key:"scrollToRow",value:function(_){var L=0<arguments.length&&_!==void 0?_:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:L})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var _=Ia.findDOMNode(this.Grid),L=_.clientWidth||0;return(_.offsetWidth||0)-L}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var _=this,L=this.props,Z=L.children,ae=L.className,me=L.disableHeader,ce=L.gridClassName,be=L.gridStyle,Oe=L.headerHeight,we=L.headerRowRenderer,Pe=L.height,xe=L.id,He=L.noRowsRenderer,ht=L.rowClassName,je=L.rowStyle,it=L.scrollToIndex,mt=L.style,bt=L.width,xt=this.state.scrollbarWidth,Gt=me?Pe:Pe-Oe,at=typeof ht=="function"?ht({index:-1}):ht,wt=typeof je=="function"?je({index:-1}):je;return this._cachedColumnStyles=[],yn.Children.toArray(Z).forEach(function(tt,cn){var An=_._getFlexStyleForColumn(tt,tt.props.style);_._cachedColumnStyles[cn]=oi({overflow:"hidden"},An)}),yn.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":yn.Children.toArray(Z).length,"aria-rowcount":this.props.rowCount,className:Do("ReactVirtualized__Table",ae),id:xe,role:"grid",style:mt},!me&&we({className:Do("ReactVirtualized__Table__headerRow",at),columns:this._getHeaderColumns(),style:oi({height:Oe,overflow:"hidden",paddingRight:xt,width:bt},wt)}),yn.createElement(Ss,co({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:Do("ReactVirtualized__Table__Grid",ce),cellRenderer:this._createRow,columnWidth:bt,columnCount:1,height:Gt,id:void 0,noContentRenderer:He,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:xt,scrollToRow:it,style:oi({},be,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(_){var L=_.column,Z=_.columnIndex,ae=_.isScrolling,me=_.parent,ce=_.rowData,be=_.rowIndex,Oe=this.props.onColumnClick,we=L.props,Pe=we.cellDataGetter,xe=we.cellRenderer,He=we.className,ht=we.columnData,je=we.dataKey,it=we.id,mt=xe({cellData:Pe({columnData:ht,dataKey:je,rowData:ce}),columnData:ht,columnIndex:Z,dataKey:je,isScrolling:ae,parent:me,rowData:ce,rowIndex:be}),bt=this._cachedColumnStyles[Z],xt=typeof mt=="string"?mt:null;return yn.createElement("div",{"aria-colindex":Z+1,"aria-describedby":it,className:Do("ReactVirtualized__Table__rowColumn",He),key:"Row"+be+"-Col"+Z,onClick:function(Gt){Oe&&Oe({columnData:ht,dataKey:je,event:Gt})},role:"gridcell",style:bt,title:xt},mt)}},{key:"_createHeader",value:function(_){var L,Z,ae,me,ce,be=_.column,Oe=_.index,we=this.props,Pe=we.headerClassName,xe=we.headerStyle,He=we.onHeaderClick,ht=we.sort,je=we.sortBy,it=we.sortDirection,mt=be.props,bt=mt.columnData,xt=mt.dataKey,Gt=mt.defaultSortDirection,at=mt.disableSort,wt=mt.headerRenderer,tt=mt.id,cn=mt.label,An=!at&&ht,Di=Do("ReactVirtualized__Table__headerColumn",Pe,be.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:An}),Ai=this._getFlexStyleForColumn(be,oi({},xe,{},be.props.headerStyle)),ji=wt({columnData:bt,dataKey:xt,disableSort:at,label:cn,sortBy:je,sortDirection:it});if(An||He){var Vr=je!==xt?Gt:it===Lo.DESC?Lo.ASC:Lo.DESC,mr=o(function(No){An&&ht({defaultSortDirection:Gt,event:No,sortBy:xt,sortDirection:Vr}),He&&He({columnData:bt,dataKey:xt,event:No})},"onClick");ce=be.props["aria-label"]||cn||xt,me="none",ae=0,L=mr,Z=o(function(No){No.key!=="Enter"&&No.key!==" "||mr(No)},"headerOnKeyDown")}return je===xt&&(me=it===Lo.ASC?"ascending":"descending"),yn.createElement("div",{"aria-label":ce,"aria-sort":me,className:Di,id:tt,key:"Header-Col"+Oe,onClick:L,onKeyDown:Z,role:"columnheader",style:Ai,tabIndex:ae},ji)}},{key:"_createRow",value:function(_){var L=this,Z=_.rowIndex,ae=_.isScrolling,me=_.key,ce=_.parent,be=_.style,Oe=this.props,we=Oe.children,Pe=Oe.onRowClick,xe=Oe.onRowDoubleClick,He=Oe.onRowRightClick,ht=Oe.onRowMouseOver,je=Oe.onRowMouseOut,it=Oe.rowClassName,mt=Oe.rowGetter,bt=Oe.rowRenderer,xt=Oe.rowStyle,Gt=this.state.scrollbarWidth,at=typeof it=="function"?it({index:Z}):it,wt=typeof xt=="function"?xt({index:Z}):xt,tt=mt({index:Z}),cn=yn.Children.toArray(we).map(function(Ai,ji){return L._createColumn({column:Ai,columnIndex:ji,isScrolling:ae,parent:ce,rowData:tt,rowIndex:Z,scrollbarWidth:Gt})}),An=Do("ReactVirtualized__Table__row",at),Di=oi({},be,{height:this._getRowHeight(Z),overflow:"hidden",paddingRight:Gt},wt);return bt({className:An,columns:cn,index:Z,isScrolling:ae,key:me,onRowClick:Pe,onRowDoubleClick:xe,onRowRightClick:He,onRowMouseOver:ht,onRowMouseOut:je,rowData:tt,style:Di})}},{key:"_getFlexStyleForColumn",value:function(_,L){var Z=1<arguments.length&&L!==void 0?L:{},ae="".concat(_.props.flexGrow," ").concat(_.props.flexShrink," ").concat(_.props.width,"px"),me=oi({},Z,{flex:ae,msFlex:ae,WebkitFlex:ae});return _.props.maxWidth&&(me.maxWidth=_.props.maxWidth),_.props.minWidth&&(me.minWidth=_.props.minWidth),me}},{key:"_getHeaderColumns",value:function(){var _=this,L=this.props,Z=L.children;return(L.disableHeader?[]:yn.Children.toArray(Z)).map(function(ae,me){return _._createHeader({column:ae,index:me})})}},{key:"_getRowHeight",value:function(_){var L=this.props.rowHeight;return typeof L=="function"?L({index:_}):L}},{key:"_onScroll",value:function(_){var L=_.clientHeight,Z=_.scrollHeight,ae=_.scrollTop;(0,this.props.onScroll)({clientHeight:L,scrollHeight:Z,scrollTop:ae})}},{key:"_onSectionRendered",value:function(_){var L=_.rowOverscanStartIndex,Z=_.rowOverscanStopIndex,ae=_.rowStartIndex,me=_.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:L,overscanStopIndex:Z,startIndex:ae,stopIndex:me})}},{key:"_setRef",value:function(_){this.Grid=_}},{key:"_setScrollbarWidth",value:function(){var _=this.getScrollbarWidth();this.setState({scrollbarWidth:_})}}]),ee}();Ue(xf,"propTypes",{"aria-label":ct.string,"aria-labelledby":ct.string,autoHeight:ct.bool,children:function(ee){for(var _=yn.Children.toArray(ee.children),L=0;L<_.length;L++){var Z=_[L].type;if(Z!==qd&&!(Z.prototype instanceof qd))return new Error("Table only accepts children of type Column")}},className:ct.string,disableHeader:ct.bool,estimatedRowSize:ct.number.isRequired,gridClassName:ct.string,gridStyle:ct.object,headerClassName:ct.string,headerHeight:ct.number.isRequired,headerRowRenderer:ct.func,headerStyle:ct.object,height:ct.number.isRequired,id:ct.string,noRowsRenderer:ct.func,onColumnClick:ct.func,onHeaderClick:ct.func,onRowClick:ct.func,onRowDoubleClick:ct.func,onRowMouseOut:ct.func,onRowMouseOver:ct.func,onRowRightClick:ct.func,onRowsRendered:ct.func,onScroll:ct.func.isRequired,overscanIndicesGetter:ct.func.isRequired,overscanRowCount:ct.number.isRequired,rowClassName:ct.oneOfType([ct.string,ct.func]),rowGetter:ct.func.isRequired,rowHeight:ct.oneOfType([ct.number,ct.func]).isRequired,rowCount:ct.number.isRequired,rowRenderer:ct.func,rowStyle:ct.oneOfType([ct.object,ct.func]).isRequired,scrollToAlignment:ct.oneOf(["auto","end","start","center"]).isRequired,scrollToIndex:ct.number.isRequired,scrollTop:ct.number,sort:ct.func,sortBy:ct.string,sortDirection:ct.oneOf([Lo.ASC,Lo.DESC]),style:ct.object,tabIndex:ct.number,width:ct.number.isRequired}),Ue(xf,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:T,overscanRowCount:10,rowRenderer:Qg,headerRowRenderer:Yg,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var Ll=[],ec=null,Nl=null;function Zg(){Nl&&(Nl=null,zn.body&&ec!=null&&(zn.body.style.pointerEvents=ec),ec=null)}o(Zg,"enablePointerEventsIfDisabled");function YS(){Zg(),Ll.forEach(function(ee){return ee.__resetIsScrolling()})}o(YS,"enablePointerEventsAfterDelayCallback");function qg(ee){ee.currentTarget===W&&ec==null&&zn.body&&(ec=zn.body.style.pointerEvents,zn.body.style.pointerEvents="none"),function(){Nl&&sl(Nl);var _=0;Ll.forEach(function(L){_=Math.max(_,L.props.scrollingResetTimeInterval)}),Nl=Dl(YS,_)}(),Ll.forEach(function(_){_.props.scrollElement===ee.currentTarget&&_.__handleWindowScrollEvent()})}o(qg,"onScrollWindow");function eS(ee,_){Ll.some(function(L){return L.props.scrollElement===_})||_.addEventListener("scroll",qg),Ll.push(ee)}o(eS,"registerScrollListener");function tS(ee,_){(Ll=Ll.filter(function(L){return L!==ee})).length||(_.removeEventListener("scroll",qg),Nl&&(sl(Nl),Zg()))}o(tS,"unregisterScrollListener");var Bf=o(function(ee){return ee===W},"isWindow"),tc=o(function(ee){return ee.getBoundingClientRect()},"getBoundingBox");function nS(ee,_){if(ee){if(Bf(ee)){var L=W,Z=L.innerHeight,ae=L.innerWidth;return{height:typeof Z=="number"?Z:0,width:typeof ae=="number"?ae:0}}return tc(ee)}return{height:_.serverHeight,width:_.serverWidth}}o(nS,"getDimensions");function iS(ee){return Bf(ee)&&zn.documentElement?{top:"scrollY"in W?W.scrollY:zn.documentElement.scrollTop,left:"scrollX"in W?W.scrollX:zn.documentElement.scrollLeft}:{top:ee.scrollTop,left:ee.scrollLeft}}o(iS,"getScrollOffset");var rS=o(function(){return typeof W<"u"?W:void 0},"getWindow"),oS=function(){function ee(){var _,L;Ki(this,ee);for(var Z=arguments.length,ae=new Array(Z),me=0;me<Z;me++)ae[me]=arguments[me];return Ue(ft(L=Fr(this,(_=Ar(ee)).call.apply(_,[this].concat(ae)))),"_window",rS()),Ue(ft(L),"_isMounted",!1),Ue(ft(L),"_positionFromTop",0),Ue(ft(L),"_positionFromLeft",0),Ue(ft(L),"_detectElementResize",void 0),Ue(ft(L),"_child",void 0),Ue(ft(L),"state",oi({},nS(L.props.scrollElement,L.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),Ue(ft(L),"_registerChild",function(ce){!ce||ce instanceof qr||gi.warn("WindowScroller registerChild expects to be passed Element or null"),L._child=ce,L.updatePosition()}),Ue(ft(L),"_onChildScroll",function(ce){var be=ce.scrollTop;if(L.state.scrollTop!==be){var Oe=L.props.scrollElement;Oe&&(typeof Oe.scrollTo=="function"?Oe.scrollTo(0,be+L._positionFromTop):Oe.scrollTop=be+L._positionFromTop)}}),Ue(ft(L),"_registerResizeListener",function(ce){ce===W?W.addEventListener("resize",L._onResize,!1):L._detectElementResize.addResizeListener(ce,L._onResize)}),Ue(ft(L),"_unregisterResizeListener",function(ce){ce===W?W.removeEventListener("resize",L._onResize,!1):ce&&L._detectElementResize.removeResizeListener(ce,L._onResize)}),Ue(ft(L),"_onResize",function(){L.updatePosition()}),Ue(ft(L),"__handleWindowScrollEvent",function(){if(L._isMounted){var ce=L.props.onScroll,be=L.props.scrollElement;if(be){var Oe=iS(be),we=Math.max(0,Oe.left-L._positionFromLeft),Pe=Math.max(0,Oe.top-L._positionFromTop);L.setState({isScrolling:!0,scrollLeft:we,scrollTop:Pe}),ce({scrollLeft:we,scrollTop:Pe})}}}),Ue(ft(L),"__resetIsScrolling",function(){L.setState({isScrolling:!1})}),L}return o(ee,"WindowScroller"),Br(ee,yn.PureComponent),qi(ee,[{key:"updatePosition",value:function(_){var L=0<arguments.length&&_!==void 0?_:this.props.scrollElement,Z=this.props.onResize,ae=this.state,me=ae.height,ce=ae.width,be=this._child||Ia.findDOMNode(this);if(be instanceof qr&&L){var Oe=function(Pe,xe){if(Bf(xe)&&zn.documentElement){var He=zn.documentElement,ht=tc(Pe),je=tc(He);return{top:ht.top-je.top,left:ht.left-je.left}}var it=iS(xe),mt=tc(Pe),bt=tc(xe);return{top:mt.top+it.top-bt.top,left:mt.left+it.left-bt.left}}(be,L);this._positionFromTop=Oe.top,this._positionFromLeft=Oe.left}var we=nS(L,this.props);me===we.height&&ce===we.width||(this.setState({height:we.height,width:we.width}),Z({height:we.height,width:we.width}))}},{key:"componentDidMount",value:function(){var _=this.props.scrollElement;this._detectElementResize=wa(),this.updatePosition(_),_&&(eS(this,_),this._registerResizeListener(_)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(_){var L=this.props.scrollElement,Z=_.scrollElement;Z!==L&&Z!=null&&L!=null&&(this.updatePosition(L),tS(this,Z),eS(this,L),this._unregisterResizeListener(Z),this._registerResizeListener(L))}},{key:"componentWillUnmount",value:function(){var _=this.props.scrollElement;_&&(tS(this,_),this._unregisterResizeListener(_)),this._isMounted=!1}},{key:"render",value:function(){var _=this.props.children,L=this.state,Z=L.isScrolling,ae=L.scrollTop,me=L.scrollLeft,ce=L.height,be=L.width;return _({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:ce,isScrolling:Z,scrollLeft:me,scrollTop:ae,width:be})}}]),ee}();Ue(oS,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:rS(),serverHeight:0,serverWidth:0}),Oi.ArrowKeyStepper=pa,Oi.AutoSizer=Oa,Oi.CellMeasurer=ma,Oi.CellMeasurerCache=Za,Oi.Collection=Yd,Oi.Column=qd,Oi.ColumnSizer=Cd,Oi.Grid=Ss,Oi.InfiniteLoader=v,Oi.List=b,Oi.Masonry=Zd,Oi.MultiGrid=xc,Oi.ScrollSync=$g,Oi.SortDirection=Lo,Oi.SortIndicator=Nf,Oi.Table=xf,Oi.WindowScroller=oS,Oi.accessibilityOverscanIndicesGetter=T,Oi.createMasonryCellPositioner=function(ee){var _,L=ee.cellMeasurerCache,Z=ee.columnCount,ae=ee.columnWidth,me=ee.spacer,ce=me===void 0?0:me;function be(we){for(var Pe=0,xe=1;xe<_.length;xe++)_[xe]<_[Pe]&&(Pe=xe);var He=Pe*(ae+ce),ht=_[Pe]||0;return _[Pe]=ht+L.getHeight(we)+ce,{left:He,top:ht}}o(be,"cellPositioner");function Oe(){_=[];for(var we=0;we<Z;we++)_[we]=0}return o(Oe,"initOrResetDerivedValues"),Oe(),be.reset=function(we){Z=we.columnCount,ae=we.columnWidth,ce=we.spacer,Oe()},be},Oi.createTableMultiSort=function(ee){var _=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},L=_.defaultSortBy,Z=_.defaultSortDirection,ae=Z===void 0?{}:Z;if(!ee)throw Error('Required parameter "sortCallback" not specified');var me=L||[],ce={};return me.forEach(function(be){ce[be]=ae[be]!==void 0?ae[be]:"ASC"}),{sort:function(be){var Oe=be.defaultSortDirection,we=be.event,Pe=be.sortBy;if(we.shiftKey)ce[Pe]!==void 0?ce[Pe]=ce[Pe]==="ASC"?"DESC":"ASC":(ce[Pe]=Oe,me.push(Pe));else if(we.ctrlKey||we.metaKey){var xe=me.indexOf(Pe);0<=xe&&(me.splice(xe,1),delete ce[Pe])}else me.length=0,me.push(Pe),Object.keys(ce).forEach(function(He){He!==Pe&&delete ce[He]}),ce[Pe]!==void 0?ce[Pe]=ce[Pe]==="ASC"?"DESC":"ASC":ce[Pe]=Oe;ee({sortBy:me,sortDirection:ce})},sortBy:me,sortDirection:ce}},Oi.defaultCellRangeRenderer=Lc,Oi.defaultOverscanIndicesGetter=Ed,Oi.defaultTableCellDataGetter=Kg,Oi.defaultTableCellRenderer=Jg,Oi.defaultTableHeaderRenderer=Xg,Oi.defaultTableHeaderRowRenderer=Yg,Oi.defaultTableRowRenderer=Qg,Object.defineProperty(Oi,"__esModule",{value:!0})}),i.exports}}).call(this,f("yLpj"))},N7sO:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function S(h){return typeof h=="string"?h.length===0:h.byteLength===0}o(S,"isEmptyData"),l.isEmptyData=S},N8ne:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("mlaT"));let u=o(class{info(a){for(const s of this._loggers)s.info(a)}warn(a){for(const s of this._loggers)s.warn(a)}error(a){for(const s of this._loggers)s.error(a)}debug(a){let s,i;typeof a=="string"?i=a:a?i=o(()=>(s||(s=a()),s),"memoized"):i=""+a;for(const e of this._loggers)e.debug(i)}setLogLevel(a){for(const s of this._loggers)s.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=u},N9oo:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("lUhs")),m=h(f("AUdx")),a=h(f("aVV0"));let s=o(class wS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return S(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=n=>{this.removeEventListener(),t(n)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(m.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=wS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=s,s.CHROME_VPN_TIMEOUT_MS=5e3},NBIk:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var S;(function(h){h[h.Balanced=0]="Balanced",h[h.MaintainFramerate=1]="MaintainFramerate",h[h.MaintainResolution=2]="MaintainResolution"})(S=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=S},NDMw:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isAudioTransformDevice=void 0;function S(h){return!!h&&typeof h=="object"&&"mute"in h&&"stop"in h&&"intrinsicDevice"in h}o(S,"isAudioTransformDevice"),l.isAudioTransformDevice=S},NE7a:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=S},NFcc:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoInputFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.PermissionDenied=2]="PermissionDenied"})(S=l.CheckVideoInputFeedback||(l.CheckVideoInputFeedback={})),l.default=S},NUAg:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("IBi3"));let u=o(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,s,i){super(a,s,i)}},"VideoOnlyTransceiverController");l.default=u},NWIo:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("riOr"));let u=o(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,s,i,e,t,n,r,c,p,g,d,y;const E=new Map,w=1e3,k=h.default.NAME_ARR_ASCENDING;return E.set(k[0],{rid:k[0],active:!0,scaleResolutionDownBy:((s=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||s===void 0?void 0:s.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*w,maxFramerate:((n=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||n===void 0?void 0:n.maxFramerate)||5}),E.set(k[1],{rid:k[1],active:!0,scaleResolutionDownBy:((c=(r=this.encodingParams)===null||r===void 0?void 0:r.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((g=(p=this.encodingParams)===null||p===void 0?void 0:p.high)===null||g===void 0?void 0:g.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*w,maxFramerate:(y=(d=this.encodingParams)===null||d===void 0?void 0:d.high)===null||y===void 0?void 0:y.maxFramerate}),this.getQualityMapString(E),E}updateIndex(a){this.videoIndex=a}wantsResubscribe(){var a,s;let i=!1;this.nextLocalDescriptions=(a=this.videoIndex)===null||a===void 0?void 0:a.localStreamDescriptions();for(let e=0;e<((s=this.nextLocalDescriptions)===null||s===void 0?void 0:s.length);e++){const t=this.nextLocalDescriptions[e].streamId;if(t!==0&&t){const n=this.currLocalDescriptions.findIndex(r=>r.streamId===t);n!==-1&&this.nextLocalDescriptions[e].disabledByWebRTC!==this.currLocalDescriptions[n].disabledByWebRTC&&(i=!0)}}return this.currLocalDescriptions=this.nextLocalDescriptions,i}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}getQualityMapString(a){var s;let i="";const e=(s=this.videoIndex)===null||s===void 0?void 0:s.localStreamDescriptions();(e==null?void 0:e.length)>0&&(a.forEach(t=>{let n=!1;t.rid==="low"?n=e[0].disabledByWebRTC:n=e[1].disabledByWebRTC,i+=`{ rid: ${t.rid} active:${t.active} disabledByWebRTC: ${n} maxBitrate:${t.maxBitrate} scaleResolutionDownBy:${t.scaleResolutionDownBy} maxFrameRate:${t.maxFramerate}`}),this.logger.info(`simulcast: content policy:chooseEncodingParameters newQualityMap: ${i}`))}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,s){this.logger=a,this.encodingParams=s,this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=u},Ni8D:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{reportEvent(u,m,a){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=S},Np2I:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const u=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,u}constructor(u,m,a){this.fixedWaitMs=u,this.shortBackoffMs=m,this.longBackoffMs=a,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=S},Nzn3:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(u){}},"NoOpTask");l.default=S},O9RP:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DeferredPromise=void 0;let S=o(class{getPromise(){return this.promise}resolvePromise(u){this.resolve(u)}resolveAndReplacePromise(u){this.resolve(u),this.promise=new Promise((m,a)=>{this.resolve=m,this.reject=a})}rejectPromise(u){this.reject(u)}rejectAndReplacePromise(u){this.reject(u),this.promise=new Promise((m,a)=>{this.resolve=m,this.reject=a})}constructor(){this.promise=new Promise((u,m)=>{this.resolve=u,this.reject=m})}},"DeferredPromise");l.DeferredPromise=S},OEM7:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("XCDq");let h=o(class OS{clone(){const m=new OS;return m.attendeeId=this.attendeeId,m.groupId=this.groupId,m.streamId=this.streamId,m.ssrc=this.ssrc,m.trackLabel=this.trackLabel,m.maxBitrateKbps=this.maxBitrateKbps,m.avgBitrateKbps=this.avgBitrateKbps,m.maxFrameRate=this.maxFrameRate,m.timeEnabled=this.timeEnabled,m.disabledByWebRTC=this.disabledByWebRTC,m.disabledByUplinkPolicy=this.disabledByUplinkPolicy,m.width=this.width,m.height=this.height,m}toStreamDescriptor(){const m=S.SdkStreamDescriptor.create();return m.mediaType=S.SdkStreamMediaType.VIDEO,m.trackLabel=this.trackLabel,m.attendeeId=this.attendeeId,m.streamId=this.streamId,m.groupId=this.groupId,m.framerate=this.maxFrameRate,m.maxBitrateKbps=this.disabledByUplinkPolicy||this.disabledByWebRTC?0:this.maxBitrateKbps,m.avgBitrateBps=this.avgBitrateKbps,m}totalPixels(){return this.width*this.height}constructor(m,a,s,i,e){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.width=0,this.height=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.rid="",this.attendeeId=m,this.groupId=a,this.streamId=s,this.maxBitrateKbps=i,this.avgBitrateKbps=e}},"VideoStreamDescription");l.default=h},OND3:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("IBi3"));let m=o(class ga extends u.default{setEncodingParameters(s){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===ga.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(ga.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===ga.MID_LEVEL_NAME&&this.copyEncodingParams(s.get(ga.MID_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===ga.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(ga.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(s){return S(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var s,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(s=this.meetingSessionContext)===null||s===void 0?void 0:s.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(s,i){i.active=s.active,i.maxBitrate=s.maxBitrate,i.scaleResolutionDownBy=s.scaleResolutionDownBy,i.maxFramerate=s.maxFramerate}constructor(s,i,e){super(s,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let n=0;n<ga.NAME_ARR_ASCENDING.length;n++){const r=ga.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:ga.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},OV1w:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("/AJg"));let u=o(class{constructor(a){this.applicationMetadata=a,this.serverSideNetworkAdaption=h.default.Default,this.supportedServerSideNetworkAdaptions=[],this.wantsAllTemporalLayersInIndex=!1,this.disablePeriodicKeyframeRequestOnContentSender=!1}},"SignalingClientJoin");l.default=u},Obod:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("IsLT")),m=h(f("zd8f")),a=h(f("mlaT")),s=h(f("ZZPe")),i=h(f("PR0U")),e=h(f("hrQK")),t=h(f("gLI0"));let n=o(class extends s.default{setBlurStrength(){}loadAssets(){return S(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),r=o(class Od extends u.default{static create(p,g){return S(this,void 0,void 0,function*(){p=Od.resolveSpec(p),g=Od.resolveOptions(g);const{logger:d}=g,y=yield Od.isSupported(p,g);if(d.info(`processor is ${y?"":"not"} supported`),!y)return d.warn("Using no-op processor because background blur is not supported"),new n;let E;return(yield e.default.isSupported())?(d.info("Using browser-provided background blur"),E=new e.default(p,g)):(d.info("Using built-in background blur"),E=new i.default(p,g)),yield E.loadAssets(),E})}static resolveOptions(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=Object.assign({},p);return g.blurStrength||(g.blurStrength=t.default.MEDIUM),g.logger||(g.logger=new m.default("BackgroundBlurProcessor",a.default.INFO)),g=super.resolveOptions(g),g}static isSupported(p,g){return p=Od.resolveSpec(p),g=Od.resolveOptions(g),super.isSupported(p,g)}},"BackgroundBlurVideoFrameProcessor");l.default=r},OcJO:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=S},OdWA:function(j,l,f){"use strict";f.d(l,"a",function(){return e});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e=Object(a.a)("users.interactions.list generated fetcher",function(){var t=Object(S.coroutine)(function*(n,r,c){try{const p=["reason"],g=Object(u.a)(c,p),d=Object(i.b)(g),y=yield n(Object(m.apiCall)({method:"users.interactions.list",args:d,reason:c.reason}));return Object(i.a)(y)}catch(p){throw Object(s.a)({getState:r}).error(`API call to users.interactions.list
				with reason ${c.reason} failed, initiated by generated fetcher`),p}});return function(n,r,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherusersInteractionsListFetcher",description:"users.interactions.list generated fetcher"}},Ol9i:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptItem");l.default=S},Olm7:function(j,l,f){"use strict";var S=f("fywt"),h=f("ntxC");function u(m,a){var s=[];if(!(m&&m.length))return s;var i=-1,e=[],t=m.length;for(a=Object(S.a)(a,3);++i<t;){var n=m[i];a(n,i,m)&&(s.push(n),e.push(i))}return Object(h.a)(m,e),s}o(u,"remove"),l.a=u},Oxpw:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.Unread="unread",h.LastMessageTimestamp="last-message-timestamp"})(S||(S={})),l.default=S},P3Bx:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class Wc{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(u){let m=0;for(const a of u.streams){const s=!!a.attendeeId,i=!!a.externalUserId,e=a.hasOwnProperty("muted"),t=!!a.dropped;if(s){this.attendeeIdToStreamId[a.attendeeId]&&this.attendeeIdToStreamId[a.attendeeId]<a.audioStreamId&&delete this.attendeeIdToStreamId[a.attendeeId],this.streamIdToAttendeeId[a.audioStreamId]=a.attendeeId;const n=i?a.externalUserId:a.attendeeId;this.streamIdToExternalUserId[a.audioStreamId]=n,this.attendeeIdToStreamId[a.attendeeId]=a.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(a.attendeeId,!0,n,!1,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}if(e){const n=this.streamIdToAttendeeId[a.audioStreamId],r=this.streamIdToExternalUserId[a.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(n,null,a.muted,null,r)}if(!s&&!e){const n=this.streamIdToAttendeeId[a.audioStreamId];if(n){const r=this.streamIdToExternalUserId[a.audioStreamId];delete this.streamIdToAttendeeId[a.audioStreamId],delete this.streamIdToExternalUserId[a.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[a.audioStreamId],this.attendeeIdToStreamId[n]===a.audioStreamId&&delete this.attendeeIdToStreamId[n];let c=!1;for(const p of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(p);if(g>a.audioStreamId&&this.streamIdToAttendeeId[g]===n){c=!0;break}}c||this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,r,t,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(u),this.sessionReconnected=!1)}cleanUpState(u){const m=Object.values(this.streamIdToAttendeeId),a=u.streams.map(i=>i.attendeeId),s=m.filter(i=>!a.includes(i));for(const[i,e]of s.entries()){const t=this.attendeeIdToStreamId[e],n=this.streamIdToExternalUserId[t];if(delete this.streamIdToAttendeeId[t],delete this.streamIdToExternalUserId[t],delete this.warnedAboutMissingStreamIdMapping[t],delete this.attendeeIdToStreamId[e],e===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(e,!1,n,!1,{attendeeIndex:i,attendeesInFrame:e.length})}}sendRealtimeUpdatesForAudioMetadata(u){let m=null,a=null;for(const s of u.attendeeStates){const i=this.attendeeIdForStreamId(s.audioStreamId);s.hasOwnProperty("volume")&&(m===null&&(m={}),i!==null&&(m[i]=this.normalizedVolume(s))),s.hasOwnProperty("signalStrength")&&(a===null&&(a={}),i!==null&&(a[i]=this.normalizedSignalStrength(s)))}this.applyRealtimeUpdatesForAudioMetadata(m,a)}normalizedVolume(u){const a=1-(-u.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(a,0),1)}normalizedSignalStrength(u){const m=u.signalStrength/Wc.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(u,m){for(const a in this.streamIdToAttendeeId){const s=this.streamIdToAttendeeId[a],i=this.streamIdToExternalUserId[a];let e=null,t=null;u!==null&&(u.hasOwnProperty(s)?e=u[s]:e=Wc.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(s)?t=m[s]:t=Wc.IMPLICIT_SIGNAL_STRENGTH),(e!==null||t!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(s,e,null,t,i)}}attendeeIdForStreamId(u){if(u===0)return null;const m=this.streamIdToAttendeeId[u];return m||(this.warnedAboutMissingStreamIdMapping[u]||(this.warnedAboutMissingStreamIdMapping[u]=!0,this.logger.warn(`volume indicator stream id ${u} seen before being defined`)),null)}constructor(u,m,a,s,i){this.logger=u,this.realtimeController=m,this.minVolumeDecibels=a,this.maxVolumeDecibels=s,this.selfAttendeeId=i,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=S,S.MAX_SIGNAL_STRENGTH_LEVELS=2,S.IMPLICIT_VOLUME=0,S.IMPLICIT_SIGNAL_STRENGTH=1},"P7D+":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=S(f("/sFY"));function u(e,t,n){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||n===void 0)return[];const r=new Array,c=new Map,p=new Map;for(const g of t){const d=e.transceiverController.getMidForGroupId(g);if(d===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(g);c.set(y,d),p.set(y,g)}for(const g of n){const d=new h.default,y=c.get(g.attendeeId);y!==void 0&&(d.mid=y,d.attendeeId=g.attendeeId,d.groupId=p.get(g.attendeeId),d.priority=Number.MAX_SAFE_INTEGER-g.priority,d.targetBitrateKbps=g.targetSizeToBitrateKbps(g.targetSize),d.qualityAdaptationPreference=g.degradationPreference,r.push(d))}return r}o(u,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=u;let m=o(class Gf{static default(){return new Gf([])}[Symbol.iterator](){let t=0;const n=this.items;return{next(){return t<n.length?{done:!1,value:n[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,n){const r=this.items.findIndex(n);r===-1?this.items.push(t):this.has(t)?this.items.splice(r,1):this.items[r]=t}remove(t){this.items=this.items.filter(n=>!n.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const n of this.items)if(!t.items.some(r=>r.equals(n)))return!1;return!0}has(t){return this.items.some(n=>n.equals(t))}some(t){return this.items.some(t)}clone(){return new Gf([...this.items])}sort(){this.items.sort((t,n)=>t.partialCompare(n))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=o(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,n){this.items.has(t)&&!this.items.some(n)||(this.cow(),this.items.replaceFirst(t,n))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),s=o(class{add(t){this.builder.add(t)}replaceFirst(t,n){this.builder.replaceFirst(t,n)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=s;let i=o(class $f{static prepare(){return new s(new a)}static default(){return new $f(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new s(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=$f.prepare();for(const n of this.items)t.add(n.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=i,l.default=i},P7Xm:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Biyp"));let m=o(class Rd{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new u.default(0,0,0,0,!1),this.parametersInEffect=new u.default(0,0,0,0,!1),this.encodingParamMap.set(Rd.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=s.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),n=s.numberOfParticipants();if(this.numParticipants===n&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=n,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let s=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(s=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new u.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,s,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let s=640;return this.getNumberOfPublishedVideoSources()>4&&(s=320),s}captureHeight(){let s=384;return this.getNumberOfPublishedVideoSources()>4&&(s=192),s}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let s=0;return this.getNumberOfPublishedVideoSources()<=2?s=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?s=this.idealMaxBandwidthKbps*2/3:s=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(s)}setIdealMaxBandwidthKbps(s){this.idealMaxBandwidthKbps=s}setHasBandwidthPriority(s){this.hasBandwidthPriority=s}setTransceiverController(s){this.transceiverController=s}setSVCEnabled(s){var i;this.enableSVC=s,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${s}}`)}setHighResolutionFeatureEnabled(s){this.enableHighResolutionFeature=s}updateTransceiverController(){return S(this,void 0,void 0,function*(){const s=this.getStreamCaptureSetting();if(!s)return;const i=this.calculateEncodingParameters(s);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(Rd.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(s){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return s.maxBitrate!==(t==null?void 0:t.maxBitrate)||s.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(s==null?void 0:s.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(s){var i,e,t;const n=this.maxBandwidthKbps()*1e3;let r=1,c=720;if(s.height!==void 0&&s.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=Rd.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Rd.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(c=360),r=Math.max(Math.min(s.height,s.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${r} for capture resolution ${s.width}x${s.height}. New dimension is ${s.width/r}x${s.height/r}`)),this.enableSVC){let p;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?p="L1T1":p=c>=720?"L3T3":c>=360?"L2T3":"L1T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${n}  targetHeight: ${c}  scalabilityMode: ${p}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:r,maxBitrate:n,scalabilityMode:p}}else return{scaleResolutionDownBy:r,maxBitrate:n}}getStreamCaptureSetting(){var s,i,e,t;return(t=(e=(i=(s=this.transceiverController)===null||s===void 0?void 0:s.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var s;return(s=this.numberOfPublishedVideoSources)!==null&&s!==void 0?s:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(s,i){const e=s??i,t=e.length>0&&Rd.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(s,i=!0,e=void 0,t=void 0){this.selfAttendeeId=s,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},PDX0:function(j,l){(function(f){j.exports=f}).call(this,{})},PPZC:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.AudioLogEvent=void 0;var S;(function(h){h[h.DeviceChanged=0]="DeviceChanged",h[h.MutedLocal=1]="MutedLocal",h[h.UnmutedLocal=2]="UnmutedLocal",h[h.Connected=3]="Connected",h[h.ConnectFailed=4]="ConnectFailed",h[h.RedmicStartLoss=5]="RedmicStartLoss",h[h.RedmicEndLoss=6]="RedmicEndLoss"})(S=l.AudioLogEvent||(l.AudioLogEvent={})),l.default=S},PR0U:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("hrQK")),m=f("gLI0");let a=o(class extends u.default{drawImageWithMask(i,e){const t=this.blurredImage,{canvasCtx:n,targetCanvas:r}=this,{width:c,height:p}=r;if(!e||!t){n.clearRect(0,0,c,p);return}this.scaledCanvas.getContext("2d").putImageData(e,0,0),this.blurCanvasCtx.putImageData(this.blurredImage,0,0),n.save(),n.clearRect(0,0,c,p),n.drawImage(this.scaledCanvas,0,0,c,p),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,p),n.globalCompositeOperation="destination-over",n.drawImage(this.blurCanvas,0,0,c,p),n.restore()}setBlurStrength(i){if(super.setBlurStrength(i),this.worker){this.modelInitialized=!1,this.worker.postMessage({msg:"destroy"});const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}})}}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:540}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}handleInitialize(i){if(this.logger.info(`received initialize message: ${this.stringify(i)}`),!i.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const e=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:e.path,inputHeight:e.input.height,inputWidth:e.input.width,inputChannels:4,modelRangeMin:e.input.range[0],modelRangeMax:e.input.range[1],blurPixels:this.blurAmount}}),this.initWorkerPromise.resolve({})}handlePredict(i){this.blurredImage=i.payload.blurOutput,super.handlePredict(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});var e;return S(this,void 0,void 0,function*(){i.destroy.call(this),(e=this.blurCanvas)===null||e===void 0||e.remove(),this.blurCanvas=void 0})}constructor(i,e){super(i,e),this.blurCanvas=document.createElement("canvas"),this.blurCanvasCtx=this.blurCanvas.getContext("2d"),this.blurCanvas.width=this.spec.model.input.width,this.blurCanvas.height=this.spec.model.input.height,this.logger.info("BackgroundBlur processor using builtin blur")}},"BackgroundBlurProcessorBuiltIn");l.default=a},PSPT:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(V,F,N,P){function x(O){return O instanceof N?O:new N(function(M){M(O)})}return o(x,"adopt"),new(N||(N=Promise))(function(O,M){function D($){try{q(P.next($))}catch(de){M(de)}}o(D,"fulfilled");function J($){try{q(P.throw($))}catch(de){M(de)}}o(J,"rejected");function q($){$.done?O($.value):x($.value).then(D,J)}o(q,"step"),q((P=P.apply(V,F||[])).next())})},h=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("kUL9")),m=h(f("U9CR")),a=h(f("ZsEg")),s=h(f("wkYg")),i=h(f("j+uH")),e=h(f("iQPr")),t=h(f("PmG3")),n=h(f("ig3o")),r=h(f("Rx4Y")),c=h(f("nWLk")),p=h(f("s3Gi")),g=h(f("VKrp")),d=h(f("M1uR")),y=h(f("sTsL")),E=h(f("6k9T")),w=h(f("dazq"));let k=o(class RS{static delay(F){return S(this,void 0,void 0,function*(){return new Promise(N=>setTimeout(N,F))})}checkAudioInput(F){return S(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(F),yield this.meetingSession.audioVideo.stopAudioInput(),n.default.Succeeded}catch(N){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${N}`),N instanceof s.default?n.default.PermissionDenied:n.default.Failed}})}checkAudioOutput(F,N){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return S(this,void 0,void 0,function*(){try{const x=F?a.default.getIntrinsicDeviceId(F):"";return yield this.playTone(x,this.configuration.audioOutputFrequency,P),(yield N())?r.default.Succeeded:r.default.Failed}catch(x){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${x}`),r.default.Failed}finally{this.stopTone()}})}playTone(F,N,P){return S(this,void 0,void 0,function*(){const O=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=N,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const D=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,D),this.gainNode.gain.linearRampToValueAtTime(O,D+.1),this.oscillatorNode.start();const J=new u.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield J.bindAudioDevice({deviceId:F}))}catch(q){this.logger.error(`Failed to bind audio device: ${q}`)}try{yield J.bindAudioElement(P||new Audio)}catch(q){this.logger.error(`Failed to bind audio element: ${q}`)}yield J.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const F=1,N=.1,P=this.configuration.audioOutputGain,x=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(P,x+N+F),this.gainNode.gain.linearRampToValueAtTime(0,x+N*2+F),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(F){return S(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(F),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(N){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${N}`),N instanceof s.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(F,N,P){return S(this,void 0,void 0,function*(){let x;try{const O=a.default.getIntrinsicDeviceId(F),M={video:this.calculateVideoConstraint(O,N,P)};x=yield navigator.mediaDevices.getUserMedia(M)}catch(O){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${N} height ${P} failed with error ${O}`),O&&O.name==="OverconstrainedError"?c.default.ResolutionNotSupported:O&&O.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{x&&x.getTracks().forEach(function(O){O.stop()})}return c.default.Succeeded})}calculateVideoConstraint(F,N,P){const x=this.browserBehavior.requiresResolutionAlignment(N,P),O={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(O.deviceId=F,O.width=N,O.height=P):(O.deviceId={exact:F},O.width={exact:x[0]},O.height={exact:x[1]}),O}checkContentShareConnectivity(F){return S(this,void 0,void 0,function*(){let N=!1,P=!1;const x={contentShareDidStart:()=>{N=!0}},O={audioVideoDidStart:()=>{P=!0}};try{return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(x),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(F),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return P&&N})),P?(yield this.stopMeeting(),N?p.default.Succeeded:p.default.TimedOut):p.default.ConnectionFailed}catch(M){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${M}`),M.name==="NotAllowedError"?p.default.PermissionDenied:p.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(O),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(x)}})}checkAudioConnectivity(F){return S(this,void 0,void 0,function*(){let N=!1;const P={packetsReceived:0},x=this.meetingSession.audioVideo,O={metricsDidReceive(D){D.getRTCStatsReport().forEach(J=>{J.type==="inbound-rtp"&&J.mediaType==="audio"&&(P.packetsReceived=J.packetsReceived)})}},M=o((D,J,q,$)=>{D===this.meetingSession.configuration.credentials.attendeeId&&J&&(N=!0)},"attendeePresenceHandler");try{yield x.startAudioInput(F)}catch(D){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${D}`),D instanceof s.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return x.realtimeSubscribeToAttendeeIdPresence(M),x.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(N,P)})),x.removeObserver(O),x.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(N,P)?t.default.Succeeded:t.default.AudioNotReceived):(x.removeObserver(O),x.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(F){return S(this,void 0,void 0,function*(){const N=this.meetingSession.audioVideo;let P=0;const x={metricsDidReceive(O){O.getRTCStatsReport().forEach(D=>{D.type==="outbound-rtp"&&D.mediaType==="video"&&(P=D.packetsSent)})}};try{yield N.startVideoInput(F)}catch(O){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${O}`),O instanceof s.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return N.addObserver(x),(yield this.startMeeting())?(N.startLocalVideoTile(),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return P>0})),yield N.stopVideoInput(),yield this.stopMeeting(),N.removeObserver(x),P<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return S(this,void 0,void 0,function*(){let F=!1;const N={metricsDidReceive(x){x.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(F=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(x){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${x}`),d.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=x=>{const O=this.originalURLRewriter(x);return O.includes("transport=tcp")?"":O};const P=this.meetingSession.audioVideo;return P.addObserver(N),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(N),F?d.default.Succeeded:d.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,d.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return S(this,void 0,void 0,function*(){let F=!1;const N={metricsDidReceive(x){x.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(F=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(x){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${x}`),g.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=x=>{const O=this.originalURLRewriter(x);return O.includes("transport=udp")?"":O};const P=this.meetingSession.audioVideo;return P.addObserver(N),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(N),F?g.default.Succeeded:g.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,g.default.ConnectionFailed)})}startMeeting(){return S(this,void 0,void 0,function*(){let F=!1;const N={audioVideoDidStart:()=>{F=!0}};return this.meetingSession.audioVideo.addObserver(N),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.audioVideo.removeObserver(N),F})}stopMeeting(){return S(this,void 0,void 0,function*(){let F=!1;const N={audioVideoDidStop:P=>{F=!0}};return this.meetingSession.audioVideo.addObserver(N),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.audioVideo.removeObserver(N),F})}executeTimeoutTask(F){return S(this,void 0,void 0,function*(){let N=!1,P=o(class extends i.default{cancel(){this.isCancelled=!0}run(){return S(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield F()){N=!0;break}yield RS.delay(this.waitDurationMs)}})}constructor(M,D){super(M),this.waitDurationMs=D,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new P(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),N})}isAudioConnectionSuccessful(F,N){return F&&N.packetsReceived>0}constructor(F,N,P=new w.default){this.logger=F,this.meetingSession=N,this.configuration=P,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");l.default=k},PbSJ:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptionStatus");l.default=S},PhnE:function(j,l,f){"use strict";var S=l;S.build="minimal",S.Writer=f("hl97"),S.BufferWriter=f("92Bn"),S.Reader=f("s0Ci"),S.BufferReader=f("5xrR"),S.util=f("kU+7"),S.rpc=f("rIeS"),S.roots=f("k8sa"),S.configure=h;function h(){S.util._configure(),S.Writer._configure(S.BufferWriter),S.Reader._configure(S.BufferReader)}o(h,"configure"),h()},PmG3:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.AudioInputRequestFailed=1]="AudioInputRequestFailed",h[h.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",h[h.ConnectionFailed=3]="ConnectionFailed",h[h.AudioNotReceived=4]="AudioNotReceived"})(S=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=S},PsbS:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("3wzr"),m=f("BQaj"),a=h(f("59sL"));let s=o(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new u.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,r){return S(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),p=yield this.hmac(n,c),g=yield this.hmac(r,p);return yield this.hmac("aws4_request",g)})}signURL(e,t,n,r,c,p,g){return S(this,void 0,void 0,function*(){const d=this.getDateTimeString(),y=this.getDateString(d),E="AWS4-HMAC-SHA256";let w="";this.chimeClient.config.region instanceof Function?w=yield this.chimeClient.config.region():w=this.chimeClient.config.region;const k="host",V="host:"+r.toLowerCase()+`
`,F=y+"/"+w+"/"+n+"/aws4_request";let N;this.chimeClient.config.credentials instanceof Function?N=yield this.chimeClient.config.credentials():N=this.chimeClient.config.credentials;let P=new Map;P.set("X-Amz-Algorithm",[E]),P.set("X-Amz-Credential",[encodeURIComponent(N.accessKeyId+"/"+F)]),P.set("X-Amz-Date",[d]),P.set("X-Amz-Expires",["10"]),P.set("X-Amz-SignedHeaders",["host"]),N.sessionToken&&P.set("X-Amz-Security-Token",[encodeURIComponent(N.sessionToken)]),P.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),P.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),g==null||g.forEach((de,Ee)=>{const _e=encodeURIComponent(Ee);de.sort().forEach(ye=>{P.has(_e)||P.set(_e,[]),P.get(_e).push(encodeURIComponent(ye))})});let x="";P=new Map([...P.entries()].sort()),P.forEach((de,Ee)=>{de.forEach(_e=>{x.length&&(x+="&"),x+=Ee+"="+_e})});const O=e+`
`+c+`
`+x+`
`+V+`
`+k+`
`+m.toHex(yield this.hmac(p)),M=m.toHex(yield this.hmac(O)),D=`AWS4-HMAC-SHA256
`+d+`
`+y+"/"+w+"/"+n+`/aws4_request
`+M,J=yield this.getSignatureKey(N.secretAccessKey,y,w,n),q=m.toHex(yield this.hmac(D,J)),$=x+"&X-Amz-Signature="+q;return t+"://"+r+c+"?"+$})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=s},PvdL:function(j,l,f){"use strict";f.d(l,"a",function(){return e}),f.d(l,"b",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={MissingArgument:"missing_argument",NotPaid:"not_paid",InvalidLink:"invalid_link",InviteInactive:"invite_inactive",InviteAlreadyUsed:"invite_already_used",InviteNotAllowed:"invite_not_allowed",AcceptNotAllowed:"accept_not_allowed",FeatureDisabled:"feature_disabled",OrgsSevered:"orgs_severed",InternalError:"internal_error",CustomInvitesNotSupported:"custom_invites_not_supported",InvalidRecipientTeam:"invalid_recipient_team",EmailDoesNotMatch:"email_does_not_match"},t=Object(a.a)("sharedInvites.accept generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"sharedInvites.accept",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to sharedInvites.accept
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersharedInvitesAcceptFetcher",description:"sharedInvites.accept generated fetcher"}},PwtQ:function(j,l,f){"use strict";j.exports=u;var S=f("wDi9");(u.prototype=Object.create(S.prototype)).constructor=u;var h=f("j4TH");function u(){S.call(this)}o(u,"BufferWriter"),u._configure=function(){u.alloc=h._Buffer_allocUnsafe,u.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?o(function(s,i,e){i.set(s,e)},"writeBytesBuffer_set"):o(function(s,i,e){if(s.copy)s.copy(i,e,0,s.length);else for(var t=0;t<s.length;)i[e++]=s[t++]},"writeBytesBuffer_copy")},u.prototype.bytes=o(function(s){h.isString(s)&&(s=h._Buffer_from(s,"base64"));var i=s.length>>>0;return this.uint32(i),i&&this._push(u.writeBytesBuffer,i,s),this},"write_bytes_buffer");function m(a,s,i){a.length<40?h.utf8.write(a,s,i):s.utf8Write?s.utf8Write(a,i):s.write(a,i)}o(m,"writeStringBuffer"),u.prototype.string=o(function(s){var i=h.Buffer.byteLength(s);return this.uint32(i),i&&this._push(m,i,s),this},"write_string_buffer"),u._configure()},Q1Gq:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={InvalidAuth:"invalid_auth",MissingArgument:"missing_argument",Shrug:"shrug"},t=Object(a.a)("helpdesk.categories generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason","token"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"helpdesk.categories",args:y,reason:p.reason,computeToken:!1}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to helpdesk.categories
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskCategoriesFetcher",description:"helpdesk.categories generated fetcher"}},Q2ix:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerTransitionResult=void 0;var S;(function(h){h[h.Transitioned=0]="Transitioned",h[h.NoTransitionAvailable=1]="NoTransitionAvailable",h[h.DeferredTransition=2]="DeferredTransition",h[h.TransitionFailed=3]="TransitionFailed"})(S=l.SessionStateControllerTransitionResult||(l.SessionStateControllerTransitionResult={})),l.default=S},"Q8+J":function(j,l,f){"use strict";(function(S){Object.defineProperty(l,"__esModule",{value:!0});let h=o(class Ns{static register(){!("document"in S)||!document.addEventListener||Ns.shouldRegisterCSPMonitor&&(Ns.added||(document.addEventListener("securitypolicyviolation",Ns.listener),Ns.added=!0))}static unregister(){!("document"in S)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Ns.listener),Ns.loggers=new Set,Ns.added=!1)}static disable(){Ns.shouldRegisterCSPMonitor=!1,Ns.unregister()}static addLogger(m){m&&Ns.loggers.add(m)}static removeLogger(m){m&&Ns.loggers.delete(m)}},"CSPMonitor");l.default=h,h.loggers=new Set,h.shouldRegisterCSPMonitor=!0,h.added=!1,h.listener=u=>{const m=`Security Policy Violation
Blocked URI: ${u.blockedURI}
Violated Directive: ${u.violatedDirective}
Original Policy: ${u.originalPolicy}
Document URI: ${u.documentURI}
Source File: ${u.sourceFile}
Line No.: ${u.lineNumber}
`;for(const a of h.loggers)a.error(m);h.loggers.size===0&&console.error(m)}}).call(this,f("yLpj"))},QPT4:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.PRONUNCIATION="pronunciation",h.PUNCTUATION="punctuation"})(S||(S={})),l.default=S},QUzi:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("KJDN"));let u=o(class extends h.default{constructor(a){super(a),this.name="NotFoundError"}},"NotFoundError");l.default=u},QhKv:function(j,l,f){"use strict";j.exports=u;var S=f("LDIi");(u.prototype=Object.create(S.prototype)).constructor=u;var h=f("j4TH");function u(m){S.call(this,m)}o(u,"BufferReader"),u._configure=function(){h.Buffer&&(u.prototype._slice=h.Buffer.prototype.slice)},u.prototype.string=o(function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},"read_string_buffer"),u._configure()},QzVx:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=S},"R+jL":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{devicePixelRatio(){return typeof window>"u"||!window||!window.devicePixelRatio?1:window.devicePixelRatio}},"DevicePixelRatioWindowSource");l.default=S},R4Nl:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=S(f("59sL"));function u(e){return new Promise(t=>setTimeout(t,e))}o(u,"wait"),l.wait=u;function m(){var e;try{return((e=window.frameElement)===null||e===void 0?void 0:e.nodeName)==="IFRAME"||parent!==top}catch{return!0}}o(m,"isIFramed"),l.isIFramed=m;function a(e){return e===null?null:typeof e!="object"?e:Array.isArray(e)?e.map(a):Object.keys(e).reduce((t,n)=>{const r=e[n],c=typeof r=="object"?a(r):r;return t[n.toLowerCase()]=c,t},{})}o(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function s(){const e=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${e.major}.${e.minor}`}}o(s,"getDefaultAssetSpec"),l.getDefaultAssetSpec=s;function i(e){const t=Math.abs(e),n=e<=0?"+":"-",r=Math.floor(t/60).toString().padStart(2,"0"),c=Math.floor(t%60).toString().padStart(2,"0");return`${n}${r}:${c}`}o(i,"getFormattedOffset"),l.getFormattedOffset=i},R9j3:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(y,E,w,k){function V(F){return F instanceof w?F:new w(function(N){N(F)})}return o(V,"adopt"),new(w||(w=Promise))(function(F,N){function P(M){try{O(k.next(M))}catch(D){N(D)}}o(P,"fulfilled");function x(M){try{O(k.throw(M))}catch(D){N(D)}}o(x,"rejected");function O(M){M.done?F(M.value):V(M.value).then(P,x)}o(O,"step"),O((k=k.apply(y,E||[])).next())})},h=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("uCvS")),m=h(f("LmyK")),a=h(f("mpmV")),s=h(f("Xf/8")),i=h(f("NE7a")),e=h(f("tcc5")),t=h(f("dPBs")),n=h(f("8wPz")),r=f("f2XL"),c=f("KyYT"),p=h(f("J+fJ")),g=h(f("DG83"));let d=o(class jc{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(w){return`_${w}`}).replace(/([A-Z][A-Z]+)/g,function(w){return`_${w}`}).toLowerCase()}logLatency(E,w,k){const V=this.toSuffix(E);this.logEventTime("meeting"+V,w,k)}logStateTimeout(E,w){const k=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},w),{state:`state${k}`}))}logAudioEvent(E,w){const k="audio"+this.toSuffix(p.default[E]);this.logEvent(k,w)}logVideoEvent(E,w){const k="video"+this.toSuffix(g.default[E]);this.logEvent(k,w)}logEventTime(E,w){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const V=Object.assign(Object.assign({},k),{call_id:this.audioVideoController.configuration.meetingId,client_type:jc.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(V)}`),this.metricsAddTime(E,w,V)}logMeetingSessionStatus(E){const w=`${E.statusCode()}`;this.logEvent(w);const k={status:w,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",k),E.isTerminal()&&this.logEvent("meeting_session_stopped",k),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",k),E.isFailure()&&this.logEvent("meeting_session_failed",k)}logLifecycleEvent(E,w){const k={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[w])}`,lifecycle_event_condition_code:`${w}`};this.logEvent("meeting_session_lifecycle",k)}logEvent(E){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const k=Object.assign(Object.assign({},w),{call_id:this.audioVideoController.configuration.meetingId,client_type:jc.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(k)}`),this.metricsLogEvent(E,k)}start(E,w){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=w,this.clientMetricReport=new u.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new n.default(this.interval),this.intervalScheduler.start(()=>S(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(E,w){const k=w?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let V;w?V=this.clientMetricReport.getMetricMap(k.mediaType,k.direction):V=this.clientMetricReport.getMetricMap();for(const F in E)F in V&&(typeof E[F]=="number"?(k.previousMetrics[F]=k.currentMetrics[F],k.currentMetrics[F]=E[F]):typeof E[F]=="string"?k.currentStringMetrics[F]=E[F]:typeof E[F]=="object"?(k.previousObjectMetrics[F]=k.currentObjectMetrics[F]===void 0?E[F]:k.currentObjectMetrics[F],k.currentObjectMetrics[F]=E[F]):this.logger.error(`Unknown metric value type ${typeof E[F]} for metric ${F}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const w=Date.now();for(const k of E){const V=this.isStreamRawMetricReport(k.type);if(V){const F=this.clientMetricReport.streamMetricReports[Number(k.ssrc)];if(F)F.mediaType===a.default.VIDEO&&F.direction===m.default.UPSTREAM?F.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(k.rid):F.streamId=this.videoStreamIndex.streamIdForSSRC(Number(k.ssrc));else{const N=new i.default;N.mediaType=this.getMediaType(k),N.direction=this.getDirectionType(k),N.mediaType===a.default.VIDEO&&N.direction===m.default.UPSTREAM?N.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(k.rid):this.videoStreamIndex.allStreams().empty()||(N.streamId=this.videoStreamIndex.streamIdForSSRC(Number(k.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(N.groupId=this.videoStreamIndex.groupIdForSSRC(Number(k.ssrc)))),this.clientMetricReport.streamMetricReports[Number(k.ssrc)]=N}this.clientMetricReport.currentSsrcs[Number(k.ssrc)]=1}this.updateMetricValues(k,V)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=w,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,w){const k=this.clientMetricReport.getStreamDimensionMap();for(const V in w.currentStringMetrics)if(V in k){const F=r.SdkStreamDimension.create();F.type=k[V];const N=r.SdkDimensionValue.create();N.stringValue=w.currentStringMetrics[V],F.value=N,E.dimensions.push(F)}}addMetricFrame(E,w,k,V){const F=k.type,N=k.transform,P=k.source,x=w.streamMetricFrames.length,O=w.streamMetricFrames[x-1];if(F){const M=r.SdkMetric.create();M.type=F,M.value=N(P||E,V),V?O.metrics.push(M):w.globalMetrics.push(M)}}addGlobalMetricsToProtobuf(E){const w=this.clientMetricReport.getMetricMap();for(const k in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(k,E,w[k])}addStreamMetricsToProtobuf(E){for(const w in this.clientMetricReport.streamMetricReports){const k=this.clientMetricReport.streamMetricReports[w],V=r.SdkStreamMetricFrame.create();V.streamId=k.streamId,V.metrics=[],this.addStreamMetricDimensionFrames(V,k),E.streamMetricFrames.push(V);const F=this.clientMetricReport.getMetricMap(k.mediaType,k.direction);for(const N in k.currentMetrics)this.addMetricFrame(N,E,F[N],Number(w));for(const N in k.currentStringMetrics)this.addMetricFrame(N,E,F[N],Number(w));for(const N in k.currentObjectMetrics)this.addMetricFrame(N,E,F[N],Number(w))}}makeClientMetricProtobuf(){const E=r.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E)}getMediaType(E){return E.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(E){const{type:w}=E;return w==="inbound-rtp"||w==="remote-outbound-rtp"||w==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"&&E.kind==="audio"}isValidSsrc(E){let w=!0;return this.isStreamRawMetricReport(E.type)&&this.getDirectionType(E)===m.default.DOWNSTREAM&&this.getMediaType(E)===a.default.VIDEO&&(w=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),w}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const w=[];for(const k of E)this.isValidRawMetricReport(k)&&w.push(k);return w}handleRawMetricReports(E){const w=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(w)}`);const k=[];this.maybeAddRedRecoveryMetrics(k),this.clientMetricReport.customStatsReports=k,w.push(...k),this.processRawMetricReports(w);const V=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(V),this.audioVideoController.forEachObserver(F=>{c.Maybe.of(F.metricsDidReceive).map(N=>N.bind(F)(this.clientMetricReport.clone()))})}getStatsWrapper(){return S(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const w=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=w,w.forEach(k=>{E.push(k)}),this.handleRawMetricReports(E)}catch(w){this.logger.error(w.message)}})}overrideObservableMetric(E,w){this.clientMetricReport.overrideObservableMetric(E,w)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}constructor(E,w,k=jc.INTERVAL_MS){this.audioVideoController=E,this.logger=w,this.interval=k,this.intervalScheduler=null,this.redRecoveryMetricReport=new s.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.metricsAddTime=(V,F,N)=>{},this.metricsLogEvent=(V,F)=>{}}},"StatsCollector");l.default=d,d.INTERVAL_MS=1e3,d.CLIENT_TYPE="amazon-chime-sdk-js"},RUbL:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(N,P,x,O){function M(D){return D instanceof x?D:new x(function(J){J(D)})}return o(M,"adopt"),new(x||(x=Promise))(function(D,J){function q(Ee){try{de(O.next(Ee))}catch(_e){J(_e)}}o(q,"fulfilled");function $(Ee){try{de(O.throw(Ee))}catch(_e){J(_e)}}o($,"rejected");function de(Ee){Ee.done?D(Ee.value):M(Ee.value).then(q,$)}o(de,"step"),de((O=O.apply(N,P||[])).next())})},h=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54")),m=h(f("Y8b2")),a=h(f("6/h7")),s=h(f("o13v")),i=f("KyYT"),e=h(f("FxSh")),t=h(f("JTre")),n=f("NDMw"),r=h(f("DbLV")),c=h(f("xzjI")),p=h(f("B7cK")),g=h(f("UW8m")),d=h(f("XhYu")),y=h(f("V4cD")),E=h(f("SgmS")),w=h(f("dWQL")),k=f("dWP+");let V=o(class xi{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(P=this.mediaDeviceWrapper)===null||P===void 0||P.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(P=this.mediaDeviceWrapper)===null||P===void 0||P.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return S(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const x=yield this.listDevicesOfKind("audioinput",P);return this.trace("listAudioInputDevices",P,x),x})}listVideoInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const x=yield this.listDevicesOfKind("videoinput",P);return this.trace("listVideoInputDevices",P,x),x})}listAudioOutputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const x=yield this.listDevicesOfKind("audiooutput",P);return this.trace("listAudioOutputDevices",P,x),x})}pushAudioMeetingStateForPermissions(P){var x;(x=this.eventController)===null||x===void 0||x.publishEvent(P===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(P){var x;(x=this.eventController)===null||x===void 0||x.publishEvent(P===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(P){return S(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(P))})}startAudioInputTask(P){var x;return S(this,void 0,void 0,function*(){if(P===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return n.isAudioTransformDevice(P)?(this.logger.info(`Choosing transform input device ${P}`),yield this.chooseAudioTransformInputDevice(P)):(this.logger.info(`Choosing intrinsic audio input device ${P}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",P)),this.trace("startAudioInputDevice",P,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(x=this.transform)===null||x===void 0?void 0:x.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(O){throw O}})}stopAudioInput(){return S(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return S(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(P){var x;return S(this,void 0,void 0,function*(){if(((x=this.transform)===null||x===void 0?void 0:x.device)===P)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const O=xi.getAudioContext();if(!(O instanceof OfflineAudioContext))switch(O.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield O.resume()}let M;try{M=yield P.createAudioNode(O)}catch(J){throw this.logger.error(`Unable to create transform device node: ${J}.`),J}const D=yield P.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",D),this.logger.debug(`Got inner stream: ${D}.`),this.setTransform(P,M)})}chooseVideoTransformInputDevice(P){var x;return S(this,void 0,void 0,function*(){if(this.eventController&&P instanceof e.default&&P.passEventControllerToProcessors(this.eventController),P===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const O=this.chosenVideoTransformDevice;O&&this.logger.info("Switched from previous VideoTransformDevice");const M=!!O,D=yield P.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((x=this.activeDevices.video)===null||x===void 0?void 0:x.stream,D)){this.logger.info("video transform device needs new intrinsic device"),M&&O.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=P,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",D),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=P,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield P.transformStream(this.activeDevices.video.stream)})}startVideoInput(P){return S(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(P))})}startVideoInputTask(P){return S(this,void 0,void 0,function*(){if(!P){this.logger.error("Invalid video input device");return}try{return k.isVideoTransformDevice(P)?(this.logger.info(`Choosing video transform device ${P}`),yield this.chooseVideoTransformInputDevice(P),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",P),this.trace("startVideoInputDevice",P),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(x){throw x}})}stopVideoInput(){return S(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return S(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(P){return S(this,void 0,void 0,function*(){this.audioOutputDeviceId=P,this.watchForDeviceChangesIfNecessary();const x=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(x),this.trace("chooseAudioOutput",P,null)})}addDeviceChangeObserver(P){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(P),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(P){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(P),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var P,x;if(!this.activeDevices.audio)return null;const O=(x=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||x===void 0?void 0:x.end;if(O){const M=O.context.createAnalyser();return M.removeOriginalInputs=()=>{try{O.disconnect(M)}catch{}},O.connect(M),M}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(P){const x=xi.getAudioContext(),O=x.createAnalyser(),M=x.createMediaStreamSource(P);return M.connect(O),this.trace("createAnalyserNodeForAudioInput"),O.removeOriginalInputs=()=>{try{M.disconnect(O)}catch{}},O}startVideoPreviewForVideoInput(P){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",P.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,P,!0),this.trace("startVideoPreviewForVideoInput",P.id)}stopVideoPreviewForVideoInput(P){t.default.disconnectVideoStreamFromVideoElement(P,!1),this.trace("stopVideoPreviewForVideoInput",P.id)}setDeviceLabelTrigger(P){if(this.deviceInfoCache){for(const x of this.deviceInfoCache)if(!x.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=P,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(P){let x=null;return this.useWebAudio?(x=xi.getAudioContext().createMediaStreamSource(P),x.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",P.id),x}chooseVideoInputQuality(P,x,O){const M=this.browserBehavior.requiresResolutionAlignment(P,x);this.videoInputQualitySettings=new w.default(M[0],M[1],O)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return S(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return S(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(P){return S(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(P){const x=this.activeDevices[P];if(!x)return;const O=x.endedCallback,M=x.trackMuteCallback,D=x.trackUnmuteCallback;for(const J of x.stream.getTracks())J.stop(),O&&J.removeEventListener("ended",O),M&&J.removeEventListener("mute",M),D&&J.removeEventListener("unmute",D),delete x.endedCallback,delete x.trackMuteCallback,delete x.trackUnmuteCallback,delete this.activeDevices[P]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(P){var x;let O=this.activeDevices.audio;if(this.useWebAudio&&(O=this.getMediaStreamDestinationNode()),!!O){for(const M of O.stream.getTracks())M.enabled!==P&&(M.enabled=P);this.muted!==!P&&(this.muted=!P,(x=this.transform)===null||x===void 0||x.device.mute(this.muted))}}static getIntrinsicDeviceId(P){if(!P)return;if(typeof P=="string")return P;if(P.id)return P.id;const O=P.deviceId;if(!O)return;if(typeof O=="string"||Array.isArray(O))return O;const M=O;if(typeof M.exact=="string"||Array.isArray(M.exact))return M.exact}static createEmptyAudioDevice(){return xi.synthesizeAudioDevice(0)}static synthesizeAudioDevice(P){const x=xi.getAudioContext(),O=x.createMediaStreamDestination();if(P){const M=x.createGain();M.gain.value=.1,M.connect(O);const D=x.createOscillator();D.frequency.value=P,D.connect(M),D.start()}else{const M=x.createBufferSource();try{M.buffer=x.createBuffer(1,x.sampleRate*5,x.sampleRate)}catch(D){if(D&&D.name==="NotSupportedError")M.buffer=x.createBuffer(1,xi.defaultSampleRate*5,xi.defaultSampleRate);else throw D}M.buffer.getChannelData(0)[0]=3e-4,M.loop=!0,M.connect(O),M.start()}return O.stream}listDevicesOfKind(P,x){return S(this,void 0,void 0,function*(){return(x||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(P)})}updateDeviceInfoCacheFromBrowser(){var P;return S(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let O=yield navigator.mediaDevices.enumerateDevices(),M=!0;for(const D of O)if(!D.label){M=!1;break}if(!M)try{this.logger.info("attempting to trigger media device labels since they are hidden");const D=yield this.deviceLabelTrigger();O=yield navigator.mediaDevices.enumerateDevices();for(const J of D.getTracks())J.stop()}catch(D){this.logger.info("unable to get media device labels"),(P=this.eventController)===null||P===void 0||P.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(D)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(O)}`),this.deviceInfoCache=O})}listCachedDevicesOfKind(P){const x=[];if(this.deviceInfoCache)for(const O of this.deviceInfoCache)O.kind===P&&x.push(O);return x}handleDeviceChange(){return S(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const P=this.listCachedDevicesOfKind("audioinput"),x=this.listCachedDevicesOfKind("videoinput"),O=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const M=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),J=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(q=>{this.areDeviceListsEqual(P,M)||i.Maybe.of(q.audioInputsChanged).map($=>$.bind(q)(M)),this.areDeviceListsEqual(x,D)||i.Maybe.of(q.videoInputsChanged).map($=>$.bind(q)(D)),this.areDeviceListsEqual(O,J)||i.Maybe.of(q.audioOutputsChanged).map($=>$.bind(q)(J))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(P,x){return S(this,void 0,void 0,function*(){try{P==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}P==="audio"?this.forEachObserver(O=>{i.Maybe.of(O.audioInputStreamEnded).map(M=>M.bind(O)(x))}):this.forEachObserver(O=>{i.Maybe.of(O.videoInputStreamEnded).map(M=>M.bind(O)(x))})})}forEachObserver(P){for(const x of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(x)&&P(x)})}forEachMediaStreamBrokerObserver(P){for(const x of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(x)&&P(x)})}areDeviceListsEqual(P,x){return JSON.stringify(P.map(O=>JSON.stringify(O)).sort())===JSON.stringify(x.map(O=>JSON.stringify(O)).sort())}intrinsicDeviceAsMediaStream(P){return P&&P.id?P:null}hasSameMediaStreamId(P,x,O){var M,D,J,q;let $;return P==="audio"?($=O==null?void 0:O.audio.streamId,!!$&&$===((D=(M=x.constraints)===null||M===void 0?void 0:M.audio)===null||D===void 0?void 0:D.streamId)):($=O==null?void 0:O.video.streamId,!!$&&$===((q=(J=x==null?void 0:x.constraints)===null||J===void 0?void 0:J.video)===null||q===void 0?void 0:q.streamId))}hasSameGroupId(P,x,O){if(P==="")return!0;const M=xi.getIntrinsicDeviceId(O);return this.logger.debug(`Checking deviceIds ${M} of type ${typeof M} with groupId ${P}`),typeof M=="string"&&P===this.getGroupIdFromDeviceId(x,M)}getGroupIdFromDeviceId(P,x){if(this.deviceInfoCache!==null){const O=this.listCachedDevicesOfKind(`${P}input`).find(M=>M.deviceId===x);if(O&&O.groupId)return this.logger.debug(`GroupId of deviceId ${x} found in cache is ${O.groupId}`),O.groupId}return this.logger.debug(`GroupId of deviceId ${x} found in cache is empty`),""}handleGetUserMediaError(P,x){if(!P)throw new c.default(P);switch(P.name){case"NotReadableError":case"TrackStartError":throw new g.default(P);case"NotFoundError":case"DevicesNotFoundError":throw new p.default(P);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw x&&x<xi.permissionDeniedOriginDetectionThresholdMs?new y.default(P,"Permission denied by browser"):new y.default(P,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new d.default(P);case"TypeError":throw new E.default(P);case"AbortError":default:throw new c.default(P)}}matchesDeviceSelection(P,x,O,M){return O&&O.stream.active&&(this.hasSameMediaStreamId(P,O,M)||O.groupId!==null&&this.hasSameGroupId(O.groupId,P,x))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(O.constraints)} to proposed constraints ${JSON.stringify(M)}`),O.matchesConstraints(M)):!1}chooseInputIntrinsicDevice(P,x){var O,M;return S(this,void 0,void 0,function*(){const D=this.getMediaStreamConstraints(P,x);if(this.matchesDeviceSelection(P,x,this.activeDevices[P],D)){this.logger.info(`reusing existing ${P} input device`);return}this.activeDevices[P]&&this.activeDevices[P].stream&&this.stopTracksAndRemoveCallbacks(P);const J=Date.now(),q=new r.default;try{this.logger.info(`requesting new ${P} device with constraint ${JSON.stringify(D)}`);const $=this.intrinsicDeviceAsMediaStream(x);P==="audio"&&x===null?(q.stream=xi.createEmptyAudioDevice(),q.constraints=null):$?(this.logger.info(`using media stream ${$.id} for ${P} device`),q.stream=$,q.constraints=D):(q.stream=yield navigator.mediaDevices.getUserMedia(D),q.constraints=D),yield this.handleNewInputDevice(P,q)}catch($){const de=this.getErrorMessage($);P==="audio"?(O=this.eventController)===null||O===void 0||O.publishEvent("audioInputFailed",{audioInputErrorMessage:de}):(M=this.eventController)===null||M===void 0||M.publishEvent("videoInputFailed",{videoInputErrorMessage:de}),this.logger.error(`failed to get ${P} device for constraints ${JSON.stringify(D)}: ${de}`);let Ee=!0;if($&&"constraint"in $&&(this.logger.error(`Over-constrained by constraint: ${$.constraint}`),this.useMediaConstraintsFallback)){const _e=this.getMediaStreamConstraints(P,x,!0),ye=JSON.stringify(_e);if(ye!==JSON.stringify(D)){this.logger.info(`retry requesting new ${P} device with minimal constraint ${ye}`);try{q.stream=yield navigator.mediaDevices.getUserMedia(_e),q.constraints=_e,yield this.handleNewInputDevice(P,q),Ee=!1}catch(Be){this.logger.error(`failed to get ${P} device for constraints ${ye}: ${this.getErrorMessage(Be)}`)}}}if(Ee){if(P==="audio"){this.logger.info(`choosing null ${P} device instead`);try{q.stream=xi.createEmptyAudioDevice(),q.constraints=null,yield this.handleNewInputDevice(P,q)}catch(_e){this.logger.error(`failed to choose null ${P} device. ${_e.name}: ${_e.message}`)}}this.handleGetUserMediaError($,Date.now()-J)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(P){return P?P.name&&P.message?`${P.name}: ${P.message}`:P.name?P.name:P.message?P.message:"UnknownError":"UnknownError"}handleNewInputDevice(P,x){var O;return S(this,void 0,void 0,function*(){this.logger.info(`got ${P} device for constraints ${JSON.stringify(x.constraints)}`);const M=(O=this.getMediaTrackSettings(x.stream))===null||O===void 0?void 0:O.deviceId;x.groupId=M?this.getGroupIdFromDeviceId(P,M):"",this.activeDevices[P]=x,this.logger.debug(`Set activeDevice to ${JSON.stringify(x)}`),this.watchForDeviceChangesIfNecessary();const D=x.stream.getTracks()[0];if(D&&(x.endedCallback=()=>{this.activeDevices[P]&&this.activeDevices[P].stream===x.stream&&(this.handleDeviceStreamEnded(P,M),delete x.endedCallback)},D.addEventListener("ended",x.endedCallback,{once:!0})),P==="audio"){const J=x.stream.getAudioTracks()[0];if(J){const q=J.getSettings().deviceId||x.stream;x.trackMuteCallback=()=>{this.mediaStreamMuteObserver(q,!0)},x.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(q,!1)},J.addEventListener("mute",x.trackMuteCallback,{once:!1}),J.addEventListener("unmute",x.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),J.muted?x.trackMuteCallback():x.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(P,x,O,M){if(M&&this.listCachedDevicesOfKind(`${P}input`).length===1)return!0;const D={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?D.deviceId=x:D.deviceId={exact:x},O&&(D.groupId=O),M?D:P==="video"?(D.width={ideal:this.videoInputQualitySettings.videoWidth},D.height={ideal:this.videoInputQualitySettings.videoHeight},D.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},D):(this.supportSampleRateConstraint()&&(D.sampleRate={ideal:xi.defaultSampleRate}),this.supportSampleSizeConstraint()&&(D.sampleSize={ideal:xi.defaultSampleSize}),this.supportChannelCountConstraint()&&(D.channelCount={ideal:xi.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},D))}getMediaStreamConstraintsFromTrackConstraints(P,x){return P==="audio"?{audio:x}:{video:x}}getMediaStreamConstraints(P,x){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M={};if(!x)return null;const D=this.intrinsicDeviceAsMediaStream(x);if(D)return M.streamId=D.id,this.getMediaStreamConstraintsFromTrackConstraints(P,M);if(typeof x=="string"){let J="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?J=this.getGroupIdFromDeviceId(P,x):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),M=this.calculateMediaStreamConstraints(P,x,J,O),this.getMediaStreamConstraintsFromTrackConstraints(P,M)}return F(x)?(M=this.calculateMediaStreamConstraints(P,x.deviceId,x.groupId,O),this.getMediaStreamConstraintsFromTrackConstraints(P,M)):(M=x,this.getMediaStreamConstraintsFromTrackConstraints(P,M))}deviceInfoFromDeviceId(P,x){if(this.deviceInfoCache===null)return null;for(const O of this.deviceInfoCache)if(O.kind===P&&O.deviceId===x)return O;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(P,x){if(!P||!P.active||!x)return!1;if(x.id)return P.id===x.id;const O=this.getMediaTrackSettings(P);if(!O.deviceId)return!1;const M=xi.getIntrinsicDeviceId(x);return typeof M=="string"?O.deviceId===M:!1}getMediaTrackSettings(P){var x;return(x=P.getTracks()[0])===null||x===void 0?void 0:x.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const P=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(P)}setTransform(P,x){var O,M;(M=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||M===void 0||M.end.disconnect(),this.transform={nodes:x,device:P};const D=x==null?void 0:x.end,J=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${D} to destination ${J}.`),D==null||D.connect(J),this.reconnectAudioInputs()}removeTransform(){var P;const x=this.transform;if(x)return(P=this.transform.nodes)===null||P===void 0||P.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),x}attachAudioInputStreamToAudioContext(P){var x;(x=this.audioInputSourceNode)===null||x===void 0||x.disconnect(),this.audioInputSourceNode=xi.getAudioContext().createMediaStreamSource(P);const O=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(O)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=xi.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var P,x;return((x=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||x===void 0?void 0:x.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(P){xi.defaultLatencyHint=P}static getAudioContext(){if(!xi.audioContext){const P={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(P.sampleRate=xi.defaultSampleRate),new u.default().requiresPlaybackLatencyHintForAudioContext()&&(P.latencyHint="playback"),xi.defaultLatencyHint&&(P.latencyHint=xi.defaultLatencyHint),xi.audioContext=new(window.AudioContext||window.webkitAudioContext)(P)}return xi.audioContext}static closeAudioContext(){if(xi.audioContext)try{xi.audioContext.close()}catch{}xi.audioContext=null}addMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.add(P)}removeMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.delete(P)}publishVideoInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(x=>{x.videoInputDidChange&&x.videoInputDidChange(P)}),this.pushVideoMeetingStateForPermissions(P)}publishAudioInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(x=>{x.audioInputDidChange&&x.audioInputDidChange(P)}),this.pushAudioMeetingStateForPermissions(P)}publishAudioOutputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(x=>{x.audioOutputDidChange&&x.audioOutputDidChange(P)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(P,x,O){let M=`API/DefaultDeviceController/${P}`;typeof x<"u"&&(M+=` ${JSON.stringify(x)}`),typeof O<"u"&&(M+=` -> ${JSON.stringify(O)}`),this.logger.info(M)}constructor(P,x,O=new u.default,M){this.logger=P,this.browserBehavior=O,this.eventController=M,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new s.default,this.videoInputTaskQueue=new s.default,this.muted=!1,this.mediaStreamMuteObserver=($,de)=>{for(const Ee of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(Ee)&&Ee.audioInputMuteStateChanged&&Ee.audioInputMuteStateChanged($,de)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:D=!1,useMediaConstraintsFallback:J=!0}=x||{};this.useWebAudio=D,this.useMediaConstraintsFallback=J,this.videoInputQualitySettings=new w.default(xi.defaultVideoWidth,xi.defaultVideoHeight,xi.defaultVideoFrameRate);const q=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=q[0],this.videoInputQualitySettings.videoHeight=q[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const $=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify($)}`)}catch($){P.error($.message)}}},"DefaultDeviceController");l.default=V,V.permissionDeniedOriginDetectionThresholdMs=500,V.defaultVideoWidth=960,V.defaultVideoHeight=540,V.defaultVideoFrameRate=15,V.defaultSampleRate=48e3,V.defaultSampleSize=16,V.defaultChannelCount=1,V.audioContext=null;function F(N){return typeof N=="object"&&"deviceId"in N&&"groupId"in N&&"kind"in N&&"label"in N}o(F,"isMediaDeviceInfo")},RfPO:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class Fl{static isTimestampRecent(u,m){return Date.now()<u+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(u){return Fl.isTimestampRecent(this.connectionStartTimestampMs,u)}isLastPacketLossRecent(u){return Fl.isTimestampRecent(this.lastPacketLossInboundTimestampMs,u)}isGoodSignalRecent(u){return Fl.isTimestampRecent(this.lastGoodSignalTimestampMs,u)}isWeakSignalRecent(u){return Fl.isTimestampRecent(this.lastWeakSignalTimestampMs,u)}isNoSignalRecent(u){return Fl.isTimestampRecent(this.lastNoSignalTimestampMs,u)}clone(){const u=new Fl;return u.connectionStartTimestampMs=this.connectionStartTimestampMs,u.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,u.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,u.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,u.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,u.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,u.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,u.consecutiveMissedPongs=this.consecutiveMissedPongs,u.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),u.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),u.audioSpeakerDelayMs=this.audioSpeakerDelayMs,u}setConsecutiveMissedPongs(u){this.consecutiveMissedPongs=u}setConsecutiveStatsWithNoPackets(u){this.consecutiveStatsWithNoPackets=u}setConsecutiveStatsWithNoAudioPacketsSent(u){this.consecutiveStatsWithNoAudioPacketsSent=u}setLastPacketLossInboundTimestampMs(u){this.lastPacketLossInboundTimestampMs=u}setLastNoSignalTimestampMs(u){this.lastNoSignalTimestampMs=u}setLastWeakSignalTimestampMs(u){this.lastWeakSignalTimestampMs=u}setLastGoodSignalTimestampMs(u){this.lastGoodSignalTimestampMs=u}setAudioSpeakerDelayMs(u){this.audioSpeakerDelayMs=u}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=S},Rx4Y:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed"})(S=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=S},SM5d:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptLanguageWithScore");l.default=S},SO8M:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Sa54"));let u=o(class Gc{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Gc(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Gc(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Gc(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,s=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=!new h.default().hasFirefoxWebRTC()&&s}},"AudioProfile");l.default=u},Sa54:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("e0ae"),u=f("K4CH");let m=o(class Kf{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const s of this.chromeLike)if(s===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const s of this.webkitBrowsers)if(s===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Kf.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Kf.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}requiresResolutionAlignment(s,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(s/64)*64,Math.ceil(i/64)*64]:[s,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const i in this.browserSupport)s.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return s.join(", ")}supportedVideoCodecs(){return S(this,void 0,void 0,function*(){const s=new RTCPeerConnection;return s.addTransceiver("video",{direction:"inactive",streams:[]}),(yield s.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},SdmA:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.VideoInputRequestFailed=1]="VideoInputRequestFailed",h[h.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",h[h.ConnectionFailed=3]="ConnectionFailed",h[h.VideoNotSent=4]="VideoNotSent"})(S=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=S},SgmS:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("xzjI"));let u=o(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=u},Sh4b:function(j,l,f){var S=f("E5fQ").default,h=f("UrPO");function u(m,a){if(a&&(S(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(m)}o(u,"_possibleConstructorReturn"),j.exports=u,j.exports.__esModule=!0,j.exports.default=j.exports},Sl5A:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.IDLE="IDLE",h.RUNNING="RUNNING",h.CANCELED="CANCELED",h.FINISHED="FINISHED"})(S||(S={})),l.default=S},Sz6V:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}constructor(u,m){this.signalingURL=u,this.joinToken=m}},"SignalingClientConnectionRequest");l.default=S},"T44/":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoPreferences=l.MutableVideoPreferences=l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=void 0;const h=S(f("bQ+R"));function u(e,t,n){if(e.transceiverController.getMidForGroupId===void 0||e.videoStreamIndex.attendeeIdForGroupId===void 0||n===void 0)return[];const r=new Array,c=new Map,p=new Map;for(const g of t){const d=e.transceiverController.getMidForGroupId(g);if(d===void 0)continue;const y=e.videoStreamIndex.attendeeIdForGroupId(g);c.set(y,d),p.set(y,g)}for(const g of n){const d=new h.default,y=c.get(g.attendeeId);y!==void 0&&(d.mid=y,d.attendeeId=g.attendeeId,d.groupId=p.get(g.attendeeId),d.priority=Number.MAX_SAFE_INTEGER-g.priority,d.targetBitrateKbps=g.targetSizeToBitrateKbps(g.targetSize),d.qualityAdaptationPreference=g.degradationPreference,r.push(d))}return r}o(u,"convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration"),l.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration=u;let m=o(class Jf{static default(){return new Jf([])}[Symbol.iterator](){let t=0;const n=this.items;return{next(){return t<n.length?{done:!1,value:n[t++]}:{done:!0,value:null}}}}first(){return this.items[0]}add(t){this.items.push(t)}replaceFirst(t,n){const r=this.items.findIndex(n);r===-1?this.items.push(t):this.has(t)?this.items.splice(r,1):this.items[r]=t}remove(t){this.items=this.items.filter(n=>!n.equals(t))}clear(){this.items=[]}isEmpty(){return this.items.length===0}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(const n of this.items)if(!t.items.some(r=>r.equals(n)))return!1;return!0}has(t){return this.items.some(n=>n.equals(t))}some(t){return this.items.some(t)}clone(){return new Jf([...this.items])}sort(){this.items.sort((t,n)=>t.partialCompare(n))}modify(){return new a(this)}constructor(t=[]){this.items=t}},"ObjectSet"),a=o(class{cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(t){this.items.has(t)||(this.cow(),this.items.add(t))}replaceFirst(t,n){this.items.has(t)&&!this.items.some(n)||(this.cow(),this.items.replaceFirst(t,n))}remove(t){this.items.has(t)&&(this.cow(),this.items.remove(t))}some(t){return this.items.some(t)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}constructor(t=new m){this.items=t,this.copied=!1}},"SetBuilder"),s=o(class{add(t){this.builder.add(t)}replaceFirst(t,n){this.builder.replaceFirst(t,n)}remove(t){this.builder.remove(t)}some(t){return this.builder.some(t)}clear(){this.builder.clear()}build(){return new i(this.builder.build())}constructor(t){this.builder=t}},"MutableVideoPreferences");l.MutableVideoPreferences=s;let i=o(class Yf{static prepare(){return new s(new a)}static default(){return new Yf(m.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var t;return(t=this.items.first())===null||t===void 0?void 0:t.priority}sorted(){return this.items[Symbol.iterator]()}equals(t){return t===this||this.items.equals(t.items)}modify(){return new s(this.items.modify())}some(t){return this.items.some(t)}isEmpty(){return this.items.isEmpty()}clone(){const t=Yf.prepare();for(const n of this.items)t.add(n.clone());return t.build()}constructor(t){this.items=t}},"VideoPreferences");l.VideoPreferences=i,l.default=i},TSeO:function(j,l){function f(S,h){if(!(S instanceof h))throw new TypeError("Cannot call a class as a function")}o(f,"_classCallCheck"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},TYXu:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}},"RealtimeState");l.default=S},TdKi:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("hlxM"),u=f("nSNv"),m={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let s=o(class extends u.VoiceFocusAudioWorkletNode{enable(){return S(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return S(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return S(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,a.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:r,worker:c,fetchBehavior:p,delegate:g}=t;this.delegate=g,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:d,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:d,model:n,supportFarendStream:y});const E=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:p,path:r})}},"VoiceFocusWorkerBufferNode");l.default=s},Tsvd:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"StreamMetricReport");l.default=S},"U++r":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3}},"ConnectionHealthPolicyConfiguration");l.default=S},U3GI:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.previousMetrics={},this.currentMetrics={},this.currentStringMetrics={},this.previousObjectMetrics={},this.currentObjectMetrics={}}},"GlobalMetricReport");l.default=S},U9CR:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("e0ae"),u=f("K4CH");let m=o(class Xf{version(){return this.browser.version}majorVersion(){return this.version()!==null?parseInt(this.version().split(".")[0]):-1}osMajorVersion(){return parseInt(this.uaParserResult.os.version.split(".")[0])}engine(){return this.uaParserResult.engine.name}engineMajorVersion(){return parseInt(this.uaParserResult.engine.version.split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const s of this.chromeLike)if(s===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const s of this.webkitBrowsers)if(s===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}requiresPlaybackLatencyHintForAudioContext(){return navigator.userAgent.indexOf("Windows")!==-1}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()&&!this.isIOSEdge()||this.isIOSSafari()&&this.majorVersion()>=Xf.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK||this.majorVersion()>=Xf.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK}supportsBackgroundFilter(){return!(this.name()==="safari"&&this.majorVersion()===15||!this.supportsCanvasCapturedStreamPlayback())}supportsVideoLayersAllocationRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsDependencyDescriptorRtpHeaderExtension(){return this.hasChromiumWebRTC()}supportsScalableVideoCoding(){return this.hasChromiumWebRTC()&&this.engine()==="Blink"&&this.engineMajorVersion()>=111}requiresResolutionAlignment(s,i){return this.isAndroid()&&this.isPixel3()?[Math.ceil(s/64)*64,Math.ceil(i/64)*64]:[s,i]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresBundlePolicy(){return"max-bundle"}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}doesNotSupportMediaDeviceLabels(){return this.browser.name==="chromium-webview"}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||this.browser.name==="firefox"&&this.isAndroid())}isSimulcastSupported(){return this.hasChromiumWebRTC()}supportDownlinkBandwidthEstimation(){return!this.isFirefox()}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const s=[];for(const i in this.browserSupport)s.push(`${this.browserName[i]} ${this.browserSupport[i]}+`);return s.join(", ")}supportedVideoCodecs(){return S(this,void 0,void 0,function*(){const s=new RTCPeerConnection;return s.addTransceiver("video",{direction:"inactive",streams:[]}),(yield s.createOffer({offerToReceiveVideo:!0})).sdp.split(`\r
`).filter(i=>i.includes("a=rtpmap:")).map(i=>i.replace(/.* /,"").replace(/\/.*/,"")).filter((i,e,t)=>t.indexOf(i)===e).filter(i=>i!=="rtx"&&i!=="red"&&i!=="ulpfec")})}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}disableResolutionScaleDown(){return this.isAndroid()}disable480pResolutionScaleDown(){return/( Chrome\/98\.)/i.test(navigator.userAgent)&&this.browser.os.startsWith("Windows")}requiresDisablingH264Encoding(){return(this.isIOSSafari()||this.isIOSChrome()||this.isIOSFirefox())&&(this.version()==="15.1.0"||/( OS 15_1)/i.test(navigator.userAgent))}requiresVideoPlayWorkaround(){return this.isSafari()}isVideoFxSupportedBrowser(){return this.supportsBackgroundFilter()}isIOSSafari(){return this.browser.name==="ios"||this.browser.name==="ios-webview"||this.browser.name==="safari"&&/( Mac )/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1}isSafari(){return this.browser.name==="safari"||this.isIOSSafari()}isFirefox(){return this.browser.name==="firefox"}isIOSFirefox(){return this.browser.name==="fxios"}isIOSChrome(){return this.browser.name==="crios"}isChrome(){return this.browser.name==="chrome"}isEdge(){return this.browser.name==="edge-chromium"}isIOSEdge(){return this.browser.name==="edge-ios"}isSamsungInternet(){return this.browser.name==="samsung"}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}constructor(){this.FALLBACK_BROWSER={type:"browser",name:"unknown",version:"unknown",os:"unknown"},this.browser=h.detect()||this.FALLBACK_BROWSER,this.uaParserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null,this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:75,ios:13,safari:13,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605,"chromium-webview":92},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS","chromium-webview":"Chrome WebView"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview","edge-ios"]}},"DefaultBrowserBehavior");l.default=m,m.MIN_IOS_SUPPORT_CANVAS_STREAM_PLAYBACK=16,m.MIN_IOS_NON_SAFARI_SUPPORT_CANVAS_STREAM_PLAYBACK=106},UIXl:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{calculateScore(u,m,a){(a||m===null)&&(m=0),this.volumes.hasOwnProperty(u)||(this.volumes[u]=0),m>this.silenceThreshold?m=1:m=0;const s=this.volumes[u]*this.speakerWeight+m*(1-this.speakerWeight);this.volumes[u]=s;for(const i in this.volumes)i!==u&&(this.volumes[i]=Math.max(this.volumes[i]-this.takeoverRate*m,0));return s<this.cutoffThreshold?0:s}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}constructor(u=.9,m=.01,a=.2,s=.2){this.speakerWeight=u,this.cutoffThreshold=m,this.silenceThreshold=a,this.takeoverRate=s,this.volumes={}}},"DefaultActiveSpeakerPolicy");l.default=S},ULlC:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("yQ3g"));let u=o(class MS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,s){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=s,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new MS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,s){this.reconnectTimeoutMs=a,this.backoffPolicy=s,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=u},UW8m:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("xzjI"));let u=o(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=u},UrPO:function(j,l){function f(S){if(S===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S}o(f,"_assertThisInitialized"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},"V+x/":function(j,l){function f(h,u){for(var m=0;m<u.length;m++){var a=u[m];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(h,a.key,a)}}o(f,"_defineProperties");function S(h,u,m){return u&&f(h.prototype,u),m&&f(h,m),Object.defineProperty(h,"prototype",{writable:!1}),h}o(S,"_createClass"),j.exports=S,j.exports.__esModule=!0,j.exports.default=j.exports},V2kw:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const u={};return u.type=this.type,u.v=this.v,u.meetingId=this.meetingId,u.attendeeId=this.attendeeId,u}constructor(u,m,a,s=[]){this.type="Meet",this.v=1,this.meetingId=u,this.attendeeId=m,this.eventsToIgnore=s,this.authenticationToken=a}},"MeetingEventsClientConfiguration");l.default=S},V3UW:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("uctb")),u=S(f("6/h7"));let m=o(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const s of this.dependencies)s.cancel();this.logger.info(`Canceling ${this.name()}`),u.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&u.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const s=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${s}`)}run(){if(this.promise)return this.promise;const s=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=s.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(s){this.task.setParent(s)}constructor(s,i,e){this.logger=s,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=m},V4cD:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("xzjI"));let u=o(class extends h.default{constructor(a,s){super(a,s),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=u},V5IF:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}},"MeetingSessionTURNCredentials");l.default=S},V7js:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},VCUZ:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0}),l.getFormattedOffset=l.getDefaultAssetSpec=l.toLowerCasePropertyNames=l.isIFramed=l.wait=void 0;const h=S(f("ac3q"));function u(e){return new Promise(t=>setTimeout(t,e))}o(u,"wait"),l.wait=u;function m(){var e;try{return((e=window.frameElement)===null||e===void 0?void 0:e.nodeName)==="IFRAME"||parent!==top}catch{return!0}}o(m,"isIFramed"),l.isIFramed=m;function a(e){return e===null?null:typeof e!="object"?e:Array.isArray(e)?e.map(a):Object.keys(e).reduce((t,n)=>{const r=e[n],c=typeof r=="object"?a(r):r;return t[n.toLowerCase()]=c,t},{})}o(a,"toLowerCasePropertyNames"),l.toLowerCasePropertyNames=a;function s(){const e=h.default.sdkVersionSemVer;return{assetGroup:`sdk-${e.major}.${e.minor}`}}o(s,"getDefaultAssetSpec"),l.getDefaultAssetSpec=s;function i(e){const t=Math.abs(e),n=e<=0?"+":"-",r=Math.floor(t/60).toString().padStart(2,"0"),c=Math.floor(t%60).toString().padStart(2,"0");return`${n}${r}:${c}`}o(i,"getFormattedOffset"),l.getFormattedOffset=i},VKrp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",h[h.ConnectionFailed=2]="ConnectionFailed",h[h.ICENegotiationFailed=3]="ICENegotiationFailed"})(S=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=S},VPK4:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"Transcript");l.default=S},VUud:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={NotificationNotFound:"notification_not_found",InvalidAction:"invalid_action",ErrorPersistingImpression:"error_persisting_impression",ChannelNotFound:"channel_not_found",InvalidNotificationParams:"invalid_notification_params",CannotProvideChannelAndEntityId:"cannot_provide_channel_and_entity_id",MissingEntityType:"missing_entity_type",InvalidEntityType:"invalid_entity_type"},t=Object(a.a)("megaphone.setNotificationAsSeen generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"megaphone.setNotificationAsSeen",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to megaphone.setNotificationAsSeen
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneSetNotificationAsSeenFetcher",description:"megaphone.setNotificationAsSeen generated fetcher"}},VWEK:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.PRONUNCIATION="pronunciation",h.PUNCTUATION="punctuation"})(S||(S={})),l.default=S},VWHd:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Biyp"));let u=o(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(a){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new h.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){}wantsVideoDependencyDescriptorRtpHeaderExtension(){return!1}constructor(){}},"NoVideoUplinkBandwidthPolicy");l.default=u},"VYs+":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ZdbB"));let m=o(class Sa extends u.default{setEncodingParameters(s){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===Sa.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(Sa.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===Sa.MID_LEVEL_NAME&&this.copyEncodingParams(s.get(Sa.MID_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===Sa.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(Sa.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}setVideoSendingBitrateKbps(s){return S(this,void 0,void 0,function*(){})}setupLocalTransceivers(){var s,i;if(this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((i=(s=this.meetingSessionContext)===null||s===void 0?void 0:s.audioProfile)===null||i===void 0)&&i.hasRedundancyEnabled()&&this.setupAudioRedWorker()),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const i=this._localCameraTransceiver.sender.getParameters().encodings;let e=`simulcast: current encoding parameters 
`;for(const t of i)e+=`rid=${t.rid} maxBitrate=${t.maxBitrate} active=${t.active} scaleDownBy=${t.scaleResolutionDownBy} maxFrameRate = ${t.maxFramerate} 
`;this.logger.info(e)}copyEncodingParams(s,i){i.active=s.active,i.maxBitrate=s.maxBitrate,i.scaleResolutionDownBy=s.scaleResolutionDownBy,i.maxFramerate=s.maxFramerate}constructor(s,i,e){super(s,i,e),this.videoQualityControlParameterMap=new Map;let t=4;for(let n=0;n<Sa.NAME_ARR_ASCENDING.length;n++){const r=Sa.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:Sa.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastTransceiverController");l.default=m,m.LOW_LEVEL_NAME="low",m.MID_LEVEL_NAME="mid",m.HIGH_LEVEL_NAME="hi",m.NAME_ARR_ASCENDING=["low","mid","hi"],m.BITRATE_ARR_ASCENDING=[200,400,1100]},VcdL:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(m,a,s,i){function e(t){return t instanceof s?t:new s(function(n){n(t)})}return o(e,"adopt"),new(s||(s=Promise))(function(t,n){function r(g){try{p(i.next(g))}catch(d){n(d)}}o(r,"fulfilled");function c(g){try{p(i.throw(g))}catch(d){n(d)}}o(c,"rejected");function p(g){g.done?t(g.value):e(g.value).then(r,c)}o(p,"step"),p((i=i.apply(m,a||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.VideoFxCanvasOpsManager=void 0;const h=f("6qF3");let u=o(class{getInferenceInputData(a){return this.inferenceCtx.save(),this.inferenceCtx.scale(this.horizontalResizeScalar,this.verticalResizeScalar),this.inferenceCtx.drawImage(a,0,0),this.inferenceCtx.restore(),this.inferenceCtx.getImageData(0,0,h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS)}configureForStreamParameters(a){return S(this,void 0,void 0,function*(){if(this.streamParameters=a,this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.backgroundReplacementCanvas){const s=document.createElement("canvas");s.width=this.streamParameters.width,s.height=this.streamParameters.height,s.getContext("2d").drawImage(this.backgroundReplacementCanvas,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}this.configureCanvasPipeline()})}configureCanvasPipeline(){this.inferenceCanvas=document.createElement("canvas"),this.inferenceCtx=this.inferenceCanvas.getContext("2d",{willReadFrequently:!0}),this.inferenceCanvas.width=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,this.inferenceCanvas.height=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.horizontalResizeScalar=h.SEGMENTATION_MODEL.WIDTH_IN_PIXELS/this.streamParameters.width,this.verticalResizeScalar=h.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS/this.streamParameters.height}getBackgroundReplacementCanvas(){return this.backgroundReplacementCanvas}loadReplacementBackground(a){return S(this,void 0,void 0,function*(){const s=a.backgroundReplacement.backgroundImageURL,i=a.backgroundReplacement.defaultColor;if(s)try{const e=yield this.loadImage(s);this.backgroundReplacementImage=e,this.resizeAndSetReplacementImage(this.backgroundReplacementImage)}catch(e){throw this.logger.error(e),new Error("Failed to set the replacement image.")}else this.resizeAndSetReplacementColor(i)})}resizeAndSetReplacementImage(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.drawImage(a,0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}resizeAndSetReplacementColor(a){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=this.streamParameters.width,s.height=this.streamParameters.height,i.fillStyle=a,i.fillRect(0,0,this.streamParameters.width,this.streamParameters.height),this.backgroundReplacementCanvas=s}loadImage(a){return S(this,void 0,void 0,function*(){const i=yield(yield fetch(a).catch(t=>{throw this.logger.error(t.toString()),new Error("Failed to fetch image.")})).blob(),e=new Image;return e.src=URL.createObjectURL(i),new Promise((t,n)=>{e.onload=()=>{t(e)},e.onerror=r=>{n(r)}})})}constructor(a,s){this.streamParameters=a,this.outputCanvas=s,this.configureCanvasPipeline()}},"VideoFxCanvasOpsManager");l.VideoFxCanvasOpsManager=u},VgUL:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("wQGL"));let u=o(class{updateConnectionMetric(a){}chooseMediaTrackConstraints(){}chooseEncodingParameters(){var a,s,i,e,t,n,r,c,p,g,d,y;const E=new Map,w=1e3,k=h.default.NAME_ARR_ASCENDING;return E.set(k[0],{rid:k[0],active:!0,scaleResolutionDownBy:((s=(a=this.encodingParams)===null||a===void 0?void 0:a.low)===null||s===void 0?void 0:s.scaleResolutionDownBy)||2,maxBitrate:(((e=(i=this.encodingParams)===null||i===void 0?void 0:i.low)===null||e===void 0?void 0:e.maxBitrateKbps)||this.defaultLowTargetBitrateKbps)*w,maxFramerate:((n=(t=this.encodingParams)===null||t===void 0?void 0:t.low)===null||n===void 0?void 0:n.maxFramerate)||5}),E.set(k[1],{rid:k[1],active:!0,scaleResolutionDownBy:((c=(r=this.encodingParams)===null||r===void 0?void 0:r.high)===null||c===void 0?void 0:c.scaleResolutionDownBy)||1,maxBitrate:(((g=(p=this.encodingParams)===null||p===void 0?void 0:p.high)===null||g===void 0?void 0:g.maxBitrateKbps)||this.defaultHiTargetBitrateKbps)*w,maxFramerate:(y=(d=this.encodingParams)===null||d===void 0?void 0:d.high)===null||y===void 0?void 0:y.maxFramerate}),this.getQualityMapString(E),E}updateIndex(a){this.videoIndex=a}wantsResubscribe(){var a,s;let i=!1;this.nextLocalDescriptions=(a=this.videoIndex)===null||a===void 0?void 0:a.localStreamDescriptions();for(let e=0;e<((s=this.nextLocalDescriptions)===null||s===void 0?void 0:s.length);e++){const t=this.nextLocalDescriptions[e].streamId;if(t!==0&&t){const n=this.currLocalDescriptions.findIndex(r=>r.streamId===t);n!==-1&&this.nextLocalDescriptions[e].disabledByWebRTC!==this.currLocalDescriptions[n].disabledByWebRTC&&(i=!0)}}return this.currLocalDescriptions=this.nextLocalDescriptions,i}chooseCaptureAndEncodeParameters(){}maxBandwidthKbps(){return this.enableUhdContent?2e3:1200}setIdealMaxBandwidthKbps(a){}setHasBandwidthPriority(a){}setHighResolutionFeatureEnabled(a){this.enableUhdContent=a,this.defaultHiTargetBitrateKbps=a?2e3:1200,this.defaultLowTargetBitrateKbps=a?500:300}getQualityMapString(a){var s;let i="";const e=(s=this.videoIndex)===null||s===void 0?void 0:s.localStreamDescriptions();(e==null?void 0:e.length)>0&&(a.forEach(t=>{let n=!1;t.rid==="low"?n=e[0].disabledByWebRTC:n=e[1].disabledByWebRTC,i+=`{ rid: ${t.rid} active:${t.active} disabledByWebRTC: ${n} maxBitrate:${t.maxBitrate} scaleResolutionDownBy:${t.scaleResolutionDownBy} maxFrameRate:${t.maxFramerate}`}),this.logger.info(`simulcast: content policy:chooseEncodingParameters newQualityMap: ${i}`))}addObserver(a){}removeObserver(a){}forEachObserver(a){}constructor(a,s){this.logger=a,this.encodingParams=s,this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.enableUhdContent=!1,this.defaultHiTargetBitrateKbps=1200,this.defaultLowTargetBitrateKbps=300}},"DefaultSimulcastUplinkPolicyForContentShare");l.default=u},VhCr:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u,m,a,s,i,e,t,n,r,c){this.attendeeId=u,this.sdpOffer=m,this.audioHost=a,this.audioMuted=s,this.audioCheckin=i,this.receiveStreamIds=e,this.localVideoEnabled=t,this.videoStreamDescriptions=n,this.connectionTypeHasVideo=r,this.compressedSdpOffer=c,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=S},VoiG:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptionStatus");l.default=S},"W+eo":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("j+uH"));let m=o(class extends u.default{cancel(){for(const s of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${s.name()}`),s.cancel()}run(){return S(this,void 0,void 0,function*(){const s=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),s.push(e.run());const i=[];for(let e=0;e<s.length;e++){try{yield s[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(s,i,e){super(s),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=m},WHnE:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54")),m=h(f("6/h7"));let a=o(class{bindAudioElement(i){return S(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return S(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return S(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)m.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return S(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(d=>{t&&d.meetingAudioStreamBecameInactive(t),this.audioStream&&d.meetingAudioStreamBecameActive(this.audioStream)});const n=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(n&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const r=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(r===c)return;const p=this.audioElement,g=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=null),n)try{yield p.setSinkId(r)}catch(d){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${d}`),d}this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=g)})}getCurrentMeetingAudioStream(){return S(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return S(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return S(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return S(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new u.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},WRer:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("hEYi")),m=f("f2XL"),a=h(f("aVV0"));let s=o(class extends a.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return S(this,void 0,void 0,function*(){this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(e){if(e.type!==u.default.ReceivedSignalFrame||e.message.type!==m.SdkSignalFrame.Type.PAUSE&&e.message.type!==m.SdkSignalFrame.Type.RESUME)return;const t=e.message.pause,n=e.message.type;if(this.context.logger.info(`received new ${n===m.SdkSignalFrame.Type.PAUSE?"pause":"resume"} frame: ${JSON.stringify(t)}`),!t||this.context.videoTileController.getVideoTileForAttendeeId===void 0||this.context.videoDownlinkBandwidthPolicy.forEachObserver===void 0||this.context.videoStreamIndex.attendeeIdForGroupId===void 0)return;const r=t.groupIds.map(c=>{const p=this.context.videoStreamIndex.attendeeIdForGroupId(c);return this.context.videoTileController.getVideoTileForAttendeeId(p)});for(const c of r)c!==void 0&&(n===m.SdkSignalFrame.Type.PAUSE?c.state().paused||(this.serverPausedVideoTileIds.add(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBePausedByDownlinkPolicy(c.id())}),c.pause()):c.state().paused&&this.serverPausedVideoTileIds.has(c.id())&&(this.serverPausedVideoTileIds.delete(c.id()),this.context.videoDownlinkBandwidthPolicy.forEachObserver(p=>{p.tileWillBeUnpausedByDownlinkPolicy(c.id())}),c.unpause()))}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveRemoteVideoPauseResume",this.serverPausedVideoTileIds=new Set}},"ReceiveRemoteVideoPauseResume");l.default=s},WcgR:function(j,l,f){"use strict";var S=f("ILaC"),h=f("uE2L"),u=f("LV2V"),m=f("ngjY"),a=f("KSud"),s=f("nzLN"),i=1,e=32,t=Object(u.a)(function(d,y,E){var w=i;if(E.length){var k=Object(s.a)(E,Object(a.a)(t));w|=e}return Object(m.a)(d,w,y,E,k)});t.placeholder={};var n=t,r=f("Tjpy"),c=f("Tchk"),p=Object(r.a)(function(d,y){return Object(S.a)(y,function(E){E=Object(c.a)(E),Object(h.a)(d,E,n(d[E],d))}),d}),g=l.a=p},Wdtm:function(j,l,f){"use strict";var S=this&&this.__createBinding||(Object.create?function(d,y,E,w){w===void 0&&(w=E),Object.defineProperty(d,w,{enumerable:!0,get:function(){return y[E]}})}:function(d,y,E,w){w===void 0&&(w=E),d[w]=y[E]}),h=this&&this.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),u=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var E in d)E!=="default"&&Object.prototype.hasOwnProperty.call(d,E)&&S(y,d,E);return h(y,d),y},m=this&&this.__awaiter||function(d,y,E,w){function k(V){return V instanceof E?V:new E(function(F){F(V)})}return o(k,"adopt"),new(E||(E=Promise))(function(V,F){function N(O){try{x(w.next(O))}catch(M){F(M)}}o(N,"fulfilled");function P(O){try{x(w.throw(O))}catch(M){F(M)}}o(P,"rejected");function x(O){O.done?V(O.value):k(O.value).then(N,P)}o(x,"step"),x((w=w.apply(d,y||[])).next())})},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(f("aZba")),i=a(f("papz")),e=a(f("42jQ")),t=u(f("/AJg")),n=a(f("HbHZ")),r=a(f("OV1w")),c=f("XCDq"),p=a(f("j+uH"));let g=o(class extends p.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const y=yield new Promise((E,w)=>{const k=this.context;k.turnCredentials=null;let V=o(class{cancel(){this.signalingClient.removeObserver(this),w(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(x){if(x.type===n.default.WebSocketClosed){let M=`The signaling connection was closed with code ${x.closeCode} and reason: ${x.closeReason}`;k.logger.warn(M);let D=i.default.SignalingBadRequest;x.closeCode===4410?(M="The meeting already ended.",k.logger.warn(M),D=i.default.MeetingEnded):x.closeCode>=4500&&x.closeCode<4600&&(D=i.default.SignalingInternalServerError),k.audioVideoController.handleMeetingSessionStatus(new s.default(D),new Error(M));return}if(x.type!==n.default.ReceivedSignalFrame)return;if(x.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const M=x.message.joinack;if(M&&M.videoSubscriptionLimit&&(k.videoSubscriptionLimit=M.videoSubscriptionLimit),k.serverSupportsCompression=M==null?void 0:M.wantsCompressedSdp,(M==null?void 0:M.defaultServerSideNetworkAdaption)!==void 0&&M.defaultServerSideNetworkAdaption!==t.default.Default&&k.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const D=M.defaultServerSideNetworkAdaption;k.logger.info(`Overriding server side network adaption value to ${D}`),k.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(D))}M&&M.turnCredentials?(k.turnCredentials=new e.default,k.turnCredentials.username=M.turnCredentials.username,k.turnCredentials.password=M.turnCredentials.password,k.turnCredentials.ttl=M.turnCredentials.ttl,k.turnCredentials.uris=M.turnCredentials.uris.map(D=>k.meetingSessionConfiguration.urls.urlRewriter(D)).filter(D=>!!D)):k.logger.error("missing TURN credentials in JoinAckFrame");return}if(x.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const O=x.message.index;E(O)}constructor(x){this.signalingClient=x}},"IndexFrameInterceptor");const F=new V(this.context.signalingClient);this.context.signalingClient.registerObserver(F),this.taskCanceler=F,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const N=new r.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(N.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),N.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(N.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),N.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(N)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=g},Wjms:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{process(m){return S(this,void 0,void 0,function*(){return m})}destroy(){return S(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=h},Wnnr:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Z/hr"));let u=o(class{makeTile(a,s,i,e){return new h.default(a,s,i,e)}},"DefaultVideoTileFactory");l.default=u},X3Fi:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("K4CH"),u=S(f("59sL"));let m=o(class Vl{getParserResult(){var s,i;return{browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,osName:((s=this.parserResult)===null||s===void 0?void 0:s.os.name)||Vl.UNAVAILABLE,osVersion:((i=this.parserResult)===null||i===void 0?void 0:i.os.version)||Vl.UNAVAILABLE,sdkVersion:u.default.sdkVersion,sdkName:u.default.sdkName}}constructor(s){var i,e,t,n,r,c,p;try{this.parserResult=navigator&&navigator.userAgent?new h.UAParser(navigator.userAgent).getResult():void 0}catch(g){s.error(g.message)}this.browserMajorVersion=((t=(e=(i=this.parserResult)===null||i===void 0?void 0:i.browser)===null||e===void 0?void 0:e.version)===null||t===void 0?void 0:t.split(".")[0])||Vl.UNAVAILABLE,this.browserName=((n=this.parserResult)===null||n===void 0?void 0:n.browser.name)||Vl.UNAVAILABLE,this.browserVersion=((r=this.parserResult)===null||r===void 0?void 0:r.browser.version)||Vl.UNAVAILABLE,this.deviceName=[((c=this.parserResult)===null||c===void 0?void 0:c.device.vendor)||"",((p=this.parserResult)===null||p===void 0?void 0:p.device.model)||""].join(" ").trim()||Vl.UNAVAILABLE}},"DefaultUserAgentParser");l.default=m,m.UNAVAILABLE="Unavailable"},X9Jc:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});function S(u){return u.map(m=>typeof m=="object"?JSON.stringify(m):`${m}`).join(" ")}o(S,"stringify");let h=o(class{debug(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.debug(S(a))}info(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.info(S(a))}warn(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.warn(S(a))}error(){for(var m=arguments.length,a=new Array(m),s=0;s<m;s++)a[s]=arguments[s];this.base.error(S(a))}constructor(m){this.base=m}},"LoggerAdapter");l.default=h},XCDq:function(j,l,f){"use strict";var S=f("A4hc"),h=S.Reader,u=S.Writer,m=S.util,a=S.roots.default||(S.roots.default={});a.SdkSignalFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkSignalFrame"),s.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.type=1,s.prototype.error=null,s.prototype.join=null,s.prototype.joinack=null,s.prototype.sub=null,s.prototype.suback=null,s.prototype.index=null,s.prototype.pause=null,s.prototype.leave=null,s.prototype.leaveAck=null,s.prototype.bitrates=null,s.prototype.audioControl=null,s.prototype.audioMetadata=null,s.prototype.audioStreamIdInfo=null,s.prototype.pingPong=null,s.prototype.audioStatus=null,s.prototype.clientMetric=null,s.prototype.dataMessage=null,s.prototype.remoteVideoUpdate=null,s.prototype.primaryMeetingJoin=null,s.prototype.primaryMeetingJoinAck=null,s.prototype.primaryMeetingLeave=null,s.prototype.notification=null,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkSignalFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.timestampMs=e.uint64();break;case 2:r.type=e.int32();break;case 3:r.error=a.SdkErrorFrame.decode(e,e.uint32());break;case 4:r.join=a.SdkJoinFrame.decode(e,e.uint32());break;case 5:r.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break;case 6:r.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break;case 7:r.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break;case 8:r.index=a.SdkIndexFrame.decode(e,e.uint32());break;case 10:r.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break;case 11:r.leave=a.SdkLeaveFrame.decode(e,e.uint32());break;case 12:r.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break;case 14:r.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break;case 17:r.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break;case 18:r.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break;case 19:r.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break;case 20:r.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break;case 21:r.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break;case 22:r.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break;case 23:r.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break;case 25:r.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break;case 26:r.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break;case 27:r.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break;case 28:r.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break;case 35:r.notification=a.SdkNotificationFrame.decode(e,e.uint32());break;default:e.skipType(c&7);break}}if(!r.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:r});if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(m.Long){var r=new m.Long(0,0,!0);n.timestampMs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null,n.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(n.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(n.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(n.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(n.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(n.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(n.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(n.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(n.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(n.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(n.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(n.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(n.notification=a.SdkNotificationFrame.toObject(e.notification,t)),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),s}(),a.SdkErrorFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkErrorFrame"),s.prototype.status=0,s.prototype.description="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkErrorFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.status=e.uint32();break;case 2:r.description=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),e.status!=null&&e.hasOwnProperty("status")&&(n.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(n.description=e.description),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkJoinFlags=function(){var s={},i=Object.create(s);return i[s[2]="HAS_STREAM_UPDATE"]=2,i[s[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[s[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),a.SdkClientDetails=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkClientDetails"),s.prototype.appName="",s.prototype.appVersion="",s.prototype.deviceModel="",s.prototype.deviceMake="",s.prototype.platformName="",s.prototype.platformVersion="",s.prototype.clientSource="",s.prototype.chimeSdkVersion="",s.prototype.clientUtcOffset="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkClientDetails;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.appName=e.string();break;case 2:r.appVersion=e.string();break;case 3:r.deviceModel=e.string();break;case 4:r.deviceMake=e.string();break;case 5:r.platformName=e.string();break;case 6:r.platformVersion=e.string();break;case 7:r.clientSource=e.string();break;case 8:r.chimeSdkVersion=e.string();break;case 9:r.clientUtcOffset=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion="",n.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(n.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(n.clientUtcOffset=e.clientUtcOffset),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkServerSideNetworkAdaption=function(){var s={},i=Object.create(s);return i[s[1]="DEFAULT"]=1,i[s[2]="NONE"]=2,i[s[3]="BANDWIDTH_PROBING"]=3,i[s[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),a.SdkJoinFrame=function(){function s(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkJoinFrame"),s.prototype.protocolVersion=2,s.prototype.maxNumOfVideos=0,s.prototype.flags=0,s.prototype.clientDetails=null,s.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.wantsCompressedSdp=!1,s.prototype.serverSideNetworkAdaption=1,s.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,s.prototype.wantsAllTemporalLayersInIndex=!1,s.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.protocolVersion=e.uint32();break;case 2:r.maxNumOfVideos=e.uint32();break;case 3:r.flags=e.uint32();break;case 4:r.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break;case 6:r.audioSessionId=e.uint64();break;case 7:r.wantsCompressedSdp=e.bool();break;case 10:r.serverSideNetworkAdaption=e.int32();break;case 11:if(r.supportedServerSideNetworkAdaptions&&r.supportedServerSideNetworkAdaptions.length||(r.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.supportedServerSideNetworkAdaptions.push(e.int32());else r.supportedServerSideNetworkAdaptions.push(e.int32());break;case 12:r.wantsAllTemporalLayersInIndex=e.bool();break;case 13:r.disablePeriodicKeyframeRequestOnContentSender=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean")return"wantsAllTemporalLayersInIndex: boolean expected";if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[n]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,m.Long){var r=new m.Long(0,0,!0);n.audioSessionId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,n.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(n.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)n.supportedServerSideNetworkAdaptions[c]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(n.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkJoinAckFrame"),s.prototype.turnCredentials=null,s.prototype.videoSubscriptionLimit=0,s.prototype.wantsCompressedSdp=!1,s.prototype.defaultServerSideNetworkAdaption=1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break;case 2:r.videoSubscriptionLimit=e.uint32();break;case 3:r.wantsCompressedSdp=e.bool();break;case 4:r.defaultServerSideNetworkAdaption=e.int32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkLeaveFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkLeaveAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkLeaveAckFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkLeaveAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamServiceType=function(){var s={},i=Object.create(s);return i[s[1]="RX"]=1,i[s[2]="TX"]=2,i[s[3]="DUPLEX"]=3,i}(),a.SdkStreamMediaType=function(){var s={},i=Object.create(s);return i[s[1]="AUDIO"]=1,i[s[2]="VIDEO"]=2,i}(),a.SdkSubscribeFrame=function(){function s(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkSubscribeFrame"),s.prototype.duplex=1,s.prototype.sendStreams=m.emptyArray,s.prototype.receiveStreamIds=m.emptyArray,s.prototype.sdpOffer="",s.prototype.audioHost="",s.prototype.audioCheckin=!1,s.prototype.audioMuted=!1,s.prototype.compressedSdpOffer=m.newBuffer([]),s.prototype.videoSubscriptionConfiguration=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)a.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var n=0;n<e.videoSubscriptionConfiguration.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkSubscribeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.duplex=e.int32();break;case 2:r.sendStreams&&r.sendStreams.length||(r.sendStreams=[]),r.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(r.receiveStreamIds&&r.receiveStreamIds.length||(r.receiveStreamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.receiveStreamIds.push(e.uint32());else r.receiveStreamIds.push(e.uint32());break;case 4:r.sdpOffer=e.string();break;case 5:r.audioHost=e.string();break;case 6:r.audioCheckin=e.bool();break;case 7:r.audioMuted=e.bool();break;case 8:r.compressedSdpOffer=e.bytes();break;case 9:r.videoSubscriptionConfiguration&&r.videoSubscriptionConfiguration.length||(r.videoSubscriptionConfiguration=[]),r.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if(typeof e.sendStreams[n]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=a.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var n=0;n<e.videoSubscriptionConfiguration.length;++n){if(typeof e.videoSubscriptionConfiguration[n]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=m.newBuffer(n.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var r=0;r<e.sendStreams.length;++r)n.sendStreams[r]=a.SdkStreamDescriptor.toObject(e.sendStreams[r],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(var r=0;r<e.receiveStreamIds.length;++r)n.receiveStreamIds[r]=e.receiveStreamIds[r]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(var r=0;r<e.videoSubscriptionConfiguration.length;++r)n.videoSubscriptionConfiguration[r]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkSubscribeAckFrame=function(){function s(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkSubscribeAckFrame"),s.prototype.duplex=1,s.prototype.allocations=m.emptyArray,s.prototype.sdpAnswer="",s.prototype.tracks=m.emptyArray,s.prototype.compressedSdpAnswer=m.newBuffer([]),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)a.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var n=0;n<e.tracks.length;++n)a.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkSubscribeAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.duplex=e.int32();break;case 2:r.allocations&&r.allocations.length||(r.allocations=[]),r.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break;case 3:r.sdpAnswer=e.string();break;case 4:r.tracks&&r.tracks.length||(r.tracks=[]),r.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break;case 5:r.compressedSdpAnswer=e.bytes();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=a.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var n=a.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if(typeof e.allocations[n]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=a.SdkStreamAllocation.fromObject(e.allocations[n])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var n=0;n<e.tracks.length;++n){if(typeof e.tracks[n]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=a.SdkTrackMapping.fromObject(e.tracks[n])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=m.newBuffer(n.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var r=0;r<e.allocations.length;++r)n.allocations[r]=a.SdkStreamAllocation.toObject(e.allocations[r],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(var r=0;r<e.tracks.length;++r)n.tracks[r]=a.SdkTrackMapping.toObject(e.tracks[r],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkIndexFrame=function(){function s(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkIndexFrame"),s.prototype.atCapacity=!1,s.prototype.sources=m.emptyArray,s.prototype.pausedAtSourceIds=m.emptyArray,s.prototype.numParticipants=0,s.prototype.supportedReceiveCodecIntersection=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var n=0;n<e.sources.length;++n)a.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkIndexFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.atCapacity=e.bool();break;case 2:r.sources&&r.sources.length||(r.sources=[]),r.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(r.pausedAtSourceIds&&r.pausedAtSourceIds.length||(r.pausedAtSourceIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.pausedAtSourceIds.push(e.uint32());else r.pausedAtSourceIds.push(e.uint32());break;case 4:r.numParticipants=e.uint32();break;case 5:if(r.supportedReceiveCodecIntersection&&r.supportedReceiveCodecIntersection.length||(r.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.supportedReceiveCodecIntersection.push(e.int32());else r.supportedReceiveCodecIntersection.push(e.int32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=a.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 3:break}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if(typeof e.sources[n]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=a.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[n]=8;break;case"AV1_MAIN":case 11:t.supportedReceiveCodecIntersection[n]=11;break}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var r=0;r<e.sources.length;++r)n.sources[r]=a.SdkStreamDescriptor.toObject(e.sources[r],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(var r=0;r<e.pausedAtSourceIds.length;++r)n.pausedAtSourceIds[r]=e.pausedAtSourceIds[r]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)n.supportedReceiveCodecIntersection[r]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]]:e.supportedReceiveCodecIntersection[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPauseResumeFrame=function(){function s(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPauseResumeFrame"),s.prototype.streamIds=m.emptyArray,s.prototype.groupIds=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.streamIds!=null&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(e.groupIds!=null&&e.groupIds.length)for(var n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPauseResumeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:if(r.streamIds&&r.streamIds.length||(r.streamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.streamIds.push(e.uint32());else r.streamIds.push(e.uint32());break;case 2:if(r.groupIds&&r.groupIds.length||(r.groupIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.groupIds.push(e.uint32());else r.groupIds.push(e.uint32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var r=0;r<e.streamIds.length;++r)n.streamIds[r]=e.streamIds[r]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(var r=0;r<e.groupIds.length;++r)n.groupIds[r]=e.groupIds[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkBitrateFrame=function(){function s(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkBitrateFrame"),s.prototype.bitrates=m.emptyArray,s.prototype.serverAvailableOutgoingBitrate=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.bitrates!=null&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)a.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkBitrateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.bitrates&&r.bitrates.length||(r.bitrates=[]),r.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break;case 2:r.serverAvailableOutgoingBitrate=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=a.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if(typeof e.bitrates[n]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=a.SdkBitrate.fromObject(e.bitrates[n])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),t.defaults&&(n.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var r=0;r<e.bitrates.length;++r)n.bitrates[r]=a.SdkBitrate.toObject(e.bitrates[r],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(n.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamDescriptor=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamDescriptor"),s.prototype.streamId=0,s.prototype.framerate=0,s.prototype.maxBitrateKbps=0,s.prototype.trackLabel="",s.prototype.groupId=0,s.prototype.avgBitrateBps=0,s.prototype.attendeeId="",s.prototype.mediaType=1,s.prototype.externalUserId="",s.prototype.width=0,s.prototype.height=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamDescriptor;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.streamId=e.uint32();break;case 2:r.framerate=e.uint32();break;case 3:r.maxBitrateKbps=e.uint32();break;case 4:r.trackLabel=e.string();break;case 6:r.groupId=e.uint32();break;case 7:r.avgBitrateBps=e.uint32();break;case 8:r.attendeeId=e.string();break;case 9:r.mediaType=e.int32();break;case 10:r.externalUserId=e.string();break;case 11:r.width=e.uint32();break;case 12:r.height=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId="",n.width=0,n.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(n.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(n.height=e.height),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamAllocation=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamAllocation"),s.prototype.trackLabel="",s.prototype.streamId=0,s.prototype.groupId=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamAllocation;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.trackLabel=e.string();break;case 2:r.streamId=e.uint32();break;case 3:r.groupId=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTrackMapping=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTrackMapping"),s.prototype.streamId=0,s.prototype.ssrc=0,s.prototype.trackLabel="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTrackMapping;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.streamId=e.uint32();break;case 2:r.ssrc=e.uint32();break;case 3:r.trackLabel=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkBitrate=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkBitrate"),s.prototype.sourceStreamId=0,s.prototype.avgBitrateBps=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkBitrate;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.sourceStreamId=e.uint32();break;case 2:r.avgBitrateBps=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioControlFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioControlFrame"),s.prototype.muted=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioControlFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.muted=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioMetadataFrame=function(){function s(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioMetadataFrame"),s.prototype.attendeeStates=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)a.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioMetadataFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.attendeeStates&&r.attendeeStates.length||(r.attendeeStates=[]),r.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if(typeof e.attendeeStates[n]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var r=0;r<e.attendeeStates.length;++r)n.attendeeStates[r]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioAttendeeState=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioAttendeeState"),s.prototype.audioStreamId=0,s.prototype.volume=0,s.prototype.muted=!1,s.prototype.signalStrength=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioAttendeeState;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.audioStreamId=e.uint32();break;case 2:r.volume=e.uint32();break;case 3:r.muted=e.bool();break;case 4:r.signalStrength=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(n.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioStreamIdInfoFrame=function(){function s(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioStreamIdInfoFrame"),s.prototype.streams=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.streams!=null&&e.streams.length)for(var n=0;n<e.streams.length;++n)a.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioStreamIdInfoFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.streams&&r.streams.length||(r.streams=[]),r.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if(typeof e.streams[n]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=a.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var r=0;r<e.streams.length;++r)n.streams[r]=a.SdkAudioStreamIdInfo.toObject(e.streams[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioStreamIdInfo=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioStreamIdInfo"),s.prototype.audioStreamId=0,s.prototype.attendeeId="",s.prototype.muted=!1,s.prototype.externalUserId="",s.prototype.dropped=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioStreamIdInfo;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.audioStreamId=e.uint32();break;case 2:r.attendeeId=e.string();break;case 3:r.muted=e.bool();break;case 4:r.externalUserId=e.string();break;case 5:r.dropped=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPingPongType=function(){var s={},i=Object.create(s);return i[s[1]="PING"]=1,i[s[2]="PONG"]=2,i}(),a.SdkPingPongFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPingPongFrame"),s.prototype.type=1,s.prototype.pingId=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPingPongFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.pingId=e.uint32();break;default:e.skipType(c&7);break}}if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});if(!r.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:r});return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioStatusFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioStatusFrame"),s.prototype.audioStatus=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioStatusFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.audioStatus=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkMetric=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkMetric"),s.prototype.type=1,s.prototype.value=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkMetric;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.value=e.double();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e}(),s}(),a.SdkStreamMetricFrame=function(){function s(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamMetricFrame"),s.prototype.streamId=0,s.prototype.groupId=0,s.prototype.metrics=m.emptyArray,s.prototype.dimensions=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)a.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var n=0;n<e.dimensions.length;++n)a.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 3:r.streamId=e.uint32();break;case 4:r.groupId=e.uint32();break;case 5:r.metrics&&r.metrics.length||(r.metrics=[]),r.metrics.push(a.SdkMetric.decode(e,e.uint32()));break;case 6:r.dimensions&&r.dimensions.length||(r.dimensions=[]),r.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=a.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var n=a.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if(typeof e.metrics[n]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=a.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var n=0;n<e.dimensions.length;++n){if(typeof e.dimensions[n]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=a.SdkStreamDimension.fromObject(e.dimensions[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var r=0;r<e.metrics.length;++r)n.metrics[r]=a.SdkMetric.toObject(e.metrics[r],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(var r=0;r<e.dimensions.length;++r)n.dimensions[r]=a.SdkStreamDimension.toObject(e.dimensions[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkClientMetricFrame=function(){function s(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkClientMetricFrame"),s.prototype.globalMetrics=m.emptyArray,s.prototype.streamMetricFrames=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)a.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var n=0;n<e.streamMetricFrames.length;++n)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkClientMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.globalMetrics&&r.globalMetrics.length||(r.globalMetrics=[]),r.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break;case 2:r.streamMetricFrames&&r.streamMetricFrames.length||(r.streamMetricFrames=[]),r.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=a.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var n=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if(typeof e.globalMetrics[n]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=a.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var n=0;n<e.streamMetricFrames.length;++n){if(typeof e.streamMetricFrames[n]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var r=0;r<e.globalMetrics.length;++r)n.globalMetrics[r]=a.SdkMetric.toObject(e.globalMetrics[r],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(var r=0;r<e.streamMetricFrames.length;++r)n.streamMetricFrames[r]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamDimension=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamDimension"),s.prototype.type=1,s.prototype.value=null,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamDimension;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.value=a.SdkDimensionValue.decode(e,e.uint32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=a.SdkDimensionValue.toObject(e.value,t)),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),s}(),a.SdkDimensionValue=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkDimensionValue"),s.prototype.stringValue="",s.prototype.boolValue=!1,s.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkDimensionValue;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.stringValue=e.string();break;case 2:r.boolValue=e.bool();break;case 3:r.uintValue=e.uint64();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,m.Long){var r=new m.Long(0,0,!0);n.uintValue=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkDataMessageFrame=function(){function s(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkDataMessageFrame"),s.prototype.messages=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)a.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkDataMessageFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=a.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if(typeof e.messages[n]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=a.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var r=0;r<e.messages.length;++r)n.messages[r]=a.SdkDataMessagePayload.toObject(e.messages[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkDataMessagePayload=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkDataMessagePayload"),s.prototype.topic="",s.prototype.data=m.newBuffer([]),s.prototype.lifetimeMs=0,s.prototype.senderAttendeeId="",s.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.senderExternalUserId="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkDataMessagePayload;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.topic=e.string();break;case 2:r.data=e.bytes();break;case 3:r.lifetimeMs=e.uint32();break;case 4:r.senderAttendeeId=e.string();break;case 5:r.ingestTimeNs=e.int64();break;case 6:r.senderExternalUserId=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=m.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",m.Long){var r=new m.Long(0,0,!1);n.ingestTimeNs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(n.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTurnCredentials=function(){function s(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTurnCredentials"),s.prototype.username="",s.prototype.password="",s.prototype.ttl=0,s.prototype.uris=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTurnCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.username=e.string();break;case 2:r.password=e.string();break;case 3:r.ttl=e.uint32();break;case 4:r.uris&&r.uris.length||(r.uris=[]),r.uris.push(e.string());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(n.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(n.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var r=0;r<e.uris.length;++r)n.uris[r]=e.uris[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptItem=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptItem"),s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.speakerAttendeeId="",s.prototype.speakerExternalUserId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type=1,s.prototype.vocabularyFilterMatch=!1,s.prototype.confidence=0,s.prototype.stable=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptItem;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.content=e.string();break;case 2:r.endTime=e.int64();break;case 3:r.speakerAttendeeId=e.string();break;case 4:r.speakerExternalUserId=e.string();break;case 5:r.startTime=e.int64();break;case 6:r.type=e.int32();break;case 7:r.vocabularyFilterMatch=e.bool();break;case 8:r.confidence=e.double();break;case 9:r.stable=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),s}(),a.SdkTranscriptEntity=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptEntity"),s.prototype.category="",s.prototype.confidence=0,s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptEntity;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.category=e.string();break;case 2:r.confidence=e.double();break;case 3:r.content=e.string();break;case 4:r.endTime=e.int64();break;case 5:r.startTime=e.int64();break;case 6:r.type=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(n.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=e.type),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptAlternative=function(){function s(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptAlternative"),s.prototype.items=m.emptyArray,s.prototype.transcript="",s.prototype.entities=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.items!=null&&e.items.length)for(var n=0;n<e.items.length;++n)a.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var n=0;n<e.entities.length;++n)a.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptAlternative;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.items&&r.items.length||(r.items=[]),r.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break;case 2:r.transcript=e.string();break;case 3:r.entities&&r.entities.length||(r.entities=[]),r.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=a.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var n=a.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if(typeof e.items[n]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=a.SdkTranscriptItem.fromObject(e.items[n])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var n=0;n<e.entities.length;++n){if(typeof e.entities[n]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=a.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var r=0;r<e.items.length;++r)n.items[r]=a.SdkTranscriptItem.toObject(e.items[r],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(var r=0;r<e.entities.length;++r)n.entities[r]=a.SdkTranscriptEntity.toObject(e.entities[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptLanguageWithScore=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptLanguageWithScore"),s.prototype.languageCode="",s.prototype.score=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptLanguageWithScore;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.languageCode=e.string();break;case 2:r.score=e.double();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptResult=function(){function s(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptResult"),s.prototype.alternatives=m.emptyArray,s.prototype.channelId="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.isPartial=!1,s.prototype.resultId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.languageCode="",s.prototype.languageIdentification=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.alternatives!=null&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)a.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var n=0;n<e.languageIdentification.length;++n)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptResult;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.alternatives&&r.alternatives.length||(r.alternatives=[]),r.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break;case 2:r.channelId=e.string();break;case 3:r.endTime=e.int64();break;case 4:r.isPartial=e.bool();break;case 5:r.resultId=e.string();break;case 6:r.startTime=e.int64();break;case 7:r.languageCode=e.string();break;case 8:r.languageIdentification&&r.languageIdentification.length||(r.languageIdentification=[]),r.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var n=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if(typeof e.alternatives[n]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=a.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var n=0;n<e.languageIdentification.length;++n){if(typeof e.languageIdentification[n]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var c=0;c<e.alternatives.length;++c)n.alternatives[c]=a.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)n.languageIdentification[c]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscript=function(){function s(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscript"),s.prototype.results=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.results!=null&&e.results.length)for(var n=0;n<e.results.length;++n)a.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscript;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.results&&r.results.length||(r.results=[]),r.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=a.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if(typeof e.results[n]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[n]=a.SdkTranscriptResult.fromObject(e.results[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var r=0;r<e.results.length;++r)n.results[r]=a.SdkTranscriptResult.toObject(e.results[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptionStatus=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptionStatus"),s.prototype.type=1,s.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.transcriptionRegion="",s.prototype.transcriptionConfiguration="",s.prototype.message="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptionStatus;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.eventTime=e.int64();break;case 3:r.transcriptionRegion=e.string();break;case 4:r.transcriptionConfiguration=e.string();break;case 5:r.message=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,m.Long){var r=new m.Long(0,0,!1);n.eventTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),s}(),a.SdkTranscriptEvent=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}o(s,"SdkTranscriptEvent"),s.prototype.status=null,s.prototype.transcript=null;var i;return Object.defineProperty(s.prototype,"Event",{get:m.oneOfGetter(i=["status","transcript"]),set:m.oneOfSetter(i)}),s.create=o(function(t){return new s(t)},"create"),s.encode=o(function(t,n){return n||(n=u.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,n.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,n.uint32(18).fork()).ldelim(),n},"encode"),s.encodeDelimited=o(function(t,n){return this.encode(t,n).ldelim()},"encodeDelimited"),s.decode=o(function(t,n){t instanceof h||(t=h.create(t));for(var r=n===void 0?t.len:t.pos+n,c=new a.SdkTranscriptEvent;t.pos<r;){var p=t.uint32();switch(p>>>3){case 1:c.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break;case 2:c.transcript=a.SdkTranscript.decode(t,t.uint32());break;default:t.skipType(p&7);break}}return c},"decode"),s.decodeDelimited=o(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),s.verify=o(function(t){if(typeof t!="object"||t===null)return"object expected";var n={};if(t.status!=null&&t.hasOwnProperty("status")){n.Event=1;{var r=a.SdkTranscriptionStatus.verify(t.status);if(r)return"status."+r}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(n.Event===1)return"Event: multiple values";n.Event=1;{var r=a.SdkTranscript.verify(t.transcript);if(r)return"transcript."+r}}return null},"verify"),s.fromObject=o(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var n=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");n.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");n.transcript=a.SdkTranscript.fromObject(t.transcript)}return n},"fromObject"),s.toObject=o(function(t,n){n||(n={});var r={};return t.status!=null&&t.hasOwnProperty("status")&&(r.status=a.SdkTranscriptionStatus.toObject(t.status,n),n.oneofs&&(r.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(r.transcript=a.SdkTranscript.toObject(t.transcript,n),n.oneofs&&(r.Event="transcript")),r},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptFrame=function(){function s(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptFrame"),s.prototype.events=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.events!=null&&e.events.length)for(var n=0;n<e.events.length;++n)a.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.events&&r.events.length||(r.events=[]),r.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=a.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if(typeof e.events[n]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=a.SdkTranscriptEvent.fromObject(e.events[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var r=0;r<e.events.length;++r)n.events[r]=a.SdkTranscriptEvent.toObject(e.events[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkRemoteVideoUpdateFrame=function(){function s(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkRemoteVideoUpdateFrame"),s.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,s.prototype.removedVideoSubscriptionMids=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkRemoteVideoUpdateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.addedOrUpdatedVideoSubscriptions&&r.addedOrUpdatedVideoSubscriptions.length||(r.addedOrUpdatedVideoSubscriptions=[]),r.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break;case 2:r.removedVideoSubscriptionMids&&r.removedVideoSubscriptionMids.length||(r.removedVideoSubscriptionMids=[]),r.removedVideoSubscriptionMids.push(e.string());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if(typeof e.addedOrUpdatedVideoSubscriptions[n]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r)n.addedOrUpdatedVideoSubscriptions[r]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[r],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)n.removedVideoSubscriptionMids[r]=e.removedVideoSubscriptionMids[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkVideoQualityAdaptationPreference=function(){var s={},i=Object.create(s);return i[s[1]="BALANCED"]=1,i[s[2]="MAINTAIN_FRAMERATE"]=2,i[s[3]="MAINTAIN_RESOLUTION"]=3,i}(),a.SdkVideoSubscriptionConfiguration=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkVideoSubscriptionConfiguration"),s.prototype.mid="",s.prototype.attendeeId="",s.prototype.streamId=0,s.prototype.priority=0,s.prototype.targetBitrateKbps=0,s.prototype.groupId=0,s.prototype.qualityAdaptationPreference=1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkVideoSubscriptionConfiguration;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.mid=e.string();break;case 2:r.attendeeId=e.string();break;case 3:r.streamId=e.uint32();break;case 4:r.priority=e.uint32();break;case 5:r.targetBitrateKbps=e.uint32();break;case 6:r.groupId=e.uint32();break;case 7:r.qualityAdaptationPreference=e.int32();break;default:e.skipType(c&7);break}}if(!r.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:r});return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0,n.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(n.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(n.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(n.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkNotificationFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkNotificationFrame"),s.prototype.level=3,s.prototype.message="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkNotificationFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.level=e.int32();break;case 2:r.message=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.level=t.enums===String?"ERROR":3,n.message=""),e.level!=null&&e.hasOwnProperty("level")&&(n.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),s}(),a.SdkPrimaryMeetingJoinFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPrimaryMeetingJoinFrame"),s.prototype.credentials=null,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPrimaryMeetingJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(n.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPrimaryMeetingJoinAckFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPrimaryMeetingLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPrimaryMeetingLeaveFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPrimaryMeetingLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkMeetingSessionCredentials=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkMeetingSessionCredentials"),s.prototype.attendeeId="",s.prototype.externalUserId="",s.prototype.joinToken="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkMeetingSessionCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.attendeeId=e.string();break;case 2:r.externalUserId=e.string();break;case 3:r.joinToken=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkVideoCodecCapability=function(){var s={},i=Object.create(s);return i[s[1]="VP8"]=1,i[s[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[s[8]="VP9_PROFILE_0"]=8,i[s[11]="AV1_MAIN"]=11,i}(),j.exports=a,m.Long=void 0,S.configure()},XEV2:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function S(t,n,r){if(!r)return fetch(t,n);const c=u(t,r),p=h(n,r);return fetch(c,p)}o(S,"fetchWithBehavior"),l.fetchWithBehavior=S;function h(t,n){return n!=null&&n.headers?t?Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers||{}),n.headers)}):{headers:n.headers}:t}o(h,"withRequestHeaders"),l.withRequestHeaders=h;function u(t,n){if(!(n!=null&&n.escapedQueryString))return t;const r=t.lastIndexOf("?")!==-1;return`${t}${r?"&":"?"}${n.escapedQueryString}`}o(u,"withQueryString"),l.withQueryString=u;function m(t,n){const r=Object.keys(n);if(!r.length)return t;const c=new URLSearchParams(t==null?void 0:t.escapedQueryString);for(const p of r)c.append(p,n[p]);return Object.assign(Object.assign({},t),{escapedQueryString:c.toString()})}o(m,"addQueryParams"),l.addQueryParams=m;const a={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function s(t,n){return S(t,a,n).then(r=>r.redirected?r.url:t)}o(s,"resolveURL"),l.resolveURL=s;function i(t){return!!t&&/^[-.a-zA-Z0-9]+$/.test(t)}o(i,"isValidAssetGroup"),l.isValidAssetGroup=i;function e(t){return!!t&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(t)}o(e,"isValidRevisionID"),l.isValidRevisionID=e},XFRR:function(j,l,f){"use strict";function S(){}o(S,"baseLodash"),l.a=S},XJKy:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("ZdbB"));let u=o(class extends h.default{setupLocalTransceivers(){this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}constructor(a,s,i){super(a,s,i)}},"VideoOnlyTransceiverController");l.default=u},XJrD:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class PS{equal(u){let m=u.captureWidth()===this.cameraWidth&&u.captureHeight()===this.cameraHeight&&u.captureFrameRate()===this.cameraFrameRate&&u.encodeBitrates().length===this.encodeBitrates().length&&u.encodeScaleResolutionDownBy().length===this.encodeScaleResolutionDownBy().length&&u.encodeWidths().length===this.encodeWidths().length&&u.encodeHeights().length===this.encodeHeights().length&&u.isSVCEncoding()===this.isSVC;if(m){for(let a=0;a<u.encodeWidths().length;a++)if(u.encodeWidths()[a]!==this.encodeWidths()[a]||u.encodeHeights()[a]!==this.encodeHeights()[a]||u.encodeBitrates()[a]!==this.encodeBitrates()[a]||u.encodeScaleResolutionDownBy()[a]!==this.encodeScaleResolutionDownBy()[a])return m=!1,m}return m}clone(){return new PS(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast,this.scaleResolutionDownBy,this.isSVC)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeScaleResolutionDownBy(){return[this.scaleResolutionDownBy]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}isSVCEncoding(){return this.isSVC}constructor(u,m,a,s,i,e=1,t=!1){this.cameraWidth=u,this.cameraHeight=m,this.cameraFrameRate=a,this.maxEncodeBitrateKbps=s,this.isSimulcast=i,this.scaleResolutionDownBy=e,this.isSVC=t}},"DefaultVideoCaptureAndEncodeParameter");l.default=S},XYJD:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptEntity");l.default=S},"Xf/8":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.currentTimestampMs=0,this.ssrc=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsExpected=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}},"RedundantAudioRecoveryMetricReport");l.default=S},XhYu:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("xzjI"));let u=o(class extends h.default{constructor(a,s){super(a),this.constraint=s,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=u},XnHx:function(j,l,f){"use strict";var S=f("/1FC");function h(){if(!arguments.length)return[];var u=arguments[0];return Object(S.a)(u)?u:[u]}o(h,"castArray"),l.a=h},Xv43:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return S(this,void 0,void 0,function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)})}asCanvasElement(){return this.canvas}constructor(m){this.canvas=m,this.destroyed=!1}},"CanvasVideoFrameBuffer");l.default=h},XzFx:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR")),m=h(f("ppUg")),a=h(f("wXa7")),s=h(f("j+uH"));let i=o(class extends s.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return S(this,void 0,void 0,function*(){const t=this.context.peer;let r=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(r=new a.default(r).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(r=new a.default(r).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new u.default().requiresDisablingH264Encoding()&&(r=new a.default(r).removeH264SupportFromSendSection().sdp);const c=this.context.audioVideoController.configuration.credentials.attendeeId;if(new m.default(c).hasModality(m.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(r=new a.default(r).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new a.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(r=new a.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new a.default(r).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const d=new a.default(r).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(d)}this.logger.debug(()=>`local description is >>>${r}<<<`);const g={type:"offer",sdp:r,toJSON:null};yield new Promise((d,y)=>S(this,void 0,void 0,function*(){this.cancelPromise=E=>{y(E)};try{yield t.setLocalDescription(g),d()}catch(E){y(E)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=i},Y2s1:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("8FET"));let u=o(class{constructor(a,s,i=new h.default){this.eventsClientConfiguration=a,this.ingestionURL=s,this.eventBufferConfiguration=i}},"EventIngestionConfiguration");l.default=u},Y8b2:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("tK6J"));let u=o(class{create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new h.default);throw new Error("navigator.mediaDevices is not supported")}constructor(){this.isMediaDevicesSupported=typeof navigator<"u"&&!!navigator.mediaDevices}},"DefaultMediaDeviceFactory");l.default=u},YH3u:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ywpn")),m=h(f("e/ca")),a=h(f("uctb")),s=h(f("Wjms")),i=h(f("LEQH")),e=h(f("GtHv")),t=h(f("vjEy"));let n=o(class extends s.default{setBlurStrength(){}loadAssets(){return S(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}},"NoOpBackgroundBlurProcessor"),r=o(class Md extends u.default{static create(p,g){return S(this,void 0,void 0,function*(){p=Md.resolveSpec(p),g=Md.resolveOptions(g);const{logger:d}=g,y=yield Md.isSupported(p,g);if(d.info(`processor is ${y?"":"not"} supported`),!y)return d.warn("Using no-op processor because background blur is not supported"),new n;let E;return(yield e.default.isSupported())?(d.info("Using browser-provided background blur"),E=new e.default(p,g)):(d.info("Using built-in background blur"),E=new i.default(p,g)),yield E.loadAssets(),E})}static resolveOptions(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=Object.assign({},p);return g.blurStrength||(g.blurStrength=t.default.MEDIUM),g.logger||(g.logger=new m.default("BackgroundBlurProcessor",a.default.INFO)),g=super.resolveOptions(g),g}static isSupported(p,g){return p=Md.resolveSpec(p),g=Md.resolveOptions(g),super.isSupported(p,g)}},"BackgroundBlurVideoFrameProcessor");l.default=r},YX4P:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S=f("e/nb");S.__exportStar(f("rU8T"),l),S.__exportStar(f("LVIV"),l),S.__exportStar(f("JBVX"),l),S.__exportStar(f("JEbH"),l),S.__exportStar(f("duQQ"),l)},YXGX:function(j,l,f){"use strict";var S=f("m5Jn"),h=S.a&&new S.a;l.a=h},YbMW:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(y,E,w,k){function V(F){return F instanceof w?F:new w(function(N){N(F)})}return o(V,"adopt"),new(w||(w=Promise))(function(F,N){function P(M){try{O(k.next(M))}catch(D){N(D)}}o(P,"fulfilled");function x(M){try{O(k.throw(M))}catch(D){N(D)}}o(x,"rejected");function O(M){M.done?F(M.value):V(M.value).then(P,x)}o(O,"step"),O((k=k.apply(y,E||[])).next())})},h=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("6SO8")),m=h(f("bjg3")),a=h(f("x8On")),s=h(f("OcJO")),i=h(f("Tsvd")),e=h(f("m/NO")),t=h(f("fi20")),n=h(f("BkFD")),r=f("XCDq"),c=f("Aplu"),p=h(f("PPZC")),g=h(f("10yS"));let d=o(class $c{toAttribute(E){return this.toSuffix(E).substring(1)}toSuffix(E){return E.toLowerCase()===E?`_${E}`:E.toUpperCase()===E?`_${E.toLowerCase()}`:E.replace(/([A-Z][a-z]+)/g,function(w){return`_${w}`}).replace(/([A-Z][A-Z]+)/g,function(w){return`_${w}`}).toLowerCase()}logLatency(E,w,k){const V=this.toSuffix(E);this.logEventTime("meeting"+V,w,k)}logStateTimeout(E,w){const k=this.toSuffix(E);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},w),{state:`state${k}`}))}logAudioEvent(E,w){const k="audio"+this.toSuffix(p.default[E]);this.logEvent(k,w)}logVideoEvent(E,w){const k="video"+this.toSuffix(g.default[E]);this.logEvent(k,w)}logEventTime(E,w){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const V=Object.assign(Object.assign({},k),{call_id:this.audioVideoController.configuration.meetingId,client_type:$c.CLIENT_TYPE,metric_type:"latency"});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(V)}`),this.metricsAddTime(E,w,V)}logMeetingSessionStatus(E){const w=`${E.statusCode()}`;this.logEvent(w);const k={status:w,status_code:`${E.statusCode()}`};this.logEvent("meeting_session_status",k),E.isTerminal()&&this.logEvent("meeting_session_stopped",k),E.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",k),E.isFailure()&&this.logEvent("meeting_session_failed",k)}logLifecycleEvent(E,w){const k={lifecycle_event:`lifecycle${this.toSuffix(e.default[E])}`,lifecycle_event_code:`${E}`,lifecycle_event_condition:`condition${this.toSuffix(t.default[w])}`,lifecycle_event_condition_code:`${w}`};this.logEvent("meeting_session_lifecycle",k)}logEvent(E){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const k=Object.assign(Object.assign({},w),{call_id:this.audioVideoController.configuration.meetingId,client_type:$c.CLIENT_TYPE});this.logger.debug(()=>`[StatsCollector] ${E}: ${JSON.stringify(k)}`),this.metricsLogEvent(E,k)}start(E,w){return this.intervalScheduler?!1:(this.logger.info("Starting StatsCollector"),this.signalingClient=E,this.videoStreamIndex=w,this.clientMetricReport=new u.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new n.default(this.interval),this.intervalScheduler.start(()=>S(this,void 0,void 0,function*(){yield this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping StatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(E,w){const k=w?this.clientMetricReport.streamMetricReports[Number(E.ssrc)]:this.clientMetricReport.globalMetricReport;let V;w?V=this.clientMetricReport.getMetricMap(k.mediaType,k.direction):V=this.clientMetricReport.getMetricMap();for(const F in E)F in V&&(typeof E[F]=="number"?(k.previousMetrics[F]=k.currentMetrics[F],k.currentMetrics[F]=E[F]):typeof E[F]=="string"?k.currentStringMetrics[F]=E[F]:typeof E[F]=="object"?(k.previousObjectMetrics[F]=k.currentObjectMetrics[F]===void 0?E[F]:k.currentObjectMetrics[F],k.currentObjectMetrics[F]=E[F]):this.logger.error(`Unknown metric value type ${typeof E[F]} for metric ${F}`))}processRawMetricReports(E){this.clientMetricReport.currentSsrcs={};const w=Date.now();for(const k of E){const V=this.isStreamRawMetricReport(k.type);if(V){const F=this.clientMetricReport.streamMetricReports[Number(k.ssrc)];if(F)F.mediaType===a.default.VIDEO&&F.direction===m.default.UPSTREAM?F.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(k.rid):F.streamId=this.videoStreamIndex.streamIdForSSRC(Number(k.ssrc));else{const N=new i.default;N.mediaType=this.getMediaType(k),N.direction=this.getDirectionType(k),N.mediaType===a.default.VIDEO&&N.direction===m.default.UPSTREAM?N.streamId=this.videoStreamIndex.sendVideoStreamIdFromRid(k.rid):this.videoStreamIndex.allStreams().empty()||(N.streamId=this.videoStreamIndex.streamIdForSSRC(Number(k.ssrc)),this.videoStreamIndex.groupIdForSSRC!==void 0&&(N.groupId=this.videoStreamIndex.groupIdForSSRC(Number(k.ssrc)))),this.clientMetricReport.streamMetricReports[Number(k.ssrc)]=N}this.clientMetricReport.currentSsrcs[Number(k.ssrc)]=1}this.updateMetricValues(k,V)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=w,this.clientMetricReport.print()}addStreamMetricDimensionFrames(E,w){const k=this.clientMetricReport.getStreamDimensionMap();for(const V in w.currentStringMetrics)if(V in k){const F=r.SdkStreamDimension.create();F.type=k[V];const N=r.SdkDimensionValue.create();N.stringValue=w.currentStringMetrics[V],F.value=N,E.dimensions.push(F)}}addMetricFrame(E,w,k,V){const F=k.type,N=k.transform,P=k.source,x=w.streamMetricFrames.length,O=w.streamMetricFrames[x-1];if(F){const M=r.SdkMetric.create();M.type=F,M.value=N(P||E,V),V?O.metrics.push(M):w.globalMetrics.push(M)}}addGlobalMetricsToProtobuf(E){const w=this.clientMetricReport.getMetricMap();for(const k in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(k,E,w[k])}addStreamMetricsToProtobuf(E){for(const w in this.clientMetricReport.streamMetricReports){const k=this.clientMetricReport.streamMetricReports[w],V=r.SdkStreamMetricFrame.create();V.streamId=k.streamId,V.metrics=[],this.addStreamMetricDimensionFrames(V,k),E.streamMetricFrames.push(V);const F=this.clientMetricReport.getMetricMap(k.mediaType,k.direction);for(const N in k.currentMetrics)this.addMetricFrame(N,E,F[N],Number(w));for(const N in k.currentStringMetrics)this.addMetricFrame(N,E,F[N],Number(w));for(const N in k.currentObjectMetrics)this.addMetricFrame(N,E,F[N],Number(w))}}makeClientMetricProtobuf(){const E=r.SdkClientMetricFrame.create();return E.globalMetrics=[],E.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(E),this.addStreamMetricsToProtobuf(E),E}sendClientMetricProtobuf(E){this.signalingClient.sendClientMetrics(E)}isStreamRawMetricReport(E){return["inbound-rtp","inbound-rtp-red","outbound-rtp","remote-inbound-rtp","remote-outbound-rtp"].includes(E)}getMediaType(E){return E.kind==="audio"?a.default.AUDIO:a.default.VIDEO}getDirectionType(E){const{type:w}=E;return w==="inbound-rtp"||w==="remote-outbound-rtp"||w==="inbound-rtp-red"?m.default.DOWNSTREAM:m.default.UPSTREAM}isValidStandardRawMetric(E){return E.type==="inbound-rtp"||E.type==="inbound-rtp-red"||E.type==="outbound-rtp"||E.type==="remote-inbound-rtp"||E.type==="remote-outbound-rtp"||E.type==="candidate-pair"&&E.state==="succeeded"||E.type==="media-source"&&E.kind==="audio"}isValidSsrc(E){let w=!0;return this.isStreamRawMetricReport(E.type)&&this.getDirectionType(E)===m.default.DOWNSTREAM&&this.getMediaType(E)===a.default.VIDEO&&(w=this.videoStreamIndex.streamIdForSSRC(Number(E.ssrc))>0),w}isValidRawMetricReport(E){return this.isValidStandardRawMetric(E)&&this.isValidSsrc(E)}filterRawMetricReports(E){const w=[];for(const k of E)this.isValidRawMetricReport(k)&&w.push(k);return w}handleRawMetricReports(E){const w=this.filterRawMetricReports(E);this.logger.debug(()=>`Filtered raw metrics : ${JSON.stringify(w)}`);const k=[];this.maybeAddRedRecoveryMetrics(k),this.clientMetricReport.customStatsReports=k,w.push(...k),this.processRawMetricReports(w);const V=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(V),this.audioVideoController.forEachObserver(F=>{c.Maybe.of(F.metricsDidReceive).map(N=>N.bind(F)(this.clientMetricReport.clone()))})}getStatsWrapper(){return S(this,void 0,void 0,function*(){if(!this.audioVideoController.rtcPeerConnection)return;const E=[];try{const w=yield this.audioVideoController.rtcPeerConnection.getStats();this.clientMetricReport.rtcStatsReport=w,w.forEach(k=>{E.push(k)}),this.handleRawMetricReports(E)}catch(w){this.logger.error(w.message)}})}overrideObservableMetric(E,w){this.clientMetricReport.overrideObservableMetric(E,w)}recoveryMetricsDidReceive(E){this.redRecoveryMetricReport=E}maybeAddRedRecoveryMetrics(E){this.redRecoveryMetricReport.currentTimestampMs!==this.lastRedRecoveryMetricReportConsumedTimestampMs&&(E.push({kind:"audio",type:"inbound-rtp-red",ssrc:this.redRecoveryMetricReport.ssrc,timestamp:this.redRecoveryMetricReport.currentTimestampMs,totalAudioPacketsLost:this.redRecoveryMetricReport.totalAudioPacketsLost,totalAudioPacketsExpected:this.redRecoveryMetricReport.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.redRecoveryMetricReport.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.redRecoveryMetricReport.totalAudioPacketsRecoveredFec}),this.lastRedRecoveryMetricReportConsumedTimestampMs=this.redRecoveryMetricReport.currentTimestampMs)}constructor(E,w,k=$c.INTERVAL_MS){this.audioVideoController=E,this.logger=w,this.interval=k,this.intervalScheduler=null,this.redRecoveryMetricReport=new s.default,this.lastRedRecoveryMetricReportConsumedTimestampMs=0,this.metricsAddTime=(V,F,N)=>{},this.metricsLogEvent=(V,F)=>{}}},"StatsCollector");l.default=d,d.INTERVAL_MS=1e3,d.CLIENT_TYPE="amazon-chime-sdk-js"},YcE2:function(j,l,f){"use strict";(function(S){Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var h=f("f/KM"),u=typeof S<"u"&&S.from?function(a){return S.from(a,"utf8")}:h.fromUtf8;function m(a){return a instanceof Uint8Array?a:typeof a=="string"?u(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}o(m,"convertToBuffer"),l.convertToBuffer=m}).call(this,f("HDXh").Buffer)},Yk7g:function(j,l,f){"use strict";var S=Array.prototype,h=S.reverse;function u(m){return m==null?m:h.call(m)}o(u,"reverse"),l.a=u},Yugg:function(j,l,f){"use strict";f.r(l),f.d(l,"locateWindow",function(){return h});const S={};function h(){return typeof window<"u"?window:typeof self<"u"?self:S}o(h,"locateWindow")},Yvks:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.AudioInputRequestFailed=1]="AudioInputRequestFailed",h[h.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",h[h.ConnectionFailed=3]="ConnectionFailed",h[h.AudioNotReceived=4]="AudioNotReceived"})(S=l.CheckAudioConnectivityFeedback||(l.CheckAudioConnectivityFeedback={})),l.default=S},"Z/hr":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("U9CR")),u=S(f("ppUg")),m=S(f("uQnq"));let a=o(class hl{static connectVideoStreamToVideoElement(i,e,t){const n=t&&i.getVideoTracks()[0].getSettings().facingMode!=="environment"?"rotateY(180deg)":"";if(hl.setVideoElementFlag(e,"disablePictureInPicture",t),hl.setVideoElementFlag(e,"disableRemotePlayback",t),e.style.transform!==n&&(e.style.transform=n),e.hasAttribute("controls")&&e.removeAttribute("controls"),e.hasAttribute("autoplay")||e.setAttribute("autoplay","true"),e.hasAttribute("playsinline")||e.setAttribute("playsinline","true"),e.hasAttribute("muted")||(e.setAttribute("muted","true"),e.muted=!0),e.srcObject!==i&&(e.srcObject=i,new h.default().requiresVideoPlayWorkaround()&&e.paused)){const r=e.play();r!==void 0&&r.catch(c=>{console.warn("Error playing video in Safari",c)}).then(()=>{console.debug("Video played successfully in Safari")})}}static disconnectVideoStreamFromVideoElement(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(i)if(e)t||(i.srcObject=null,i.style.transform="");else{if(!i.srcObject)return;i.pause(),i.style.transform="",hl.setVideoElementFlag(i,"disablePictureInPicture",!1),hl.setVideoElementFlag(i,"disableRemotePlayback",!1),i.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&hl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new m.default}devicePixelRatioChanged(i){this.tileState.devicePixelRatio=i,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(i,e,t,n,r,c,p){let g=!1;this.tileState.boundAttendeeId!==i&&(this.tileState.boundAttendeeId=i,new u.default(i).hasModality(u.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),g=!0),this.tileState.boundExternalUserId!==p&&(this.tileState.boundExternalUserId=p,g=!0),this.tileState.localTile!==e&&(this.tileState.localTile=e,g=!0),this.tileState.boundVideoStream!==t&&(this.tileState.boundVideoStream=t,g=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,g=!0),this.tileState.videoStreamContentHeight!==r&&(this.tileState.videoStreamContentHeight=r,g=!0),this.tileState.streamId!==c&&(this.tileState.streamId=c,g=!0),g&&this.sendTileStateUpdate()}bindVideoElement(i){let e=!1;this.tileState.boundVideoElement!==i&&(this.tileState.boundVideoElement=i,e=!0),this.tileState.boundVideoElement!==null?(this.tileState.videoElementCSSWidthPixels!==i.clientWidth&&(this.tileState.videoElementCSSWidthPixels=i.clientWidth,e=!0),this.tileState.videoElementCSSHeightPixels!==i.clientHeight&&(this.tileState.videoElementCSSHeightPixels=i.clientHeight,e=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),e&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return this.tileState.poorConnection?!1:(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return this.tileState.poorConnection?(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0):!1}capture(){if(!this.tileState.active)return null;const i=document.createElement("canvas"),e=this.tileState.boundVideoElement;i.width=e.videoWidth||e.width,i.height=e.videoHeight||e.height;const t=i.getContext("2d");return t.drawImage(e,0,0,i.width,i.height),t.getImageData(0,0,i.width,i.height)}setStreamId(i){this.tileState.streamId=i,this.tileController.sendTileStateUpdate(this.state())}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!!(!this.tileState.paused&&!this.tileState.poorConnection&&this.tileState.boundAttendeeId&&this.tileState.boundVideoElement&&this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){typeof this.tileState.videoElementCSSWidthPixels=="number"&&typeof this.tileState.videoElementCSSHeightPixels=="number"?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?hl.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):hl.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused,this.tileController.keepLastFrameWhenPaused)}static setVideoElementFlag(i,e,t){e in i&&(i[e]=t)}constructor(i,e,t,n){this.tileController=t,this.devicePixelRatioMonitor=n,this.tileState=new m.default,this.tileState.tileId=i,this.tileState.localTile=e,this.devicePixelRatioMonitor.registerObserver(this)}},"DefaultVideoTile");l.default=a},Z0UI:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptAlternative");l.default=S},"Z9q/":function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={MissingArgument:"missing_argument",InvalidAuth:"invalid_auth",UnknownError:"unknown_error"},t=Object(a.a)("helpdesk.get generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason","token"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"helpdesk.get",args:y,reason:p.reason,computeToken:!1}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to helpdesk.get
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetFetcher",description:"helpdesk.get generated fetcher"}},ZHiL:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("mlaT")),u=S(f("aZJ3"));let m=o(class extends u.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=m},ZISg:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(g,d,y,E){function w(k){return k instanceof y?k:new y(function(V){V(k)})}return o(w,"adopt"),new(y||(y=Promise))(function(k,V){function F(x){try{P(E.next(x))}catch(O){V(O)}}o(F,"fulfilled");function N(x){try{P(E.throw(x))}catch(O){V(O)}}o(N,"rejected");function P(x){x.done?k(x.value):w(x.value).then(F,N)}o(P,"step"),P((E=E.apply(g,d||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("aZba")),m=h(f("papz")),a=h(f("wXa7")),s=h(f("aTUL")),i=f("/AJg"),e=h(f("HbHZ")),t=h(f("VhCr")),n=f("XCDq"),r=f("T44/"),c=h(f("j+uH"));let p=o(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){let d="";if(this.context.peer&&this.context.peer.localDescription&&(d=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let P=0,x=0;this.context.videoCaptureAndEncodeParameter&&(P=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),x=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const O={rid:"hi",maxBitrate:x*1e3,maxFramerate:P,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([O])}this.context.videoStreamIndex.subscribeFrameSent();const y=this.fixUpSubscriptionOrder(d,this.context.videoSubscriptions),E=this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX;let w,k=d;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(k=new a.default(k).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const P=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";w=this.textCompressor.compress(k,P),this.context.logger.info(`Compressed the SDP message from ${k.length} to ${w.length} bytes.`),d=""}this.context.previousSdpOffer=new a.default(d);const V=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,d,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,w);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(V.videoSubscriptionConfiguration=r.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(P=>P===0?0:this.context.videoStreamIndex.groupIdForStreamId(P)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(V)}`),this.context.signalingClient.subscribe(V);const F=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(F)}`);let N="";F.compressedSdpAnswer&&F.compressedSdpAnswer.length?(N=this.textCompressor.decompress(F.compressedSdpAnswer,this.context.previousSdpAnswerAsString),N.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${F.compressedSdpAnswer.length} to ${N.length} bytes.`),this.context.sdpAnswer=N):this.context.sdpAnswer=F.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(F)})}fixUpSubscriptionOrder(d,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const E=new Map;for(const V of y){const F=this.context.transceiverController.getMidForStreamId(V);if(F===void 0){V!==0&&this.logger.warn(`Could not find MID for stream ID: ${V}`);continue}E.set(F,V)}const w=new a.default(d).mediaSections(),k=[];for(const V of w)if(V.mediaType==="video")if(V.direction==="recvonly"){const F=E.get(V.mid);if(F===void 0){this.logger.warn(`Could not find stream ID for MID: ${V.mid}`);continue}k.push(F)}else k.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(k)} (may be same))}`),k}receiveSubscribeAck(){return new Promise((d,y)=>{const E=this.context;let w=o(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(F){if(F.isConnectionTerminated()){const P=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${F.closeCode} and reason: ${F.closeReason}`;E.logger.warn(P);let x=m.default.TaskFailed;F.closeCode>=4500&&F.closeCode<4600&&(x=m.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new u.default(x),new Error(P));return}if(F.type!==e.default.ReceivedSignalFrame||F.message.type!==n.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const N=F.message.suback;d(N)}constructor(F){this.signalingClient=F}},"Interceptor");const k=new w(this.context.signalingClient);this.context.signalingClient.registerObserver(k),this.taskCanceler=k})}constructor(d){super(d.logger),this.context=d,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new s.default(d.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=p},ZIUS:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=S},ZIxo:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var S=f("dFEU"),h=f("b4Ml"),u=f("xxdO"),m=f("bVud"),a=f("YX4P"),s=f("Yugg"),i=f("pU0T"),e=function(){function t(n){(0,m.supportsWebCrypto)((0,s.locateWindow)())?this.hash=new h.Sha256(n):(0,a.isMsWindow)((0,s.locateWindow)())?this.hash=new S.Sha256(n):this.hash=new u.Sha256(n)}return o(t,"Sha256"),t.prototype.update=function(n,r){this.hash.update((0,i.convertToBuffer)(n))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();l.Sha256=e},ZPwG:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(g,d,y,E){function w(k){return k instanceof y?k:new y(function(V){V(k)})}return o(w,"adopt"),new(y||(y=Promise))(function(k,V){function F(x){try{P(E.next(x))}catch(O){V(O)}}o(F,"fulfilled");function N(x){try{P(E.throw(x))}catch(O){V(O)}}o(N,"rejected");function P(x){x.done?k(x.value):w(x.value).then(F,N)}o(P,"step"),P((E=E.apply(g,d||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("6Bxv")),m=h(f("lUhs")),a=h(f("AUdx")),s=h(f("MelK")),i=f("DUgj"),e=h(f("hEYi")),t=h(f("iFpF")),n=f("f2XL"),r=f("P7D+"),c=h(f("aVV0"));let p=o(class extends c.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){let d="";if(this.context.peer&&this.context.peer.localDescription&&(d=new a.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp),!this.context.enableSimulcast){let P=0,x=0;this.context.videoCaptureAndEncodeParameter&&(P=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),x=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const O={rid:"hi",maxBitrate:x*1e3,maxFramerate:P,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([O])}this.context.videoStreamIndex.subscribeFrameSent();const y=this.fixUpSubscriptionOrder(d,this.context.videoSubscriptions),E=this.context.videoDuplexMode===n.SdkStreamServiceType.TX||this.context.videoDuplexMode===n.SdkStreamServiceType.DUPLEX;let w,k=d;if((this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension===void 0||!this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension())&&(k=new a.default(k).withoutDependencyDescriptorRtpHeaderExtension().sdp),this.context.serverSupportsCompression){const P=this.context.previousSdpOffer?this.context.previousSdpOffer.sdp:"";w=this.textCompressor.compress(k,P),this.context.logger.info(`Compressed the SDP message from ${k.length} to ${w.length} bytes.`),d=""}this.context.previousSdpOffer=new a.default(d);const V=new t.default(this.context.meetingSessionConfiguration.credentials.attendeeId,d,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,y,E,this.context.videoStreamIndex.localStreamDescriptions(),!0,w);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!i.serverSideNetworkAdaptionIsNoneOrDefault(this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())&&this.context.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&(V.videoSubscriptionConfiguration=r.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(this.context,y.map(P=>P===0?0:this.context.videoStreamIndex.groupIdForStreamId(P)),this.context.videoDownlinkBandwidthPolicy.getVideoPreferences())),this.context.logger.info(`sending subscribe: ${JSON.stringify(V)}`),this.context.signalingClient.subscribe(V);const F=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(F)}`);let N="";F.compressedSdpAnswer&&F.compressedSdpAnswer.length?(N=this.textCompressor.decompress(F.compressedSdpAnswer,this.context.previousSdpAnswerAsString),N.length===0&&(this.context.sdpAnswer="",this.context.previousSdpAnswerAsString="",this.logAndThrow("Error occurred while trying to decompress the SDP answer.")),this.context.logger.info(`Decompressed the SDP message from ${F.compressedSdpAnswer.length} to ${N.length} bytes.`),this.context.sdpAnswer=N):this.context.sdpAnswer=F.sdpAnswer,this.context.previousSdpAnswerAsString=this.context.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(F)})}fixUpSubscriptionOrder(d,y){if(this.context.transceiverController.getMidForStreamId===void 0)return y;const E=new Map;for(const V of y){const F=this.context.transceiverController.getMidForStreamId(V);if(F===void 0){V!==0&&this.logger.warn(`Could not find MID for stream ID: ${V}`);continue}E.set(F,V)}const w=new a.default(d).mediaSections(),k=[];for(const V of w)if(V.mediaType==="video")if(V.direction==="recvonly"){const F=E.get(V.mid);if(F===void 0){this.logger.warn(`Could not find stream ID for MID: ${V.mid}`);continue}k.push(F)}else k.push(0);return this.logger.info(`Fixed up ${JSON.stringify(y)} to ${JSON.stringify(k)} (may be same))}`),k}receiveSubscribeAck(){return new Promise((d,y)=>{const E=this.context;let w=o(class{cancel(){this.signalingClient.removeObserver(this),y(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(F){if(F.isConnectionTerminated()){const P=`SubscribeAndReceiveSubscribeAckTask connection was terminated with code ${F.closeCode} and reason: ${F.closeReason}`;E.logger.warn(P);let x=m.default.TaskFailed;F.closeCode>=4500&&F.closeCode<4600&&(x=m.default.SignalingInternalServerError),E.audioVideoController.handleMeetingSessionStatus(new u.default(x),new Error(P));return}if(F.type!==e.default.ReceivedSignalFrame||F.message.type!==n.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const N=F.message.suback;d(N)}constructor(F){this.signalingClient=F}},"Interceptor");const k=new w(this.context.signalingClient);this.context.signalingClient.registerObserver(k),this.taskCanceler=k})}constructor(d){super(d.logger),this.context=d,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null,this.textCompressor=new s.default(d.logger)}},"SubscribeAndReceiveSubscribeAckTask");l.default=p},ZS2b:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class AS{equal(u){return this.remoteVideoAvailable===u.remoteVideoAvailable&&this.canStartLocalVideo===u.canStartLocalVideo}clone(){const u=new AS;return u.remoteVideoAvailable=this.remoteVideoAvailable,u.canStartLocalVideo=this.canStartLocalVideo,u}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=S},ZXtA:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=.8;let h=o(class{reportEvent(m){const a=m-this.lastReportedEventTimestamp;if(a>=this.reportingPeriodMillis){const s=this.filterCount,i=this.filterTotalMillis;if(this.filterCount=0,this.filterTotalMillis=0,this.lastReportedEventTimestamp=m,this.framerate===0||s===0)return;const e=Math.round(i/s),t=Math.round(this.framerate*(a/1e3))-s,n=Math.round(100*i/a);e>=this.filterDurationNotifyMillis&&this.delegate.filterFrameDurationHigh({framesDropped:t,avgFilterDurationMillis:e,framerate:this.framerate,periodMillis:a}),n>=this.filterCPUUtilization&&this.delegate.filterCPUUtilizationHigh({cpuUtilization:n,filterMillis:i,periodMillis:a})}}setSegmentationDuration(){this.filterDurationNotifyMillis=Math.round(1e3/this.framerate*S)}frameReceived(m){m!==this.framerate&&(this.framerate=m,this.logger.info(`frame counter setting frame rate to ${this.framerate}`),this.setSegmentationDuration());const a=Date.now();this.reportEvent(a)}filterSubmitted(){this._processingFilter=!0,this.lastFilterCompleteTimestamp=Date.now()}filterComplete(){this.filterTotalMillis+=Date.now()-this.lastFilterCompleteTimestamp,this._processingFilter=!1,this.filterCount++}get processingSegment(){return this._processingFilter}constructor(m,a,s,i){this.delegate=m,this.reportingPeriodMillis=a,this.filterCPUUtilization=s,this.logger=i,this._processingFilter=!0,this.lastReportedEventTimestamp=0,this.lastFilterCompleteTimestamp=0,this.filterTotalMillis=0,this.filterCount=0,this.framerate=0,this.filterDurationNotifyMillis=0,this.setSegmentationDuration()}},"BackgroundFilterFrameCounter");l.default=h},ZZPe:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{process(m){return S(this,void 0,void 0,function*(){return m})}destroy(){return S(this,void 0,void 0,function*(){})}},"NoOpVideoFrameProcessor");l.default=h},ZdbB:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("f3u9")),m=h(f("OcJO")),a=h(f("3sEM")),s=h(f("IrJe")),i=h(f("F7zz"));let e=o(class{setEncodingParameters(n){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!n||n.size===0)return;const c=Array.from(n.values()),p=r.getParameters();if(!p.encodings||p.encodings.length===0)p.encodings=c;else for(const g of p.encodings)for(const d of c){if((g.rid||d.rid)&&g.rid!==d.rid)continue;let y;for(y in d)y==="rid"||y==="codecPayloadType"||d.hasOwnProperty(y)&&(g[y]=d[y])}yield r.setParameters(p)})}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(n){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const r=this._localCameraTransceiver.sender;if(!r||n<=0)return;const c=r.getParameters();c.encodings||(c.encodings=[{}]);for(const p of c.encodings)p.maxBitrate=n*1e3;yield r.setParameters(c)})}setPeer(n){this.peer=n}reset(){this.destroyAudioRedWorkerAndStates(),this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!!this.peer&&typeof this.peer.getTransceivers<"u"}hasVideoInput(){return!(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")}trackIsVideoInput(n){return this._localCameraTransceiver?n===this._localCameraTransceiver.sender.track||n===this._localCameraTransceiver.receiver.track:!1}setupLocalTransceivers(){var n,r;this.useTransceivers()&&(!this.defaultMediaStream&&typeof MediaStream<"u"&&(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]}),!((r=(n=this.meetingSessionContext)===null||n===void 0?void 0:n.audioProfile)===null||r===void 0)&&r.hasRedundancyEnabled()&&this.setupAudioRedWorker()),this._localCameraTransceiver||(this._localCameraTransceiver=this.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(n){return S(this,void 0,void 0,function*(){return!this._localAudioTransceiver||this._localAudioTransceiver.direction!=="sendrecv"?(this.logger.info("audio transceiver direction is not set up or not activated"),!1):(yield this._localAudioTransceiver.sender.replaceTrack(n),!0)})}setAudioInput(n){return S(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localAudioTransceiver,n)})}setVideoInput(n){return S(this,void 0,void 0,function*(){yield this.setTransceiverInput(this._localCameraTransceiver,n)})}updateVideoTransceivers(n,r){if(!this.useTransceivers())return r.array();const c=this.peer.getTransceivers();return this.videoSubscriptions=[0],r=r.clone(),this.updateTransceivers(c,n,r),this.logger.debug(()=>this.debugDumpTransceivers()),this.videoSubscriptions}updateTransceivers(n,r,c){const p=c.array();n.length!==0&&!n[0].stop?(this.logger.info("Updating transceivers without `stop` function"),this.updateTransceiverWithoutStop(n,r,p)):n.length!==0&&this.updateTransceiverWithStop(n,r,p);for(const g of p){const d=this.addTransceiver("video",{direction:"recvonly",streams:[new MediaStream]});this.streamIdToTransceiver.set(g,d),this.groupIdToTransceiver.set(r.groupIdForStreamId(g),d),this.videoSubscriptions.push(g),this.logger.info(`adding transceiver mid: ${d.mid} subscription: ${g} direction: recvonly`)}}updateTransceiverWithStop(n,r,c){let p=1;this.videoSubscriptions=[0];for(const g of n){if(g===this._localCameraTransceiver||!this.transceiverIsVideo(g)||!g.mid)continue;let d=!1;const y=r.streamIdForTrack("v_"+g.mid);if(g.direction!=="inactive"&&y!==void 0){for(const[E,w]of c.entries())if(r.StreamIdsInSameGroup(y,w)){g.direction="recvonly",this.videoSubscriptions[p]=w,d=!0,this.streamIdToTransceiver.delete(y),this.streamIdToTransceiver.set(w,g),c.splice(E,1);break}}if(!d){this.videoSubscriptions[p]=0,this.logger.info(`Stopping MID: ${g.mid}, direction: ${g.direction}, current direction: ${g.currentDirection}`),g.stop();for(const[E,w]of this.streamIdToTransceiver.entries())g.mid===w.mid&&(this.streamIdToTransceiver.delete(E),this.groupIdToTransceiver.delete(r.groupIdForStreamId(E)))}p+=1}}updateTransceiverWithoutStop(n,r,c){let p=1;for(const g of n)if(!(g===this._localCameraTransceiver||!this.transceiverIsVideo(g))){if(this.videoSubscriptions[p]=0,g.direction!=="inactive"){const d=r.streamIdForTrack("v_"+g.mid);if(d!==void 0){for(const[y,E]of c.entries())if(r.StreamIdsInSameGroup(d,E)){g.direction="recvonly",this.videoSubscriptions[p]=E,this.streamIdToTransceiver.delete(d),this.streamIdToTransceiver.set(E,g),c.splice(y,1);break}}}p+=1}p=1;for(const g of n)if(!(g===this._localCameraTransceiver||!this.transceiverIsVideo(g))){if(g.direction==="inactive"&&c.length>0){g.direction="recvonly";const d=c.shift();this.videoSubscriptions[p]=d,this.streamIdToTransceiver.set(d,g),this.groupIdToTransceiver.set(r.groupIdForStreamId(d),g)}else if(this.videoSubscriptions[p]===0){g.direction="inactive";for(const[d,y]of this.streamIdToTransceiver.entries())g===y&&(this.streamIdToTransceiver.delete(d),this.groupIdToTransceiver.delete(r.groupIdForStreamId(d)))}p+=1}}getMidForStreamId(n){var r;return(r=this.streamIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}setStreamIdForMid(n,r){for(const[c,p]of this.streamIdToTransceiver.entries())if(p.mid===n){this.streamIdToTransceiver.delete(c),this.streamIdToTransceiver.set(r,p);return}}getMidForGroupId(n){var r;return(r=this.groupIdToTransceiver.get(n))===null||r===void 0?void 0:r.mid}transceiverIsVideo(n){return n.receiver&&n.receiver.track&&n.receiver.track.kind==="video"||n.sender&&n.sender.track&&n.sender.track.kind==="video"}debugDumpTransceivers(){let n="",r=0;for(const c of this.peer.getTransceivers())this.transceiverIsVideo(c)&&(n+=`transceiver index=${r} mid=${c.mid} subscription=${this.videoSubscriptions[r]} direction=${c.direction}
`,r+=1);return n}setTransceiverInput(n,r){return S(this,void 0,void 0,function*(){n&&(r?n.direction="sendrecv":n.direction="inactive",yield n.sender.replaceTrack(r))})}forEachRedMetricsObserver(n){for(const r of this.redMetricsObservers)i.default.nextTick(()=>{this.redMetricsObservers.has(r)&&r.recoveryMetricsDidReceive(n)})}disableAudioRedundancy(){this.meetingSessionContext.audioProfile=new u.default(this.meetingSessionContext.audioProfile.audioBitrateBps,!1),this.meetingSessionContext.audioVideoController.setAudioProfile(this.meetingSessionContext.audioProfile)}setupAudioRedWorker(){var n,r;const c=!!window.RTCRtpScriptTransform,p=!!RTCRtpSender.prototype.createEncodedStreams;if(c)this.logger.info("[AudioRed] Supports encoded insertable streams using RTCRtpScriptTransform");else if(p)this.logger.info("[AudioRed] Supports encoded insertable streams using TransformStream");else throw this.disableAudioRedundancy(),new Error("[AudioRed] Encoded insertable streams not supported. Recreating peer connection with audio redundancy disabled.");try{this.audioRedWorkerURL=URL.createObjectURL(new Blob([s.default],{type:"application/javascript"})),this.logger.info(`[AudioRed] Redundant audio worker URL ${this.audioRedWorkerURL}`),this.audioRedWorker=new Worker(this.audioRedWorkerURL)}catch(g){throw this.logger.error(`[AudioRed] Unable to create audio red worker due to ${g}`),URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.disableAudioRedundancy(),this.logger.info("[AudioRed] Recreating peer connection with audio redundancy disabled"),g}if(this.audioRedEnabled=!0,this.audioRedWorker.onmessage=g=>{if(g.data.type==="REDWorkerLog")this.logger.info(g.data.log);else if(g.data.type==="RedundantAudioEncoderStats"){const d=new m.default;d.currentTimestampMs=Date.now(),d.ssrc=g.data.ssrc,d.totalAudioPacketsLost=g.data.totalAudioPacketsLost,d.totalAudioPacketsExpected=g.data.totalAudioPacketsExpected,d.totalAudioPacketsRecoveredRed=g.data.totalAudioPacketsRecoveredRed,d.totalAudioPacketsRecoveredFec=g.data.totalAudioPacketsRecoveredFec,this.forEachRedMetricsObserver(d)}},c)this._localAudioTransceiver.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"SenderTransform"}),this._localAudioTransceiver.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"ReceiverTransform"});else if(p){const g=this._localAudioTransceiver.sender.createEncodedStreams(),d=this._localAudioTransceiver.receiver.createEncodedStreams();this.audioRedWorker.postMessage({msgType:"StartRedWorker",send:g,receive:d},[g.readable,g.writable,d.readable,d.writable])}(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.addObserver(this),this.addRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector)}addTransceiver(n,r){var c;const p=this.peer.addTransceiver(n,r);if(!(!((c=this.peer.getConfiguration())===null||c===void 0)&&c.encodedInsertableStreams)||!this.audioRedWorker)return p;const g=!!window.RTCRtpScriptTransform,d=!!RTCRtpSender.prototype.createEncodedStreams;if(g)p.sender.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"}),p.receiver.transform=new RTCRtpScriptTransform(this.audioRedWorker,{type:"PassthroughTransform"});else if(d){const y=p.sender.createEncodedStreams();y.readable.pipeTo(y.writable);const E=p.receiver.createEncodedStreams();E.readable.pipeTo(E.writable)}return p}destroyAudioRedWorkerAndStates(){var n,r;this.audioRedWorker&&(URL.revokeObjectURL(this.audioRedWorkerURL),this.audioRedWorkerURL=null,this.audioRedWorker=null,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.audioRedEnabled=!0,(n=this.meetingSessionContext)===null||n===void 0||n.audioVideoController.removeObserver(this),this.removeRedundantAudioRecoveryMetricsObserver((r=this.meetingSessionContext)===null||r===void 0?void 0:r.statsCollector))}setAudioPayloadTypes(n){this.audioRedWorker&&(this.audioRedWorker.postMessage({msgType:"RedPayloadType",payloadType:n.get("red")}),this.audioRedWorker.postMessage({msgType:"OpusPayloadType",payloadType:n.get("opus")}))}metricsDidReceive(n){const{currentTimestampMs:r}=n,c=n.getRTCStatsReport();let p=0,g=0,d=0;c.forEach(F=>{F.kind==="audio"&&(F.type==="outbound-rtp"?g=F.packetsSent:F.type==="remote-inbound-rtp"&&(p=F.timestamp,d=F.packetsLost))}),(this.audioMetricsHistory.length===0||p>this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs&&g>this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent)&&this.audioMetricsHistory.push({timestampMs:p,totalPacketsSent:g,totalPacketsLost:d}),this.audioMetricsHistory.length>this.maxAudioMetricsHistory&&this.audioMetricsHistory.shift();const y=this.lossPercent(this.audioRedPacketLossShortEvalPeriodMs),E=this.lossPercent(this.audioRedPacketLossLongEvalPeriodMs),w=Math.max(y,E),[k,V]=a.default.getNumRedundantEncodingsForPacketLoss(w);if(V){this.lastHighPacketLossEventTimestampMs=r,this.audioRedEnabled&&(this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Disable"}),this.audioRedEnabled=!1,this.lastAudioRedTurnOffTimestampMs=r);return}else if(!this.audioRedEnabled){const F=r-this.lastAudioRedTurnOffTimestampMs,N=r-this.lastHighPacketLossEventTimestampMs;if(F>=this.audioRedPacketLossLongEvalPeriodMs&&N<this.redRecoveryTimeMs)return;this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"Enable"}),this.audioRedEnabled=!0,this.maybeResetHoldDownTimer(r)}this.shouldUpdateAudioRedWorkerEncodings(r,k)&&this.audioRedWorker&&this.audioRedWorker.postMessage({msgType:"UpdateNumRedundantEncodings",numRedundantEncodings:k})}maybeResetHoldDownTimer(n){this.currentNumRedundantEncodings>0&&(this.lastRedHolddownTimerStartTimestampMs=n)}lossPercent(n){if(this.audioMetricsHistory.length<2)return 0;const r=this.audioMetricsHistory[this.audioMetricsHistory.length-1].timestampMs,c=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsSent,p=this.audioMetricsHistory[this.audioMetricsHistory.length-1].totalPacketsLost;for(let g=this.audioMetricsHistory.length-2;g>=0;g--)if(r-this.audioMetricsHistory[g].timestampMs>=n){const d=p-this.audioMetricsHistory[g].totalPacketsLost,y=c-this.audioMetricsHistory[g].totalPacketsSent,E=100*(d/y);return Math.max(0,Math.min(E,100))}return 0}shouldUpdateAudioRedWorkerEncodings(n,r){return this.currentNumRedundantEncodings===r?(this.maybeResetHoldDownTimer(n),!1):r<this.currentNumRedundantEncodings&&n-this.lastRedHolddownTimerStartTimestampMs<this.audioRedHoldDownTimeMs?!1:(this.currentNumRedundantEncodings=r,this.maybeResetHoldDownTimer(n),!0)}addRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.add(n)}removeRedundantAudioRecoveryMetricsObserver(n){this.redMetricsObservers.delete(n)}constructor(n,r,c){this.logger=n,this.browserBehavior=r,this.meetingSessionContext=c,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null,this.streamIdToTransceiver=new Map,this.groupIdToTransceiver=new Map,this.audioRedWorker=null,this.audioRedWorkerURL=null,this.audioMetricsHistory=new Array,this.redMetricsObservers=new Set,this.currentNumRedundantEncodings=0,this.lastRedHolddownTimerStartTimestampMs=0,this.lastHighPacketLossEventTimestampMs=0,this.lastAudioRedTurnOffTimestampMs=0,this.maxAudioMetricsHistory=20,this.audioRedPacketLossShortEvalPeriodMs=5*1e3,this.audioRedPacketLossLongEvalPeriodMs=15*1e3,this.audioRedHoldDownTimeMs=5*60*1e3,this.redRecoveryTimeMs=1*60*1e3}},"DefaultTransceiverController");l.default=e},Zful:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("oHvd"));let u=o(class sa extends h.default{health(){if(this.currentData.isConnectionStartRecent(sa.CONNECTION_WAIT_TIME_MS))return 1;const s=this.currentData.consecutiveStatsWithNoPackets>=sa.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=sa.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>sa.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>sa.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),s||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${s}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(a,s,i){super(s,i,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,sa.CONNECTION_UNHEALTHY_THRESHOLD=s.connectionUnhealthyThreshold,sa.CONNECTION_WAIT_TIME_MS=s.connectionWaitTimeMs,sa.MISSED_PONGS_THRESHOLD=s.missedPongsUpperThreshold,sa.MAXIMUM_AUDIO_DELAY_MS=s.maximumAudioDelayMs,sa.MAXIMUM_AUDIO_DELAY_DATA_POINTS=s.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=u},Zhxc:function(j,l,f){"use strict";var S=f("c3gm"),h=f("XFRR"),u=4294967295;function m(V){this.__wrapped__=V,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=u,this.__views__=[]}o(m,"LazyWrapper"),m.prototype=Object(S.a)(h.a.prototype),m.prototype.constructor=m;var a=m,s=f("+j7y"),i=f("ftz4"),e=f("Gn1W"),t=f("/1FC"),n=f("EUcb"),r=f("eAQQ");function c(V){if(V instanceof a)return V.clone();var F=new e.a(V.__wrapped__,V.__chain__);return F.__actions__=Object(r.a)(V.__actions__),F.__index__=V.__index__,F.__values__=V.__values__,F}o(c,"wrapperClone");var p=c,g=Object.prototype,d=g.hasOwnProperty;function y(V){if(Object(n.a)(V)&&!Object(t.a)(V)&&!(V instanceof a)){if(V instanceof e.a)return V;if(d.call(V,"__wrapped__"))return p(V)}return new e.a(V)}o(y,"lodash"),y.prototype=h.a.prototype,y.prototype.constructor=y;var E=y;function w(V){var F=Object(i.a)(V),N=E[F];if(typeof N!="function"||!(F in a.prototype))return!1;if(V===N)return!0;var P=Object(s.a)(N);return!!P&&V===P[0]}o(w,"isLaziable");var k=l.a=w},Zit3:function(j,l,f){"use strict";f.r(l),f.d(l,"__Client",function(){return yr}),f.d(l,"ChimeSDKMessagingClient",function(){return _o}),f.d(l,"ChimeSDKMessaging",function(){return jd}),f.d(l,"$Command",function(){return In}),f.d(l,"AssociateChannelFlowCommand",function(){return fd}),f.d(l,"BatchCreateChannelMembershipCommand",function(){return hd}),f.d(l,"ChannelFlowCallbackCommand",function(){return pd}),f.d(l,"CreateChannelBanCommand",function(){return md}),f.d(l,"CreateChannelCommand",function(){return gd}),f.d(l,"CreateChannelFlowCommand",function(){return Sd}),f.d(l,"CreateChannelMembershipCommand",function(){return Oi}),f.d(l,"CreateChannelModeratorCommand",function(){return yn}),f.d(l,"DeleteChannelBanCommand",function(){return Ia}),f.d(l,"DeleteChannelCommand",function(){return Ki}),f.d(l,"DeleteChannelFlowCommand",function(){return $a}),f.d(l,"DeleteChannelMembershipCommand",function(){return qi}),f.d(l,"DeleteChannelMessageCommand",function(){return Ue}),f.d(l,"DeleteChannelModeratorCommand",function(){return co}),f.d(l,"DeleteMessagingStreamingConfigurationsCommand",function(){return Ka}),f.d(l,"DescribeChannelBanCommand",function(){return oi}),f.d(l,"DescribeChannelCommand",function(){return Br}),f.d(l,"DescribeChannelFlowCommand",function(){return Ar}),f.d(l,"DescribeChannelMembershipCommand",function(){return Ja}),f.d(l,"DescribeChannelMembershipForAppInstanceUserCommand",function(){return na}),f.d(l,"DescribeChannelModeratedByAppInstanceUserCommand",function(){return ft}),f.d(l,"DescribeChannelModeratorCommand",function(){return Fr}),f.d(l,"DisassociateChannelFlowCommand",function(){return Rl}),f.d(l,"GetChannelMembershipPreferencesCommand",function(){return Ml}),f.d(l,"GetChannelMessageCommand",function(){return Ya}),f.d(l,"GetChannelMessageStatusCommand",function(){return Xa}),f.d(l,"GetMessagingSessionEndpointCommand",function(){return Qa}),f.d(l,"GetMessagingStreamingConfigurationsCommand",function(){return ia}),f.d(l,"ListChannelBansCommand",function(){return pa}),f.d(l,"ListChannelFlowsCommand",function(){return wa}),f.d(l,"ListChannelMembershipsCommand",function(){return Oa}),f.d(l,"ListChannelMembershipsForAppInstanceUserCommand",function(){return ma}),f.d(l,"ListChannelMessagesCommand",function(){return Za}),f.d(l,"ListChannelModeratorsCommand",function(){return qa}),f.d(l,"ListChannelsAssociatedWithChannelFlowCommand",function(){return Ra}),f.d(l,"ListChannelsCommand",function(){return ra}),f.d(l,"ListChannelsModeratedByAppInstanceUserCommand",function(){return Ei}),f.d(l,"ListSubChannelsCommand",function(){return bi}),f.d(l,"ListTagsForResourceCommand",function(){return el}),f.d(l,"PutChannelExpirationSettingsCommand",function(){return tl}),f.d(l,"PutChannelMembershipPreferencesCommand",function(){return Pl}),f.d(l,"PutMessagingStreamingConfigurationsCommand",function(){return Al}),f.d(l,"RedactChannelMessageCommand",function(){return Ma}),f.d(l,"SearchChannelsCommand",function(){return nl}),f.d(l,"SendChannelMessageCommand",function(){return ks}),f.d(l,"TagResourceCommand",function(){return Pa}),f.d(l,"UntagResourceCommand",function(){return _l}),f.d(l,"UpdateChannelCommand",function(){return il}),f.d(l,"UpdateChannelFlowCommand",function(){return oa}),f.d(l,"UpdateChannelMessageCommand",function(){return rl}),f.d(l,"UpdateChannelReadMarkerCommand",function(){return kl}),f.d(l,"paginateListChannelBans",function(){return Gd}),f.d(l,"paginateListChannelFlows",function(){return yd}),f.d(l,"paginateListChannelMembershipsForAppInstanceUser",function(){return Rf}),f.d(l,"paginateListChannelMemberships",function(){return Mf}),f.d(l,"paginateListChannelMessages",function(){return Yd}),f.d(l,"paginateListChannelModerators",function(){return Qo}),f.d(l,"paginateListChannelsAssociatedWithChannelFlow",function(){return kc}),f.d(l,"paginateListChannelsModeratedByAppInstanceUser",function(){return Lc}),f.d(l,"paginateListChannels",function(){return _f}),f.d(l,"paginateListSubChannels",function(){return sl}),f.d(l,"paginateSearchChannels",function(){return Nc}),f.d(l,"AllowNotifications",function(){return Mh}),f.d(l,"ChannelMembershipType",function(){return Ph}),f.d(l,"ErrorCode",function(){return Ah}),f.d(l,"BadRequestException",function(){return Zl}),f.d(l,"ConflictException",function(){return ql}),f.d(l,"ForbiddenException",function(){return ed}),f.d(l,"NotFoundException",function(){return td}),f.d(l,"ServiceFailureException",function(){return nd}),f.d(l,"ServiceUnavailableException",function(){return id}),f.d(l,"ThrottledClientException",function(){return rd}),f.d(l,"UnauthorizedClientException",function(){return od}),f.d(l,"ResourceLimitExceededException",function(){return sd}),f.d(l,"ExpirationCriterion",function(){return _h}),f.d(l,"ChannelMode",function(){return kh}),f.d(l,"ChannelPrivacy",function(){return Dh}),f.d(l,"InvocationType",function(){return Lh}),f.d(l,"FallbackAction",function(){return Nh}),f.d(l,"PushNotificationType",function(){return xh}),f.d(l,"ChannelMessagePersistenceType",function(){return Bh}),f.d(l,"ChannelMessageStatus",function(){return Fh}),f.d(l,"ChannelMessageType",function(){return Vh}),f.d(l,"MessagingDataType",function(){return Uh}),f.d(l,"SortOrder",function(){return Hh}),f.d(l,"SearchFieldKey",function(){return zh}),f.d(l,"SearchFieldOperator",function(){return Wh}),f.d(l,"IdentityFilterSensitiveLog",function(){return Nr}),f.d(l,"BatchChannelMembershipsFilterSensitiveLog",function(){return pu}),f.d(l,"BatchCreateChannelMembershipResponseFilterSensitiveLog",function(){return mu}),f.d(l,"ChannelFilterSensitiveLog",function(){return gu}),f.d(l,"ChannelAssociatedWithFlowSummaryFilterSensitiveLog",function(){return Su}),f.d(l,"ChannelBanFilterSensitiveLog",function(){return vu}),f.d(l,"ChannelBanSummaryFilterSensitiveLog",function(){return yu}),f.d(l,"ProcessorFilterSensitiveLog",function(){return ad}),f.d(l,"ChannelFlowFilterSensitiveLog",function(){return bu}),f.d(l,"MessageAttributeValueFilterSensitiveLog",function(){return ld}),f.d(l,"PushNotificationConfigurationFilterSensitiveLog",function(){return Ic}),f.d(l,"ChannelMessageCallbackFilterSensitiveLog",function(){return Cu}),f.d(l,"ChannelFlowCallbackRequestFilterSensitiveLog",function(){return Eu}),f.d(l,"ChannelFlowSummaryFilterSensitiveLog",function(){return Tu}),f.d(l,"ChannelMembershipFilterSensitiveLog",function(){return Iu}),f.d(l,"ChannelSummaryFilterSensitiveLog",function(){return dd}),f.d(l,"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog",function(){return wc}),f.d(l,"PushNotificationPreferencesFilterSensitiveLog",function(){return wu}),f.d(l,"ChannelMembershipPreferencesFilterSensitiveLog",function(){return Wd}),f.d(l,"ChannelMembershipSummaryFilterSensitiveLog",function(){return Ou}),f.d(l,"ChannelMessageFilterSensitiveLog",function(){return Ru}),f.d(l,"ChannelMessageSummaryFilterSensitiveLog",function(){return Mu}),f.d(l,"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog",function(){return Oc}),f.d(l,"ChannelModeratorFilterSensitiveLog",function(){return Pu}),f.d(l,"ChannelModeratorSummaryFilterSensitiveLog",function(){return Au}),f.d(l,"TagFilterSensitiveLog",function(){return cd}),f.d(l,"CreateChannelRequestFilterSensitiveLog",function(){return _u}),f.d(l,"CreateChannelBanResponseFilterSensitiveLog",function(){return ku}),f.d(l,"CreateChannelFlowRequestFilterSensitiveLog",function(){return Du}),f.d(l,"CreateChannelMembershipResponseFilterSensitiveLog",function(){return Lu}),f.d(l,"CreateChannelModeratorResponseFilterSensitiveLog",function(){return Nu}),f.d(l,"DescribeChannelResponseFilterSensitiveLog",function(){return xu}),f.d(l,"DescribeChannelBanResponseFilterSensitiveLog",function(){return Bu}),f.d(l,"DescribeChannelFlowResponseFilterSensitiveLog",function(){return Fu}),f.d(l,"DescribeChannelMembershipResponseFilterSensitiveLog",function(){return Vu}),f.d(l,"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog",function(){return Uu}),f.d(l,"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog",function(){return Hu}),f.d(l,"DescribeChannelModeratorResponseFilterSensitiveLog",function(){return zu}),f.d(l,"GetChannelMembershipPreferencesResponseFilterSensitiveLog",function(){return Wu}),f.d(l,"GetChannelMessageResponseFilterSensitiveLog",function(){return ju}),f.d(l,"ListChannelBansRequestFilterSensitiveLog",function(){return Gu}),f.d(l,"ListChannelBansResponseFilterSensitiveLog",function(){return $u}),f.d(l,"ListChannelFlowsRequestFilterSensitiveLog",function(){return Ku}),f.d(l,"ListChannelFlowsResponseFilterSensitiveLog",function(){return Ju}),f.d(l,"ListChannelMembershipsRequestFilterSensitiveLog",function(){return Yu}),f.d(l,"ListChannelMembershipsResponseFilterSensitiveLog",function(){return Xu}),f.d(l,"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog",function(){return Qu}),f.d(l,"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog",function(){return Zu}),f.d(l,"ListChannelMessagesRequestFilterSensitiveLog",function(){return qu}),f.d(l,"ListChannelMessagesResponseFilterSensitiveLog",function(){return ef}),f.d(l,"ListChannelModeratorsRequestFilterSensitiveLog",function(){return tf}),f.d(l,"ListChannelModeratorsResponseFilterSensitiveLog",function(){return nf}),f.d(l,"ListChannelsRequestFilterSensitiveLog",function(){return rf}),f.d(l,"ListChannelsResponseFilterSensitiveLog",function(){return of}),f.d(l,"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog",function(){return sf}),f.d(l,"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog",function(){return af}),f.d(l,"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog",function(){return lf}),f.d(l,"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog",function(){return df}),f.d(l,"ListSubChannelsRequestFilterSensitiveLog",function(){return cf}),f.d(l,"ListSubChannelsResponseFilterSensitiveLog",function(){return uf}),f.d(l,"ListTagsForResourceResponseFilterSensitiveLog",function(){return ff}),f.d(l,"PutChannelMembershipPreferencesRequestFilterSensitiveLog",function(){return hf}),f.d(l,"PutChannelMembershipPreferencesResponseFilterSensitiveLog",function(){return pf}),f.d(l,"SearchChannelsRequestFilterSensitiveLog",function(){return mf}),f.d(l,"SearchChannelsResponseFilterSensitiveLog",function(){return gf}),f.d(l,"SendChannelMessageRequestFilterSensitiveLog",function(){return Sf}),f.d(l,"TagResourceRequestFilterSensitiveLog",function(){return vf}),f.d(l,"UntagResourceRequestFilterSensitiveLog",function(){return yf}),f.d(l,"UpdateChannelRequestFilterSensitiveLog",function(){return bf}),f.d(l,"UpdateChannelFlowRequestFilterSensitiveLog",function(){return Cf}),f.d(l,"UpdateChannelMessageRequestFilterSensitiveLog",function(){return Ef}),f.d(l,"ChimeSDKMessagingServiceException",function(){return ko});var S={};f.r(S),f.d(S,"isVirtualHostableS3Bucket",function(){return Js}),f.d(S,"parseArn",function(){return Ys}),f.d(S,"partition",function(){return Ms}),f.d(S,"setPartitionInfo",function(){return Po}),f.d(S,"useDefaultPartitionInfo",function(){return Ni}),f.d(S,"getUserAgentPrefix",function(){return $s});var h={};f.r(h),f.d(h,"aws",function(){return S}),f.d(h,"booleanEquals",function(){return Xs}),f.d(h,"getAttr",function(){return Ps}),f.d(h,"isSet",function(){return la}),f.d(h,"isValidHostLabel",function(){return fs}),f.d(h,"not",function(){return Xo}),f.d(h,"parseURL",function(){return Q}),f.d(h,"stringEquals",function(){return A}),f.d(h,"substring",function(){return X}),f.d(h,"uriEncode",function(){return se});var u;(function(T){T.ENV="env",T.CONFIG="shared config entry"})(u||(u={}));const m=o((T,v,b)=>{if(v in T){if(T[v]==="true")return!0;if(T[v]==="false")return!1;throw new Error(`Cannot load ${b} "${v}". Expected "true" or "false", got ${T[v]}.`)}},"booleanSelector"),a="AWS_USE_DUALSTACK_ENDPOINT",s="use_dualstack_endpoint",i=!1,e={environmentVariableSelector:T=>m(T,a,u.ENV),configFileSelector:T=>m(T,s,u.CONFIG),default:!1},t="AWS_USE_FIPS_ENDPOINT",n="use_fips_endpoint",r=!1,c={environmentVariableSelector:T=>m(T,t,u.ENV),configFileSelector:T=>m(T,n,u.CONFIG),default:!1},p=o(T=>{if(typeof T=="function")return T;const v=Promise.resolve(T);return()=>v},"normalizeProvider"),g=o(T=>{const{endpoint:v,urlParser:b}=T;var I,B;return{...T,tls:(I=T.tls)!==null&&I!==void 0?I:!0,endpoint:p(typeof v=="string"?b(v):v),isCustomEndpoint:!0,useDualstackEndpoint:p((B=T.useDualstackEndpoint)!==null&&B!==void 0?B:!1)}},"resolveCustomEndpointsConfig");var d=f("9oTK");const y=function(){var T=Object(d.coroutine)(function*(v){const{tls:b=!0}=v,I=yield v.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(I))throw new Error("Invalid region in client config");const H=yield v.useDualstackEndpoint(),K=yield v.useFipsEndpoint();var fe;const{hostname:ie}=(fe=yield v.regionInfoProvider(I,{useDualstackEndpoint:H,useFipsEndpoint:K}))!==null&&fe!==void 0?fe:{};if(!ie)throw new Error("Cannot resolve hostname from client config");return v.urlParser(`${b?"https:":"http:"}//${ie}`)});return o(function(b){return T.apply(this,arguments)},"getEndpointFromRegion")}(),E=o(T=>{var v;const b=p((v=T.useDualstackEndpoint)!==null&&v!==void 0?v:!1),{endpoint:I,useFipsEndpoint:B,urlParser:H}=T;var K;return{...T,tls:(K=T.tls)!==null&&K!==void 0?K:!0,endpoint:I?p(typeof I=="string"?H(I):I):()=>y({...T,useDualstackEndpoint:b,useFipsEndpoint:B}),isCustomEndpoint:!!I,useDualstackEndpoint:b}},"resolveEndpointsConfig"),w="AWS_REGION",k="region",V={environmentVariableSelector:T=>T[w],configFileSelector:T=>T[k],default:()=>{throw new Error("Region is missing")}},F={preferredFile:"credentials"},N=o(T=>typeof T=="string"&&(T.startsWith("fips-")||T.endsWith("-fips")),"isFipsRegion"),P=o(T=>N(T)?["fips-aws-global","aws-fips"].includes(T)?"us-east-1":T.replace(/fips-(dkr-|prod-)?|-fips/,""):T,"getRealRegion"),x=o(T=>{const{region:v,useFipsEndpoint:b}=T;if(!v)throw new Error("Region is missing");return{...T,region:Object(d.coroutine)(function*(){if(typeof v=="string")return P(v);const I=yield v();return P(I)}),useFipsEndpoint:Object(d.coroutine)(function*(){const I=typeof v=="string"?v:yield v();return N(I)?!0:typeof b!="function"?Promise.resolve(!!b):b()})}},"resolveRegionConfig"),O=o(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{useFipsEndpoint:v,useDualstackEndpoint:b}=arguments.length>1?arguments[1]:void 0;var I;return(I=T.find(B=>{let{tags:H}=B;return v===H.includes("fips")&&b===H.includes("dualstack")}))===null||I===void 0?void 0:I.hostname},"getHostnameFromVariants"),M=o((T,v)=>{let{regionHostname:b,partitionHostname:I}=v;return b||(I?I.replace("{region}",T):void 0)},"getResolvedHostname");var D;const J=o((T,v)=>{let{partitionHash:b}=v;return(D=Object.keys(b||{}).find(I=>b[I].regions.includes(T)))!==null&&D!==void 0?D:"aws"},"getResolvedPartition"),q=o((T,v)=>{let{signingRegion:b,regionRegex:I,useFipsEndpoint:B}=v;if(b)return b;if(B){const H=I.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),K=T.match(H);if(K)return K[0].slice(1,-1)}},"getResolvedSigningRegion"),$=o((T,v)=>{let{useFipsEndpoint:b=!1,useDualstackEndpoint:I=!1,signingService:B,regionHash:H,partitionHash:K}=v;var fe,ie,Se,le,rt;const kt=J(T,{partitionHash:K});var qt;const Wt=T in H?T:(qt=(fe=K[kt])===null||fe===void 0?void 0:fe.endpoint)!==null&&qt!==void 0?qt:T,Ut={useFipsEndpoint:b,useDualstackEndpoint:I},on=O((ie=H[Wt])===null||ie===void 0?void 0:ie.variants,Ut),ar=O((Se=K[kt])===null||Se===void 0?void 0:Se.variants,Ut),Ds=M(Wt,{regionHostname:on,partitionHostname:ar});if(Ds===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:Wt,useFipsEndpoint:b,useDualstackEndpoint:I}}`);const al=q(Ds,{signingRegion:(le=H[Wt])===null||le===void 0?void 0:le.signingRegion,regionRegex:K[kt].regionRegex,useFipsEndpoint:b});return{partition:kt,signingService:B,hostname:Ds,...al&&{signingRegion:al},...((rt=H[Wt])===null||rt===void 0?void 0:rt.signingService)&&{signingService:H[Wt].signingService}}},"getRegionInfo");var de;(function(T){T[T.HEADER=0]="HEADER",T[T.TRAILER=1]="TRAILER"})(de||(de={}));class Ee{add(v){this.values.push(v)}set(v){this.values=v}remove(v){this.values=this.values.filter(b=>b!==v)}toString(){return this.values.map(v=>v.includes(",")||v.includes(" ")?`"${v}"`:v).join(", ")}get(){return this.values}constructor({name:v,kind:b=de.HEADER,values:I=[]}){this.name=v,this.kind=b,this.values=I}}o(Ee,"Field_Field");class _e{setField(v){this.entries[v.name.toLowerCase()]=v}getField(v){return this.entries[v.toLowerCase()]}removeField(v){delete this.entries[v.toLowerCase()]}getByType(v){return Object.values(this.entries).filter(b=>b.kind===v)}constructor({fields:v=[],encoding:b="utf-8"}){this.entries={},v.forEach(this.setField.bind(this)),this.encoding=b}}o(_e,"Fields");class ye{static isInstance(v){if(!v)return!1;const b=v;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const v=new ye({...this,headers:{...this.headers}});return v.query&&(v.query=Be(v.query)),v}constructor(v){this.method=v.method||"GET",this.hostname=v.hostname||"localhost",this.port=v.port,this.query=v.query||{},this.headers=v.headers||{},this.body=v.body,this.protocol=v.protocol?v.protocol.slice(-1)!==":"?`${v.protocol}:`:v.protocol:"https:",this.path=v.path?v.path.charAt(0)!=="/"?`/${v.path}`:v.path:"/"}}o(ye,"HttpRequest");function Be(T){return Object.keys(T).reduce((v,b)=>{const I=T[b];return{...v,[b]:Array.isArray(I)?[...I]:I}},{})}o(Be,"cloneQuery");class pt{static isInstance(v){if(!v)return!1;const b=v;return typeof b.statusCode=="number"&&typeof b.headers=="object"}constructor(v){this.statusCode=v.statusCode,this.headers=v.headers||{},this.body=v.body}}o(pt,"HttpResponse");function Ve(T){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(T)}o(Ve,"isValidHostname");const gt="content-length";function dt(T){return v=>function(){var b=Object(d.coroutine)(function*(I){const B=I.request;if(ye.isInstance(B)){const{body:H,headers:K}=B;if(H&&Object.keys(K).map(fe=>fe.toLowerCase()).indexOf(gt)===-1)try{const fe=T(H);B.headers={...B.headers,[gt]:String(fe)}}catch{}}return v({...I,request:B})});return function(I){return b.apply(this,arguments)}}()}o(dt,"contentLengthMiddleware");const Je={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},_t=o(T=>({applyToStack:v=>{v.add(dt(T.bodyLengthChecker),Je)}}),"getContentLengthPlugin"),ot=function(){var T=Object(d.coroutine)(function*(v){const b=(v==null?void 0:v.Bucket)||"";if(typeof v.Bucket=="string"&&(v.Bucket=b.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),an(b)){if(v.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!ni(b)||b.indexOf(".")!==-1&&!String(v.Endpoint).startsWith("http:")||b.toLowerCase()!==b||b.length<3)&&(v.ForcePathStyle=!0);return v.DisableMultiRegionAccessPoints&&(v.disableMultiRegionAccessPoints=!0,v.DisableMRAP=!0),v});return o(function(b){return T.apply(this,arguments)},"resolveParamsForS3")}(),Et=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Mt=/(\d+\.){3}\d+/,ze=/\.\./,$t=/\./,Un=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,ni=o(T=>Et.test(T)&&!Mt.test(T)&&!ze.test(T),"isDnsCompatibleBucketName"),an=o(T=>{const[v,b,I,B,H,K]=T.split(":"),fe=v==="arn"&&T.split(":").length>=6,ie=[v,b,I,H,K].filter(Boolean).length===5;if(fe&&!ie)throw new Error(`Invalid ARN: ${T} was an invalid ARN.`);return v==="arn"&&!!b&&!!I&&!!H&&!!K},"isArnBucketName"),Gn=o((T,v,b)=>{const I=function(){var B=Object(d.coroutine)(function*(){var H;const K=(H=b[T])!==null&&H!==void 0?H:b[v];return typeof K=="function"?K():K});return o(function(){return B.apply(this,arguments)},"configProvider")}();return T==="endpoint"||v==="endpoint"?Object(d.coroutine)(function*(){const B=yield I();if(B&&typeof B=="object"){if("url"in B)return B.url.href;if("hostname"in B){const{protocol:H,hostname:K,port:fe,path:ie}=B;return`${H}//${K}${fe?":"+fe:""}${ie}`}}return B}):I},"createConfigValueProvider"),si=function(){var T=Object(d.coroutine)(function*(v,b,I,B){const H=yield ri(v,b,I);if(typeof I.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return I.endpointProvider(H,B)});return o(function(b,I,B,H){return T.apply(this,arguments)},"getEndpointFromInstructions")}(),ri=function(){var T=Object(d.coroutine)(function*(v,b,I){var B;const H={},K=(b==null||(B=b.getEndpointParameterInstructions)===null||B===void 0?void 0:B.call(b))||{};for(const[fe,ie]of Object.entries(K))switch(ie.type){case"staticContextParams":H[fe]=ie.value;break;case"contextParams":H[fe]=v[ie.name];break;case"clientContextParams":case"builtInParams":H[fe]=yield Gn(ie.name,fe,I)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(ie))}return Object.keys(K).length===0&&Object.assign(H,I),String(I.serviceId).toLowerCase()==="s3"&&(yield ot(H)),H});return o(function(b,I,B){return T.apply(this,arguments)},"resolveParams")}();function On(T){const v={};if(T=T.replace(/^\?/,""),T)for(const b of T.split("&")){let[I,B=null]=b.split("=");I=decodeURIComponent(I),B&&(B=decodeURIComponent(B)),I in v?Array.isArray(v[I])?v[I].push(B):v[I]=[v[I],B]:v[I]=B}return v}o(On,"parseQueryString");const Gi=o(T=>{if(typeof T=="string")return Gi(new URL(T));const{hostname:v,pathname:b,port:I,protocol:B,search:H}=T;let K;return H&&(K=On(H)),{hostname:v,port:I?parseInt(I):void 0,protocol:B,path:b,query:K}},"parseUrl"),ui=o(T=>typeof T=="object"?"url"in T?Gi(T.url):T:Gi(T),"toEndpointV1"),Fi=o(T=>{let{config:v,instructions:b}=T;return(I,B)=>function(){var H=Object(d.coroutine)(function*(K){var fe,ie;const Se=yield si(K.input,{getEndpointParameterInstructions(){return b}},{...v},B);B.endpointV2=Se,B.authSchemes=(fe=Se.properties)===null||fe===void 0?void 0:fe.authSchemes;const le=(ie=B.authSchemes)===null||ie===void 0?void 0:ie[0];return le&&(B.signing_region=le.signingRegion,B.signing_service=le.signingName),I({...K})});return function(K){return H.apply(this,arguments)}}()},"endpointMiddleware"),Hi=o((T,v)=>(b,I)=>function(){var B=Object(d.coroutine)(function*(H){const{response:K}=yield b(H);try{const fe=yield v(K,T);return{response:K,output:fe}}catch(fe){if(Object.defineProperty(fe,"$response",{value:K}),!("$metadata"in fe)){const ie="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";fe.message+=`
  `+ie}throw fe}});return function(H){return B.apply(this,arguments)}}(),"deserializerMiddleware"),Sn=o((T,v)=>(b,I)=>function(){var B=Object(d.coroutine)(function*(H){var K;const fe=!((K=I.endpointV2)===null||K===void 0)&&K.url&&T.urlParser?Object(d.coroutine)(function*(){return T.urlParser(I.endpointV2.url)}):T.endpoint;if(!fe)throw new Error("No valid endpoint provider available.");const ie=yield v(H.input,{...T,endpoint:fe});return b({...H,request:ie})});return function(H){return B.apply(this,arguments)}}(),"serializerMiddleware"),un={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},bn={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ot(T,v,b){return{applyToStack:I=>{I.add(Hi(T,b),un),I.add(Sn(T,v),bn)}}}o(Ot,"getSerdePlugin");const En={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:bn.name},Lt=o((T,v)=>({applyToStack:b=>{b.addRelativeTo(Fi({config:T,instructions:v}),En)}}),"getEndpointPlugin"),Hn=o(T=>{var v;const b=(v=T.tls)!==null&&v!==void 0?v:!0,{endpoint:I}=T,B=I!=null?Object(d.coroutine)(function*(){return ui(yield p(I)())}):void 0,H=!!I;var K,fe;return{...T,endpoint:B,tls:b,isCustomEndpoint:H,useDualstackEndpoint:p((K=T.useDualstackEndpoint)!==null&&K!==void 0?K:!1),useFipsEndpoint:p((fe=T.useFipsEndpoint)!==null&&fe!==void 0?fe:!1)}},"resolveEndpointConfig");function Ji(T){return T}o(Ji,"resolveHostHeaderConfig");const $n=o(T=>v=>function(){var b=Object(d.coroutine)(function*(I){if(!ye.isInstance(I.request))return v(I);const{request:B}=I,{handlerProtocol:H=""}=T.requestHandler.metadata||{};if(H.indexOf("h2")>=0&&!B.headers[":authority"])delete B.headers.host,B.headers[":authority"]="";else if(!B.headers.host){let K=B.hostname;B.port!=null&&(K+=`:${B.port}`),B.headers.host=K}return v(I)});return function(I){return b.apply(this,arguments)}}(),"hostHeaderMiddleware"),Ti={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ir=o(T=>({applyToStack:v=>{v.add($n(T),Ti)}}),"getHostHeaderPlugin"),er=o(()=>(T,v)=>function(){var b=Object(d.coroutine)(function*(I){try{var B;const K=yield T(I),{clientName:fe,commandName:ie,logger:Se,dynamoDbDocumentClientOptions:le={}}=v,{overrideInputFilterSensitiveLog:rt,overrideOutputFilterSensitiveLog:kt}=le,qt=rt??v.inputFilterSensitiveLog,Wt=kt??v.outputFilterSensitiveLog,{$metadata:Ut,...on}=K.output;return Se==null||(B=Se.info)===null||B===void 0||B.call(Se,{clientName:fe,commandName:ie,input:qt(I.input),output:Wt(on),metadata:Ut}),K}catch(K){var H;const{clientName:fe,commandName:ie,logger:Se,dynamoDbDocumentClientOptions:le={}}=v,{overrideInputFilterSensitiveLog:rt}=le,kt=rt??v.inputFilterSensitiveLog;throw Se==null||(H=Se.error)===null||H===void 0||H.call(Se,{clientName:fe,commandName:ie,input:kt(I.input),error:K,metadata:K.$metadata}),K}});return function(I){return b.apply(this,arguments)}}(),"loggerMiddleware"),cr={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},gi=o(T=>({applyToStack:v=>{v.add(er(),cr)}}),"getLoggerPlugin"),Yi="X-Amzn-Trace-Id",Xi="AWS_LAMBDA_FUNCTION_NAME",jt="_X_AMZN_TRACE_ID",pe=o(T=>v=>function(){var b=Object(d.coroutine)(function*(I){const{request:B}=I;if(!ye.isInstance(B)||T.runtime!=="node"||B.headers.hasOwnProperty(Yi))return v(I);const H=Object({NODE_ENV:"production"})[Xi],K=Object({NODE_ENV:"production"})[jt],fe=o(ie=>typeof ie=="string"&&ie.length>0,"nonEmptyString");return fe(H)&&fe(K)&&(B.headers[Yi]=K),v({...I,request:B})});return function(I){return b.apply(this,arguments)}}(),"recursionDetectionMiddleware"),Re={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Fe=o(T=>({applyToStack:v=>{v.add(pe(T),Re)}}),"getRecursionDetectionPlugin");var qe;(function(T){T.STANDARD="standard",T.ADAPTIVE="adaptive"})(qe||(qe={}));const vt=3,lt=qe.STANDARD,Nt=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],ln=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],fn=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],Bt=[500,502,503,504],Ci=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Si=o(T=>T.$retryable!==void 0,"isRetryableByTrait"),gr=o(T=>Nt.includes(T.name),"isClockSkewError"),tr=o(T=>{var v,b;return((v=T.$metadata)===null||v===void 0?void 0:v.httpStatusCode)===429||ln.includes(T.name)||((b=T.$retryable)===null||b===void 0?void 0:b.throttling)==!0},"isThrottlingError"),ai=o(T=>{var v;return fn.includes(T.name)||Ci.includes((T==null?void 0:T.code)||"")||Bt.includes(((v=T.$metadata)===null||v===void 0?void 0:v.httpStatusCode)||0)},"isTransientError"),wr=o(T=>{var v;if(((v=T.$metadata)===null||v===void 0?void 0:v.httpStatusCode)!==void 0){const b=T.$metadata.httpStatusCode;return 500<=b&&b<=599&&!ai(T)}return!1},"isServerError");class li{getCurrentTimeInSeconds(){return Date.now()/1e3}getSendToken(){var v=this;return Object(d.coroutine)(function*(){return v.acquireTokenBucket(1)})()}acquireTokenBucket(v){var b=this;return Object(d.coroutine)(function*(){if(b.enabled){if(b.refillTokenBucket(),v>b.currentCapacity){const I=(v-b.currentCapacity)/b.fillRate*1e3;yield new Promise(B=>setTimeout(B,I))}b.currentCapacity=b.currentCapacity-v}})()}refillTokenBucket(){const v=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=v;return}const b=(v-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+b),this.lastTimestamp=v}updateClientSendingRate(v){let b;if(this.updateMeasuredRate(),tr(v)){const B=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=B,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),b=this.cubicThrottle(B),this.enableTokenBucket()}else this.calculateTimeWindow(),b=this.cubicSuccess(this.getCurrentTimeInSeconds());const I=Math.min(b,2*this.measuredTxRate);this.updateTokenBucketRate(I)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(v){return this.getPrecise(v*this.beta)}cubicSuccess(v){return this.getPrecise(this.scaleConstant*Math.pow(v-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(v){this.refillTokenBucket(),this.fillRate=Math.max(v,this.minFillRate),this.maxCapacity=Math.max(v,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const v=this.getCurrentTimeInSeconds(),b=Math.floor(v*2)/2;if(this.requestCount++,b>this.lastTxRateBucket){const I=this.requestCount/(b-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(I*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=b}}getPrecise(v){return parseFloat(v.toFixed(8))}constructor(v){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0;var b;this.beta=(b=v==null?void 0:v.beta)!==null&&b!==void 0?b:.7;var I;this.minCapacity=(I=v==null?void 0:v.minCapacity)!==null&&I!==void 0?I:1;var B;this.minFillRate=(B=v==null?void 0:v.minFillRate)!==null&&B!==void 0?B:.5;var H;this.scaleConstant=(H=v==null?void 0:v.scaleConstant)!==null&&H!==void 0?H:.4;var K;this.smooth=(K=v==null?void 0:v.smooth)!==null&&K!==void 0?K:.8;const fe=this.getCurrentTimeInSeconds();this.lastThrottleTime=fe,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}}o(li,"DefaultRateLimiter_DefaultRateLimiter");const lr=100,Zn=20*1e3,Or=500,Qi=500,zr=5,_r=10,Zi=1,ro="amz-sdk-invocation-id",yt="amz-sdk-request",st=o(()=>{let T=lr;return{computeNextBackoffDelay:o(I=>Math.floor(Math.min(Zn,Math.random()*2**I*T)),"computeNextBackoffDelay"),setDelayBase:o(I=>{T=I},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),dn=o(T=>{let{retryDelay:v,retryCount:b,retryCost:I}=T;return{getRetryCount:o(()=>b,"getRetryCount"),getRetryDelay:o(()=>Math.min(Zn,v),"getRetryDelay"),getRetryCost:o(()=>I,"getRetryCost")}},"createDefaultRetryToken");class Kt{acquireInitialRetryToken(v){return Object(d.coroutine)(function*(){return dn({retryDelay:lr,retryCount:0})})()}refreshRetryTokenForRetry(v,b){var I=this;return Object(d.coroutine)(function*(){const B=yield I.getMaxAttempts();if(I.shouldRetry(v,b,B)){const H=b.errorType;I.retryBackoffStrategy.setDelayBase(H==="THROTTLING"?Or:lr);const K=I.retryBackoffStrategy.computeNextBackoffDelay(v.getRetryCount()),fe=b.retryAfterHint?Math.max(b.retryAfterHint.getTime()-Date.now()||0,K):K,ie=I.getCapacityCost(H);return I.capacity-=ie,dn({retryDelay:fe,retryCount:v.getRetryCount()+1,retryCost:ie})}throw new Error("No retry token available")})()}recordSuccess(v){var b;this.capacity=Math.max(Qi,this.capacity+((b=v.getRetryCost())!==null&&b!==void 0?b:Zi))}getCapacity(){return this.capacity}getMaxAttempts(){var v=this;return Object(d.coroutine)(function*(){try{return yield v.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${vt}`),vt}})()}shouldRetry(v,b,I){return v.getRetryCount()<I&&this.capacity>=this.getCapacityCost(b.errorType)&&this.isRetryableError(b.errorType)}getCapacityCost(v){return v==="TRANSIENT"?_r:zr}isRetryableError(v){return v==="THROTTLING"||v==="TRANSIENT"}constructor(v){this.maxAttempts=v,this.mode=qe.STANDARD,this.capacity=Qi,this.retryBackoffStrategy=st(),this.maxAttemptsProvider=typeof v=="function"?v:Object(d.coroutine)(function*(){return v})}}o(Kt,"StandardRetryStrategy_StandardRetryStrategy");class wn{acquireInitialRetryToken(v){var b=this;return Object(d.coroutine)(function*(){return yield b.rateLimiter.getSendToken(),b.standardRetryStrategy.acquireInitialRetryToken(v)})()}refreshRetryTokenForRetry(v,b){var I=this;return Object(d.coroutine)(function*(){return I.rateLimiter.updateClientSendingRate(b),I.standardRetryStrategy.refreshRetryTokenForRetry(v,b)})()}recordSuccess(v){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(v)}constructor(v,b){this.maxAttemptsProvider=v,this.mode=qe.ADAPTIVE;const{rateLimiter:I}=b??{};this.rateLimiter=I??new li,this.standardRetryStrategy=new Kt(v)}}o(wn,"AdaptiveRetryStrategy_AdaptiveRetryStrategy");class Jn extends Kt{refreshRetryTokenForRetry(v,b){var I=this,B=o(()=>super.refreshRetryTokenForRetry,"_superprop_get_refreshRetryTokenForRetry");return Object(d.coroutine)(function*(){const H=yield B().call(I,v,b);return H.getRetryDelay=()=>I.computeNextBackoffDelay(H.getRetryCount()),H})()}constructor(v,b=lr){super(typeof v=="function"?v:Object(d.coroutine)(function*(){return v})),typeof b=="number"?this.computeNextBackoffDelay=()=>b:this.computeNextBackoffDelay=b}}o(Jn,"ConfiguredRetryStrategy_ConfiguredRetryStrategy");var z,ue=new Uint8Array(16);function Me(){if(!z&&(z=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!z))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return z(ue)}o(Me,"rng");var Le=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ye(T){return typeof T=="string"&&Le.test(T)}o(Ye,"validate");for(var St=Ye,Ct=[],Tt=0;Tt<256;++Tt)Ct.push((Tt+256).toString(16).substr(1));function Ke(T){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=(Ct[T[v+0]]+Ct[T[v+1]]+Ct[T[v+2]]+Ct[T[v+3]]+"-"+Ct[T[v+4]]+Ct[T[v+5]]+"-"+Ct[T[v+6]]+Ct[T[v+7]]+"-"+Ct[T[v+8]]+Ct[T[v+9]]+"-"+Ct[T[v+10]]+Ct[T[v+11]]+Ct[T[v+12]]+Ct[T[v+13]]+Ct[T[v+14]]+Ct[T[v+15]]).toLowerCase();if(!St(b))throw TypeError("Stringified UUID is invalid");return b}o(Ke,"stringify");var Pt=Ke;function Dt(T,v,b){T=T||{};var I=T.random||(T.rng||Me)();if(I[6]=I[6]&15|64,I[8]=I[8]&63|128,v){b=b||0;for(var B=0;B<16;++B)v[b+B]=I[B];return v}return Pt(I)}o(Dt,"v4");var Rn=Dt;const pn=o((T,v)=>{const b=T;var I;const B=(I=v==null?void 0:v.noRetryIncrement)!==null&&I!==void 0?I:Zi;var H;const K=(H=v==null?void 0:v.retryCost)!==null&&H!==void 0?H:zr;var fe;const ie=(fe=v==null?void 0:v.timeoutRetryCost)!==null&&fe!==void 0?fe:_r;let Se=T;const le=o(Wt=>Wt.name==="TimeoutError"?ie:K,"getCapacityAmount"),rt=o(Wt=>le(Wt)<=Se,"hasRetryTokens");return Object.freeze({hasRetryTokens:rt,retrieveRetryTokens:o(Wt=>{if(!rt(Wt))throw new Error("No retry token available");const Ut=le(Wt);return Se-=Ut,Ut},"retrieveRetryTokens"),releaseRetryTokens:o(Wt=>{Se+=Wt??B,Se=Math.min(Se,b)},"releaseRetryTokens")})},"getDefaultRetryQuota"),zn=o((T,v)=>Math.floor(Math.min(Zn,Math.random()*2**v*T)),"defaultDelayDecider"),di=o(T=>T?Si(T)||gr(T)||tr(T)||ai(T):!1,"defaultRetryDecider"),Ri=o(T=>T instanceof Error?T:T instanceof Object?Object.assign(new Error,T):typeof T=="string"?new Error(T):new Error(`AWS SDK error wrapper for ${T}`),"asSdkError");class Pi{shouldRetry(v,b,I){return b<I&&this.retryDecider(v)&&this.retryQuota.hasRetryTokens(v)}getMaxAttempts(){var v=this;return Object(d.coroutine)(function*(){let b;try{b=yield v.maxAttemptsProvider()}catch{b=vt}return b})()}retry(v,b,I){var B=this;return Object(d.coroutine)(function*(){let H,K=0,fe=0;const ie=yield B.getMaxAttempts(),{request:Se}=b;for(ye.isInstance(Se)&&(Se.headers[ro]=Rn());;)try{ye.isInstance(Se)&&(Se.headers[yt]=`attempt=${K+1}; max=${ie}`),I!=null&&I.beforeRequest&&(yield I.beforeRequest());const{response:le,output:rt}=yield v(b);return I!=null&&I.afterRequest&&I.afterRequest(le),B.retryQuota.releaseRetryTokens(H),rt.$metadata.attempts=K+1,rt.$metadata.totalRetryDelay=fe,{response:le,output:rt}}catch(le){const rt=Ri(le);if(K++,B.shouldRetry(rt,K,ie)){H=B.retryQuota.retrieveRetryTokens(rt);const kt=B.delayDecider(tr(rt)?Or:lr,K),qt=fi(rt.$response),Wt=Math.max(qt||0,kt);fe+=Wt,yield new Promise(Ut=>setTimeout(Ut,Wt));continue}throw rt.$metadata||(rt.$metadata={}),rt.$metadata.attempts=K,rt.$metadata.totalRetryDelay=fe,rt}})()}constructor(v,b){this.maxAttemptsProvider=v,this.mode=qe.STANDARD;var I;this.retryDecider=(I=b==null?void 0:b.retryDecider)!==null&&I!==void 0?I:di;var B;this.delayDecider=(B=b==null?void 0:b.delayDecider)!==null&&B!==void 0?B:zn;var H;this.retryQuota=(H=b==null?void 0:b.retryQuota)!==null&&H!==void 0?H:pn(Qi)}}o(Pi,"dist_es_StandardRetryStrategy_StandardRetryStrategy");const fi=o(T=>{if(!pt.isInstance(T))return;const v=Object.keys(T.headers).find(H=>H.toLowerCase()==="retry-after");if(!v)return;const b=T.headers[v],I=Number(b);return Number.isNaN(I)?new Date(b).getTime()-Date.now():I*1e3},"getDelayFromRetryAfterHeader");class hi extends Pi{retry(v,b){var I=this,B=o(()=>super.retry,"_superprop_get_retry");return Object(d.coroutine)(function*(){return B().call(I,v,b,{beforeRequest:Object(d.coroutine)(function*(){return I.rateLimiter.getSendToken()}),afterRequest:H=>{I.rateLimiter.updateClientSendingRate(H)}})})()}constructor(v,b){const{rateLimiter:I,...B}=b??{};super(v,B),this.rateLimiter=I??new li,this.mode=qe.ADAPTIVE}}o(hi,"dist_es_AdaptiveRetryStrategy_AdaptiveRetryStrategy");const Cn="AWS_MAX_ATTEMPTS",zi="max_attempts",Vi={environmentVariableSelector:T=>{const v=T[Cn];if(!v)return;const b=parseInt(v);if(Number.isNaN(b))throw new Error(`Environment variable ${Cn} mast be a number, got "${v}"`);return b},configFileSelector:T=>{const v=T[zi];if(!v)return;const b=parseInt(v);if(Number.isNaN(b))throw new Error(`Shared config file entry ${zi} mast be a number, got "${v}"`);return b},default:vt},Ui=o(T=>{const{retryStrategy:v}=T;var b;const I=p((b=T.maxAttempts)!==null&&b!==void 0?b:vt);return{...T,maxAttempts:I,retryStrategy:Object(d.coroutine)(function*(){return v||((yield p(T.retryMode)())===qe.ADAPTIVE?new wn(I):new Kt(I))})}},"resolveRetryConfig"),Rr="AWS_RETRY_MODE",Ii="retry_mode",Sr={environmentVariableSelector:T=>T[Rr],configFileSelector:T=>T[Ii],default:lt},Xn=o(()=>T=>function(){var v=Object(d.coroutine)(function*(b){const{request:I}=b;return ye.isInstance(I)&&(delete I.headers[ro],delete I.headers[yt]),T(b)});return function(b){return v.apply(this,arguments)}}(),"omitRetryHeadersMiddleware"),vi={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},pi=o(T=>({applyToStack:v=>{v.addRelativeTo(Xn(),vi)}}),"getOmitRetryHeadersPlugin"),_i=o(T=>(v,b)=>function(){var I=Object(d.coroutine)(function*(B){let H=yield T.retryStrategy();const K=yield T.maxAttempts();if(Yn(H)){H=H;let fe=yield H.acquireInitialRetryToken(b.partition_id),ie=new Error,Se=0,le=0;const{request:rt}=B;for(ye.isInstance(rt)&&(rt.headers[ro]=Rn());;)try{ye.isInstance(rt)&&(rt.headers[yt]=`attempt=${Se+1}; max=${K}`);const{response:kt,output:qt}=yield v(B);return H.recordSuccess(fe),qt.$metadata.attempts=Se+1,qt.$metadata.totalRetryDelay=le,{response:kt,output:qt}}catch(kt){const qt=Ht(kt);ie=Ri(kt);try{fe=yield H.refreshRetryTokenForRetry(fe,qt)}catch{throw ie.$metadata||(ie.$metadata={}),ie.$metadata.attempts=Se+1,ie.$metadata.totalRetryDelay=le,ie}Se=fe.getRetryCount();const Wt=fe.getRetryDelay();le+=Wt,yield new Promise(Ut=>setTimeout(Ut,Wt))}}else return H=H,H!=null&&H.mode&&(b.userAgent=[...b.userAgent||[],["cfg/retry-mode",H.mode]]),H.retry(v,B)});return function(B){return I.apply(this,arguments)}}(),"retryMiddleware"),Yn=o(T=>typeof T.acquireInitialRetryToken<"u"&&typeof T.refreshRetryTokenForRetry<"u"&&typeof T.recordSuccess<"u","isRetryStrategyV2"),Ht=o(T=>{const v={errorType:nr(T)},b=dr(T.$response);return b&&(v.retryAfterHint=b),v},"getRetryErrorInfo"),nr=o(T=>tr(T)?"THROTTLING":ai(T)?"TRANSIENT":wr(T)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),Fs={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},qr=o(T=>({applyToStack:v=>{v.add(_i(T),Fs)}}),"getRetryPlugin"),dr=o(T=>{if(!pt.isInstance(T))return;const v=Object.keys(T.headers).find(H=>H.toLowerCase()==="retry-after");if(!v)return;const b=T.headers[v],I=Number(b);return Number.isNaN(I)?new Date(b):new Date(I*1e3)},"getRetryAfterHint");class eo extends Error{static from(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Object.assign(new this(v.message,b),v)}constructor(v,b=!0){super(v),this.tryNextLink=b,this.name="ProviderError",Object.setPrototypeOf(this,eo.prototype)}}o(eo,"ProviderError");class to extends eo{constructor(v,b=!0){super(v,b),this.tryNextLink=b,this.name="CredentialsProviderError",Object.setPrototypeOf(this,to.prototype)}}o(to,"CredentialsProviderError_CredentialsProviderError");class ur extends eo{constructor(v,b=!0){super(v,b),this.tryNextLink=b,this.name="TokenProviderError",Object.setPrototypeOf(this,ur.prototype)}}o(ur,"TokenProviderError_TokenProviderError");function Vs(){for(var T=arguments.length,v=new Array(T),b=0;b<T;b++)v[b]=arguments[b];return()=>{let I=Promise.reject(new eo("No providers in chain"));for(const B of v)I=I.catch(H=>{if(H!=null&&H.tryNextLink)return B();throw H});return I}}o(Vs,"chain");const Us=o(T=>()=>Promise.resolve(T),"fromStatic"),Li=o((T,v,b)=>{let I,B,H,K=!1;const fe=function(){var ie=Object(d.coroutine)(function*(){B||(B=T());try{I=yield B,H=!0,K=!1}finally{B=void 0}return I});return o(function(){return ie.apply(this,arguments)},"coalesceProvider")}();return v===void 0?function(){var ie=Object(d.coroutine)(function*(Se){return(!H||Se!=null&&Se.forceRefresh)&&(I=yield fe()),I});return function(Se){return ie.apply(this,arguments)}}():function(){var ie=Object(d.coroutine)(function*(Se){return(!H||Se!=null&&Se.forceRefresh)&&(I=yield fe()),K?I:b&&!b(I)?(K=!0,I):(v(I)&&(yield fe()),I)});return function(Se){return ie.apply(this,arguments)}}()},"memoize"),kr={},xo={};for(let T=0;T<256;T++){let v=T.toString(16).toLowerCase();v.length===1&&(v=`0${v}`),kr[T]=v,xo[v]=T}function Hs(T){if(T.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const v=new Uint8Array(T.length/2);for(let b=0;b<T.length;b+=2){const I=T.slice(b,b+2).toLowerCase();if(I in xo)v[b/2]=xo[I];else throw new Error(`Cannot decode unrecognized sequence ${I} as hexadecimal`)}return v}o(Hs,"fromHex");function Jr(T){let v="";for(let b=0;b<T.byteLength;b++)v+=kr[T[b]];return v}o(Jr,"toHex");const bo=o(T=>new TextEncoder().encode(T),"fromUtf8"),uo=o(T=>typeof T=="string"?bo(T):ArrayBuffer.isView(T)?new Uint8Array(T.buffer,T.byteOffset,T.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(T),"toUint8Array"),Bo=o(T=>new TextDecoder("utf-8").decode(T),"toUtf8"),ys="X-Amz-Algorithm",bs="X-Amz-Credential",Zo="X-Amz-Date",Cs="X-Amz-SignedHeaders",Es="X-Amz-Expires",fo="X-Amz-Signature",no="X-Amz-Security-Token",oo="X-Amz-Region-Set",ho="authorization",Co=Zo.toLowerCase(),Fo=[ho,Co,"date"],qo=fo.toLowerCase(),vr="x-amz-content-sha256",es=no.toLowerCase(),Ts="host",ts={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Yr=/^proxy-/,Vo=/^sec-/,Dr=[/^proxy-/i,/^sec-/i],po="AWS4-HMAC-SHA256",mo="AWS4-ECDSA-P256-SHA256",Uo="AWS4-HMAC-SHA256-PAYLOAD",so="UNSIGNED-PAYLOAD",Wr=50,To="aws4_request",Io=60*60*24*7,jr={},go=[],Ho=o((T,v,b)=>`${T}/${v}/${b}/${To}`,"createScope"),Is=function(){var T=Object(d.coroutine)(function*(v,b,I,B,H){const K=yield Lr(v,b.secretAccessKey,b.accessKeyId),fe=`${I}:${B}:${H}:${Jr(K)}:${b.sessionToken}`;if(fe in jr)return jr[fe];for(go.push(fe);go.length>Wr;)delete jr[go.shift()];let ie=`AWS4${b.secretAccessKey}`;for(const Se of[I,B,H,To])ie=yield Lr(v,ie,Se);return jr[fe]=ie});return o(function(b,I,B,H,K){return T.apply(this,arguments)},"getSigningKey")}(),zs=o(()=>{go.length=0,Object.keys(jr).forEach(T=>{delete jr[T]})},"clearCredentialCache"),Lr=o((T,v,b)=>{const I=new T(v);return I.update(uo(b)),I.digest()},"hmac"),ns=o((T,v,b)=>{let{headers:I}=T;const B={};for(const H of Object.keys(I).sort()){if(I[H]==null)continue;const K=H.toLowerCase();(K in ts||v!=null&&v.has(K)||Yr.test(K)||Vo.test(K))&&(!b||b&&!b.has(K))||(B[K]=I[H].trim().replace(/\s+/g," "))}return B},"getCanonicalHeaders"),Gr=o(T=>encodeURIComponent(T).replace(/[!'()*]/g,Ws),"escapeUri"),Ws=o(T=>`%${T.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),js=o(T=>T.split("/").map(Gr).join("/"),"escapeUriPath"),Xr=o(T=>{let{query:v={}}=T;const b=[],I={};for(const B of Object.keys(v).sort()){if(B.toLowerCase()===qo)continue;b.push(B);const H=v[B];typeof H=="string"?I[B]=`${Gr(B)}=${Gr(H)}`:Array.isArray(H)&&(I[B]=H.slice(0).sort().reduce((K,fe)=>K.concat([`${Gr(B)}=${Gr(fe)}`]),[]).join("&"))}return b.map(B=>I[B]).filter(B=>B).join("&")},"getCanonicalQuery"),wo=o(T=>typeof ArrayBuffer=="function"&&T instanceof ArrayBuffer||Object.prototype.toString.call(T)==="[object ArrayBuffer]","isArrayBuffer"),is=function(){var T=Object(d.coroutine)(function*(v,b){let{headers:I,body:B}=v;for(const H of Object.keys(I))if(H.toLowerCase()===vr)return I[H];if(B==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof B=="string"||ArrayBuffer.isView(B)||wo(B)){const H=new b;return H.update(uo(B)),Jr(yield H.digest())}return so});return o(function(b,I){return T.apply(this,arguments)},"getPayloadHash")}(),zo=o((T,v)=>{T=T.toLowerCase();for(const b of Object.keys(v))if(T===b.toLowerCase())return!0;return!1},"hasHeader"),ws=o((T,v)=>{T=T.toLowerCase();for(const b of Object.keys(v))if(T===b.toLowerCase())return v[b]},"getHeaderValue"),ir=o((T,v)=>{T=T.toLowerCase();for(const b of Object.keys(v))T===b.toLowerCase()&&delete v[b]},"deleteHeader"),Wo=o(T=>{let{headers:v,query:b,...I}=T;return{...I,headers:{...v},query:b?Oo(b):void 0}},"cloneRequest"),Oo=o(T=>Object.keys(T).reduce((v,b)=>{const I=T[b];return{...v,[b]:Array.isArray(I)?[...I]:I}},{}),"cloneRequest_cloneQuery"),rs=o(function(T){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{headers:b,query:I={}}=typeof T.clone=="function"?T.clone():Wo(T);for(const H of Object.keys(b)){var B;const K=H.toLowerCase();K.slice(0,6)==="x-amz-"&&!(!((B=v.unhoistableHeaders)===null||B===void 0)&&B.has(K))&&(I[H]=b[H],delete b[H])}return{...T,headers:b,query:I}},"moveHeadersToQuery"),Os=o(T=>{T=typeof T.clone=="function"?T.clone():Wo(T);for(const v of Object.keys(T.headers))Fo.indexOf(v.toLowerCase())>-1&&delete T.headers[v];return T},"prepareRequest"),Qr=o(T=>Gs(T).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),Gs=o(T=>typeof T=="number"?new Date(T*1e3):typeof T=="string"?Number(T)?new Date(Number(T)*1e3):new Date(T):T,"toDate");class jo{presign(v){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var I=this;return Object(d.coroutine)(function*(){const{signingDate:B=new Date,expiresIn:H=3600,unsignableHeaders:K,unhoistableHeaders:fe,signableHeaders:ie,signingRegion:Se,signingService:le}=b,rt=yield I.credentialProvider();I.validateResolvedCredentials(rt);const kt=Se??(yield I.regionProvider()),{longDate:qt,shortDate:Wt}=fr(B);if(H>Io)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const Ut=Ho(Wt,kt,le??I.service),on=rs(Os(v),{unhoistableHeaders:fe});rt.sessionToken&&(on.query[no]=rt.sessionToken),on.query[ys]=po,on.query[bs]=`${rt.accessKeyId}/${Ut}`,on.query[Zo]=qt,on.query[Es]=H.toString(10);const ar=ns(on,K,ie);return on.query[Cs]=Go(ar),on.query[fo]=yield I.getSignature(qt,Ut,I.getSigningKey(rt,kt,Wt,le),I.createCanonicalRequest(on,ar,yield is(v,I.sha256))),on})()}sign(v,b){var I=this;return Object(d.coroutine)(function*(){return typeof v=="string"?I.signString(v,b):v.headers&&v.payload?I.signEvent(v,b):I.signRequest(v,b)})()}signEvent(v,b){let{headers:I,payload:B}=v,{signingDate:H=new Date,priorSignature:K,signingRegion:fe,signingService:ie}=b;var Se=this;return Object(d.coroutine)(function*(){const le=fe??(yield Se.regionProvider()),{shortDate:rt,longDate:kt}=fr(H),qt=Ho(rt,le,ie??Se.service),Wt=yield is({headers:{},body:B},Se.sha256),Ut=new Se.sha256;Ut.update(I);const on=Jr(yield Ut.digest()),ar=[Uo,kt,qt,K,on,Wt].join(`
`);return Se.signString(ar,{signingDate:H,signingRegion:le,signingService:ie})})()}signString(v){let{signingDate:b=new Date,signingRegion:I,signingService:B}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var H=this;return Object(d.coroutine)(function*(){const K=yield H.credentialProvider();H.validateResolvedCredentials(K);const fe=I??(yield H.regionProvider()),{shortDate:ie}=fr(b),Se=new H.sha256(yield H.getSigningKey(K,fe,ie,B));return Se.update(uo(v)),Jr(yield Se.digest())})()}signRequest(v){let{signingDate:b=new Date,signableHeaders:I,unsignableHeaders:B,signingRegion:H,signingService:K}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var fe=this;return Object(d.coroutine)(function*(){const ie=yield fe.credentialProvider();fe.validateResolvedCredentials(ie);const Se=H??(yield fe.regionProvider()),le=Os(v),{longDate:rt,shortDate:kt}=fr(b),qt=Ho(kt,Se,K??fe.service);le.headers[Co]=rt,ie.sessionToken&&(le.headers[es]=ie.sessionToken);const Wt=yield is(le,fe.sha256);!zo(vr,le.headers)&&fe.applyChecksum&&(le.headers[vr]=Wt);const Ut=ns(le,B,I),on=yield fe.getSignature(rt,qt,fe.getSigningKey(ie,Se,kt,K),fe.createCanonicalRequest(le,Ut,Wt));return le.headers[ho]=`${po} Credential=${ie.accessKeyId}/${qt}, SignedHeaders=${Go(Ut)}, Signature=${on}`,le})()}createCanonicalRequest(v,b,I){const B=Object.keys(b).sort();return`${v.method}
${this.getCanonicalPath(v)}
${Xr(v)}
${B.map(H=>`${H}:${b[H]}`).join(`
`)}

${B.join(";")}
${I}`}createStringToSign(v,b,I){var B=this;return Object(d.coroutine)(function*(){const H=new B.sha256;H.update(uo(I));const K=yield H.digest();return`${po}
${v}
${b}
${Jr(K)}`})()}getCanonicalPath(v){let{path:b}=v;if(this.uriEscapePath){const I=[];for(const K of b.split("/"))(K==null?void 0:K.length)!==0&&K!=="."&&(K===".."?I.pop():I.push(K));const B=`${b!=null&&b.startsWith("/")?"/":""}${I.join("/")}${I.length>0&&(b!=null&&b.endsWith("/"))?"/":""}`;return encodeURIComponent(B).replace(/%2F/g,"/")}return b}getSignature(v,b,I,B){var H=this;return Object(d.coroutine)(function*(){const K=yield H.createStringToSign(v,b,B),fe=new H.sha256(yield I);return fe.update(uo(K)),Jr(yield fe.digest())})()}getSigningKey(v,b,I,B){return Is(this.sha256,v,I,b,B||this.service)}validateResolvedCredentials(v){if(typeof v!="object"||typeof v.accessKeyId!="string"||typeof v.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}constructor({applyChecksum:v,credentials:b,region:I,service:B,sha256:H,uriEscapePath:K=!0}){this.service=B,this.sha256=H,this.uriEscapePath=K,this.applyChecksum=typeof v=="boolean"?v:!0,this.regionProvider=p(I),this.credentialProvider=p(b)}}o(jo,"SignatureV4_SignatureV4");const fr=o(T=>{const v=Qr(T).replace(/[\-:]/g,"");return{longDate:v,shortDate:v.slice(0,8)}},"formatDate"),Go=o(T=>Object.keys(T).sort().join(";"),"getCanonicalHeaderList"),os=3e5,ss=o(T=>{const v=T.credentials?Ro(T.credentials):T.credentialDefaultProvider(T),{signingEscapePath:b=!0,systemClockOffset:I=T.systemClockOffset||0,sha256:B}=T;let H;return T.signer?H=p(T.signer):T.regionInfoProvider?H=o(()=>p(T.region)().then(function(){var K=Object(d.coroutine)(function*(fe){return[(yield T.regionInfoProvider(fe,{useFipsEndpoint:yield T.useFipsEndpoint(),useDualstackEndpoint:yield T.useDualstackEndpoint()}))||{},fe]});return function(fe){return K.apply(this,arguments)}}()).then(K=>{let[fe,ie]=K;const{signingRegion:Se,signingService:le}=fe;T.signingRegion=T.signingRegion||Se||ie,T.signingName=T.signingName||le||T.serviceId;const rt={...T,credentials:v,region:T.signingRegion,service:T.signingName,sha256:B,uriEscapePath:b},kt=T.signerConstructor||jo;return new kt(rt)}),"signer"):H=function(){var K=Object(d.coroutine)(function*(fe){fe=Object.assign({},{name:"sigv4",signingName:T.signingName||T.defaultSigningName,signingRegion:yield p(T.region)(),properties:{}},fe);const ie=fe.signingRegion,Se=fe.signingName;T.signingRegion=T.signingRegion||ie,T.signingName=T.signingName||Se||T.serviceId;const le={...T,credentials:v,region:T.signingRegion,service:T.signingName,sha256:B,uriEscapePath:b},rt=T.signerConstructor||jo;return new rt(le)});return function(fe){return K.apply(this,arguments)}}(),{...T,systemClockOffset:I,signingEscapePath:b,credentials:v,signer:H}},"resolveAwsAuthConfig"),$o=o(T=>{const v=T.credentials?Ro(T.credentials):T.credentialDefaultProvider(T),{signingEscapePath:b=!0,systemClockOffset:I=T.systemClockOffset||0,sha256:B}=T;let H;return T.signer?H=p(T.signer):H=p(new jo({credentials:v,region:T.region,service:T.signingName,sha256:B,uriEscapePath:b})),{...T,systemClockOffset:I,signingEscapePath:b,credentials:v,signer:H}},"resolveSigV4AuthConfig"),Ro=o(T=>typeof T=="function"?Li(T,v=>v.expiration!==void 0&&v.expiration.getTime()-Date.now()<os,v=>v.expiration!==void 0):p(T),"normalizeCredentialProvider"),as=o(T=>new Date(Date.now()+T),"getSkewCorrectedDate"),ls=o((T,v)=>Math.abs(as(v).getTime()-T)>=3e5,"isClockSkewed"),ds=o((T,v)=>{const b=Date.parse(T);return ls(b,v)?b-Date.now():v},"getUpdatedSystemClockOffset"),Zr=o(T=>(v,b)=>function(){var I=Object(d.coroutine)(function*(B){var H,K,fe,ie;if(!ye.isInstance(B.request))return v(B);const Se=(H=b.endpointV2)===null||H===void 0||(K=H.properties)===null||K===void 0||(fe=K.authSchemes)===null||fe===void 0?void 0:fe[0],le=(Se==null?void 0:Se.name)==="sigv4a"?Se==null||(ie=Se.signingRegionSet)===null||ie===void 0?void 0:ie.join(","):void 0,rt=yield T.signer(Se),kt=yield v({...B,request:yield rt.sign(B.request,{signingDate:as(T.systemClockOffset),signingRegion:le||b.signing_region,signingService:b.signing_service})}).catch(Wt=>{var Ut;const on=(Ut=Wt.ServerTime)!==null&&Ut!==void 0?Ut:Mr(Wt.$response);throw on&&(T.systemClockOffset=ds(on,T.systemClockOffset)),Wt}),qt=Mr(kt.response);return qt&&(T.systemClockOffset=ds(qt,T.systemClockOffset)),kt});return function(B){return I.apply(this,arguments)}}(),"awsAuthMiddleware");var ao;const Mr=o(T=>{var v,b;return pt.isInstance(T)?(ao=(v=T.headers)===null||v===void 0?void 0:v.date)!==null&&ao!==void 0?ao:(b=T.headers)===null||b===void 0?void 0:b.Date:void 0},"getDateHeader"),cs={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},lo=o(T=>({applyToStack:v=>{v.addRelativeTo(Zr(T),cs)}}),"getAwsAuthPlugin"),$r=lo;function Mo(T){return{...T,customUserAgent:typeof T.customUserAgent=="string"?[[T.customUserAgent]]:T.customUserAgent}}o(Mo,"resolveUserAgentConfig");var Rs=f("syoQ");let Ko=Rs,$i="";const Ms=o(T=>{const{partitions:v}=Ko;for(const I of v){const{regions:B,outputs:H}=I;for(const[K,fe]of Object.entries(B))if(K===T)return{...H,...fe}}for(const I of v){const{regionRegex:B,outputs:H}=I;if(new RegExp(B).test(T))return{...H}}const b=v.find(I=>I.id==="aws");if(!b)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...b.outputs}},"partition_partition"),Po=o(function(T){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";Ko=T,$i=v},"setPartitionInfo"),Ni=o(()=>{Po(Rs,"")},"useDefaultPartitionInfo"),$s=o(()=>$i,"getUserAgentPrefix"),Jo="endpoints";function So(T){return typeof T!="object"||T==null?T:"ref"in T?`$${So(T.ref)}`:"fn"in T?`${T.fn}(${(T.argv||[]).map(So).join(", ")})`:JSON.stringify(T,null,2)}o(So,"toDebugString");class hr extends Error{constructor(v){super(v),this.name="EndpointError"}}o(hr,"EndpointError");const Ks=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),us=o(T=>Ks.test(T)||T.startsWith("[")&&T.endsWith("]"),"isIpAddress"),Yo=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),fs=o(function(T){if(!(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1))return Yo.test(T);const b=T.split(".");for(const I of b)if(!fs(I))return!1;return!0},"isValidHostLabel"),Js=o(function(T){if(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1){for(const b of T.split("."))if(!Js(b))return!1;return!0}return!(!fs(T)||T.length<3||T.length>63||T!==T.toLowerCase()||us(T))},"isVirtualHostableS3Bucket"),Ys=o(T=>{const v=T.split(":");if(v.length<6)return null;const[b,I,B,H,K,...fe]=v;return b!=="arn"||I===""||B===""||fe[0]===""?null:{partition:I,service:B,region:H,accountId:K,resourceId:fe[0].includes("/")?fe[0].split("/"):fe}},"parseArn"),Xs=o((T,v)=>T===v,"booleanEquals"),Qs=o(T=>{const v=T.split("."),b=[];for(const I of v){const B=I.indexOf("[");if(B!==-1){if(I.indexOf("]")!==I.length-1)throw new hr(`Path: '${T}' does not end with ']'`);const H=I.slice(B+1,-1);if(Number.isNaN(parseInt(H)))throw new hr(`Invalid array index: '${H}' in path: '${T}'`);B!==0&&b.push(I.slice(0,B)),b.push(H)}else b.push(I)}return b},"getAttrPathList"),Ps=o((T,v)=>Qs(v).reduce((b,I)=>{if(typeof b!="object")throw new hr(`Index '${I}' in '${v}' not found in '${JSON.stringify(T)}'`);return Array.isArray(b)?b[parseInt(I)]:b[I]},T),"getAttr"),la=o(T=>T!=null,"isSet"),Xo=o(T=>!T,"not");var rr;(function(T){T.HEADER="header",T.QUERY="query"})(rr||(rr={}));var Ao;(function(T){T.AAAA="AAAA",T.A="A"})(Ao||(Ao={}));var hs;(function(T){T.HTTP="http",T.HTTPS="https"})(hs||(hs={}));var ne;(function(T){T.HTTP_0_9="http/0.9",T.HTTP_1_0="http/1.0",T.TDS_8_0="tds/8.0"})(ne||(ne={}));const te={[hs.HTTP]:80,[hs.HTTPS]:443},Q=o(T=>{const v=(()=>{try{if(T instanceof URL)return T;if(typeof T=="object"&&"hostname"in T){const{hostname:kt,port:qt,protocol:Wt="",path:Ut="",query:on={}}=T,ar=new URL(`${Wt}//${kt}${qt?`:${qt}`:""}${Ut}`);return ar.search=Object.entries(on).map(Ds=>{let[al,Zd]=Ds;return`${al}=${Zd}`}).join("&"),ar}return new URL(T)}catch{return null}})();if(!v)return console.error(`Unable to parse ${JSON.stringify(T)} as a whatwg URL.`),null;const b=v.href,{host:I,hostname:B,pathname:H,protocol:K,search:fe}=v;if(fe)return null;const ie=K.slice(0,-1);if(!Object.values(hs).includes(ie))return null;const Se=us(B),le=b.includes(`${I}:${te[ie]}`)||typeof T=="string"&&T.includes(`${I}:${te[ie]}`),rt=`${I}${le?`:${te[ie]}`:""}`;return{scheme:ie,authority:rt,path:H,normalizedPath:H.endsWith("/")?H:`${H}/`,isIp:Se}},"parseURL"),A=o((T,v)=>T===v,"stringEquals"),X=o((T,v,b,I)=>v>=b||T.length<b?null:I?T.substring(T.length-b,T.length-v):T.substring(v,b),"substring"),se=o(T=>encodeURIComponent(T).replace(/[!*'()]/g,v=>`%${v.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),oe=o((T,v)=>{const b=[],I={...v.endpointParams,...v.referenceRecord};let B=0;for(;B<T.length;){const H=T.indexOf("{",B);if(H===-1){b.push(T.slice(B));break}b.push(T.slice(B,H));const K=T.indexOf("}",H);if(K===-1){b.push(T.slice(H));break}T[H+1]==="{"&&T[K+1]==="}"&&(b.push(T.slice(H+1,K)),B=K+2);const fe=T.substring(H+1,K);if(fe.includes("#")){const[ie,Se]=fe.split("#");b.push(Ps(I[ie],Se))}else b.push(I[fe]);B=K+1}return b.join("")},"evaluateTemplate"),ve=o((T,v)=>{let{ref:b}=T;return{...v.endpointParams,...v.referenceRecord}[b]},"getReferenceValue"),Ie=o((T,v,b)=>{if(typeof T=="string")return oe(T,b);if(T.fn)return Ae(T,b);if(T.ref)return ve(T,b);throw new hr(`'${v}': ${String(T)} is not a string, function or reference.`)},"evaluateExpression"),Ae=o((T,v)=>{let{fn:b,argv:I}=T;const B=I.map(H=>["boolean","number"].includes(typeof H)?H:Ie(H,"arg",v));return b.split(".").reduce((H,K)=>H[K],h)(...B)},"callFunction"),ke=o((T,v)=>{let{assign:b,...I}=T;var B,H;if(b&&b in v.referenceRecord)throw new hr(`'${b}' is already defined in Reference Record.`);const K=Ae(I,v);return(B=v.logger)===null||B===void 0||(H=B.debug)===null||H===void 0||H.call(B,Jo,`evaluateCondition: ${So(I)} = ${So(K)}`),{result:K===""?!0:!!K,...b!=null&&{toAssign:{name:b,value:K}}}},"evaluateCondition"),De=o(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;const b={};for(const H of T){const{result:K,toAssign:fe}=ke(H,{...v,referenceRecord:{...v.referenceRecord,...b}});if(!K)return{result:K};if(fe){var I,B;b[fe.name]=fe.value,(I=v.logger)===null||I===void 0||(B=I.debug)===null||B===void 0||B.call(I,Jo,`assign: ${fe.name} := ${So(fe.value)}`)}}return{result:!0,referenceRecord:b}},"evaluateConditions"),Ge=o((T,v)=>Object.entries(T).reduce((b,I)=>{let[B,H]=I;return{...b,[B]:H.map(K=>{const fe=Ie(K,"Header value entry",v);if(typeof fe!="string")throw new hr(`Header '${B}' value '${fe}' is not a string`);return fe})}},{}),"getEndpointHeaders"),Xe=o((T,v)=>{if(Array.isArray(T))return T.map(b=>Xe(b,v));switch(typeof T){case"string":return oe(T,v);case"object":if(T===null)throw new hr(`Unexpected endpoint property: ${T}`);return ut(T,v);case"boolean":return T;default:throw new hr(`Unexpected endpoint property type: ${typeof T}`)}},"getEndpointProperty"),ut=o((T,v)=>Object.entries(T).reduce((b,I)=>{let[B,H]=I;return{...b,[B]:Xe(H,v)}},{}),"getEndpointProperties"),Ze=o((T,v)=>{const b=Ie(T,"Endpoint URL",v);if(typeof b=="string")try{return new URL(b)}catch(I){throw console.error(`Failed to construct URL with ${b}`,I),I}throw new hr(`Endpoint URL must be a string, got ${typeof b}`)},"getEndpointUrl"),Zt=o((T,v)=>{var b,I;const{conditions:B,endpoint:H}=T,{result:K,referenceRecord:fe}=De(B,v);if(!K)return;const ie={...v,referenceRecord:{...v.referenceRecord,...fe}},{url:Se,properties:le,headers:rt}=H;return(b=v.logger)===null||b===void 0||(I=b.debug)===null||I===void 0||I.call(b,Jo,`Resolving endpoint from template: ${So(H)}`),{...rt!=null&&{headers:Ge(rt,ie)},...le!=null&&{properties:ut(le,ie)},url:Ze(Se,ie)}},"evaluateEndpointRule"),rn=o((T,v)=>{const{conditions:b,error:I}=T,{result:B,referenceRecord:H}=De(b,v);if(B)throw new hr(Ie(I,"Error",{...v,referenceRecord:{...v.referenceRecord,...H}}))},"evaluateErrorRule"),Tn=o((T,v)=>{const{conditions:b,rules:I}=T,{result:B,referenceRecord:H}=De(b,v);if(B)return Pn(I,{...v,referenceRecord:{...v.referenceRecord,...H}})},"evaluateTreeRule"),Pn=o((T,v)=>{for(const b of T)if(b.type==="endpoint"){const I=Zt(b,v);if(I)return I}else if(b.type==="error")rn(b,v);else if(b.type==="tree"){const I=Tn(b,v);if(I)return I}else throw new hr(`Unknown endpoint rule: ${b}`);throw new hr("Rules evaluation failed")},"evaluateRules"),qn=o((T,v)=>{var b,I,B,H,K;const{endpointParams:fe,logger:ie}=v,{parameters:Se,rules:le}=T;(b=v.logger)===null||b===void 0||(I=b.debug)===null||I===void 0||I.call(b,`${Jo} Initial EndpointParams: ${So(fe)}`);const rt=Object.entries(Se).filter(Ut=>{let[,on]=Ut;return on.default!=null}).map(Ut=>{let[on,ar]=Ut;return[on,ar.default]});if(rt.length>0)for(const[Ut,on]of rt){var kt;fe[Ut]=(kt=fe[Ut])!==null&&kt!==void 0?kt:on}const qt=Object.entries(Se).filter(Ut=>{let[,on]=Ut;return on.required}).map(Ut=>{let[on]=Ut;return on});for(const Ut of qt)if(fe[Ut]==null)throw new hr(`Missing required parameter: '${Ut}'`);const Wt=Pn(le,{endpointParams:fe,logger:ie,referenceRecord:{}});if(!((B=v.endpointParams)===null||B===void 0)&&B.Endpoint)try{const Ut=new URL(v.endpointParams.Endpoint),{protocol:on,port:ar}=Ut;Wt.url.protocol=on,Wt.url.port=ar}catch{}return(H=v.logger)===null||H===void 0||(K=H.debug)===null||K===void 0||K.call(H,`${Jo} Resolved endpoint: ${So(Wt)}`),Wt},"resolveEndpoint"),Kn="user-agent",ti="x-amz-user-agent",ei=" ",wi=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,ki=o(T=>(v,b)=>function(){var I=Object(d.coroutine)(function*(B){var H,K;const{request:fe}=B;if(!ye.isInstance(fe))return v(B);const{headers:ie}=fe,Se=(b==null||(H=b.userAgent)===null||H===void 0?void 0:H.map(ci))||[],le=(yield T.defaultUserAgentProvider()).map(ci),rt=(T==null||(K=T.customUserAgent)===null||K===void 0?void 0:K.map(ci))||[],kt=$s(),qt=(kt?[kt]:[]).concat([...le,...Se,...rt]).join(ei),Wt=[...le.filter(Ut=>Ut.startsWith("aws-sdk-")),...rt].join(ei);return T.runtime!=="browser"?(Wt&&(ie[ti]=ie[ti]?`${ie[Kn]} ${Wt}`:Wt),ie[Kn]=qt):ie[ti]=qt,v({...B,request:fe})});return function(B){return I.apply(this,arguments)}}(),"userAgentMiddleware"),ci=o(T=>{let[v,b]=T;const I=v.indexOf("/"),B=v.substring(0,I);let H=v.substring(I+1);return B==="api"&&(H=H.toLowerCase()),[B,H,b].filter(K=>K&&K.length>0).map(K=>K==null?void 0:K.replace(wi,"_")).join("/")},"escapeUserAgent"),yi={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},or=o(T=>({applyToStack:v=>{v.add(ki(T),yi)}}),"getUserAgentPlugin");class Mi{trace(){}debug(){}info(){}warn(){}error(){}}o(Mi,"NoOpLogger");const Wi=o(()=>{let T=[],v=[];const b=new Set,I=o(le=>le.sort((rt,kt)=>Kr[kt.step]-Kr[rt.step]||vo[kt.priority||"normal"]-vo[rt.priority||"normal"]),"sort"),B=o(le=>{let rt=!1;const kt=o(qt=>qt.name&&qt.name===le?(rt=!0,b.delete(le),!1):!0,"filterCb");return T=T.filter(kt),v=v.filter(kt),rt},"removeByName"),H=o(le=>{let rt=!1;const kt=o(qt=>qt.middleware===le?(rt=!0,qt.name&&b.delete(qt.name),!1):!0,"filterCb");return T=T.filter(kt),v=v.filter(kt),rt},"removeByReference"),K=o(le=>(T.forEach(rt=>{le.add(rt.middleware,{...rt})}),v.forEach(rt=>{le.addRelativeTo(rt.middleware,{...rt})}),le),"cloneTo"),fe=o(le=>{const rt=[];return le.before.forEach(kt=>{kt.before.length===0&&kt.after.length===0?rt.push(kt):rt.push(...fe(kt))}),rt.push(le),le.after.reverse().forEach(kt=>{kt.before.length===0&&kt.after.length===0?rt.push(kt):rt.push(...fe(kt))}),rt},"expandRelativeMiddlewareList"),ie=o(function(){let le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const rt=[],kt=[],qt={};return T.forEach(Ut=>{const on={...Ut,before:[],after:[]};on.name&&(qt[on.name]=on),rt.push(on)}),v.forEach(Ut=>{const on={...Ut,before:[],after:[]};on.name&&(qt[on.name]=on),kt.push(on)}),kt.forEach(Ut=>{if(Ut.toMiddleware){const on=qt[Ut.toMiddleware];if(on===void 0){if(le)return;throw new Error(`${Ut.toMiddleware} is not found when adding ${Ut.name||"anonymous"} middleware ${Ut.relation} ${Ut.toMiddleware}`)}Ut.relation==="after"&&on.after.push(Ut),Ut.relation==="before"&&on.before.push(Ut)}}),I(rt).map(fe).reduce((Ut,on)=>(Ut.push(...on),Ut),[])},"getMiddlewareList"),Se={add:function(le){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{name:kt,override:qt}=rt,Wt={step:"initialize",priority:"normal",middleware:le,...rt};if(kt){if(b.has(kt)){if(!qt)throw new Error(`Duplicate middleware name '${kt}'`);const Ut=T.findIndex(ar=>ar.name===kt),on=T[Ut];if(on.step!==Wt.step||on.priority!==Wt.priority)throw new Error(`"${kt}" middleware with ${on.priority} priority in ${on.step} step cannot be overridden by same-name middleware with ${Wt.priority} priority in ${Wt.step} step.`);T.splice(Ut,1)}b.add(kt)}T.push(Wt)},addRelativeTo:(le,rt)=>{const{name:kt,override:qt}=rt,Wt={middleware:le,...rt};if(kt){if(b.has(kt)){if(!qt)throw new Error(`Duplicate middleware name '${kt}'`);const Ut=v.findIndex(ar=>ar.name===kt),on=v[Ut];if(on.toMiddleware!==Wt.toMiddleware||on.relation!==Wt.relation)throw new Error(`"${kt}" middleware ${on.relation} "${on.toMiddleware}" middleware cannot be overridden by same-name middleware ${Wt.relation} "${Wt.toMiddleware}" middleware.`);v.splice(Ut,1)}b.add(kt)}v.push(Wt)},clone:()=>K(Wi()),use:le=>{le.applyToStack(Se)},remove:le=>typeof le=="string"?B(le):H(le),removeByTag:le=>{let rt=!1;const kt=o(qt=>{const{tags:Wt,name:Ut}=qt;return Wt&&Wt.includes(le)?(Ut&&b.delete(Ut),rt=!0,!1):!0},"filterCb");return T=T.filter(kt),v=v.filter(kt),rt},concat:le=>{const rt=K(Wi());return rt.use(le),rt},applyToStack:K,identify:()=>ie(!0).map(le=>le.name+": "+(le.tags||[]).join(",")),resolve:(le,rt)=>{for(const kt of ie().map(qt=>qt.middleware).reverse())le=kt(le,rt);return le}};return Se},"constructStack"),Kr={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},vo={high:3,normal:2,low:1};class yr{send(v,b,I){const B=typeof b!="function"?b:void 0,H=typeof b=="function"?b:I,K=v.resolveMiddleware(this.middlewareStack,this.config,B);if(H)K(v).then(fe=>H(null,fe.output),fe=>H(fe)).catch(()=>{});else return K(v).then(fe=>fe.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}constructor(v){this.middlewareStack=Wi(),this.config=v}}o(yr,"client_Client");class In{constructor(){this.middlewareStack=Wi()}}o(In,"command_Command");const Jt="***SensitiveInformation***",jl=o((T,v)=>{for(const b of Object.keys(T)){const I=T[b],B=function(){var K=Object(d.coroutine)(function*(fe,ie,Se){const le=new I(fe);if(typeof ie=="function")this.send(le,ie);else if(typeof Se=="function"){if(typeof ie!="object")throw new Error(`Expected http options but got ${typeof ie}`);this.send(le,ie||{},Se)}else return this.send(le,ie)});return o(function(ie,Se,le){return K.apply(this,arguments)},"methodImpl")}(),H=(b[0].toLowerCase()+b.slice(1)).replace(/Command$/,"");v.prototype[H]=B}},"createAggregatedClient"),Dd=o(T=>{switch(T){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${T}"`)}},"parseBoolean"),ml=o(T=>{if(T!=null){if(typeof T=="number"){if((T===0||T===1)&&Ea.warn(Ca(`Expected boolean, got ${typeof T}: ${T}`)),T===0)return!1;if(T===1)return!0}if(typeof T=="string"){const v=T.toLowerCase();if((v==="false"||v==="true")&&Ea.warn(Ca(`Expected boolean, got ${typeof T}: ${T}`)),v==="false")return!1;if(v==="true")return!0}if(typeof T=="boolean")return T;throw new TypeError(`Expected boolean, got ${typeof T}: ${T}`)}},"expectBoolean"),sr=o(T=>{if(T!=null){if(typeof T=="string"){const v=parseFloat(T);if(!Number.isNaN(v))return String(v)!==String(T)&&Ea.warn(Ca(`Expected number but observed string: ${T}`)),v}if(typeof T=="number")return T;throw new TypeError(`Expected number, got ${typeof T}: ${T}`)}},"expectNumber"),Gl=Math.ceil(2**127*(2-2**-23)),Na=o(T=>{const v=sr(T);if(v!==void 0&&!Number.isNaN(v)&&v!==1/0&&v!==-1/0&&Math.abs(v)>Gl)throw new TypeError(`Expected 32-bit float, got ${T}`);return v},"expectFloat32"),va=o(T=>{if(T!=null){if(Number.isInteger(T)&&!Number.isNaN(T))return T;throw new TypeError(`Expected integer, got ${typeof T}: ${T}`)}},"expectLong"),Ld=va,gl=o(T=>xa(T,32),"expectInt32"),Sl=o(T=>xa(T,16),"expectShort"),vl=o(T=>xa(T,8),"expectByte"),xa=o((T,v)=>{const b=va(T);if(b!==void 0&&Pr(b,v)!==b)throw new TypeError(`Expected ${v}-bit integer, got ${T}`);return b},"expectSizedInt"),Pr=o((T,v)=>{switch(v){case 32:return Int32Array.of(T)[0];case 16:return Int16Array.of(T)[0];case 8:return Int8Array.of(T)[0]}},"castInt"),sn=o((T,v)=>{if(T==null)throw v?new TypeError(`Expected a non-null value for ${v}`):new TypeError("Expected a non-null value");return T},"expectNonNull"),Qn=o(T=>{if(T==null)return;if(typeof T=="object"&&!Array.isArray(T))return T;const v=Array.isArray(T)?"array":typeof T;throw new TypeError(`Expected object, got ${v}: ${T}`)},"expectObject"),At=o(T=>{if(T!=null){if(typeof T=="string")return T;if(["boolean","number","bigint"].includes(typeof T))return Ea.warn(Ca(`Expected string, got ${typeof T}: ${T}`)),String(T);throw new TypeError(`Expected string, got ${typeof T}: ${T}`)}},"expectString"),Nd=o(T=>{if(T==null)return;const v=Qn(T),b=Object.entries(v).filter(I=>{let[,B]=I;return B!=null}).map(I=>{let[B]=I;return B});if(b.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(b.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${b} were not null.`);return v},"expectUnion"),yl=o(T=>sr(typeof T=="string"?Zs(T):T),"strictParseDouble"),ps=yl,da=o(T=>Na(typeof T=="string"?Zs(T):T),"strictParseFloat32"),ca=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Zs=o(T=>{const v=T.match(ca);if(v===null||v[0].length!==T.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(T)},"parseNumber"),ya=o(T=>typeof T=="string"?bl(T):sr(T),"limitedParseDouble"),xd=ya,ms=ya,ba=o(T=>typeof T=="string"?bl(T):Na(T),"limitedParseFloat32"),bl=o(T=>{switch(T){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${T}`)}},"parseFloatString"),Fd=o(T=>va(typeof T=="string"?Zs(T):T),"strictParseLong"),Vd=o(T=>gl(typeof T=="string"?Zs(T):T),"strictParseInt32"),ua=o(T=>Sl(typeof T=="string"?Zs(T):T),"strictParseShort"),$l=o(T=>vl(typeof T=="string"?Zs(T):T),"strictParseByte"),Ca=o(T=>String(new TypeError(T).stack||T).split(`
`).slice(0,5).filter(v=>!v.includes("stackTraceWarning")).join(`
`),"stackTraceWarning"),Ea={warn:console.warn},Kl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ba=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ud(T){const v=T.getUTCFullYear(),b=T.getUTCMonth(),I=T.getUTCDay(),B=T.getUTCDate(),H=T.getUTCHours(),K=T.getUTCMinutes(),fe=T.getUTCSeconds(),ie=B<10?`0${B}`:`${B}`,Se=H<10?`0${H}`:`${H}`,le=K<10?`0${K}`:`${K}`,rt=fe<10?`0${fe}`:`${fe}`;return`${Kl[I]}, ${ie} ${Ba[b]} ${v} ${Se}:${le}:${rt} GMT`}o(Ud,"dateToUtcString");const Jl=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Hd=o(T=>{if(T==null)return;if(typeof T!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const v=Jl.exec(T);if(!v)throw new TypeError("Invalid RFC-3339 date-time value");const[b,I,B,H,K,fe,ie,Se]=v,le=ua(Ce(I)),rt=Y(B,"month",1,12),kt=Y(H,"day",1,31);return As(le,rt,kt,{hours:K,minutes:fe,seconds:ie,fractionalMilliseconds:Se})},"parseRfc3339DateTime"),Yl=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),zd=o(T=>{if(T==null)return;if(typeof T!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const v=Yl.exec(T);if(!v)throw new TypeError("Invalid RFC-3339 date-time value");const[b,I,B,H,K,fe,ie,Se,le]=v,rt=ua(Ce(I)),kt=Y(B,"month",1,12),qt=Y(H,"day",1,31),Wt=As(rt,kt,qt,{hours:K,minutes:fe,seconds:ie,fractionalMilliseconds:Se});return le.toUpperCase()!="Z"&&Wt.setTime(Wt.getTime()-re(le)),Wt},"parseRfc3339DateTimeWithOffset"),Fa=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Va=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Ua=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Cl=o(T=>{if(T==null)return;if(typeof T!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let v=Fa.exec(T);if(v){const[b,I,B,H,K,fe,ie,Se]=v;return As(ua(Ce(H)),ja(B),Y(I,"day",1,31),{hours:K,minutes:fe,seconds:ie,fractionalMilliseconds:Se})}if(v=Va.exec(T),v){const[b,I,B,H,K,fe,ie,Se]=v;return Wa(As(Ha(H),ja(B),Y(I,"day",1,31),{hours:K,minutes:fe,seconds:ie,fractionalMilliseconds:Se}))}if(v=Ua.exec(T),v){const[b,I,B,H,K,fe,ie,Se]=v;return As(ua(Ce(Se)),ja(I),Y(B.trimLeft(),"day",1,31),{hours:H,minutes:K,seconds:fe,fractionalMilliseconds:ie})}throw new TypeError("Invalid RFC-7231 date-time value")},"parseRfc7231DateTime"),pr=o(T=>{if(T==null)return;let v;if(typeof T=="number")v=T;else if(typeof T=="string")v=yl(T);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(v)||v===1/0||v===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(v*1e3))},"parseEpochTimestamp"),As=o((T,v,b,I)=>{const B=v-1;return U(T,B,b),new Date(Date.UTC(T,B,b,Y(I.hours,"hour",0,23),Y(I.minutes,"minute",0,59),Y(I.seconds,"seconds",0,60),G(I.fractionalMilliseconds)))},"buildDate"),Ha=o(T=>{const v=new Date().getUTCFullYear(),b=Math.floor(v/100)*100+ua(Ce(T));return b<v?b+100:b},"parseTwoDigitYear"),za=50*365*24*60*60*1e3,Wa=o(T=>T.getTime()-new Date().getTime()>za?new Date(Date.UTC(T.getUTCFullYear()-100,T.getUTCMonth(),T.getUTCDate(),T.getUTCHours(),T.getUTCMinutes(),T.getUTCSeconds(),T.getUTCMilliseconds())):T,"adjustRfc850Year"),ja=o(T=>{const v=Ba.indexOf(T);if(v<0)throw new TypeError(`Invalid month: ${T}`);return v+1},"parseMonthByShortName"),C=[31,28,31,30,31,30,31,31,30,31,30,31],U=o((T,v,b)=>{let I=C[v];if(v===1&&R(T)&&(I=29),b>I)throw new TypeError(`Invalid day for ${Ba[v]} in ${T}: ${b}`)},"validateDayOfMonth"),R=o(T=>T%4===0&&(T%100!==0||T%400===0),"isLeapYear"),Y=o((T,v,b,I)=>{const B=$l(Ce(T));if(B<b||B>I)throw new TypeError(`${v} must be between ${b} and ${I}, inclusive`);return B},"parseDateValue"),G=o(T=>T==null?0:da("0."+T)*1e3,"parseMilliseconds"),re=o(T=>{const v=T[0];let b=1;if(v=="+")b=1;else if(v=="-")b=-1;else throw new TypeError(`Offset direction, ${v}, must be "+" or "-"`);const I=Number(T.substring(1,3)),B=Number(T.substring(4,6));return b*(I*60+B)*60*1e3},"parseOffsetToMilliseconds"),Ce=o(T=>{let v=0;for(;v<T.length-1&&T.charAt(v)==="0";)v++;return v===0?T:T.slice(v)},"stripLeadingZeroes");class ge extends Error{constructor(v){super(v.message),Object.setPrototypeOf(this,ge.prototype),this.name=v.name,this.$fault=v.$fault,this.$metadata=v.$metadata}}o(ge,"ServiceException");const et=o(function(T){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Object.entries(v).filter(I=>{let[,B]=I;return B!==void 0}).forEach(I=>{let[B,H]=I;(T[B]==null||T[B]==="")&&(T[B]=H)});const b=T.message||T.Message||"UnknownError";return T.message=b,delete T.Message,T},"decorateServiceException"),he=o(T=>{let{output:v,parsedBody:b,exceptionCtor:I,errorCode:B}=T;const H=Ne(v),K=H.httpStatusCode?H.httpStatusCode+"":void 0,fe=new I({name:(b==null?void 0:b.code)||(b==null?void 0:b.Code)||B||K||"UnknownError",$fault:"client",$metadata:H});throw et(fe,b)},"throwDefaultError"),Te=o(T=>v=>{let{output:b,parsedBody:I,errorCode:B}=v;he({output:b,parsedBody:I,exceptionCtor:T,errorCode:B})},"withBaseException");var tn,Qe;const Ne=o(T=>({httpStatusCode:T.statusCode,requestId:(Qe=(tn=T.headers["x-amzn-requestid"])!==null&&tn!==void 0?tn:T.headers["x-amzn-request-id"])!==null&&Qe!==void 0?Qe:T.headers["x-amz-request-id"],extendedRequestId:T.headers["x-amz-id-2"],cfId:T.headers["x-amz-cf-id"]}),"deserializeMetadata"),It=o(T=>{switch(T){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode");let Wn=!1;const en=o(T=>{T&&!Wn&&parseInt(T.substring(1,T.indexOf(".")))<14&&(Wn=!0)},"emitWarningIfUnsupportedVersion");function Ft(T){return encodeURIComponent(T).replace(/[!'()*]/g,function(v){return"%"+v.charCodeAt(0).toString(16).toUpperCase()})}o(Ft,"extendedEncodeURIComponent");const gn=o(T=>Array.isArray(T)?T:[T],"getArrayIfSingleItem"),Yt=o(T=>{const v="#text";for(const b in T)T.hasOwnProperty(b)&&T[b][v]!==void 0?T[b]=T[b][v]:typeof T[b]=="object"&&T[b]!==null&&(T[b]=Yt(T[b]));return T},"getValueFromTextNode"),$e=o(function(){const T=Object.getPrototypeOf(this).constructor,v=Function.bind.apply(String,[null,...arguments]),b=new v;return Object.setPrototypeOf(b,T.prototype),b},"StringWrapper");$e.prototype=Object.create(String.prototype,{constructor:{value:$e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf($e,String);class nn extends $e{deserializeJSON(){return JSON.parse(super.toString())}toJSON(){return super.toString()}static fromObject(v){return v instanceof nn?v:v instanceof String||typeof v=="string"?new nn(v):new nn(JSON.stringify(v))}}o(nn,"LazyJsonString");function We(T,v,b){let I,B,H;if(typeof v>"u"&&typeof b>"u")I={},H=T;else{if(I=T,typeof v=="function")return B=v,H=b,vn(I,B,H);H=v}for(const K of Object.keys(H)){if(!Array.isArray(H[K])){I[K]=H[K];continue}Vt(I,null,H,K)}return I}o(We,"map");const Rt=o(T=>{const v={};for(const[b,I]of Object.entries(T||{}))v[b]=[,I];return v},"convertMap"),nt=o((T,v)=>{const b={};for(const I in v)Vt(b,T,v,I);return b},"take"),vn=o((T,v,b)=>We(T,Object.entries(b).reduce((I,B)=>{let[H,K]=B;return Array.isArray(K)?I[H]=K:typeof K=="function"?I[H]=[v,K()]:I[H]=[v,K],I},{})),"mapWithFilter"),Vt=o((T,v,b,I)=>{if(v!==null){let K=b[I];typeof K=="function"&&(K=[,K]);const[fe=zt,ie=io,Se=I]=K;(typeof fe=="function"&&fe(v[Se])||typeof fe!="function"&&fe)&&(T[I]=ie(v[Se]));return}let[B,H]=b[I];if(typeof H=="function"){let K;const fe=B===void 0&&(K=H())!=null,ie=typeof B=="function"&&!!B(void 0)||typeof B!="function"&&!!B;fe?T[I]=K:ie&&(T[I]=H())}else{const K=B===void 0&&H!=null,fe=typeof B=="function"&&!!B(H)||typeof B!="function"&&!!B;(K||fe)&&(T[I]=H)}},"applyInstruction"),zt=o(T=>T!=null,"nonNullish"),io=o(T=>T,"pass"),mn=o((T,v,b,I,B,H)=>{if(v!=null&&v[b]!==void 0){const K=I();if(K.length<=0)throw new Error("Empty value provided for input HTTP label: "+b+".");T=T.replace(B,H?K.split("/").map(fe=>Ft(fe)).join("/"):Ft(K))}else throw new Error("No value provided for input HTTP label: "+b+".");return T},"resolve_path_resolvedPath"),El=o(T=>{if(T!==T)return"NaN";switch(T){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return T}},"serializeFloat"),hn=o(T=>{if(T==null)return{};if(Array.isArray(T))return T.filter(v=>v!=null);if(typeof T=="object"){const v={};for(const b of Object.keys(T))T[b]!=null&&(v[b]=hn(T[b]));return v}return T},"_json");function qs(T,v,b){if(b<=0||!Number.isInteger(b))throw new Error("Invalid number of delimiters ("+b+") for splitEvery.");const I=T.split(v);if(b===1)return I;const B=[];let H="";for(let K=0;K<I.length;K++)H===""?H=I[K]:H+=v+I[K],(K+1)%b===0&&(B.push(H),H="");return H!==""&&B.push(H),B}o(qs,"splitEvery");const _s=o(T=>{var v,b;return{...T,useDualstackEndpoint:(v=T.useDualstackEndpoint)!==null&&v!==void 0?v:!1,useFipsEndpoint:(b=T.useFipsEndpoint)!==null&&b!==void 0?b:!1,defaultSigningName:"chime"}},"resolveClientEndpointParameters");var ih=f("M2az"),rh=f("viNG");function oh(T){const v=[];for(let b of Object.keys(T).sort()){const I=T[b];if(b=Gr(b),Array.isArray(I))for(let B=0,H=I.length;B<H;B++)v.push(`${b}=${Gr(I[B])}`);else{let B=b;(I||typeof I=="string")&&(B+=`=${Gr(I)}`),v.push(B)}}return v.join("&")}o(oh,"buildQueryString");function sh(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new Promise((v,b)=>{T&&setTimeout(()=>{const I=new Error(`Request did not complete within ${T} ms`);I.name="TimeoutError",b(I)},T)})}o(sh,"requestTimeout");class qc{destroy(){}handle(v){let{abortSignal:b}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var I=this;return Object(d.coroutine)(function*(){I.config||(I.config=yield I.configProvider);const B=I.config.requestTimeout;if(b!=null&&b.aborted){const qt=new Error("Request aborted");return qt.name="AbortError",Promise.reject(qt)}let H=v.path;if(v.query){const qt=oh(v.query);qt&&(H+=`?${qt}`)}const{port:K,method:fe}=v,ie=`${v.protocol}//${v.hostname}${K?`:${K}`:""}${H}`,le={body:fe==="GET"||fe==="HEAD"?void 0:v.body,headers:new Headers(v.headers),method:fe};typeof AbortController<"u"&&(le.signal=b);const rt=new Request(ie,le),kt=[fetch(rt).then(qt=>{const Wt=qt.headers,Ut={};for(const ar of Wt.entries())Ut[ar[0]]=ar[1];return qt.body!=null?{response:new pt({headers:Ut,statusCode:qt.status,body:qt.body})}:qt.blob().then(ar=>({response:new pt({headers:Ut,statusCode:qt.status,body:ar})}))}),sh(B)];return b&&kt.push(new Promise((qt,Wt)=>{b.onabort=()=>{const Ut=new Error("Request aborted");Ut.name="AbortError",Wt(Ut)}})),Promise.race(kt)})()}constructor(v){typeof v=="function"?this.configProvider=v().then(b=>b||{}):(this.config=v??{},this.configProvider=Promise.resolve(this.config))}}o(qc,"fetch_http_handler_FetchHttpHandler");const Ta={},Tl=new Array(64);for(let T=0,v="A".charCodeAt(0),b="Z".charCodeAt(0);T+v<=b;T++){const I=String.fromCharCode(T+v);Ta[I]=T,Tl[T]=I}for(let T=0,v="a".charCodeAt(0),b="z".charCodeAt(0);T+v<=b;T++){const I=String.fromCharCode(T+v),B=T+26;Ta[I]=B,Tl[B]=I}for(let T=0;T<10;T++){Ta[T.toString(10)]=T+52;const v=T.toString(10),b=T+52;Ta[v]=b,Tl[b]=v}Ta["+"]=62,Tl[62]="+",Ta["/"]=63,Tl[63]="/";const Il=6,Xl=8,ah=63,eu=o(T=>{let v=T.length/4*3;T.slice(-2)==="=="?v-=2:T.slice(-1)==="="&&v--;const b=new ArrayBuffer(v),I=new DataView(b);for(let B=0;B<T.length;B+=4){let H=0,K=0;for(let Se=B,le=B+3;Se<=le;Se++)if(T[Se]!=="="){if(!(T[Se]in Ta))throw new TypeError(`Invalid character ${T[Se]} in base64 string.`);H|=Ta[T[Se]]<<(le-Se)*Il,K+=Il}else H>>=Il;const fe=B/4*3;H>>=K%Xl;const ie=Math.floor(K/Xl);for(let Se=0;Se<ie;Se++){const le=(ie-Se-1)*Xl;I.setUint8(fe+Se,(H&255<<le)>>le)}}return new Uint8Array(b)},"fromBase64");function lh(T){let v="";for(let b=0;b<T.length;b+=3){let I=0,B=0;for(let K=b,fe=Math.min(b+3,T.length);K<fe;K++)I|=T[K]<<(fe-K-1)*Xl,B+=Xl;const H=Math.ceil(B/Il);I<<=H*Il-B;for(let K=1;K<=H;K++){const fe=(H-K)*Il;v+=Tl[(I&ah<<fe)>>fe]}v+="==".slice(0,4-H)}return v}o(lh,"toBase64");const dh=o(T=>typeof Blob=="function"&&T instanceof Blob?ch(T):uh(T),"streamCollector");function ch(T){return uc.apply(this,arguments)}o(ch,"collectBlob");function uc(){return uc=Object(d.coroutine)(function*(T){const v=yield fh(T),b=eu(v);return new Uint8Array(b)}),uc.apply(this,arguments)}o(uc,"_collectBlob");function uh(T){return fc.apply(this,arguments)}o(uh,"collectStream");function fc(){return fc=Object(d.coroutine)(function*(T){let v=new Uint8Array(0);const b=T.getReader();let I=!1;for(;!I;){const{done:B,value:H}=yield b.read();if(H){const K=v;v=new Uint8Array(K.length+H.length),v.set(K),v.set(H,K.length)}I=B}return v}),fc.apply(this,arguments)}o(fc,"_collectStream");function fh(T){return new Promise((v,b)=>{const I=new FileReader;I.onloadend=()=>{if(I.readyState!==2)return b(new Error("Reader aborted too early"));var B;const H=(B=I.result)!==null&&B!==void 0?B:"",K=H.indexOf(","),fe=K>-1?K+1:H.length;v(H.substring(fe))},I.onabort=()=>b(new Error("Read aborted")),I.onerror=()=>b(I.error),I.readAsDataURL(T)})}o(fh,"readToBase64");const $S=o(T=>()=>{throw new Error(T)},"invalidFunction"),hh=o(T=>()=>Promise.reject(T),"invalidProvider"),ph=o(T=>{if(typeof T=="string"){let v=T.length;for(let b=v-1;b>=0;b--){const I=T.charCodeAt(b);I>127&&I<=2047?v++:I>2047&&I<=65535&&(v+=2),I>=56320&&I<=57343&&b--}return v}else{if(typeof T.byteLength=="number")return T.byteLength;if(typeof T.size=="number")return T.size}throw new Error(`Body Length computation failed for ${T}`)},"calculateBodyLength");var mh=f("M39V"),tu=f.n(mh);const gh=o(T=>{let{serviceId:v,clientVersion:b}=T;return Object(d.coroutine)(function*(){var I,B,H,K,fe;const ie=typeof window<"u"&&(!(window==null||(I=window.navigator)===null||I===void 0)&&I.userAgent)?tu.a.parse(window.navigator.userAgent):void 0;var Se,le;const rt=[["aws-sdk-js",b],[`os/${(ie==null||(B=ie.os)===null||B===void 0?void 0:B.name)||"other"}`,ie==null||(H=ie.os)===null||H===void 0?void 0:H.version],["lang/js"],["md/browser",`${(Se=ie==null||(K=ie.browser)===null||K===void 0?void 0:K.name)!==null&&Se!==void 0?Se:"unknown"}_${(le=ie==null||(fe=ie.browser)===null||fe===void 0?void 0:fe.version)!==null&&le!==void 0?le:"unknown"}`]];return v&&rt.push([`api/${v}`,b]),rt})},"dist_es_defaultUserAgent"),nu="required",fa="fn",ha="argv",wl="ref",iu="isSet",yo="tree",Ol="error",Ql="endpoint",hc="PartitionResult",ru={[nu]:!1,type:"String"},ou={[nu]:!0,default:!1,type:"Boolean"},su={[wl]:"Endpoint"},au={[fa]:"booleanEquals",[ha]:[{[wl]:"UseFIPS"},!0]},lu={[fa]:"booleanEquals",[ha]:[{[wl]:"UseDualStack"},!0]},ea={},du={[fa]:"booleanEquals",[ha]:[!0,{[fa]:"getAttr",[ha]:[{[wl]:hc},"supportsFIPS"]}]},cu={[fa]:"booleanEquals",[ha]:[!0,{[fa]:"getAttr",[ha]:[{[wl]:hc},"supportsDualStack"]}]},uu=[au],fu=[lu],hu=[{[wl]:"Region"}],Sh={version:"1.0",parameters:{Region:ru,UseDualStack:ou,UseFIPS:ou,Endpoint:ru},rules:[{conditions:[{[fa]:iu,[ha]:[su]}],type:yo,rules:[{conditions:uu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Ol},{type:yo,rules:[{conditions:fu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Ol},{endpoint:{url:su,properties:ea,headers:ea},type:Ql}]}]},{type:yo,rules:[{conditions:[{[fa]:iu,[ha]:hu}],type:yo,rules:[{conditions:[{[fa]:"aws.partition",[ha]:hu,assign:hc}],type:yo,rules:[{conditions:[au,lu],type:yo,rules:[{conditions:[du,cu],type:yo,rules:[{type:yo,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ea,headers:ea},type:Ql}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Ol}]},{conditions:uu,type:yo,rules:[{conditions:[du],type:yo,rules:[{type:yo,rules:[{endpoint:{url:"https://messaging-chime-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ea,headers:ea},type:Ql}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Ol}]},{conditions:fu,type:yo,rules:[{conditions:[cu],type:yo,rules:[{type:yo,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ea,headers:ea},type:Ql}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Ol}]},{type:yo,rules:[{endpoint:{url:"https://messaging-chime.{Region}.{PartitionResult#dnsSuffix}",properties:ea,headers:ea},type:Ql}]}]}]},{error:"Invalid Configuration: Missing Region",type:Ol}]}]},vh=o(function(T){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qn(Sh,{endpointParams:T,logger:v.logger})},"defaultEndpointResolver");var pc,mc,gc,Sc,vc,yc,bc,Cc,Ec;const yh=o(T=>({apiVersion:"2021-05-15",base64Decoder:(pc=T==null?void 0:T.base64Decoder)!==null&&pc!==void 0?pc:eu,base64Encoder:(mc=T==null?void 0:T.base64Encoder)!==null&&mc!==void 0?mc:lh,disableHostPrefix:(gc=T==null?void 0:T.disableHostPrefix)!==null&&gc!==void 0?gc:!1,endpointProvider:(Sc=T==null?void 0:T.endpointProvider)!==null&&Sc!==void 0?Sc:vh,logger:(vc=T==null?void 0:T.logger)!==null&&vc!==void 0?vc:new Mi,serviceId:(yc=T==null?void 0:T.serviceId)!==null&&yc!==void 0?yc:"Chime SDK Messaging",urlParser:(bc=T==null?void 0:T.urlParser)!==null&&bc!==void 0?bc:Gi,utf8Decoder:(Cc=T==null?void 0:T.utf8Decoder)!==null&&Cc!==void 0?Cc:bo,utf8Encoder:(Ec=T==null?void 0:T.utf8Encoder)!==null&&Ec!==void 0?Ec:Bo}),"getRuntimeConfig"),bh=["in-region","cross-region","mobile","standard","legacy"],Ch=o(function(){let{defaultsMode:T}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Li(Object(d.coroutine)(function*(){const v=typeof T=="function"?yield T():T;switch(v==null?void 0:v.toLowerCase()){case"auto":return Promise.resolve(Eh()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(v==null?void 0:v.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${bh.join(", ")}, got ${v}`)}}))},"resolveDefaultsModeConfig"),Eh=o(()=>{var T,v;const b=typeof window<"u"&&(!(window==null||(T=window.navigator)===null||T===void 0)&&T.userAgent)?tu.a.parse(window.navigator.userAgent):void 0,I=b==null||(v=b.platform)===null||v===void 0?void 0:v.type;return I==="tablet"||I==="mobile"},"isMobileBrowser"),Th=o(T=>{const v=Ch(T),b=o(()=>v().then(It),"defaultConfigProvider"),I=yh(T);var B,H,K,fe,ie,Se,le,rt,kt,qt,Wt;return{...I,...T,runtime:"browser",defaultsMode:v,bodyLengthChecker:(B=T==null?void 0:T.bodyLengthChecker)!==null&&B!==void 0?B:ph,credentialDefaultProvider:(H=T==null?void 0:T.credentialDefaultProvider)!==null&&H!==void 0?H:Ut=>()=>Promise.reject(new Error("Credential is missing")),defaultUserAgentProvider:(K=T==null?void 0:T.defaultUserAgentProvider)!==null&&K!==void 0?K:gh({serviceId:I.serviceId,clientVersion:ih.version}),maxAttempts:(fe=T==null?void 0:T.maxAttempts)!==null&&fe!==void 0?fe:vt,region:(ie=T==null?void 0:T.region)!==null&&ie!==void 0?ie:hh("Region is missing"),requestHandler:(Se=T==null?void 0:T.requestHandler)!==null&&Se!==void 0?Se:new qc(b),retryMode:(le=T==null?void 0:T.retryMode)!==null&&le!==void 0?le:Object(d.coroutine)(function*(){return(yield b()).retryMode||lt}),sha256:(rt=T==null?void 0:T.sha256)!==null&&rt!==void 0?rt:rh.Sha256,streamCollector:(kt=T==null?void 0:T.streamCollector)!==null&&kt!==void 0?kt:dh,useDualstackEndpoint:(qt=T==null?void 0:T.useDualstackEndpoint)!==null&&qt!==void 0?qt:()=>Promise.resolve(i),useFipsEndpoint:(Wt=T==null?void 0:T.useFipsEndpoint)!==null&&Wt!==void 0?Wt:()=>Promise.resolve(r)}},"runtimeConfig_browser_getRuntimeConfig");class _o extends yr{destroy(){super.destroy()}constructor(v){const b=Th(v),I=_s(b),B=x(I),H=Hn(B),K=Ui(H),fe=K,ie=ss(fe),Se=Mo(ie);super(Se),this.config=Se,this.middlewareStack.use(qr(this.config)),this.middlewareStack.use(_t(this.config)),this.middlewareStack.use(Ir(this.config)),this.middlewareStack.use(gi(this.config)),this.middlewareStack.use(Fe(this.config)),this.middlewareStack.use(lo(this.config)),this.middlewareStack.use(or(this.config))}}o(_o,"ChimeSDKMessagingClient_ChimeSDKMessagingClient");var Tc;(function(T){T[T.HEADER=0]="HEADER",T[T.TRAILER=1]="TRAILER"})(Tc||(Tc={}));class Ih{constructor({name:v,kind:b=Tc.HEADER,values:I=[]}){this.name=v,this.kind=b,this.values=I}add(v){this.values.push(v)}set(v){this.values=v}remove(v){this.values=this.values.filter(b=>b!==v)}toString(){return this.values.map(v=>v.includes(",")||v.includes(" ")?`"${v}"`:v).join(", ")}get(){return this.values}}o(Ih,"dist_es_Field_Field");class wh{constructor({fields:v=[],encoding:b="utf-8"}){this.entries={},v.forEach(this.setField.bind(this)),this.encoding=b}setField(v){this.entries[v.name.toLowerCase()]=v}getField(v){return this.entries[v.toLowerCase()]}removeField(v){delete this.entries[v.toLowerCase()]}getByType(v){return Object.values(this.entries).filter(b=>b.kind===v)}}o(wh,"Fields_Fields");class Mn{constructor(v){this.method=v.method||"GET",this.hostname=v.hostname||"localhost",this.port=v.port,this.query=v.query||{},this.headers=v.headers||{},this.body=v.body,this.protocol=v.protocol?v.protocol.slice(-1)!==":"?`${v.protocol}:`:v.protocol:"https:",this.path=v.path?v.path.charAt(0)!=="/"?`/${v.path}`:v.path:"/"}static isInstance(v){if(!v)return!1;const b=v;return"method"in b&&"protocol"in b&&"hostname"in b&&"path"in b&&typeof b.query=="object"&&typeof b.headers=="object"}clone(){const v=new Mn({...this,headers:{...this.headers}});return v.query&&(v.query=Oh(v.query)),v}}o(Mn,"httpRequest_HttpRequest");function Oh(T){return Object.keys(T).reduce((v,b)=>{const I=T[b];return{...v,[b]:Array.isArray(I)?[...I]:I}},{})}o(Oh,"httpRequest_cloneQuery");class Rh{constructor(v){this.statusCode=v.statusCode,this.headers=v.headers||{},this.body=v.body}static isInstance(v){if(!v)return!1;const b=v;return typeof b.statusCode=="number"&&typeof b.headers=="object"}}o(Rh,"httpResponse_HttpResponse");function JS(T){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(T)}o(JS,"isValidHostname_isValidHostname");class ko extends ge{constructor(v){super(v),Object.setPrototypeOf(this,ko.prototype)}}o(ko,"ChimeSDKMessagingServiceException_ChimeSDKMessagingServiceException");const Mh={ALL:"ALL",FILTERED:"FILTERED",NONE:"NONE"},Ph={DEFAULT:"DEFAULT",HIDDEN:"HIDDEN"},Ah={AccessDenied:"AccessDenied",BadRequest:"BadRequest",Conflict:"Conflict",Forbidden:"Forbidden",NotFound:"NotFound",PhoneNumberAssociationsExist:"PhoneNumberAssociationsExist",PreconditionFailed:"PreconditionFailed",ResourceLimitExceeded:"ResourceLimitExceeded",ServiceFailure:"ServiceFailure",ServiceUnavailable:"ServiceUnavailable",Throttled:"Throttled",Throttling:"Throttling",Unauthorized:"Unauthorized",Unprocessable:"Unprocessable",VoiceConnectorGroupAssociationsExist:"VoiceConnectorGroupAssociationsExist"};class Zl extends ko{constructor(v){super({name:"BadRequestException",$fault:"client",...v}),this.name="BadRequestException",this.$fault="client",Object.setPrototypeOf(this,Zl.prototype),this.Code=v.Code,this.Message=v.Message}}o(Zl,"models_0_BadRequestException");class ql extends ko{constructor(v){super({name:"ConflictException",$fault:"client",...v}),this.name="ConflictException",this.$fault="client",Object.setPrototypeOf(this,ql.prototype),this.Code=v.Code,this.Message=v.Message}}o(ql,"models_0_ConflictException");class ed extends ko{constructor(v){super({name:"ForbiddenException",$fault:"client",...v}),this.name="ForbiddenException",this.$fault="client",Object.setPrototypeOf(this,ed.prototype),this.Code=v.Code,this.Message=v.Message}}o(ed,"models_0_ForbiddenException");class td extends ko{constructor(v){super({name:"NotFoundException",$fault:"client",...v}),this.name="NotFoundException",this.$fault="client",Object.setPrototypeOf(this,td.prototype),this.Code=v.Code,this.Message=v.Message}}o(td,"models_0_NotFoundException");class nd extends ko{constructor(v){super({name:"ServiceFailureException",$fault:"server",...v}),this.name="ServiceFailureException",this.$fault="server",Object.setPrototypeOf(this,nd.prototype),this.Code=v.Code,this.Message=v.Message}}o(nd,"models_0_ServiceFailureException");class id extends ko{constructor(v){super({name:"ServiceUnavailableException",$fault:"server",...v}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,id.prototype),this.Code=v.Code,this.Message=v.Message}}o(id,"models_0_ServiceUnavailableException");class rd extends ko{constructor(v){super({name:"ThrottledClientException",$fault:"client",...v}),this.name="ThrottledClientException",this.$fault="client",Object.setPrototypeOf(this,rd.prototype),this.Code=v.Code,this.Message=v.Message}}o(rd,"models_0_ThrottledClientException");class od extends ko{constructor(v){super({name:"UnauthorizedClientException",$fault:"client",...v}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,od.prototype),this.Code=v.Code,this.Message=v.Message}}o(od,"models_0_UnauthorizedClientException");class sd extends ko{constructor(v){super({name:"ResourceLimitExceededException",$fault:"client",...v}),this.name="ResourceLimitExceededException",this.$fault="client",Object.setPrototypeOf(this,sd.prototype),this.Code=v.Code,this.Message=v.Message}}o(sd,"models_0_ResourceLimitExceededException");const _h={CREATED_TIMESTAMP:"CREATED_TIMESTAMP",LAST_MESSAGE_TIMESTAMP:"LAST_MESSAGE_TIMESTAMP"},kh={RESTRICTED:"RESTRICTED",UNRESTRICTED:"UNRESTRICTED"},Dh={PRIVATE:"PRIVATE",PUBLIC:"PUBLIC"},Lh={ASYNC:"ASYNC"},Nh={ABORT:"ABORT",CONTINUE:"CONTINUE"},xh={DEFAULT:"DEFAULT",VOIP:"VOIP"},Bh={NON_PERSISTENT:"NON_PERSISTENT",PERSISTENT:"PERSISTENT"},Fh={DENIED:"DENIED",FAILED:"FAILED",PENDING:"PENDING",SENT:"SENT"},Vh={CONTROL:"CONTROL",STANDARD:"STANDARD"},Uh={Channel:"Channel",ChannelMessage:"ChannelMessage"},Hh={ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"},zh={MEMBERS:"MEMBERS"},Wh={EQUALS:"EQUALS",INCLUDES:"INCLUDES"},Nr=o(T=>({...T,...T.Name&&{Name:Jt}}),"IdentityFilterSensitiveLog"),pu=o(T=>({...T,...T.InvitedBy&&{InvitedBy:Nr(T.InvitedBy)},...T.Members&&{Members:T.Members.map(v=>Nr(v))}}),"BatchChannelMembershipsFilterSensitiveLog"),mu=o(T=>({...T,...T.BatchChannelMemberships&&{BatchChannelMemberships:pu(T.BatchChannelMemberships)}}),"BatchCreateChannelMembershipResponseFilterSensitiveLog"),gu=o(T=>({...T,...T.Name&&{Name:Jt},...T.Metadata&&{Metadata:Jt},...T.CreatedBy&&{CreatedBy:Nr(T.CreatedBy)}}),"ChannelFilterSensitiveLog"),Su=o(T=>({...T,...T.Name&&{Name:Jt},...T.Metadata&&{Metadata:Jt}}),"ChannelAssociatedWithFlowSummaryFilterSensitiveLog"),vu=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)},...T.CreatedBy&&{CreatedBy:Nr(T.CreatedBy)}}),"ChannelBanFilterSensitiveLog"),yu=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)}}),"ChannelBanSummaryFilterSensitiveLog"),ad=o(T=>({...T,...T.Name&&{Name:Jt}}),"ProcessorFilterSensitiveLog"),bu=o(T=>({...T,...T.Processors&&{Processors:T.Processors.map(v=>ad(v))},...T.Name&&{Name:Jt}}),"ChannelFlowFilterSensitiveLog"),ld=o(T=>({...T,...T.StringValues&&{StringValues:Jt}}),"MessageAttributeValueFilterSensitiveLog"),Ic=o(T=>({...T,...T.Title&&{Title:Jt},...T.Body&&{Body:Jt}}),"PushNotificationConfigurationFilterSensitiveLog"),Cu=o(T=>({...T,...T.Content&&{Content:Jt},...T.Metadata&&{Metadata:Jt},...T.PushNotification&&{PushNotification:Ic(T.PushNotification)},...T.MessageAttributes&&{MessageAttributes:Object.entries(T.MessageAttributes).reduce((v,b)=>{let[I,B]=b;return v[I]=ld(B),v},{})},...T.ContentType&&{ContentType:Jt}}),"ChannelMessageCallbackFilterSensitiveLog"),Eu=o(T=>({...T,...T.ChannelMessage&&{ChannelMessage:Cu(T.ChannelMessage)}}),"ChannelFlowCallbackRequestFilterSensitiveLog"),Tu=o(T=>({...T,...T.Name&&{Name:Jt},...T.Processors&&{Processors:T.Processors.map(v=>ad(v))}}),"ChannelFlowSummaryFilterSensitiveLog"),Iu=o(T=>({...T,...T.InvitedBy&&{InvitedBy:Nr(T.InvitedBy)},...T.Member&&{Member:Nr(T.Member)}}),"ChannelMembershipFilterSensitiveLog"),dd=o(T=>({...T,...T.Name&&{Name:Jt},...T.Metadata&&{Metadata:Jt}}),"ChannelSummaryFilterSensitiveLog"),wc=o(T=>({...T,...T.ChannelSummary&&{ChannelSummary:dd(T.ChannelSummary)}}),"ChannelMembershipForAppInstanceUserSummaryFilterSensitiveLog"),wu=o(T=>({...T,...T.FilterRule&&{FilterRule:Jt}}),"PushNotificationPreferencesFilterSensitiveLog"),Wd=o(T=>({...T,...T.PushNotifications&&{PushNotifications:wu(T.PushNotifications)}}),"ChannelMembershipPreferencesFilterSensitiveLog"),Ou=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)}}),"ChannelMembershipSummaryFilterSensitiveLog"),Ru=o(T=>({...T,...T.Content&&{Content:Jt},...T.Metadata&&{Metadata:Jt},...T.Sender&&{Sender:Nr(T.Sender)},...T.MessageAttributes&&{MessageAttributes:Object.entries(T.MessageAttributes).reduce((v,b)=>{let[I,B]=b;return v[I]=ld(B),v},{})},...T.ContentType&&{ContentType:Jt}}),"ChannelMessageFilterSensitiveLog"),Mu=o(T=>({...T,...T.Content&&{Content:Jt},...T.Metadata&&{Metadata:Jt},...T.Sender&&{Sender:Nr(T.Sender)},...T.MessageAttributes&&{MessageAttributes:Object.entries(T.MessageAttributes).reduce((v,b)=>{let[I,B]=b;return v[I]=ld(B),v},{})},...T.ContentType&&{ContentType:Jt}}),"ChannelMessageSummaryFilterSensitiveLog"),Oc=o(T=>({...T,...T.ChannelSummary&&{ChannelSummary:dd(T.ChannelSummary)}}),"ChannelModeratedByAppInstanceUserSummaryFilterSensitiveLog"),Pu=o(T=>({...T,...T.Moderator&&{Moderator:Nr(T.Moderator)},...T.CreatedBy&&{CreatedBy:Nr(T.CreatedBy)}}),"ChannelModeratorFilterSensitiveLog"),Au=o(T=>({...T,...T.Moderator&&{Moderator:Nr(T.Moderator)}}),"ChannelModeratorSummaryFilterSensitiveLog"),cd=o(T=>({...T,...T.Key&&{Key:Jt},...T.Value&&{Value:Jt}}),"TagFilterSensitiveLog"),_u=o(T=>({...T,...T.Name&&{Name:Jt},...T.Metadata&&{Metadata:Jt},...T.ClientRequestToken&&{ClientRequestToken:Jt},...T.Tags&&{Tags:T.Tags.map(v=>cd(v))},...T.ChannelId&&{ChannelId:Jt}}),"CreateChannelRequestFilterSensitiveLog"),ku=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)}}),"CreateChannelBanResponseFilterSensitiveLog"),Du=o(T=>({...T,...T.Processors&&{Processors:T.Processors.map(v=>ad(v))},...T.Name&&{Name:Jt},...T.Tags&&{Tags:T.Tags.map(v=>cd(v))},...T.ClientRequestToken&&{ClientRequestToken:Jt}}),"CreateChannelFlowRequestFilterSensitiveLog"),Lu=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)}}),"CreateChannelMembershipResponseFilterSensitiveLog"),Nu=o(T=>({...T,...T.ChannelModerator&&{ChannelModerator:Nr(T.ChannelModerator)}}),"CreateChannelModeratorResponseFilterSensitiveLog"),xu=o(T=>({...T,...T.Channel&&{Channel:gu(T.Channel)}}),"DescribeChannelResponseFilterSensitiveLog"),Bu=o(T=>({...T,...T.ChannelBan&&{ChannelBan:vu(T.ChannelBan)}}),"DescribeChannelBanResponseFilterSensitiveLog"),Fu=o(T=>({...T,...T.ChannelFlow&&{ChannelFlow:bu(T.ChannelFlow)}}),"DescribeChannelFlowResponseFilterSensitiveLog"),Vu=o(T=>({...T,...T.ChannelMembership&&{ChannelMembership:Iu(T.ChannelMembership)}}),"DescribeChannelMembershipResponseFilterSensitiveLog"),Uu=o(T=>({...T,...T.ChannelMembership&&{ChannelMembership:wc(T.ChannelMembership)}}),"DescribeChannelMembershipForAppInstanceUserResponseFilterSensitiveLog"),Hu=o(T=>({...T,...T.Channel&&{Channel:Oc(T.Channel)}}),"DescribeChannelModeratedByAppInstanceUserResponseFilterSensitiveLog"),zu=o(T=>({...T,...T.ChannelModerator&&{ChannelModerator:Pu(T.ChannelModerator)}}),"DescribeChannelModeratorResponseFilterSensitiveLog"),Wu=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)},...T.Preferences&&{Preferences:Wd(T.Preferences)}}),"GetChannelMembershipPreferencesResponseFilterSensitiveLog"),ju=o(T=>({...T,...T.ChannelMessage&&{ChannelMessage:Ru(T.ChannelMessage)}}),"GetChannelMessageResponseFilterSensitiveLog"),Gu=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelBansRequestFilterSensitiveLog"),$u=o(T=>({...T,...T.NextToken&&{NextToken:Jt},...T.ChannelBans&&{ChannelBans:T.ChannelBans.map(v=>yu(v))}}),"ListChannelBansResponseFilterSensitiveLog"),Ku=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelFlowsRequestFilterSensitiveLog"),Ju=o(T=>({...T,...T.ChannelFlows&&{ChannelFlows:T.ChannelFlows.map(v=>Tu(v))},...T.NextToken&&{NextToken:Jt}}),"ListChannelFlowsResponseFilterSensitiveLog"),Yu=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelMembershipsRequestFilterSensitiveLog"),Xu=o(T=>({...T,...T.ChannelMemberships&&{ChannelMemberships:T.ChannelMemberships.map(v=>Ou(v))},...T.NextToken&&{NextToken:Jt}}),"ListChannelMembershipsResponseFilterSensitiveLog"),Qu=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelMembershipsForAppInstanceUserRequestFilterSensitiveLog"),Zu=o(T=>({...T,...T.ChannelMemberships&&{ChannelMemberships:T.ChannelMemberships.map(v=>wc(v))},...T.NextToken&&{NextToken:Jt}}),"ListChannelMembershipsForAppInstanceUserResponseFilterSensitiveLog"),qu=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelMessagesRequestFilterSensitiveLog"),ef=o(T=>({...T,...T.NextToken&&{NextToken:Jt},...T.ChannelMessages&&{ChannelMessages:T.ChannelMessages.map(v=>Mu(v))}}),"ListChannelMessagesResponseFilterSensitiveLog"),tf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelModeratorsRequestFilterSensitiveLog"),nf=o(T=>({...T,...T.NextToken&&{NextToken:Jt},...T.ChannelModerators&&{ChannelModerators:T.ChannelModerators.map(v=>Au(v))}}),"ListChannelModeratorsResponseFilterSensitiveLog"),rf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelsRequestFilterSensitiveLog"),of=o(T=>({...T,...T.Channels&&{Channels:T.Channels.map(v=>dd(v))},...T.NextToken&&{NextToken:Jt}}),"ListChannelsResponseFilterSensitiveLog"),sf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelsAssociatedWithChannelFlowRequestFilterSensitiveLog"),af=o(T=>({...T,...T.Channels&&{Channels:T.Channels.map(v=>Su(v))},...T.NextToken&&{NextToken:Jt}}),"ListChannelsAssociatedWithChannelFlowResponseFilterSensitiveLog"),lf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListChannelsModeratedByAppInstanceUserRequestFilterSensitiveLog"),df=o(T=>({...T,...T.Channels&&{Channels:T.Channels.map(v=>Oc(v))},...T.NextToken&&{NextToken:Jt}}),"ListChannelsModeratedByAppInstanceUserResponseFilterSensitiveLog"),cf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListSubChannelsRequestFilterSensitiveLog"),uf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"ListSubChannelsResponseFilterSensitiveLog"),ff=o(T=>({...T,...T.Tags&&{Tags:T.Tags.map(v=>cd(v))}}),"ListTagsForResourceResponseFilterSensitiveLog"),hf=o(T=>({...T,...T.Preferences&&{Preferences:Wd(T.Preferences)}}),"PutChannelMembershipPreferencesRequestFilterSensitiveLog"),pf=o(T=>({...T,...T.Member&&{Member:Nr(T.Member)},...T.Preferences&&{Preferences:Wd(T.Preferences)}}),"PutChannelMembershipPreferencesResponseFilterSensitiveLog"),mf=o(T=>({...T,...T.NextToken&&{NextToken:Jt}}),"SearchChannelsRequestFilterSensitiveLog"),gf=o(T=>({...T,...T.Channels&&{Channels:T.Channels.map(v=>dd(v))},...T.NextToken&&{NextToken:Jt}}),"SearchChannelsResponseFilterSensitiveLog"),Sf=o(T=>({...T,...T.Content&&{Content:Jt},...T.Metadata&&{Metadata:Jt},...T.ClientRequestToken&&{ClientRequestToken:Jt},...T.PushNotification&&{PushNotification:Ic(T.PushNotification)},...T.MessageAttributes&&{MessageAttributes:Object.entries(T.MessageAttributes).reduce((v,b)=>{let[I,B]=b;return v[I]=ld(B),v},{})},...T.ContentType&&{ContentType:Jt}}),"SendChannelMessageRequestFilterSensitiveLog"),vf=o(T=>({...T,...T.Tags&&{Tags:T.Tags.map(v=>cd(v))}}),"TagResourceRequestFilterSensitiveLog"),yf=o(T=>({...T,...T.TagKeys&&{TagKeys:Jt}}),"UntagResourceRequestFilterSensitiveLog"),bf=o(T=>({...T,...T.Name&&{Name:Jt},...T.Metadata&&{Metadata:Jt}}),"UpdateChannelRequestFilterSensitiveLog"),Cf=o(T=>({...T,...T.Processors&&{Processors:T.Processors.map(v=>ad(v))},...T.Name&&{Name:Jt}}),"UpdateChannelFlowRequestFilterSensitiveLog"),Ef=o(T=>({...T,...T.Content&&{Content:Jt},...T.Metadata&&{Metadata:Jt},...T.ContentType&&{ContentType:Jt}}),"UpdateChannelMessageRequestFilterSensitiveLog"),jh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/channel-flow`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{ChannelFlowArn:[]})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_AssociateChannelFlowCommand")}(),Gh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({operation:[,"batch-create"]});let le;return le=JSON.stringify(nt(v,{MemberArns:rt=>hn(rt),SubChannelId:[],Type:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_BatchCreateChannelMembershipCommand")}(),$h=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({operation:[,"channel-flow-callback"]});let le;return le=JSON.stringify(nt(v,{CallbackId:[!0,rt=>rt??Rn()],ChannelMessage:rt=>hn(rt),DeleteResource:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ChannelFlowCallbackCommand")}(),Kh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer}),ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels`;let Se;return Se=JSON.stringify(nt(v,{AppInstanceArn:[],ChannelId:[],ClientRequestToken:[!0,le=>le??Rn()],ElasticChannelConfiguration:le=>hn(le),ExpirationSettings:le=>hn(le),MemberArns:le=>hn(le),Metadata:[],Mode:[],ModeratorArns:le=>hn(le),Name:[],Privacy:[],Tags:le=>hn(le)})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_CreateChannelCommand")}(),Jh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/bans`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{MemberArn:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_CreateChannelBanCommand")}(),Yh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channel-flows`;let Se;return Se=JSON.stringify(nt(v,{AppInstanceArn:[],ClientRequestToken:[!0,le=>le??Rn()],Name:[],Processors:le=>hn(le),Tags:le=>hn(le)})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_CreateChannelFlowCommand")}(),Xh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{MemberArn:[],SubChannelId:[],Type:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_CreateChannelMembershipCommand")}(),Qh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/moderators`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{ChannelModeratorArn:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_CreateChannelModeratorCommand")}(),Zh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteChannelCommand")}(),ud=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/bans/{MemberArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteChannelBanCommand")}(),qh=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channel-flows/{ChannelFlowArn}`;ie=mn(ie,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteChannelFlowCommand")}(),ep=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships/{MemberArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);const Se=We({"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteChannelMembershipCommand")}(),tp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages/{MessageId}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const Se=We({"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteChannelMessageCommand")}(),np=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"ChannelModeratorArn",()=>v.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteChannelModeratorCommand")}(),ip=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/app-instances/{AppInstanceArn}/streaming-configurations`;ie=mn(ie,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DeleteMessagingStreamingConfigurationsCommand")}(),Tf=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelCommand")}(),rp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/bans/{MemberArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelBanCommand")}(),op=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channel-flows/{ChannelFlowArn}`;ie=mn(ie,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelFlowCommand")}(),sp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships/{MemberArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);const Se=We({"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelMembershipCommand")}(),ap=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({scope:[,"app-instance-user-membership"],"app-instance-user-arn":[,sn(v.AppInstanceUserArn,"AppInstanceUserArn")]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelMembershipForAppInstanceUserCommand")}(),lp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({scope:[,"app-instance-user-moderated-channel"],"app-instance-user-arn":[,sn(v.AppInstanceUserArn,"AppInstanceUserArn")]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelModeratedByAppInstanceUserCommand")}(),dp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/moderators/{ChannelModeratorArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"ChannelModeratorArn",()=>v.ChannelModeratorArn,"{ChannelModeratorArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DescribeChannelModeratorCommand")}(),cp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/channel-flow/{ChannelFlowArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"DELETE",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_DisassociateChannelFlowCommand")}(),up=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_GetChannelMembershipPreferencesCommand")}(),fp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages/{MessageId}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const Se=We({"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_GetChannelMessageCommand")}(),hp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages/{MessageId}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const Se=We({scope:[,"message-status"],"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_GetChannelMessageStatusCommand")}(),pp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/endpoints/messaging-session`;let Se;return Se="",new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_GetMessagingSessionEndpointCommand")}(),mp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/app-instances/{AppInstanceArn}/streaming-configurations`;ie=mn(ie,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_GetMessagingStreamingConfigurationsCommand")}(),gp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/bans`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelBansCommand")}(),Sp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channel-flows`,Se=We({"app-instance-arn":[,sn(v.AppInstanceArn,"AppInstanceArn")],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelFlowsCommand")}(),vp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({type:[,v.Type],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken],"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelMembershipsCommand")}(),yp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer}),ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels`,Se=We({scope:[,"app-instance-user-memberships"],"app-instance-user-arn":[,v.AppInstanceUserArn],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelMembershipsForAppInstanceUserCommand")}(),bp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({"sort-order":[,v.SortOrder],"not-before":[()=>v.NotBefore!==void 0,()=>(v.NotBefore.toISOString().split(".")[0]+"Z").toString()],"not-after":[()=>v.NotAfter!==void 0,()=>(v.NotAfter.toISOString().split(".")[0]+"Z").toString()],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken],"sub-channel-id":[,v.SubChannelId]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelMessagesCommand")}(),Cp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/moderators`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelModeratorsCommand")}(),Ep=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer}),ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels`,Se=We({"app-instance-arn":[,sn(v.AppInstanceArn,"AppInstanceArn")],privacy:[,v.Privacy],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelsCommand")}(),Tp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels`,Se=We({scope:[,"channel-flow-associations"],"channel-flow-arn":[,sn(v.ChannelFlowArn,"ChannelFlowArn")],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelsAssociatedWithChannelFlowCommand")}(),Ip=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer}),ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels`,Se=We({scope:[,"app-instance-user-moderated-channels"],"app-instance-user-arn":[,v.AppInstanceUserArn],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListChannelsModeratedByAppInstanceUserCommand")}(),wp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/subchannels`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);const Se=We({"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListSubChannelsCommand")}(),Op=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/tags`,Se=We({arn:[,sn(v.ResourceARN,"ResourceARN")]});let le;return new Mn({protocol:B,hostname:I,port:H,method:"GET",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_ListTagsForResourceCommand")}(),Rp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/expiration-settings`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{ExpirationSettings:le=>hn(le)})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_PutChannelExpirationSettingsCommand")}(),Mp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/memberships/{MemberArn}/preferences`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MemberArn",()=>v.MemberArn,"{MemberArn}",!1);let Se;return Se=JSON.stringify(nt(v,{Preferences:le=>hn(le)})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_PutChannelMembershipPreferencesCommand")}(),Pp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/app-instances/{AppInstanceArn}/streaming-configurations`;ie=mn(ie,v,"AppInstanceArn",()=>v.AppInstanceArn,"{AppInstanceArn}",!1);let Se;return Se=JSON.stringify(nt(v,{StreamingConfigurations:le=>hn(le)})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_PutMessagingStreamingConfigurationsCommand")}(),Ap=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages/{MessageId}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);const Se=We({operation:[,"redact"]});let le;return le=JSON.stringify(nt(v,{SubChannelId:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_RedactChannelMessageCommand")}(),_p=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer}),ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels`,Se=We({operation:[,"search"],"max-results":[()=>v.MaxResults!==void 0,()=>v.MaxResults.toString()],"next-token":[,v.NextToken]});let le;return le=JSON.stringify(nt(v,{Fields:rt=>hn(rt)})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_SearchChannelsCommand")}(),kp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{ClientRequestToken:[!0,le=>le??Rn()],Content:[],ContentType:[],MessageAttributes:le=>hn(le),Metadata:[],Persistence:[],PushNotification:le=>hn(le),SubChannelId:[],Type:[]})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_SendChannelMessageCommand")}(),Dp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/tags`,Se=We({operation:[,"tag-resource"]});let le;return le=JSON.stringify(nt(v,{ResourceARN:[],Tags:rt=>hn(rt)})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_TagResourceCommand")}(),Lp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"},ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/tags`,Se=We({operation:[,"untag-resource"]});let le;return le=JSON.stringify(nt(v,{ResourceARN:[],TagKeys:rt=>hn(rt)})),new Mn({protocol:B,hostname:I,port:H,method:"POST",headers:fe,path:ie,query:Se,body:le})});return o(function(b,I){return T.apply(this,arguments)},"se_UntagResourceCommand")}(),Np=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return Se=JSON.stringify(nt(v,{Metadata:[],Mode:[],Name:[]})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_UpdateChannelCommand")}(),xp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe={"content-type":"application/json"};let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channel-flows/{ChannelFlowArn}`;ie=mn(ie,v,"ChannelFlowArn",()=>v.ChannelFlowArn,"{ChannelFlowArn}",!1);let Se;return Se=JSON.stringify(nt(v,{Name:[],Processors:le=>hn(le)})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_UpdateChannelFlowCommand")}(),Bp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"content-type":"application/json","x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/messages/{MessageId}`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1),ie=mn(ie,v,"MessageId",()=>v.MessageId,"{MessageId}",!1);let Se;return Se=JSON.stringify(nt(v,{Content:[],ContentType:[],Metadata:[],SubChannelId:[]})),new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_UpdateChannelMessageCommand")}(),Fp=function(){var T=Object(d.coroutine)(function*(v,b){const{hostname:I,protocol:B="https",port:H,path:K}=yield b.endpoint(),fe=We({},mi,{"x-amz-chime-bearer":v.ChimeBearer});let ie=`${K!=null&&K.endsWith("/")?K.slice(0,-1):K||""}/channels/{ChannelArn}/readMarker`;ie=mn(ie,v,"ChannelArn",()=>v.ChannelArn,"{ChannelArn}",!1);let Se;return new Mn({protocol:B,hostname:I,port:H,method:"PUT",headers:fe,path:ie,body:Se})});return o(function(b,I){return T.apply(this,arguments)},"se_UpdateChannelReadMarkerCommand")}(),Vp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Up(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_AssociateChannelFlowCommand")}(),Up=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_AssociateChannelFlowCommandError")}(),Hp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return zp(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{BatchChannelMemberships:hn,Errors:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_BatchCreateChannelMembershipCommand")}(),zp=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_BatchCreateChannelMembershipCommandError")}(),Wp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return jp(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{CallbackId:At,ChannelArn:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ChannelFlowCallbackCommand")}(),jp=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ChannelFlowCallbackCommandError")}(),Gp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return $p(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelCommand")}(),$p=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelCommandError")}(),Kp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Jp(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,Member:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelBanCommand")}(),Jp=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelBanCommandError")}(),Yp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Xp(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelFlowArn:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelFlowCommand")}(),Xp=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelFlowCommandError")}(),Qp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return Zp(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,Member:hn,SubChannelId:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelMembershipCommand")}(),Zp=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelMembershipCommandError")}(),qp=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return em(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,ChannelModerator:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelModeratorCommand")}(),em=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_CreateChannelModeratorCommandError")}(),tm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return nm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelCommand")}(),nm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelCommandError")}(),im=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return rm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelBanCommand")}(),rm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelBanCommandError")}(),om=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return sm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelFlowCommand")}(),sm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelFlowCommandError")}(),am=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return lm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelMembershipCommand")}(),lm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelMembershipCommandError")}(),dm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return cm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelMessageCommand")}(),cm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelMessageCommandError")}(),um=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return fm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelModeratorCommand")}(),fm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteChannelModeratorCommandError")}(),hm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return pm(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommand")}(),pm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DeleteMessagingStreamingConfigurationsCommandError")}(),mm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return gm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Channel:K=>Lg(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelCommand")}(),gm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelCommandError")}(),Sm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return vm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelBan:K=>Ng(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelBanCommand")}(),vm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelBanCommandError")}(),ym=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return bm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelFlow:K=>xg(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelFlowCommand")}(),bm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelFlowCommandError")}(),Cm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Em(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelMembership:K=>Bg(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelMembershipCommand")}(),Em=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelMembershipCommandError")}(),Tm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Im(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelMembership:K=>If(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommand")}(),Im=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelMembershipForAppInstanceUserCommandError")}(),wm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Om(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Channel:K=>wf(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommand")}(),Om=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelModeratedByAppInstanceUserCommandError")}(),Rm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Mm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelModerator:K=>Wg(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelModeratorCommand")}(),Mm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DescribeChannelModeratorCommandError")}(),Pm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Am(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_DisassociateChannelFlowCommand")}(),Am=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_DisassociateChannelFlowCommandError")}(),_m=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return km(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,Member:hn,Preferences:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommand")}(),km=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_GetChannelMembershipPreferencesCommandError")}(),Dm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Lm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelMessage:K=>Vg(K,b)});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_GetChannelMessageCommand")}(),Lm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_GetChannelMessageCommandError")}(),Nm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return xm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Status:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_GetChannelMessageStatusCommand")}(),xm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_GetChannelMessageStatusCommandError")}(),Bm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Fm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Endpoint:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_GetMessagingSessionEndpointCommand")}(),Fm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_GetMessagingSessionEndpointCommandError")}(),Vm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Um(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{StreamingConfigurations:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommand")}(),Um=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_GetMessagingStreamingConfigurationsCommandError")}(),Hm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return zm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,ChannelBans:hn,NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelBansCommand")}(),zm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelBansCommandError")}(),Wm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return jm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelFlows:hn,NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelFlowsCommand")}(),jm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelFlowsCommandError")}(),Gm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return $m(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,ChannelMemberships:hn,NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelMembershipsCommand")}(),$m=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelMembershipsCommandError")}(),Km=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Jm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelMemberships:K=>Fg(K,b),NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommand")}(),Jm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelMembershipsForAppInstanceUserCommandError")}(),Ym=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Xm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,ChannelMessages:K=>Hg(K,b),NextToken:At,SubChannelId:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelMessagesCommand")}(),Xm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelMessagesCommandError")}(),Qm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Zm(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,ChannelModerators:hn,NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelModeratorsCommand")}(),Zm=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelModeratorsCommandError")}(),qm=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return eg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Channels:K=>Of(K,b),NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelsCommand")}(),eg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelsCommandError")}(),tg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return ng(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Channels:hn,NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommand")}(),ng=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelsAssociatedWithChannelFlowCommandError")}(),ig=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return rg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Channels:K=>zg(K,b),NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommand")}(),rg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListChannelsModeratedByAppInstanceUserCommandError")}(),og=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return sg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,NextToken:At,SubChannels:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListSubChannelsCommand")}(),sg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListSubChannelsCommandError")}(),ag=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return lg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Tags:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_ListTagsForResourceCommand")}(),lg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_ListTagsForResourceCommandError")}(),dg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return cg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,ExpirationSettings:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_PutChannelExpirationSettingsCommand")}(),cg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_PutChannelExpirationSettingsCommandError")}(),ug=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return fg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,Member:hn,Preferences:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommand")}(),fg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_PutChannelMembershipPreferencesCommandError")}(),hg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return pg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{StreamingConfigurations:hn});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommand")}(),pg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"NotFoundException":case"com.amazonaws.chimesdkmessaging#NotFoundException":throw yield ta(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_PutMessagingStreamingConfigurationsCommandError")}(),mg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return gg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,MessageId:At,SubChannelId:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_RedactChannelMessageCommand")}(),gg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_RedactChannelMessageCommandError")}(),Sg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return vg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{Channels:K=>Of(K,b),NextToken:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_SearchChannelsCommand")}(),vg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_SearchChannelsCommandError")}(),yg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==201&&v.statusCode>=300)return bg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,MessageId:At,Status:hn,SubChannelId:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_SendChannelMessageCommand")}(),bg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_SendChannelMessageCommandError")}(),Cg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Eg(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_TagResourceCommand")}(),Eg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ResourceLimitExceededException":case"com.amazonaws.chimesdkmessaging#ResourceLimitExceededException":throw yield Ga(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_TagResourceCommandError")}(),Tg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==204&&v.statusCode>=300)return Ig(v,b);const I=We({$metadata:W(v)});return yield gs(v.body,b),I});return o(function(b,I){return T.apply(this,arguments)},"de_UntagResourceCommand")}(),Ig=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_UntagResourceCommandError")}(),wg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Og(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelCommand")}(),Og=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelCommandError")}(),Rg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Mg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelFlowArn:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelFlowCommand")}(),Mg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelFlowCommandError")}(),Pg=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return Ag(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At,MessageId:At,Status:hn,SubChannelId:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelMessageCommand")}(),Ag=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelMessageCommandError")}(),_g=function(){var T=Object(d.coroutine)(function*(v,b){if(v.statusCode!==200&&v.statusCode>=300)return kg(v,b);const I=We({$metadata:W(v)}),B=sn(Qn(yield ii(v.body,b)),"body"),H=nt(B,{ChannelArn:At});return Object.assign(I,H),I});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelReadMarkerCommand")}(),kg=function(){var T=Object(d.coroutine)(function*(v,b){const I={...v,body:yield Fn(v.body,b)},B=Vn(v,I.body);switch(B){case"BadRequestException":case"com.amazonaws.chimesdkmessaging#BadRequestException":throw yield jn(I,b);case"ConflictException":case"com.amazonaws.chimesdkmessaging#ConflictException":throw yield xr(I,b);case"ForbiddenException":case"com.amazonaws.chimesdkmessaging#ForbiddenException":throw yield Dn(I,b);case"ServiceFailureException":case"com.amazonaws.chimesdkmessaging#ServiceFailureException":throw yield Ln(I,b);case"ServiceUnavailableException":case"com.amazonaws.chimesdkmessaging#ServiceUnavailableException":throw yield Nn(I,b);case"ThrottledClientException":case"com.amazonaws.chimesdkmessaging#ThrottledClientException":throw yield xn(I,b);case"UnauthorizedClientException":case"com.amazonaws.chimesdkmessaging#UnauthorizedClientException":throw yield Bn(I,b);default:const H=I.body;return kn({output:v,parsedBody:H,errorCode:B})}});return o(function(b,I){return T.apply(this,arguments)},"de_UpdateChannelReadMarkerCommandError")}(),kn=Te(ko),jn=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new Zl({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_BadRequestExceptionRes")}(),xr=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new ql({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_ConflictExceptionRes")}(),Dn=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new ed({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_ForbiddenExceptionRes")}(),ta=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new td({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_NotFoundExceptionRes")}(),Ga=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new sd({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_ResourceLimitExceededExceptionRes")}(),Ln=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new nd({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_ServiceFailureExceptionRes")}(),Nn=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new id({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_ServiceUnavailableExceptionRes")}(),xn=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new rd({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_ThrottledClientExceptionRes")}(),Bn=function(){var T=Object(d.coroutine)(function*(v,b){const I=We({}),B=v.body,H=nt(B,{Code:At,Message:At});Object.assign(I,H);const K=new od({$metadata:W(v),...I});return et(K,v.body)});return o(function(b,I){return T.apply(this,arguments)},"de_UnauthorizedClientExceptionRes")}(),Dg=o((T,v)=>nt(T,{ReadMarkerTimestamp:b=>sn(pr(sr(b))),SubChannelId:At,Type:At}),"de_AppInstanceUserMembershipSummary"),Lg=o((T,v)=>nt(T,{ChannelArn:At,ChannelFlowArn:At,CreatedBy:hn,CreatedTimestamp:b=>sn(pr(sr(b))),ElasticChannelConfiguration:hn,ExpirationSettings:hn,LastMessageTimestamp:b=>sn(pr(sr(b))),LastUpdatedTimestamp:b=>sn(pr(sr(b))),Metadata:At,Mode:At,Name:At,Privacy:At}),"de_Channel"),Ng=o((T,v)=>nt(T,{ChannelArn:At,CreatedBy:hn,CreatedTimestamp:b=>sn(pr(sr(b))),Member:hn}),"de_ChannelBan"),xg=o((T,v)=>nt(T,{ChannelFlowArn:At,CreatedTimestamp:b=>sn(pr(sr(b))),LastUpdatedTimestamp:b=>sn(pr(sr(b))),Name:At,Processors:hn}),"de_ChannelFlow"),Bg=o((T,v)=>nt(T,{ChannelArn:At,CreatedTimestamp:b=>sn(pr(sr(b))),InvitedBy:hn,LastUpdatedTimestamp:b=>sn(pr(sr(b))),Member:hn,SubChannelId:At,Type:At}),"de_ChannelMembership"),If=o((T,v)=>nt(T,{AppInstanceUserMembershipSummary:b=>Dg(b,v),ChannelSummary:b=>Rc(b,v)}),"de_ChannelMembershipForAppInstanceUserSummary"),Fg=o((T,v)=>(T||[]).filter(I=>I!=null).map(I=>If(I,v)),"de_ChannelMembershipForAppInstanceUserSummaryList"),Vg=o((T,v)=>nt(T,{ChannelArn:At,Content:At,ContentType:At,CreatedTimestamp:b=>sn(pr(sr(b))),LastEditedTimestamp:b=>sn(pr(sr(b))),LastUpdatedTimestamp:b=>sn(pr(sr(b))),MessageAttributes:hn,MessageId:At,Metadata:At,Persistence:At,Redacted:ml,Sender:hn,Status:hn,SubChannelId:At,Type:At}),"de_ChannelMessage"),Ug=o((T,v)=>nt(T,{Content:At,ContentType:At,CreatedTimestamp:b=>sn(pr(sr(b))),LastEditedTimestamp:b=>sn(pr(sr(b))),LastUpdatedTimestamp:b=>sn(pr(sr(b))),MessageAttributes:hn,MessageId:At,Metadata:At,Redacted:ml,Sender:hn,Status:hn,Type:At}),"de_ChannelMessageSummary"),Hg=o((T,v)=>(T||[]).filter(I=>I!=null).map(I=>Ug(I,v)),"de_ChannelMessageSummaryList"),wf=o((T,v)=>nt(T,{ChannelSummary:b=>Rc(b,v)}),"de_ChannelModeratedByAppInstanceUserSummary"),zg=o((T,v)=>(T||[]).filter(I=>I!=null).map(I=>wf(I,v)),"de_ChannelModeratedByAppInstanceUserSummaryList"),Wg=o((T,v)=>nt(T,{ChannelArn:At,CreatedBy:hn,CreatedTimestamp:b=>sn(pr(sr(b))),Moderator:hn}),"de_ChannelModerator"),Rc=o((T,v)=>nt(T,{ChannelArn:At,LastMessageTimestamp:b=>sn(pr(sr(b))),Metadata:At,Mode:At,Name:At,Privacy:At}),"de_ChannelSummary"),Of=o((T,v)=>(T||[]).filter(I=>I!=null).map(I=>Rc(I,v)),"de_ChannelSummaryList");var Mc,Pc;const W=o(T=>({httpStatusCode:T.statusCode,requestId:(Pc=(Mc=T.headers["x-amzn-requestid"])!==null&&Mc!==void 0?Mc:T.headers["x-amzn-request-id"])!==null&&Pc!==void 0?Pc:T.headers["x-amz-request-id"],extendedRequestId:T.headers["x-amz-id-2"],cfId:T.headers["x-amz-cf-id"]}),"Aws_restJson1_deserializeMetadata"),gs=o(function(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Uint8Array,v=arguments.length>1?arguments[1]:void 0;return T instanceof Uint8Array?Promise.resolve(T):v.streamCollector(T)||Promise.resolve(new Uint8Array)},"collectBody"),jg=o((T,v)=>gs(T,v).then(b=>v.utf8Encoder(b)),"collectBodyString"),mi=o(T=>T!=null&&T!==""&&(!Object.getOwnPropertyNames(T).includes("length")||T.length!=0)&&(!Object.getOwnPropertyNames(T).includes("size")||T.size!=0),"isSerializableHeaderValue"),ii=o((T,v)=>jg(T,v).then(b=>b.length?JSON.parse(b):{}),"parseBody"),Fn=function(){var T=Object(d.coroutine)(function*(v,b){const I=yield ii(v,b);var B;return I.message=(B=I.message)!==null&&B!==void 0?B:I.Message,I});return o(function(b,I){return T.apply(this,arguments)},"parseErrorBody")}(),Vn=o((T,v)=>{const b=o((H,K)=>Object.keys(H).find(fe=>fe.toLowerCase()===K.toLowerCase()),"findKey"),I=o(H=>{let K=H;return typeof K=="number"&&(K=K.toString()),K.indexOf(",")>=0&&(K=K.split(",")[0]),K.indexOf(":")>=0&&(K=K.split(":")[0]),K.indexOf("#")>=0&&(K=K.split("#")[1]),K},"sanitizeErrorCode"),B=b(T.headers,"x-amzn-errortype");if(B!==void 0)return I(T.headers[B]);if(v.code!==void 0)return I(v.code);if(v.__type!==void 0)return I(v.__type)},"loadRestJsonErrorCode");class fd extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,fd.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"AssociateChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return jh(v,b)}deserialize(v,b){return Vp(v,b)}constructor(v){super(),this.input=v}}o(fd,"AssociateChannelFlowCommand_AssociateChannelFlowCommand");class hd extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,hd.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"BatchCreateChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:mu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Gh(v,b)}deserialize(v,b){return Hp(v,b)}constructor(v){super(),this.input=v}}o(hd,"BatchCreateChannelMembershipCommand_BatchCreateChannelMembershipCommand");class pd extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,pd.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ChannelFlowCallbackCommand",inputFilterSensitiveLog:Eu,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return $h(v,b)}deserialize(v,b){return Wp(v,b)}constructor(v){super(),this.input=v}}o(pd,"ChannelFlowCallbackCommand_ChannelFlowCallbackCommand");class md extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,md.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelBanCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:ku},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Jh(v,b)}deserialize(v,b){return Kp(v,b)}constructor(v){super(),this.input=v}}o(md,"CreateChannelBanCommand_CreateChannelBanCommand");class gd extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,gd.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelCommand",inputFilterSensitiveLog:_u,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Kh(v,b)}deserialize(v,b){return Gp(v,b)}constructor(v){super(),this.input=v}}o(gd,"CreateChannelCommand_CreateChannelCommand");class Sd extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Sd.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelFlowCommand",inputFilterSensitiveLog:Du,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Yh(v,b)}deserialize(v,b){return Yp(v,b)}constructor(v){super(),this.input=v}}o(Sd,"CreateChannelFlowCommand_CreateChannelFlowCommand");class Oi extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Oi.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Lu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Xh(v,b)}deserialize(v,b){return Qp(v,b)}constructor(v){super(),this.input=v}}o(Oi,"CreateChannelMembershipCommand_CreateChannelMembershipCommand");class yn extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,yn.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"CreateChannelModeratorCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Nu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Qh(v,b)}deserialize(v,b){return qp(v,b)}constructor(v){super(),this.input=v}}o(yn,"CreateChannelModeratorCommand_CreateChannelModeratorCommand");class Ia extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ia.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelBanCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return ud(v,b)}deserialize(v,b){return im(v,b)}constructor(v){super(),this.input=v}}o(Ia,"DeleteChannelBanCommand_DeleteChannelBanCommand");class Ki extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ki.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Zh(v,b)}deserialize(v,b){return tm(v,b)}constructor(v){super(),this.input=v}}o(Ki,"DeleteChannelCommand_DeleteChannelCommand");class $a extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,$a.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return qh(v,b)}deserialize(v,b){return om(v,b)}constructor(v){super(),this.input=v}}o($a,"DeleteChannelFlowCommand_DeleteChannelFlowCommand");class qi extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,qi.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return ep(v,b)}deserialize(v,b){return am(v,b)}constructor(v){super(),this.input=v}}o(qi,"DeleteChannelMembershipCommand_DeleteChannelMembershipCommand");class Ue extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ue.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelMessageCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return tp(v,b)}deserialize(v,b){return dm(v,b)}constructor(v){super(),this.input=v}}o(Ue,"DeleteChannelMessageCommand_DeleteChannelMessageCommand");class co extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,co.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteChannelModeratorCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return np(v,b)}deserialize(v,b){return um(v,b)}constructor(v){super(),this.input=v}}o(co,"DeleteChannelModeratorCommand_DeleteChannelModeratorCommand");class Ka extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ka.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DeleteMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return ip(v,b)}deserialize(v,b){return hm(v,b)}constructor(v){super(),this.input=v}}o(Ka,"DeleteMessagingStreamingConfigurationsCommand_DeleteMessagingStreamingConfigurationsCommand");class oi extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,oi.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelBanCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Bu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return rp(v,b)}deserialize(v,b){return Sm(v,b)}constructor(v){super(),this.input=v}}o(oi,"DescribeChannelBanCommand_DescribeChannelBanCommand");class Br extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Br.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:xu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Tf(v,b)}deserialize(v,b){return mm(v,b)}constructor(v){super(),this.input=v}}o(Br,"DescribeChannelCommand_DescribeChannelCommand");class Ar extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ar.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Fu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return op(v,b)}deserialize(v,b){return ym(v,b)}constructor(v){super(),this.input=v}}o(Ar,"DescribeChannelFlowCommand_DescribeChannelFlowCommand");class Ja extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ja.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Vu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return sp(v,b)}deserialize(v,b){return Cm(v,b)}constructor(v){super(),this.input=v}}o(Ja,"DescribeChannelMembershipCommand_DescribeChannelMembershipCommand");class na extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,na.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelMembershipForAppInstanceUserCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Uu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return ap(v,b)}deserialize(v,b){return Tm(v,b)}constructor(v){super(),this.input=v}}o(na,"DescribeChannelMembershipForAppInstanceUserCommand_DescribeChannelMembershipForAppInstanceUserCommand");class ft extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,ft.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Hu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return lp(v,b)}deserialize(v,b){return wm(v,b)}constructor(v){super(),this.input=v}}o(ft,"DescribeChannelModeratedByAppInstanceUserCommand_DescribeChannelModeratedByAppInstanceUserCommand");class Fr extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Fr.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DescribeChannelModeratorCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:zu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return dp(v,b)}deserialize(v,b){return Rm(v,b)}constructor(v){super(),this.input=v}}o(Fr,"DescribeChannelModeratorCommand_DescribeChannelModeratorCommand");class Rl extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Rl.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"DisassociateChannelFlowCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return cp(v,b)}deserialize(v,b){return Pm(v,b)}constructor(v){super(),this.input=v}}o(Rl,"DisassociateChannelFlowCommand_DisassociateChannelFlowCommand");class Ml extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ml.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMembershipPreferencesCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:Wu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return up(v,b)}deserialize(v,b){return _m(v,b)}constructor(v){super(),this.input=v}}o(Ml,"GetChannelMembershipPreferencesCommand_GetChannelMembershipPreferencesCommand");class Ya extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ya.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:ju},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return fp(v,b)}deserialize(v,b){return Dm(v,b)}constructor(v){super(),this.input=v}}o(Ya,"GetChannelMessageCommand_GetChannelMessageCommand");class Xa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Xa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"GetChannelMessageStatusCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return hp(v,b)}deserialize(v,b){return Nm(v,b)}constructor(v){super(),this.input=v}}o(Xa,"GetChannelMessageStatusCommand_GetChannelMessageStatusCommand");class Qa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Qa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingSessionEndpointCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return pp(v,b)}deserialize(v,b){return Bm(v,b)}constructor(v){super(),this.input=v}}o(Qa,"GetMessagingSessionEndpointCommand_GetMessagingSessionEndpointCommand");class ia extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,ia.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"GetMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return mp(v,b)}deserialize(v,b){return Vm(v,b)}constructor(v){super(),this.input=v}}o(ia,"GetMessagingStreamingConfigurationsCommand_GetMessagingStreamingConfigurationsCommand");class pa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,pa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelBansCommand",inputFilterSensitiveLog:Gu,outputFilterSensitiveLog:$u},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return gp(v,b)}deserialize(v,b){return Hm(v,b)}constructor(v){super(),this.input=v}}o(pa,"ListChannelBansCommand_ListChannelBansCommand");class wa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,wa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelFlowsCommand",inputFilterSensitiveLog:Ku,outputFilterSensitiveLog:Ju},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Sp(v,b)}deserialize(v,b){return Wm(v,b)}constructor(v){super(),this.input=v}}o(wa,"ListChannelFlowsCommand_ListChannelFlowsCommand");class Oa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Oa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsCommand",inputFilterSensitiveLog:Yu,outputFilterSensitiveLog:Xu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return vp(v,b)}deserialize(v,b){return Gm(v,b)}constructor(v){super(),this.input=v}}o(Oa,"ListChannelMembershipsCommand_ListChannelMembershipsCommand");class ma extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,ma.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMembershipsForAppInstanceUserCommand",inputFilterSensitiveLog:Qu,outputFilterSensitiveLog:Zu},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return yp(v,b)}deserialize(v,b){return Km(v,b)}constructor(v){super(),this.input=v}}o(ma,"ListChannelMembershipsForAppInstanceUserCommand_ListChannelMembershipsForAppInstanceUserCommand");class Za extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Za.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelMessagesCommand",inputFilterSensitiveLog:qu,outputFilterSensitiveLog:ef},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return bp(v,b)}deserialize(v,b){return Ym(v,b)}constructor(v){super(),this.input=v}}o(Za,"ListChannelMessagesCommand_ListChannelMessagesCommand");class qa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,qa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelModeratorsCommand",inputFilterSensitiveLog:tf,outputFilterSensitiveLog:nf},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Cp(v,b)}deserialize(v,b){return Qm(v,b)}constructor(v){super(),this.input=v}}o(qa,"ListChannelModeratorsCommand_ListChannelModeratorsCommand");class Ra extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ra.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsAssociatedWithChannelFlowCommand",inputFilterSensitiveLog:sf,outputFilterSensitiveLog:af},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Tp(v,b)}deserialize(v,b){return tg(v,b)}constructor(v){super(),this.input=v}}o(Ra,"ListChannelsAssociatedWithChannelFlowCommand_ListChannelsAssociatedWithChannelFlowCommand");class ra extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,ra.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsCommand",inputFilterSensitiveLog:rf,outputFilterSensitiveLog:of},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Ep(v,b)}deserialize(v,b){return qm(v,b)}constructor(v){super(),this.input=v}}o(ra,"ListChannelsCommand_ListChannelsCommand");class Ei extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ei.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListChannelsModeratedByAppInstanceUserCommand",inputFilterSensitiveLog:lf,outputFilterSensitiveLog:df},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Ip(v,b)}deserialize(v,b){return ig(v,b)}constructor(v){super(),this.input=v}}o(Ei,"ListChannelsModeratedByAppInstanceUserCommand_ListChannelsModeratedByAppInstanceUserCommand");class bi extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,bi.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListSubChannelsCommand",inputFilterSensitiveLog:cf,outputFilterSensitiveLog:uf},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return wp(v,b)}deserialize(v,b){return og(v,b)}constructor(v){super(),this.input=v}}o(bi,"ListSubChannelsCommand_ListSubChannelsCommand");class el extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,el.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"ListTagsForResourceCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:ff},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Op(v,b)}deserialize(v,b){return ag(v,b)}constructor(v){super(),this.input=v}}o(el,"ListTagsForResourceCommand_ListTagsForResourceCommand");class tl extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,tl.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelExpirationSettingsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Rp(v,b)}deserialize(v,b){return dg(v,b)}constructor(v){super(),this.input=v}}o(tl,"PutChannelExpirationSettingsCommand_PutChannelExpirationSettingsCommand");class Pl extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Pl.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"PutChannelMembershipPreferencesCommand",inputFilterSensitiveLog:hf,outputFilterSensitiveLog:pf},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Mp(v,b)}deserialize(v,b){return ug(v,b)}constructor(v){super(),this.input=v}}o(Pl,"PutChannelMembershipPreferencesCommand_PutChannelMembershipPreferencesCommand");class Al extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Al.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"PutMessagingStreamingConfigurationsCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Pp(v,b)}deserialize(v,b){return hg(v,b)}constructor(v){super(),this.input=v}}o(Al,"PutMessagingStreamingConfigurationsCommand_PutMessagingStreamingConfigurationsCommand");class Ma extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Ma.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"RedactChannelMessageCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Ap(v,b)}deserialize(v,b){return mg(v,b)}constructor(v){super(),this.input=v}}o(Ma,"RedactChannelMessageCommand_RedactChannelMessageCommand");class nl extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,nl.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"SearchChannelsCommand",inputFilterSensitiveLog:mf,outputFilterSensitiveLog:gf},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return _p(v,b)}deserialize(v,b){return Sg(v,b)}constructor(v){super(),this.input=v}}o(nl,"SearchChannelsCommand_SearchChannelsCommand");class ks extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,ks.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"SendChannelMessageCommand",inputFilterSensitiveLog:Sf,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return kp(v,b)}deserialize(v,b){return yg(v,b)}constructor(v){super(),this.input=v}}o(ks,"SendChannelMessageCommand_SendChannelMessageCommand");class Pa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,Pa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:vf,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Dp(v,b)}deserialize(v,b){return Cg(v,b)}constructor(v){super(),this.input=v}}o(Pa,"TagResourceCommand_TagResourceCommand");class _l extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,_l.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"UntagResourceCommand",inputFilterSensitiveLog:yf,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Lp(v,b)}deserialize(v,b){return Tg(v,b)}constructor(v){super(),this.input=v}}o(_l,"UntagResourceCommand_UntagResourceCommand");class il extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,il.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelCommand",inputFilterSensitiveLog:bf,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Np(v,b)}deserialize(v,b){return wg(v,b)}constructor(v){super(),this.input=v}}o(il,"UpdateChannelCommand_UpdateChannelCommand");class oa extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,oa.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelFlowCommand",inputFilterSensitiveLog:Cf,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return xp(v,b)}deserialize(v,b){return Rg(v,b)}constructor(v){super(),this.input=v}}o(oa,"UpdateChannelFlowCommand_UpdateChannelFlowCommand");class rl extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,rl.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelMessageCommand",inputFilterSensitiveLog:Ef,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Bp(v,b)}deserialize(v,b){return Pg(v,b)}constructor(v){super(),this.input=v}}o(rl,"UpdateChannelMessageCommand_UpdateChannelMessageCommand");class kl extends In{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(v,b,I){this.middlewareStack.use(Ot(b,this.serialize,this.deserialize)),this.middlewareStack.use(Lt(b,kl.getEndpointParameterInstructions()));const B=v.concat(this.middlewareStack),{logger:H}=b,ie={logger:H,clientName:"ChimeSDKMessagingClient",commandName:"UpdateChannelReadMarkerCommand",inputFilterSensitiveLog:le=>le,outputFilterSensitiveLog:le=>le},{requestHandler:Se}=b;return B.resolve(le=>Se.handle(le.request,I||{}),ie)}serialize(v,b){return Fp(v,b)}deserialize(v,b){return _g(v,b)}constructor(v){super(),this.input=v}}o(kl,"UpdateChannelReadMarkerCommand_UpdateChannelReadMarkerCommand");const vd={AssociateChannelFlowCommand:fd,BatchCreateChannelMembershipCommand:hd,ChannelFlowCallbackCommand:pd,CreateChannelCommand:gd,CreateChannelBanCommand:md,CreateChannelFlowCommand:Sd,CreateChannelMembershipCommand:Oi,CreateChannelModeratorCommand:yn,DeleteChannelCommand:Ki,DeleteChannelBanCommand:Ia,DeleteChannelFlowCommand:$a,DeleteChannelMembershipCommand:qi,DeleteChannelMessageCommand:Ue,DeleteChannelModeratorCommand:co,DeleteMessagingStreamingConfigurationsCommand:Ka,DescribeChannelCommand:Br,DescribeChannelBanCommand:oi,DescribeChannelFlowCommand:Ar,DescribeChannelMembershipCommand:Ja,DescribeChannelMembershipForAppInstanceUserCommand:na,DescribeChannelModeratedByAppInstanceUserCommand:ft,DescribeChannelModeratorCommand:Fr,DisassociateChannelFlowCommand:Rl,GetChannelMembershipPreferencesCommand:Ml,GetChannelMessageCommand:Ya,GetChannelMessageStatusCommand:Xa,GetMessagingSessionEndpointCommand:Qa,GetMessagingStreamingConfigurationsCommand:ia,ListChannelBansCommand:pa,ListChannelFlowsCommand:wa,ListChannelMembershipsCommand:Oa,ListChannelMembershipsForAppInstanceUserCommand:ma,ListChannelMessagesCommand:Za,ListChannelModeratorsCommand:qa,ListChannelsCommand:ra,ListChannelsAssociatedWithChannelFlowCommand:Ra,ListChannelsModeratedByAppInstanceUserCommand:Ei,ListSubChannelsCommand:bi,ListTagsForResourceCommand:el,PutChannelExpirationSettingsCommand:tl,PutChannelMembershipPreferencesCommand:Pl,PutMessagingStreamingConfigurationsCommand:Al,RedactChannelMessageCommand:Ma,SearchChannelsCommand:nl,SendChannelMessageCommand:ks,TagResourceCommand:Pa,UntagResourceCommand:_l,UpdateChannelCommand:il,UpdateChannelFlowCommand:oa,UpdateChannelMessageCommand:rl,UpdateChannelReadMarkerCommand:kl};class jd extends _o{}o(jd,"ChimeSDKMessaging_ChimeSDKMessaging"),jl(vd,jd);const ct=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new pa(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Gd(T,v){return Do.apply(this,arguments)}o(Gd,"paginateListChannelBans");function Do(){return Do=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(ct(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Do.apply(this,arguments)}o(Do,"_paginateListChannelBans");const ol=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new wa(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function yd(T,v){return $d.apply(this,arguments)}o(yd,"paginateListChannelFlows");function $d(){return $d=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(ol(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),$d.apply(this,arguments)}o($d,"_paginateListChannelFlows");const Kd=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new ma(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Rf(T,v){return Aa.apply(this,arguments)}o(Rf,"paginateListChannelMembershipsForAppInstanceUser");function Aa(){return Aa=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(Kd(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Aa.apply(this,arguments)}o(Aa,"_paginateListChannelMembershipsForAppInstanceUser");const bd=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new Oa(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Mf(T,v){return Jd.apply(this,arguments)}o(Mf,"paginateListChannelMemberships");function Jd(){return Jd=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(bd(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Jd.apply(this,arguments)}o(Jd,"_paginateListChannelMemberships");const Ac=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new Za(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Yd(T,v){return Cd.apply(this,arguments)}o(Yd,"paginateListChannelMessages");function Cd(){return Cd=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(Ac(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Cd.apply(this,arguments)}o(Cd,"_paginateListChannelMessages");const _c=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new qa(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Qo(T,v){return Xd.apply(this,arguments)}o(Qo,"paginateListChannelModerators");function Xd(){return Xd=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(_c(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Xd.apply(this,arguments)}o(Xd,"_paginateListChannelModerators");const Pf=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new Ra(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function kc(T,v){return Ed.apply(this,arguments)}o(kc,"paginateListChannelsAssociatedWithChannelFlow");function Ed(){return Ed=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(Pf(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Ed.apply(this,arguments)}o(Ed,"_paginateListChannelsAssociatedWithChannelFlow");const Dc=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new Ei(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Lc(T,v){return Qd.apply(this,arguments)}o(Lc,"paginateListChannelsModeratedByAppInstanceUser");function Qd(){return Qd=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(Dc(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Qd.apply(this,arguments)}o(Qd,"_paginateListChannelsModeratedByAppInstanceUser");const Af=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new ra(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function _f(T,v){return Td.apply(this,arguments)}o(_f,"paginateListChannels");function Td(){return Td=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(Af(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Td.apply(this,arguments)}o(Td,"_paginateListChannels");const kf=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new bi(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function sl(T,v){return Dl.apply(this,arguments)}o(sl,"paginateListSubChannels");function Dl(){return Dl=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(kf(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Dl.apply(this,arguments)}o(Dl,"_paginateListSubChannels");const Df=function(){var T=Object(d.coroutine)(function*(v,b){for(var I=arguments.length,B=new Array(I>2?I-2:0),H=2;H<I;H++)B[H-2]=arguments[H];return yield v.send(new nl(b),...B)});return o(function(b,I){return T.apply(this,arguments)},"makePagedClientRequest")}();function Nc(T,v){return Ss.apply(this,arguments)}o(Nc,"paginateSearchChannels");function Ss(){return Ss=_wrapAsyncGenerator(function*(T,v){for(var b=arguments.length,I=new Array(b>2?b-2:0),B=2;B<b;B++)I[B-2]=arguments[B];let H=T.startingToken||void 0,K=!0,fe;for(;K;){if(v.NextToken=H,v.MaxResults=T.pageSize,T.client instanceof _o)fe=yield _awaitAsyncGenerator(Df(T.client,v,...I));else throw new Error("Invalid client, expected ChimeSDKMessaging | ChimeSDKMessagingClient");yield fe;const ie=H;H=fe.NextToken,K=!!(H&&(!T.stopOnSameToken||H!==ie))}}),Ss.apply(this,arguments)}o(Ss,"_paginateSearchChannels")},Zkgh:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class Qf{add(u){this.ids.add(u)}array(){return Array.from(this.ids.values()).sort((m,a)=>m-a)}contain(u){return this.ids.has(u)}forEach(u){this.ids.forEach(u)}empty(){return this.ids.size===0}size(){return this.ids.size}equal(u){if(!u)return this.ids.size===0;const m=this.array(),a=u.array();if(m.length!==a.length)return!1;for(let s=0;s<m.length;s++)if(m[s]!==a[s])return!1;return!0}clone(){return new Qf(this.array())}remove(u){this.ids.delete(u)}toJSON(){return this.array()}truncate(u){const m=this.array();return new Qf(m.splice(0,u))}constructor(u){this.ids=new Set(u)}},"DefaultVideoStreamIdSet");l.default=S},ZnGd:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("mlaT")),u=S(f("F7zz"));let m=o(class{name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const s of this.dependencies)s.cancel();this.logger.info(`Canceling ${this.name()}`),u.default.nextTick(()=>this.task.cancel()),this.canceled=!0,this.cancelPromise&&u.default.nextTick(()=>this.cancelPromise(new Error(`canceling ${this.name()}`)))}}logDependencies(){if(this.logger.getLogLevel()>h.default.INFO||!this.dependencies)return;const s=this.dependencies.filter(i=>i).map(i=>i.name()).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${s}`)}run(){if(this.promise)return this.promise;const s=this.dependencies?Promise.all(this.dependencies.map(i=>i==null?void 0:i.run())):Promise.resolve();return this.logDependencies(),this.ongoing=s.then(()=>this.task.run()),this.promise=new Promise((i,e)=>{this.cancelPromise=e,this.ongoing.then(i).catch(e)})}setParent(s){this.task.setParent(s)}constructor(s,i,e){this.logger=s,this.task=i,this.dependencies=e,this.canceled=!1}},"OnceTask");l.default=m},ZsEg:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(N,P,x,O){function M(D){return D instanceof x?D:new x(function(J){J(D)})}return o(M,"adopt"),new(x||(x=Promise))(function(D,J){function q(Ee){try{de(O.next(Ee))}catch(_e){J(_e)}}o(q,"fulfilled");function $(Ee){try{de(O.throw(Ee))}catch(_e){J(_e)}}o($,"rejected");function de(Ee){Ee.done?D(Ee.value):M(Ee.value).then(q,$)}o(de,"step"),de((O=O.apply(N,P||[])).next())})},h=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR")),m=h(f("Gs2/")),a=h(f("F7zz")),s=h(f("FMuk")),i=f("Aplu"),e=h(f("7TH8")),t=h(f("Z/hr")),n=f("6k+I"),r=h(f("6DYs")),c=h(f("KJDN")),p=h(f("QUzi")),g=h(f("u3ud")),d=h(f("wJ81")),y=h(f("wkYg")),E=h(f("sf8V")),w=h(f("my46")),k=f("0OOd");let V=o(class Bi{isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>{this.logger.info("Device change event callback is triggered"),this.handleDeviceChange()},(P=this.mediaDeviceWrapper)===null||P===void 0||P.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){var P;this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),(P=this.mediaDeviceWrapper)===null||P===void 0||P.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return this.deviceChangeObservers.size?!0:this.activeDevices.audio&&this.activeDevices.audio.constraints!==null||this.activeDevices.video&&this.activeDevices.video.constraints!==null||!!this.audioOutputDeviceId}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){return S(this,void 0,void 0,function*(){this.stopWatchingDeviceChanges(),yield this.stopAudioInput(),yield this.stopVideoInput()})}listAudioInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const x=yield this.listDevicesOfKind("audioinput",P);return this.trace("listAudioInputDevices",P,x),x})}listVideoInputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const x=yield this.listDevicesOfKind("videoinput",P);return this.trace("listVideoInputDevices",P,x),x})}listAudioOutputDevices(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const x=yield this.listDevicesOfKind("audiooutput",P);return this.trace("listAudioOutputDevices",P,x),x})}pushAudioMeetingStateForPermissions(P){var x;(x=this.eventController)===null||x===void 0||x.publishEvent(P===void 0?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(P){var x;(x=this.eventController)===null||x===void 0||x.publishEvent(P===void 0?"videoInputUnselected":"videoInputSelected")}startAudioInput(P){return S(this,void 0,void 0,function*(){return yield this.audioInputTaskQueue.add(()=>this.startAudioInputTask(P))})}startAudioInputTask(P){var x;return S(this,void 0,void 0,function*(){if(P===void 0){this.logger.error("Audio input device cannot be undefined");return}try{return n.isAudioTransformDevice(P)?(this.logger.info(`Choosing transform input device ${P}`),yield this.chooseAudioTransformInputDevice(P)):(this.logger.info(`Choosing intrinsic audio input device ${P}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",P)),this.trace("startAudioInputDevice",P,"success"),this.useWebAudio?(this.attachAudioInputStreamToAudioContext(this.activeDevices.audio.stream),this.pushAudioMeetingStateForPermissions(this.getMediaStreamDestinationNode().stream),yield(x=this.transform)===null||x===void 0?void 0:x.device.mute(this.muted),this.getMediaStreamDestinationNode().stream):(this.publishAudioInputDidChangeEvent(this.activeDevices.audio.stream),this.activeDevices.audio.stream)}catch(O){throw O}})}stopAudioInput(){return S(this,void 0,void 0,function*(){return this.audioInputTaskQueue.add(()=>this.stopAudioInputTask())})}stopAudioInputTask(){return S(this,void 0,void 0,function*(){try{if(this.useWebAudio){this.releaseAudioTransformStream();return}this.stopTracksAndRemoveCallbacks("audio")}finally{this.watchForDeviceChangesIfNecessary(),this.publishAudioInputDidChangeEvent(void 0)}})}chooseAudioTransformInputDevice(P){var x;return S(this,void 0,void 0,function*(){if(((x=this.transform)===null||x===void 0?void 0:x.device)===P)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const O=Bi.getAudioContext();if(!(O instanceof OfflineAudioContext))switch(O.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield O.resume()}let M;try{M=yield P.createAudioNode(O)}catch(J){throw this.logger.error(`Unable to create transform device node: ${J}.`),J}const D=yield P.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",D),this.logger.debug(`Got inner stream: ${D}.`),this.setTransform(P,M)})}chooseVideoTransformInputDevice(P){var x;return S(this,void 0,void 0,function*(){if(this.eventController&&P instanceof e.default&&P.passEventControllerToProcessors(this.eventController),P===this.chosenVideoTransformDevice){this.logger.info("Reselecting same VideoTransformDevice");return}const O=this.chosenVideoTransformDevice;O&&this.logger.info("Switched from previous VideoTransformDevice");const M=!!O,D=yield P.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId((x=this.activeDevices.video)===null||x===void 0?void 0:x.stream,D)){this.logger.info("video transform device needs new intrinsic device"),M&&O.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=P,this.activeDevices.video=null,yield this.chooseInputIntrinsicDevice("video",D),this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream);return}this.chosenVideoTransformDevice=P,this.logger.info("video transform device uses previous stream"),this.logger.info("apply processors to transform"),yield P.transformStream(this.activeDevices.video.stream)})}startVideoInput(P){return S(this,void 0,void 0,function*(){return yield this.videoInputTaskQueue.add(()=>this.startVideoInputTask(P))})}startVideoInputTask(P){return S(this,void 0,void 0,function*(){if(!P){this.logger.error("Invalid video input device");return}try{return k.isVideoTransformDevice(P)?(this.logger.info(`Choosing video transform device ${P}`),yield this.chooseVideoTransformInputDevice(P),this.publishVideoInputDidChangeEvent(this.chosenVideoTransformDevice.outputMediaStream),this.chosenVideoTransformDevice.outputMediaStream):(this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",P),this.trace("startVideoInputDevice",P),this.publishVideoInputDidChangeEvent(this.activeDevices.video.stream),this.activeDevices.video.stream)}catch(x){throw x}})}stopVideoInput(){return S(this,void 0,void 0,function*(){return this.videoInputTaskQueue.add(()=>this.stopVideoInputTask())})}stopVideoInputTask(){return S(this,void 0,void 0,function*(){try{if(this.chosenVideoInputIsTransformDevice()){this.releaseVideoTransformStream();return}this.stopTracksAndRemoveCallbacks("video")}finally{this.watchForDeviceChangesIfNecessary(),this.publishVideoInputDidChangeEvent(void 0)}})}chooseAudioOutput(P){return S(this,void 0,void 0,function*(){this.audioOutputDeviceId=P,this.watchForDeviceChangesIfNecessary();const x=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);this.publishAudioOutputDidChangeEvent(x),this.trace("chooseAudioOutput",P,null)})}addDeviceChangeObserver(P){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(P),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(P){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(P),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var P,x;if(!this.activeDevices.audio)return null;const O=(x=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||x===void 0?void 0:x.end;if(O){const M=O.context.createAnalyser();return M.removeOriginalInputs=()=>{try{O.disconnect(M)}catch{}},O.connect(M),M}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(P){const x=Bi.getAudioContext(),O=x.createAnalyser(),M=x.createMediaStreamSource(P);return M.connect(O),this.trace("createAnalyserNodeForAudioInput"),O.removeOriginalInputs=()=>{try{M.disconnect(O)}catch{}},O}startVideoPreviewForVideoInput(P){if(!this.activeDevices.video){this.logger.warn("cannot bind video preview since video input device has not been chosen"),this.trace("startVideoPreviewForVideoInput",P.id);return}t.default.connectVideoStreamToVideoElement(this.chosenVideoTransformDevice?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream,P,!0),this.trace("startVideoPreviewForVideoInput",P.id)}stopVideoPreviewForVideoInput(P){t.default.disconnectVideoStreamFromVideoElement(P,!1),this.trace("stopVideoPreviewForVideoInput",P.id)}setDeviceLabelTrigger(P){if(this.deviceInfoCache){for(const x of this.deviceInfoCache)if(!x.label){this.deviceInfoCache=null;break}}this.deviceLabelTrigger=P,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(P){let x=null;return this.useWebAudio?(x=Bi.getAudioContext().createMediaStreamSource(P),x.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",P.id),x}chooseVideoInputQuality(P,x,O){const M=this.browserBehavior.requiresResolutionAlignment(P,x);this.videoInputQualitySettings=new w.default(M[0],M[1],O)}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return S(this,void 0,void 0,function*(){return this.activeDevices.audio||(this.logger.info("No audio device chosen, creating empty audio device"),yield this.startAudioInput(null)),this.useWebAudio?this.getMediaStreamDestinationNode().stream:this.activeDevices.audio.stream})}acquireVideoInputStream(){return S(this,void 0,void 0,function*(){if(!this.activeDevices.video)throw new Error("No video device chosen");return this.chosenVideoInputIsTransformDevice()?this.chosenVideoTransformDevice.outputMediaStream:this.activeDevices.video.stream})}acquireDisplayInputStream(P){return S(this,void 0,void 0,function*(){throw new Error("unsupported")})}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallbacks("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallbacks("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallbacks(P){const x=this.activeDevices[P];if(!x)return;const O=x.endedCallback,M=x.trackMuteCallback,D=x.trackUnmuteCallback;for(const J of x.stream.getTracks())J.stop(),O&&J.removeEventListener("ended",O),M&&J.removeEventListener("mute",M),D&&J.removeEventListener("unmute",D),delete x.endedCallback,delete x.trackMuteCallback,delete x.trackUnmuteCallback,delete this.activeDevices[P]}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}muteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!1)}unmuteLocalAudioInputStream(){this.toggleLocalAudioInputStream(!0)}toggleLocalAudioInputStream(P){var x;let O=this.activeDevices.audio;if(this.useWebAudio&&(O=this.getMediaStreamDestinationNode()),!!O){for(const M of O.stream.getTracks())M.enabled!==P&&(M.enabled=P);this.muted!==!P&&(this.muted=!P,(x=this.transform)===null||x===void 0||x.device.mute(this.muted))}}static getIntrinsicDeviceId(P){if(!P)return;if(typeof P=="string")return P;if(P.id)return P.id;const O=P.deviceId;if(!O)return;if(typeof O=="string"||Array.isArray(O))return O;const M=O;if(typeof M.exact=="string"||Array.isArray(M.exact))return M.exact}static createEmptyAudioDevice(){return Bi.synthesizeAudioDevice(0)}static synthesizeAudioDevice(P){const x=Bi.getAudioContext(),O=x.createMediaStreamDestination();if(P){const M=x.createGain();M.gain.value=.1,M.connect(O);const D=x.createOscillator();D.frequency.value=P,D.connect(M),D.start()}else{const M=x.createBufferSource();try{M.buffer=x.createBuffer(1,x.sampleRate*5,x.sampleRate)}catch(D){if(D&&D.name==="NotSupportedError")M.buffer=x.createBuffer(1,Bi.defaultSampleRate*5,Bi.defaultSampleRate);else throw D}M.buffer.getChannelData(0)[0]=3e-4,M.loop=!0,M.connect(O),M.start()}return O.stream}listDevicesOfKind(P,x){return S(this,void 0,void 0,function*(){return(x||this.deviceInfoCache===null||!this.isWatchingForDeviceChanges())&&(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(P)})}updateDeviceInfoCacheFromBrowser(){var P;return S(this,void 0,void 0,function*(){if(typeof MediaDeviceInfo>"u"){this.deviceInfoCache=[];return}let O=yield navigator.mediaDevices.enumerateDevices(),M=!0;for(const D of O)if(!D.label){M=!1;break}if(!M)try{this.logger.info("attempting to trigger media device labels since they are hidden");const D=yield this.deviceLabelTrigger();O=yield navigator.mediaDevices.enumerateDevices();for(const J of D.getTracks())J.stop()}catch(D){this.logger.info("unable to get media device labels"),(P=this.eventController)===null||P===void 0||P.publishEvent("deviceLabelTriggerFailed",{deviceLabelTriggerErrorMessage:this.getErrorMessage(D)})}this.logger.debug(`Update device info cache with devices: ${JSON.stringify(O)}`),this.deviceInfoCache=O})}listCachedDevicesOfKind(P){const x=[];if(this.deviceInfoCache)for(const O of this.deviceInfoCache)O.kind===P&&x.push(O);return x}handleDeviceChange(){return S(this,void 0,void 0,function*(){if(this.deviceInfoCache===null)return;if(this.alreadyHandlingDeviceChange){a.default.nextTick(()=>{this.handleDeviceChange()});return}this.alreadyHandlingDeviceChange=!0;const P=this.listCachedDevicesOfKind("audioinput"),x=this.listCachedDevicesOfKind("videoinput"),O=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const M=this.listCachedDevicesOfKind("audioinput"),D=this.listCachedDevicesOfKind("videoinput"),J=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver(q=>{this.areDeviceListsEqual(P,M)||i.Maybe.of(q.audioInputsChanged).map($=>$.bind(q)(M)),this.areDeviceListsEqual(x,D)||i.Maybe.of(q.videoInputsChanged).map($=>$.bind(q)(D)),this.areDeviceListsEqual(O,J)||i.Maybe.of(q.audioOutputsChanged).map($=>$.bind(q)(J))}),this.alreadyHandlingDeviceChange=!1})}handleDeviceStreamEnded(P,x){return S(this,void 0,void 0,function*(){try{P==="audio"?(this.logger.warn("Audio input device which was active is no longer available, resetting to null device"),yield this.startAudioInput(null)):(this.logger.warn("Video input device which was active is no longer available, stopping video"),yield this.stopVideoInput())}catch{this.logger.error("Failed to choose null device after stream ended.")}P==="audio"?this.forEachObserver(O=>{i.Maybe.of(O.audioInputStreamEnded).map(M=>M.bind(O)(x))}):this.forEachObserver(O=>{i.Maybe.of(O.videoInputStreamEnded).map(M=>M.bind(O)(x))})})}forEachObserver(P){for(const x of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(x)&&P(x)})}forEachMediaStreamBrokerObserver(P){for(const x of this.mediaStreamBrokerObservers)a.default.nextTick(()=>{this.mediaStreamBrokerObservers.has(x)&&P(x)})}areDeviceListsEqual(P,x){return JSON.stringify(P.map(O=>JSON.stringify(O)).sort())===JSON.stringify(x.map(O=>JSON.stringify(O)).sort())}intrinsicDeviceAsMediaStream(P){return P&&P.id?P:null}hasSameMediaStreamId(P,x,O){var M,D,J,q;let $;return P==="audio"?($=O==null?void 0:O.audio.streamId,!!$&&$===((D=(M=x.constraints)===null||M===void 0?void 0:M.audio)===null||D===void 0?void 0:D.streamId)):($=O==null?void 0:O.video.streamId,!!$&&$===((q=(J=x==null?void 0:x.constraints)===null||J===void 0?void 0:J.video)===null||q===void 0?void 0:q.streamId))}hasSameGroupId(P,x,O){if(P==="")return!0;const M=Bi.getIntrinsicDeviceId(O);return this.logger.debug(`Checking deviceIds ${M} of type ${typeof M} with groupId ${P}`),typeof M=="string"&&P===this.getGroupIdFromDeviceId(x,M)}getGroupIdFromDeviceId(P,x){if(this.deviceInfoCache!==null){const O=this.listCachedDevicesOfKind(`${P}input`).find(M=>M.deviceId===x);if(O&&O.groupId)return this.logger.debug(`GroupId of deviceId ${x} found in cache is ${O.groupId}`),O.groupId}return this.logger.debug(`GroupId of deviceId ${x} found in cache is empty`),""}handleGetUserMediaError(P,x){if(!P)throw new c.default(P);switch(P.name){case"NotReadableError":case"TrackStartError":throw new g.default(P);case"NotFoundError":case"DevicesNotFoundError":throw new p.default(P);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw x&&x<Bi.permissionDeniedOriginDetectionThresholdMs?new y.default(P,"Permission denied by browser"):new y.default(P,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new d.default(P);case"TypeError":throw new E.default(P);case"AbortError":default:throw new c.default(P)}}matchesDeviceSelection(P,x,O,M){return O&&O.stream.active&&(this.hasSameMediaStreamId(P,O,M)||O.groupId!==null&&this.hasSameGroupId(O.groupId,P,x))?(this.logger.debug(`Compare current device constraint ${JSON.stringify(O.constraints)} to proposed constraints ${JSON.stringify(M)}`),O.matchesConstraints(M)):!1}chooseInputIntrinsicDevice(P,x){var O,M;return S(this,void 0,void 0,function*(){const D=this.getMediaStreamConstraints(P,x);if(this.matchesDeviceSelection(P,x,this.activeDevices[P],D)){this.logger.info(`reusing existing ${P} input device`);return}this.activeDevices[P]&&this.activeDevices[P].stream&&this.stopTracksAndRemoveCallbacks(P);const J=Date.now(),q=new r.default;try{this.logger.info(`requesting new ${P} device with constraint ${JSON.stringify(D)}`);const $=this.intrinsicDeviceAsMediaStream(x);P==="audio"&&x===null?(q.stream=Bi.createEmptyAudioDevice(),q.constraints=null):$?(this.logger.info(`using media stream ${$.id} for ${P} device`),q.stream=$,q.constraints=D):(q.stream=yield navigator.mediaDevices.getUserMedia(D),q.constraints=D),yield this.handleNewInputDevice(P,q)}catch($){const de=this.getErrorMessage($);P==="audio"?(O=this.eventController)===null||O===void 0||O.publishEvent("audioInputFailed",{audioInputErrorMessage:de}):(M=this.eventController)===null||M===void 0||M.publishEvent("videoInputFailed",{videoInputErrorMessage:de}),this.logger.error(`failed to get ${P} device for constraints ${JSON.stringify(D)}: ${de}`);let Ee=!0;if($&&"constraint"in $&&(this.logger.error(`Over-constrained by constraint: ${$.constraint}`),this.useMediaConstraintsFallback)){const _e=this.getMediaStreamConstraints(P,x,!0),ye=JSON.stringify(_e);if(ye!==JSON.stringify(D)){this.logger.info(`retry requesting new ${P} device with minimal constraint ${ye}`);try{q.stream=yield navigator.mediaDevices.getUserMedia(_e),q.constraints=_e,yield this.handleNewInputDevice(P,q),Ee=!1}catch(Be){this.logger.error(`failed to get ${P} device for constraints ${ye}: ${this.getErrorMessage(Be)}`)}}}if(Ee){if(P==="audio"){this.logger.info(`choosing null ${P} device instead`);try{q.stream=Bi.createEmptyAudioDevice(),q.constraints=null,yield this.handleNewInputDevice(P,q)}catch(_e){this.logger.error(`failed to choose null ${P} device. ${_e.name}: ${_e.message}`)}}this.handleGetUserMediaError($,Date.now()-J)}}finally{this.watchForDeviceChangesIfNecessary()}})}getErrorMessage(P){return P?P.name&&P.message?`${P.name}: ${P.message}`:P.name?P.name:P.message?P.message:"UnknownError":"UnknownError"}handleNewInputDevice(P,x){var O;return S(this,void 0,void 0,function*(){this.logger.info(`got ${P} device for constraints ${JSON.stringify(x.constraints)}`);const M=(O=this.getMediaTrackSettings(x.stream))===null||O===void 0?void 0:O.deviceId;x.groupId=M?this.getGroupIdFromDeviceId(P,M):"",this.activeDevices[P]=x,this.logger.debug(`Set activeDevice to ${JSON.stringify(x)}`),this.watchForDeviceChangesIfNecessary();const D=x.stream.getTracks()[0];if(D&&(x.endedCallback=()=>{this.activeDevices[P]&&this.activeDevices[P].stream===x.stream&&(this.handleDeviceStreamEnded(P,M),delete x.endedCallback)},D.addEventListener("ended",x.endedCallback,{once:!0})),P==="audio"){const J=x.stream.getAudioTracks()[0];if(J){const q=J.getSettings().deviceId||x.stream;x.trackMuteCallback=()=>{this.mediaStreamMuteObserver(q,!0)},x.trackUnmuteCallback=()=>{this.mediaStreamMuteObserver(q,!1)},J.addEventListener("mute",x.trackMuteCallback,{once:!1}),J.addEventListener("unmute",x.trackUnmuteCallback,{once:!1}),this.logger.debug("Notifying mute state after selection"),J.muted?x.trackMuteCallback():x.trackUnmuteCallback()}}})}calculateMediaStreamConstraints(P,x,O,M){if(M&&this.listCachedDevicesOfKind(`${P}input`).length===1)return!0;const D={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?D.deviceId=x:D.deviceId={exact:x},O&&(D.groupId=O),M?D:P==="video"?(D.width={ideal:this.videoInputQualitySettings.videoWidth},D.height={ideal:this.videoInputQualitySettings.videoHeight},D.frameRate={ideal:this.videoInputQualitySettings.videoFrameRate},D):(this.supportSampleRateConstraint()&&(D.sampleRate={ideal:Bi.defaultSampleRate}),this.supportSampleSizeConstraint()&&(D.sampleSize={ideal:Bi.defaultSampleSize}),this.supportChannelCountConstraint()&&(D.channelCount={ideal:Bi.defaultChannelCount}),Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},D))}getMediaStreamConstraintsFromTrackConstraints(P,x){return P==="audio"?{audio:x}:{video:x}}getMediaStreamConstraints(P,x){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,M={};if(!x)return null;const D=this.intrinsicDeviceAsMediaStream(x);if(D)return M.streamId=D.id,this.getMediaStreamConstraintsFromTrackConstraints(P,M);if(typeof x=="string"){let J="";return this.browserBehavior.requiresGroupIdMediaStreamConstraints()&&(this.deviceInfoCache!==null?J=this.getGroupIdFromDeviceId(P,x):this.logger.error("Device cache is not populated. Please make sure to call list devices first")),M=this.calculateMediaStreamConstraints(P,x,J,O),this.getMediaStreamConstraintsFromTrackConstraints(P,M)}return F(x)?(M=this.calculateMediaStreamConstraints(P,x.deviceId,x.groupId,O),this.getMediaStreamConstraintsFromTrackConstraints(P,M)):(M=x,this.getMediaStreamConstraintsFromTrackConstraints(P,M))}deviceInfoFromDeviceId(P,x){if(this.deviceInfoCache===null)return null;for(const O of this.deviceInfoCache)if(O.kind===P&&O.deviceId===x)return O;return null}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(P,x){if(!P||!P.active||!x)return!1;if(x.id)return P.id===x.id;const O=this.getMediaTrackSettings(P);if(!O.deviceId)return!1;const M=Bi.getIntrinsicDeviceId(x);return typeof M=="string"?O.deviceId===M:!1}getMediaTrackSettings(P){var x;return(x=P.getTracks()[0])===null||x===void 0?void 0:x.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const P=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(P)}setTransform(P,x){var O,M;(M=(O=this.transform)===null||O===void 0?void 0:O.nodes)===null||M===void 0||M.end.disconnect(),this.transform={nodes:x,device:P};const D=x==null?void 0:x.end,J=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${D} to destination ${J}.`),D==null||D.connect(J),this.reconnectAudioInputs()}removeTransform(){var P;const x=this.transform;if(x)return(P=this.transform.nodes)===null||P===void 0||P.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),x}attachAudioInputStreamToAudioContext(P){var x;(x=this.audioInputSourceNode)===null||x===void 0||x.disconnect(),this.audioInputSourceNode=Bi.getAudioContext().createMediaStreamSource(P);const O=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(O)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=Bi.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var P,x;return((x=(P=this.transform)===null||P===void 0?void 0:P.nodes)===null||x===void 0?void 0:x.start)||this.getMediaStreamDestinationNode()}static setDefaultLatencyHint(P){Bi.defaultLatencyHint=P}static getAudioContext(){if(!Bi.audioContext){const P={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(P.sampleRate=Bi.defaultSampleRate),new u.default().requiresPlaybackLatencyHintForAudioContext()&&(P.latencyHint="playback"),Bi.defaultLatencyHint&&(P.latencyHint=Bi.defaultLatencyHint),Bi.audioContext=new(window.AudioContext||window.webkitAudioContext)(P)}return Bi.audioContext}static closeAudioContext(){if(Bi.audioContext)try{Bi.audioContext.close()}catch{}Bi.audioContext=null}addMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.add(P)}removeMediaStreamBrokerObserver(P){this.mediaStreamBrokerObservers.delete(P)}publishVideoInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(x=>{x.videoInputDidChange&&x.videoInputDidChange(P)}),this.pushVideoMeetingStateForPermissions(P)}publishAudioInputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(x=>{x.audioInputDidChange&&x.audioInputDidChange(P)}),this.pushAudioMeetingStateForPermissions(P)}publishAudioOutputDidChangeEvent(P){this.forEachMediaStreamBrokerObserver(x=>{x.audioOutputDidChange&&x.audioOutputDidChange(P)})}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(P,x,O){let M=`API/DefaultDeviceController/${P}`;typeof x<"u"&&(M+=` ${JSON.stringify(x)}`),typeof O<"u"&&(M+=` -> ${JSON.stringify(O)}`),this.logger.info(M)}constructor(P,x,O=new u.default,M){this.logger=P,this.browserBehavior=O,this.eventController=M,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=void 0,this.deviceChangeObservers=new Set,this.mediaStreamBrokerObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.useMediaConstraintsFallback=!0,this.audioInputTaskQueue=new s.default,this.videoInputTaskQueue=new s.default,this.muted=!1,this.mediaStreamMuteObserver=($,de)=>{for(const Ee of this.deviceChangeObservers)a.default.nextTick(()=>{this.deviceChangeObservers.has(Ee)&&Ee.audioInputMuteStateChanged&&Ee.audioInputMuteStateChanged($,de)})},this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:D=!1,useMediaConstraintsFallback:J=!0}=x||{};this.useWebAudio=D,this.useMediaConstraintsFallback=J,this.videoInputQualitySettings=new w.default(Bi.defaultVideoWidth,Bi.defaultVideoHeight,Bi.defaultVideoFrameRate);const q=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=q[0],this.videoInputQualitySettings.videoHeight=q[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=new m.default().create();const $=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify($)}`)}catch($){P.error($.message)}}},"DefaultDeviceController");l.default=V,V.permissionDeniedOriginDetectionThresholdMs=500,V.defaultVideoWidth=960,V.defaultVideoHeight=540,V.defaultVideoFrameRate=15,V.defaultSampleRate=48e3,V.defaultSampleSize=16,V.defaultChannelCount=1,V.audioContext=null;function F(N){return typeof N=="object"&&"deviceId"in N&&"groupId"in N&&"kind"in N&&"label"in N}o(F,"isMediaDeviceInfo")},ZzQ1:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function S(h){if(!Uint32Array.from){for(var u=new Uint32Array(h.length),m=0;m<h.length;)u[m]=h[m],m+=1;return u}return Uint32Array.from(h)}o(S,"uint32ArrayFrom"),l.uint32ArrayFrom=S},"a16/":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{toJSON(){return{attendeeId:this.attendeeId,joinToken:this.joinToken===null?null:"<redacted>"}}constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}},"MeetingSessionCredentials");l.default=S},a6MJ:function(j,l,f){"use strict";var S=this&&this.__createBinding||(Object.create?function(jt,pe,Re,Fe){Fe===void 0&&(Fe=Re),Object.defineProperty(jt,Fe,{enumerable:!0,get:function(){return pe[Re]}})}:function(jt,pe,Re,Fe){Fe===void 0&&(Fe=Re),jt[Fe]=pe[Re]}),h=this&&this.__setModuleDefault||(Object.create?function(jt,pe){Object.defineProperty(jt,"default",{enumerable:!0,value:pe})}:function(jt,pe){jt.default=pe}),u=this&&this.__importStar||function(jt){if(jt&&jt.__esModule)return jt;var pe={};if(jt!=null)for(var Re in jt)Re!=="default"&&Object.prototype.hasOwnProperty.call(jt,Re)&&S(pe,jt,Re);return h(pe,jt),pe},m=this&&this.__awaiter||function(jt,pe,Re,Fe){function qe(vt){return vt instanceof Re?vt:new Re(function(lt){lt(vt)})}return o(qe,"adopt"),new(Re||(Re=Promise))(function(vt,lt){function Nt(Bt){try{fn(Fe.next(Bt))}catch(Ci){lt(Ci)}}o(Nt,"fulfilled");function ln(Bt){try{fn(Fe.throw(Bt))}catch(Ci){lt(Ci)}}o(ln,"rejected");function fn(Bt){Bt.done?vt(Bt.value):qe(Bt.value).then(Nt,ln)}o(fn,"step"),fn((Fe=Fe.apply(jt,pe||[])).next())})},a=this&&this.__importDefault||function(jt){return jt&&jt.__esModule?jt:{default:jt}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(f("HAqy")),i=a(f("kUL9")),e=a(f("f3u9")),t=a(f("U9CR")),n=a(f("rhlI")),r=a(f("da6e")),c=a(f("my46")),p=a(f("aZba")),g=a(f("papz")),d=a(f("ZS2b")),y=a(f("ppUg")),E=a(f("igcJ")),w=a(f("iRMv")),k=a(f("F7zz")),V=a(f("on9F")),F=a(f("K5tc")),N=a(f("AXyi")),P=a(f("Q2ix")),x=a(f("HG8V")),O=u(f("/AJg")),M=a(f("HbHZ")),D=a(f("bQ+R")),J=f("XCDq"),q=a(f("YbMW")),$=a(f("nDuE")),de=a(f("7EAL")),Ee=a(f("wjYw")),_e=a(f("7UVU")),ye=a(f("lFzH")),Be=a(f("tMH2")),pt=a(f("Wdtm")),Ve=a(f("2vi8")),gt=a(f("3taG")),dt=a(f("Hi4k")),Je=a(f("uB5g")),_t=a(f("W+eo")),ot=a(f("hspq")),Et=a(f("rkwE")),Mt=a(f("5Y0c")),ze=a(f("uQRK")),$t=a(f("fxRI")),Un=a(f("rw3l")),ni=a(f("D7wJ")),an=a(f("K+bq")),Gn=a(f("XzFx")),si=a(f("fZkv")),ri=a(f("ZISg")),On=a(f("iQPr")),Gi=a(f("xeHQ")),ui=a(f("ZdbB")),Fi=a(f("wQGL")),Hi=a(f("VYs+")),Sn=a(f("XJKy")),un=f("Aplu"),bn=a(f("Biyp")),Ot=a(f("uTAD")),En=a(f("rCkh")),Lt=f("T44/"),Hn=a(f("MpTp")),Ji=a(f("0LIx")),$n=a(f("LIUS")),Ti=a(f("yS4C")),Ir=a(f("Wnnr")),er=a(f("BGMr")),cr=a(f("P7Xm")),gi=a(f("kabN")),Yi=a(f("1uai"));let Xi=o(class Kc{destroy(){return m(this,void 0,void 0,function*(){this.observerQueue.clear(),this._mediaStreamBroker.removeMediaStreamBrokerObserver(this._audioMixController),this.destroyed=!0})}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new s.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}get eventController(){return this._eventController}getRTCPeerConnectionStats(pe){return this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent||(this.logger.warn("The `getRTCPeerConnectionStats()` is on its way to be deprecated. It makes an additional call to the `getStats` API and therefore may cause slight performance degradation. Please use the new API `clientMetricReport.getRTCStatsReport()` returned by `metricsDidReceive(clientMetricReport)` callback instead."),this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!0),this.rtcPeerConnection?this.rtcPeerConnection.getStats(pe):null}setAudioProfile(pe){this._audioProfile=pe}addObserver(pe){this.logger.info("adding meeting observer"),this.observerQueue.add(pe)}removeObserver(pe){this.logger.info("removing meeting observer"),this.observerQueue.delete(pe)}forEachObserver(pe){for(const Re of this.observerQueue)k.default.nextTick(()=>{this.observerQueue.has(Re)&&pe(Re)})}initSignalingClient(){this.connectionHealthData.reset(),!this.meetingSessionContext.signalingClient&&(this.meetingSessionContext=new Yi.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new t.default,this.meetingSessionContext.videoSendCodecPreferences=this.videoSendCodecPreferences,this.meetingSessionContext.audioProfile=this._audioProfile,this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new x.default(this._webSocketAdapter,this.logger))}uninstallPreStartObserver(){this.meetingSessionContext.signalingClient.removeObserver(this.preStartObserver),this.preStartObserver=void 0}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().then(()=>{const pe=o(()=>m(this,void 0,void 0,function*(){this.logger.info("Early connection closed; discarding signaling task."),this.signalingTask=void 0,this.uninstallPreStartObserver()}),"handleClosed");this.preStartObserver={handleSignalingClientEvent(Re){Re.type===M.default.WebSocketClosed&&pe()}},this.meetingSessionContext.signalingClient.registerObserver(this.preStartObserver)}).catch(pe=>{this.logger.error(`Signaling task pre-start failed: ${pe}`),this.signalingTask=void 0})}start(pe){this.startReturningPromise(pe).then(()=>{this.logger.info("start completed")}).catch(Re=>{this.logger.error(`start failed: ${Re}`)})}startReturningPromise(pe){return(pe==null?void 0:pe.signalingOnly)===!0?this.prestart():(this.activeSpeakerDetector,new Promise((Re,Fe)=>{this.sessionStateController.perform(F.default.Connect,()=>{this.actionConnect(!1).then(Re).catch(Fe)})}))}connectWithPromises(pe){const Re=this.meetingSessionContext,Fe=o((tr,ai)=>new On.default(this.logger,ai,tr),"timeout");this.monitorTask=new dt.default(Re,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData);const qe=this.monitorTask.once(),vt=new Et.default(Re).once();this.receiveIndexTask=new Un.default(Re),this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();const lt=new an.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new gt.default(Re),new ni.default(Re),new pt.default(Re),new ze.default(Re),this.receiveIndexTask]).once(),Nt=new _e.default(Re).once(lt),ln=new $.default(Re).once(Nt,vt),fn=new ye.default(Re).once(ln),Bt=new Gn.default(Re).once(fn),Ci=new Be.default(Re).once(Bt),Si=new ri.default(Re).once(Ci),gr=new Mt.default(Re).once(Si);return new an.default(this.logger,this.wrapTaskName("AudioVideoStart"),[qe,Fe(this.configuration.connectionTimeoutMs,new an.default(this.logger,"Peer",[Si,gr,pe?new On.default(this.logger,new _t.default(this.logger,"FinalizeConnection",[new Gi.default(Re),new si.default(Re)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new si.default(Re)]))])}actionConnect(pe){var Re;return m(this,void 0,void 0,function*(){this.initSignalingClient(),this.uninstallPreStartObserver(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this,this.enableSimulcast=this.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&new t.default().hasChromiumWebRTC(),this.enableSimulcast&&this.configuration.enableSVC&&this.logger.warn("SVC cannot be enabled at the same time as simulcast. Disabling SVC, using simulcast."),this.enableSVC=!this.enableSimulcast&&this.configuration.enableSVC&&new t.default().supportsScalableVideoCoding();const Fe=!!this.configuration.urls.audioHostURL;if(Fe?this.enableSimulcast?(this.logger.info("Using transceiver controller with simulcast support"),new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)?this.meetingSessionContext.transceiverController=new Fi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext):this.meetingSessionContext.transceiverController=new Hi.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using default transceiver controller"),this.meetingSessionContext.transceiverController=new ui.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)):(this.logger.info("Using video only transceiver controller"),this.meetingSessionContext.transceiverController=new Sn.default(this.logger,this.meetingSessionContext.browserBehavior,this.meetingSessionContext)),this.meetingSessionContext.volumeIndicatorAdapter=new gi.default(this.logger,this._realtimeController,Kc.MIN_VOLUME_DECIBELS,Kc.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.meetingSessionContext.enableSVC=this.enableSVC,this.enableSimulcast){let lt=this.meetingSessionContext.videoUplinkBandwidthPolicy;lt||(lt=new er.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy=lt),lt.addObserver(this),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new En.default(this.meetingSessionContext.logger)),this.meetingSessionContext.videoStreamIndex=new $n.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new Ji.default(this.logger),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new cr.default(this.configuration.credentials.attendeeId,!this.meetingSessionContext.browserBehavior.disableResolutionScaleDown(),this.meetingSessionContext.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.videoUplinkBandwidthPolicy.setSVCEnabled(this.enableSVC)),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Ot.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController&&this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController&&(this.useUpdateTransceiverControllerForUplink=!0,this.meetingSessionContext.videoUplinkBandwidthPolicy.setTransceiverController(this.meetingSessionContext.transceiverController)),this.meetingSessionContext.audioProfile=this._audioProfile;if(new y.default(this.configuration.credentials.attendeeId).hasModality(y.default.MODALITY_CONTENT)){const lt=this.configuration.meetingFeatures.contentMaxResolution===c.default.VideoResolutionUHD;lt&&this.setVideoMaxBandwidthKbps(2500),this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(lt)}else{const lt=this.configuration.meetingFeatures.videoMaxResolution===c.default.VideoResolutionFHD;this.meetingSessionContext.videoUplinkBandwidthPolicy.setHighResolutionFeatureEnabled(lt)}this.meetingSessionContext.videoUplinkBandwidthPolicy&&this.maxUplinkBandwidthKbps&&this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(this.maxUplinkBandwidthKbps),this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.bindToTileController(this._videoTileController),this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.setWantsResubscribeObserver(()=>this.update({needsRenegotiation:!1})),this.meetingSessionContext.lastKnownVideoAvailability=new d.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new bn.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new Hn.default,this.meetingSessionContext.videosPaused=new Hn.default,this.meetingSessionContext.statsCollector=new q.default(this,this.logger),this.meetingSessionContext.connectionMonitor=new r.default(this,this._realtimeController,this.connectionHealthData,new E.default(this.meetingSessionContext.signalingClient,Kc.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},pe||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver(lt=>{un.Maybe.of(lt.audioVideoDidStartConnecting).map(Nt=>Nt.bind(lt)(!1))}),(Re=this.eventController)===null||Re===void 0||Re.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const qe=Fe&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;this.logger.info("Needs to wait for attendee presence? "+qe);const vt=this.connectWithPromises(qe);try{yield vt.run(),this.connectionHealthData.setConnectionStartTime(),this._mediaStreamBroker.addMediaStreamBrokerObserver(this),this.sessionStateController.perform(F.default.FinishConnecting,()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()})}catch(lt){this.signalingTask=void 0;const Nt=new p.default(this.getMeetingStatusCode(lt)||g.default.TaskFailed);if(this.logger.info(`Start failed: ${Nt} due to error ${lt}.`),this.sessionStateController.state()===N.default.NotConnected){this.logger.info("Start failed and not connected. Not cleaning up.");return}this.sessionStateController.perform(F.default.Fail,()=>m(this,void 0,void 0,function*(){yield this.actionDisconnect(Nt,!0,lt),this.handleMeetingSessionStatus(Nt,lt)||this.notifyStop(Nt,lt)}))}})}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new On.default(this.logger,new Je.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=J.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||(this.useUpdateTransceiverControllerForUplink?this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController():this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0])),this.forEachObserver(pe=>{un.Maybe.of(pe.audioVideoDidStart).map(Re=>Re.bind(pe)())}),this._reconnectController.reset(),this.receiveIndexTask.resumeIngestion(),this.monitorTask.resumeResubscribeCheck()}stopReturningPromise(){var pe;return this.sessionStateController.state()===N.default.NotConnected?((pe=this.meetingSessionContext.signalingClient)===null||pe===void 0||pe.closeConnection(),this.cleanUpMediaStreamsAfterStop(),Promise.resolve()):new Promise((Re,Fe)=>{this.sessionStateController.perform(F.default.Disconnect,()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new p.default(g.default.Left),!1,null).then(Re).catch(Fe)})})}stop(){this.stopReturningPromise()}actionDisconnect(pe,Re,Fe){return m(this,void 0,void 0,function*(){try{yield new an.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new On.default(this.logger,new Ve.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch{this.logger.info("fail to stop")}try{const qe=[new On.default(this.logger,new Ee.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];this.cleanUpMediaStreamsAfterStop(),yield new an.default(this.logger,this.wrapTaskName("AudioVideoClean"),qe).run()}catch{this.logger.info("fail to clean")}this.sessionStateController.perform(F.default.FinishDisconnecting,()=>{Re||this.notifyStop(pe,Fe)})})}update(){let Re=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{needsRenegotiation:!0}).needsRenegotiation;if(Re||(Re=this.meetingSessionContext.peer===void 0),Re||(Re=!this.updateRemoteVideosFromPolicy()),Re||(Re=!this.updateLocalVideoFromPolicy()),this.meetingSessionContext.lastVideosToReceive=this.meetingSessionContext.videosToReceive,!Re)return this.logger.info("Update request does not require resubscribe"),this.actionFinishUpdating(),!0;this.logger.info("Update request requires resubscribe");const Fe=this.sessionStateController.perform(F.default.Update,()=>{this.actionUpdateWithRenegotiation(!0)});return Fe===P.default.Transitioned||Fe===P.default.DeferredTransition}updateRemoteVideosFromPolicy(){if(this.meetingSessionContext.videoDownlinkBandwidthPolicy&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getVideoPreferences!==void 0&&this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&!O.serverSideNetworkAdaptionIsNoneOrDefault(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption())){if(!this.sendRemoteVideoUpdate())return!1;if(this.meetingSessionContext.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption()===O.default.BandwidthProbingAndRemoteVideoQualityAdaption)return this.isNotAddingOrRemovingStreams()}return this.updateRemoteVideosIfNotAddingOrRemovingStreams()}updateRemoteVideosIfNotAddingOrRemovingStreams(){const pe=this.detectChangesInVideosToReceive();if(pe===void 0)return!1;const Re=pe.added,Fe=pe.simulcastStreamUpdates,qe=pe.removed,vt=this.meetingSessionContext,lt=[];for(const[Nt,ln]of Fe.entries()){const fn=new D.default;if(fn.streamId=ln,fn.attendeeId=vt.videoStreamIndex.attendeeIdForStreamId(ln),fn.mid=vt.transceiverController.getMidForStreamId(Nt),fn.mid===void 0)return this.logger.info(`No MID found for stream ID ${Nt}, cannot update stream without renegotiation`),!1;if(lt.push(fn),vt.transceiverController.setStreamIdForMid(fn.mid,ln),vt.videoStreamIndex.overrideStreamIdMappings(Nt,ln),vt.videoTileController.haveVideoTileForAttendeeId(fn.attendeeId)){const Bt=vt.videoTileController.getVideoTileForAttendeeId(fn.attendeeId);if(!Bt.setStreamId)return!1;Bt.setStreamId(ln)}}return lt.length!==0&&vt.signalingClient.remoteVideoUpdate(lt,[]),Re.length!==0||qe.length!==0?!1:(vt.videoStreamIndex.subscribeFrameSent(),!0)}detectChangesInVideosToReceive(){const pe=this.meetingSessionContext;if(pe.videosToReceive===null||!pe.transceiverController||!pe.transceiverController.getMidForStreamId||!pe.transceiverController.setStreamIdForMid||!pe.videosToReceive.forEach||!pe.signalingClient.remoteVideoUpdate||!pe.videoStreamIndex.overrideStreamIdMappings)return;let Re=[];const Fe=new Map;let qe=[];if(pe.lastVideosToReceive===null)Re=pe.videosToReceive.array();else{const vt=pe.videoStreamIndex;pe.videosToReceive.forEach(lt=>{if(pe.lastVideosToReceive.contain(lt))return;let Nt=!1;pe.lastVideosToReceive.forEach(ln=>{Nt||vt.StreamIdsInSameGroup(ln,lt)&&(Fe.set(ln,lt),Nt=!0)}),Nt||Re.push(lt)}),qe=pe.lastVideosToReceive.array().filter(lt=>{const Nt=pe.videosToReceive.contain(lt),ln=Fe.has(lt);return!Nt&&!ln})}return this.logger.info(`Request to update remote videos with added: ${Re}, updated: ${[...Fe.entries()]}, removed: ${qe}`),{added:Re,removed:qe,simulcastStreamUpdates:Fe}}isNotAddingOrRemovingStreams(){const pe=this.detectChangesInVideosToReceive();if(pe===void 0)return!1;const Re=pe.added,Fe=pe.removed;return!(Re.length!==0||Fe.length!==0)}sendRemoteVideoUpdate(){const pe=this.meetingSessionContext;if(pe.videosToReceive===null)return!1;const Re=pe.videosToReceive.array().map(Nt=>pe.videoStreamIndex.groupIdForStreamId(Nt)),Fe=Lt.convertVideoPreferencesToSignalingClientVideoSubscriptionConfiguration(pe,Re,pe.videoDownlinkBandwidthPolicy.getVideoPreferences()),qe=new Map,vt=[];for(const Nt of Fe){let ln=!1;if(!pe.lastVideoSubscriptionConfiguration.has(Nt.groupId))ln=!0;else{const fn=pe.lastVideoSubscriptionConfiguration.get(Nt.groupId);Nt.equals(fn)||(this.logger.debug(`${JSON.stringify(Nt)} does not equal ${JSON.stringify(fn)}, sending update`),ln=!0)}qe.set(Nt.groupId,Nt),ln&&vt.push(Nt)}pe.lastVideoSubscriptionConfiguration=qe;const lt=[];if(pe.lastVideosToReceive!==null){const Nt=new Set(Re);for(const ln of pe.lastVideosToReceive.array()){const fn=pe.videoStreamIndex.groupIdForStreamId(ln);if(!Nt.has(fn)){const Bt=pe.transceiverController.getMidForGroupId(fn);if(Bt===void 0){pe.logger.warn(`Could not find MID for group ID to remove: ${fn}`);continue}lt.push(Bt)}}}return(vt.length!==0||lt.length!==0)&&pe.signalingClient.remoteVideoUpdate(vt,lt),!0}updateLocalVideoFromPolicy(){if(this.meetingSessionContext.enableSimulcast){const pe=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseEncodingParameters();if(this.mayNeedRenegotiationForSimulcastLayerChange&&!this.negotiatedBitrateLayersAllocationRtpHeaderExtension())return this.logger.info("Needs regenotiation for local video simulcast layer change"),this.mayNeedRenegotiationForSimulcastLayerChange=!1,!1;this.meetingSessionContext.transceiverController.setEncodingParameters(pe)}else this.meetingSessionContext.videoCaptureAndEncodeParameter=this.meetingSessionContext.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters();return this.logger.info("Updated local video from policy without renegotiation"),!0}negotiatedBitrateLayersAllocationRtpHeaderExtension(){if(!this.meetingSessionContext.transceiverController.localVideoTransceiver())return!1;const pe=this.meetingSessionContext.transceiverController.localVideoTransceiver().sender.getParameters();return!pe||!pe.headerExtensions?!1:pe.headerExtensions.some(Re=>Re.uri==="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00")}restartLocalVideo(pe){const Re=o(()=>m(this,void 0,void 0,function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdateWithRenegotiation(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdateWithRenegotiation(!0),pe()}),"restartVideo"),Fe=this.sessionStateController.perform(F.default.Update,()=>{Re()});return Fe===P.default.Transitioned||Fe===P.default.DeferredTransition}replaceLocalVideo(pe){return m(this,void 0,void 0,function*(){if(!pe||pe.getVideoTracks().length<1)throw new Error("could not acquire video track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");const Re=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(Re){const Fe=Re.state(),qe=pe.getVideoTracks()[0].getSettings();Re.bindVideoStream(Fe.boundAttendeeId,!0,pe,qe.width,qe.height,Fe.streamId,Fe.boundExternalUserId)}yield this.meetingSessionContext.transceiverController.setVideoInput(pe.getVideoTracks()[0]),this.meetingSessionContext.activeVideoInput=pe,this.logger.info("Local video input is updated")})}replaceLocalAudio(pe){return m(this,void 0,void 0,function*(){if(!pe||pe.getAudioTracks().length<1)throw new Error("could not acquire audio track");if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime(),!(yield this.meetingSessionContext.transceiverController.replaceAudioTrack(pe.getAudioTracks()[0])))throw new Error("Failed to replace audio track");this.meetingSessionContext.activeAudioInput=pe,this.logger.info("Local audio input is updated")})}actionUpdateWithRenegotiation(pe){return m(this,void 0,void 0,function*(){this.monitorTask.pauseResubscribeCheck(),this.receiveIndexTask.pauseIngestion();try{yield new an.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new $t.default(this.meetingSessionContext),new On.default(this.logger,new an.default(this.logger,"UpdateSession",[new $.default(this.meetingSessionContext),new ye.default(this.meetingSessionContext),new Gn.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new ri.default(this.meetingSessionContext),new si.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),pe&&this.sessionStateController.perform(F.default.FinishUpdating,()=>{this.actionFinishUpdating()})}catch(Re){this.sessionStateController.perform(F.default.FinishUpdating,()=>{const Fe=new p.default(this.getMeetingStatusCode(Re)||g.default.TaskFailed);Fe.statusCode()!==g.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(Fe,Re)})}})}notifyStop(pe,Re){var Fe;if(this.forEachObserver(qe=>{un.Maybe.of(qe.audioVideoDidStop).map(vt=>vt.bind(qe)(pe))}),this.promotedToPrimaryMeeting&&Re&&this.forEachObserver(qe=>{this.promotedToPrimaryMeeting=!1,un.Maybe.of(qe.audioVideoWasDemotedFromPrimaryMeeting).map(vt=>vt.bind(qe)(new p.default(g.default.SignalingInternalServerError)))}),this.eventController){const{signalingOpenDurationMs:qe,poorConnectionCount:vt,startTimeMs:lt,iceGatheringDurationMs:Nt,attendeePresenceDurationMs:ln,meetingStartDurationMs:fn}=this.meetingSessionContext,Bt={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:lt===null?0:Math.round(Date.now()-lt),meetingStatus:g.default[pe.statusCode()],signalingOpenDurationMs:qe,iceGatheringDurationMs:Nt,attendeePresenceDurationMs:ln,poorConnectionCount:vt,meetingStartDurationMs:fn,retryCount:this.totalRetryCount},Ci=Re&&Re.message||((Fe=pe.toString)===null||Fe===void 0?void 0:Fe.call(pe))||"";Bt.meetingDurationMs===0?(Bt.meetingErrorMessage=Ci,delete Bt.meetingDurationMs,delete Bt.attendeePresenceDurationMs,delete Bt.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",Bt)):pe.isFailure()||pe.isAudioConnectionFailure()?(Bt.meetingErrorMessage=Ci,this.eventController.publishEvent("meetingFailed",Bt)):this.eventController.publishEvent("meetingEnded",Bt)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast)if(this.useUpdateTransceiverControllerForUplink)this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();else{const pe=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(pe)}this.monitorTask.resumeResubscribeCheck(),this.receiveIndexTask.resumeIngestion(),this.logger.info("updated audio-video session")}reconnect(pe,Re){const Fe=this._reconnectController.retryWithBackoff(()=>m(this,void 0,void 0,function*(){this.sessionStateController.state()===N.default.NotConnected?this.sessionStateController.perform(F.default.Connect,()=>{this.actionConnect(!0)}):this.sessionStateController.perform(F.default.Reconnect,()=>{this.actionReconnect(pe)}),this.totalRetryCount+=1}),()=>{this.logger.info("canceled retry")});return Fe||this.sessionStateController.perform(F.default.Fail,()=>{this.actionDisconnect(pe,!1,Re)}),Fe}actionReconnect(pe){return m(this,void 0,void 0,function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver(Re=>{un.Maybe.of(Re.audioVideoDidStartConnecting).map(Fe=>Fe.bind(Re)(!0))})),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new an.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new On.default(this.logger,new an.default(this.logger,"Media",[new de.default(this.meetingSessionContext),new an.default(this.logger,"Signaling",[new Je.default(this.meetingSessionContext),new pt.default(this.meetingSessionContext),new ze.default(this.meetingSessionContext)]),new _e.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new $t.default(this.meetingSessionContext),new On.default(this.logger,new an.default(this.logger,"UpdateSession",[new $.default(this.meetingSessionContext),new ye.default(this.meetingSessionContext),new Gn.default(this.meetingSessionContext),new Be.default(this.meetingSessionContext),new ri.default(this.meetingSessionContext),new si.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(F.default.FinishConnecting,()=>{if(this.eventController){const{signalingOpenDurationMs:Re,poorConnectionCount:Fe,startTimeMs:qe,iceGatheringDurationMs:vt,attendeePresenceDurationMs:lt,meetingStartDurationMs:Nt}=this.meetingSessionContext,ln={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:Math.round(Date.now()-qe),meetingStatus:g.default[pe.statusCode()],signalingOpenDurationMs:Re,iceGatheringDurationMs:vt,attendeePresenceDurationMs:lt,poorConnectionCount:Fe,meetingStartDurationMs:Nt,retryCount:this.totalRetryCount};this.eventController.publishEvent("meetingReconnected",ln)}this.actionFinishConnecting()})}catch(Re){this.sessionStateController.perform(F.default.FinishConnecting,()=>{this.logger.info("failed to reconnect audio-video session");const Fe=new p.default(this.getMeetingStatusCode(Re)||g.default.TaskFailed);this.handleMeetingSessionStatus(Fe,Re)})}this.connectionHealthData.setConnectionStartTime()})}wrapTaskName(pe){return`${pe}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}cleanUpMediaStreamsAfterStop(){this._mediaStreamBroker.removeMediaStreamBrokerObserver(this),this.meetingSessionContext.activeAudioInput=void 0,this.meetingSessionContext.activeVideoInput=void 0}getMeetingStatusCode(pe){const Re=/the meeting status code: (\d+)/.exec(pe&&pe.message);return Re&&Re.length>1?Number.parseInt(Re[1],10):null}enforceBandwidthLimitationForSender(pe){return m(this,void 0,void 0,function*(){yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(pe)})}handleMeetingSessionStatus(pe,Re){if(this.logger.info(`handling status: ${g.default[pe.statusCode()]}`),pe.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(pe),pe.statusCode()===g.default.IncompatibleSDP)return this.restartLocalVideo(()=>{this.logger.info("handled incompatible SDP by attempting to restart video")}),!0;if(pe.statusCode()===g.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver(Fe=>{un.Maybe.of(Fe.videoSendDidBecomeUnavailable).map(qe=>qe.bind(Fe)())}),!1;if(pe.statusCode()===g.default.AudioVideoWasRemovedFromPrimaryMeeting)return this.forEachObserver(Fe=>{un.Maybe.of(Fe.audioVideoWasDemotedFromPrimaryMeeting).map(qe=>qe.bind(Fe)(pe))}),!1;if(pe.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(pe.isFailure()||pe.isTerminal())&&this.meetingSessionContext.reconnectController){const Fe=this.reconnect(pe,Re);return Fe?this.logger.warn(`will retry due to status code ${g.default[pe.statusCode()]}${Re?` and error: ${Re.message}`:""}`):this.logger.error(`failed with status code ${g.default[pe.statusCode()]}${Re?` and error: ${Re.message}`:""}`),Fe}return!1}setVideoMaxBandwidthKbps(pe){if(pe<=0)throw new Error("Max bandwidth kbps has to be greater than 0");this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${pe} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(pe)),this.maxUplinkBandwidthKbps=pe}handleHasBandwidthPriority(pe){return m(this,void 0,void 0,function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){if(this.useUpdateTransceiverControllerForUplink){this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(pe),yield this.meetingSessionContext.videoUplinkBandwidthPolicy.updateTransceiverController();return}const Re=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(pe);const Fe=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();Re!==Fe&&(this.logger.info(`video send bandwidth priority ${pe} max has changed from ${Re} kbps to ${Fe} kbps`),yield this.enforceBandwidthLimitationForSender(Fe))}})}pauseReceivingStream(pe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([pe])}resumeReceivingStream(pe){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([pe])}setVideoCodecSendPreferences(pe){this.videoSendCodecPreferences=pe,this.meetingSessionContext.videoSendCodecPreferences=pe,this.sessionStateController.state()!==N.default.NotConnected&&this.update({needsRenegotiation:!0})}getRemoteVideoSources(){const{videoStreamIndex:pe}=this.meetingSessionContext;if(!pe)return this.logger.info("meeting has not started"),[];const Re=this.configuration.credentials.attendeeId;return pe.allVideoSendingSourcesExcludingSelf(Re)}encodingSimulcastLayersDidChange(pe){this.mayNeedRenegotiationForSimulcastLayerChange=!0,this.forEachObserver(Re=>{un.Maybe.of(Re.encodingSimulcastLayersDidChange).map(Fe=>Fe.bind(Re)(pe))})}promoteToPrimaryMeeting(pe){return this.actionPromoteToPrimaryMeeting(pe)}actionPromoteToPrimaryMeeting(pe){return m(this,void 0,void 0,function*(){let Re=new p.default(g.default.SignalingRequestFailed);return yield new an.default(this.logger,this.wrapTaskName("PromoteToPrimaryMeeting"),[new On.default(this.logger,new ot.default(this.meetingSessionContext,pe,Fe=>{Re=Fe}),this.configuration.connectionTimeoutMs)]).run(),this.promotedToPrimaryMeeting=Re.statusCode()===g.default.OK,Re})}demoteFromPrimaryMeeting(){this.meetingSessionContext.signalingClient.demoteFromPrimaryMeeting(),this.forEachObserver(pe=>{un.Maybe.of(pe.audioVideoWasDemotedFromPrimaryMeeting).map(Re=>Re.bind(pe)(new p.default(g.default.OK)))})}videoInputDidChange(pe){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive a video input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating video input because there is no active meeting and peer connection");return}this._videoTileController.hasStartedLocalVideoTile()&&(pe?yield this.replaceLocalVideo(pe):this._videoTileController.stopLocalVideoTile())})}audioInputDidChange(pe){return m(this,void 0,void 0,function*(){if(this.logger.info("Receive an audio input change event"),!this.meetingSessionContext||!this.meetingSessionContext.peer){this.logger.info("Skip updating audio input because there is no active meeting and peer connection");return}if(!pe)try{pe=yield this.mediaStreamBroker.acquireAudioInputStream()}catch{this.logger.error("Could not acquire audio track from mediaStreamBroker");return}yield this.replaceLocalAudio(pe)})}constructor(pe,Re,Fe,qe,vt,lt){this._audioProfile=new e.default,this.connectionHealthData=new n.default,this.observerQueue=new Set,this.meetingSessionContext=new Yi.default,this.enableSimulcast=!1,this.enableSVC=!1,this.useUpdateTransceiverControllerForUplink=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.mayNeedRenegotiationForSimulcastLayerChange=!1,this.promotedToPrimaryMeeting=!1,this.hasGetRTCPeerConnectionStatsDeprecationMessageBeenSent=!1,this.receiveIndexTask=void 0,this.monitorTask=void 0,this.destroyed=!1,this._logger=Re,this.sessionStateController=new V.default(this._logger),this._configuration=pe,this._webSocketAdapter=Fe,this._realtimeController=new w.default(qe),this._realtimeController.realtimeSetLocalAttendeeId(pe.credentials.attendeeId,pe.credentials.externalUserId),this._mediaStreamBroker=qe,this._reconnectController=vt,this._videoTileController=new Ti.default(new Ir.default,this,this._logger),this._audioMixController=new i.default(this._logger),this._mediaStreamBroker.addMediaStreamBrokerObserver(this._audioMixController),this.meetingSessionContext.logger=this._logger,this._eventController=lt}},"DefaultAudioVideoController");l.default=Xi,Xi.MIN_VOLUME_DECIBELS=-42,Xi.MAX_VOLUME_DECIBELS=-14,Xi.PING_PONG_INTERVAL_MS=1e4},aApz:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.Unread="unread",h.LastMessageTimestamp="last-message-timestamp"})(S||(S={})),l.default=S},aCJD:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VideoQualityAdaptationPreference=void 0;var S;(function(h){h[h.Balanced=0]="Balanced",h[h.MaintainFramerate=1]="MaintainFramerate",h[h.MaintainResolution=2]="MaintainResolution"})(S=l.VideoQualityAdaptationPreference||(l.VideoQualityAdaptationPreference={})),l.default=S},aMTh:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR"));let m=o(class _S{getInnerDevice(){return this.device}mute(i){return S(this,void 0,void 0,function*(){this.node&&(i?yield this.node.disable():yield this.node.enable())})}stop(){return S(this,void 0,void 0,function*(){this.node&&(this.node.disconnect(),yield this.node.stop())})}chooseNewInnerDevice(i){return S(this,void 0,void 0,function*(){return this.device===i&&!a(i)?this:new _S(i,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior,this.farEndStreamToAudioSourceNode,this.mixDestNode,this.mixSourceNode)})}intrinsicDevice(){return S(this,void 0,void 0,function*(){if(this.failed)return this.device;const i=this.nodeOptions.es,e={echoCancellation:!i,googEchoCancellation:!i,googEchoCancellation2:!i,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return this.nodeOptions&&this.nodeOptions.agc!==void 0?t=this.nodeOptions.agc.useBuiltInAGC:t=!0,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?typeof this.device=="string"?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e})}createAudioNode(i){var e,t;return S(this,void 0,void 0,function*(){if(((e=this.node)===null||e===void 0?void 0:e.context)===i)return{start:this.node,end:this.node};const r=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{if((t=this.node)===null||t===void 0||t.disconnect(),this.node=yield this.voiceFocus.createNode(i,r),this.nodeOptions.es){this.mixDestNode=new MediaStreamAudioDestinationNode(i,{channelCount:1,channelCountMode:"explicit"});for(const g of this.farEndStreamToAudioSourceNode.keys())this.assignFarEndStreamToAudioSourceNode(g);this.createMixSourceNode()}const c=this.node,p=this.node;return{start:c,end:p}}catch(c){throw this.failed=!0,this.delegate.onFallback(this,c),c}})}observeMeetingAudio(i){return S(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.addAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.addFarEndStream(e)})}unObserveMeetingAudio(i){return S(this,void 0,void 0,function*(){if(!this.nodeOptions.es)return;i.removeAudioMixObserver(this);const e=yield i.getCurrentMeetingAudioStream();e&&this.removeFarendStream(e)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}addFarEndStream(i){return S(this,void 0,void 0,function*(){!this.nodeOptions.es||!i||this.farEndStreamToAudioSourceNode.has(i)||(this.node?this.assignFarEndStreamToAudioSourceNode(i):this.farEndStreamToAudioSourceNode.set(i,null))})}removeFarendStream(i){var e;return S(this,void 0,void 0,function*(){(e=this.farEndStreamToAudioSourceNode.get(i))===null||e===void 0||e.disconnect(),this.farEndStreamToAudioSourceNode.delete(i)})}meetingAudioStreamBecameActive(i){return S(this,void 0,void 0,function*(){this.addFarEndStream(i)})}meetingAudioStreamBecameInactive(i){return S(this,void 0,void 0,function*(){this.removeFarendStream(i)})}assignFarEndStreamToAudioSourceNode(i){const e=this.node.context.createMediaStreamSource(i);e.channelCount=1,e.channelCountMode="explicit",this.farEndStreamToAudioSourceNode.set(i,e),e.connect(this.mixDestNode,0)}createMixSourceNode(){this.mixSourceNode=this.node.context.createMediaStreamSource(this.mixDestNode.stream),this.mixSourceNode.channelCount=1,this.mixSourceNode.channelCountMode="explicit",this.mixSourceNode.connect(this.node,0,1)}constructor(i,e,t,n,r=!1,c=void 0,p=new u.default,g=new Map,d=void 0,y=void 0){this.device=i,this.voiceFocus=e,this.delegate=t,this.nodeOptions=n,this.failed=r,this.node=c,this.browserBehavior=p,this.farEndStreamToAudioSourceNode=g,this.mixDestNode=d,this.mixSourceNode=y}},"VoiceFocusTransformDevice");function a(s){return s==="default"?!0:!s||typeof s!="object"?!1:"deviceId"in s&&s.deviceId==="default"||"id"in s&&s.id==="default"}o(a,"isDefaultDevice"),l.default=m},aNtF:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class xs{static initializeWorker(){xs.log("Initializing RedundantAudioEncoder");const u=new xs;self.RTCRtpScriptTransformer&&(self.onrtctransform=m=>{m.transformer.options.type==="SenderTransform"?u.setupSenderTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="ReceiverTransform"?u.setupReceiverTransform(m.transformer.readable,m.transformer.writable):m.transformer.options.type==="PassthroughTransform"&&u.setupPassthroughTransform(m.transformer.readable,m.transformer.writable)}),self.onmessage=m=>{m.data.msgType==="StartRedWorker"?(u.setupSenderTransform(m.data.send.readable,m.data.send.writable),u.setupReceiverTransform(m.data.receive.readable,m.data.receive.writable)):m.data.msgType==="RedPayloadType"?u.setRedPayloadType(m.data.payloadType):m.data.msgType==="OpusPayloadType"?u.setOpusPayloadType(m.data.payloadType):m.data.msgType==="UpdateNumRedundantEncodings"?u.setNumRedundantEncodings(m.data.numRedundantEncodings):m.data.msgType==="Enable"?u.setRedundancyEnabled(!0):m.data.msgType==="Disable"&&u.setRedundancyEnabled(!1)}}static log(u){xs.shouldLog&&self.postMessage({type:"REDWorkerLog",log:`[AudioRed] ${u}`})}static getNumRedundantEncodingsForPacketLoss(u){let m=0,a=!1;return u<=8?m=0:u<=18?m=1:u<=75?m=2:(m=0,a=!0),[m,a]}setupPassthroughTransform(u,m){xs.log("Setting up passthrough transform"),u.pipeTo(m)}setupSenderTransform(u,m){xs.log("Setting up sender RED transform");const a=new TransformStream({transform:this.senderTransform.bind(this)});u.pipeThrough(a).pipeTo(m)}setupReceiverTransform(u,m){xs.log("Setting up receiver RED transform");const a=new TransformStream({transform:this.receivePacketLogTransform.bind(this)});u.pipeThrough(a).pipeTo(m)}setRedPayloadType(u){this.redPayloadType=u,xs.log(`red payload type set to ${this.redPayloadType}`)}setOpusPayloadType(u){this.opusPayloadType=u,xs.log(`opus payload type set to ${this.opusPayloadType}`)}setNumRedundantEncodings(u){this.numRedundantEncodings=u,this.numRedundantEncodings>this.maxRedEncodings&&(this.numRedundantEncodings=this.maxRedEncodings),xs.log(`Updated numRedundantEncodings to ${this.numRedundantEncodings}`)}setRedundancyEnabled(u){this.redundancyEnabled=u,xs.log(`redundancy ${this.redundancyEnabled?"enabled":"disabled"}`)}enqueueAudioFrameIfPayloadSizeIsValid(u,m){u.data.byteLength>this.maxAudioPayloadSizeBytes||m.enqueue(u)}senderTransform(u,m){if(u.getMetadata().payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const s=this.getPrimaryPayload(u.timestamp,u.data);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const i=this.encode(u.timestamp,s);if(!i){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}u.data=i,this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}getPrimaryPayload(u,m){const a=this.splitEncodings(u,m);return!a||a.length<1?null:a[a.length-1].payload}splitEncodings(u,m){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:void 0;const i=new DataView(m);let e=i.byteLength,t=0,n=0,r=0,c=0,p=!1;const g=new Array,d=new Array,y=new Array;for(;e>0;)if(p=(i.getUint8(c)&128)===0,p){if((i.getUint8(c)&127)!==this.opusPayloadType||(t+=this.redLastHeaderSizeBytes,n+=this.redLastHeaderSizeBytes,t>=i.byteLength))return null;r=i.byteLength-t;break}else{if(e<this.redHeaderSizeBytes)return null;const N=((i.getUint8(c+2)&3)<<8)+i.getUint8(c+3);d.push(N);const P=i.getUint16(c+1)>>2,x=u-P;y.push(x),t+=N+this.redHeaderSizeBytes,n+=this.redHeaderSizeBytes,c+=this.redHeaderSizeBytes,e-=this.redHeaderSizeBytes}if(!p)return null;let E=n;for(let N=0;N<y.length;N++){const P=new ArrayBuffer(d[N]);new Uint8Array(P).set(new Uint8Array(i.buffer,E,d[N]),0);const O={timestamp:y[N],payload:P,isRedundant:!0};a&&(O.hasFec=this.opusPacketHasFec(new DataView(P),P.byteLength)),g.push(O),E+=d[N]}const w=i.byteLength-r,k=new ArrayBuffer(r);new Uint8Array(k).set(new Uint8Array(i.buffer,w,r),0);const F={timestamp:u,payload:k,isRedundant:!1,seq:s};return a&&(F.hasFec=this.opusPacketHasFec(new DataView(k),k.byteLength)),g.push(F),g}encode(u,m){const a=m.byteLength;if(a===0||a>=this.maxRedPacketSizeBytes||a>=this.maxAudioPayloadSizeBytes)return null;const s=this.numRedundantEncodings;let i=this.redLastHeaderSizeBytes,e=a,t=this.maxAudioPayloadSizeBytes-a-i;const n=new Array,r=new Array;if(this.redundancyEnabled){let y=this.uint32WrapAround(u-this.redPacketizationTime*this.redPacketDistance);for(let E=0;E<s&&!(this.uint32WrapAround(u-y)>=this.maxRedTimestampOffset);E++){let w=y,k=this.encodingHistory.find(V=>V.timestamp===w);if(k||(w=this.uint32WrapAround(y-this.redPacketizationTime),k=this.encodingHistory.find(V=>V.timestamp===w)),k){const V=k.payload.byteLength;if(t<this.redHeaderSizeBytes+V)break;t-=this.redHeaderSizeBytes+V,i+=this.redHeaderSizeBytes,e+=V,n.unshift(k.timestamp),r.unshift(k.payload)}y-=this.redPacketizationTime*this.redPacketDistance,y=this.uint32WrapAround(y)}}const c=new ArrayBuffer(i+e),p=new DataView(c);let g=0;for(let y=0;y<n.length;y++){const E=u-n[y];p.setUint8(g,this.opusPayloadType|128),p.setUint16(g+1,E<<2|r[y].byteLength>>8),p.setUint8(g+3,r[y].byteLength&255),g+=this.redHeaderSizeBytes}p.setUint8(g,this.opusPayloadType),g+=this.redLastHeaderSizeBytes;const d=new Uint8Array(c);for(let y=0;y<r.length;y++)d.set(new Uint8Array(r[y]),g),g+=r[y].byteLength;return d.set(new Uint8Array(m),g),g+=m.byteLength,g!==i+e?null:(this.updateEncodingHistory(u,m),c)}updateEncodingHistory(u,m){for(const s of this.encodingHistory){const i=this.redPacketizationTime*this.redMaxRecoveryDistance;if(u-s.timestamp>=i)this.encodingHistory.shift();else break}const a=new DataView(m);(this.opusPacketIsCeltOnly(a)||this.opusPacketHasVoiceActivity(a,a.byteLength)>0)&&(this.encodingHistory.length+1>this.maxEncodingHistorySize&&(this.encodingHistory.length=0),this.encodingHistory.push({timestamp:u,payload:m}))}initializePacketLogs(){const u=this.maxOutOfOrderPacketDistance+this.redMaxRecoveryDistance;this.primaryPacketLog={window:new Array(u),index:0,windowSize:u},this.redRecoveryLog={window:new Array(u),index:0,windowSize:u},this.fecRecoveryLog={window:new Array(u),index:0,windowSize:u},this.totalAudioPacketsExpected=0,this.totalAudioPacketsLost=0,this.totalAudioPacketsRecoveredRed=0,this.totalAudioPacketsRecoveredFec=0}receivePacketLogTransform(u,m){const a=u.getMetadata();if(a.payloadType!==this.redPayloadType){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}const s=this.splitEncodings(u.timestamp,u.data,!0,a.sequenceNumber);if(!s){this.enqueueAudioFrameIfPayloadSizeIsValid(u,m);return}for(let i=s.length-1;i>=0;i--)this.updateLossStats(s[i])&&(this.updateRedStats(s[i]),this.updateFecStats(s[i]));this.maybeReportLossStats(s[s.length-1].timestamp,a.synchronizationSource),this.enqueueAudioFrameIfPayloadSizeIsValid(u,m)}updateLossStats(u){if(u.isRedundant)return!0;const m=u.timestamp,a=u.seq;if(this.totalAudioPacketsExpected===0)return this.totalAudioPacketsExpected=1,this.newestSequenceNumber=a,this.addTimestamp(this.primaryPacketLog,m),!0;const s=this.int16(a-this.newestSequenceNumber);return s<-this.maxOutOfOrderPacketDistance?!1:(s<0?this.hasTimestamp(this.primaryPacketLog,m)||(this.totalAudioPacketsLost>0&&this.totalAudioPacketsLost--,this.addTimestamp(this.primaryPacketLog,m),this.removeFromRecoveryWindows(m)):s>1&&(this.totalAudioPacketsLost+=s-1),s>0&&(this.totalAudioPacketsExpected+=s,this.newestSequenceNumber=u.seq,this.addTimestamp(this.primaryPacketLog,m)),!0)}updateRedStats(u){if(!u.isRedundant||this.totalAudioPacketsLost===0)return;const m=u.timestamp;this.hasTimestamp(this.primaryPacketLog,m)||(this.hasTimestamp(this.redRecoveryLog,m)||(this.totalAudioPacketsRecoveredRed++,this.addTimestamp(this.redRecoveryLog,m)),this.removeTimestamp(this.fecRecoveryLog,m)&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--)}updateFecStats(u){if(!u.hasFec||this.totalAudioPacketsLost===0)return;const m=u.timestamp-this.redPacketizationTime;this.hasTimestamp(this.primaryPacketLog,m)||this.hasTimestamp(this.redRecoveryLog,m)||this.hasTimestamp(this.fecRecoveryLog,m)||(this.totalAudioPacketsRecoveredFec++,this.addTimestamp(this.fecRecoveryLog,m))}maybeReportLossStats(u,m){u-this.lastLossReportTimestamp<this.lossReportInterval||(xs.shouldReportStats&&self.postMessage({type:"RedundantAudioEncoderStats",ssrc:m,totalAudioPacketsLost:this.totalAudioPacketsLost,totalAudioPacketsExpected:this.totalAudioPacketsExpected,totalAudioPacketsRecoveredRed:this.totalAudioPacketsRecoveredRed,totalAudioPacketsRecoveredFec:this.totalAudioPacketsRecoveredFec}),this.lastLossReportTimestamp=u)}addTimestamp(u,m){u.window[u.index]=m,u.index=(u.index+1)%u.windowSize}hasTimestamp(u,m){return!!u.window.find(s=>s===m)}removeTimestamp(u,m){const a=u.window.indexOf(m);return a>=0?(u.window[a]=void 0,!0):!1}removeFromRecoveryWindows(u){let m=this.removeTimestamp(this.redRecoveryLog,u);m&&this.totalAudioPacketsRecoveredRed>0&&this.totalAudioPacketsRecoveredRed--,m=this.removeTimestamp(this.fecRecoveryLog,u),m&&this.totalAudioPacketsRecoveredFec>0&&this.totalAudioPacketsRecoveredFec--}uint32WrapAround(u){let a=u;return u>=4294967296?a=u-4294967296:u<0&&(a=4294967296+u),a}int16(u){return u<<16>>16}opusPacketIsCeltOnly(u){return!!(u.getUint8(0)&128)}opusPacketGetSamplesPerFrame(u,m){m=Math.round(m),m=Math.min(Math.max(m,-Math.pow(2,32)),Math.pow(2,32)-1);let a,s;return this.opusPacketIsCeltOnly(u)?(s=u.getUint8(0)>>3&3,a=(m<<s)/400):(u.getUint8(0)&96)===96?a=u.getUint8(0)&8?m/50:m/100:(s=u.getUint8(0)>>3&3,s===3?a=m*60/1e3:a=(m<<s)/100),a}opusNumSilkFrames(u){let m=this.opusPacketGetSamplesPerFrame(u,48e3)/48;switch(m<10&&(m=10),m){case 10:case 20:return 1;case 40:return 2;case 60:return 3;default:return 0}}opusPacketGetNumChannels(u){return u.getUint8(0)&4?2:1}opusParseSize(u,m,a,s){return a<1?(s[0]=-1,-1):u.getUint8(m)<252?(s[0]=u.getUint8(m),1):a<2?(s[0]=-1,-1):(s[0]=4*u.getUint8(m+1)+u.getUint8(m),2)}opusPacketParseImpl(u,m,a,s,i,e,t,n){if(!e||m<0)return this.OPUS_BAD_ARG;if(m===0)return this.OPUS_INVALID_PACKET;let r,c,p=0,g=!1;const d=u.getUint8(0);s&&(s[0]=d);let y=m-1,E=1,w=y;switch(d&3){case 0:r=1;break;case 1:if(r=2,g=!0,!a){if(y&1)return this.OPUS_INVALID_PACKET;w=y/2,e[0][0]=w}break;case 2:if(r=2,c=this.opusParseSize(u,E,y,e[0]),y-=c,e[0][0]<0||e[0][0]>y)return this.OPUS_INVALID_PACKET;E+=c,w=y-e[0][0];break;default:if(y<1)return this.OPUS_INVALID_PACKET;const k=u.getUint8(E++);if(--y,r=k&63,r<=0)return this.OPUS_INVALID_PACKET;if(this.opusPacketGetSamplesPerFrame(u,48e3)*r>5760)return this.OPUS_INVALID_PACKET;if(k&64){let F,N;do{if(y<=0)return this.OPUS_INVALID_PACKET;F=u.getUint8(E++),--y,N=F===255?254:F,y-=N,p+=N}while(F===255)}if(y<0)return this.OPUS_INVALID_PACKET;if(g=!(k&128),g){if(!a){if(w=Math.trunc(y/r),w*r!==y)return this.OPUS_INVALID_PACKET;for(let F=0;F<r-1;++F)e[F][0]=w}}else{w=y;for(let F=0;F<r-1;++F){if(c=this.opusParseSize(u,E,y,e[F]),y-=c,e[F][0]<0||e[F][0]>y)return this.OPUS_INVALID_PACKET;E+=c,w-=c+e[F][0]}if(w<0)return this.OPUS_INVALID_PACKET}}if(a){if(c=this.opusParseSize(u,E,y,e[r-1]),y-=c,e[r-1][0]<0||e[r-1][0]>y)return this.OPUS_INVALID_PACKET;if(E+=c,g){if(e[r-1][0]*r>y)return this.OPUS_INVALID_PACKET;for(let k=0;k<r-1;++k)e[k][0]=e[r-1][0]}else if(!(c+e[r-1][0]<=w))return this.OPUS_INVALID_PACKET}else{if(w>this.OPUS_MAX_FRAME_SIZE_BYTES)return this.OPUS_INVALID_PACKET;e[r-1][0]=w}t&&(t[0]=E);for(let k=0;k<r;++k)i&&(i[k][0]=E),E+=e[k][0];return n&&(n[0]=E+p),r}opusPacketParse(u,m,a,s,i,e){return this.opusPacketParseImpl(u,m,!1,a,s,i,e,null)}opusPacketHasVoiceActivity(u,m){if(!u||m<=0)return 0;if(this.opusPacketIsCeltOnly(u))return-1;const a=this.opusNumSilkFrames(u);if(a===0)return-1;const s=new Array(this.OPUS_MAX_OPUS_FRAMES),i=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let t=0;t<this.OPUS_MAX_OPUS_FRAMES;++t)s[t]=[void 0],i[t]=[void 0];const e=this.opusPacketParse(u,m,null,s,i,null);if(e<0)return-1;for(let t=0;t<e;++t){if(i[t][0]<1)continue;if(u.getUint8(s[t][0])>>8-a||this.opusPacketGetNumChannels(u)===2&&u.getUint8(s[t][0])<<a+1>>8-a)return 1}return 0}opusPacketHasFec(u,m){if(!u||m<=0||this.opusPacketIsCeltOnly(u))return!1;const a=new Array(this.OPUS_MAX_OPUS_FRAMES),s=new Array(this.OPUS_MAX_OPUS_FRAMES);for(let n=0;n<this.OPUS_MAX_OPUS_FRAMES;++n)a[n]=[void 0],s[n]=[void 0];if(this.opusPacketParse(u,m,null,a,s,null)<0||s[0][0]<=1)return!1;const e=this.opusNumSilkFrames(u);if(e===0)return!1;const t=this.opusPacketGetNumChannels(u);if(t!==1&&t!==2)return!1;for(let n=0;n<t;n++)if(u.getUint8(a[0][0])&128>>(n+1)*(e+1)-1)return!0;return!1}constructor(){this.maxRedPacketSizeBytes=1<<10,this.maxAudioPayloadSizeBytes=1e3,this.maxRedTimestampOffset=1<<14,this.redHeaderSizeBytes=4,this.redLastHeaderSizeBytes=1,this.redPacketizationTime=960,this.redPacketDistance=2,this.maxRedEncodings=2,this.redMaxRecoveryDistance=this.redPacketDistance*this.maxRedEncodings+1,this.maxEncodingHistorySize=10,this.numRedundantEncodings=0,this.redundancyEnabled=!0,this.lossReportInterval=48e3*5,this.maxOutOfOrderPacketDistance=16,this.OPUS_BAD_ARG=-1,this.OPUS_INVALID_PACKET=-4,this.OPUS_MAX_OPUS_FRAMES=48,this.OPUS_MAX_FRAME_SIZE_BYTES=1275,this.encodingHistory=new Array,this.opusPayloadType=0,this.redPayloadType=0,this.initializePacketLogs()}},"RedundantAudioEncoder");l.default=S,S.shouldLog=!1,S.shouldReportStats=!1},aSsB:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkTCPConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",h[h.ConnectionFailed=2]="ConnectionFailed",h[h.ICENegotiationFailed=3]="ICENegotiationFailed"})(S=l.CheckNetworkTCPConnectivityFeedback||(l.CheckNetworkTCPConnectivityFeedback={})),l.default=S},aTUL:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("mYvd");let h=o(class Jc{compress(m,a){if(a.length>0){const e=Math.min(a.length,Jc.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={memLevel:Jc.Z_MEM_LEVEL,dictionary:a};return S.deflateRaw(m,s)}decompress(m,a){if(a.length>0){const e=Math.min(a.length,Jc.MAX_DICTIONARY_SIZE);a=a.slice(0,e)}const s={to:"string",dictionary:a,chunkSize:4096};let i="";try{i=S.inflateRaw(m,s)}catch(e){this.logger.error(`failed to decompress the string with error: [${e}]`)}return i}constructor(m){this.logger=m}},"ZLIBTextCompressor");l.default=h,h.Z_MEM_LEVEL=9,h.MAX_DICTIONARY_SIZE=31744},aVV0:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("V3UW")),m=h(f("Sl5A"));let a=o(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new u.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return S(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(i){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},aZJ3:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("mlaT"));let u=o(class{info(a){}warn(a){}error(a){}debug(a){h.default.DEBUG<this.level||typeof a!="string"&&a()}setLogLevel(a){this.level=a}getLogLevel(){return this.level}constructor(a=h.default.OFF){this.level=a}},"NoOpLogger");l.default=u},aZba:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("XCDq"),u=S(f("papz"));let m=o(class Tr{statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:case u.default.VideoCallAtSourceCapacity:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.ICEGatheringTimeoutWorkaround:case u.default.ConnectionHealthReconnect:case u.default.RealtimeApiFailed:case u.default.TaskFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case u.default.Left:case u.default.AudioJoinedFromAnotherDevice:case u.default.AudioAuthenticationRejected:case u.default.AudioCallAtCapacity:case u.default.MeetingEnded:case u.default.AudioDisconnected:case u.default.TURNCredentialsForbidden:case u.default.SignalingBadRequest:case u.default.SignalingRequestFailed:case u.default.VideoCallAtSourceCapacity:case u.default.RealtimeApiFailed:case u.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case u.default.AudioAuthenticationRejected:case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.ICEGatheringTimeoutWorkaround:case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:case u.default.RealtimeApiFailed:case u.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case u.default.OK:return"Everything is OK so far.";case u.default.Left:return"The attendee left the meeting.";case u.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case u.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case u.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case u.default.MeetingEnded:return"The meeting ended.";case u.default.AudioInternalServerError:case u.default.AudioServiceUnavailable:case u.default.AudioDisconnected:return"The audio connection failed.";case u.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case u.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case u.default.SignalingBadRequest:case u.default.SignalingInternalServerError:case u.default.SignalingRequestFailed:return"The signaling connection failed.";case u.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case u.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case u.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case u.default.TaskFailed:return"The connection failed. See the error message for more details.";case u.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case u.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case u.default.NoAttendeePresent:return"The attendee was not present.";case u.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";case u.default.AudioVideoWasRemovedFromPrimaryMeeting:return"The Primary meeting credentials provided are no longer valid. chime::DeleteAttendee may have been called on them.";case u.default.AudioDisconnectAudio:return"The audio connection failed.";default:{const s=this._statusCode;throw new Error(`Unhandled case: ${s}`)}}}static fromSignalFrame(s){return s.error&&s.error.status?this.fromSignalingStatus(s.error.status):s.type===h.SdkSignalFrame.Type.AUDIO_STATUS?s.audioStatus?this.fromAudioStatus(s.audioStatus.audioStatus):new Tr(u.default.SignalingRequestFailed):s.type===h.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE?new Tr(u.default.AudioVideoWasRemovedFromPrimaryMeeting):new Tr(u.default.OK)}static fromAudioStatus(s){switch(s){case 200:return new Tr(u.default.OK);case 301:return new Tr(u.default.AudioJoinedFromAnotherDevice);case 302:return new Tr(u.default.AudioDisconnectAudio);case 403:return new Tr(u.default.AudioAuthenticationRejected);case 409:return new Tr(u.default.AudioCallAtCapacity);case 410:return new Tr(u.default.MeetingEnded);case 411:return new Tr(u.default.AudioAttendeeRemoved);case 500:return new Tr(u.default.AudioInternalServerError);case 503:return new Tr(u.default.AudioServiceUnavailable);default:switch(Math.floor(s/100)){case 2:return new Tr(u.default.OK);default:return new Tr(u.default.AudioDisconnected)}}}static fromSignalingStatus(s){switch(s){case 206:return new Tr(u.default.VideoCallSwitchToViewOnly);case 509:return new Tr(u.default.VideoCallAtSourceCapacity);case 403:return new Tr(u.default.AudioAuthenticationRejected);case 409:return new Tr(u.default.AudioCallAtCapacity);default:switch(Math.floor(s/100)){case 2:return new Tr(u.default.OK);case 4:return new Tr(u.default.SignalingBadRequest);case 5:return new Tr(u.default.SignalingInternalServerError);default:return new Tr(u.default.SignalingRequestFailed)}}}constructor(s){this._statusCode=s}},"MeetingSessionStatus");l.default=m},ac3q:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("U9CR")),u=S(f("DJNY"));let m=o(class dc{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return u.default.semverString}static get sdkVersionSemVer(){var s,i,e,t;const n=u.default.semverString.match(/^(?<major>[0-9]+)\.(?<minor>[0-9]+)((?:\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\.[0-9])*))?)?/);return{major:(s=n==null?void 0:n.groups)===null||s===void 0?void 0:s.major,minor:(i=n==null?void 0:n.groups)===null||i===void 0?void 0:i.minor,patch:(e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.patch,preRelease:(t=n==null?void 0:n.groups)===null||t===void 0?void 0:t.preRelease}}static get buildSHA(){return u.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const s=new h.default;return`${s.name()}-${s.majorVersion()}`}static urlWithVersion(s){const i=new URL(s);return i.searchParams.append(dc.X_AMZN_VERSION,dc.sdkVersion),i.searchParams.append(dc.X_AMZN_USER_AGENT,dc.sdkUserAgentLowResolution),i.toString()}},"Versioning");l.default=m,m.X_AMZN_VERSION="X-Amzn-Version",m.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},aqWb:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"VideoSource");l.default=S},b4Ml:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var S=f("pU0T"),h=f("p72H"),u=f("Yugg"),m=function(){function a(s){this.toHash=new Uint8Array(0),this.secret=s,this.reset()}return o(a,"Sha256"),a.prototype.update=function(s){if(!(0,S.isEmptyData)(s)){var i=(0,S.convertToBuffer)(s),e=new Uint8Array(this.toHash.byteLength+i.byteLength);e.set(this.toHash,0),e.set(i,this.toHash.byteLength),this.toHash=e}},a.prototype.digest=function(){var s=this;return this.key?this.key.then(function(i){return(0,u.locateWindow)().crypto.subtle.sign(h.SHA_256_HMAC_ALGO,i,s.toHash).then(function(e){return new Uint8Array(e)})}):(0,S.isEmptyData)(this.toHash)?Promise.resolve(h.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,u.locateWindow)().crypto.subtle.digest(h.SHA_256_HASH,s.toHash)}).then(function(i){return Promise.resolve(new Uint8Array(i))})},a.prototype.reset=function(){var s=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(i,e){(0,u.locateWindow)().crypto.subtle.importKey("raw",(0,S.convertToBuffer)(s.secret),h.SHA_256_HMAC_ALGO,!1,["sign"]).then(i,e)}),this.key.catch(function(){}))},a}();l.Sha256=m},bBgO:function(j,l){function f(S,h){return j.exports=f=Object.setPrototypeOf?Object.setPrototypeOf.bind():o(function(m,a){return m.__proto__=a,m},"_setPrototypeOf"),j.exports.__esModule=!0,j.exports.default=j.exports,f(S,h)}o(f,"_setPrototypeOf"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},"bQ+R":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{equals(u){return u!==void 0&&this.mid===u.mid&&this.attendeeId===u.attendeeId&&this.streamId===u.streamId&&this.groupId===u.groupId&&this.priority===u.priority&&this.targetBitrateKbps===u.targetBitrateKbps&&this.qualityAdaptationPreference===u.qualityAdaptationPreference}},"SignalingClientVideoSubscriptionConfiguration");l.default=S},bTau:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("34ho"));let u=o(class Ul{id(){return this._id}base(){return this._id?this._id.split(Ul.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(Ul.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const s=new Ul(this.base()+Ul.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new Ul(s._id).modality()!==a?new Ul(this.base()):s}constructor(a){this._id=a}},"DefaultModality");l.default=u,u.MODALITY_SEPARATOR=h.default.Modality[0],u.MODALITY_CONTENT=h.default.Modality.substr(1)},bVud:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S=f("4vb1");S.__exportStar(f("ntEb"),l)},beBF:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"Attendee");l.default=S},bjg3:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportDirection=void 0;var S;(function(h){h[h.UPSTREAM=0]="UPSTREAM",h[h.DOWNSTREAM=1]="DOWNSTREAM"})(S=l.ClientMetricReportDirection||(l.ClientMetricReportDirection={})),l.default=S},c41J:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={ChannelNotFound:"channel_not_found",GlobalRatelimited:"global_ratelimited",Ratelimited:"ratelimited",InternalError:"internal_error"},t=Object(a.a)("megaphone.notifications.list generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"megaphone.notifications.list",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to megaphone.notifications.list
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchermegaphoneNotificationsListFetcher",description:"megaphone.notifications.list generated fetcher"}},c7k8:function(j,l,f){"use strict";f.d(l,"a",function(){return li}),f.d(l,"b",function(){return _r}),f.d(l,"c",function(){return dn}),f.d(l,"d",function(){return Jn}),f.d(l,"k",function(){return Sn}),f.d(l,"f",function(){return Sr}),f.d(l,"g",function(){return eo}),f.d(l,"h",function(){return rs}),f.d(l,"i",function(){return Rs}),f.d(l,"e",function(){return lo}),f.d(l,"j",function(){return Ao});var S=f("TSeO"),h=f.n(S),u=f("V+x/"),m=f.n(u),a=f("Sh4b"),s=f.n(a),i=f("5i9P"),e=f.n(i),t=f("UrPO"),n=f.n(t),r=f("75SI"),c=f.n(r),p=f("dXzy"),g=f.n(p),d=f("q1tI"),y=f("VCL8"),E=f("FtwJ"),w=f.n(E);function k(ne){var te,Q,A="";if(typeof ne=="string"||typeof ne=="number")A+=ne;else if(typeof ne=="object")if(Array.isArray(ne))for(te=0;te<ne.length;te++)ne[te]&&(Q=k(ne[te]))&&(A&&(A+=" "),A+=Q);else for(te in ne)ne[te]&&(A&&(A+=" "),A+=te);return A}o(k,"clsx_m_r");function V(){for(var ne,te,Q=0,A="";Q<arguments.length;)(ne=arguments[Q++])&&(te=k(ne))&&(A&&(A+=" "),A+=te);return A}o(V,"clsx");var F=V;function N(ne){var te=ne.cellCount,Q=ne.cellSize,A=ne.computeMetadataCallback,X=ne.computeMetadataCallbackProps,se=ne.nextCellsCount,oe=ne.nextCellSize,ve=ne.nextScrollToIndex,Ie=ne.scrollToIndex,Ae=ne.updateScrollOffsetForScrollToIndex;(te!==se||(typeof Q=="number"||typeof oe=="number")&&Q!==oe)&&(A(X),Ie>=0&&Ie===ve&&Ae())}o(N,"calculateSizeAndPositionDataAndUpdateScrollOffset");var P=f("sgfj"),x=f.n(P),O=f("n3tL"),M=null,D=null,J=null,q=null,$=null,de=null,Ee=null,_e=null,ye=null,Be=null,pt=null,Ve=null,gt=null,dt=null,Je=null,_t=null,ot=null,Et=null,Mt=function(){function ne(te){var Q=te.cellCount,A=te.cellSizeGetter,X=te.estimatedCellSize;h()(this,ne),g()(this,"_cellSizeAndPositionData",{}),g()(this,"_lastMeasuredIndex",-1),g()(this,"_lastBatchedIndex",-1),g()(this,"_cellCount",void 0),g()(this,"_cellSizeGetter",void 0),g()(this,"_estimatedCellSize",void 0),this._cellSizeGetter=A,this._cellCount=Q,this._estimatedCellSize=X}return o(ne,"CellSizeAndPositionManager"),m()(ne,[{key:"areOffsetsAdjusted",value:o(function(){return!1},"areOffsetsAdjusted")},{key:"configure",value:o(function(Q){var A=Q.cellCount,X=Q.estimatedCellSize,se=Q.cellSizeGetter;this._cellCount=A,this._estimatedCellSize=X,this._cellSizeGetter=se},"configure")},{key:"getCellCount",value:o(function(){return this._cellCount},"getCellCount")},{key:"getEstimatedCellSize",value:o(function(){return this._estimatedCellSize},"getEstimatedCellSize")},{key:"getLastMeasuredIndex",value:o(function(){return this._lastMeasuredIndex},"getLastMeasuredIndex")},{key:"getOffsetAdjustment",value:o(function(){return 0},"getOffsetAdjustment")},{key:"getSizeAndPositionOfCell",value:o(function(Q){if(Q<0||Q>=this._cellCount)throw Error("Requested index ".concat(Q," is outside of range 0..").concat(this._cellCount));if(Q>this._lastMeasuredIndex)for(var A=this.getSizeAndPositionOfLastMeasuredCell(),X=A.offset+A.size,se=this._lastMeasuredIndex+1;se<=Q;se++){var oe=this._cellSizeGetter({index:se});if(oe===void 0||isNaN(oe))throw Error("Invalid size returned for cell ".concat(se," of value ").concat(oe));oe===null?(this._cellSizeAndPositionData[se]={offset:X,size:0},this._lastBatchedIndex=Q):(this._cellSizeAndPositionData[se]={offset:X,size:oe},X+=oe,this._lastMeasuredIndex=Q)}return this._cellSizeAndPositionData[Q]},"getSizeAndPositionOfCell")},{key:"getSizeAndPositionOfLastMeasuredCell",value:o(function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}},"getSizeAndPositionOfLastMeasuredCell")},{key:"getTotalSize",value:o(function(){var Q=this.getSizeAndPositionOfLastMeasuredCell(),A=Q.offset+Q.size,X=this._cellCount-this._lastMeasuredIndex-1,se=X*this._estimatedCellSize;return A+se},"getTotalSize")},{key:"getUpdatedOffsetForIndex",value:o(function(Q){var A=Q.align,X=A===void 0?"auto":A,se=Q.containerSize,oe=Q.currentOffset,ve=Q.targetIndex;if(se<=0)return 0;var Ie=this.getSizeAndPositionOfCell(ve),Ae=Ie.offset,ke=Ae-se+Ie.size,De;switch(X){case"start":De=Ae;break;case"end":De=ke;break;case"center":De=Ae-(se-Ie.size)/2;break;default:De=Math.max(ke,Math.min(Ae,oe));break}var Ge=this.getTotalSize();return Math.max(0,Math.min(Ge-se,De))},"getUpdatedOffsetForIndex")},{key:"getVisibleCellRange",value:o(function(Q){var A=Q.containerSize,X=Q.offset,se=this.getTotalSize();if(se===0)return{};var oe=X+A,ve=this._findNearestCell(X),Ie=this.getSizeAndPositionOfCell(ve);X=Ie.offset+Ie.size;for(var Ae=ve;X<oe&&Ae<this._cellCount-1;)Ae++,X+=this.getSizeAndPositionOfCell(Ae).size;return{start:ve,stop:Ae}},"getVisibleCellRange")},{key:"resetCell",value:o(function(Q){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,Q-1)},"resetCell")},{key:"_binarySearch",value:o(function(Q,A,X){for(;A<=Q;){var se=A+Math.floor((Q-A)/2),oe=this.getSizeAndPositionOfCell(se).offset;if(oe===X)return se;oe<X?A=se+1:oe>X&&(Q=se-1)}return A>0?A-1:0},"_binarySearch")},{key:"_exponentialSearch",value:o(function(Q,A){for(var X=1;Q<this._cellCount&&this.getSizeAndPositionOfCell(Q).offset<A;)Q+=X,X*=2;return this._binarySearch(Math.min(Q,this._cellCount-1),Math.floor(Q/2),A)},"_exponentialSearch")},{key:"_findNearestCell",value:o(function(Q){if(isNaN(Q))throw Error("Invalid offset ".concat(Q," specified"));Q=Math.max(0,Q);var A=this.getSizeAndPositionOfLastMeasuredCell(),X=Math.max(0,this._lastMeasuredIndex);return A.offset>=Q?this._binarySearch(X,0,Q):this._exponentialSearch(X,Q)},"_findNearestCell")}]),ne}(),ze=15e5,$t=16777100,Un=o(function(){return typeof window<"u"},"isBrowser"),ni=o(function(){return!!window.chrome},"isChrome"),an=o(function(){return Un()&&ni()?$t:ze},"getMaxElementSize"),Gn=function(){function ne(te){var Q=te.maxScrollSize,A=Q===void 0?an():Q,X=x()(te,["maxScrollSize"]);h()(this,ne),g()(this,"_cellSizeAndPositionManager",void 0),g()(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new Mt(X),this._maxScrollSize=A}return o(ne,"ScalingCellSizeAndPositionManager"),m()(ne,[{key:"areOffsetsAdjusted",value:o(function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize},"areOffsetsAdjusted")},{key:"configure",value:o(function(Q){this._cellSizeAndPositionManager.configure(Q)},"configure")},{key:"getCellCount",value:o(function(){return this._cellSizeAndPositionManager.getCellCount()},"getCellCount")},{key:"getEstimatedCellSize",value:o(function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()},"getEstimatedCellSize")},{key:"getLastMeasuredIndex",value:o(function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()},"getLastMeasuredIndex")},{key:"getOffsetAdjustment",value:o(function(Q){var A=Q.containerSize,X=Q.offset,se=this._cellSizeAndPositionManager.getTotalSize(),oe=this.getTotalSize(),ve=this._getOffsetPercentage({containerSize:A,offset:X,totalSize:oe});return Math.round(ve*(oe-se))},"getOffsetAdjustment")},{key:"getSizeAndPositionOfCell",value:o(function(Q){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(Q)},"getSizeAndPositionOfCell")},{key:"getSizeAndPositionOfLastMeasuredCell",value:o(function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()},"getSizeAndPositionOfLastMeasuredCell")},{key:"getTotalSize",value:o(function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())},"getTotalSize")},{key:"getUpdatedOffsetForIndex",value:o(function(Q){var A=Q.align,X=A===void 0?"auto":A,se=Q.containerSize,oe=Q.currentOffset,ve=Q.targetIndex;oe=this._safeOffsetToOffset({containerSize:se,offset:oe});var Ie=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:X,containerSize:se,currentOffset:oe,targetIndex:ve});return this._offsetToSafeOffset({containerSize:se,offset:Ie})},"getUpdatedOffsetForIndex")},{key:"getVisibleCellRange",value:o(function(Q){var A=Q.containerSize,X=Q.offset;return X=this._safeOffsetToOffset({containerSize:A,offset:X}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:A,offset:X})},"getVisibleCellRange")},{key:"resetCell",value:o(function(Q){this._cellSizeAndPositionManager.resetCell(Q)},"resetCell")},{key:"_getOffsetPercentage",value:o(function(Q){var A=Q.containerSize,X=Q.offset,se=Q.totalSize;return se<=A?0:X/(se-A)},"_getOffsetPercentage")},{key:"_offsetToSafeOffset",value:o(function(Q){var A=Q.containerSize,X=Q.offset,se=this._cellSizeAndPositionManager.getTotalSize(),oe=this.getTotalSize();if(se===oe)return X;var ve=this._getOffsetPercentage({containerSize:A,offset:X,totalSize:se});return Math.round(ve*(oe-A))},"_offsetToSafeOffset")},{key:"_safeOffsetToOffset",value:o(function(Q){var A=Q.containerSize,X=Q.offset,se=this._cellSizeAndPositionManager.getTotalSize(),oe=this.getTotalSize();if(se===oe)return X;var ve=this._getOffsetPercentage({containerSize:A,offset:X,totalSize:oe});return Math.round(ve*(se-A))},"_safeOffsetToOffset")}]),ne}();function si(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,te={};return function(Q){var A=Q.callback,X=Q.indices,se=Object.keys(X),oe=!ne||se.every(function(Ie){var Ae=X[Ie];return Array.isArray(Ae)?Ae.length>0:Ae>=0}),ve=se.length!==Object.keys(te).length||se.some(function(Ie){var Ae=te[Ie],ke=X[Ie];return Array.isArray(ke)?Ae.join(",")!==ke.join(","):Ae!==ke});te=X,oe&&ve&&A(X)}}o(si,"createCallbackMemoizer");var ri=-1,On=1,Gi="horizontal",ui="vertical";function Fi(ne){var te=ne.cellCount,Q=ne.overscanCellsCount,A=ne.scrollDirection,X=ne.startIndex,se=ne.stopIndex;return A===On?{overscanStartIndex:Math.max(0,X),overscanStopIndex:Math.min(te-1,se+Q)}:{overscanStartIndex:Math.max(0,X-Q),overscanStopIndex:Math.min(te-1,se)}}o(Fi,"defaultOverscanIndicesGetter");function Hi(ne){var te=ne.cellSize,Q=ne.cellSizeAndPositionManager,A=ne.previousCellsCount,X=ne.previousCellSize,se=ne.previousScrollToAlignment,oe=ne.previousScrollToIndex,ve=ne.previousSize,Ie=ne.scrollOffset,Ae=ne.scrollToAlignment,ke=ne.scrollToIndex,De=ne.size,Ge=ne.sizeJustIncreasedFromZero,Xe=ne.updateScrollIndexCallback,ut=Q.getCellCount(),Ze=ke>=0&&ke<ut,Zt=De!==ve||Ge||!X||typeof te=="number"&&te!==X;Ze&&(Zt||Ae!==se||ke!==oe)?Xe(ke):!Ze&&ut>0&&(De<ve||ut<A)&&Ie>Q.getTotalSize()-De&&Xe(ut-1)}o(Hi,"updateScrollIndexHelper");function Sn(ne){for(var te=ne.cellCache,Q=ne.cellRenderer,A=ne.columnSizeAndPositionManager,X=ne.columnStartIndex,se=ne.columnStopIndex,oe=ne.deferredMeasurementCache,ve=ne.horizontalOffsetAdjustment,Ie=ne.isScrolling,Ae=ne.isScrollingOptOut,ke=ne.parent,De=ne.rowSizeAndPositionManager,Ge=ne.rowStartIndex,Xe=ne.rowStopIndex,ut=ne.styleCache,Ze=ne.verticalOffsetAdjustment,Zt=ne.visibleColumnIndices,rn=ne.visibleRowIndices,Tn=[],Pn=A.areOffsetsAdjusted()||De.areOffsetsAdjusted(),qn=!Ie&&!Pn,Kn=Ge;Kn<=Xe;Kn++)for(var ti=De.getSizeAndPositionOfCell(Kn),ei=X;ei<=se;ei++){var wi=A.getSizeAndPositionOfCell(ei),ki=ei>=Zt.start&&ei<=Zt.stop&&Kn>=rn.start&&Kn<=rn.stop,ci="".concat(Kn,"-").concat(ei),yi=void 0;qn&&ut[ci]?yi=ut[ci]:oe&&!oe.has(Kn,ei)?yi={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(yi={height:ti.size,left:wi.offset+ve,position:"absolute",top:ti.offset+Ze,width:wi.size},ut[ci]=yi);var or={columnIndex:ei,isScrolling:Ie,isVisible:ki,key:ci,parent:ke,rowIndex:Kn,style:yi},Mi=void 0;(Ae||Ie)&&!ve&&!Ze?(te[ci]||(te[ci]=Q(or)),Mi=te[ci]):Mi=Q(or),!(Mi==null||Mi===!1)&&Tn.push(Mi)}return Tn}o(Sn,"defaultCellRangeRenderer");function un(ne,te){}o(un,"warnAboutMissingStyle");var bn=!!(typeof window<"u"&&window.document&&window.document.createElement),Ot;function En(ne){if((!Ot&&Ot!==0||ne)&&bn){var te=document.createElement("div");te.style.position="absolute",te.style.top="-9999px",te.style.width="50px",te.style.height="50px",te.style.overflow="scroll",document.body.appendChild(te),Ot=te.offsetWidth-te.clientWidth,document.body.removeChild(te)}return Ot}o(En,"scrollbarSize_scrollbarSize");var Lt;typeof window<"u"?Lt=window:typeof self<"u"?Lt=self:Lt={};var Hn=Lt.requestAnimationFrame||Lt.webkitRequestAnimationFrame||Lt.mozRequestAnimationFrame||Lt.oRequestAnimationFrame||Lt.msRequestAnimationFrame||function(ne){return Lt.setTimeout(ne,1e3/60)},Ji=Lt.cancelAnimationFrame||Lt.webkitCancelAnimationFrame||Lt.mozCancelAnimationFrame||Lt.oCancelAnimationFrame||Lt.msCancelAnimationFrame||function(ne){Lt.clearTimeout(ne)},$n=Hn,Ti=Ji,Ir=null,er=o(function(te){return Ti(te.id)},"cancelAnimationTimeout"),cr=o(function(te,Q){var A;Promise.resolve().then(function(){A=Date.now()});var X=o(function oe(){Date.now()-A>=Q?te.call():se.id=$n(oe)},"timeout"),se={id:$n(X)};return se},"requestAnimationTimeout"),gi,Yi;function Xi(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(Xi,"ownKeys");function jt(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?Xi(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):Xi(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(jt,"_objectSpread");var pe=150,Re={OBSERVED:"observed",REQUESTED:"requested"},Fe=o(function(){return null},"renderNull"),qe=(Yi=gi=function(ne){c()(te,ne);function te(Q){var A;h()(this,te),A=s()(this,e()(te).call(this,Q)),g()(n()(A),"_onGridRenderedMemoizer",si()),g()(n()(A),"_onScrollMemoizer",si(!1)),g()(n()(A),"_deferredInvalidateColumnIndex",null),g()(n()(A),"_deferredInvalidateRowIndex",null),g()(n()(A),"_recomputeScrollLeftFlag",!1),g()(n()(A),"_recomputeScrollTopFlag",!1),g()(n()(A),"_horizontalScrollBarSize",0),g()(n()(A),"_verticalScrollBarSize",0),g()(n()(A),"_scrollbarPresenceChanged",!1),g()(n()(A),"_scrollingContainer",void 0),g()(n()(A),"_childrenToDisplay",void 0),g()(n()(A),"_columnStartIndex",void 0),g()(n()(A),"_columnStopIndex",void 0),g()(n()(A),"_rowStartIndex",void 0),g()(n()(A),"_rowStopIndex",void 0),g()(n()(A),"_renderedColumnStartIndex",0),g()(n()(A),"_renderedColumnStopIndex",0),g()(n()(A),"_renderedRowStartIndex",0),g()(n()(A),"_renderedRowStopIndex",0),g()(n()(A),"_initialScrollTop",void 0),g()(n()(A),"_initialScrollLeft",void 0),g()(n()(A),"_disablePointerEventsTimeoutId",void 0),g()(n()(A),"_styleCache",{}),g()(n()(A),"_cellCache",{}),g()(n()(A),"_debounceScrollEndedCallback",function(){A._disablePointerEventsTimeoutId=null,A.setState({isScrolling:!1,needToResetStyleCache:!1})}),g()(n()(A),"_invokeOnGridRenderedHelper",function(){var oe=A.props.onSectionRendered;A._onGridRenderedMemoizer({callback:oe,indices:{columnOverscanStartIndex:A._columnStartIndex,columnOverscanStopIndex:A._columnStopIndex,columnStartIndex:A._renderedColumnStartIndex,columnStopIndex:A._renderedColumnStopIndex,rowOverscanStartIndex:A._rowStartIndex,rowOverscanStopIndex:A._rowStopIndex,rowStartIndex:A._renderedRowStartIndex,rowStopIndex:A._renderedRowStopIndex}})}),g()(n()(A),"_setScrollingContainerRef",function(oe){A._scrollingContainer=oe}),g()(n()(A),"_onScroll",function(oe){oe.target===A._scrollingContainer&&A.handleScrollEvent(oe.target)});var X=new Gn({cellCount:Q.columnCount,cellSizeGetter:o(function(ve){return te._wrapSizeGetter(Q.columnWidth)(ve)},"cellSizeGetter"),estimatedCellSize:te._getEstimatedColumnSize(Q)}),se=new Gn({cellCount:Q.rowCount,cellSizeGetter:o(function(ve){return te._wrapSizeGetter(Q.rowHeight)(ve)},"cellSizeGetter"),estimatedCellSize:te._getEstimatedRowSize(Q)});return A.state={instanceProps:{columnSizeAndPositionManager:X,rowSizeAndPositionManager:se,prevColumnWidth:Q.columnWidth,prevRowHeight:Q.rowHeight,prevColumnCount:Q.columnCount,prevRowCount:Q.rowCount,prevIsScrolling:Q.isScrolling===!0,prevScrollToColumn:Q.scrollToColumn,prevScrollToRow:Q.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:On,scrollDirectionVertical:On,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},Q.scrollToRow>0&&(A._initialScrollTop=A._getCalculatedScrollTop(Q,A.state)),Q.scrollToColumn>0&&(A._initialScrollLeft=A._getCalculatedScrollLeft(Q,A.state)),A}return o(te,"Grid"),m()(te,[{key:"getOffsetForCell",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=A.alignment,se=X===void 0?this.props.scrollToAlignment:X,oe=A.columnIndex,ve=oe===void 0?this.props.scrollToColumn:oe,Ie=A.rowIndex,Ae=Ie===void 0?this.props.scrollToRow:Ie,ke=jt({},this.props,{scrollToAlignment:se,scrollToColumn:ve,scrollToRow:Ae});return{scrollLeft:this._getCalculatedScrollLeft(ke),scrollTop:this._getCalculatedScrollTop(ke)}},"getOffsetForCell")},{key:"getTotalRowsHeight",value:o(function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()},"getTotalRowsHeight")},{key:"getTotalColumnsWidth",value:o(function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()},"getTotalColumnsWidth")},{key:"handleScrollEvent",value:o(function(A){var X=A.scrollLeft,se=X===void 0?0:X,oe=A.scrollTop,ve=oe===void 0?0:oe;if(!(ve<0)){this._debounceScrollEnded();var Ie=this.props,Ae=Ie.autoHeight,ke=Ie.autoWidth,De=Ie.height,Ge=Ie.width,Xe=this.state.instanceProps,ut=Xe.scrollbarSize,Ze=Xe.rowSizeAndPositionManager.getTotalSize(),Zt=Xe.columnSizeAndPositionManager.getTotalSize(),rn=Math.min(Math.max(0,Zt-Ge+ut),se),Tn=Math.min(Math.max(0,Ze-De+ut),ve);if(this.state.scrollLeft!==rn||this.state.scrollTop!==Tn){var Pn=rn!==this.state.scrollLeft?rn>this.state.scrollLeft?On:ri:this.state.scrollDirectionHorizontal,qn=Tn!==this.state.scrollTop?Tn>this.state.scrollTop?On:ri:this.state.scrollDirectionVertical,Kn={isScrolling:!0,scrollDirectionHorizontal:Pn,scrollDirectionVertical:qn,scrollPositionChangeReason:Re.OBSERVED};Ae||(Kn.scrollTop=Tn),ke||(Kn.scrollLeft=rn),Kn.needToResetStyleCache=!1,this.setState(Kn)}this._invokeOnScrollMemoizer({scrollLeft:rn,scrollTop:Tn,totalColumnsWidth:Zt,totalRowsHeight:Ze})}},"handleScrollEvent")},{key:"invalidateCellSizeAfterRender",value:o(function(A){var X=A.columnIndex,se=A.rowIndex;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,X):X,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,se):se},"invalidateCellSizeAfterRender")},{key:"measureAllCells",value:o(function(){var A=this.props,X=A.columnCount,se=A.rowCount,oe=this.state.instanceProps;oe.columnSizeAndPositionManager.getSizeAndPositionOfCell(X-1),oe.rowSizeAndPositionManager.getSizeAndPositionOfCell(se-1)},"measureAllCells")},{key:"recomputeGridSize",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=A.columnIndex,se=X===void 0?0:X,oe=A.rowIndex,ve=oe===void 0?0:oe,Ie=this.props,Ae=Ie.scrollToColumn,ke=Ie.scrollToRow,De=this.state.instanceProps;De.columnSizeAndPositionManager.resetCell(se),De.rowSizeAndPositionManager.resetCell(ve),this._recomputeScrollLeftFlag=Ae>=0&&(this.state.scrollDirectionHorizontal===On?se<=Ae:se>=Ae),this._recomputeScrollTopFlag=ke>=0&&(this.state.scrollDirectionVertical===On?ve<=ke:ve>=ke),this._styleCache={},this._cellCache={},this.forceUpdate()},"recomputeGridSize")},{key:"scrollToCell",value:o(function(A){var X=A.columnIndex,se=A.rowIndex,oe=this.props.columnCount,ve=this.props;oe>1&&X!==void 0&&this._updateScrollLeftForScrollToColumn(jt({},ve,{scrollToColumn:X})),se!==void 0&&this._updateScrollTopForScrollToRow(jt({},ve,{scrollToRow:se}))},"scrollToCell")},{key:"componentDidMount",value:o(function(){var A=this.props,X=A.getScrollbarSize,se=A.height,oe=A.scrollLeft,ve=A.scrollToColumn,Ie=A.scrollTop,Ae=A.scrollToRow,ke=A.width,De=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),De.scrollbarSizeMeasured||this.setState(function(ut){var Ze=jt({},ut,{needToResetStyleCache:!1});return Ze.instanceProps.scrollbarSize=X(),Ze.instanceProps.scrollbarSizeMeasured=!0,Ze}),typeof oe=="number"&&oe>=0||typeof Ie=="number"&&Ie>=0){var Ge=te._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:oe,scrollTop:Ie});Ge&&(Ge.needToResetStyleCache=!1,this.setState(Ge))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var Xe=se>0&&ke>0;ve>=0&&Xe&&this._updateScrollLeftForScrollToColumn(),Ae>=0&&Xe&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:oe||0,scrollTop:Ie||0,totalColumnsWidth:De.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:De.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()},"componentDidMount")},{key:"componentDidUpdate",value:o(function(A,X){var se=this,oe=this.props,ve=oe.autoHeight,Ie=oe.autoWidth,Ae=oe.columnCount,ke=oe.height,De=oe.rowCount,Ge=oe.scrollToAlignment,Xe=oe.scrollToColumn,ut=oe.scrollToRow,Ze=oe.width,Zt=this.state,rn=Zt.scrollLeft,Tn=Zt.scrollPositionChangeReason,Pn=Zt.scrollTop,qn=Zt.instanceProps;this._handleInvalidatedGridSize();var Kn=Ae>0&&A.columnCount===0||De>0&&A.rowCount===0;Tn===Re.REQUESTED&&(!Ie&&rn>=0&&(rn!==this._scrollingContainer.scrollLeft||Kn)&&(this._scrollingContainer.scrollLeft=rn),!ve&&Pn>=0&&(Pn!==this._scrollingContainer.scrollTop||Kn)&&(this._scrollingContainer.scrollTop=Pn));var ti=(A.width===0||A.height===0)&&ke>0&&Ze>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Hi({cellSizeAndPositionManager:qn.columnSizeAndPositionManager,previousCellsCount:A.columnCount,previousCellSize:A.columnWidth,previousScrollToAlignment:A.scrollToAlignment,previousScrollToIndex:A.scrollToColumn,previousSize:A.width,scrollOffset:rn,scrollToAlignment:Ge,scrollToIndex:Xe,size:Ze,sizeJustIncreasedFromZero:ti,updateScrollIndexCallback:o(function(){return se._updateScrollLeftForScrollToColumn(se.props)},"updateScrollIndexCallback")}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Hi({cellSizeAndPositionManager:qn.rowSizeAndPositionManager,previousCellsCount:A.rowCount,previousCellSize:A.rowHeight,previousScrollToAlignment:A.scrollToAlignment,previousScrollToIndex:A.scrollToRow,previousSize:A.height,scrollOffset:Pn,scrollToAlignment:Ge,scrollToIndex:ut,size:ke,sizeJustIncreasedFromZero:ti,updateScrollIndexCallback:o(function(){return se._updateScrollTopForScrollToRow(se.props)},"updateScrollIndexCallback")}),this._invokeOnGridRenderedHelper(),rn!==X.scrollLeft||Pn!==X.scrollTop){var ei=qn.rowSizeAndPositionManager.getTotalSize(),wi=qn.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:rn,scrollTop:Pn,totalColumnsWidth:wi,totalRowsHeight:ei})}this._maybeCallOnScrollbarPresenceChange()},"componentDidUpdate")},{key:"componentWillUnmount",value:o(function(){this._disablePointerEventsTimeoutId&&er(this._disablePointerEventsTimeoutId)},"componentWillUnmount")},{key:"render",value:o(function(){var A=this.props,X=A.autoContainerWidth,se=A.autoHeight,oe=A.autoWidth,ve=A.className,Ie=A.containerProps,Ae=A.containerRole,ke=A.containerStyle,De=A.height,Ge=A.id,Xe=A.noContentRenderer,ut=A.role,Ze=A.style,Zt=A.tabIndex,rn=A.width,Tn=this.state,Pn=Tn.instanceProps,qn=Tn.needToResetStyleCache,Kn=this._isScrolling(),ti={boxSizing:"border-box",direction:"ltr",height:se?"auto":De,position:"relative",width:oe?"auto":rn,WebkitOverflowScrolling:"touch",willChange:"transform"};qn&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var ei=Pn.columnSizeAndPositionManager.getTotalSize(),wi=Pn.rowSizeAndPositionManager.getTotalSize(),ki=wi>De?Pn.scrollbarSize:0,ci=ei>rn?Pn.scrollbarSize:0;(ci!==this._horizontalScrollBarSize||ki!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=ci,this._verticalScrollBarSize=ki,this._scrollbarPresenceChanged=!0),ti.overflowX=ei+ki<=rn?"hidden":"auto",ti.overflowY=wi+ci<=De?"hidden":"auto";var yi=this._childrenToDisplay,or=yi.length===0&&De>0&&rn>0;return d.createElement("div",w()({ref:this._setScrollingContainerRef},Ie,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:F("ReactVirtualized__Grid",ve),id:Ge,onScroll:this._onScroll,role:ut,style:jt({},ti,{},Ze),tabIndex:Zt}),yi.length>0&&d.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:Ae,style:jt({width:X?"auto":ei,height:wi,maxWidth:ei,maxHeight:wi,overflow:"hidden",pointerEvents:Kn?"none":"",position:"relative"},ke)},yi),or&&Xe())},"render")},{key:"_calculateChildrenToRender",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,se=A.cellRenderer,oe=A.cellRangeRenderer,ve=A.columnCount,Ie=A.deferredMeasurementCache,Ae=A.height,ke=A.overscanColumnCount,De=A.overscanIndicesGetter,Ge=A.overscanRowCount,Xe=A.rowCount,ut=A.width,Ze=A.isScrollingOptOut,Zt=X.scrollDirectionHorizontal,rn=X.scrollDirectionVertical,Tn=X.instanceProps,Pn=this._initialScrollTop>0?this._initialScrollTop:X.scrollTop,qn=this._initialScrollLeft>0?this._initialScrollLeft:X.scrollLeft,Kn=this._isScrolling(A,X);if(this._childrenToDisplay=[],Ae>0&&ut>0){var ti=Tn.columnSizeAndPositionManager.getVisibleCellRange({containerSize:ut,offset:qn}),ei=Tn.rowSizeAndPositionManager.getVisibleCellRange({containerSize:Ae,offset:Pn}),wi=Tn.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:ut,offset:qn}),ki=Tn.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:Ae,offset:Pn});this._renderedColumnStartIndex=ti.start,this._renderedColumnStopIndex=ti.stop,this._renderedRowStartIndex=ei.start,this._renderedRowStopIndex=ei.stop;var ci=De({direction:"horizontal",cellCount:ve,overscanCellsCount:ke,scrollDirection:Zt,startIndex:typeof ti.start=="number"?ti.start:0,stopIndex:typeof ti.stop=="number"?ti.stop:-1}),yi=De({direction:"vertical",cellCount:Xe,overscanCellsCount:Ge,scrollDirection:rn,startIndex:typeof ei.start=="number"?ei.start:0,stopIndex:typeof ei.stop=="number"?ei.stop:-1}),or=ci.overscanStartIndex,Mi=ci.overscanStopIndex,Wi=yi.overscanStartIndex,Kr=yi.overscanStopIndex;if(Ie){if(!Ie.hasFixedHeight()){for(var vo=Wi;vo<=Kr;vo++)if(!Ie.has(vo,0)){or=0,Mi=ve-1;break}}if(!Ie.hasFixedWidth()){for(var yr=or;yr<=Mi;yr++)if(!Ie.has(0,yr)){Wi=0,Kr=Xe-1;break}}}this._childrenToDisplay=oe({cellCache:this._cellCache,cellRenderer:se,columnSizeAndPositionManager:Tn.columnSizeAndPositionManager,columnStartIndex:or,columnStopIndex:Mi,deferredMeasurementCache:Ie,horizontalOffsetAdjustment:wi,isScrolling:Kn,isScrollingOptOut:Ze,parent:this,rowSizeAndPositionManager:Tn.rowSizeAndPositionManager,rowStartIndex:Wi,rowStopIndex:Kr,scrollLeft:qn,scrollTop:Pn,styleCache:this._styleCache,verticalOffsetAdjustment:ki,visibleColumnIndices:ti,visibleRowIndices:ei}),this._columnStartIndex=or,this._columnStopIndex=Mi,this._rowStartIndex=Wi,this._rowStopIndex=Kr}},"_calculateChildrenToRender")},{key:"_debounceScrollEnded",value:o(function(){var A=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&er(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=cr(this._debounceScrollEndedCallback,A)},"_debounceScrollEnded")},{key:"_handleInvalidatedGridSize",value:o(function(){if(typeof this._deferredInvalidateColumnIndex=="number"&&typeof this._deferredInvalidateRowIndex=="number"){var A=this._deferredInvalidateColumnIndex,X=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:A,rowIndex:X})}},"_handleInvalidatedGridSize")},{key:"_invokeOnScrollMemoizer",value:o(function(A){var X=this,se=A.scrollLeft,oe=A.scrollTop,ve=A.totalColumnsWidth,Ie=A.totalRowsHeight;this._onScrollMemoizer({callback:o(function(ke){var De=ke.scrollLeft,Ge=ke.scrollTop,Xe=X.props,ut=Xe.height,Ze=Xe.onScroll,Zt=Xe.width;Ze({clientHeight:ut,clientWidth:Zt,scrollHeight:Ie,scrollLeft:De,scrollTop:Ge,scrollWidth:ve})},"callback"),indices:{scrollLeft:se,scrollTop:oe}})},"_invokeOnScrollMemoizer")},{key:"_isScrolling",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return Object.hasOwnProperty.call(A,"isScrolling")?Boolean(A.isScrolling):Boolean(X.isScrolling)},"_isScrolling")},{key:"_maybeCallOnScrollbarPresenceChange",value:o(function(){if(this._scrollbarPresenceChanged){var A=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,A({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}},"_maybeCallOnScrollbarPresenceChange")},{key:"scrollToPosition",value:o(function(A){var X=A.scrollLeft,se=A.scrollTop,oe=te._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:X,scrollTop:se});oe&&(oe.needToResetStyleCache=!1,this.setState(oe))},"scrollToPosition")},{key:"_getCalculatedScrollLeft",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return te._getCalculatedScrollLeft(A,X)},"_getCalculatedScrollLeft")},{key:"_updateScrollLeftForScrollToColumn",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,se=te._getScrollLeftForScrollToColumnStateUpdate(A,X);se&&(se.needToResetStyleCache=!1,this.setState(se))},"_updateScrollLeftForScrollToColumn")},{key:"_getCalculatedScrollTop",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state;return te._getCalculatedScrollTop(A,X)},"_getCalculatedScrollTop")},{key:"_resetStyleCache",value:o(function(){var A=this._styleCache,X=this._cellCache,se=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var oe=this._rowStartIndex;oe<=this._rowStopIndex;oe++)for(var ve=this._columnStartIndex;ve<=this._columnStopIndex;ve++){var Ie="".concat(oe,"-").concat(ve);this._styleCache[Ie]=A[Ie],se&&(this._cellCache[Ie]=X[Ie])}},"_resetStyleCache")},{key:"_updateScrollTopForScrollToRow",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.state,se=te._getScrollTopForScrollToRowStateUpdate(A,X);se&&(se.needToResetStyleCache=!1,this.setState(se))},"_updateScrollTopForScrollToRow")}],[{key:"getDerivedStateFromProps",value:o(function(A,X){var se={};A.columnCount===0&&X.scrollLeft!==0||A.rowCount===0&&X.scrollTop!==0?(se.scrollLeft=0,se.scrollTop=0):(A.scrollLeft!==X.scrollLeft&&A.scrollToColumn<0||A.scrollTop!==X.scrollTop&&A.scrollToRow<0)&&Object.assign(se,te._getScrollToPositionStateUpdate({prevState:X,scrollLeft:A.scrollLeft,scrollTop:A.scrollTop}));var oe=X.instanceProps;se.needToResetStyleCache=!1,(A.columnWidth!==oe.prevColumnWidth||A.rowHeight!==oe.prevRowHeight)&&(se.needToResetStyleCache=!0),oe.columnSizeAndPositionManager.configure({cellCount:A.columnCount,estimatedCellSize:te._getEstimatedColumnSize(A),cellSizeGetter:te._wrapSizeGetter(A.columnWidth)}),oe.rowSizeAndPositionManager.configure({cellCount:A.rowCount,estimatedCellSize:te._getEstimatedRowSize(A),cellSizeGetter:te._wrapSizeGetter(A.rowHeight)}),(oe.prevColumnCount===0||oe.prevRowCount===0)&&(oe.prevColumnCount=0,oe.prevRowCount=0),A.autoHeight&&A.isScrolling===!1&&oe.prevIsScrolling===!0&&Object.assign(se,{isScrolling:!1});var ve,Ie;return N({cellCount:oe.prevColumnCount,cellSize:typeof oe.prevColumnWidth=="number"?oe.prevColumnWidth:null,computeMetadataCallback:o(function(){return oe.columnSizeAndPositionManager.resetCell(0)},"computeMetadataCallback"),computeMetadataCallbackProps:A,nextCellsCount:A.columnCount,nextCellSize:typeof A.columnWidth=="number"?A.columnWidth:null,nextScrollToIndex:A.scrollToColumn,scrollToIndex:oe.prevScrollToColumn,updateScrollOffsetForScrollToIndex:o(function(){ve=te._getScrollLeftForScrollToColumnStateUpdate(A,X)},"updateScrollOffsetForScrollToIndex")}),N({cellCount:oe.prevRowCount,cellSize:typeof oe.prevRowHeight=="number"?oe.prevRowHeight:null,computeMetadataCallback:o(function(){return oe.rowSizeAndPositionManager.resetCell(0)},"computeMetadataCallback"),computeMetadataCallbackProps:A,nextCellsCount:A.rowCount,nextCellSize:typeof A.rowHeight=="number"?A.rowHeight:null,nextScrollToIndex:A.scrollToRow,scrollToIndex:oe.prevScrollToRow,updateScrollOffsetForScrollToIndex:o(function(){Ie=te._getScrollTopForScrollToRowStateUpdate(A,X)},"updateScrollOffsetForScrollToIndex")}),oe.prevColumnCount=A.columnCount,oe.prevColumnWidth=A.columnWidth,oe.prevIsScrolling=A.isScrolling===!0,oe.prevRowCount=A.rowCount,oe.prevRowHeight=A.rowHeight,oe.prevScrollToColumn=A.scrollToColumn,oe.prevScrollToRow=A.scrollToRow,oe.scrollbarSize=A.getScrollbarSize(),oe.scrollbarSize===void 0?(oe.scrollbarSizeMeasured=!1,oe.scrollbarSize=0):oe.scrollbarSizeMeasured=!0,se.instanceProps=oe,jt({},se,{},ve,{},Ie)},"getDerivedStateFromProps")},{key:"_getEstimatedColumnSize",value:o(function(A){return typeof A.columnWidth=="number"?A.columnWidth:A.estimatedColumnSize},"_getEstimatedColumnSize")},{key:"_getEstimatedRowSize",value:o(function(A){return typeof A.rowHeight=="number"?A.rowHeight:A.estimatedRowSize},"_getEstimatedRowSize")},{key:"_getScrollToPositionStateUpdate",value:o(function(A){var X=A.prevState,se=A.scrollLeft,oe=A.scrollTop,ve={scrollPositionChangeReason:Re.REQUESTED};return typeof se=="number"&&se>=0&&(ve.scrollDirectionHorizontal=se>X.scrollLeft?On:ri,ve.scrollLeft=se),typeof oe=="number"&&oe>=0&&(ve.scrollDirectionVertical=oe>X.scrollTop?On:ri,ve.scrollTop=oe),typeof se=="number"&&se>=0&&se!==X.scrollLeft||typeof oe=="number"&&oe>=0&&oe!==X.scrollTop?ve:{}},"_getScrollToPositionStateUpdate")},{key:"_wrapSizeGetter",value:o(function(A){return typeof A=="function"?A:function(){return A}},"_wrapSizeGetter")},{key:"_getCalculatedScrollLeft",value:o(function(A,X){var se=A.columnCount,oe=A.height,ve=A.scrollToAlignment,Ie=A.scrollToColumn,Ae=A.width,ke=X.scrollLeft,De=X.instanceProps;if(se>0){var Ge=se-1,Xe=Ie<0?Ge:Math.min(Ge,Ie),ut=De.rowSizeAndPositionManager.getTotalSize(),Ze=De.scrollbarSizeMeasured&&ut>oe?De.scrollbarSize:0;return De.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:ve,containerSize:Ae-Ze,currentOffset:ke,targetIndex:Xe})}return 0},"_getCalculatedScrollLeft")},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:o(function(A,X){var se=X.scrollLeft,oe=te._getCalculatedScrollLeft(A,X);return typeof oe=="number"&&oe>=0&&se!==oe?te._getScrollToPositionStateUpdate({prevState:X,scrollLeft:oe,scrollTop:-1}):{}},"_getScrollLeftForScrollToColumnStateUpdate")},{key:"_getCalculatedScrollTop",value:o(function(A,X){var se=A.height,oe=A.rowCount,ve=A.scrollToAlignment,Ie=A.scrollToRow,Ae=A.width,ke=X.scrollTop,De=X.instanceProps;if(oe>0){var Ge=oe-1,Xe=Ie<0?Ge:Math.min(Ge,Ie),ut=De.columnSizeAndPositionManager.getTotalSize(),Ze=De.scrollbarSizeMeasured&&ut>Ae?De.scrollbarSize:0;return De.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:ve,containerSize:se-Ze,currentOffset:ke,targetIndex:Xe})}return 0},"_getCalculatedScrollTop")},{key:"_getScrollTopForScrollToRowStateUpdate",value:o(function(A,X){var se=X.scrollTop,oe=te._getCalculatedScrollTop(A,X);return typeof oe=="number"&&oe>=0&&se!==oe?te._getScrollToPositionStateUpdate({prevState:X,scrollLeft:-1,scrollTop:oe}):{}},"_getScrollTopForScrollToRowStateUpdate")}]),te}(d.PureComponent),g()(gi,"propTypes",null),Yi);g()(qe,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:Sn,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:En,noContentRenderer:Fe,onScroll:o(function(){},"onScroll"),onScrollbarPresenceChange:o(function(){},"onScrollbarPresenceChange"),onSectionRendered:o(function(){},"onSectionRendered"),overscanColumnCount:0,overscanIndicesGetter:Fi,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:pe,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),Object(y.polyfill)(qe);var vt=qe,lt=-1,Nt=1,ln="horizontal",fn="vertical";function Bt(ne){var te=ne.cellCount,Q=ne.overscanCellsCount,A=ne.scrollDirection,X=ne.startIndex,se=ne.stopIndex;return Q=Math.max(1,Q),A===Nt?{overscanStartIndex:Math.max(0,X-1),overscanStopIndex:Math.min(te-1,se+Q)}:{overscanStartIndex:Math.max(0,X-Q),overscanStopIndex:Math.min(te-1,se+1)}}o(Bt,"accessibilityOverscanIndicesGetter_defaultOverscanIndicesGetter");var Ci=null,Si,gr;function tr(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(tr,"ArrowKeyStepper_ownKeys");function ai(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?tr(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):tr(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(ai,"ArrowKeyStepper_objectSpread");var wr=(gr=Si=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),g()(n()(A),"_columnStartIndex",0),g()(n()(A),"_columnStopIndex",0),g()(n()(A),"_rowStartIndex",0),g()(n()(A),"_rowStopIndex",0),g()(n()(A),"_onKeyDown",function(ve){var Ie=A.props,Ae=Ie.columnCount,ke=Ie.disabled,De=Ie.mode,Ge=Ie.rowCount;if(!ke){var Xe=A._getScrollState(),ut=Xe.scrollToColumn,Ze=Xe.scrollToRow,Zt=A._getScrollState(),rn=Zt.scrollToColumn,Tn=Zt.scrollToRow;switch(ve.key){case"ArrowDown":Tn=Math.min(De==="cells"?Tn+1:A._rowStopIndex+1,Ge-1);break;case"ArrowLeft":rn=Math.max(De==="cells"?rn-1:A._columnStartIndex-1,0);break;case"ArrowRight":rn=Math.min(De==="cells"?rn+1:A._columnStopIndex+1,Ae-1);break;case"ArrowUp":Tn=Math.max(De==="cells"?Tn-1:A._rowStartIndex-1,0);break}(rn!==ut||Tn!==Ze)&&(ve.preventDefault(),A._updateScrollState({scrollToColumn:rn,scrollToRow:Tn}))}}),g()(n()(A),"_onSectionRendered",function(ve){var Ie=ve.columnStartIndex,Ae=ve.columnStopIndex,ke=ve.rowStartIndex,De=ve.rowStopIndex;A._columnStartIndex=Ie,A._columnStopIndex=Ae,A._rowStartIndex=ke,A._rowStopIndex=De}),A}return o(te,"ArrowKeyStepper"),m()(te,[{key:"setScrollIndexes",value:o(function(A){var X=A.scrollToColumn,se=A.scrollToRow;this.setState({scrollToRow:se,scrollToColumn:X})},"setScrollIndexes")},{key:"render",value:o(function(){var A=this.props,X=A.className,se=A.children,oe=this._getScrollState(),ve=oe.scrollToColumn,Ie=oe.scrollToRow;return d.createElement("div",{className:X,onKeyDown:this._onKeyDown},se({onSectionRendered:this._onSectionRendered,scrollToColumn:ve,scrollToRow:Ie}))},"render")},{key:"_getScrollState",value:o(function(){return this.props.isControlled?this.props:this.state},"_getScrollState")},{key:"_updateScrollState",value:o(function(A){var X=A.scrollToColumn,se=A.scrollToRow,oe=this.props,ve=oe.isControlled,Ie=oe.onScrollToChange;typeof Ie=="function"&&Ie({scrollToColumn:X,scrollToRow:se}),ve||this.setState({scrollToColumn:X,scrollToRow:se})},"_updateScrollState")}],[{key:"getDerivedStateFromProps",value:o(function(A,X){return A.isControlled?{}:A.scrollToColumn!==X.instanceProps.prevScrollToColumn||A.scrollToRow!==X.instanceProps.prevScrollToRow?ai({},X,{scrollToColumn:A.scrollToColumn,scrollToRow:A.scrollToRow,instanceProps:{prevScrollToColumn:A.scrollToColumn,prevScrollToRow:A.scrollToRow}}):{}},"getDerivedStateFromProps")}]),te}(d.PureComponent),g()(Si,"propTypes",null),gr);g()(wr,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),Object(y.polyfill)(wr);var li=wr,lr=f("m0Av"),Zn,Or;function Qi(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(Qi,"AutoSizer_ownKeys");function zr(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?Qi(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):Qi(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(zr,"AutoSizer_objectSpread");var _r=(Or=Zn=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"state",{height:A.props.defaultHeight||0,width:A.props.defaultWidth||0}),g()(n()(A),"_parentNode",void 0),g()(n()(A),"_autoSizer",void 0),g()(n()(A),"_window",void 0),g()(n()(A),"_detectElementResize",void 0),g()(n()(A),"_onResize",function(){var ve=A.props,Ie=ve.disableHeight,Ae=ve.disableWidth,ke=ve.onResize;if(A._parentNode){var De=A._parentNode.offsetHeight||0,Ge=A._parentNode.offsetWidth||0,Xe=A._window||window,ut=Xe.getComputedStyle(A._parentNode)||{},Ze=parseInt(ut.paddingLeft,10)||0,Zt=parseInt(ut.paddingRight,10)||0,rn=parseInt(ut.paddingTop,10)||0,Tn=parseInt(ut.paddingBottom,10)||0,Pn=De-rn-Tn,qn=Ge-Ze-Zt;(!Ie&&A.state.height!==Pn||!Ae&&A.state.width!==qn)&&(A.setState({height:De-rn-Tn,width:Ge-Ze-Zt}),ke({height:De,width:Ge}))}}),g()(n()(A),"_setRef",function(ve){A._autoSizer=ve}),A}return o(te,"AutoSizer"),m()(te,[{key:"componentDidMount",value:o(function(){var A=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=Object(lr.a)(A,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())},"componentDidMount")},{key:"componentWillUnmount",value:o(function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)},"componentWillUnmount")},{key:"render",value:o(function(){var A=this.props,X=A.children,se=A.className,oe=A.disableHeight,ve=A.disableWidth,Ie=A.style,Ae=this.state,ke=Ae.height,De=Ae.width,Ge={overflow:"visible"},Xe={};return oe||(Ge.height=0,Xe.height=ke),ve||(Ge.width=0,Xe.width=De),d.createElement("div",{className:se,ref:this._setRef,style:zr({},Ge,{},Ie)},X(Xe))},"render")}]),te}(d.Component),g()(Zn,"propTypes",null),Or);g()(_r,"defaultProps",{onResize:o(function(){},"onResize"),disableHeight:!1,disableWidth:!1,style:{}});var Zi=f("wSSu"),ro=null,yt,st,dn=(st=yt=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"_child",void 0),g()(n()(A),"_measure",function(){var ve=A.props,Ie=ve.cache,Ae=ve.columnIndex,ke=Ae===void 0?0:Ae,De=ve.parent,Ge=ve.rowIndex,Xe=Ge===void 0?A.props.index||0:Ge,ut=A._getCellMeasurements(),Ze=ut.height,Zt=ut.width;(Ze!==Ie.getHeight(Xe,ke)||Zt!==Ie.getWidth(Xe,ke))&&(Ie.set(Xe,ke,Zt,Ze),De&&typeof De.recomputeGridSize=="function"&&De.recomputeGridSize({columnIndex:ke,rowIndex:Xe}))}),g()(n()(A),"_registerChild",function(ve){ve&&!(ve instanceof Element)&&console.warn("CellMeasurer registerChild expects to be passed Element or null"),A._child=ve,ve&&A._maybeMeasureCell()}),A}return o(te,"CellMeasurer"),m()(te,[{key:"componentDidMount",value:o(function(){this._maybeMeasureCell()},"componentDidMount")},{key:"componentDidUpdate",value:o(function(){this._maybeMeasureCell()},"componentDidUpdate")},{key:"render",value:o(function(){var A=this.props.children;return typeof A=="function"?A({measure:this._measure,registerChild:this._registerChild}):A},"render")},{key:"_getCellMeasurements",value:o(function(){var A=this.props.cache,X=this._child||Object(Zi.findDOMNode)(this);if(X&&X.ownerDocument&&X.ownerDocument.defaultView&&X instanceof X.ownerDocument.defaultView.HTMLElement){var se=X.style.width,oe=X.style.height;A.hasFixedWidth()||(X.style.width="auto"),A.hasFixedHeight()||(X.style.height="auto");var ve=Math.ceil(X.offsetHeight),Ie=Math.ceil(X.offsetWidth);return se&&(X.style.width=se),oe&&(X.style.height=oe),{height:ve,width:Ie}}else return{height:0,width:0}},"_getCellMeasurements")},{key:"_maybeMeasureCell",value:o(function(){var A=this.props,X=A.cache,se=A.columnIndex,oe=se===void 0?0:se,ve=A.parent,Ie=A.rowIndex,Ae=Ie===void 0?this.props.index||0:Ie;if(!X.has(Ae,oe)){var ke=this._getCellMeasurements(),De=ke.height,Ge=ke.width;X.set(Ae,oe,Ge,De),ve&&typeof ve.invalidateCellSizeAfterRender=="function"&&ve.invalidateCellSizeAfterRender({columnIndex:oe,rowIndex:Ae})}},"_maybeMeasureCell")}]),te}(d.PureComponent),g()(yt,"propTypes",null),st);g()(dn,"__internalCellMeasurerFlag",!1);var Kt=30,wn=100,Jn=function(){function ne(){var te=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};h()(this,ne),g()(this,"_cellHeightCache",{}),g()(this,"_cellWidthCache",{}),g()(this,"_columnWidthCache",{}),g()(this,"_rowHeightCache",{}),g()(this,"_defaultHeight",void 0),g()(this,"_defaultWidth",void 0),g()(this,"_minHeight",void 0),g()(this,"_minWidth",void 0),g()(this,"_keyMapper",void 0),g()(this,"_hasFixedHeight",void 0),g()(this,"_hasFixedWidth",void 0),g()(this,"_columnCount",0),g()(this,"_rowCount",0),g()(this,"columnWidth",function(ke){var De=ke.index,Ge=te._keyMapper(0,De);return te._columnWidthCache[Ge]!==void 0?te._columnWidthCache[Ge]:te._defaultWidth}),g()(this,"rowHeight",function(ke){var De=ke.index,Ge=te._keyMapper(De,0);return te._rowHeightCache[Ge]!==void 0?te._rowHeightCache[Ge]:te._defaultHeight});var A=Q.defaultHeight,X=Q.defaultWidth,se=Q.fixedHeight,oe=Q.fixedWidth,ve=Q.keyMapper,Ie=Q.minHeight,Ae=Q.minWidth;this._hasFixedHeight=se===!0,this._hasFixedWidth=oe===!0,this._minHeight=Ie||0,this._minWidth=Ae||0,this._keyMapper=ve||z,this._defaultHeight=Math.max(this._minHeight,typeof A=="number"?A:Kt),this._defaultWidth=Math.max(this._minWidth,typeof X=="number"?X:wn)}return o(ne,"CellMeasurerCache"),m()(ne,[{key:"clear",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,X=this._keyMapper(Q,A);delete this._cellHeightCache[X],delete this._cellWidthCache[X],this._updateCachedColumnAndRowSizes(Q,A)},"clear")},{key:"clearAll",value:o(function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0},"clearAll")},{key:"hasFixedHeight",value:o(function(){return this._hasFixedHeight},"hasFixedHeight")},{key:"hasFixedWidth",value:o(function(){return this._hasFixedWidth},"hasFixedWidth")},{key:"getHeight",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;var X=this._keyMapper(Q,A);return this._cellHeightCache[X]!==void 0?Math.max(this._minHeight,this._cellHeightCache[X]):this._defaultHeight},"getHeight")},{key:"getWidth",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;var X=this._keyMapper(Q,A);return this._cellWidthCache[X]!==void 0?Math.max(this._minWidth,this._cellWidthCache[X]):this._defaultWidth},"getWidth")},{key:"has",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,X=this._keyMapper(Q,A);return this._cellHeightCache[X]!==void 0},"has")},{key:"set",value:o(function(Q,A,X,se){var oe=this._keyMapper(Q,A);A>=this._columnCount&&(this._columnCount=A+1),Q>=this._rowCount&&(this._rowCount=Q+1),this._cellHeightCache[oe]=se,this._cellWidthCache[oe]=X,this._updateCachedColumnAndRowSizes(Q,A)},"set")},{key:"_updateCachedColumnAndRowSizes",value:o(function(Q,A){if(!this._hasFixedWidth){for(var X=0,se=0;se<this._rowCount;se++)X=Math.max(X,this.getWidth(se,A));var oe=this._keyMapper(0,A);this._columnWidthCache[oe]=X}if(!this._hasFixedHeight){for(var ve=0,Ie=0;Ie<this._columnCount;Ie++)ve=Math.max(ve,this.getHeight(Q,Ie));var Ae=this._keyMapper(Q,0);this._rowHeightCache[Ae]=ve}},"_updateCachedColumnAndRowSizes")},{key:"defaultHeight",get:o(function(){return this._defaultHeight},"get")},{key:"defaultWidth",get:o(function(){return this._defaultWidth},"get")}]),ne}();function z(ne,te){return"".concat(ne,"-").concat(te)}o(z,"defaultKeyMapper");var ue=dn;function Me(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(Me,"CollectionView_ownKeys");function Le(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?Me(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):Me(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(Le,"CollectionView_objectSpread");var Ye=150,St={OBSERVED:"observed",REQUESTED:"requested"},Ct=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),g()(n()(A),"_calculateSizeAndPositionDataOnNextUpdate",!1),g()(n()(A),"_onSectionRenderedMemoizer",si()),g()(n()(A),"_onScrollMemoizer",si(!1)),g()(n()(A),"_invokeOnSectionRenderedHelper",function(){var ve=A.props,Ie=ve.cellLayoutManager,Ae=ve.onSectionRendered;A._onSectionRenderedMemoizer({callback:Ae,indices:{indices:Ie.getLastRenderedIndices()}})}),g()(n()(A),"_setScrollingContainerRef",function(ve){A._scrollingContainer=ve}),g()(n()(A),"_updateScrollPositionForScrollToCell",function(){var ve=A.props,Ie=ve.cellLayoutManager,Ae=ve.height,ke=ve.scrollToAlignment,De=ve.scrollToCell,Ge=ve.width,Xe=A.state,ut=Xe.scrollLeft,Ze=Xe.scrollTop;if(De>=0){var Zt=Ie.getScrollPositionForCell({align:ke,cellIndex:De,height:Ae,scrollLeft:ut,scrollTop:Ze,width:Ge});(Zt.scrollLeft!==ut||Zt.scrollTop!==Ze)&&A._setScrollPosition(Zt)}}),g()(n()(A),"_onScroll",function(ve){if(ve.target===A._scrollingContainer){A._enablePointerEventsAfterDelay();var Ie=A.props,Ae=Ie.cellLayoutManager,ke=Ie.height,De=Ie.isScrollingChange,Ge=Ie.width,Xe=A._scrollbarSize,ut=Ae.getTotalSize(),Ze=ut.height,Zt=ut.width,rn=Math.max(0,Math.min(Zt-Ge+Xe,ve.target.scrollLeft)),Tn=Math.max(0,Math.min(Ze-ke+Xe,ve.target.scrollTop));if(A.state.scrollLeft!==rn||A.state.scrollTop!==Tn){var Pn=ve.cancelable?St.OBSERVED:St.REQUESTED;A.state.isScrolling||De(!0),A.setState({isScrolling:!0,scrollLeft:rn,scrollPositionChangeReason:Pn,scrollTop:Tn})}A._invokeOnScrollMemoizer({scrollLeft:rn,scrollTop:Tn,totalWidth:Zt,totalHeight:Ze})}}),A._scrollbarSize=En(),A._scrollbarSize===void 0?(A._scrollbarSizeMeasured=!1,A._scrollbarSize=0):A._scrollbarSizeMeasured=!0,A}return o(te,"CollectionView"),m()(te,[{key:"recomputeCellSizesAndPositions",value:o(function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()},"recomputeCellSizesAndPositions")},{key:"componentDidMount",value:o(function(){var A=this.props,X=A.cellLayoutManager,se=A.scrollLeft,oe=A.scrollToCell,ve=A.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=En(),this._scrollbarSizeMeasured=!0,this.setState({})),oe>=0?this._updateScrollPositionForScrollToCell():(se>=0||ve>=0)&&this._setScrollPosition({scrollLeft:se,scrollTop:ve}),this._invokeOnSectionRenderedHelper();var Ie=X.getTotalSize(),Ae=Ie.height,ke=Ie.width;this._invokeOnScrollMemoizer({scrollLeft:se||0,scrollTop:ve||0,totalHeight:Ae,totalWidth:ke})},"componentDidMount")},{key:"componentDidUpdate",value:o(function(A,X){var se=this.props,oe=se.height,ve=se.scrollToAlignment,Ie=se.scrollToCell,Ae=se.width,ke=this.state,De=ke.scrollLeft,Ge=ke.scrollPositionChangeReason,Xe=ke.scrollTop;Ge===St.REQUESTED&&(De>=0&&De!==X.scrollLeft&&De!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=De),Xe>=0&&Xe!==X.scrollTop&&Xe!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=Xe)),(oe!==A.height||ve!==A.scrollToAlignment||Ie!==A.scrollToCell||Ae!==A.width)&&this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()},"componentDidUpdate")},{key:"componentWillUnmount",value:o(function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)},"componentWillUnmount")},{key:"render",value:o(function(){var A=this.props,X=A.autoHeight,se=A.cellCount,oe=A.cellLayoutManager,ve=A.className,Ie=A.height,Ae=A.horizontalOverscanSize,ke=A.id,De=A.noContentRenderer,Ge=A.style,Xe=A.verticalOverscanSize,ut=A.width,Ze=this.state,Zt=Ze.isScrolling,rn=Ze.scrollLeft,Tn=Ze.scrollTop;(this._lastRenderedCellCount!==se||this._lastRenderedCellLayoutManager!==oe||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=se,this._lastRenderedCellLayoutManager=oe,this._calculateSizeAndPositionDataOnNextUpdate=!1,oe.calculateSizeAndPositionData());var Pn=oe.getTotalSize(),qn=Pn.height,Kn=Pn.width,ti=Math.max(0,rn-Ae),ei=Math.max(0,Tn-Xe),wi=Math.min(Kn,rn+ut+Ae),ki=Math.min(qn,Tn+Ie+Xe),ci=Ie>0&&ut>0?oe.cellRenderers({height:ki-ei,isScrolling:Zt,width:wi-ti,x:ti,y:ei}):[],yi={boxSizing:"border-box",direction:"ltr",height:X?"auto":Ie,position:"relative",WebkitOverflowScrolling:"touch",width:ut,willChange:"transform"},or=qn>Ie?this._scrollbarSize:0,Mi=Kn>ut?this._scrollbarSize:0;return yi.overflowX=Kn+or<=ut?"hidden":"auto",yi.overflowY=qn+Mi<=Ie?"hidden":"auto",d.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:F("ReactVirtualized__Collection",ve),id:ke,onScroll:this._onScroll,role:"grid",style:Le({},yi,{},Ge),tabIndex:0},se>0&&d.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:qn,maxHeight:qn,maxWidth:Kn,overflow:"hidden",pointerEvents:Zt?"none":"",width:Kn}},ci),se===0&&De())},"render")},{key:"_enablePointerEventsAfterDelay",value:o(function(){var A=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){var X=A.props.isScrollingChange;X(!1),A._disablePointerEventsTimeoutId=null,A.setState({isScrolling:!1})},Ye)},"_enablePointerEventsAfterDelay")},{key:"_invokeOnScrollMemoizer",value:o(function(A){var X=this,se=A.scrollLeft,oe=A.scrollTop,ve=A.totalHeight,Ie=A.totalWidth;this._onScrollMemoizer({callback:o(function(ke){var De=ke.scrollLeft,Ge=ke.scrollTop,Xe=X.props,ut=Xe.height,Ze=Xe.onScroll,Zt=Xe.width;Ze({clientHeight:ut,clientWidth:Zt,scrollHeight:ve,scrollLeft:De,scrollTop:Ge,scrollWidth:Ie})},"callback"),indices:{scrollLeft:se,scrollTop:oe}})},"_invokeOnScrollMemoizer")},{key:"_setScrollPosition",value:o(function(A){var X=A.scrollLeft,se=A.scrollTop,oe={scrollPositionChangeReason:St.REQUESTED};X>=0&&(oe.scrollLeft=X),se>=0&&(oe.scrollTop=se),(X>=0&&X!==this.state.scrollLeft||se>=0&&se!==this.state.scrollTop)&&this.setState(oe)},"_setScrollPosition")}],[{key:"getDerivedStateFromProps",value:o(function(A,X){return A.cellCount===0&&(X.scrollLeft!==0||X.scrollTop!==0)?{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:St.REQUESTED}:A.scrollLeft!==X.scrollLeft||A.scrollTop!==X.scrollTop?{scrollLeft:A.scrollLeft!=null?A.scrollLeft:X.scrollLeft,scrollTop:A.scrollTop!=null?A.scrollTop:X.scrollTop,scrollPositionChangeReason:St.REQUESTED}:null},"getDerivedStateFromProps")}]),te}(d.PureComponent);g()(Ct,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:o(function(){return null},"noContentRenderer"),onScroll:o(function(){return null},"onScroll"),onSectionRendered:o(function(){return null},"onSectionRendered"),scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),Ct.propTypes={},Object(y.polyfill)(Ct);var Tt=Ct,Ke=null,Pt=null,Dt=null,Rn=null,pn=null,zn=function(){function ne(te){var Q=te.height,A=te.width,X=te.x,se=te.y;h()(this,ne),this.height=Q,this.width=A,this.x=X,this.y=se,this._indexMap={},this._indices=[]}return o(ne,"Section"),m()(ne,[{key:"addCellIndex",value:o(function(Q){var A=Q.index;this._indexMap[A]||(this._indexMap[A]=!0,this._indices.push(A))},"addCellIndex")},{key:"getCellIndices",value:o(function(){return this._indices},"getCellIndices")},{key:"toString",value:o(function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)},"toString")}]),ne}(),di=100,Ri=function(){function ne(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:di;h()(this,ne),this._sectionSize=te,this._cellMetadata=[],this._sections={}}return o(ne,"SectionManager"),m()(ne,[{key:"getCellIndices",value:o(function(Q){var A=Q.height,X=Q.width,se=Q.x,oe=Q.y,ve={};return this.getSections({height:A,width:X,x:se,y:oe}).forEach(function(Ie){return Ie.getCellIndices().forEach(function(Ae){ve[Ae]=Ae})}),Object.keys(ve).map(function(Ie){return ve[Ie]})},"getCellIndices")},{key:"getCellMetadata",value:o(function(Q){var A=Q.index;return this._cellMetadata[A]},"getCellMetadata")},{key:"getSections",value:o(function(Q){for(var A=Q.height,X=Q.width,se=Q.x,oe=Q.y,ve=Math.floor(se/this._sectionSize),Ie=Math.floor((se+X-1)/this._sectionSize),Ae=Math.floor(oe/this._sectionSize),ke=Math.floor((oe+A-1)/this._sectionSize),De=[],Ge=ve;Ge<=Ie;Ge++)for(var Xe=Ae;Xe<=ke;Xe++){var ut="".concat(Ge,".").concat(Xe);this._sections[ut]||(this._sections[ut]=new zn({height:this._sectionSize,width:this._sectionSize,x:Ge*this._sectionSize,y:Xe*this._sectionSize})),De.push(this._sections[ut])}return De},"getSections")},{key:"getTotalSectionCount",value:o(function(){return Object.keys(this._sections).length},"getTotalSectionCount")},{key:"toString",value:o(function(){var Q=this;return Object.keys(this._sections).map(function(A){return Q._sections[A].toString()})},"toString")},{key:"registerCell",value:o(function(Q){var A=Q.cellMetadatum,X=Q.index;this._cellMetadata[X]=A,this.getSections(A).forEach(function(se){return se.addCellIndex({index:X})})},"registerCell")}]),ne}();function Pi(ne){for(var te=ne.cellCount,Q=ne.cellSizeAndPositionGetter,A=ne.sectionSize,X=[],se=new Ri(A),oe=0,ve=0,Ie=0;Ie<te;Ie++){var Ae=Q({index:Ie});if(Ae.height==null||isNaN(Ae.height)||Ae.width==null||isNaN(Ae.width)||Ae.x==null||isNaN(Ae.x)||Ae.y==null||isNaN(Ae.y))throw Error("Invalid metadata returned for cell ".concat(Ie,`:
        x:`).concat(Ae.x,", y:").concat(Ae.y,", width:").concat(Ae.width,", height:").concat(Ae.height));oe=Math.max(oe,Ae.y+Ae.height),ve=Math.max(ve,Ae.x+Ae.width),X[Ie]=Ae,se.registerCell({cellMetadatum:Ae,index:Ie})}return{cellMetadata:X,height:oe,sectionManager:se,width:ve}}o(Pi,"calculateSizeAndPositionData_calculateSizeAndPositionData");function fi(ne){var te=ne.align,Q=te===void 0?"auto":te,A=ne.cellOffset,X=ne.cellSize,se=ne.containerSize,oe=ne.currentOffset,ve=A,Ie=ve-se+X;switch(Q){case"start":return ve;case"end":return Ie;case"center":return ve-(se-X)/2;default:return Math.max(Ie,Math.min(ve,oe))}}o(fi,"getUpdatedOffsetForIndex");var hi=function(ne){c()(te,ne);function te(Q,A){var X;return h()(this,te),X=s()(this,e()(te).call(this,Q,A)),X._cellMetadata=[],X._lastRenderedCellIndices=[],X._cellCache=[],X._isScrollingChange=X._isScrollingChange.bind(n()(X)),X._setCollectionViewRef=X._setCollectionViewRef.bind(n()(X)),X}return o(te,"Collection"),m()(te,[{key:"forceUpdate",value:o(function(){this._collectionView!==void 0&&this._collectionView.forceUpdate()},"forceUpdate")},{key:"recomputeCellSizesAndPositions",value:o(function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()},"recomputeCellSizesAndPositions")},{key:"render",value:o(function(){var A=w()({},this.props);return d.createElement(Tt,w()({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},A))},"render")},{key:"calculateSizeAndPositionData",value:o(function(){var A=this.props,X=A.cellCount,se=A.cellSizeAndPositionGetter,oe=A.sectionSize,ve=Pi({cellCount:X,cellSizeAndPositionGetter:se,sectionSize:oe});this._cellMetadata=ve.cellMetadata,this._sectionManager=ve.sectionManager,this._height=ve.height,this._width=ve.width},"calculateSizeAndPositionData")},{key:"getLastRenderedIndices",value:o(function(){return this._lastRenderedCellIndices},"getLastRenderedIndices")},{key:"getScrollPositionForCell",value:o(function(A){var X=A.align,se=A.cellIndex,oe=A.height,ve=A.scrollLeft,Ie=A.scrollTop,Ae=A.width,ke=this.props.cellCount;if(se>=0&&se<ke){var De=this._cellMetadata[se];ve=fi({align:X,cellOffset:De.x,cellSize:De.width,containerSize:Ae,currentOffset:ve,targetIndex:se}),Ie=fi({align:X,cellOffset:De.y,cellSize:De.height,containerSize:oe,currentOffset:Ie,targetIndex:se})}return{scrollLeft:ve,scrollTop:Ie}},"getScrollPositionForCell")},{key:"getTotalSize",value:o(function(){return{height:this._height,width:this._width}},"getTotalSize")},{key:"cellRenderers",value:o(function(A){var X=this,se=A.height,oe=A.isScrolling,ve=A.width,Ie=A.x,Ae=A.y,ke=this.props,De=ke.cellGroupRenderer,Ge=ke.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:se,width:ve,x:Ie,y:Ae}),De({cellCache:this._cellCache,cellRenderer:Ge,cellSizeAndPositionGetter:o(function(ut){var Ze=ut.index;return X._sectionManager.getCellMetadata({index:Ze})},"cellSizeAndPositionGetter"),indices:this._lastRenderedCellIndices,isScrolling:oe})},"cellRenderers")},{key:"_isScrollingChange",value:o(function(A){A||(this._cellCache=[])},"_isScrollingChange")},{key:"_setCollectionViewRef",value:o(function(A){this._collectionView=A},"_setCollectionViewRef")}]),te}(d.PureComponent);g()(hi,"defaultProps",{"aria-label":"grid",cellGroupRenderer:Cn}),hi.propTypes={};function Cn(ne){var te=ne.cellCache,Q=ne.cellRenderer,A=ne.cellSizeAndPositionGetter,X=ne.indices,se=ne.isScrolling;return X.map(function(oe){var ve=A({index:oe}),Ie={index:oe,isScrolling:se,key:oe,style:{height:ve.height,left:ve.x,position:"absolute",top:ve.y,width:ve.width}};return se?(oe in te||(te[oe]=Q(Ie)),te[oe]):Q(Ie)}).filter(function(oe){return!!oe})}o(Cn,"defaultCellGroupRenderer");var zi=hi,Vi=function(ne){c()(te,ne);function te(Q,A){var X;return h()(this,te),X=s()(this,e()(te).call(this,Q,A)),X._registerChild=X._registerChild.bind(n()(X)),X}return o(te,"ColumnSizer"),m()(te,[{key:"componentDidUpdate",value:o(function(A){var X=this.props,se=X.columnMaxWidth,oe=X.columnMinWidth,ve=X.columnCount,Ie=X.width;(se!==A.columnMaxWidth||oe!==A.columnMinWidth||ve!==A.columnCount||Ie!==A.width)&&this._registeredChild&&this._registeredChild.recomputeGridSize()},"componentDidUpdate")},{key:"render",value:o(function(){var A=this.props,X=A.children,se=A.columnMaxWidth,oe=A.columnMinWidth,ve=A.columnCount,Ie=A.width,Ae=oe||1,ke=se?Math.min(se,Ie):Ie,De=Ie/ve;De=Math.max(Ae,De),De=Math.min(ke,De),De=Math.floor(De);var Ge=Math.min(Ie,De*ve);return X({adjustedWidth:Ge,columnWidth:De,getColumnWidth:o(function(){return De},"getColumnWidth"),registerChild:this._registerChild})},"render")},{key:"_registerChild",value:o(function(A){if(A&&typeof A.recomputeGridSize!="function")throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=A,this._registeredChild&&this._registeredChild.recomputeGridSize()},"_registerChild")}]),te}(d.PureComponent);Vi.propTypes={};var Ui=Vi,Rr=f("EIHC"),Ii=f.n(Rr),Sr=function(ne){c()(te,ne);function te(Q,A){var X;return h()(this,te),X=s()(this,e()(te).call(this,Q,A)),X._loadMoreRowsMemoizer=si(),X._onRowsRendered=X._onRowsRendered.bind(n()(X)),X._registerChild=X._registerChild.bind(n()(X)),X}return o(te,"InfiniteLoader"),m()(te,[{key:"resetLoadMoreRowsCache",value:o(function(A){this._loadMoreRowsMemoizer=si(),A&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)},"resetLoadMoreRowsCache")},{key:"render",value:o(function(){var A=this.props.children;return A({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})},"render")},{key:"_loadUnloadedRanges",value:o(function(A){var X=this,se=this.props.loadMoreRows;A.forEach(function(oe){var ve=se(oe);ve&&ve.then(function(){Xn({lastRenderedStartIndex:X._lastRenderedStartIndex,lastRenderedStopIndex:X._lastRenderedStopIndex,startIndex:oe.startIndex,stopIndex:oe.stopIndex})&&X._registeredChild&&pi(X._registeredChild,X._lastRenderedStartIndex)})})},"_loadUnloadedRanges")},{key:"_onRowsRendered",value:o(function(A){var X=A.startIndex,se=A.stopIndex;this._lastRenderedStartIndex=X,this._lastRenderedStopIndex=se,this._doStuff(X,se)},"_onRowsRendered")},{key:"_doStuff",value:o(function(A,X){var se,oe=this,ve=this.props,Ie=ve.isRowLoaded,Ae=ve.minimumBatchSize,ke=ve.rowCount,De=ve.threshold,Ge=vi({isRowLoaded:Ie,minimumBatchSize:Ae,rowCount:ke,startIndex:Math.max(0,A-De),stopIndex:Math.min(ke-1,X+De)}),Xe=(se=[]).concat.apply(se,Ii()(Ge.map(function(ut){var Ze=ut.startIndex,Zt=ut.stopIndex;return[Ze,Zt]})));this._loadMoreRowsMemoizer({callback:o(function(){oe._loadUnloadedRanges(Ge)},"callback"),indices:{squashedUnloadedRanges:Xe}})},"_doStuff")},{key:"_registerChild",value:o(function(A){this._registeredChild=A},"_registerChild")}]),te}(d.PureComponent);g()(Sr,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),Sr.propTypes={};function Xn(ne){var te=ne.lastRenderedStartIndex,Q=ne.lastRenderedStopIndex,A=ne.startIndex,X=ne.stopIndex;return!(A>Q||X<te)}o(Xn,"isRangeVisible");function vi(ne){for(var te=ne.isRowLoaded,Q=ne.minimumBatchSize,A=ne.rowCount,X=ne.startIndex,se=ne.stopIndex,oe=[],ve=null,Ie=null,Ae=X;Ae<=se;Ae++){var ke=te({index:Ae});ke?Ie!==null&&(oe.push({startIndex:ve,stopIndex:Ie}),ve=Ie=null):(Ie=Ae,ve===null&&(ve=Ae))}if(Ie!==null){for(var De=Math.min(Math.max(Ie,ve+Q-1),A-1),Ge=Ie+1;Ge<=De&&!te({index:Ge});Ge++)Ie=Ge;oe.push({startIndex:ve,stopIndex:Ie})}if(oe.length)for(var Xe=oe[0];Xe.stopIndex-Xe.startIndex+1<Q&&Xe.startIndex>0;){var ut=Xe.startIndex-1;if(!te({index:ut}))Xe.startIndex=ut;else break}return oe}o(vi,"scanForUnloadedRanges");function pi(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Q=typeof ne.recomputeGridSize=="function"?ne.recomputeGridSize:ne.recomputeRowHeights;Q?Q.call(ne,te):ne.forceUpdate()}o(pi,"forceUpdateReactVirtualizedComponent");var _i=Sr,Yn=null,Ht=null,nr=null,Fs=null,qr,dr,eo=(dr=qr=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"Grid",void 0),g()(n()(A),"_cellRenderer",function(ve){var Ie=ve.parent,Ae=ve.rowIndex,ke=ve.style,De=ve.isScrolling,Ge=ve.isVisible,Xe=ve.key,ut=A.props.rowRenderer,Ze=Object.getOwnPropertyDescriptor(ke,"width");return Ze&&Ze.writable&&(ke.width="100%"),ut({index:Ae,style:ke,isScrolling:De,isVisible:Ge,key:Xe,parent:Ie})}),g()(n()(A),"_setRef",function(ve){A.Grid=ve}),g()(n()(A),"_onScroll",function(ve){var Ie=ve.clientHeight,Ae=ve.scrollHeight,ke=ve.scrollTop,De=A.props.onScroll;De({clientHeight:Ie,scrollHeight:Ae,scrollTop:ke})}),g()(n()(A),"_onSectionRendered",function(ve){var Ie=ve.rowOverscanStartIndex,Ae=ve.rowOverscanStopIndex,ke=ve.rowStartIndex,De=ve.rowStopIndex,Ge=A.props.onRowsRendered;Ge({overscanStartIndex:Ie,overscanStopIndex:Ae,startIndex:ke,stopIndex:De})}),A}return o(te,"List"),m()(te,[{key:"forceUpdateGrid",value:o(function(){this.Grid&&this.Grid.forceUpdate()},"forceUpdateGrid")},{key:"getOffsetForRow",value:o(function(A){var X=A.alignment,se=A.index;if(this.Grid){var oe=this.Grid.getOffsetForCell({alignment:X,rowIndex:se,columnIndex:0}),ve=oe.scrollTop;return ve}return 0},"getOffsetForRow")},{key:"invalidateCellSizeAfterRender",value:o(function(A){var X=A.columnIndex,se=A.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:se,columnIndex:X})},"invalidateCellSizeAfterRender")},{key:"measureAllRows",value:o(function(){this.Grid&&this.Grid.measureAllCells()},"measureAllRows")},{key:"recomputeGridSize",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=A.columnIndex,se=X===void 0?0:X,oe=A.rowIndex,ve=oe===void 0?0:oe;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ve,columnIndex:se})},"recomputeGridSize")},{key:"recomputeRowHeights",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:A,columnIndex:0})},"recomputeRowHeights")},{key:"scrollToPosition",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:A})},"scrollToPosition")},{key:"scrollToRow",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:A})},"scrollToRow")},{key:"render",value:o(function(){var A=this.props,X=A.className,se=A.noRowsRenderer,oe=A.scrollToIndex,ve=A.width,Ie=F("ReactVirtualized__List",X);return d.createElement(vt,w()({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:Ie,columnWidth:ve,columnCount:1,noContentRenderer:se,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:oe}))},"render")}]),te}(d.PureComponent),g()(qr,"propTypes",null),dr);g()(eo,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:o(function(){},"onScroll"),noRowsRenderer:o(function(){return null},"noRowsRenderer"),onRowsRendered:o(function(){},"onRowsRendered"),overscanIndicesGetter:Bt,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var to=f("kGhG"),ur=f.n(to);function Vs(ne,te,Q,A){for(var X=Q+1;te<=Q;){var se=te+Q>>>1,oe=ne[se];oe>=A?(X=se,Q=se-1):te=se+1}return X}o(Vs,"_GEA");function Us(ne,te,Q,A,X){for(var se=Q+1;te<=Q;){var oe=te+Q>>>1,ve=ne[oe];X(ve,A)>=0?(se=oe,Q=oe-1):te=oe+1}return se}o(Us,"_GEP");function Li(ne,te,Q,A,X){return typeof Q=="function"?Us(ne,A===void 0?0:A|0,X===void 0?ne.length-1:X|0,te,Q):Vs(ne,Q===void 0?0:Q|0,A===void 0?ne.length-1:A|0,te)}o(Li,"dispatchBsearchGE");function kr(ne,te,Q,A){for(var X=Q+1;te<=Q;){var se=te+Q>>>1,oe=ne[se];oe>A?(X=se,Q=se-1):te=se+1}return X}o(kr,"_GTA");function xo(ne,te,Q,A,X){for(var se=Q+1;te<=Q;){var oe=te+Q>>>1,ve=ne[oe];X(ve,A)>0?(se=oe,Q=oe-1):te=oe+1}return se}o(xo,"_GTP");function Hs(ne,te,Q,A,X){return typeof Q=="function"?xo(ne,A===void 0?0:A|0,X===void 0?ne.length-1:X|0,te,Q):kr(ne,Q===void 0?0:Q|0,A===void 0?ne.length-1:A|0,te)}o(Hs,"dispatchBsearchGT");function Jr(ne,te,Q,A){for(var X=te-1;te<=Q;){var se=te+Q>>>1,oe=ne[se];oe<A?(X=se,te=se+1):Q=se-1}return X}o(Jr,"_LTA");function bo(ne,te,Q,A,X){for(var se=te-1;te<=Q;){var oe=te+Q>>>1,ve=ne[oe];X(ve,A)<0?(se=oe,te=oe+1):Q=oe-1}return se}o(bo,"_LTP");function uo(ne,te,Q,A,X){return typeof Q=="function"?bo(ne,A===void 0?0:A|0,X===void 0?ne.length-1:X|0,te,Q):Jr(ne,Q===void 0?0:Q|0,A===void 0?ne.length-1:A|0,te)}o(uo,"dispatchBsearchLT");function Bo(ne,te,Q,A){for(var X=te-1;te<=Q;){var se=te+Q>>>1,oe=ne[se];oe<=A?(X=se,te=se+1):Q=se-1}return X}o(Bo,"_LEA");function ys(ne,te,Q,A,X){for(var se=te-1;te<=Q;){var oe=te+Q>>>1,ve=ne[oe];X(ve,A)<=0?(se=oe,te=oe+1):Q=oe-1}return se}o(ys,"_LEP");function bs(ne,te,Q,A,X){return typeof Q=="function"?ys(ne,A===void 0?0:A|0,X===void 0?ne.length-1:X|0,te,Q):Bo(ne,Q===void 0?0:Q|0,A===void 0?ne.length-1:A|0,te)}o(bs,"dispatchBsearchLE");function Zo(ne,te,Q,A){for(te-1;te<=Q;){var X=te+Q>>>1,se=ne[X];if(se===A)return X;se<=A?te=X+1:Q=X-1}return-1}o(Zo,"_EQA");function Cs(ne,te,Q,A,X){for(te-1;te<=Q;){var se=te+Q>>>1,oe=ne[se],ve=X(oe,A);if(ve===0)return se;ve<=0?te=se+1:Q=se-1}return-1}o(Cs,"_EQP");function Es(ne,te,Q,A,X){return typeof Q=="function"?Cs(ne,A===void 0?0:A|0,X===void 0?ne.length-1:X|0,te,Q):Zo(ne,Q===void 0?0:Q|0,A===void 0?ne.length-1:A|0,te)}o(Es,"dispatchBsearchEQ");var fo={ge:Li,gt:Hs,lt:uo,le:bs,eq:Es},no=0,oo=1,ho=2;function Co(ne,te,Q,A,X){this.mid=ne,this.left=te,this.right=Q,this.leftPoints=A,this.rightPoints=X,this.count=(te?te.count:0)+(Q?Q.count:0)+A.length}o(Co,"IntervalTreeNode");var Eo=Co.prototype;function Fo(ne,te){ne.mid=te.mid,ne.left=te.left,ne.right=te.right,ne.leftPoints=te.leftPoints,ne.rightPoints=te.rightPoints,ne.count=te.count}o(Fo,"copy");function qo(ne,te){var Q=mo(te);ne.mid=Q.mid,ne.left=Q.left,ne.right=Q.right,ne.leftPoints=Q.leftPoints,ne.rightPoints=Q.rightPoints,ne.count=Q.count}o(qo,"rebuild");function vr(ne,te){var Q=ne.intervals([]);Q.push(te),qo(ne,Q)}o(vr,"rebuildWithInterval");function es(ne,te){var Q=ne.intervals([]),A=Q.indexOf(te);return A<0?no:(Q.splice(A,1),qo(ne,Q),oo)}o(es,"rebuildWithoutInterval"),Eo.intervals=function(ne){return ne.push.apply(ne,this.leftPoints),this.left&&this.left.intervals(ne),this.right&&this.right.intervals(ne),ne},Eo.insert=function(ne){var te=this.count-this.leftPoints.length;if(this.count+=1,ne[1]<this.mid)this.left?4*(this.left.count+1)>3*(te+1)?vr(this,ne):this.left.insert(ne):this.left=mo([ne]);else if(ne[0]>this.mid)this.right?4*(this.right.count+1)>3*(te+1)?vr(this,ne):this.right.insert(ne):this.right=mo([ne]);else{var Q=fo.ge(this.leftPoints,ne,Dr),A=fo.ge(this.rightPoints,ne,po);this.leftPoints.splice(Q,0,ne),this.rightPoints.splice(A,0,ne)}},Eo.remove=function(ne){var te=this.count-this.leftPoints;if(ne[1]<this.mid){if(!this.left)return no;var Q=this.right?this.right.count:0;if(4*Q>3*(te-1))return es(this,ne);var A=this.left.remove(ne);return A===ho?(this.left=null,this.count-=1,oo):(A===oo&&(this.count-=1),A)}else if(ne[0]>this.mid){if(!this.right)return no;var X=this.left?this.left.count:0;if(4*X>3*(te-1))return es(this,ne);var A=this.right.remove(ne);return A===ho?(this.right=null,this.count-=1,oo):(A===oo&&(this.count-=1),A)}else{if(this.count===1)return this.leftPoints[0]===ne?ho:no;if(this.leftPoints.length===1&&this.leftPoints[0]===ne){if(this.left&&this.right){for(var se=this,oe=this.left;oe.right;)se=oe,oe=oe.right;if(se===this)oe.right=this.right;else{var ve=this.left,A=this.right;se.count-=oe.count,se.right=oe.left,oe.left=ve,oe.right=A}Fo(this,oe),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?Fo(this,this.left):Fo(this,this.right);return oo}for(var ve=fo.ge(this.leftPoints,ne,Dr);ve<this.leftPoints.length&&this.leftPoints[ve][0]===ne[0];++ve)if(this.leftPoints[ve]===ne){this.count-=1,this.leftPoints.splice(ve,1);for(var A=fo.ge(this.rightPoints,ne,po);A<this.rightPoints.length&&this.rightPoints[A][1]===ne[1];++A)if(this.rightPoints[A]===ne)return this.rightPoints.splice(A,1),oo}return no}};function Ts(ne,te,Q){for(var A=0;A<ne.length&&ne[A][0]<=te;++A){var X=Q(ne[A]);if(X)return X}}o(Ts,"reportLeftRange");function ts(ne,te,Q){for(var A=ne.length-1;A>=0&&ne[A][1]>=te;--A){var X=Q(ne[A]);if(X)return X}}o(ts,"reportRightRange");function Yr(ne,te){for(var Q=0;Q<ne.length;++Q){var A=te(ne[Q]);if(A)return A}}o(Yr,"reportRange"),Eo.queryPoint=function(ne,te){if(ne<this.mid){if(this.left){var Q=this.left.queryPoint(ne,te);if(Q)return Q}return Ts(this.leftPoints,ne,te)}else if(ne>this.mid){if(this.right){var Q=this.right.queryPoint(ne,te);if(Q)return Q}return ts(this.rightPoints,ne,te)}else return Yr(this.leftPoints,te)},Eo.queryInterval=function(ne,te,Q){if(ne<this.mid&&this.left){var A=this.left.queryInterval(ne,te,Q);if(A)return A}if(te>this.mid&&this.right){var A=this.right.queryInterval(ne,te,Q);if(A)return A}return te<this.mid?Ts(this.leftPoints,te,Q):ne>this.mid?ts(this.rightPoints,ne,Q):Yr(this.leftPoints,Q)};function Vo(ne,te){return ne-te}o(Vo,"compareNumbers");function Dr(ne,te){var Q=ne[0]-te[0];return Q||ne[1]-te[1]}o(Dr,"compareBegin");function po(ne,te){var Q=ne[1]-te[1];return Q||ne[0]-te[0]}o(po,"compareEnd");function mo(ne){if(ne.length===0)return null;for(var te=[],Q=0;Q<ne.length;++Q)te.push(ne[Q][0],ne[Q][1]);te.sort(Vo);for(var A=te[te.length>>1],X=[],se=[],oe=[],Q=0;Q<ne.length;++Q){var ve=ne[Q];ve[1]<A?X.push(ve):A<ve[0]?se.push(ve):oe.push(ve)}var Ie=oe,Ae=oe.slice();return Ie.sort(Dr),Ae.sort(po),new Co(A,mo(X),mo(se),Ie,Ae)}o(mo,"createIntervalTree");function Uo(ne){this.root=ne}o(Uo,"IntervalTree");var so=Uo.prototype;so.insert=function(ne){this.root?this.root.insert(ne):this.root=new Co(ne[0],null,null,[ne],[ne])},so.remove=function(ne){if(this.root){var te=this.root.remove(ne);return te===ho&&(this.root=null),te!==no}return!1},so.queryPoint=function(ne,te){if(this.root)return this.root.queryPoint(ne,te)},so.queryInterval=function(ne,te,Q){if(ne<=te&&this.root)return this.root.queryInterval(ne,te,Q)},Object.defineProperty(so,"count",{get:o(function(){return this.root?this.root.count:0},"get")}),Object.defineProperty(so,"intervals",{get:o(function(){return this.root?this.root.intervals([]):[]},"get")});function Wr(ne){return!ne||ne.length===0?new Uo(null):new Uo(mo(ne))}o(Wr,"createWrapper");var To=function(){function ne(){h()(this,ne),g()(this,"_columnSizeMap",{}),g()(this,"_intervalTree",Wr()),g()(this,"_leftMap",{})}return o(ne,"PositionCache"),m()(ne,[{key:"estimateTotalHeight",value:o(function(Q,A,X){var se=Q-this.count;return this.tallestColumnSize+Math.ceil(se/A)*X},"estimateTotalHeight")},{key:"range",value:o(function(Q,A,X){var se=this;this._intervalTree.queryInterval(Q,Q+A,function(oe){var ve=ur()(oe,3),Ie=ve[0],Ae=ve[1],ke=ve[2];return X(ke,se._leftMap[ke],Ie)})},"range")},{key:"setPosition",value:o(function(Q,A,X,se){this._intervalTree.insert([X,X+se,Q]),this._leftMap[Q]=A;var oe=this._columnSizeMap,ve=oe[A];ve===void 0?oe[A]=X+se:oe[A]=Math.max(ve,X+se)},"setPosition")},{key:"count",get:o(function(){return this._intervalTree.count},"get")},{key:"shortestColumnSize",get:o(function(){var Q=this._columnSizeMap,A=0;for(var X in Q){var se=Q[X];A=A===0?se:Math.min(A,se)}return A},"get")},{key:"tallestColumnSize",get:o(function(){var Q=this._columnSizeMap,A=0;for(var X in Q){var se=Q[X];A=Math.max(A,se)}return A},"get")}]),ne}(),Io,jr;function go(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(go,"Masonry_ownKeys");function Ho(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?go(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):go(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(Ho,"Masonry_objectSpread");var Is={},zs=150,Lr=(jr=Io=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"state",{isScrolling:!1,scrollTop:0}),g()(n()(A),"_debounceResetIsScrollingId",void 0),g()(n()(A),"_invalidateOnUpdateStartIndex",null),g()(n()(A),"_invalidateOnUpdateStopIndex",null),g()(n()(A),"_positionCache",new To),g()(n()(A),"_startIndex",null),g()(n()(A),"_startIndexMemoized",null),g()(n()(A),"_stopIndex",null),g()(n()(A),"_stopIndexMemoized",null),g()(n()(A),"_debounceResetIsScrollingCallback",function(){A.setState({isScrolling:!1})}),g()(n()(A),"_setScrollingContainerRef",function(ve){A._scrollingContainer=ve}),g()(n()(A),"_onScroll",function(ve){var Ie=A.props.height,Ae=ve.currentTarget.scrollTop,ke=Math.min(Math.max(0,A._getEstimatedTotalHeight()-Ie),Ae);Ae===ke&&(A._debounceResetIsScrolling(),A.state.scrollTop!==ke&&A.setState({isScrolling:!0,scrollTop:ke}))}),A}return o(te,"Masonry"),m()(te,[{key:"clearCellPositions",value:o(function(){this._positionCache=new To,this.forceUpdate()},"clearCellPositions")},{key:"invalidateCellSizeAfterRender",value:o(function(A){var X=A.rowIndex;this._invalidateOnUpdateStartIndex===null?(this._invalidateOnUpdateStartIndex=X,this._invalidateOnUpdateStopIndex=X):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,X),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,X))},"invalidateCellSizeAfterRender")},{key:"recomputeCellPositions",value:o(function(){var A=this._positionCache.count-1;this._positionCache=new To,this._populatePositionCache(0,A),this.forceUpdate()},"recomputeCellPositions")},{key:"componentDidMount",value:o(function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()},"componentDidMount")},{key:"componentDidUpdate",value:o(function(A,X){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==A.scrollTop&&this._debounceResetIsScrolling()},"componentDidUpdate")},{key:"componentWillUnmount",value:o(function(){this._debounceResetIsScrollingId&&er(this._debounceResetIsScrollingId)},"componentWillUnmount")},{key:"render",value:o(function(){var A=this,X=this.props,se=X.autoHeight,oe=X.cellCount,ve=X.cellMeasurerCache,Ie=X.cellRenderer,Ae=X.className,ke=X.height,De=X.id,Ge=X.keyMapper,Xe=X.overscanByPixels,ut=X.role,Ze=X.style,Zt=X.tabIndex,rn=X.width,Tn=X.rowDirection,Pn=this.state,qn=Pn.isScrolling,Kn=Pn.scrollTop,ti=[],ei=this._getEstimatedTotalHeight(),wi=this._positionCache.shortestColumnSize,ki=this._positionCache.count,ci=0,yi;if(this._positionCache.range(Math.max(0,Kn-Xe),ke+Xe*2,function(Wi,Kr,vo){var yr;typeof yi>"u"?(ci=Wi,yi=Wi):(ci=Math.min(ci,Wi),yi=Math.max(yi,Wi)),ti.push(Ie({index:Wi,isScrolling:qn,key:Ge(Wi),parent:A,style:(yr={height:ve.getHeight(Wi)},g()(yr,Tn==="ltr"?"left":"right",Kr),g()(yr,"position","absolute"),g()(yr,"top",vo),g()(yr,"width",ve.getWidth(Wi)),yr)}))}),wi<Kn+ke+Xe&&ki<oe)for(var or=Math.min(oe-ki,Math.ceil((Kn+ke+Xe-wi)/ve.defaultHeight*rn/ve.defaultWidth)),Mi=ki;Mi<ki+or;Mi++)yi=Mi,ti.push(Ie({index:Mi,isScrolling:qn,key:Ge(Mi),parent:this,style:{width:ve.getWidth(Mi)}}));return this._startIndex=ci,this._stopIndex=yi,d.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:F("ReactVirtualized__Masonry",Ae),id:De,onScroll:this._onScroll,role:ut,style:Ho({boxSizing:"border-box",direction:"ltr",height:se?"auto":ke,overflowX:"hidden",overflowY:ei<ke?"hidden":"auto",position:"relative",width:rn,WebkitOverflowScrolling:"touch",willChange:"transform"},Ze),tabIndex:Zt},d.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:ei,maxWidth:"100%",maxHeight:ei,overflow:"hidden",pointerEvents:qn?"none":"",position:"relative"}},ti))},"render")},{key:"_checkInvalidateOnUpdate",value:o(function(){if(typeof this._invalidateOnUpdateStartIndex=="number"){var A=this._invalidateOnUpdateStartIndex,X=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(A,X),this.forceUpdate()}},"_checkInvalidateOnUpdate")},{key:"_debounceResetIsScrolling",value:o(function(){var A=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&er(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=cr(this._debounceResetIsScrollingCallback,A)},"_debounceResetIsScrolling")},{key:"_getEstimatedTotalHeight",value:o(function(){var A=this.props,X=A.cellCount,se=A.cellMeasurerCache,oe=A.width,ve=Math.max(1,Math.floor(oe/se.defaultWidth));return this._positionCache.estimateTotalHeight(X,ve,se.defaultHeight)},"_getEstimatedTotalHeight")},{key:"_invokeOnScrollCallback",value:o(function(){var A=this.props,X=A.height,se=A.onScroll,oe=this.state.scrollTop;this._onScrollMemoized!==oe&&(se({clientHeight:X,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:oe}),this._onScrollMemoized=oe)},"_invokeOnScrollCallback")},{key:"_invokeOnCellsRenderedCallback",value:o(function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){var A=this.props.onCellsRendered;A({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}},"_invokeOnCellsRenderedCallback")},{key:"_populatePositionCache",value:o(function(A,X){for(var se=this.props,oe=se.cellMeasurerCache,ve=se.cellPositioner,Ie=A;Ie<=X;Ie++){var Ae=ve(Ie),ke=Ae.left,De=Ae.top;this._positionCache.setPosition(Ie,ke,De,oe.getHeight(Ie))}},"_populatePositionCache")}],[{key:"getDerivedStateFromProps",value:o(function(A,X){return A.scrollTop!==void 0&&X.scrollTop!==A.scrollTop?{isScrolling:!0,scrollTop:A.scrollTop}:null},"getDerivedStateFromProps")}]),te}(d.PureComponent),g()(Io,"propTypes",null),jr);g()(Lr,"defaultProps",{autoHeight:!1,keyMapper:ns,onCellsRendered:Gr,onScroll:Gr,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:zs,style:Is,tabIndex:0,rowDirection:"ltr"});function ns(ne){return ne}o(ns,"identity");function Gr(){}o(Gr,"noop");var Ws=null;Object(y.polyfill)(Lr);var js=Lr,Xr=null;function wo(ne){var te=ne.cellMeasurerCache,Q=ne.columnCount,A=ne.columnWidth,X=ne.spacer,se=X===void 0?0:X,oe;Ie();function ve(ke){for(var De=0,Ge=1;Ge<oe.length;Ge++)oe[Ge]<oe[De]&&(De=Ge);var Xe=De*(A+se),ut=oe[De]||0;return oe[De]=ut+te.getHeight(ke)+se,{left:Xe,top:ut}}o(ve,"cellPositioner");function Ie(){oe=[];for(var ke=0;ke<Q;ke++)oe[ke]=0}o(Ie,"initOrResetDerivedValues");function Ae(ke){Q=ke.columnCount,A=ke.columnWidth,se=ke.spacer,Ie()}return o(Ae,"reset"),ve.reset=Ae,ve}o(wo,"createCellPositioner");var is=js,zo=function(){function ne(){var te=this,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};h()(this,ne),g()(this,"_cellMeasurerCache",void 0),g()(this,"_columnIndexOffset",void 0),g()(this,"_rowIndexOffset",void 0),g()(this,"columnWidth",function(Ie){var Ae=Ie.index;te._cellMeasurerCache.columnWidth({index:Ae+te._columnIndexOffset})}),g()(this,"rowHeight",function(Ie){var Ae=Ie.index;te._cellMeasurerCache.rowHeight({index:Ae+te._rowIndexOffset})});var A=Q.cellMeasurerCache,X=Q.columnIndexOffset,se=X===void 0?0:X,oe=Q.rowIndexOffset,ve=oe===void 0?0:oe;this._cellMeasurerCache=A,this._columnIndexOffset=se,this._rowIndexOffset=ve}return o(ne,"CellMeasurerCacheDecorator"),m()(ne,[{key:"clear",value:o(function(Q,A){this._cellMeasurerCache.clear(Q+this._rowIndexOffset,A+this._columnIndexOffset)},"clear")},{key:"clearAll",value:o(function(){this._cellMeasurerCache.clearAll()},"clearAll")},{key:"hasFixedHeight",value:o(function(){return this._cellMeasurerCache.hasFixedHeight()},"hasFixedHeight")},{key:"hasFixedWidth",value:o(function(){return this._cellMeasurerCache.hasFixedWidth()},"hasFixedWidth")},{key:"getHeight",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getHeight(Q+this._rowIndexOffset,A+this._columnIndexOffset)},"getHeight")},{key:"getWidth",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.getWidth(Q+this._rowIndexOffset,A+this._columnIndexOffset)},"getWidth")},{key:"has",value:o(function(Q){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this._cellMeasurerCache.has(Q+this._rowIndexOffset,A+this._columnIndexOffset)},"has")},{key:"set",value:o(function(Q,A,X,se){this._cellMeasurerCache.set(Q+this._rowIndexOffset,A+this._columnIndexOffset,X,se)},"set")},{key:"defaultHeight",get:o(function(){return this._cellMeasurerCache.defaultHeight},"get")},{key:"defaultWidth",get:o(function(){return this._cellMeasurerCache.defaultWidth},"get")}]),ne}();function ws(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(ws,"MultiGrid_ownKeys");function ir(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?ws(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):ws(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(ir,"MultiGrid_objectSpread");var Wo=20,Oo=function(ne){c()(te,ne);function te(Q,A){var X;h()(this,te),X=s()(this,e()(te).call(this,Q,A)),g()(n()(X),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),g()(n()(X),"_deferredInvalidateColumnIndex",null),g()(n()(X),"_deferredInvalidateRowIndex",null),g()(n()(X),"_bottomLeftGridRef",function(Ie){X._bottomLeftGrid=Ie}),g()(n()(X),"_bottomRightGridRef",function(Ie){X._bottomRightGrid=Ie}),g()(n()(X),"_cellRendererBottomLeftGrid",function(Ie){var Ae=Ie.rowIndex,ke=x()(Ie,["rowIndex"]),De=X.props,Ge=De.cellRenderer,Xe=De.fixedRowCount,ut=De.rowCount;return Ae===ut-Xe?d.createElement("div",{key:ke.key,style:ir({},ke.style,{height:Wo})}):Ge(ir({},ke,{parent:n()(X),rowIndex:Ae+Xe}))}),g()(n()(X),"_cellRendererBottomRightGrid",function(Ie){var Ae=Ie.columnIndex,ke=Ie.rowIndex,De=x()(Ie,["columnIndex","rowIndex"]),Ge=X.props,Xe=Ge.cellRenderer,ut=Ge.fixedColumnCount,Ze=Ge.fixedRowCount;return Xe(ir({},De,{columnIndex:Ae+ut,parent:n()(X),rowIndex:ke+Ze}))}),g()(n()(X),"_cellRendererTopRightGrid",function(Ie){var Ae=Ie.columnIndex,ke=x()(Ie,["columnIndex"]),De=X.props,Ge=De.cellRenderer,Xe=De.columnCount,ut=De.fixedColumnCount;return Ae===Xe-ut?d.createElement("div",{key:ke.key,style:ir({},ke.style,{width:Wo})}):Ge(ir({},ke,{columnIndex:Ae+ut,parent:n()(X)}))}),g()(n()(X),"_columnWidthRightGrid",function(Ie){var Ae=Ie.index,ke=X.props,De=ke.columnCount,Ge=ke.fixedColumnCount,Xe=ke.columnWidth,ut=X.state,Ze=ut.scrollbarSize,Zt=ut.showHorizontalScrollbar;return Zt&&Ae===De-Ge?Ze:typeof Xe=="function"?Xe({index:Ae+Ge}):Xe}),g()(n()(X),"_onScroll",function(Ie){var Ae=Ie.scrollLeft,ke=Ie.scrollTop;X.setState({scrollLeft:Ae,scrollTop:ke});var De=X.props.onScroll;De&&De(Ie)}),g()(n()(X),"_onScrollbarPresenceChange",function(Ie){var Ae=Ie.horizontal,ke=Ie.size,De=Ie.vertical,Ge=X.state,Xe=Ge.showHorizontalScrollbar,ut=Ge.showVerticalScrollbar;if(Ae!==Xe||De!==ut){X.setState({scrollbarSize:ke,showHorizontalScrollbar:Ae,showVerticalScrollbar:De});var Ze=X.props.onScrollbarPresenceChange;typeof Ze=="function"&&Ze({horizontal:Ae,size:ke,vertical:De})}}),g()(n()(X),"_onScrollLeft",function(Ie){var Ae=Ie.scrollLeft;X._onScroll({scrollLeft:Ae,scrollTop:X.state.scrollTop})}),g()(n()(X),"_onScrollTop",function(Ie){var Ae=Ie.scrollTop;X._onScroll({scrollTop:Ae,scrollLeft:X.state.scrollLeft})}),g()(n()(X),"_rowHeightBottomGrid",function(Ie){var Ae=Ie.index,ke=X.props,De=ke.fixedRowCount,Ge=ke.rowCount,Xe=ke.rowHeight,ut=X.state,Ze=ut.scrollbarSize,Zt=ut.showVerticalScrollbar;return Zt&&Ae===Ge-De?Ze:typeof Xe=="function"?Xe({index:Ae+De}):Xe}),g()(n()(X),"_topLeftGridRef",function(Ie){X._topLeftGrid=Ie}),g()(n()(X),"_topRightGridRef",function(Ie){X._topRightGrid=Ie});var se=Q.deferredMeasurementCache,oe=Q.fixedColumnCount,ve=Q.fixedRowCount;return X._maybeCalculateCachedStyles(!0),se&&(X._deferredMeasurementCacheBottomLeftGrid=ve>0?new zo({cellMeasurerCache:se,columnIndexOffset:0,rowIndexOffset:ve}):se,X._deferredMeasurementCacheBottomRightGrid=oe>0||ve>0?new zo({cellMeasurerCache:se,columnIndexOffset:oe,rowIndexOffset:ve}):se,X._deferredMeasurementCacheTopRightGrid=oe>0?new zo({cellMeasurerCache:se,columnIndexOffset:oe,rowIndexOffset:0}):se),X}return o(te,"MultiGrid"),m()(te,[{key:"forceUpdateGrids",value:o(function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()},"forceUpdateGrids")},{key:"invalidateCellSizeAfterRender",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=A.columnIndex,se=X===void 0?0:X,oe=A.rowIndex,ve=oe===void 0?0:oe;this._deferredInvalidateColumnIndex=typeof this._deferredInvalidateColumnIndex=="number"?Math.min(this._deferredInvalidateColumnIndex,se):se,this._deferredInvalidateRowIndex=typeof this._deferredInvalidateRowIndex=="number"?Math.min(this._deferredInvalidateRowIndex,ve):ve},"invalidateCellSizeAfterRender")},{key:"measureAllCells",value:o(function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()},"measureAllCells")},{key:"recomputeGridSize",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=A.columnIndex,se=X===void 0?0:X,oe=A.rowIndex,ve=oe===void 0?0:oe,Ie=this.props,Ae=Ie.fixedColumnCount,ke=Ie.fixedRowCount,De=Math.max(0,se-Ae),Ge=Math.max(0,ve-ke);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:se,rowIndex:Ge}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:De,rowIndex:Ge}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:se,rowIndex:ve}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:De,rowIndex:ve}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)},"recomputeGridSize")},{key:"componentDidMount",value:o(function(){var A=this.props,X=A.scrollLeft,se=A.scrollTop;if(X>0||se>0){var oe={};X>0&&(oe.scrollLeft=X),se>0&&(oe.scrollTop=se),this.setState(oe)}this._handleInvalidatedGridSize()},"componentDidMount")},{key:"componentDidUpdate",value:o(function(){this._handleInvalidatedGridSize()},"componentDidUpdate")},{key:"render",value:o(function(){var A=this.props,X=A.onScroll,se=A.onSectionRendered,oe=A.onScrollbarPresenceChange,ve=A.scrollLeft,Ie=A.scrollToColumn,Ae=A.scrollTop,ke=A.scrollToRow,De=x()(A,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),this.props.width===0||this.props.height===0)return null;var Ge=this.state,Xe=Ge.scrollLeft,ut=Ge.scrollTop;return d.createElement("div",{style:this._containerOuterStyle},d.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(De),this._renderTopRightGrid(ir({},De,{onScroll:X,scrollLeft:Xe}))),d.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(ir({},De,{onScroll:X,scrollTop:ut})),this._renderBottomRightGrid(ir({},De,{onScroll:X,onSectionRendered:se,scrollLeft:Xe,scrollToColumn:Ie,scrollToRow:ke,scrollTop:ut}))))},"render")},{key:"_getBottomGridHeight",value:o(function(A){var X=A.height,se=this._getTopGridHeight(A);return X-se},"_getBottomGridHeight")},{key:"_getLeftGridWidth",value:o(function(A){var X=A.fixedColumnCount,se=A.columnWidth;if(this._leftGridWidth==null)if(typeof se=="function"){for(var oe=0,ve=0;ve<X;ve++)oe+=se({index:ve});this._leftGridWidth=oe}else this._leftGridWidth=se*X;return this._leftGridWidth},"_getLeftGridWidth")},{key:"_getRightGridWidth",value:o(function(A){var X=A.width,se=this._getLeftGridWidth(A);return X-se},"_getRightGridWidth")},{key:"_getTopGridHeight",value:o(function(A){var X=A.fixedRowCount,se=A.rowHeight;if(this._topGridHeight==null)if(typeof se=="function"){for(var oe=0,ve=0;ve<X;ve++)oe+=se({index:ve});this._topGridHeight=oe}else this._topGridHeight=se*X;return this._topGridHeight},"_getTopGridHeight")},{key:"_handleInvalidatedGridSize",value:o(function(){if(typeof this._deferredInvalidateColumnIndex=="number"){var A=this._deferredInvalidateColumnIndex,X=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:A,rowIndex:X}),this.forceUpdate()}},"_handleInvalidatedGridSize")},{key:"_maybeCalculateCachedStyles",value:o(function(A){var X=this.props,se=X.columnWidth,oe=X.enableFixedColumnScroll,ve=X.enableFixedRowScroll,Ie=X.height,Ae=X.fixedColumnCount,ke=X.fixedRowCount,De=X.rowHeight,Ge=X.style,Xe=X.styleBottomLeftGrid,ut=X.styleBottomRightGrid,Ze=X.styleTopLeftGrid,Zt=X.styleTopRightGrid,rn=X.width,Tn=A||Ie!==this._lastRenderedHeight||rn!==this._lastRenderedWidth,Pn=A||se!==this._lastRenderedColumnWidth||Ae!==this._lastRenderedFixedColumnCount,qn=A||ke!==this._lastRenderedFixedRowCount||De!==this._lastRenderedRowHeight;(A||Tn||Ge!==this._lastRenderedStyle)&&(this._containerOuterStyle=ir({height:Ie,overflow:"visible",width:rn},Ge)),(A||Tn||qn)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:rn},this._containerBottomStyle={height:Ie-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:rn}),(A||Xe!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=ir({left:0,overflowX:"hidden",overflowY:oe?"auto":"hidden",position:"absolute"},Xe)),(A||Pn||ut!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=ir({left:this._getLeftGridWidth(this.props),position:"absolute"},ut)),(A||Ze!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=ir({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},Ze)),(A||Pn||Zt!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=ir({left:this._getLeftGridWidth(this.props),overflowX:ve?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},Zt)),this._lastRenderedColumnWidth=se,this._lastRenderedFixedColumnCount=Ae,this._lastRenderedFixedRowCount=ke,this._lastRenderedHeight=Ie,this._lastRenderedRowHeight=De,this._lastRenderedStyle=Ge,this._lastRenderedStyleBottomLeftGrid=Xe,this._lastRenderedStyleBottomRightGrid=ut,this._lastRenderedStyleTopLeftGrid=Ze,this._lastRenderedStyleTopRightGrid=Zt,this._lastRenderedWidth=rn},"_maybeCalculateCachedStyles")},{key:"_prepareForRender",value:o(function(){(this._lastRenderedColumnWidth!==this.props.columnWidth||this._lastRenderedFixedColumnCount!==this.props.fixedColumnCount)&&(this._leftGridWidth=null),(this._lastRenderedFixedRowCount!==this.props.fixedRowCount||this._lastRenderedRowHeight!==this.props.rowHeight)&&(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight},"_prepareForRender")},{key:"_renderBottomLeftGrid",value:o(function(A){var X=A.enableFixedColumnScroll,se=A.fixedColumnCount,oe=A.fixedRowCount,ve=A.rowCount,Ie=A.hideBottomLeftGridScrollbar,Ae=this.state.showVerticalScrollbar;if(!se)return null;var ke=Ae?1:0,De=this._getBottomGridHeight(A),Ge=this._getLeftGridWidth(A),Xe=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,ut=Ie?Ge+Xe:Ge,Ze=d.createElement(vt,w()({},A,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:se,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:De,onScroll:X?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,ve-oe)+ke,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:ut}));return Ie?d.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:ir({},this._bottomLeftGridStyle,{height:De,width:Ge,overflowY:"hidden"})},Ze):Ze},"_renderBottomLeftGrid")},{key:"_renderBottomRightGrid",value:o(function(A){var X=A.columnCount,se=A.fixedColumnCount,oe=A.fixedRowCount,ve=A.rowCount,Ie=A.scrollToColumn,Ae=A.scrollToRow;return d.createElement(vt,w()({},A,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,X-se),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(A),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,ve-oe),rowHeight:this._rowHeightBottomGrid,scrollToColumn:Ie-se,scrollToRow:Ae-oe,style:this._bottomRightGridStyle,width:this._getRightGridWidth(A)}))},"_renderBottomRightGrid")},{key:"_renderTopLeftGrid",value:o(function(A){var X=A.fixedColumnCount,se=A.fixedRowCount;return!X||!se?null:d.createElement(vt,w()({},A,{className:this.props.classNameTopLeftGrid,columnCount:X,height:this._getTopGridHeight(A),ref:this._topLeftGridRef,rowCount:se,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(A)}))},"_renderTopLeftGrid")},{key:"_renderTopRightGrid",value:o(function(A){var X=A.columnCount,se=A.enableFixedRowScroll,oe=A.fixedColumnCount,ve=A.fixedRowCount,Ie=A.scrollLeft,Ae=A.hideTopRightGridScrollbar,ke=this.state,De=ke.showHorizontalScrollbar,Ge=ke.scrollbarSize;if(!ve)return null;var Xe=De?1:0,ut=this._getTopGridHeight(A),Ze=this._getRightGridWidth(A),Zt=De?Ge:0,rn=ut,Tn=this._topRightGridStyle;Ae&&(rn=ut+Zt,Tn=ir({},this._topRightGridStyle,{left:0}));var Pn=d.createElement(vt,w()({},A,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,X-oe)+Xe,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:rn,onScroll:se?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:ve,scrollLeft:Ie,style:Tn,tabIndex:null,width:Ze}));return Ae?d.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:ir({},this._topRightGridStyle,{height:ut,width:Ze,overflowX:"hidden"})},Pn):Pn},"_renderTopRightGrid")}],[{key:"getDerivedStateFromProps",value:o(function(A,X){return A.scrollLeft!==X.scrollLeft||A.scrollTop!==X.scrollTop?{scrollLeft:A.scrollLeft!=null&&A.scrollLeft>=0?A.scrollLeft:X.scrollLeft,scrollTop:A.scrollTop!=null&&A.scrollTop>=0?A.scrollTop:X.scrollTop}:null},"getDerivedStateFromProps")}]),te}(d.PureComponent);g()(Oo,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),Oo.propTypes={},Object(y.polyfill)(Oo);var rs=Oo,Os=rs,Qr=function(ne){c()(te,ne);function te(Q,A){var X;return h()(this,te),X=s()(this,e()(te).call(this,Q,A)),X.state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},X._onScroll=X._onScroll.bind(n()(X)),X}return o(te,"ScrollSync"),m()(te,[{key:"render",value:o(function(){var A=this.props.children,X=this.state,se=X.clientHeight,oe=X.clientWidth,ve=X.scrollHeight,Ie=X.scrollLeft,Ae=X.scrollTop,ke=X.scrollWidth;return A({clientHeight:se,clientWidth:oe,onScroll:this._onScroll,scrollHeight:ve,scrollLeft:Ie,scrollTop:Ae,scrollWidth:ke})},"render")},{key:"_onScroll",value:o(function(A){var X=A.clientHeight,se=A.clientWidth,oe=A.scrollHeight,ve=A.scrollLeft,Ie=A.scrollTop,Ae=A.scrollWidth;this.setState({clientHeight:X,clientWidth:se,scrollHeight:oe,scrollLeft:ve,scrollTop:Ie,scrollWidth:Ae})},"_onScroll")}]),te}(d.PureComponent);Qr.propTypes={};var Gs=Qr;function jo(ne){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=te.defaultSortBy,A=te.defaultSortDirection,X=A===void 0?{}:A;if(!ne)throw Error('Required parameter "sortCallback" not specified');var se=Q||[],oe={};se.forEach(function(Ie){oe[Ie]=X[Ie]!==void 0?X[Ie]:"ASC"});function ve(Ie){var Ae=Ie.defaultSortDirection,ke=Ie.event,De=Ie.sortBy;if(ke.shiftKey)oe[De]!==void 0?oe[De]=oe[De]==="ASC"?"DESC":"ASC":(oe[De]=Ae,se.push(De));else if(ke.ctrlKey||ke.metaKey){var Ge=se.indexOf(De);Ge>=0&&(se.splice(Ge,1),delete oe[De])}else{se.length=0,se.push(De);var Xe=Object.keys(oe);Xe.forEach(function(ut){ut!==De&&delete oe[ut]}),oe[De]!==void 0?oe[De]=oe[De]==="ASC"?"DESC":"ASC":oe[De]=Ae}ne({sortBy:se,sortDirection:oe})}return o(ve,"sort"),{sort:ve,sortBy:se,sortDirection:oe}}o(jo,"createMultiSort");var fr=null,Go=null,os=null,ss=null,$o=null;function Ro(ne){var te=ne.dataKey,Q=ne.rowData;return typeof Q.get=="function"?Q.get(te):Q[te]}o(Ro,"defaultCellDataGetter");function as(ne){var te=ne.cellData;return te==null?"":String(te)}o(as,"defaultCellRenderer");function ls(ne){var te=ne.className,Q=ne.columns,A=ne.style;return d.createElement("div",{className:te,role:"row",style:A},Q)}o(ls,"defaultHeaderRowRenderer"),ls.propTypes=null;var ds={ASC:"ASC",DESC:"DESC"},Zr=ds;function ao(ne){var te=ne.sortDirection,Q=F("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":te===Zr.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":te===Zr.DESC});return d.createElement("svg",{className:Q,width:18,height:18,viewBox:"0 0 24 24"},te===Zr.ASC?d.createElement("path",{d:"M7 14l5-5 5 5z"}):d.createElement("path",{d:"M7 10l5 5 5-5z"}),d.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}o(ao,"SortIndicator"),ao.propTypes={};function Mr(ne){var te=ne.dataKey,Q=ne.label,A=ne.sortBy,X=ne.sortDirection,se=A===te,oe=[d.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:typeof Q=="string"?Q:null},Q)];return se&&oe.push(d.createElement(ao,{key:"SortIndicator",sortDirection:X})),oe}o(Mr,"defaultHeaderRenderer"),Mr.propTypes=null;function cs(ne){var te=ne.className,Q=ne.columns,A=ne.index,X=ne.key,se=ne.onRowClick,oe=ne.onRowDoubleClick,ve=ne.onRowMouseOut,Ie=ne.onRowMouseOver,Ae=ne.onRowRightClick,ke=ne.rowData,De=ne.style,Ge={"aria-rowindex":A+1};return(se||oe||ve||Ie||Ae)&&(Ge["aria-label"]="row",Ge.tabIndex=0,se&&(Ge.onClick=function(Xe){return se({event:Xe,index:A,rowData:ke})}),oe&&(Ge.onDoubleClick=function(Xe){return oe({event:Xe,index:A,rowData:ke})}),ve&&(Ge.onMouseOut=function(Xe){return ve({event:Xe,index:A,rowData:ke})}),Ie&&(Ge.onMouseOver=function(Xe){return Ie({event:Xe,index:A,rowData:ke})}),Ae&&(Ge.onContextMenu=function(Xe){return Ae({event:Xe,index:A,rowData:ke})})),d.createElement("div",w()({},Ge,{className:te,key:X,role:"row",style:De}),Q)}o(cs,"defaultRowRenderer"),cs.propTypes=null;var lo=function(ne){c()(te,ne);function te(){return h()(this,te),s()(this,e()(te).apply(this,arguments))}return o(te,"Column"),te}(d.Component);g()(lo,"defaultProps",{cellDataGetter:Ro,cellRenderer:as,defaultSortDirection:Zr.ASC,flexGrow:0,flexShrink:1,headerRenderer:Mr,style:{}}),lo.propTypes={};function $r(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o($r,"Table_ownKeys");function Mo(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?$r(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):$r(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(Mo,"Table_objectSpread");var Rs=function(ne){c()(te,ne);function te(Q){var A;return h()(this,te),A=s()(this,e()(te).call(this,Q)),A.state={scrollbarWidth:0},A._createColumn=A._createColumn.bind(n()(A)),A._createRow=A._createRow.bind(n()(A)),A._onScroll=A._onScroll.bind(n()(A)),A._onSectionRendered=A._onSectionRendered.bind(n()(A)),A._setRef=A._setRef.bind(n()(A)),A}return o(te,"Table"),m()(te,[{key:"forceUpdateGrid",value:o(function(){this.Grid&&this.Grid.forceUpdate()},"forceUpdateGrid")},{key:"getOffsetForRow",value:o(function(A){var X=A.alignment,se=A.index;if(this.Grid){var oe=this.Grid.getOffsetForCell({alignment:X,rowIndex:se}),ve=oe.scrollTop;return ve}return 0},"getOffsetForRow")},{key:"invalidateCellSizeAfterRender",value:o(function(A){var X=A.columnIndex,se=A.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:se,columnIndex:X})},"invalidateCellSizeAfterRender")},{key:"measureAllRows",value:o(function(){this.Grid&&this.Grid.measureAllCells()},"measureAllRows")},{key:"recomputeGridSize",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},X=A.columnIndex,se=X===void 0?0:X,oe=A.rowIndex,ve=oe===void 0?0:oe;this.Grid&&this.Grid.recomputeGridSize({rowIndex:ve,columnIndex:se})},"recomputeGridSize")},{key:"recomputeRowHeights",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:A})},"recomputeRowHeights")},{key:"scrollToPosition",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:A})},"scrollToPosition")},{key:"scrollToRow",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:A})},"scrollToRow")},{key:"getScrollbarWidth",value:o(function(){if(this.Grid){var A=Object(Zi.findDOMNode)(this.Grid),X=A.clientWidth||0,se=A.offsetWidth||0;return se-X}return 0},"getScrollbarWidth")},{key:"componentDidMount",value:o(function(){this._setScrollbarWidth()},"componentDidMount")},{key:"componentDidUpdate",value:o(function(){this._setScrollbarWidth()},"componentDidUpdate")},{key:"render",value:o(function(){var A=this,X=this.props,se=X.children,oe=X.className,ve=X.disableHeader,Ie=X.gridClassName,Ae=X.gridStyle,ke=X.headerHeight,De=X.headerRowRenderer,Ge=X.height,Xe=X.id,ut=X.noRowsRenderer,Ze=X.rowClassName,Zt=X.rowStyle,rn=X.scrollToIndex,Tn=X.style,Pn=X.width,qn=this.state.scrollbarWidth,Kn=ve?Ge:Ge-ke,ti=typeof Ze=="function"?Ze({index:-1}):Ze,ei=typeof Zt=="function"?Zt({index:-1}):Zt;return this._cachedColumnStyles=[],d.Children.toArray(se).forEach(function(wi,ki){var ci=A._getFlexStyleForColumn(wi,wi.props.style);A._cachedColumnStyles[ki]=Mo({overflow:"hidden"},ci)}),d.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":d.Children.toArray(se).length,"aria-rowcount":this.props.rowCount,className:F("ReactVirtualized__Table",oe),id:Xe,role:"grid",style:Tn},!ve&&De({className:F("ReactVirtualized__Table__headerRow",ti),columns:this._getHeaderColumns(),style:Mo({height:ke,overflow:"hidden",paddingRight:qn,width:Pn},ei)}),d.createElement(vt,w()({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:F("ReactVirtualized__Table__Grid",Ie),cellRenderer:this._createRow,columnWidth:Pn,columnCount:1,height:Kn,id:void 0,noContentRenderer:ut,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:qn,scrollToRow:rn,style:Mo({},Ae,{overflowX:"hidden"})})))},"render")},{key:"_createColumn",value:o(function(A){var X=A.column,se=A.columnIndex,oe=A.isScrolling,ve=A.parent,Ie=A.rowData,Ae=A.rowIndex,ke=this.props.onColumnClick,De=X.props,Ge=De.cellDataGetter,Xe=De.cellRenderer,ut=De.className,Ze=De.columnData,Zt=De.dataKey,rn=De.id,Tn=Ge({columnData:Ze,dataKey:Zt,rowData:Ie}),Pn=Xe({cellData:Tn,columnData:Ze,columnIndex:se,dataKey:Zt,isScrolling:oe,parent:ve,rowData:Ie,rowIndex:Ae}),qn=o(function(wi){ke&&ke({columnData:Ze,dataKey:Zt,event:wi})},"onClick"),Kn=this._cachedColumnStyles[se],ti=typeof Pn=="string"?Pn:null;return d.createElement("div",{"aria-colindex":se+1,"aria-describedby":rn,className:F("ReactVirtualized__Table__rowColumn",ut),key:"Row"+Ae+"-Col"+se,onClick:qn,role:"gridcell",style:Kn,title:ti},Pn)},"_createColumn")},{key:"_createHeader",value:o(function(A){var X=A.column,se=A.index,oe=this.props,ve=oe.headerClassName,Ie=oe.headerStyle,Ae=oe.onHeaderClick,ke=oe.sort,De=oe.sortBy,Ge=oe.sortDirection,Xe=X.props,ut=Xe.columnData,Ze=Xe.dataKey,Zt=Xe.defaultSortDirection,rn=Xe.disableSort,Tn=Xe.headerRenderer,Pn=Xe.id,qn=Xe.label,Kn=!rn&&ke,ti=F("ReactVirtualized__Table__headerColumn",ve,X.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:Kn}),ei=this._getFlexStyleForColumn(X,Mo({},Ie,{},X.props.headerStyle)),wi=Tn({columnData:ut,dataKey:Ze,disableSort:rn,label:qn,sortBy:De,sortDirection:Ge}),ki,ci,yi,or,Mi;if(Kn||Ae){var Wi=De!==Ze,Kr=Wi?Zt:Ge===Zr.DESC?Zr.ASC:Zr.DESC,vo=o(function(Jt){Kn&&ke({defaultSortDirection:Zt,event:Jt,sortBy:Ze,sortDirection:Kr}),Ae&&Ae({columnData:ut,dataKey:Ze,event:Jt})},"onClick"),yr=o(function(Jt){(Jt.key==="Enter"||Jt.key===" ")&&vo(Jt)},"onKeyDown");Mi=X.props["aria-label"]||qn||Ze,or="none",yi=0,ki=vo,ci=yr}return De===Ze&&(or=Ge===Zr.ASC?"ascending":"descending"),d.createElement("div",{"aria-label":Mi,"aria-sort":or,className:ti,id:Pn,key:"Header-Col"+se,onClick:ki,onKeyDown:ci,role:"columnheader",style:ei,tabIndex:yi},wi)},"_createHeader")},{key:"_createRow",value:o(function(A){var X=this,se=A.rowIndex,oe=A.isScrolling,ve=A.key,Ie=A.parent,Ae=A.style,ke=this.props,De=ke.children,Ge=ke.onRowClick,Xe=ke.onRowDoubleClick,ut=ke.onRowRightClick,Ze=ke.onRowMouseOver,Zt=ke.onRowMouseOut,rn=ke.rowClassName,Tn=ke.rowGetter,Pn=ke.rowRenderer,qn=ke.rowStyle,Kn=this.state.scrollbarWidth,ti=typeof rn=="function"?rn({index:se}):rn,ei=typeof qn=="function"?qn({index:se}):qn,wi=Tn({index:se}),ki=d.Children.toArray(De).map(function(or,Mi){return X._createColumn({column:or,columnIndex:Mi,isScrolling:oe,parent:Ie,rowData:wi,rowIndex:se,scrollbarWidth:Kn})}),ci=F("ReactVirtualized__Table__row",ti),yi=Mo({},Ae,{height:this._getRowHeight(se),overflow:"hidden",paddingRight:Kn},ei);return Pn({className:ci,columns:ki,index:se,isScrolling:oe,key:ve,onRowClick:Ge,onRowDoubleClick:Xe,onRowRightClick:ut,onRowMouseOver:Ze,onRowMouseOut:Zt,rowData:wi,style:yi})},"_createRow")},{key:"_getFlexStyleForColumn",value:o(function(A){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se="".concat(A.props.flexGrow," ").concat(A.props.flexShrink," ").concat(A.props.width,"px"),oe=Mo({},X,{flex:se,msFlex:se,WebkitFlex:se});return A.props.maxWidth&&(oe.maxWidth=A.props.maxWidth),A.props.minWidth&&(oe.minWidth=A.props.minWidth),oe},"_getFlexStyleForColumn")},{key:"_getHeaderColumns",value:o(function(){var A=this,X=this.props,se=X.children,oe=X.disableHeader,ve=oe?[]:d.Children.toArray(se);return ve.map(function(Ie,Ae){return A._createHeader({column:Ie,index:Ae})})},"_getHeaderColumns")},{key:"_getRowHeight",value:o(function(A){var X=this.props.rowHeight;return typeof X=="function"?X({index:A}):X},"_getRowHeight")},{key:"_onScroll",value:o(function(A){var X=A.clientHeight,se=A.scrollHeight,oe=A.scrollTop,ve=this.props.onScroll;ve({clientHeight:X,scrollHeight:se,scrollTop:oe})},"_onScroll")},{key:"_onSectionRendered",value:o(function(A){var X=A.rowOverscanStartIndex,se=A.rowOverscanStopIndex,oe=A.rowStartIndex,ve=A.rowStopIndex,Ie=this.props.onRowsRendered;Ie({overscanStartIndex:X,overscanStopIndex:se,startIndex:oe,stopIndex:ve})},"_onSectionRendered")},{key:"_setRef",value:o(function(A){this.Grid=A},"_setRef")},{key:"_setScrollbarWidth",value:o(function(){var A=this.getScrollbarWidth();this.setState({scrollbarWidth:A})},"_setScrollbarWidth")}]),te}(d.PureComponent);g()(Rs,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:o(function(){return null},"noRowsRenderer"),onRowsRendered:o(function(){return null},"onRowsRendered"),onScroll:o(function(){return null},"onScroll"),overscanIndicesGetter:Bt,overscanRowCount:10,rowRenderer:cs,headerRowRenderer:ls,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),Rs.propTypes={};var Ko=Rs,$i=[],Ms=null,Po=null;function Ni(){Po&&(Po=null,document.body&&Ms!=null&&(document.body.style.pointerEvents=Ms),Ms=null)}o(Ni,"enablePointerEventsIfDisabled");function $s(){Ni(),$i.forEach(function(ne){return ne.__resetIsScrolling()})}o($s,"enablePointerEventsAfterDelayCallback");function Jo(){Po&&er(Po);var ne=0;$i.forEach(function(te){ne=Math.max(ne,te.props.scrollingResetTimeInterval)}),Po=cr($s,ne)}o(Jo,"enablePointerEventsAfterDelay");function So(ne){ne.currentTarget===window&&Ms==null&&document.body&&(Ms=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),Jo(),$i.forEach(function(te){te.props.scrollElement===ne.currentTarget&&te.__handleWindowScrollEvent()})}o(So,"onScrollWindow");function hr(ne,te){$i.some(function(Q){return Q.props.scrollElement===te})||te.addEventListener("scroll",So),$i.push(ne)}o(hr,"registerScrollListener");function Ks(ne,te){$i=$i.filter(function(Q){return Q!==ne}),$i.length||(te.removeEventListener("scroll",So),Po&&(er(Po),Ni()))}o(Ks,"unregisterScrollListener");var us=o(function(te){return te===window},"isWindow"),Yo=o(function(te){return te.getBoundingClientRect()},"getBoundingBox");function fs(ne,te){if(ne)if(us(ne)){var Q=window,A=Q.innerHeight,X=Q.innerWidth;return{height:typeof A=="number"?A:0,width:typeof X=="number"?X:0}}else return Yo(ne);else return{height:te.serverHeight,width:te.serverWidth}}o(fs,"getDimensions");function Js(ne,te){if(us(te)&&document.documentElement){var Q=document.documentElement,A=Yo(ne),X=Yo(Q);return{top:A.top-X.top,left:A.left-X.left}}else{var se=Ys(te),oe=Yo(ne),ve=Yo(te);return{top:oe.top+se.top-ve.top,left:oe.left+se.left-ve.left}}}o(Js,"getPositionOffset");function Ys(ne){return us(ne)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:ne.scrollTop,left:ne.scrollLeft}}o(Ys,"getScrollOffset");var Xs,Qs;function Ps(ne,te){var Q=Object.keys(ne);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(ne);te&&(A=A.filter(function(X){return Object.getOwnPropertyDescriptor(ne,X).enumerable})),Q.push.apply(Q,A)}return Q}o(Ps,"WindowScroller_ownKeys");function la(ne){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?Ps(Q,!0).forEach(function(A){g()(ne,A,Q[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(Q)):Ps(Q).forEach(function(A){Object.defineProperty(ne,A,Object.getOwnPropertyDescriptor(Q,A))})}return ne}o(la,"WindowScroller_objectSpread");var Xo=150,rr=o(function(){return typeof window<"u"?window:void 0},"getWindow"),Ao=(Qs=Xs=function(ne){c()(te,ne);function te(){var Q,A;h()(this,te);for(var X=arguments.length,se=new Array(X),oe=0;oe<X;oe++)se[oe]=arguments[oe];return A=s()(this,(Q=e()(te)).call.apply(Q,[this].concat(se))),g()(n()(A),"_window",rr()),g()(n()(A),"_isMounted",!1),g()(n()(A),"_positionFromTop",0),g()(n()(A),"_positionFromLeft",0),g()(n()(A),"_detectElementResize",void 0),g()(n()(A),"_child",void 0),g()(n()(A),"state",la({},fs(A.props.scrollElement,A.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),g()(n()(A),"_registerChild",function(ve){ve&&!(ve instanceof Element)&&console.warn("WindowScroller registerChild expects to be passed Element or null"),A._child=ve,A.updatePosition()}),g()(n()(A),"_onChildScroll",function(ve){var Ie=ve.scrollTop;if(A.state.scrollTop!==Ie){var Ae=A.props.scrollElement;Ae&&(typeof Ae.scrollTo=="function"?Ae.scrollTo(0,Ie+A._positionFromTop):Ae.scrollTop=Ie+A._positionFromTop)}}),g()(n()(A),"_registerResizeListener",function(ve){ve===window?window.addEventListener("resize",A._onResize,!1):A._detectElementResize.addResizeListener(ve,A._onResize)}),g()(n()(A),"_unregisterResizeListener",function(ve){ve===window?window.removeEventListener("resize",A._onResize,!1):ve&&A._detectElementResize.removeResizeListener(ve,A._onResize)}),g()(n()(A),"_onResize",function(){A.updatePosition()}),g()(n()(A),"__handleWindowScrollEvent",function(){if(A._isMounted){var ve=A.props.onScroll,Ie=A.props.scrollElement;if(Ie){var Ae=Ys(Ie),ke=Math.max(0,Ae.left-A._positionFromLeft),De=Math.max(0,Ae.top-A._positionFromTop);A.setState({isScrolling:!0,scrollLeft:ke,scrollTop:De}),ve({scrollLeft:ke,scrollTop:De})}}}),g()(n()(A),"__resetIsScrolling",function(){A.setState({isScrolling:!1})}),A}return o(te,"WindowScroller"),m()(te,[{key:"updatePosition",value:o(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollElement,X=this.props.onResize,se=this.state,oe=se.height,ve=se.width,Ie=this._child||Zi.findDOMNode(this);if(Ie instanceof Element&&A){var Ae=Js(Ie,A);this._positionFromTop=Ae.top,this._positionFromLeft=Ae.left}var ke=fs(A,this.props);(oe!==ke.height||ve!==ke.width)&&(this.setState({height:ke.height,width:ke.width}),X({height:ke.height,width:ke.width}))},"updatePosition")},{key:"componentDidMount",value:o(function(){var A=this.props.scrollElement;this._detectElementResize=Object(lr.a)(),this.updatePosition(A),A&&(hr(this,A),this._registerResizeListener(A)),this._isMounted=!0},"componentDidMount")},{key:"componentDidUpdate",value:o(function(A,X){var se=this.props.scrollElement,oe=A.scrollElement;oe!==se&&oe!=null&&se!=null&&(this.updatePosition(se),Ks(this,oe),hr(this,se),this._unregisterResizeListener(oe),this._registerResizeListener(se))},"componentDidUpdate")},{key:"componentWillUnmount",value:o(function(){var A=this.props.scrollElement;A&&(Ks(this,A),this._unregisterResizeListener(A)),this._isMounted=!1},"componentWillUnmount")},{key:"render",value:o(function(){var A=this.props.children,X=this.state,se=X.isScrolling,oe=X.scrollTop,ve=X.scrollLeft,Ie=X.height,Ae=X.width;return A({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:Ie,isScrolling:se,scrollLeft:ve,scrollTop:oe,width:Ae})},"render")}]),te}(d.PureComponent),g()(Xs,"propTypes",null),Qs);g()(Ao,"defaultProps",{onResize:o(function(){},"onResize"),onScroll:o(function(){},"onScroll"),scrollingResetTimeInterval:Xo,scrollElement:rr(),serverHeight:0,serverWidth:0});var hs=Ao},cKqT:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{reset(){this.currentRetry=0}nextBackoffAmountMs(){const u=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,u}constructor(u,m,a){this.fixedWaitMs=u,this.shortBackoffMs=m,this.longBackoffMs=a,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}},"FullJitterBackoff");l.default=S},cYl2:function(j,l,f){"use strict";f.r(l),f.d(l,"Deflate",function(){return Fa}),f.d(l,"Inflate",function(){return pr}),f.d(l,"constants",function(){return Wa}),f.d(l,"default",function(){return ja}),f.d(l,"deflate",function(){return Va}),f.d(l,"deflateRaw",function(){return Ua}),f.d(l,"gzip",function(){return Cl}),f.d(l,"inflate",function(){return As}),f.d(l,"inflateRaw",function(){return Ha}),f.d(l,"ungzip",function(){return za});/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const S=4,h=0,u=1,m=2;function a(C){let U=C.length;for(;--U>=0;)C[U]=0}o(a,"zero$1");const s=0,i=1,e=2,t=3,n=258,r=29,c=256,p=c+1+r,g=30,d=19,y=2*p+1,E=15,w=16,k=7,V=256,F=16,N=17,P=18,x=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J=512,q=new Array((p+2)*2);a(q);const $=new Array(g*2);a($);const de=new Array(J);a(de);const Ee=new Array(n-t+1);a(Ee);const _e=new Array(r);a(_e);const ye=new Array(g);a(ye);function Be(C,U,R,Y,G){this.static_tree=C,this.extra_bits=U,this.extra_base=R,this.elems=Y,this.max_length=G,this.has_stree=C&&C.length}o(Be,"StaticTreeDesc");let pt,Ve,gt;function dt(C,U){this.dyn_tree=C,this.max_code=0,this.stat_desc=U}o(dt,"TreeDesc");const Je=o(C=>C<256?de[C]:de[256+(C>>>7)],"d_code"),_t=o((C,U)=>{C.pending_buf[C.pending++]=U&255,C.pending_buf[C.pending++]=U>>>8&255},"put_short"),ot=o((C,U,R)=>{C.bi_valid>w-R?(C.bi_buf|=U<<C.bi_valid&65535,_t(C,C.bi_buf),C.bi_buf=U>>w-C.bi_valid,C.bi_valid+=R-w):(C.bi_buf|=U<<C.bi_valid&65535,C.bi_valid+=R)},"send_bits"),Et=o((C,U,R)=>{ot(C,R[U*2],R[U*2+1])},"send_code"),Mt=o((C,U)=>{let R=0;do R|=C&1,C>>>=1,R<<=1;while(--U>0);return R>>>1},"bi_reverse"),ze=o(C=>{C.bi_valid===16?(_t(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):C.bi_valid>=8&&(C.pending_buf[C.pending++]=C.bi_buf&255,C.bi_buf>>=8,C.bi_valid-=8)},"bi_flush"),$t=o((C,U)=>{const R=U.dyn_tree,Y=U.max_code,G=U.stat_desc.static_tree,re=U.stat_desc.has_stree,Ce=U.stat_desc.extra_bits,ge=U.stat_desc.extra_base,et=U.stat_desc.max_length;let he,Te,tn,Qe,Ne,It,Wn=0;for(Qe=0;Qe<=E;Qe++)C.bl_count[Qe]=0;for(R[C.heap[C.heap_max]*2+1]=0,he=C.heap_max+1;he<y;he++)Te=C.heap[he],Qe=R[R[Te*2+1]*2+1]+1,Qe>et&&(Qe=et,Wn++),R[Te*2+1]=Qe,!(Te>Y)&&(C.bl_count[Qe]++,Ne=0,Te>=ge&&(Ne=Ce[Te-ge]),It=R[Te*2],C.opt_len+=It*(Qe+Ne),re&&(C.static_len+=It*(G[Te*2+1]+Ne)));if(Wn!==0){do{for(Qe=et-1;C.bl_count[Qe]===0;)Qe--;C.bl_count[Qe]--,C.bl_count[Qe+1]+=2,C.bl_count[et]--,Wn-=2}while(Wn>0);for(Qe=et;Qe!==0;Qe--)for(Te=C.bl_count[Qe];Te!==0;)tn=C.heap[--he],!(tn>Y)&&(R[tn*2+1]!==Qe&&(C.opt_len+=(Qe-R[tn*2+1])*R[tn*2],R[tn*2+1]=Qe),Te--)}},"gen_bitlen"),Un=o((C,U,R)=>{const Y=new Array(E+1);let G=0,re,Ce;for(re=1;re<=E;re++)Y[re]=G=G+R[re-1]<<1;for(Ce=0;Ce<=U;Ce++){let ge=C[Ce*2+1];ge!==0&&(C[Ce*2]=Mt(Y[ge]++,ge))}},"gen_codes"),ni=o(()=>{let C,U,R,Y,G;const re=new Array(E+1);for(R=0,Y=0;Y<r-1;Y++)for(_e[Y]=R,C=0;C<1<<x[Y];C++)Ee[R++]=Y;for(Ee[R-1]=Y,G=0,Y=0;Y<16;Y++)for(ye[Y]=G,C=0;C<1<<O[Y];C++)de[G++]=Y;for(G>>=7;Y<g;Y++)for(ye[Y]=G<<7,C=0;C<1<<O[Y]-7;C++)de[256+G++]=Y;for(U=0;U<=E;U++)re[U]=0;for(C=0;C<=143;)q[C*2+1]=8,C++,re[8]++;for(;C<=255;)q[C*2+1]=9,C++,re[9]++;for(;C<=279;)q[C*2+1]=7,C++,re[7]++;for(;C<=287;)q[C*2+1]=8,C++,re[8]++;for(Un(q,p+1,re),C=0;C<g;C++)$[C*2+1]=5,$[C*2]=Mt(C,5);pt=new Be(q,x,c+1,p,E),Ve=new Be($,O,0,g,E),gt=new Be(new Array(0),M,0,d,k)},"tr_static_init"),an=o(C=>{let U;for(U=0;U<p;U++)C.dyn_ltree[U*2]=0;for(U=0;U<g;U++)C.dyn_dtree[U*2]=0;for(U=0;U<d;U++)C.bl_tree[U*2]=0;C.dyn_ltree[V*2]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0},"init_block"),Gn=o(C=>{C.bi_valid>8?_t(C,C.bi_buf):C.bi_valid>0&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0},"bi_windup"),si=o((C,U,R,Y)=>{Gn(C),Y&&(_t(C,R),_t(C,~R)),C.pending_buf.set(C.window.subarray(U,U+R),C.pending),C.pending+=R},"copy_block"),ri=o((C,U,R,Y)=>{const G=U*2,re=R*2;return C[G]<C[re]||C[G]===C[re]&&Y[U]<=Y[R]},"smaller"),On=o((C,U,R)=>{const Y=C.heap[R];let G=R<<1;for(;G<=C.heap_len&&(G<C.heap_len&&ri(U,C.heap[G+1],C.heap[G],C.depth)&&G++,!ri(U,Y,C.heap[G],C.depth));)C.heap[R]=C.heap[G],R=G,G<<=1;C.heap[R]=Y},"pqdownheap"),Gi=o((C,U,R)=>{let Y,G,re=0,Ce,ge;if(C.last_lit!==0)do Y=C.pending_buf[C.d_buf+re*2]<<8|C.pending_buf[C.d_buf+re*2+1],G=C.pending_buf[C.l_buf+re],re++,Y===0?Et(C,G,U):(Ce=Ee[G],Et(C,Ce+c+1,U),ge=x[Ce],ge!==0&&(G-=_e[Ce],ot(C,G,ge)),Y--,Ce=Je(Y),Et(C,Ce,R),ge=O[Ce],ge!==0&&(Y-=ye[Ce],ot(C,Y,ge)));while(re<C.last_lit);Et(C,V,U)},"compress_block"),ui=o((C,U)=>{const R=U.dyn_tree,Y=U.stat_desc.static_tree,G=U.stat_desc.has_stree,re=U.stat_desc.elems;let Ce,ge,et=-1,he;for(C.heap_len=0,C.heap_max=y,Ce=0;Ce<re;Ce++)R[Ce*2]!==0?(C.heap[++C.heap_len]=et=Ce,C.depth[Ce]=0):R[Ce*2+1]=0;for(;C.heap_len<2;)he=C.heap[++C.heap_len]=et<2?++et:0,R[he*2]=1,C.depth[he]=0,C.opt_len--,G&&(C.static_len-=Y[he*2+1]);for(U.max_code=et,Ce=C.heap_len>>1;Ce>=1;Ce--)On(C,R,Ce);he=re;do Ce=C.heap[1],C.heap[1]=C.heap[C.heap_len--],On(C,R,1),ge=C.heap[1],C.heap[--C.heap_max]=Ce,C.heap[--C.heap_max]=ge,R[he*2]=R[Ce*2]+R[ge*2],C.depth[he]=(C.depth[Ce]>=C.depth[ge]?C.depth[Ce]:C.depth[ge])+1,R[Ce*2+1]=R[ge*2+1]=he,C.heap[1]=he++,On(C,R,1);while(C.heap_len>=2);C.heap[--C.heap_max]=C.heap[1],$t(C,U),Un(R,et,C.bl_count)},"build_tree"),Fi=o((C,U,R)=>{let Y,G=-1,re,Ce=U[0*2+1],ge=0,et=7,he=4;for(Ce===0&&(et=138,he=3),U[(R+1)*2+1]=65535,Y=0;Y<=R;Y++)re=Ce,Ce=U[(Y+1)*2+1],!(++ge<et&&re===Ce)&&(ge<he?C.bl_tree[re*2]+=ge:re!==0?(re!==G&&C.bl_tree[re*2]++,C.bl_tree[F*2]++):ge<=10?C.bl_tree[N*2]++:C.bl_tree[P*2]++,ge=0,G=re,Ce===0?(et=138,he=3):re===Ce?(et=6,he=3):(et=7,he=4))},"scan_tree"),Hi=o((C,U,R)=>{let Y,G=-1,re,Ce=U[0*2+1],ge=0,et=7,he=4;for(Ce===0&&(et=138,he=3),Y=0;Y<=R;Y++)if(re=Ce,Ce=U[(Y+1)*2+1],!(++ge<et&&re===Ce)){if(ge<he)do Et(C,re,C.bl_tree);while(--ge!==0);else re!==0?(re!==G&&(Et(C,re,C.bl_tree),ge--),Et(C,F,C.bl_tree),ot(C,ge-3,2)):ge<=10?(Et(C,N,C.bl_tree),ot(C,ge-3,3)):(Et(C,P,C.bl_tree),ot(C,ge-11,7));ge=0,G=re,Ce===0?(et=138,he=3):re===Ce?(et=6,he=3):(et=7,he=4)}},"send_tree"),Sn=o(C=>{let U;for(Fi(C,C.dyn_ltree,C.l_desc.max_code),Fi(C,C.dyn_dtree,C.d_desc.max_code),ui(C,C.bl_desc),U=d-1;U>=3&&C.bl_tree[D[U]*2+1]===0;U--);return C.opt_len+=3*(U+1)+5+5+4,U},"build_bl_tree"),un=o((C,U,R,Y)=>{let G;for(ot(C,U-257,5),ot(C,R-1,5),ot(C,Y-4,4),G=0;G<Y;G++)ot(C,C.bl_tree[D[G]*2+1],3);Hi(C,C.dyn_ltree,U-1),Hi(C,C.dyn_dtree,R-1)},"send_all_trees"),bn=o(C=>{let U=4093624447,R;for(R=0;R<=31;R++,U>>>=1)if(U&1&&C.dyn_ltree[R*2]!==0)return h;if(C.dyn_ltree[9*2]!==0||C.dyn_ltree[10*2]!==0||C.dyn_ltree[13*2]!==0)return u;for(R=32;R<c;R++)if(C.dyn_ltree[R*2]!==0)return u;return h},"detect_data_type");let Ot=!1;const En=o(C=>{Ot||(ni(),Ot=!0),C.l_desc=new dt(C.dyn_ltree,pt),C.d_desc=new dt(C.dyn_dtree,Ve),C.bl_desc=new dt(C.bl_tree,gt),C.bi_buf=0,C.bi_valid=0,an(C)},"_tr_init$1"),Lt=o((C,U,R,Y)=>{ot(C,(s<<1)+(Y?1:0),3),si(C,U,R,!0)},"_tr_stored_block$1"),Hn=o(C=>{ot(C,i<<1,3),Et(C,V,q),ze(C)},"_tr_align$1"),Ji=o((C,U,R,Y)=>{let G,re,Ce=0;C.level>0?(C.strm.data_type===m&&(C.strm.data_type=bn(C)),ui(C,C.l_desc),ui(C,C.d_desc),Ce=Sn(C),G=C.opt_len+3+7>>>3,re=C.static_len+3+7>>>3,re<=G&&(G=re)):G=re=R+5,R+4<=G&&U!==-1?Lt(C,U,R,Y):C.strategy===S||re===G?(ot(C,(i<<1)+(Y?1:0),3),Gi(C,q,$)):(ot(C,(e<<1)+(Y?1:0),3),un(C,C.l_desc.max_code+1,C.d_desc.max_code+1,Ce+1),Gi(C,C.dyn_ltree,C.dyn_dtree)),an(C),Y&&Gn(C)},"_tr_flush_block$1"),$n=o((C,U,R)=>(C.pending_buf[C.d_buf+C.last_lit*2]=U>>>8&255,C.pending_buf[C.d_buf+C.last_lit*2+1]=U&255,C.pending_buf[C.l_buf+C.last_lit]=R&255,C.last_lit++,U===0?C.dyn_ltree[R*2]++:(C.matches++,U--,C.dyn_ltree[(Ee[R]+c+1)*2]++,C.dyn_dtree[Je(U)*2]++),C.last_lit===C.lit_bufsize-1),"_tr_tally$1");var Ti=En,Ir=Lt,er=Ji,cr=$n,gi=Hn,Yi={_tr_init:Ti,_tr_stored_block:Ir,_tr_flush_block:er,_tr_tally:cr,_tr_align:gi},jt=o((C,U,R,Y)=>{let G=C&65535|0,re=C>>>16&65535|0,Ce=0;for(;R!==0;){Ce=R>2e3?2e3:R,R-=Ce;do G=G+U[Y++]|0,re=re+G|0;while(--Ce);G%=65521,re%=65521}return G|re<<16|0},"adler32");const pe=o(()=>{let C,U=[];for(var R=0;R<256;R++){C=R;for(var Y=0;Y<8;Y++)C=C&1?3988292384^C>>>1:C>>>1;U[R]=C}return U},"makeTable"),Re=new Uint32Array(pe());var qe=o((C,U,R,Y)=>{const G=Re,re=Y+R;C^=-1;for(let Ce=Y;Ce<re;Ce++)C=C>>>8^G[(C^U[Ce])&255];return C^-1},"crc32"),vt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},lt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Nt,_tr_stored_block:ln,_tr_flush_block:fn,_tr_tally:Bt,_tr_align:Ci}=Yi,{Z_NO_FLUSH:Si,Z_PARTIAL_FLUSH:gr,Z_FULL_FLUSH:tr,Z_FINISH:ai,Z_BLOCK:wr,Z_OK:li,Z_STREAM_END:lr,Z_STREAM_ERROR:Zn,Z_DATA_ERROR:Or,Z_BUF_ERROR:Qi,Z_DEFAULT_COMPRESSION:zr,Z_FILTERED:_r,Z_HUFFMAN_ONLY:Zi,Z_RLE:ro,Z_FIXED:yt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:dn,Z_DEFLATED:Kt}=lt,wn=9,Jn=15,z=8,ue=29,Le=256+1+ue,Ye=30,St=19,Ct=2*Le+1,Tt=15,Ke=3,Pt=258,Dt=Pt+Ke+1,Rn=32,pn=42,zn=69,di=73,Ri=91,Pi=103,fi=113,hi=666,Cn=1,zi=2,Vi=3,Ui=4,Rr=3,Ii=o((C,U)=>(C.msg=vt[U],U),"err"),Sr=o(C=>(C<<1)-(C>4?9:0),"rank"),Xn=o(C=>{let U=C.length;for(;--U>=0;)C[U]=0},"zero");let pi=o((C,U,R)=>(U<<C.hash_shift^R)&C.hash_mask,"HASH_ZLIB");const _i=o(C=>{const U=C.state;let R=U.pending;R>C.avail_out&&(R=C.avail_out),R!==0&&(C.output.set(U.pending_buf.subarray(U.pending_out,U.pending_out+R),C.next_out),C.next_out+=R,U.pending_out+=R,C.total_out+=R,C.avail_out-=R,U.pending-=R,U.pending===0&&(U.pending_out=0))},"flush_pending"),Yn=o((C,U)=>{fn(C,C.block_start>=0?C.block_start:-1,C.strstart-C.block_start,U),C.block_start=C.strstart,_i(C.strm)},"flush_block_only"),Ht=o((C,U)=>{C.pending_buf[C.pending++]=U},"put_byte"),nr=o((C,U)=>{C.pending_buf[C.pending++]=U>>>8&255,C.pending_buf[C.pending++]=U&255},"putShortMSB"),Fs=o((C,U,R,Y)=>{let G=C.avail_in;return G>Y&&(G=Y),G===0?0:(C.avail_in-=G,U.set(C.input.subarray(C.next_in,C.next_in+G),R),C.state.wrap===1?C.adler=jt(C.adler,U,G,R):C.state.wrap===2&&(C.adler=qe(C.adler,U,G,R)),C.next_in+=G,C.total_in+=G,G)},"read_buf"),qr=o((C,U)=>{let R=C.max_chain_length,Y=C.strstart,G,re,Ce=C.prev_length,ge=C.nice_match;const et=C.strstart>C.w_size-Dt?C.strstart-(C.w_size-Dt):0,he=C.window,Te=C.w_mask,tn=C.prev,Qe=C.strstart+Pt;let Ne=he[Y+Ce-1],It=he[Y+Ce];C.prev_length>=C.good_match&&(R>>=2),ge>C.lookahead&&(ge=C.lookahead);do if(G=U,!(he[G+Ce]!==It||he[G+Ce-1]!==Ne||he[G]!==he[Y]||he[++G]!==he[Y+1])){Y+=2,G++;do;while(he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&Y<Qe);if(re=Pt-(Qe-Y),Y=Qe-Pt,re>Ce){if(C.match_start=U,Ce=re,re>=ge)break;Ne=he[Y+Ce-1],It=he[Y+Ce]}}while((U=tn[U&Te])>et&&--R!==0);return Ce<=C.lookahead?Ce:C.lookahead},"longest_match"),dr=o(C=>{const U=C.w_size;let R,Y,G,re,Ce;do{if(re=C.window_size-C.lookahead-C.strstart,C.strstart>=U+(U-Dt)){C.window.set(C.window.subarray(U,U+U),0),C.match_start-=U,C.strstart-=U,C.block_start-=U,Y=C.hash_size,R=Y;do G=C.head[--R],C.head[R]=G>=U?G-U:0;while(--Y);Y=U,R=Y;do G=C.prev[--R],C.prev[R]=G>=U?G-U:0;while(--Y);re+=U}if(C.strm.avail_in===0)break;if(Y=Fs(C.strm,C.window,C.strstart+C.lookahead,re),C.lookahead+=Y,C.lookahead+C.insert>=Ke)for(Ce=C.strstart-C.insert,C.ins_h=C.window[Ce],C.ins_h=pi(C,C.ins_h,C.window[Ce+1]);C.insert&&(C.ins_h=pi(C,C.ins_h,C.window[Ce+Ke-1]),C.prev[Ce&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=Ce,Ce++,C.insert--,!(C.lookahead+C.insert<Ke)););}while(C.lookahead<Dt&&C.strm.avail_in!==0)},"fill_window"),eo=o((C,U)=>{let R=65535;for(R>C.pending_buf_size-5&&(R=C.pending_buf_size-5);;){if(C.lookahead<=1){if(dr(C),C.lookahead===0&&U===Si)return Cn;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;const Y=C.block_start+R;if((C.strstart===0||C.strstart>=Y)&&(C.lookahead=C.strstart-Y,C.strstart=Y,Yn(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-Dt&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=0,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):(C.strstart>C.block_start&&(Yn(C,!1),C.strm.avail_out===0),Cn)},"deflate_stored"),to=o((C,U)=>{let R,Y;for(;;){if(C.lookahead<Dt){if(dr(C),C.lookahead<Dt&&U===Si)return Cn;if(C.lookahead===0)break}if(R=0,C.lookahead>=Ke&&(C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),R!==0&&C.strstart-R<=C.w_size-Dt&&(C.match_length=qr(C,R)),C.match_length>=Ke)if(Y=Bt(C,C.strstart-C.match_start,C.match_length-Ke),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=Ke){C.match_length--;do C.strstart++,C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart;while(--C.match_length!==0);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=pi(C,C.ins_h,C.window[C.strstart+1]);else Y=Bt(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(Y&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=C.strstart<Ke-1?C.strstart:Ke-1,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_fast"),ur=o((C,U)=>{let R,Y,G;for(;;){if(C.lookahead<Dt){if(dr(C),C.lookahead<Dt&&U===Si)return Cn;if(C.lookahead===0)break}if(R=0,C.lookahead>=Ke&&(C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=Ke-1,R!==0&&C.prev_length<C.max_lazy_match&&C.strstart-R<=C.w_size-Dt&&(C.match_length=qr(C,R),C.match_length<=5&&(C.strategy===_r||C.match_length===Ke&&C.strstart-C.match_start>4096)&&(C.match_length=Ke-1)),C.prev_length>=Ke&&C.match_length<=C.prev_length){G=C.strstart+C.lookahead-Ke,Y=Bt(C,C.strstart-1-C.prev_match,C.prev_length-Ke),C.lookahead-=C.prev_length-1,C.prev_length-=2;do++C.strstart<=G&&(C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart);while(--C.prev_length!==0);if(C.match_available=0,C.match_length=Ke-1,C.strstart++,Y&&(Yn(C,!1),C.strm.avail_out===0))return Cn}else if(C.match_available){if(Y=Bt(C,0,C.window[C.strstart-1]),Y&&Yn(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return Cn}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(Y=Bt(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<Ke-1?C.strstart:Ke-1,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_slow"),Vs=o((C,U)=>{let R,Y,G,re;const Ce=C.window;for(;;){if(C.lookahead<=Pt){if(dr(C),C.lookahead<=Pt&&U===Si)return Cn;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=Ke&&C.strstart>0&&(G=C.strstart-1,Y=Ce[G],Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G])){re=C.strstart+Pt;do;while(Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&G<re);C.match_length=Pt-(re-G),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=Ke?(R=Bt(C,1,C.match_length-Ke),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(R=Bt(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),R&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=0,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_rle"),Us=o((C,U)=>{let R;for(;;){if(C.lookahead===0&&(dr(C),C.lookahead===0)){if(U===Si)return Cn;break}if(C.match_length=0,R=Bt(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,R&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=0,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_huff");function Li(C,U,R,Y,G){this.good_length=C,this.max_lazy=U,this.nice_length=R,this.max_chain=Y,this.func=G}o(Li,"Config");const kr=[new Li(0,0,0,0,eo),new Li(4,4,8,4,to),new Li(4,5,16,8,to),new Li(4,6,32,32,to),new Li(4,4,16,16,ur),new Li(8,16,32,32,ur),new Li(8,16,128,128,ur),new Li(8,32,128,256,ur),new Li(32,128,258,1024,ur),new Li(32,258,258,4096,ur)],xo=o(C=>{C.window_size=2*C.w_size,Xn(C.head),C.max_lazy_match=kr[C.level].max_lazy,C.good_match=kr[C.level].good_length,C.nice_match=kr[C.level].nice_length,C.max_chain_length=kr[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=Ke-1,C.match_available=0,C.ins_h=0},"lm_init");function Hs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Kt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ct*2),this.dyn_dtree=new Uint16Array((2*Ye+1)*2),this.bl_tree=new Uint16Array((2*St+1)*2),Xn(this.dyn_ltree),Xn(this.dyn_dtree),Xn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Tt+1),this.heap=new Uint16Array(2*Le+1),Xn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Le+1),Xn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}o(Hs,"DeflateState");const Jr=o(C=>{if(!C||!C.state)return Ii(C,Zn);C.total_in=C.total_out=0,C.data_type=dn;const U=C.state;return U.pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?pn:fi,C.adler=U.wrap===2?0:1,U.last_flush=Si,Nt(U),li},"deflateResetKeep"),bo=o(C=>{const U=Jr(C);return U===li&&xo(C.state),U},"deflateReset"),uo=o((C,U)=>!C||!C.state||C.state.wrap!==2?Zn:(C.state.gzhead=U,li),"deflateSetHeader"),Bo=o((C,U,R,Y,G,re)=>{if(!C)return Zn;let Ce=1;if(U===zr&&(U=6),Y<0?(Ce=0,Y=-Y):Y>15&&(Ce=2,Y-=16),G<1||G>wn||R!==Kt||Y<8||Y>15||U<0||U>9||re<0||re>yt)return Ii(C,Zn);Y===8&&(Y=9);const ge=new Hs;return C.state=ge,ge.strm=C,ge.wrap=Ce,ge.gzhead=null,ge.w_bits=Y,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=G+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+Ke-1)/Ke),ge.window=new Uint8Array(ge.w_size*2),ge.head=new Uint16Array(ge.hash_size),ge.prev=new Uint16Array(ge.w_size),ge.lit_bufsize=1<<G+6,ge.pending_buf_size=ge.lit_bufsize*4,ge.pending_buf=new Uint8Array(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=(1+2)*ge.lit_bufsize,ge.level=U,ge.strategy=re,ge.method=R,bo(C)},"deflateInit2"),ys=o((C,U)=>Bo(C,U,Kt,Jn,z,st),"deflateInit"),bs=o((C,U)=>{let R,Y;if(!C||!C.state||U>wr||U<0)return C?Ii(C,Zn):Zn;const G=C.state;if(!C.output||!C.input&&C.avail_in!==0||G.status===hi&&U!==ai)return Ii(C,C.avail_out===0?Qi:Zn);G.strm=C;const re=G.last_flush;if(G.last_flush=U,G.status===pn)if(G.wrap===2)C.adler=0,Ht(G,31),Ht(G,139),Ht(G,8),G.gzhead?(Ht(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),Ht(G,G.gzhead.time&255),Ht(G,G.gzhead.time>>8&255),Ht(G,G.gzhead.time>>16&255),Ht(G,G.gzhead.time>>24&255),Ht(G,G.level===9?2:G.strategy>=Zi||G.level<2?4:0),Ht(G,G.gzhead.os&255),G.gzhead.extra&&G.gzhead.extra.length&&(Ht(G,G.gzhead.extra.length&255),Ht(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(C.adler=qe(C.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=zn):(Ht(G,0),Ht(G,0),Ht(G,0),Ht(G,0),Ht(G,0),Ht(G,G.level===9?2:G.strategy>=Zi||G.level<2?4:0),Ht(G,Rr),G.status=fi);else{let Ce=Kt+(G.w_bits-8<<4)<<8,ge=-1;G.strategy>=Zi||G.level<2?ge=0:G.level<6?ge=1:G.level===6?ge=2:ge=3,Ce|=ge<<6,G.strstart!==0&&(Ce|=Rn),Ce+=31-Ce%31,G.status=fi,nr(G,Ce),G.strstart!==0&&(nr(G,C.adler>>>16),nr(G,C.adler&65535)),C.adler=1}if(G.status===zn)if(G.gzhead.extra){for(R=G.pending;G.gzindex<(G.gzhead.extra.length&65535)&&!(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),_i(C),R=G.pending,G.pending===G.pending_buf_size));)Ht(G,G.gzhead.extra[G.gzindex]&255),G.gzindex++;G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=di)}else G.status=di;if(G.status===di)if(G.gzhead.name){R=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),_i(C),R=G.pending,G.pending===G.pending_buf_size)){Y=1;break}G.gzindex<G.gzhead.name.length?Y=G.gzhead.name.charCodeAt(G.gzindex++)&255:Y=0,Ht(G,Y)}while(Y!==0);G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),Y===0&&(G.gzindex=0,G.status=Ri)}else G.status=Ri;if(G.status===Ri)if(G.gzhead.comment){R=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),_i(C),R=G.pending,G.pending===G.pending_buf_size)){Y=1;break}G.gzindex<G.gzhead.comment.length?Y=G.gzhead.comment.charCodeAt(G.gzindex++)&255:Y=0,Ht(G,Y)}while(Y!==0);G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),Y===0&&(G.status=Pi)}else G.status=Pi;if(G.status===Pi&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&_i(C),G.pending+2<=G.pending_buf_size&&(Ht(G,C.adler&255),Ht(G,C.adler>>8&255),C.adler=0,G.status=fi)):G.status=fi),G.pending!==0){if(_i(C),C.avail_out===0)return G.last_flush=-1,li}else if(C.avail_in===0&&Sr(U)<=Sr(re)&&U!==ai)return Ii(C,Qi);if(G.status===hi&&C.avail_in!==0)return Ii(C,Qi);if(C.avail_in!==0||G.lookahead!==0||U!==Si&&G.status!==hi){let Ce=G.strategy===Zi?Us(G,U):G.strategy===ro?Vs(G,U):kr[G.level].func(G,U);if((Ce===Vi||Ce===Ui)&&(G.status=hi),Ce===Cn||Ce===Vi)return C.avail_out===0&&(G.last_flush=-1),li;if(Ce===zi&&(U===gr?Ci(G):U!==wr&&(ln(G,0,0,!1),U===tr&&(Xn(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),_i(C),C.avail_out===0))return G.last_flush=-1,li}return U!==ai?li:G.wrap<=0?lr:(G.wrap===2?(Ht(G,C.adler&255),Ht(G,C.adler>>8&255),Ht(G,C.adler>>16&255),Ht(G,C.adler>>24&255),Ht(G,C.total_in&255),Ht(G,C.total_in>>8&255),Ht(G,C.total_in>>16&255),Ht(G,C.total_in>>24&255)):(nr(G,C.adler>>>16),nr(G,C.adler&65535)),_i(C),G.wrap>0&&(G.wrap=-G.wrap),G.pending!==0?li:lr)},"deflate$2"),Zo=o(C=>{if(!C||!C.state)return Zn;const U=C.state.status;return U!==pn&&U!==zn&&U!==di&&U!==Ri&&U!==Pi&&U!==fi&&U!==hi?Ii(C,Zn):(C.state=null,U===fi?Ii(C,Or):li)},"deflateEnd"),Cs=o((C,U)=>{let R=U.length;if(!C||!C.state)return Zn;const Y=C.state,G=Y.wrap;if(G===2||G===1&&Y.status!==pn||Y.lookahead)return Zn;if(G===1&&(C.adler=jt(C.adler,U,R,0)),Y.wrap=0,R>=Y.w_size){G===0&&(Xn(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0);let et=new Uint8Array(Y.w_size);et.set(U.subarray(R-Y.w_size,R),0),U=et,R=Y.w_size}const re=C.avail_in,Ce=C.next_in,ge=C.input;for(C.avail_in=R,C.next_in=0,C.input=U,dr(Y);Y.lookahead>=Ke;){let et=Y.strstart,he=Y.lookahead-(Ke-1);do Y.ins_h=pi(Y,Y.ins_h,Y.window[et+Ke-1]),Y.prev[et&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=et,et++;while(--he);Y.strstart=et,Y.lookahead=Ke-1,dr(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=Ke-1,Y.match_available=0,C.next_in=Ce,C.input=ge,C.avail_in=re,Y.wrap=G,li},"deflateSetDictionary");var Es=ys,fo=Bo,no=bo,oo=Jr,ho=uo,Co=bs,Eo=Zo,Fo=Cs,qo="pako deflate (from Nodeca project)",vr={deflateInit:Es,deflateInit2:fo,deflateReset:no,deflateResetKeep:oo,deflateSetHeader:ho,deflate:Co,deflateEnd:Eo,deflateSetDictionary:Fo,deflateInfo:qo};const es=o((C,U)=>Object.prototype.hasOwnProperty.call(C,U),"_has");var Ts=o(function(C){const U=Array.prototype.slice.call(arguments,1);for(;U.length;){const R=U.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(const Y in R)es(R,Y)&&(C[Y]=R[Y])}}return C},"assign"),ts=o(C=>{let U=0;for(let Y=0,G=C.length;Y<G;Y++)U+=C[Y].length;const R=new Uint8Array(U);for(let Y=0,G=0,re=C.length;Y<re;Y++){let Ce=C[Y];R.set(Ce,G),G+=Ce.length}return R},"flattenChunks"),Yr={assign:Ts,flattenChunks:ts};let Vo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vo=!1}const Dr=new Uint8Array(256);for(let C=0;C<256;C++)Dr[C]=C>=252?6:C>=248?5:C>=240?4:C>=224?3:C>=192?2:1;Dr[254]=Dr[254]=1;var po=o(C=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(C);let U,R,Y,G,re,Ce=C.length,ge=0;for(G=0;G<Ce;G++)R=C.charCodeAt(G),(R&64512)===55296&&G+1<Ce&&(Y=C.charCodeAt(G+1),(Y&64512)===56320&&(R=65536+(R-55296<<10)+(Y-56320),G++)),ge+=R<128?1:R<2048?2:R<65536?3:4;for(U=new Uint8Array(ge),re=0,G=0;re<ge;G++)R=C.charCodeAt(G),(R&64512)===55296&&G+1<Ce&&(Y=C.charCodeAt(G+1),(Y&64512)===56320&&(R=65536+(R-55296<<10)+(Y-56320),G++)),R<128?U[re++]=R:R<2048?(U[re++]=192|R>>>6,U[re++]=128|R&63):R<65536?(U[re++]=224|R>>>12,U[re++]=128|R>>>6&63,U[re++]=128|R&63):(U[re++]=240|R>>>18,U[re++]=128|R>>>12&63,U[re++]=128|R>>>6&63,U[re++]=128|R&63);return U},"string2buf");const mo=o((C,U)=>{if(U<65534&&C.subarray&&Vo)return String.fromCharCode.apply(null,C.length===U?C:C.subarray(0,U));let R="";for(let Y=0;Y<U;Y++)R+=String.fromCharCode(C[Y]);return R},"buf2binstring");var Uo=o((C,U)=>{const R=U||C.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(C.subarray(0,U));let Y,G;const re=new Array(R*2);for(G=0,Y=0;Y<R;){let Ce=C[Y++];if(Ce<128){re[G++]=Ce;continue}let ge=Dr[Ce];if(ge>4){re[G++]=65533,Y+=ge-1;continue}for(Ce&=ge===2?31:ge===3?15:7;ge>1&&Y<R;)Ce=Ce<<6|C[Y++]&63,ge--;if(ge>1){re[G++]=65533;continue}Ce<65536?re[G++]=Ce:(Ce-=65536,re[G++]=55296|Ce>>10&1023,re[G++]=56320|Ce&1023)}return mo(re,G)},"buf2string"),so=o((C,U)=>{U=U||C.length,U>C.length&&(U=C.length);let R=U-1;for(;R>=0&&(C[R]&192)===128;)R--;return R<0||R===0?U:R+Dr[C[R]]>U?R:U},"utf8border"),Wr={string2buf:po,buf2string:Uo,utf8border:so};function To(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}o(To,"ZStream");var Io=To;const jr=Object.prototype.toString,{Z_NO_FLUSH:go,Z_SYNC_FLUSH:Ho,Z_FULL_FLUSH:Is,Z_FINISH:zs,Z_OK:Lr,Z_STREAM_END:ns,Z_DEFAULT_COMPRESSION:Gr,Z_DEFAULT_STRATEGY:Ws,Z_DEFLATED:js}=lt;function Xr(C){this.options=Yr.assign({level:Gr,method:js,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ws},C||{});let U=this.options;U.raw&&U.windowBits>0?U.windowBits=-U.windowBits:U.gzip&&U.windowBits>0&&U.windowBits<16&&(U.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Io,this.strm.avail_out=0;let R=vr.deflateInit2(this.strm,U.level,U.method,U.windowBits,U.memLevel,U.strategy);if(R!==Lr)throw new Error(vt[R]);if(U.header&&vr.deflateSetHeader(this.strm,U.header),U.dictionary){let Y;if(typeof U.dictionary=="string"?Y=Wr.string2buf(U.dictionary):jr.call(U.dictionary)==="[object ArrayBuffer]"?Y=new Uint8Array(U.dictionary):Y=U.dictionary,R=vr.deflateSetDictionary(this.strm,Y),R!==Lr)throw new Error(vt[R]);this._dict_set=!0}}o(Xr,"Deflate$1"),Xr.prototype.push=function(C,U){const R=this.strm,Y=this.options.chunkSize;let G,re;if(this.ended)return!1;for(U===~~U?re=U:re=U===!0?zs:go,typeof C=="string"?R.input=Wr.string2buf(C):jr.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(Y),R.next_out=0,R.avail_out=Y),(re===Ho||re===Is)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(G=vr.deflate(R,re),G===ns)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),G=vr.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===Lr;if(R.avail_out===0){this.onData(R.output);continue}if(re>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},Xr.prototype.onData=function(C){this.chunks.push(C)},Xr.prototype.onEnd=function(C){C===Lr&&(this.result=Yr.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function wo(C,U){const R=new Xr(U);if(R.push(C,!0),R.err)throw R.msg||vt[R.err];return R.result}o(wo,"deflate$1");function is(C,U){return U=U||{},U.raw=!0,wo(C,U)}o(is,"deflateRaw$1");function zo(C,U){return U=U||{},U.gzip=!0,wo(C,U)}o(zo,"gzip$1");var ws=Xr,ir=wo,Wo=is,Oo=zo,rs=lt,Os={Deflate:ws,deflate:ir,deflateRaw:Wo,gzip:Oo,constants:rs};const Qr=30,Gs=12;var jo=o(function(U,R){let Y,G,re,Ce,ge,et,he,Te,tn,Qe,Ne,It,Wn,en,Ft,gn,Yt,$e,nn,We,Rt,nt,vn,Vt;const zt=U.state;Y=U.next_in,vn=U.input,G=Y+(U.avail_in-5),re=U.next_out,Vt=U.output,Ce=re-(R-U.avail_out),ge=re+(U.avail_out-257),et=zt.dmax,he=zt.wsize,Te=zt.whave,tn=zt.wnext,Qe=zt.window,Ne=zt.hold,It=zt.bits,Wn=zt.lencode,en=zt.distcode,Ft=(1<<zt.lenbits)-1,gn=(1<<zt.distbits)-1;e:do{It<15&&(Ne+=vn[Y++]<<It,It+=8,Ne+=vn[Y++]<<It,It+=8),Yt=Wn[Ne&Ft];t:for(;;){if($e=Yt>>>24,Ne>>>=$e,It-=$e,$e=Yt>>>16&255,$e===0)Vt[re++]=Yt&65535;else if($e&16){nn=Yt&65535,$e&=15,$e&&(It<$e&&(Ne+=vn[Y++]<<It,It+=8),nn+=Ne&(1<<$e)-1,Ne>>>=$e,It-=$e),It<15&&(Ne+=vn[Y++]<<It,It+=8,Ne+=vn[Y++]<<It,It+=8),Yt=en[Ne&gn];n:for(;;){if($e=Yt>>>24,Ne>>>=$e,It-=$e,$e=Yt>>>16&255,$e&16){if(We=Yt&65535,$e&=15,It<$e&&(Ne+=vn[Y++]<<It,It+=8,It<$e&&(Ne+=vn[Y++]<<It,It+=8)),We+=Ne&(1<<$e)-1,We>et){U.msg="invalid distance too far back",zt.mode=Qr;break e}if(Ne>>>=$e,It-=$e,$e=re-Ce,We>$e){if($e=We-$e,$e>Te&&zt.sane){U.msg="invalid distance too far back",zt.mode=Qr;break e}if(Rt=0,nt=Qe,tn===0){if(Rt+=he-$e,$e<nn){nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);Rt=re-We,nt=Vt}}else if(tn<$e){if(Rt+=he+tn-$e,$e-=tn,$e<nn){nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);if(Rt=0,tn<nn){$e=tn,nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);Rt=re-We,nt=Vt}}}else if(Rt+=tn-$e,$e<nn){nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);Rt=re-We,nt=Vt}for(;nn>2;)Vt[re++]=nt[Rt++],Vt[re++]=nt[Rt++],Vt[re++]=nt[Rt++],nn-=3;nn&&(Vt[re++]=nt[Rt++],nn>1&&(Vt[re++]=nt[Rt++]))}else{Rt=re-We;do Vt[re++]=Vt[Rt++],Vt[re++]=Vt[Rt++],Vt[re++]=Vt[Rt++],nn-=3;while(nn>2);nn&&(Vt[re++]=Vt[Rt++],nn>1&&(Vt[re++]=Vt[Rt++]))}}else if($e&64){U.msg="invalid distance code",zt.mode=Qr;break e}else{Yt=en[(Yt&65535)+(Ne&(1<<$e)-1)];continue n}break}}else if($e&64)if($e&32){zt.mode=Gs;break e}else{U.msg="invalid literal/length code",zt.mode=Qr;break e}else{Yt=Wn[(Yt&65535)+(Ne&(1<<$e)-1)];continue t}break}}while(Y<G&&re<ge);nn=It>>3,Y-=nn,It-=nn<<3,Ne&=(1<<It)-1,U.next_in=Y,U.next_out=re,U.avail_in=Y<G?5+(G-Y):5-(Y-G),U.avail_out=re<ge?257+(ge-re):257-(re-ge),zt.hold=Ne,zt.bits=It},"inflate_fast");const fr=15,Go=852,os=592,ss=0,$o=1,Ro=2,as=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ls=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ds=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Zr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Mr=o((C,U,R,Y,G,re,Ce,ge)=>{const et=ge.bits;let he=0,Te=0,tn=0,Qe=0,Ne=0,It=0,Wn=0,en=0,Ft=0,gn=0,Yt,$e,nn,We,Rt,nt=null,vn=0,Vt;const zt=new Uint16Array(fr+1),io=new Uint16Array(fr+1);let mn=null,El=0,hn,qs,_s;for(he=0;he<=fr;he++)zt[he]=0;for(Te=0;Te<Y;Te++)zt[U[R+Te]]++;for(Ne=et,Qe=fr;Qe>=1&&zt[Qe]===0;Qe--);if(Ne>Qe&&(Ne=Qe),Qe===0)return G[re++]=1<<24|64<<16|0,G[re++]=1<<24|64<<16|0,ge.bits=1,0;for(tn=1;tn<Qe&&zt[tn]===0;tn++);for(Ne<tn&&(Ne=tn),en=1,he=1;he<=fr;he++)if(en<<=1,en-=zt[he],en<0)return-1;if(en>0&&(C===ss||Qe!==1))return-1;for(io[1]=0,he=1;he<fr;he++)io[he+1]=io[he]+zt[he];for(Te=0;Te<Y;Te++)U[R+Te]!==0&&(Ce[io[U[R+Te]]++]=Te);if(C===ss?(nt=mn=Ce,Vt=19):C===$o?(nt=as,vn-=257,mn=ls,El-=257,Vt=256):(nt=ds,mn=Zr,Vt=-1),gn=0,Te=0,he=tn,Rt=re,It=Ne,Wn=0,nn=-1,Ft=1<<Ne,We=Ft-1,C===$o&&Ft>Go||C===Ro&&Ft>os)return 1;for(;;){hn=he-Wn,Ce[Te]<Vt?(qs=0,_s=Ce[Te]):Ce[Te]>Vt?(qs=mn[El+Ce[Te]],_s=nt[vn+Ce[Te]]):(qs=32+64,_s=0),Yt=1<<he-Wn,$e=1<<It,tn=$e;do $e-=Yt,G[Rt+(gn>>Wn)+$e]=hn<<24|qs<<16|_s|0;while($e!==0);for(Yt=1<<he-1;gn&Yt;)Yt>>=1;if(Yt!==0?(gn&=Yt-1,gn+=Yt):gn=0,Te++,--zt[he]===0){if(he===Qe)break;he=U[R+Ce[Te]]}if(he>Ne&&(gn&We)!==nn){for(Wn===0&&(Wn=Ne),Rt+=tn,It=he-Wn,en=1<<It;It+Wn<Qe&&(en-=zt[It+Wn],!(en<=0));)It++,en<<=1;if(Ft+=1<<It,C===$o&&Ft>Go||C===Ro&&Ft>os)return 1;nn=gn&We,G[nn]=Ne<<24|It<<16|Rt-re|0}}return gn!==0&&(G[Rt+gn]=he-Wn<<24|64<<16|0),ge.bits=Ne,0},"inflate_table");const cs=0,lo=1,$r=2,{Z_FINISH:Mo,Z_BLOCK:Rs,Z_TREES:Ko,Z_OK:$i,Z_STREAM_END:Ms,Z_NEED_DICT:Po,Z_STREAM_ERROR:Ni,Z_DATA_ERROR:$s,Z_MEM_ERROR:Jo,Z_BUF_ERROR:So,Z_DEFLATED:hr}=lt,Ks=1,us=2,Yo=3,fs=4,Js=5,Ys=6,Xs=7,Qs=8,Ps=9,la=10,Xo=11,rr=12,Ao=13,hs=14,ne=15,te=16,Q=17,A=18,X=19,se=20,oe=21,ve=22,Ie=23,Ae=24,ke=25,De=26,Ge=27,Xe=28,ut=29,Ze=30,Zt=31,rn=32,Tn=852,Pn=592,Kn=15,ti=o(C=>(C>>>24&255)+(C>>>8&65280)+((C&65280)<<8)+((C&255)<<24),"zswap32");function ei(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}o(ei,"InflateState");const wi=o(C=>{if(!C||!C.state)return Ni;const U=C.state;return C.total_in=C.total_out=U.total=0,C.msg="",U.wrap&&(C.adler=U.wrap&1),U.mode=Ks,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new Int32Array(Tn),U.distcode=U.distdyn=new Int32Array(Pn),U.sane=1,U.back=-1,$i},"inflateResetKeep"),ki=o(C=>{if(!C||!C.state)return Ni;const U=C.state;return U.wsize=0,U.whave=0,U.wnext=0,wi(C)},"inflateReset"),ci=o((C,U)=>{let R;if(!C||!C.state)return Ni;const Y=C.state;return U<0?(R=0,U=-U):(R=(U>>4)+1,U<48&&(U&=15)),U&&(U<8||U>15)?Ni:(Y.window!==null&&Y.wbits!==U&&(Y.window=null),Y.wrap=R,Y.wbits=U,ki(C))},"inflateReset2"),yi=o((C,U)=>{if(!C)return Ni;const R=new ei;C.state=R,R.window=null;const Y=ci(C,U);return Y!==$i&&(C.state=null),Y},"inflateInit2"),or=o(C=>yi(C,Kn),"inflateInit");let Mi=!0,Wi,Kr;const vo=o(C=>{if(Mi){Wi=new Int32Array(512),Kr=new Int32Array(32);let U=0;for(;U<144;)C.lens[U++]=8;for(;U<256;)C.lens[U++]=9;for(;U<280;)C.lens[U++]=7;for(;U<288;)C.lens[U++]=8;for(Mr(lo,C.lens,0,288,Wi,0,C.work,{bits:9}),U=0;U<32;)C.lens[U++]=5;Mr($r,C.lens,0,32,Kr,0,C.work,{bits:5}),Mi=!1}C.lencode=Wi,C.lenbits=9,C.distcode=Kr,C.distbits=5},"fixedtables"),yr=o((C,U,R,Y)=>{let G;const re=C.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new Uint8Array(re.wsize)),Y>=re.wsize?(re.window.set(U.subarray(R-re.wsize,R),0),re.wnext=0,re.whave=re.wsize):(G=re.wsize-re.wnext,G>Y&&(G=Y),re.window.set(U.subarray(R-Y,R-Y+G),re.wnext),Y-=G,Y?(re.window.set(U.subarray(R-Y,R),0),re.wnext=Y,re.whave=re.wsize):(re.wnext+=G,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=G))),0},"updatewindow"),In=o((C,U)=>{let R,Y,G,re,Ce,ge,et,he,Te,tn,Qe,Ne,It,Wn,en=0,Ft,gn,Yt,$e,nn,We,Rt,nt;const vn=new Uint8Array(4);let Vt,zt;const io=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return Ni;R=C.state,R.mode===rr&&(R.mode=Ao),Ce=C.next_out,G=C.output,et=C.avail_out,re=C.next_in,Y=C.input,ge=C.avail_in,he=R.hold,Te=R.bits,tn=ge,Qe=et,nt=$i;e:for(;;)switch(R.mode){case Ks:if(R.wrap===0){R.mode=Ao;break}for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(R.wrap&2&&he===35615){R.check=0,vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0),he=0,Te=0,R.mode=us;break}if(R.flags=0,R.head&&(R.head.done=!1),!(R.wrap&1)||(((he&255)<<8)+(he>>8))%31){C.msg="incorrect header check",R.mode=Ze;break}if((he&15)!==hr){C.msg="unknown compression method",R.mode=Ze;break}if(he>>>=4,Te-=4,Rt=(he&15)+8,R.wbits===0)R.wbits=Rt;else if(Rt>R.wbits){C.msg="invalid window size",R.mode=Ze;break}R.dmax=1<<R.wbits,C.adler=R.check=1,R.mode=he&512?la:rr,he=0,Te=0;break;case us:for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(R.flags=he,(R.flags&255)!==hr){C.msg="unknown compression method",R.mode=Ze;break}if(R.flags&57344){C.msg="unknown header flags set",R.mode=Ze;break}R.head&&(R.head.text=he>>8&1),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0)),he=0,Te=0,R.mode=Yo;case Yo:for(;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.head&&(R.head.time=he),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,vn[2]=he>>>16&255,vn[3]=he>>>24&255,R.check=qe(R.check,vn,4,0)),he=0,Te=0,R.mode=fs;case fs:for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.head&&(R.head.xflags=he&255,R.head.os=he>>8),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0)),he=0,Te=0,R.mode=Js;case Js:if(R.flags&1024){for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.length=he,R.head&&(R.head.extra_len=he),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0)),he=0,Te=0}else R.head&&(R.head.extra=null);R.mode=Ys;case Ys:if(R.flags&1024&&(Ne=R.length,Ne>ge&&(Ne=ge),Ne&&(R.head&&(Rt=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Uint8Array(R.head.extra_len)),R.head.extra.set(Y.subarray(re,re+Ne),Rt)),R.flags&512&&(R.check=qe(R.check,Y,Ne,re)),ge-=Ne,re+=Ne,R.length-=Ne),R.length))break e;R.length=0,R.mode=Xs;case Xs:if(R.flags&2048){if(ge===0)break e;Ne=0;do Rt=Y[re+Ne++],R.head&&Rt&&R.length<65536&&(R.head.name+=String.fromCharCode(Rt));while(Rt&&Ne<ge);if(R.flags&512&&(R.check=qe(R.check,Y,Ne,re)),ge-=Ne,re+=Ne,Rt)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=Qs;case Qs:if(R.flags&4096){if(ge===0)break e;Ne=0;do Rt=Y[re+Ne++],R.head&&Rt&&R.length<65536&&(R.head.comment+=String.fromCharCode(Rt));while(Rt&&Ne<ge);if(R.flags&512&&(R.check=qe(R.check,Y,Ne,re)),ge-=Ne,re+=Ne,Rt)break e}else R.head&&(R.head.comment=null);R.mode=Ps;case Ps:if(R.flags&512){for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(he!==(R.check&65535)){C.msg="header crc mismatch",R.mode=Ze;break}he=0,Te=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),C.adler=R.check=0,R.mode=rr;break;case la:for(;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}C.adler=R.check=ti(he),he=0,Te=0,R.mode=Xo;case Xo:if(R.havedict===0)return C.next_out=Ce,C.avail_out=et,C.next_in=re,C.avail_in=ge,R.hold=he,R.bits=Te,Po;C.adler=R.check=1,R.mode=rr;case rr:if(U===Rs||U===Ko)break e;case Ao:if(R.last){he>>>=Te&7,Te-=Te&7,R.mode=Ge;break}for(;Te<3;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}switch(R.last=he&1,he>>>=1,Te-=1,he&3){case 0:R.mode=hs;break;case 1:if(vo(R),R.mode=se,U===Ko){he>>>=2,Te-=2;break e}break;case 2:R.mode=Q;break;case 3:C.msg="invalid block type",R.mode=Ze}he>>>=2,Te-=2;break;case hs:for(he>>>=Te&7,Te-=Te&7;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if((he&65535)!==(he>>>16^65535)){C.msg="invalid stored block lengths",R.mode=Ze;break}if(R.length=he&65535,he=0,Te=0,R.mode=ne,U===Ko)break e;case ne:R.mode=te;case te:if(Ne=R.length,Ne){if(Ne>ge&&(Ne=ge),Ne>et&&(Ne=et),Ne===0)break e;G.set(Y.subarray(re,re+Ne),Ce),ge-=Ne,re+=Ne,et-=Ne,Ce+=Ne,R.length-=Ne;break}R.mode=rr;break;case Q:for(;Te<14;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(R.nlen=(he&31)+257,he>>>=5,Te-=5,R.ndist=(he&31)+1,he>>>=5,Te-=5,R.ncode=(he&15)+4,he>>>=4,Te-=4,R.nlen>286||R.ndist>30){C.msg="too many length or distance symbols",R.mode=Ze;break}R.have=0,R.mode=A;case A:for(;R.have<R.ncode;){for(;Te<3;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.lens[io[R.have++]]=he&7,he>>>=3,Te-=3}for(;R.have<19;)R.lens[io[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,Vt={bits:R.lenbits},nt=Mr(cs,R.lens,0,19,R.lencode,0,R.work,Vt),R.lenbits=Vt.bits,nt){C.msg="invalid code lengths set",R.mode=Ze;break}R.have=0,R.mode=X;case X:for(;R.have<R.nlen+R.ndist;){for(;en=R.lencode[he&(1<<R.lenbits)-1],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!(Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(Yt<16)he>>>=Ft,Te-=Ft,R.lens[R.have++]=Yt;else{if(Yt===16){for(zt=Ft+2;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(he>>>=Ft,Te-=Ft,R.have===0){C.msg="invalid bit length repeat",R.mode=Ze;break}Rt=R.lens[R.have-1],Ne=3+(he&3),he>>>=2,Te-=2}else if(Yt===17){for(zt=Ft+3;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=Ft,Te-=Ft,Rt=0,Ne=3+(he&7),he>>>=3,Te-=3}else{for(zt=Ft+7;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=Ft,Te-=Ft,Rt=0,Ne=11+(he&127),he>>>=7,Te-=7}if(R.have+Ne>R.nlen+R.ndist){C.msg="invalid bit length repeat",R.mode=Ze;break}for(;Ne--;)R.lens[R.have++]=Rt}}if(R.mode===Ze)break;if(R.lens[256]===0){C.msg="invalid code -- missing end-of-block",R.mode=Ze;break}if(R.lenbits=9,Vt={bits:R.lenbits},nt=Mr(lo,R.lens,0,R.nlen,R.lencode,0,R.work,Vt),R.lenbits=Vt.bits,nt){C.msg="invalid literal/lengths set",R.mode=Ze;break}if(R.distbits=6,R.distcode=R.distdyn,Vt={bits:R.distbits},nt=Mr($r,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,Vt),R.distbits=Vt.bits,nt){C.msg="invalid distances set",R.mode=Ze;break}if(R.mode=se,U===Ko)break e;case se:R.mode=oe;case oe:if(ge>=6&&et>=258){C.next_out=Ce,C.avail_out=et,C.next_in=re,C.avail_in=ge,R.hold=he,R.bits=Te,jo(C,Qe),Ce=C.next_out,G=C.output,et=C.avail_out,re=C.next_in,Y=C.input,ge=C.avail_in,he=R.hold,Te=R.bits,R.mode===rr&&(R.back=-1);break}for(R.back=0;en=R.lencode[he&(1<<R.lenbits)-1],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!(Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(gn&&!(gn&240)){for($e=Ft,nn=gn,We=Yt;en=R.lencode[We+((he&(1<<$e+nn)-1)>>$e)],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!($e+Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=$e,Te-=$e,R.back+=$e}if(he>>>=Ft,Te-=Ft,R.back+=Ft,R.length=Yt,gn===0){R.mode=De;break}if(gn&32){R.back=-1,R.mode=rr;break}if(gn&64){C.msg="invalid literal/length code",R.mode=Ze;break}R.extra=gn&15,R.mode=ve;case ve:if(R.extra){for(zt=R.extra;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.length+=he&(1<<R.extra)-1,he>>>=R.extra,Te-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=Ie;case Ie:for(;en=R.distcode[he&(1<<R.distbits)-1],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!(Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(!(gn&240)){for($e=Ft,nn=gn,We=Yt;en=R.distcode[We+((he&(1<<$e+nn)-1)>>$e)],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!($e+Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=$e,Te-=$e,R.back+=$e}if(he>>>=Ft,Te-=Ft,R.back+=Ft,gn&64){C.msg="invalid distance code",R.mode=Ze;break}R.offset=Yt,R.extra=gn&15,R.mode=Ae;case Ae:if(R.extra){for(zt=R.extra;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.offset+=he&(1<<R.extra)-1,he>>>=R.extra,Te-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){C.msg="invalid distance too far back",R.mode=Ze;break}R.mode=ke;case ke:if(et===0)break e;if(Ne=Qe-et,R.offset>Ne){if(Ne=R.offset-Ne,Ne>R.whave&&R.sane){C.msg="invalid distance too far back",R.mode=Ze;break}Ne>R.wnext?(Ne-=R.wnext,It=R.wsize-Ne):It=R.wnext-Ne,Ne>R.length&&(Ne=R.length),Wn=R.window}else Wn=G,It=Ce-R.offset,Ne=R.length;Ne>et&&(Ne=et),et-=Ne,R.length-=Ne;do G[Ce++]=Wn[It++];while(--Ne);R.length===0&&(R.mode=oe);break;case De:if(et===0)break e;G[Ce++]=R.length,et--,R.mode=oe;break;case Ge:if(R.wrap){for(;Te<32;){if(ge===0)break e;ge--,he|=Y[re++]<<Te,Te+=8}if(Qe-=et,C.total_out+=Qe,R.total+=Qe,Qe&&(C.adler=R.check=R.flags?qe(R.check,G,Qe,Ce-Qe):jt(R.check,G,Qe,Ce-Qe)),Qe=et,(R.flags?he:ti(he))!==R.check){C.msg="incorrect data check",R.mode=Ze;break}he=0,Te=0}R.mode=Xe;case Xe:if(R.wrap&&R.flags){for(;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(he!==(R.total&4294967295)){C.msg="incorrect length check",R.mode=Ze;break}he=0,Te=0}R.mode=ut;case ut:nt=Ms;break e;case Ze:nt=$s;break e;case Zt:return Jo;case rn:default:return Ni}return C.next_out=Ce,C.avail_out=et,C.next_in=re,C.avail_in=ge,R.hold=he,R.bits=Te,(R.wsize||Qe!==C.avail_out&&R.mode<Ze&&(R.mode<Ge||U!==Mo))&&yr(C,C.output,C.next_out,Qe-C.avail_out),tn-=C.avail_in,Qe-=C.avail_out,C.total_in+=tn,C.total_out+=Qe,R.total+=Qe,R.wrap&&Qe&&(C.adler=R.check=R.flags?qe(R.check,G,Qe,C.next_out-Qe):jt(R.check,G,Qe,C.next_out-Qe)),C.data_type=R.bits+(R.last?64:0)+(R.mode===rr?128:0)+(R.mode===se||R.mode===ne?256:0),(tn===0&&Qe===0||U===Mo)&&nt===$i&&(nt=So),nt},"inflate$2"),Jt=o(C=>{if(!C||!C.state)return Ni;let U=C.state;return U.window&&(U.window=null),C.state=null,$i},"inflateEnd"),jl=o((C,U)=>{if(!C||!C.state)return Ni;const R=C.state;return R.wrap&2?(R.head=U,U.done=!1,$i):Ni},"inflateGetHeader"),Dd=o((C,U)=>{const R=U.length;let Y,G,re;return!C||!C.state||(Y=C.state,Y.wrap!==0&&Y.mode!==Xo)?Ni:Y.mode===Xo&&(G=1,G=jt(G,U,R,0),G!==Y.check)?$s:(re=yr(C,U,R,R),re?(Y.mode=Zt,Jo):(Y.havedict=1,$i))},"inflateSetDictionary");var ml=ki,sr=ci,Gl=wi,Na=or,va=yi,Ld=In,gl=Jt,Sl=jl,vl=Dd,xa="pako inflate (from Nodeca project)",Pr={inflateReset:ml,inflateReset2:sr,inflateResetKeep:Gl,inflateInit:Na,inflateInit2:va,inflate:Ld,inflateEnd:gl,inflateGetHeader:Sl,inflateSetDictionary:vl,inflateInfo:xa};function sn(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}o(sn,"GZheader");var Qn=sn;const At=Object.prototype.toString,{Z_NO_FLUSH:Nd,Z_FINISH:yl,Z_OK:ps,Z_STREAM_END:da,Z_NEED_DICT:ca,Z_STREAM_ERROR:Zs,Z_DATA_ERROR:ya,Z_MEM_ERROR:xd}=lt;function ms(C){this.options=Yr.assign({chunkSize:1024*64,windowBits:15,to:""},C||{});const U=this.options;U.raw&&U.windowBits>=0&&U.windowBits<16&&(U.windowBits=-U.windowBits,U.windowBits===0&&(U.windowBits=-15)),U.windowBits>=0&&U.windowBits<16&&!(C&&C.windowBits)&&(U.windowBits+=32),U.windowBits>15&&U.windowBits<48&&(U.windowBits&15||(U.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Io,this.strm.avail_out=0;let R=Pr.inflateInit2(this.strm,U.windowBits);if(R!==ps)throw new Error(vt[R]);if(this.header=new Qn,Pr.inflateGetHeader(this.strm,this.header),U.dictionary&&(typeof U.dictionary=="string"?U.dictionary=Wr.string2buf(U.dictionary):At.call(U.dictionary)==="[object ArrayBuffer]"&&(U.dictionary=new Uint8Array(U.dictionary)),U.raw&&(R=Pr.inflateSetDictionary(this.strm,U.dictionary),R!==ps)))throw new Error(vt[R])}o(ms,"Inflate$1"),ms.prototype.push=function(C,U){const R=this.strm,Y=this.options.chunkSize,G=this.options.dictionary;let re,Ce,ge;if(this.ended)return!1;for(U===~~U?Ce=U:Ce=U===!0?yl:Nd,At.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;;){for(R.avail_out===0&&(R.output=new Uint8Array(Y),R.next_out=0,R.avail_out=Y),re=Pr.inflate(R,Ce),re===ca&&G&&(re=Pr.inflateSetDictionary(R,G),re===ps?re=Pr.inflate(R,Ce):re===ya&&(re=ca));R.avail_in>0&&re===da&&R.state.wrap>0&&C[R.next_in]!==0;)Pr.inflateReset(R),re=Pr.inflate(R,Ce);switch(re){case Zs:case ya:case ca:case xd:return this.onEnd(re),this.ended=!0,!1}if(ge=R.avail_out,R.next_out&&(R.avail_out===0||re===da))if(this.options.to==="string"){let et=Wr.utf8border(R.output,R.next_out),he=R.next_out-et,Te=Wr.buf2string(R.output,et);R.next_out=he,R.avail_out=Y-he,he&&R.output.set(R.output.subarray(et,et+he),0),this.onData(Te)}else this.onData(R.output.length===R.next_out?R.output:R.output.subarray(0,R.next_out));if(!(re===ps&&ge===0)){if(re===da)return re=Pr.inflateEnd(this.strm),this.onEnd(re),this.ended=!0,!0;if(R.avail_in===0)break}}return!0},ms.prototype.onData=function(C){this.chunks.push(C)},ms.prototype.onEnd=function(C){C===ps&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yr.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function ba(C,U){const R=new ms(U);if(R.push(C),R.err)throw R.msg||vt[R.err];return R.result}o(ba,"inflate$1");function bl(C,U){return U=U||{},U.raw=!0,ba(C,U)}o(bl,"inflateRaw$1");var Bd=ms,Fd=ba,Vd=bl,ua=ba,$l=lt,Ca={Inflate:Bd,inflate:Fd,inflateRaw:Vd,ungzip:ua,constants:$l};const{Deflate:Ea,deflate:Kl,deflateRaw:Ba,gzip:Ud}=Os,{Inflate:Jl,inflate:Hd,inflateRaw:Yl,ungzip:zd}=Ca;var Fa=Ea,Va=Kl,Ua=Ba,Cl=Ud,pr=Jl,As=Hd,Ha=Yl,za=zd,Wa=lt,ja={Deflate:Fa,deflate:Va,deflateRaw:Ua,gzip:Cl,Inflate:pr,inflate:As,inflateRaw:Ha,ungzip:za,constants:Wa}},cZ61:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var S=f("vdHl"),h=function(){function u(){this.state=Int32Array.from(S.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return o(u,"RawSha256"),u.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>S.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===S.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},u.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%S.BLOCK_SIZE>=S.BLOCK_SIZE-8){for(var i=this.bufferLength;i<S.BLOCK_SIZE;i++)a.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<S.BLOCK_SIZE-8;i++)a.setUint8(i,0);a.setUint32(S.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(S.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(S.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},u.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],c=s[5],p=s[6],g=s[7],d=0;d<S.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(a[d*4]&255)<<24|(a[d*4+1]&255)<<16|(a[d*4+2]&255)<<8|a[d*4+3]&255;else{var y=this.temp[d-2],E=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var w=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(E+this.temp[d-7]|0)+(w+this.temp[d-16]|0)}var k=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&p)|0)+(g+(S.KEY[d]+this.temp[d]|0)|0)|0,V=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;g=p,p=c,c=r,r=n+k|0,n=t,t=e,e=i,i=k+V|0}s[0]+=i,s[1]+=e,s[2]+=t,s[3]+=n,s[4]+=r,s[5]+=c,s[6]+=p,s[7]+=g},u}();l.RawSha256=h},cizm:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("lUhs")),m=h(f("V5IF")),a=h(f("bTau")),s=h(f("59sL")),i=h(f("aVV0"));let e=o(class extends i.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return S(this,void 0,void 0,function*(){if(this.context.turnCredentials){this.context.logger.info("TURN credentials available, skipping credentials fetch");return}if(this.context.logger.error("missing TURN credentials - falling back to fetch"),!this.url){this.context.logger.info("TURN control url not supplied, skipping credentials fetch");return}const n={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json","X-Chime-Auth-Token":"_aws_wt_session="+new a.default(this.joinToken).base()},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({meetingId:this.meetingId})};this.context.logger.info(`requesting TURN credentials from ${this.url}`);const r=yield new Promise((c,p)=>S(this,void 0,void 0,function*(){this.cancelPromise=g=>{p(g)};try{const g=yield fetch(s.default.urlWithVersion(this.url),n);if(this.context.logger.info("received TURN credentials"),g.status&&g.status===403){p(new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.TURNCredentialsForbidden}`));return}if(g.status&&g.status===404){p(new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.MeetingEnded}`));return}c(yield g.json())}catch(g){p(g)}finally{delete this.cancelPromise}}));this.context.turnCredentials=new m.default,this.context.turnCredentials.password=r.password,this.context.turnCredentials.ttl=r.ttl,this.context.turnCredentials.uris=r.uris.map(c=>this.context.meetingSessionConfiguration.urls.urlRewriter(c)).filter(c=>!!c),this.context.turnCredentials.username=r.username})}constructor(n){super(n.logger),this.context=n,this.taskName="ReceiveTURNCredentialsTask",this.url=n.meetingSessionConfiguration.urls.turnControlURL,this.meetingId=n.meetingSessionConfiguration.meetingId,this.joinToken=n.meetingSessionConfiguration.credentials.joinToken}},"ReceiveTURNCredentialsTask");l.default=e},cm7I:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=Object(a.a)("rooms.startTranscription generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"rooms.startTranscription",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to rooms.startTranscription
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStartTranscriptionFetcher",description:"rooms.startTranscription generated fetcher"}},crgu:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function S(h){return h&&"destroy"in h}o(S,"isDestroyable"),l.isDestroyable=S},curu:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("hEYi")),m=f("f2XL"),a=h(f("aVV0"));let s=o(class extends a.default{run(){return S(this,void 0,void 0,function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)})}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===u.default.ReceivedSignalFrame){if(e.message.type===m.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===m.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=t=>{this.context.signalingClient.mute(t)}}},"ListenForVolumeIndicatorsTask");l.default=s},"d/Q8":function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={TeamIneligible:"team_ineligible",TeamOnPaidPlan:"team_on_paid_plan",InvalidCampaign:"invalid_campaign",InsufficientPermissions:"insufficient_permissions",CodeTypeRedeemed:"code_type_redeemed",CodeSubtypeRedeemed:"code_subtype_redeemed",NotInExperiment:"not_in_experiment",TeamDoesntSatisfyDaysAfterReachedMessageLimitCriteria:"team_doesnt_satisfy_days_after_reached_message_limit_criteria"},t=Object(a.a)("promo.campaigns.redeem generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"promo.campaigns.redeem",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to promo.campaigns.redeem
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherpromoCampaignsRedeemFetcher",description:"promo.campaigns.redeem generated fetcher"}},dFEU:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var S=f("kQNw"),h=f("p72H"),u=f("f/KM"),m=f("Yugg"),a=function(){function e(t){this.secret=t,this.reset()}return o(e,"Sha256"),e.prototype.update=function(t){var n=this;(0,S.isEmptyData)(t)||(this.operation=this.operation.then(function(r){return r.onerror=function(){n.operation=Promise.reject(new Error("Error encountered updating hash"))},r.process(i(t)),r}),this.operation.catch(function(){}))},e.prototype.digest=function(){return this.operation.then(function(t){return new Promise(function(n,r){t.onerror=function(){r(new Error("Error encountered finalizing hash"))},t.oncomplete=function(){t.result&&n(new Uint8Array(t.result)),r(new Error("Error encountered finalizing hash"))},t.finish()})})},e.prototype.reset=function(){this.secret?(this.operation=s(this.secret).then(function(t){return(0,m.locateWindow)().msCrypto.subtle.sign(h.SHA_256_HMAC_ALGO,t)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,m.locateWindow)().msCrypto.subtle.digest("SHA-256"))},e}();l.Sha256=a;function s(e){return new Promise(function(t,n){var r=(0,m.locateWindow)().msCrypto.subtle.importKey("raw",i(e),h.SHA_256_HMAC_ALGO,!1,["sign"]);r.oncomplete=function(){r.result&&t(r.result),n(new Error("ImportKey completed without importing key."))},r.onerror=function(){n(new Error("ImportKey failed to import key."))}})}o(s,"getKeyPromise");function i(e){return typeof e=="string"?(0,u.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}o(i,"toArrayBufferView")},dJwD:function(j,l,f){"use strict";f.r(l),f.d(l,"__extends",function(){return h}),f.d(l,"__assign",function(){return u}),f.d(l,"__rest",function(){return m}),f.d(l,"__decorate",function(){return a}),f.d(l,"__param",function(){return s}),f.d(l,"__metadata",function(){return i}),f.d(l,"__awaiter",function(){return e}),f.d(l,"__generator",function(){return t}),f.d(l,"__createBinding",function(){return n}),f.d(l,"__exportStar",function(){return r}),f.d(l,"__values",function(){return c}),f.d(l,"__read",function(){return p}),f.d(l,"__spread",function(){return g}),f.d(l,"__spreadArrays",function(){return d}),f.d(l,"__await",function(){return y}),f.d(l,"__asyncGenerator",function(){return E}),f.d(l,"__asyncDelegator",function(){return w}),f.d(l,"__asyncValues",function(){return k}),f.d(l,"__makeTemplateObject",function(){return V}),f.d(l,"__importStar",function(){return F}),f.d(l,"__importDefault",function(){return N}),f.d(l,"__classPrivateFieldGet",function(){return P}),f.d(l,"__classPrivateFieldSet",function(){return x});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=o(function(O,M){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,J){D.__proto__=J}||function(D,J){for(var q in J)J.hasOwnProperty(q)&&(D[q]=J[q])},S(O,M)},"extendStatics");function h(O,M){S(O,M);function D(){this.constructor=O}o(D,"__"),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}o(h,"__extends");var u=o(function(){return u=Object.assign||o(function(M){for(var D,J=1,q=arguments.length;J<q;J++){D=arguments[J];for(var $ in D)Object.prototype.hasOwnProperty.call(D,$)&&(M[$]=D[$])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(O,M){var D={};for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&M.indexOf(J)<0&&(D[J]=O[J]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,J=Object.getOwnPropertySymbols(O);q<J.length;q++)M.indexOf(J[q])<0&&Object.prototype.propertyIsEnumerable.call(O,J[q])&&(D[J[q]]=O[J[q]]);return D}o(m,"__rest");function a(O,M,D,J){var q=arguments.length,$=q<3?M:J===null?J=Object.getOwnPropertyDescriptor(M,D):J,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,M,D,J);else for(var Ee=O.length-1;Ee>=0;Ee--)(de=O[Ee])&&($=(q<3?de($):q>3?de(M,D,$):de(M,D))||$);return q>3&&$&&Object.defineProperty(M,D,$),$}o(a,"__decorate");function s(O,M){return function(D,J){M(D,J,O)}}o(s,"__param");function i(O,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,M)}o(i,"__metadata");function e(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})}o(e,"__awaiter");function t(O,M){var D={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,q,$,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(ye){return function(Be){return _e([ye,Be])}}function _e(ye){if(J)throw new TypeError("Generator is already executing.");for(;D;)try{if(J=1,q&&($=ye[0]&2?q.return:ye[0]?q.throw||(($=q.return)&&$.call(q),0):q.next)&&!($=$.call(q,ye[1])).done)return $;switch(q=0,$&&(ye=[ye[0]&2,$.value]),ye[0]){case 0:case 1:$=ye;break;case 4:return D.label++,{value:ye[1],done:!1};case 5:D.label++,q=ye[1],ye=[0];continue;case 7:ye=D.ops.pop(),D.trys.pop();continue;default:if($=D.trys,!($=$.length>0&&$[$.length-1])&&(ye[0]===6||ye[0]===2)){D=0;continue}if(ye[0]===3&&(!$||ye[1]>$[0]&&ye[1]<$[3])){D.label=ye[1];break}if(ye[0]===6&&D.label<$[1]){D.label=$[1],$=ye;break}if($&&D.label<$[2]){D.label=$[2],D.ops.push(ye);break}$[2]&&D.ops.pop(),D.trys.pop();continue}ye=M.call(O,D)}catch(Be){ye=[6,Be],q=0}finally{J=$=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}}o(t,"__generator");function n(O,M,D,J){J===void 0&&(J=D),O[J]=M[D]}o(n,"__createBinding");function r(O,M){for(var D in O)D!=="default"&&!M.hasOwnProperty(D)&&(M[D]=O[D])}o(r,"__exportStar");function c(O){var M=typeof Symbol=="function"&&Symbol.iterator,D=M&&O[M],J=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&J>=O.length&&(O=void 0),{value:O&&O[J++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}o(c,"__values");function p(O,M){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var J=D.call(O),q,$=[],de;try{for(;(M===void 0||M-- >0)&&!(q=J.next()).done;)$.push(q.value)}catch(Ee){de={error:Ee}}finally{try{q&&!q.done&&(D=J.return)&&D.call(J)}finally{if(de)throw de.error}}return $}o(p,"__read");function g(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(p(arguments[M]));return O}o(g,"__spread");function d(){for(var O=0,M=0,D=arguments.length;M<D;M++)O+=arguments[M].length;for(var J=Array(O),q=0,M=0;M<D;M++)for(var $=arguments[M],de=0,Ee=$.length;de<Ee;de++,q++)J[q]=$[de];return J}o(d,"__spreadArrays");function y(O){return this instanceof y?(this.v=O,this):new y(O)}o(y,"__await");function E(O,M,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=D.apply(O,M||[]),q,$=[];return q={},de("next"),de("throw"),de("return"),q[Symbol.asyncIterator]=function(){return this},q;function de(Ve){J[Ve]&&(q[Ve]=function(gt){return new Promise(function(dt,Je){$.push([Ve,gt,dt,Je])>1||Ee(Ve,gt)})})}function Ee(Ve,gt){try{_e(J[Ve](gt))}catch(dt){pt($[0][3],dt)}}function _e(Ve){Ve.value instanceof y?Promise.resolve(Ve.value.v).then(ye,Be):pt($[0][2],Ve)}function ye(Ve){Ee("next",Ve)}function Be(Ve){Ee("throw",Ve)}function pt(Ve,gt){Ve(gt),$.shift(),$.length&&Ee($[0][0],$[0][1])}}o(E,"__asyncGenerator");function w(O){var M,D;return M={},J("next"),J("throw",function(q){throw q}),J("return"),M[Symbol.iterator]=function(){return this},M;function J(q,$){M[q]=O[q]?function(de){return(D=!D)?{value:y(O[q](de)),done:q==="return"}:$?$(de):de}:$}}o(w,"__asyncDelegator");function k(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O[Symbol.asyncIterator],D;return M?M.call(O):(O=typeof c=="function"?c(O):O[Symbol.iterator](),D={},J("next"),J("throw"),J("return"),D[Symbol.asyncIterator]=function(){return this},D);function J($){D[$]=O[$]&&function(de){return new Promise(function(Ee,_e){de=O[$](de),q(Ee,_e,de.done,de.value)})}}function q($,de,Ee,_e){Promise.resolve(_e).then(function(ye){$({value:ye,done:Ee})},de)}}o(k,"__asyncValues");function V(O,M){return Object.defineProperty?Object.defineProperty(O,"raw",{value:M}):O.raw=M,O}o(V,"__makeTemplateObject");function F(O){if(O&&O.__esModule)return O;var M={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(M[D]=O[D]);return M.default=O,M}o(F,"__importStar");function N(O){return O&&O.__esModule?O:{default:O}}o(N,"__importDefault");function P(O,M){if(!M.has(O))throw new TypeError("attempted to get private field on non-instance");return M.get(O)}o(P,"__classPrivateFieldGet");function x(O,M,D){if(!M.has(O))throw new TypeError("attempted to set private field on non-instance");return M.set(O,D),D}o(x,"__classPrivateFieldSet")},dPBs:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var S;(function(h){h[h.ConnectingNew=0]="ConnectingNew",h[h.ReconnectingExisting=1]="ReconnectingExisting",h[h.StartedNew=2]="StartedNew",h[h.StartedExisting=3]="StartedExisting",h[h.StartedAfterReconnect=4]="StartedAfterReconnect",h[h.StoppedCleanly=5]="StoppedCleanly",h[h.StoppedWithFailure=6]="StoppedWithFailure"})(S=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=S},dPyZ:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("E6e8"),m=f("EX/T"),a=h(f("ac3q"));let s=o(class{makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}hmac(e,t){const n=new u.Sha256(t);return n.update(e),n.digest()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,n,r){return S(this,void 0,void 0,function*(){const c=yield this.hmac(t,"AWS4"+e),p=yield this.hmac(n,c),g=yield this.hmac(r,p);return yield this.hmac("aws4_request",g)})}signURL(e,t,n,r,c,p,g){return S(this,void 0,void 0,function*(){const d=this.getDateTimeString(),y=this.getDateString(d),E="AWS4-HMAC-SHA256";let w="";this.chimeClient.config.region instanceof Function?w=yield this.chimeClient.config.region():w=this.chimeClient.config.region;const k="host",V="host:"+r.toLowerCase()+`
`,F=y+"/"+w+"/"+n+"/aws4_request";let N;this.chimeClient.config.credentials instanceof Function?N=yield this.chimeClient.config.credentials():N=this.chimeClient.config.credentials;let P=new Map;P.set("X-Amz-Algorithm",[E]),P.set("X-Amz-Credential",[encodeURIComponent(N.accessKeyId+"/"+F)]),P.set("X-Amz-Date",[d]),P.set("X-Amz-Expires",["10"]),P.set("X-Amz-SignedHeaders",["host"]),N.sessionToken&&P.set("X-Amz-Security-Token",[encodeURIComponent(N.sessionToken)]),P.set(a.default.X_AMZN_VERSION,[encodeURIComponent(a.default.sdkVersion)]),P.set(a.default.X_AMZN_USER_AGENT,[encodeURIComponent(a.default.sdkUserAgentLowResolution)]),g==null||g.forEach((de,Ee)=>{const _e=encodeURIComponent(Ee);de.sort().forEach(ye=>{P.has(_e)||P.set(_e,[]),P.get(_e).push(encodeURIComponent(ye))})});let x="";P=new Map([...P.entries()].sort()),P.forEach((de,Ee)=>{de.forEach(_e=>{x.length&&(x+="&"),x+=Ee+"="+_e})});const O=e+`
`+c+`
`+x+`
`+V+`
`+k+`
`+m.toHex(yield this.hmac(p)),M=m.toHex(yield this.hmac(O)),D=`AWS4-HMAC-SHA256
`+d+`
`+y+"/"+w+"/"+n+`/aws4_request
`+M,J=yield this.getSignatureKey(N.secretAccessKey,y,w,n),q=m.toHex(yield this.hmac(D,J)),$=x+"&X-Amz-Signature="+q;return t+"://"+r+c+"?"+$})}constructor(e){this.chimeClient=e}},"DefaultSigV4");l.default=s},"dWP+":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isVideoTransformDevice=void 0;function S(h){return!!h&&typeof h=="object"&&"transformStream"in h&&"stop"in h&&"intrinsicDevice"in h}o(S,"isVideoTransformDevice"),l.isVideoTransformDevice=S},dWQL:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{equals(u){return this.videoWidth===u.videoWidth&&this.videoHeight===u.videoHeight&&this.videoFrameRate===u.videoFrameRate}constructor(u,m,a){this.videoWidth=u,this.videoHeight=m,this.videoFrameRate=a}},"VideoQualitySettings");l.default=S,S.VideoDisabled=new S(0,0,0),S.VideoResolutionHD=new S(1280,720,30),S.VideoResolutionFHD=new S(1920,1080,30),S.VideoResolutionUHD=new S(3840,2160,30)},dXzy:function(j,l){function f(S,h,u){return h in S?Object.defineProperty(S,h,{value:u,enumerable:!0,configurable:!0,writable:!0}):S[h]=u,S}o(f,"_defineProperty"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},da6e:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("Aplu");let h=o(class{start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(m){m===0?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):m<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(m,a,s){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",a),this.statsCollector.logLatency("ping_pong_clock_skew",s),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(m){let a=0,s=0;const i=m.getObservableMetrics(),e=i.audioPacketsReceived,t=i.audioPacketsReceivedFractionLoss,n=i.audioSpeakerDelayMs;if(typeof n=="number"&&!isNaN(n)&&this.connectionHealthData.setAudioSpeakerDelayMs(n),typeof e=="number"&&typeof t=="number"){if(a=e,s=t,a<0||s<0)return}else return;this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,a),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,s),a>0?(this.hasSeenValidPacketMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidPacketMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(a===0||s>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),typeof i.audioPacketsSent=="number"&&this.updateAudioPacketsSentInConnectionHealth(i.audioPacketsSent),this.updateConnectionHealth()}updateAudioPacketsSentInConnectionHealth(m){m>0?this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(0):this.connectionHealthData.setConsecutiveStatsWithNoAudioPacketsSent(this.connectionHealthData.consecutiveStatsWithNoAudioPacketsSent+1)}addToMinuteWindow(m,a){m.unshift(a),m.length>60&&m.pop()}updateConnectionHealth(){this.audioVideoController.forEachObserver(m=>{S.Maybe.of(m.connectionHealthDidChange).map(a=>a.bind(m)(this.connectionHealthData.clone()))})}constructor(m,a,s,i,e){this.audioVideoController=m,this.realtimeController=a,this.connectionHealthData=s,this.pingPong=i,this.statsCollector=e,this.isActive=!1,this.hasSeenValidPacketMetricsBefore=!1,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(t=>{this.isActive&&this.receiveSignalStrengthChange(t)})}},"SignalingAndMetricsConnectionMonitor");l.default=h},dazq:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3,this.audioOutputFrequency=440,this.audioOutputGain=.1}},"MeetingReadinessCheckerConfiguration");l.default=S},dhcM:function(j,l,f){"use strict";var S=f("FLqD"),h=f("kt0j"),u=Object(h.a)(function(m,a,s,i){Object(S.a)(m,a,s,i)});l.a=u},dmnA:function(j,l,f){"use strict";j.exports=f("fCza")},duQQ:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isMsWindow=void 0;var S=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function h(m){return"MSInputMethodContext"in m&&"msCrypto"in m}o(h,"quacksLikeAnMsWindow");function u(m){if(h(m)&&m.msCrypto.subtle!==void 0){var a=m.msCrypto,s=a.getRandomValues,i=a.subtle;return S.map(function(e){return i[e]}).concat(s).every(function(e){return typeof e=="function"})}return!1}o(u,"isMsWindow"),l.isMsWindow=u},"e/M0":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("j+uH"));let u=o(class extends h.default{run(){return this.fn().then(()=>{})}constructor(a,s,i="RunnableTask"){super(a),this.fn=s,this.taskName=i}},"RunnableTask");l.default=u},"e/ca":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("uctb"));let u=o(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,s){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${s}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,s=h.default.WARN){this.name=a,this.level=s}},"ConsoleLogger");l.default=u},"e/nb":function(j,l,f){"use strict";f.r(l),f.d(l,"__extends",function(){return h}),f.d(l,"__assign",function(){return u}),f.d(l,"__rest",function(){return m}),f.d(l,"__decorate",function(){return a}),f.d(l,"__param",function(){return s}),f.d(l,"__metadata",function(){return i}),f.d(l,"__awaiter",function(){return e}),f.d(l,"__generator",function(){return t}),f.d(l,"__createBinding",function(){return n}),f.d(l,"__exportStar",function(){return r}),f.d(l,"__values",function(){return c}),f.d(l,"__read",function(){return p}),f.d(l,"__spread",function(){return g}),f.d(l,"__spreadArrays",function(){return d}),f.d(l,"__await",function(){return y}),f.d(l,"__asyncGenerator",function(){return E}),f.d(l,"__asyncDelegator",function(){return w}),f.d(l,"__asyncValues",function(){return k}),f.d(l,"__makeTemplateObject",function(){return V}),f.d(l,"__importStar",function(){return F}),f.d(l,"__importDefault",function(){return N}),f.d(l,"__classPrivateFieldGet",function(){return P}),f.d(l,"__classPrivateFieldSet",function(){return x});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var S=o(function(O,M){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,J){D.__proto__=J}||function(D,J){for(var q in J)J.hasOwnProperty(q)&&(D[q]=J[q])},S(O,M)},"extendStatics");function h(O,M){S(O,M);function D(){this.constructor=O}o(D,"__"),O.prototype=M===null?Object.create(M):(D.prototype=M.prototype,new D)}o(h,"__extends");var u=o(function(){return u=Object.assign||o(function(M){for(var D,J=1,q=arguments.length;J<q;J++){D=arguments[J];for(var $ in D)Object.prototype.hasOwnProperty.call(D,$)&&(M[$]=D[$])}return M},"__assign"),u.apply(this,arguments)},"__assign");function m(O,M){var D={};for(var J in O)Object.prototype.hasOwnProperty.call(O,J)&&M.indexOf(J)<0&&(D[J]=O[J]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var q=0,J=Object.getOwnPropertySymbols(O);q<J.length;q++)M.indexOf(J[q])<0&&Object.prototype.propertyIsEnumerable.call(O,J[q])&&(D[J[q]]=O[J[q]]);return D}o(m,"__rest");function a(O,M,D,J){var q=arguments.length,$=q<3?M:J===null?J=Object.getOwnPropertyDescriptor(M,D):J,de;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(O,M,D,J);else for(var Ee=O.length-1;Ee>=0;Ee--)(de=O[Ee])&&($=(q<3?de($):q>3?de(M,D,$):de(M,D))||$);return q>3&&$&&Object.defineProperty(M,D,$),$}o(a,"__decorate");function s(O,M){return function(D,J){M(D,J,O)}}o(s,"__param");function i(O,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,M)}o(i,"__metadata");function e(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})}o(e,"__awaiter");function t(O,M){var D={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},J,q,$,de;return de={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de;function Ee(ye){return function(Be){return _e([ye,Be])}}function _e(ye){if(J)throw new TypeError("Generator is already executing.");for(;D;)try{if(J=1,q&&($=ye[0]&2?q.return:ye[0]?q.throw||(($=q.return)&&$.call(q),0):q.next)&&!($=$.call(q,ye[1])).done)return $;switch(q=0,$&&(ye=[ye[0]&2,$.value]),ye[0]){case 0:case 1:$=ye;break;case 4:return D.label++,{value:ye[1],done:!1};case 5:D.label++,q=ye[1],ye=[0];continue;case 7:ye=D.ops.pop(),D.trys.pop();continue;default:if($=D.trys,!($=$.length>0&&$[$.length-1])&&(ye[0]===6||ye[0]===2)){D=0;continue}if(ye[0]===3&&(!$||ye[1]>$[0]&&ye[1]<$[3])){D.label=ye[1];break}if(ye[0]===6&&D.label<$[1]){D.label=$[1],$=ye;break}if($&&D.label<$[2]){D.label=$[2],D.ops.push(ye);break}$[2]&&D.ops.pop(),D.trys.pop();continue}ye=M.call(O,D)}catch(Be){ye=[6,Be],q=0}finally{J=$=0}if(ye[0]&5)throw ye[1];return{value:ye[0]?ye[1]:void 0,done:!0}}}o(t,"__generator");function n(O,M,D,J){J===void 0&&(J=D),O[J]=M[D]}o(n,"__createBinding");function r(O,M){for(var D in O)D!=="default"&&!M.hasOwnProperty(D)&&(M[D]=O[D])}o(r,"__exportStar");function c(O){var M=typeof Symbol=="function"&&Symbol.iterator,D=M&&O[M],J=0;if(D)return D.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&J>=O.length&&(O=void 0),{value:O&&O[J++],done:!O}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}o(c,"__values");function p(O,M){var D=typeof Symbol=="function"&&O[Symbol.iterator];if(!D)return O;var J=D.call(O),q,$=[],de;try{for(;(M===void 0||M-- >0)&&!(q=J.next()).done;)$.push(q.value)}catch(Ee){de={error:Ee}}finally{try{q&&!q.done&&(D=J.return)&&D.call(J)}finally{if(de)throw de.error}}return $}o(p,"__read");function g(){for(var O=[],M=0;M<arguments.length;M++)O=O.concat(p(arguments[M]));return O}o(g,"__spread");function d(){for(var O=0,M=0,D=arguments.length;M<D;M++)O+=arguments[M].length;for(var J=Array(O),q=0,M=0;M<D;M++)for(var $=arguments[M],de=0,Ee=$.length;de<Ee;de++,q++)J[q]=$[de];return J}o(d,"__spreadArrays");function y(O){return this instanceof y?(this.v=O,this):new y(O)}o(y,"__await");function E(O,M,D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=D.apply(O,M||[]),q,$=[];return q={},de("next"),de("throw"),de("return"),q[Symbol.asyncIterator]=function(){return this},q;function de(Ve){J[Ve]&&(q[Ve]=function(gt){return new Promise(function(dt,Je){$.push([Ve,gt,dt,Je])>1||Ee(Ve,gt)})})}function Ee(Ve,gt){try{_e(J[Ve](gt))}catch(dt){pt($[0][3],dt)}}function _e(Ve){Ve.value instanceof y?Promise.resolve(Ve.value.v).then(ye,Be):pt($[0][2],Ve)}function ye(Ve){Ee("next",Ve)}function Be(Ve){Ee("throw",Ve)}function pt(Ve,gt){Ve(gt),$.shift(),$.length&&Ee($[0][0],$[0][1])}}o(E,"__asyncGenerator");function w(O){var M,D;return M={},J("next"),J("throw",function(q){throw q}),J("return"),M[Symbol.iterator]=function(){return this},M;function J(q,$){M[q]=O[q]?function(de){return(D=!D)?{value:y(O[q](de)),done:q==="return"}:$?$(de):de}:$}}o(w,"__asyncDelegator");function k(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=O[Symbol.asyncIterator],D;return M?M.call(O):(O=typeof c=="function"?c(O):O[Symbol.iterator](),D={},J("next"),J("throw"),J("return"),D[Symbol.asyncIterator]=function(){return this},D);function J($){D[$]=O[$]&&function(de){return new Promise(function(Ee,_e){de=O[$](de),q(Ee,_e,de.done,de.value)})}}function q($,de,Ee,_e){Promise.resolve(_e).then(function(ye){$({value:ye,done:Ee})},de)}}o(k,"__asyncValues");function V(O,M){return Object.defineProperty?Object.defineProperty(O,"raw",{value:M}):O.raw=M,O}o(V,"__makeTemplateObject");function F(O){if(O&&O.__esModule)return O;var M={};if(O!=null)for(var D in O)Object.hasOwnProperty.call(O,D)&&(M[D]=O[D]);return M.default=O,M}o(F,"__importStar");function N(O){return O&&O.__esModule?O:{default:O}}o(N,"__importDefault");function P(O,M){if(!M.has(O))throw new TypeError("attempted to get private field on non-instance");return M.get(O)}o(P,"__classPrivateFieldGet");function x(O,M,D){if(!M.has(O))throw new TypeError("attempted to set private field on non-instance");return M.set(O,D),D}o(x,"__classPrivateFieldSet")},e0ae:function(j,l,f){"use strict";f.r(l),function(S){f.d(l,"BrowserInfo",function(){return u}),f.d(l,"NodeInfo",function(){return m}),f.d(l,"SearchBotDeviceInfo",function(){return a}),f.d(l,"BotInfo",function(){return s}),f.d(l,"ReactNativeInfo",function(){return i}),f.d(l,"detect",function(){return p}),f.d(l,"browserName",function(){return d}),f.d(l,"parseUserAgent",function(){return y}),f.d(l,"detectOS",function(){return E}),f.d(l,"getNodeVersion",function(){return w});var h=function(V,F,N){if(N||arguments.length===2)for(var P=0,x=F.length,O;P<x;P++)(O||!(P in F))&&(O||(O=Array.prototype.slice.call(F,0,P)),O[P]=F[P]);return V.concat(O||Array.prototype.slice.call(F))},u=function(){function V(F,N,P){this.name=F,this.version=N,this.os=P,this.type="browser"}return o(V,"BrowserInfo"),V}(),m=function(){function V(F){this.version=F,this.type="node",this.name="node",this.os=S.platform}return o(V,"NodeInfo"),V}(),a=function(){function V(F,N,P,x){this.name=F,this.version=N,this.os=P,this.bot=x,this.type="bot-device"}return o(V,"SearchBotDeviceInfo"),V}(),s=function(){function V(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return o(V,"BotInfo"),V}(),i=function(){function V(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return o(V,"ReactNativeInfo"),V}(),e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,t=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,n=3,r=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",e]],c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p(V){return V?y(V):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new i:typeof navigator<"u"?y(navigator.userAgent):w()}o(p,"detect");function g(V){return V!==""&&r.reduce(function(F,N){var P=N[0],x=N[1];if(F)return F;var O=x.exec(V);return!!O&&[P,O]},!1)}o(g,"matchUserAgent");function d(V){var F=g(V);return F?F[0]:null}o(d,"browserName");function y(V){var F=g(V);if(!F)return null;var N=F[0],P=F[1];if(N==="searchbot")return new s;var x=P[1]&&P[1].split(".").join("_").split("_").slice(0,3);x?x.length<n&&(x=h(h([],x,!0),k(n-x.length),!0)):x=[];var O=x.join("."),M=E(V),D=t.exec(V);return D&&D[1]?new a(N,O,M,D[1]):new u(N,O,M)}o(y,"parseUserAgent");function E(V){for(var F=0,N=c.length;F<N;F++){var P=c[F],x=P[0],O=P[1],M=O.exec(V);if(M)return x}return null}o(E,"detectOS");function w(){var V=typeof S<"u"&&S.version;return V?new m(S.version.slice(1)):null}o(w,"getNodeVersion");function k(V){for(var F=[],N=0;N<V;N++)F.push("0");return F}o(k,"createVersionParts")}.call(this,f("8oxB"))},e0fW:function(j,l){function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o(f,"_nonIterableSpread"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},e2MG:function(j,l,f){"use strict";(function(S){var h=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(f("8wPz")),a=u(f("91j7")),s=u(f("uctb"));let i=o(class Zf{addEventListener(){!this.eventListener||!("window"in S)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in S)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(t){s.default.DEBUG<this.logLevel||(typeof t=="string"?this.log(s.default.DEBUG,t):t?this.log(s.default.DEBUG,t()):this.log(s.default.DEBUG,""+t))}info(t){this.log(s.default.INFO,t)}warn(t){this.log(s.default.WARN,t)}error(t){this.log(s.default.ERROR,t)}setLogLevel(t){this.logLevel=t}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>h(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const t=this.logCapture.slice(0,this.batchSize),n=this.makeRequestBody(t);try{(yield fetch(this.url,Object.assign({method:"POST",body:n},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(t.length))}catch(r){console.warn("[POSTLogger] "+r.message)}finally{this.lock=!1}}))}stop(){var t;(t=this.intervalScheduler)===null||t===void 0||t.stop(),this.intervalScheduler=void 0,this.removeEventListener();const n=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,n)}destroy(){return h(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(t){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:t}))}log(t,n){if(t<this.logLevel)return;const r=Date.now();this.logCapture.push(new a.default(this.sequenceNumber,n,r,s.default[t])),this.sequenceNumber+=1}constructor(t){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:n,batchSize:r=Zf.BATCH_SIZE,intervalMs:c=Zf.INTERVAL_MS,logLevel:p=s.default.WARN,metadata:g,headers:d}=t;this.url=n,this.batchSize=r,this.intervalMs=c,this.logLevel=p,this.metadata=g,this.headers=d,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=i,i.BATCH_SIZE=85,i.INTERVAL_MS=2e3}).call(this,f("yLpj"))},eFki:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Xv43")),m=h(f("h8NR")),a=15;let s=o(class{destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy();this.timer.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?a:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.hasStarted&&(this.hasStarted=!1,this.forEachObserver(e=>{e.processingDidStop&&e.processingDidStop()}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return S(this,void 0,void 0,function*(){return this.inputVideoStream})}getActiveOutputMediaStream(){return this.isOutputMediaStreamActive()?this.outputMediaStream:(this.outputMediaStream=this.canvasOutput.captureStream(this.framerate),this.cloneInputAudioTracksToOutput(),this.outputMediaStream)}setInputMediaStream(e){return S(this,void 0,void 0,function*(){if(!e){this.stop();return}if(e.getVideoTracks().length===0){this.logger.error("No video tracks in input media stream, ignoring");return}this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${JSON.stringify(t)}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const n=new u.default(this.canvasInput);this.sourceBuffers.push(n),this.videoInput.load();try{yield this.videoInput.play()}catch{this.logger.warn("Video element play() overrided by another load().")}this.cloneInputAudioTracksToOutput()})}cloneInputAudioTracksToOutput(){if(!this.isOutputMediaStreamActive()||this.inputVideoStream===null){this.logger.info("Not cloning input audio tracks to output, do not have media streams ready");return}for(const e of this.outputMediaStream.getAudioTracks())this.logger.info(`Removing audio track ${e.id} from output stream`),this.outputMediaStream.removeTrack(e);for(const e of this.inputVideoStream.getAudioTracks())this.logger.info(`Adding audio track ${e.id} to output stream`),this.outputMediaStream.addTrack(e)}isOutputMediaStreamActive(){return this.outputMediaStream&&this.outputMediaStream.active}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout(()=>{e(t)},0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}constructor(e,t,n=new m.default){this.logger=e,this.stages=t,this.fr=a,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=r=>S(this,void 0,void 0,function*(){if(!this.inputVideoStream)return;const c=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let p=[];p.push(this.sourceBuffers[0]);try{for(const V of this.processors)p=yield V.process(p)}catch{this.forEachObserver(F=>{F.processingDidFailToStart&&F.processingDidFailToStart()});return}this.destBuffers=p;let g;try{g=yield this.destBuffers[0].asCanvasImageSource()}catch{this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver(F=>{F.processingDidFailToStart&&F.processingDidFailToStart()}));return}const d=g.width,y=g.height;d!==0&&y!==0&&(this.canvasOutput.width!==d&&this.canvasOutput.height!==y&&(this.canvasOutput.width=d,this.canvasOutput.height=y),this.outputCtx.drawImage(g,0,0,d,y,0,0,d,y),this.hasStarted||(this.hasStarted=!0,this.forEachObserver(V=>{V.processingDidStart&&V.processingDidStart()})));const E=performance.now()-c,w=1e3*2/this.framerate-E,k=Math.max(0,1e3/this.framerate-E);w<=0&&this.forEachObserver(V=>{V.processingLatencyTooHigh&&V.processingLatencyTooHigh(E)}),yield this.timer.start(k,this.process.bind(this))}),this.timer=n}},"DefaultVideoFrameProcessorPipeline");l.default=s},eP7z:function(j,l,f){"use strict";function S(h,u){return h<u}o(S,"baseLt"),l.a=S},eWGP:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(n,r,c,p){function g(d){return d instanceof c?d:new c(function(y){y(d)})}return o(g,"adopt"),new(c||(c=Promise))(function(d,y){function E(V){try{k(p.next(V))}catch(F){y(F)}}o(E,"fulfilled");function w(V){try{k(p.throw(V))}catch(F){y(F)}}o(w,"rejected");function k(V){V.done?d(V.value):g(V.value).then(E,w)}o(k,"step"),k((p=p.apply(n,r||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusDeviceTransformer=void 0;const u=f("sudc"),m=f("VCUZ"),a=h(f("ac3q")),s=h(f("725M")),i=h(f("aMTh")),e=h(f("1ZHK"));let t=o(class Da{static isSupported(r,c){var p,g;const d=Da.defaultFetchBehavior(),y=c!=null&&c.logger?new s.default(c.logger):void 0,E={fetchBehavior:d,logger:y};if(m.isIFramed()){if((c==null?void 0:c.allowIFrame)===!1)return(p=c==null?void 0:c.logger)===null||p===void 0||p.error("Amazon Voice Focus support check inside iframe: not supported."),Promise.resolve(!1);(g=c==null?void 0:c.logger)===null||g===void 0||g.warn("Amazon Voice Focus support check inside iframe: not recommended.")}return u.VoiceFocus.isSupported(Da.augmentSpec(r),E)}static create(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2?arguments[2]:void 0,g=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0;var y,E,w;return S(this,void 0,void 0,function*(){g&&g.Meeting.Meeting&&(g=g.Meeting);const k=((w=(E=(y=g==null?void 0:g.Meeting)===null||y===void 0?void 0:y.MeetingFeatures)===null||E===void 0?void 0:E.Audio)===null||w===void 0?void 0:w.EchoReduction)==="AVAILABLE",V=p&&p.supported===!0&&p.model.name==="ns_es"&&!k,F=r.name==="ns_es"&&!k;if(V||F)throw new Error("Echo Reduction requested but not enabled.");const N=new Da(r,c,p);return yield N.init(),N})}static configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return S(this,void 0,void 0,function*(){return new Da(r,c,void 0).configure(!0)})}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(r,c){return S(this,void 0,void 0,function*(){if(this.supported)try{const[g,d]=yield this.allocateVoiceFocus(!0),y=Object.assign(Object.assign({},c),{es:this.spec.name==="ns_es"});return new i.default(r,g,d,y)}catch{return}})}static destroyVoiceFocus(r){var c;return S(this,void 0,void 0,function*(){(c=r==null?void 0:r.vf)===null||c===void 0||c.destroy()})}static augmentSpec(r){return!r||!r.assetGroup&&!r.revisionID?Object.assign(Object.assign({},r),{assetGroup:Da.currentSDKAssetGroup()}):r}configure(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return S(this,void 0,void 0,function*(){const c={fetchBehavior:this.fetchBehavior,preResolve:r,logger:this.vfLogger};return u.VoiceFocus.configure(this.spec,c)})}init(){var r;return S(this,void 0,void 0,function*(){this.configuration||(this.configuration=this.configure());const c=yield this.configuration;if(!c.supported){this.supported=!1;return}this.pendingVoiceFocus=this.createVoiceFocus(c,this.preload);try{yield this.pendingVoiceFocus}catch(p){(r=this.logger)===null||r===void 0||r.error(`Unable to initialize Amazon Voice Focus: ${p}`),this.supported=!1}})}createVoiceFocus(r,c){return S(this,void 0,void 0,function*(){const p=new e.default;return this.vf=yield u.VoiceFocus.init(r,{delegate:p,preload:c,logger:this.vfLogger}),[this.vf,p]})}allocateVoiceFocus(r){return S(this,void 0,void 0,function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const c=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,c}return this.createVoiceFocus(yield this.configuration,r)})}static majorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return a.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const r=this.majorVersion();return r?`sdk-${r}`:"stable-v1"}static defaultFetchBehavior(){const r=Da.majorMinorVersion()||"unknown",c=a.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(r)}&ua=${encodeURIComponent(c)}`}}constructor(r,{preload:c=!0,logger:p,fetchBehavior:g=Da.defaultFetchBehavior()},d){this.spec=r,this.supported=!0,this.logger=p,this.vfLogger=p?new s.default(p):void 0,this.preload=c,this.fetchBehavior=g,this.spec=Da.augmentSpec(this.spec),d&&(this.configuration=Promise.resolve(d))}},"VoiceFocusDeviceTransformer");l.VoiceFocusDeviceTransformer=t,l.default=t},eeAN:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function S(h){if(!Uint32Array.from){for(var u=new Uint32Array(h.length),m=0;m<h.length;)u[m]=h[m],m+=1;return u}return Uint32Array.from(h)}o(S,"uint32ArrayFrom"),l.uint32ArrayFrom=S},eeYi:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("K4CH"),m=f("rwhO"),a=h(f("Y2s1")),s=h(f("MFJ1")),i=h(f("hAj8")),e=h(f("6/h7")),t=h(f("59sL")),n=h(f("7H4U"));let r=o(class Hl{addObserver(p){this.observerSet.add(p)}removeObserver(p){this.observerSet.delete(p)}forEachObserver(p){for(const g of this.observerSet)e.default.nextTick(()=>{this.observerSet.has(g)&&p(g)})}publishEvent(p,g){return S(this,void 0,void 0,function*(){const d=Date.now();this.meetingHistoryStates.push({name:p,timestampMs:d});const y=Object.freeze(Object.assign(this.getAttributes(d),g));this.forEachObserver(E=>{E.eventDidReceive(p,y)}),this.reportEvent(p,d,g)})}reportEvent(p,g,d){var y;return S(this,void 0,void 0,function*(){let E;try{d&&(E=n.default(d)),yield(y=this.eventReporter)===null||y===void 0?void 0:y.reportEvent(g,p,E)}catch(w){this.logger.error(`Error reporting event ${w}`)}})}setupEventReporter(p,g,d){if(d)this._eventReporter=d;else if(p.urls){const y=p.urls.eventIngestionURL;if(y){this.logger.info("Event ingestion URL is present in the configuration");const{meetingId:E,credentials:{attendeeId:w,joinToken:k}}=p,V=new i.default(E,w,k),F=new a.default(V,y);this._eventReporter=new s.default(F,g)}}}getAttributes(p){var g,d;return{attendeeId:this.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:typeof this.configuration.externalMeetingId=="string"?this.configuration.externalMeetingId:"",externalUserId:this.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.configuration.meetingId,osName:((g=this.parserResult)===null||g===void 0?void 0:g.os.name)||Hl.UNAVAILABLE,osVersion:((d=this.parserResult)===null||d===void 0?void 0:d.os.version)||Hl.UNAVAILABLE,sdkVersion:t.default.sdkVersion,sdkName:t.default.sdkName,timestampMs:p}}get eventReporter(){return this._eventReporter}destroy(){return S(this,void 0,void 0,function*(){m.isDestroyable(this.eventReporter)&&(yield this.eventReporter.destroy()),this.logger=void 0,this.configuration=void 0,this._eventReporter=void 0,this.destroyed=!0})}constructor(p,g,d){var y,E,w,k,V,F,N;this.meetingHistoryStates=[],this.observerSet=new Set,this.destroyed=!1,this.logger=g,this.configuration=p,this.setupEventReporter(p,g,d);try{this.parserResult=navigator&&navigator.userAgent?new u.UAParser(navigator.userAgent).getResult():null}catch(P){this.logger.error(P.message)}this.browserMajorVersion=((w=(E=(y=this.parserResult)===null||y===void 0?void 0:y.browser)===null||E===void 0?void 0:E.version)===null||w===void 0?void 0:w.split(".")[0])||Hl.UNAVAILABLE,this.browserName=((k=this.parserResult)===null||k===void 0?void 0:k.browser.name)||Hl.UNAVAILABLE,this.browserVersion=((V=this.parserResult)===null||V===void 0?void 0:V.browser.version)||Hl.UNAVAILABLE,this.deviceName=[((F=this.parserResult)===null||F===void 0?void 0:F.device.vendor)||"",((N=this.parserResult)===null||N===void 0?void 0:N.device.model)||""].join(" ").trim()||Hl.UNAVAILABLE}},"DefaultEventController");l.default=r,r.UNAVAILABLE="Unavailable"},egzF:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("my46")),m=h(f("94P3")),a=h(f("/N6y")),s=h(f("ppUg")),i=h(f("F7zz")),e=f("Aplu"),t=h(f("VgUL")),n=h(f("r3TB"));let r=o(class{static createContentShareMeetingSessionConfigure(p){const g=new m.default;return g.meetingId=p.meetingId,g.externalMeetingId=p.externalMeetingId,g.urls=p.urls,g.disablePeriodicKeyframeRequestOnContentSender=p.disablePeriodicKeyframeRequestOnContentSender,g.credentials=new a.default,g.credentials.attendeeId=p.credentials.attendeeId+n.default.Modality,g.credentials.externalUserId=p.credentials.externalUserId,g.credentials.joinToken=p.credentials.joinToken+n.default.Modality,g.meetingFeatures=p.meetingFeatures.clone(),g}setContentAudioProfile(p){this.contentAudioVideo.setAudioProfile(p)}enableSimulcastForContentShare(p,g){p?(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=new t.default(this.contentAudioVideo.logger,g)):(this.contentAudioVideo.configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.contentAudioVideo.configuration.videoUplinkBandwidthPolicy=void 0)}enableSVCForContentShare(p){p?this.contentAudioVideo.configuration.enableSVC=!0:this.contentAudioVideo.configuration.enableSVC=!1}startContentShare(p){return S(this,void 0,void 0,function*(){if(p){if(this.contentAudioVideo.configuration.meetingFeatures.contentMaxResolution===u.default.VideoDisabled){this.contentAudioVideo.logger.info("Could not start content because max content resolution was set to None");return}this.mediaStreamBroker.mediaStream=p;for(let g=0;g<this.mediaStreamBroker.mediaStream.getTracks().length;g++)this.mediaStreamBroker.mediaStream.getTracks()[g].addEventListener("ended",()=>{this.stopContentShare()});this.contentAudioVideo.start()}})}startContentShareFromScreenCapture(p,g){return S(this,void 0,void 0,function*(){const d=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(p,g);return yield this.startContentShare(d),d})}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidPause).map(g=>g.call(p))})}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver(p=>{e.Maybe.of(p.contentShareDidUnpause).map(g=>g.call(p))})}setContentShareVideoCodecPreferences(p){this.contentAudioVideo.setVideoCodecSendPreferences(p)}destroy(){return S(this,void 0,void 0,function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)})}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(p){this.observerQueue.add(p)}removeContentShareObserver(p){this.observerQueue.delete(p)}forEachContentShareObserver(p){for(const g of this.observerQueue)i.default.nextTick(()=>{this.observerQueue.has(g)&&p(g)})}audioVideoDidStart(){var p;((p=this.mediaStreamBroker.mediaStream)===null||p===void 0?void 0:p.getVideoTracks().length)>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}audioVideoDidStop(p){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver(g=>{e.Maybe.of(g.contentShareDidStop).map(d=>d.call(g))})}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence((p,g,d,y)=>{const E=new s.default(p).hasModality(s.default.MODALITY_CONTENT),w=new s.default(p).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!E||!w||!g||this.contentShareTile)return;const k=this.mediaStreamBroker.mediaStream;if(k!=null&&k.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const V=k.getVideoTracks()[0];let F,N;if(V.getSettings){const P=V.getSettings();F=P.width,N=P.height}else{const P=V.getCapabilities();F=P.width,N=P.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,k,F,N,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver(V=>{e.Maybe.of(V.contentShareDidStart).map(F=>F.call(V))})})}constructor(p,g,d){this.mediaStreamBroker=p,this.contentAudioVideo=g,this.attendeeAudioVideo=d,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}},"DefaultContentShareController");l.default=r},epkm:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptItem");l.default=S},evlv:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u,m,a){this.type=u,this.headers=m,this.payload=a}},"Message");l.default=S},ezoW:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SimulcastLayers=void 0;var S;(function(h){h[h.Low=0]="Low",h[h.LowAndMedium=1]="LowAndMedium",h[h.LowAndHigh=2]="LowAndHigh",h[h.Medium=3]="Medium",h[h.MediumAndHigh=4]="MediumAndHigh",h[h.High=5]="High"})(S=l.SimulcastLayers||(l.SimulcastLayers={})),l.default=S},"f/KM":function(j,l,f){"use strict";f.r(l),f.d(l,"fromUtf8",function(){return a}),f.d(l,"toUtf8",function(){return s});const S=o(i=>{const e=[];for(let t=0,n=i.length;t<n;t++){const r=i.charCodeAt(t);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192,r&63|128);else if(t+1<i.length&&(r&64512)===55296&&(i.charCodeAt(t+1)&64512)===56320){const c=65536+((r&1023)<<10)+(i.charCodeAt(++t)&1023);e.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else e.push(r>>12|224,r>>6&63|128,r&63|128)}return Uint8Array.from(e)},"fromUtf8"),h=o(i=>{let e="";for(let t=0,n=i.length;t<n;t++){const r=i[t];if(r<128)e+=String.fromCharCode(r);else if(192<=r&&r<224){const c=i[++t];e+=String.fromCharCode((r&31)<<6|c&63)}else if(240<=r&&r<365){const p="%"+[r,i[++t],i[++t],i[++t]].map(g=>g.toString(16)).join("%");e+=decodeURIComponent(p)}else e+=String.fromCharCode((r&15)<<12|(i[++t]&63)<<6|i[++t]&63)}return e},"toUtf8");function u(i){return new TextEncoder().encode(i)}o(u,"whatwgEncodingApi_fromUtf8");function m(i){return new TextDecoder("utf-8").decode(i)}o(m,"whatwgEncodingApi_toUtf8");const a=o(i=>typeof TextEncoder=="function"?u(i):S(i),"dist_es_fromUtf8"),s=o(i=>typeof TextDecoder=="function"?m(i):h(i),"dist_es_toUtf8")},f2XL:function(j,l,f){"use strict";var S=f("dmnA"),h=S.Reader,u=S.Writer,m=S.util,a=S.roots.default||(S.roots.default={});a.SdkSignalFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkSignalFrame"),s.prototype.timestampMs=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.type=1,s.prototype.error=null,s.prototype.join=null,s.prototype.joinack=null,s.prototype.sub=null,s.prototype.suback=null,s.prototype.index=null,s.prototype.pause=null,s.prototype.leave=null,s.prototype.leaveAck=null,s.prototype.bitrates=null,s.prototype.audioControl=null,s.prototype.audioMetadata=null,s.prototype.audioStreamIdInfo=null,s.prototype.pingPong=null,s.prototype.audioStatus=null,s.prototype.clientMetric=null,s.prototype.dataMessage=null,s.prototype.remoteVideoUpdate=null,s.prototype.primaryMeetingJoin=null,s.prototype.primaryMeetingJoinAck=null,s.prototype.primaryMeetingLeave=null,s.prototype.notification=null,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),e.error!=null&&Object.hasOwnProperty.call(e,"error")&&a.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),e.join!=null&&Object.hasOwnProperty.call(e,"join")&&a.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),e.joinack!=null&&Object.hasOwnProperty.call(e,"joinack")&&a.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),e.sub!=null&&Object.hasOwnProperty.call(e,"sub")&&a.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),e.suback!=null&&Object.hasOwnProperty.call(e,"suback")&&a.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&a.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),e.pause!=null&&Object.hasOwnProperty.call(e,"pause")&&a.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),e.leave!=null&&Object.hasOwnProperty.call(e,"leave")&&a.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),e.leaveAck!=null&&Object.hasOwnProperty.call(e,"leaveAck")&&a.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),e.bitrates!=null&&Object.hasOwnProperty.call(e,"bitrates")&&a.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),e.audioControl!=null&&Object.hasOwnProperty.call(e,"audioControl")&&a.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),e.audioMetadata!=null&&Object.hasOwnProperty.call(e,"audioMetadata")&&a.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),e.audioStreamIdInfo!=null&&Object.hasOwnProperty.call(e,"audioStreamIdInfo")&&a.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),e.pingPong!=null&&Object.hasOwnProperty.call(e,"pingPong")&&a.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&a.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),e.clientMetric!=null&&Object.hasOwnProperty.call(e,"clientMetric")&&a.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),e.dataMessage!=null&&Object.hasOwnProperty.call(e,"dataMessage")&&a.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),e.remoteVideoUpdate!=null&&Object.hasOwnProperty.call(e,"remoteVideoUpdate")&&a.SdkRemoteVideoUpdateFrame.encode(e.remoteVideoUpdate,t.uint32(202).fork()).ldelim(),e.primaryMeetingJoin!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoin")&&a.SdkPrimaryMeetingJoinFrame.encode(e.primaryMeetingJoin,t.uint32(210).fork()).ldelim(),e.primaryMeetingJoinAck!=null&&Object.hasOwnProperty.call(e,"primaryMeetingJoinAck")&&a.SdkPrimaryMeetingJoinAckFrame.encode(e.primaryMeetingJoinAck,t.uint32(218).fork()).ldelim(),e.primaryMeetingLeave!=null&&Object.hasOwnProperty.call(e,"primaryMeetingLeave")&&a.SdkPrimaryMeetingLeaveFrame.encode(e.primaryMeetingLeave,t.uint32(226).fork()).ldelim(),e.notification!=null&&Object.hasOwnProperty.call(e,"notification")&&a.SdkNotificationFrame.encode(e.notification,t.uint32(282).fork()).ldelim(),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkSignalFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.timestampMs=e.uint64();break;case 2:r.type=e.int32();break;case 3:r.error=a.SdkErrorFrame.decode(e,e.uint32());break;case 4:r.join=a.SdkJoinFrame.decode(e,e.uint32());break;case 5:r.joinack=a.SdkJoinAckFrame.decode(e,e.uint32());break;case 6:r.sub=a.SdkSubscribeFrame.decode(e,e.uint32());break;case 7:r.suback=a.SdkSubscribeAckFrame.decode(e,e.uint32());break;case 8:r.index=a.SdkIndexFrame.decode(e,e.uint32());break;case 10:r.pause=a.SdkPauseResumeFrame.decode(e,e.uint32());break;case 11:r.leave=a.SdkLeaveFrame.decode(e,e.uint32());break;case 12:r.leaveAck=a.SdkLeaveAckFrame.decode(e,e.uint32());break;case 14:r.bitrates=a.SdkBitrateFrame.decode(e,e.uint32());break;case 17:r.audioControl=a.SdkAudioControlFrame.decode(e,e.uint32());break;case 18:r.audioMetadata=a.SdkAudioMetadataFrame.decode(e,e.uint32());break;case 19:r.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break;case 20:r.pingPong=a.SdkPingPongFrame.decode(e,e.uint32());break;case 21:r.audioStatus=a.SdkAudioStatusFrame.decode(e,e.uint32());break;case 22:r.clientMetric=a.SdkClientMetricFrame.decode(e,e.uint32());break;case 23:r.dataMessage=a.SdkDataMessageFrame.decode(e,e.uint32());break;case 25:r.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.decode(e,e.uint32());break;case 26:r.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.decode(e,e.uint32());break;case 27:r.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.decode(e,e.uint32());break;case 28:r.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.decode(e,e.uint32());break;case 35:r.notification=a.SdkNotificationFrame.decode(e,e.uint32());break;default:e.skipType(c&7);break}}if(!r.hasOwnProperty("timestampMs"))throw m.ProtocolError("missing required 'timestampMs'",{instance:r});if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isInteger(e.timestampMs)&&!(e.timestampMs&&m.isInteger(e.timestampMs.low)&&m.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 34:break}if(e.error!=null&&e.hasOwnProperty("error")){var t=a.SdkErrorFrame.verify(e.error);if(t)return"error."+t}if(e.join!=null&&e.hasOwnProperty("join")){var t=a.SdkJoinFrame.verify(e.join);if(t)return"join."+t}if(e.joinack!=null&&e.hasOwnProperty("joinack")){var t=a.SdkJoinAckFrame.verify(e.joinack);if(t)return"joinack."+t}if(e.sub!=null&&e.hasOwnProperty("sub")){var t=a.SdkSubscribeFrame.verify(e.sub);if(t)return"sub."+t}if(e.suback!=null&&e.hasOwnProperty("suback")){var t=a.SdkSubscribeAckFrame.verify(e.suback);if(t)return"suback."+t}if(e.index!=null&&e.hasOwnProperty("index")){var t=a.SdkIndexFrame.verify(e.index);if(t)return"index."+t}if(e.pause!=null&&e.hasOwnProperty("pause")){var t=a.SdkPauseResumeFrame.verify(e.pause);if(t)return"pause."+t}if(e.leave!=null&&e.hasOwnProperty("leave")){var t=a.SdkLeaveFrame.verify(e.leave);if(t)return"leave."+t}if(e.leaveAck!=null&&e.hasOwnProperty("leaveAck")){var t=a.SdkLeaveAckFrame.verify(e.leaveAck);if(t)return"leaveAck."+t}if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){var t=a.SdkBitrateFrame.verify(e.bitrates);if(t)return"bitrates."+t}if(e.audioControl!=null&&e.hasOwnProperty("audioControl")){var t=a.SdkAudioControlFrame.verify(e.audioControl);if(t)return"audioControl."+t}if(e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")){var t=a.SdkAudioMetadataFrame.verify(e.audioMetadata);if(t)return"audioMetadata."+t}if(e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")){var t=a.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo);if(t)return"audioStreamIdInfo."+t}if(e.pingPong!=null&&e.hasOwnProperty("pingPong")){var t=a.SdkPingPongFrame.verify(e.pingPong);if(t)return"pingPong."+t}if(e.audioStatus!=null&&e.hasOwnProperty("audioStatus")){var t=a.SdkAudioStatusFrame.verify(e.audioStatus);if(t)return"audioStatus."+t}if(e.clientMetric!=null&&e.hasOwnProperty("clientMetric")){var t=a.SdkClientMetricFrame.verify(e.clientMetric);if(t)return"clientMetric."+t}if(e.dataMessage!=null&&e.hasOwnProperty("dataMessage")){var t=a.SdkDataMessageFrame.verify(e.dataMessage);if(t)return"dataMessage."+t}if(e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")){var t=a.SdkRemoteVideoUpdateFrame.verify(e.remoteVideoUpdate);if(t)return"remoteVideoUpdate."+t}if(e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")){var t=a.SdkPrimaryMeetingJoinFrame.verify(e.primaryMeetingJoin);if(t)return"primaryMeetingJoin."+t}if(e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")){var t=a.SdkPrimaryMeetingJoinAckFrame.verify(e.primaryMeetingJoinAck);if(t)return"primaryMeetingJoinAck."+t}if(e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")){var t=a.SdkPrimaryMeetingLeaveFrame.verify(e.primaryMeetingLeave);if(t)return"primaryMeetingLeave."+t}if(e.notification!=null&&e.hasOwnProperty("notification")){var t=a.SdkNotificationFrame.verify(e.notification);if(t)return"notification."+t}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkSignalFrame)return e;var t=new a.SdkSignalFrame;switch(e.timestampMs!=null&&(m.Long?(t.timestampMs=m.Long.fromValue(e.timestampMs)).unsigned=!0:typeof e.timestampMs=="string"?t.timestampMs=parseInt(e.timestampMs,10):typeof e.timestampMs=="number"?t.timestampMs=e.timestampMs:typeof e.timestampMs=="object"&&(t.timestampMs=new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22;break;case"REMOTE_VIDEO_UPDATE":case 24:t.type=24;break;case"PRIMARY_MEETING_JOIN":case 25:t.type=25;break;case"PRIMARY_MEETING_JOIN_ACK":case 26:t.type=26;break;case"PRIMARY_MEETING_LEAVE":case 27:t.type=27;break;case"NOTIFICATION":case 34:t.type=34;break}if(e.error!=null){if(typeof e.error!="object")throw TypeError(".SdkSignalFrame.error: object expected");t.error=a.SdkErrorFrame.fromObject(e.error)}if(e.join!=null){if(typeof e.join!="object")throw TypeError(".SdkSignalFrame.join: object expected");t.join=a.SdkJoinFrame.fromObject(e.join)}if(e.joinack!=null){if(typeof e.joinack!="object")throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=a.SdkJoinAckFrame.fromObject(e.joinack)}if(e.sub!=null){if(typeof e.sub!="object")throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=a.SdkSubscribeFrame.fromObject(e.sub)}if(e.suback!=null){if(typeof e.suback!="object")throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=a.SdkSubscribeAckFrame.fromObject(e.suback)}if(e.index!=null){if(typeof e.index!="object")throw TypeError(".SdkSignalFrame.index: object expected");t.index=a.SdkIndexFrame.fromObject(e.index)}if(e.pause!=null){if(typeof e.pause!="object")throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=a.SdkPauseResumeFrame.fromObject(e.pause)}if(e.leave!=null){if(typeof e.leave!="object")throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=a.SdkLeaveFrame.fromObject(e.leave)}if(e.leaveAck!=null){if(typeof e.leaveAck!="object")throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=a.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(e.bitrates!=null){if(typeof e.bitrates!="object")throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=a.SdkBitrateFrame.fromObject(e.bitrates)}if(e.audioControl!=null){if(typeof e.audioControl!="object")throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=a.SdkAudioControlFrame.fromObject(e.audioControl)}if(e.audioMetadata!=null){if(typeof e.audioMetadata!="object")throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=a.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(e.audioStreamIdInfo!=null){if(typeof e.audioStreamIdInfo!="object")throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(e.pingPong!=null){if(typeof e.pingPong!="object")throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=a.SdkPingPongFrame.fromObject(e.pingPong)}if(e.audioStatus!=null){if(typeof e.audioStatus!="object")throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=a.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(e.clientMetric!=null){if(typeof e.clientMetric!="object")throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=a.SdkClientMetricFrame.fromObject(e.clientMetric)}if(e.dataMessage!=null){if(typeof e.dataMessage!="object")throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=a.SdkDataMessageFrame.fromObject(e.dataMessage)}if(e.remoteVideoUpdate!=null){if(typeof e.remoteVideoUpdate!="object")throw TypeError(".SdkSignalFrame.remoteVideoUpdate: object expected");t.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.fromObject(e.remoteVideoUpdate)}if(e.primaryMeetingJoin!=null){if(typeof e.primaryMeetingJoin!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoin: object expected");t.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.fromObject(e.primaryMeetingJoin)}if(e.primaryMeetingJoinAck!=null){if(typeof e.primaryMeetingJoinAck!="object")throw TypeError(".SdkSignalFrame.primaryMeetingJoinAck: object expected");t.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.fromObject(e.primaryMeetingJoinAck)}if(e.primaryMeetingLeave!=null){if(typeof e.primaryMeetingLeave!="object")throw TypeError(".SdkSignalFrame.primaryMeetingLeave: object expected");t.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.fromObject(e.primaryMeetingLeave)}if(e.notification!=null){if(typeof e.notification!="object")throw TypeError(".SdkSignalFrame.notification: object expected");t.notification=a.SdkNotificationFrame.fromObject(e.notification)}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(m.Long){var r=new m.Long(0,0,!0);n.timestampMs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.timestampMs=t.longs===String?"0":0;n.type=t.enums===String?"JOIN":1,n.error=null,n.join=null,n.joinack=null,n.sub=null,n.suback=null,n.index=null,n.pause=null,n.leave=null,n.leaveAck=null,n.bitrates=null,n.audioControl=null,n.audioMetadata=null,n.audioStreamIdInfo=null,n.pingPong=null,n.audioStatus=null,n.clientMetric=null,n.dataMessage=null,n.remoteVideoUpdate=null,n.primaryMeetingJoin=null,n.primaryMeetingJoinAck=null,n.primaryMeetingLeave=null,n.notification=null}return e.timestampMs!=null&&e.hasOwnProperty("timestampMs")&&(typeof e.timestampMs=="number"?n.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:n.timestampMs=t.longs===String?m.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new m.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkSignalFrame.Type[e.type]:e.type),e.error!=null&&e.hasOwnProperty("error")&&(n.error=a.SdkErrorFrame.toObject(e.error,t)),e.join!=null&&e.hasOwnProperty("join")&&(n.join=a.SdkJoinFrame.toObject(e.join,t)),e.joinack!=null&&e.hasOwnProperty("joinack")&&(n.joinack=a.SdkJoinAckFrame.toObject(e.joinack,t)),e.sub!=null&&e.hasOwnProperty("sub")&&(n.sub=a.SdkSubscribeFrame.toObject(e.sub,t)),e.suback!=null&&e.hasOwnProperty("suback")&&(n.suback=a.SdkSubscribeAckFrame.toObject(e.suback,t)),e.index!=null&&e.hasOwnProperty("index")&&(n.index=a.SdkIndexFrame.toObject(e.index,t)),e.pause!=null&&e.hasOwnProperty("pause")&&(n.pause=a.SdkPauseResumeFrame.toObject(e.pause,t)),e.leave!=null&&e.hasOwnProperty("leave")&&(n.leave=a.SdkLeaveFrame.toObject(e.leave,t)),e.leaveAck!=null&&e.hasOwnProperty("leaveAck")&&(n.leaveAck=a.SdkLeaveAckFrame.toObject(e.leaveAck,t)),e.bitrates!=null&&e.hasOwnProperty("bitrates")&&(n.bitrates=a.SdkBitrateFrame.toObject(e.bitrates,t)),e.audioControl!=null&&e.hasOwnProperty("audioControl")&&(n.audioControl=a.SdkAudioControlFrame.toObject(e.audioControl,t)),e.audioMetadata!=null&&e.hasOwnProperty("audioMetadata")&&(n.audioMetadata=a.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),e.audioStreamIdInfo!=null&&e.hasOwnProperty("audioStreamIdInfo")&&(n.audioStreamIdInfo=a.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),e.pingPong!=null&&e.hasOwnProperty("pingPong")&&(n.pingPong=a.SdkPingPongFrame.toObject(e.pingPong,t)),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=a.SdkAudioStatusFrame.toObject(e.audioStatus,t)),e.clientMetric!=null&&e.hasOwnProperty("clientMetric")&&(n.clientMetric=a.SdkClientMetricFrame.toObject(e.clientMetric,t)),e.dataMessage!=null&&e.hasOwnProperty("dataMessage")&&(n.dataMessage=a.SdkDataMessageFrame.toObject(e.dataMessage,t)),e.remoteVideoUpdate!=null&&e.hasOwnProperty("remoteVideoUpdate")&&(n.remoteVideoUpdate=a.SdkRemoteVideoUpdateFrame.toObject(e.remoteVideoUpdate,t)),e.primaryMeetingJoin!=null&&e.hasOwnProperty("primaryMeetingJoin")&&(n.primaryMeetingJoin=a.SdkPrimaryMeetingJoinFrame.toObject(e.primaryMeetingJoin,t)),e.primaryMeetingJoinAck!=null&&e.hasOwnProperty("primaryMeetingJoinAck")&&(n.primaryMeetingJoinAck=a.SdkPrimaryMeetingJoinAckFrame.toObject(e.primaryMeetingJoinAck,t)),e.primaryMeetingLeave!=null&&e.hasOwnProperty("primaryMeetingLeave")&&(n.primaryMeetingLeave=a.SdkPrimaryMeetingLeaveFrame.toObject(e.primaryMeetingLeave,t)),e.notification!=null&&e.hasOwnProperty("notification")&&(n.notification=a.SdkNotificationFrame.toObject(e.notification,t)),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="JOIN"]=1,e[i[2]="JOIN_ACK"]=2,e[i[3]="SUBSCRIBE"]=3,e[i[4]="SUBSCRIBE_ACK"]=4,e[i[5]="INDEX"]=5,e[i[7]="PAUSE"]=7,e[i[8]="RESUME"]=8,e[i[9]="LEAVE"]=9,e[i[10]="LEAVE_ACK"]=10,e[i[13]="BITRATES"]=13,e[i[16]="AUDIO_CONTROL"]=16,e[i[17]="AUDIO_METADATA"]=17,e[i[18]="AUDIO_STREAM_ID_INFO"]=18,e[i[19]="PING_PONG"]=19,e[i[20]="AUDIO_STATUS"]=20,e[i[21]="CLIENT_METRIC"]=21,e[i[22]="DATA_MESSAGE"]=22,e[i[24]="REMOTE_VIDEO_UPDATE"]=24,e[i[25]="PRIMARY_MEETING_JOIN"]=25,e[i[26]="PRIMARY_MEETING_JOIN_ACK"]=26,e[i[27]="PRIMARY_MEETING_LEAVE"]=27,e[i[34]="NOTIFICATION"]=34,e}(),s}(),a.SdkErrorFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkErrorFrame"),s.prototype.status=0,s.prototype.description="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.status!=null&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).uint32(e.status),e.description!=null&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkErrorFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.status=e.uint32();break;case 2:r.description=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.status!=null&&e.hasOwnProperty("status")&&!m.isInteger(e.status)?"status: integer expected":e.description!=null&&e.hasOwnProperty("description")&&!m.isString(e.description)?"description: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkErrorFrame)return e;var t=new a.SdkErrorFrame;return e.status!=null&&(t.status=e.status>>>0),e.description!=null&&(t.description=String(e.description)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.status=0,n.description=""),e.status!=null&&e.hasOwnProperty("status")&&(n.status=e.status),e.description!=null&&e.hasOwnProperty("description")&&(n.description=e.description),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkJoinFlags=function(){var s={},i=Object.create(s);return i[s[2]="HAS_STREAM_UPDATE"]=2,i[s[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,i[s[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,i}(),a.SdkClientDetails=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkClientDetails"),s.prototype.appName="",s.prototype.appVersion="",s.prototype.deviceModel="",s.prototype.deviceMake="",s.prototype.platformName="",s.prototype.platformVersion="",s.prototype.clientSource="",s.prototype.chimeSdkVersion="",s.prototype.clientUtcOffset="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.appName!=null&&Object.hasOwnProperty.call(e,"appName")&&t.uint32(10).string(e.appName),e.appVersion!=null&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(18).string(e.appVersion),e.deviceModel!=null&&Object.hasOwnProperty.call(e,"deviceModel")&&t.uint32(26).string(e.deviceModel),e.deviceMake!=null&&Object.hasOwnProperty.call(e,"deviceMake")&&t.uint32(34).string(e.deviceMake),e.platformName!=null&&Object.hasOwnProperty.call(e,"platformName")&&t.uint32(42).string(e.platformName),e.platformVersion!=null&&Object.hasOwnProperty.call(e,"platformVersion")&&t.uint32(50).string(e.platformVersion),e.clientSource!=null&&Object.hasOwnProperty.call(e,"clientSource")&&t.uint32(58).string(e.clientSource),e.chimeSdkVersion!=null&&Object.hasOwnProperty.call(e,"chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),e.clientUtcOffset!=null&&Object.hasOwnProperty.call(e,"clientUtcOffset")&&t.uint32(74).string(e.clientUtcOffset),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkClientDetails;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.appName=e.string();break;case 2:r.appVersion=e.string();break;case 3:r.deviceModel=e.string();break;case 4:r.deviceMake=e.string();break;case 5:r.platformName=e.string();break;case 6:r.platformVersion=e.string();break;case 7:r.clientSource=e.string();break;case 8:r.chimeSdkVersion=e.string();break;case 9:r.clientUtcOffset=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.appName!=null&&e.hasOwnProperty("appName")&&!m.isString(e.appName)?"appName: string expected":e.appVersion!=null&&e.hasOwnProperty("appVersion")&&!m.isString(e.appVersion)?"appVersion: string expected":e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&!m.isString(e.deviceModel)?"deviceModel: string expected":e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&!m.isString(e.deviceMake)?"deviceMake: string expected":e.platformName!=null&&e.hasOwnProperty("platformName")&&!m.isString(e.platformName)?"platformName: string expected":e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&!m.isString(e.platformVersion)?"platformVersion: string expected":e.clientSource!=null&&e.hasOwnProperty("clientSource")&&!m.isString(e.clientSource)?"clientSource: string expected":e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&!m.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&!m.isString(e.clientUtcOffset)?"clientUtcOffset: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkClientDetails)return e;var t=new a.SdkClientDetails;return e.appName!=null&&(t.appName=String(e.appName)),e.appVersion!=null&&(t.appVersion=String(e.appVersion)),e.deviceModel!=null&&(t.deviceModel=String(e.deviceModel)),e.deviceMake!=null&&(t.deviceMake=String(e.deviceMake)),e.platformName!=null&&(t.platformName=String(e.platformName)),e.platformVersion!=null&&(t.platformVersion=String(e.platformVersion)),e.clientSource!=null&&(t.clientSource=String(e.clientSource)),e.chimeSdkVersion!=null&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),e.clientUtcOffset!=null&&(t.clientUtcOffset=String(e.clientUtcOffset)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.appName="",n.appVersion="",n.deviceModel="",n.deviceMake="",n.platformName="",n.platformVersion="",n.clientSource="",n.chimeSdkVersion="",n.clientUtcOffset=""),e.appName!=null&&e.hasOwnProperty("appName")&&(n.appName=e.appName),e.appVersion!=null&&e.hasOwnProperty("appVersion")&&(n.appVersion=e.appVersion),e.deviceModel!=null&&e.hasOwnProperty("deviceModel")&&(n.deviceModel=e.deviceModel),e.deviceMake!=null&&e.hasOwnProperty("deviceMake")&&(n.deviceMake=e.deviceMake),e.platformName!=null&&e.hasOwnProperty("platformName")&&(n.platformName=e.platformName),e.platformVersion!=null&&e.hasOwnProperty("platformVersion")&&(n.platformVersion=e.platformVersion),e.clientSource!=null&&e.hasOwnProperty("clientSource")&&(n.clientSource=e.clientSource),e.chimeSdkVersion!=null&&e.hasOwnProperty("chimeSdkVersion")&&(n.chimeSdkVersion=e.chimeSdkVersion),e.clientUtcOffset!=null&&e.hasOwnProperty("clientUtcOffset")&&(n.clientUtcOffset=e.clientUtcOffset),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkServerSideNetworkAdaption=function(){var s={},i=Object.create(s);return i[s[1]="DEFAULT"]=1,i[s[2]="NONE"]=2,i[s[3]="BANDWIDTH_PROBING"]=3,i[s[4]="BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION"]=4,i}(),a.SdkJoinFrame=function(){function s(i){if(this.supportedServerSideNetworkAdaptions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkJoinFrame"),s.prototype.protocolVersion=2,s.prototype.maxNumOfVideos=0,s.prototype.flags=0,s.prototype.clientDetails=null,s.prototype.audioSessionId=m.Long?m.Long.fromBits(0,0,!0):0,s.prototype.wantsCompressedSdp=!1,s.prototype.serverSideNetworkAdaption=1,s.prototype.supportedServerSideNetworkAdaptions=m.emptyArray,s.prototype.wantsAllTemporalLayersInIndex=!1,s.prototype.disablePeriodicKeyframeRequestOnContentSender=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.protocolVersion!=null&&Object.hasOwnProperty.call(e,"protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),e.maxNumOfVideos!=null&&Object.hasOwnProperty.call(e,"maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),e.flags!=null&&Object.hasOwnProperty.call(e,"flags")&&t.uint32(24).uint32(e.flags),e.clientDetails!=null&&Object.hasOwnProperty.call(e,"clientDetails")&&a.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),e.audioSessionId!=null&&Object.hasOwnProperty.call(e,"audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(56).bool(e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"serverSideNetworkAdaption")&&t.uint32(80).int32(e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions!=null&&e.supportedServerSideNetworkAdaptions.length)for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)t.uint32(88).int32(e.supportedServerSideNetworkAdaptions[n]);return e.wantsAllTemporalLayersInIndex!=null&&Object.hasOwnProperty.call(e,"wantsAllTemporalLayersInIndex")&&t.uint32(96).bool(e.wantsAllTemporalLayersInIndex),e.disablePeriodicKeyframeRequestOnContentSender!=null&&Object.hasOwnProperty.call(e,"disablePeriodicKeyframeRequestOnContentSender")&&t.uint32(104).bool(e.disablePeriodicKeyframeRequestOnContentSender),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.protocolVersion=e.uint32();break;case 2:r.maxNumOfVideos=e.uint32();break;case 3:r.flags=e.uint32();break;case 4:r.clientDetails=a.SdkClientDetails.decode(e,e.uint32());break;case 6:r.audioSessionId=e.uint64();break;case 7:r.wantsCompressedSdp=e.bool();break;case 10:r.serverSideNetworkAdaption=e.int32();break;case 11:if(r.supportedServerSideNetworkAdaptions&&r.supportedServerSideNetworkAdaptions.length||(r.supportedServerSideNetworkAdaptions=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.supportedServerSideNetworkAdaptions.push(e.int32());else r.supportedServerSideNetworkAdaptions.push(e.int32());break;case 12:r.wantsAllTemporalLayersInIndex=e.bool();break;case 13:r.disablePeriodicKeyframeRequestOnContentSender=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&!m.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&!m.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(e.flags!=null&&e.hasOwnProperty("flags")&&!m.isInteger(e.flags))return"flags: integer expected";if(e.clientDetails!=null&&e.hasOwnProperty("clientDetails")){var t=a.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}if(e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&!m.isInteger(e.audioSessionId)&&!(e.audioSessionId&&m.isInteger(e.audioSessionId.low)&&m.isInteger(e.audioSessionId.high)))return"audioSessionId: integer|Long expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption"))switch(e.serverSideNetworkAdaption){default:return"serverSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}if(e.wantsAllTemporalLayersInIndex!=null&&e.hasOwnProperty("wantsAllTemporalLayersInIndex")&&typeof e.wantsAllTemporalLayersInIndex!="boolean")return"wantsAllTemporalLayersInIndex: boolean expected";if(e.supportedServerSideNetworkAdaptions!=null&&e.hasOwnProperty("supportedServerSideNetworkAdaptions")){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))return"supportedServerSideNetworkAdaptions: array expected";for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:return"supportedServerSideNetworkAdaptions: enum value[] expected";case 1:case 2:case 3:case 4:break}}return e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&typeof e.disablePeriodicKeyframeRequestOnContentSender!="boolean"?"disablePeriodicKeyframeRequestOnContentSender: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkJoinFrame)return e;var t=new a.SdkJoinFrame;if(e.protocolVersion!=null&&(t.protocolVersion=e.protocolVersion>>>0),e.maxNumOfVideos!=null&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),e.flags!=null&&(t.flags=e.flags>>>0),e.clientDetails!=null){if(typeof e.clientDetails!="object")throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=a.SdkClientDetails.fromObject(e.clientDetails)}switch(e.audioSessionId!=null&&(m.Long?(t.audioSessionId=m.Long.fromValue(e.audioSessionId)).unsigned=!0:typeof e.audioSessionId=="string"?t.audioSessionId=parseInt(e.audioSessionId,10):typeof e.audioSessionId=="number"?t.audioSessionId=e.audioSessionId:typeof e.audioSessionId=="object"&&(t.audioSessionId=new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.serverSideNetworkAdaption){case"DEFAULT":case 1:t.serverSideNetworkAdaption=1;break;case"NONE":case 2:t.serverSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.serverSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.serverSideNetworkAdaption=4;break}if(e.supportedServerSideNetworkAdaptions){if(!Array.isArray(e.supportedServerSideNetworkAdaptions))throw TypeError(".SdkJoinFrame.supportedServerSideNetworkAdaptions: array expected");t.supportedServerSideNetworkAdaptions=[];for(var n=0;n<e.supportedServerSideNetworkAdaptions.length;++n)switch(e.supportedServerSideNetworkAdaptions[n]){default:case"DEFAULT":case 1:t.supportedServerSideNetworkAdaptions[n]=1;break;case"NONE":case 2:t.supportedServerSideNetworkAdaptions[n]=2;break;case"BANDWIDTH_PROBING":case 3:t.supportedServerSideNetworkAdaptions[n]=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.supportedServerSideNetworkAdaptions[n]=4;break}}return e.wantsAllTemporalLayersInIndex!=null&&(t.wantsAllTemporalLayersInIndex=Boolean(e.wantsAllTemporalLayersInIndex)),e.disablePeriodicKeyframeRequestOnContentSender!=null&&(t.disablePeriodicKeyframeRequestOnContentSender=Boolean(e.disablePeriodicKeyframeRequestOnContentSender)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.supportedServerSideNetworkAdaptions=[]),t.defaults){if(n.protocolVersion=2,n.maxNumOfVideos=0,n.flags=0,n.clientDetails=null,m.Long){var r=new m.Long(0,0,!0);n.audioSessionId=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.audioSessionId=t.longs===String?"0":0;n.wantsCompressedSdp=!1,n.serverSideNetworkAdaption=t.enums===String?"DEFAULT":1,n.disablePeriodicKeyframeRequestOnContentSender=!1}if(e.protocolVersion!=null&&e.hasOwnProperty("protocolVersion")&&(n.protocolVersion=e.protocolVersion),e.maxNumOfVideos!=null&&e.hasOwnProperty("maxNumOfVideos")&&(n.maxNumOfVideos=e.maxNumOfVideos),e.flags!=null&&e.hasOwnProperty("flags")&&(n.flags=e.flags),e.clientDetails!=null&&e.hasOwnProperty("clientDetails")&&(n.clientDetails=a.SdkClientDetails.toObject(e.clientDetails,t)),e.audioSessionId!=null&&e.hasOwnProperty("audioSessionId")&&(typeof e.audioSessionId=="number"?n.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:n.audioSessionId=t.longs===String?m.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new m.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.serverSideNetworkAdaption!=null&&e.hasOwnProperty("serverSideNetworkAdaption")&&(n.serverSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.serverSideNetworkAdaption]:e.serverSideNetworkAdaption),e.supportedServerSideNetworkAdaptions&&e.supportedServerSideNetworkAdaptions.length){n.supportedServerSideNetworkAdaptions=[];for(var c=0;c<e.supportedServerSideNetworkAdaptions.length;++c)n.supportedServerSideNetworkAdaptions[c]=t.enums===String?a.SdkServerSideNetworkAdaption[e.supportedServerSideNetworkAdaptions[c]]:e.supportedServerSideNetworkAdaptions[c]}return e.disablePeriodicKeyframeRequestOnContentSender!=null&&e.hasOwnProperty("disablePeriodicKeyframeRequestOnContentSender")&&(n.disablePeriodicKeyframeRequestOnContentSender=e.disablePeriodicKeyframeRequestOnContentSender),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkJoinAckFrame"),s.prototype.turnCredentials=null,s.prototype.videoSubscriptionLimit=0,s.prototype.wantsCompressedSdp=!1,s.prototype.defaultServerSideNetworkAdaption=1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.turnCredentials!=null&&Object.hasOwnProperty.call(e,"turnCredentials")&&a.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),e.videoSubscriptionLimit!=null&&Object.hasOwnProperty.call(e,"videoSubscriptionLimit")&&t.uint32(16).uint32(e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&Object.hasOwnProperty.call(e,"wantsCompressedSdp")&&t.uint32(24).bool(e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&Object.hasOwnProperty.call(e,"defaultServerSideNetworkAdaption")&&t.uint32(32).int32(e.defaultServerSideNetworkAdaption),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.turnCredentials=a.SdkTurnCredentials.decode(e,e.uint32());break;case 2:r.videoSubscriptionLimit=e.uint32();break;case 3:r.wantsCompressedSdp=e.bool();break;case 4:r.defaultServerSideNetworkAdaption=e.int32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")){var t=a.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}if(e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&!m.isInteger(e.videoSubscriptionLimit))return"videoSubscriptionLimit: integer expected";if(e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&typeof e.wantsCompressedSdp!="boolean")return"wantsCompressedSdp: boolean expected";if(e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption"))switch(e.defaultServerSideNetworkAdaption){default:return"defaultServerSideNetworkAdaption: enum value expected";case 1:case 2:case 3:case 4:break}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkJoinAckFrame)return e;var t=new a.SdkJoinAckFrame;if(e.turnCredentials!=null){if(typeof e.turnCredentials!="object")throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=a.SdkTurnCredentials.fromObject(e.turnCredentials)}switch(e.videoSubscriptionLimit!=null&&(t.videoSubscriptionLimit=e.videoSubscriptionLimit>>>0),e.wantsCompressedSdp!=null&&(t.wantsCompressedSdp=Boolean(e.wantsCompressedSdp)),e.defaultServerSideNetworkAdaption){case"DEFAULT":case 1:t.defaultServerSideNetworkAdaption=1;break;case"NONE":case 2:t.defaultServerSideNetworkAdaption=2;break;case"BANDWIDTH_PROBING":case 3:t.defaultServerSideNetworkAdaption=3;break;case"BANDWIDTH_PROBING_AND_VIDEO_QUALITY_ADAPTION":case 4:t.defaultServerSideNetworkAdaption=4;break}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.turnCredentials=null,n.videoSubscriptionLimit=0,n.wantsCompressedSdp=!1,n.defaultServerSideNetworkAdaption=t.enums===String?"DEFAULT":1),e.turnCredentials!=null&&e.hasOwnProperty("turnCredentials")&&(n.turnCredentials=a.SdkTurnCredentials.toObject(e.turnCredentials,t)),e.videoSubscriptionLimit!=null&&e.hasOwnProperty("videoSubscriptionLimit")&&(n.videoSubscriptionLimit=e.videoSubscriptionLimit),e.wantsCompressedSdp!=null&&e.hasOwnProperty("wantsCompressedSdp")&&(n.wantsCompressedSdp=e.wantsCompressedSdp),e.defaultServerSideNetworkAdaption!=null&&e.hasOwnProperty("defaultServerSideNetworkAdaption")&&(n.defaultServerSideNetworkAdaption=t.enums===String?a.SdkServerSideNetworkAdaption[e.defaultServerSideNetworkAdaption]:e.defaultServerSideNetworkAdaption),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkLeaveFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkLeaveFrame?e:new a.SdkLeaveFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkLeaveAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkLeaveAckFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkLeaveAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkLeaveAckFrame?e:new a.SdkLeaveAckFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamServiceType=function(){var s={},i=Object.create(s);return i[s[1]="RX"]=1,i[s[2]="TX"]=2,i[s[3]="DUPLEX"]=3,i}(),a.SdkStreamMediaType=function(){var s={},i=Object.create(s);return i[s[1]="AUDIO"]=1,i[s[2]="VIDEO"]=2,i}(),a.SdkSubscribeFrame=function(){function s(i){if(this.sendStreams=[],this.receiveStreamIds=[],this.videoSubscriptionConfiguration=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkSubscribeFrame"),s.prototype.duplex=1,s.prototype.sendStreams=m.emptyArray,s.prototype.receiveStreamIds=m.emptyArray,s.prototype.sdpOffer="",s.prototype.audioHost="",s.prototype.audioCheckin=!1,s.prototype.audioMuted=!1,s.prototype.compressedSdpOffer=m.newBuffer([]),s.prototype.videoSubscriptionConfiguration=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.sendStreams!=null&&e.sendStreams.length)for(var n=0;n<e.sendStreams.length;++n)a.SdkStreamDescriptor.encode(e.sendStreams[n],t.uint32(18).fork()).ldelim();if(e.receiveStreamIds!=null&&e.receiveStreamIds.length)for(var n=0;n<e.receiveStreamIds.length;++n)t.uint32(24).uint32(e.receiveStreamIds[n]);if(e.sdpOffer!=null&&Object.hasOwnProperty.call(e,"sdpOffer")&&t.uint32(34).string(e.sdpOffer),e.audioHost!=null&&Object.hasOwnProperty.call(e,"audioHost")&&t.uint32(42).string(e.audioHost),e.audioCheckin!=null&&Object.hasOwnProperty.call(e,"audioCheckin")&&t.uint32(48).bool(e.audioCheckin),e.audioMuted!=null&&Object.hasOwnProperty.call(e,"audioMuted")&&t.uint32(56).bool(e.audioMuted),e.compressedSdpOffer!=null&&Object.hasOwnProperty.call(e,"compressedSdpOffer")&&t.uint32(66).bytes(e.compressedSdpOffer),e.videoSubscriptionConfiguration!=null&&e.videoSubscriptionConfiguration.length)for(var n=0;n<e.videoSubscriptionConfiguration.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.videoSubscriptionConfiguration[n],t.uint32(74).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkSubscribeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.duplex=e.int32();break;case 2:r.sendStreams&&r.sendStreams.length||(r.sendStreams=[]),r.sendStreams.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(r.receiveStreamIds&&r.receiveStreamIds.length||(r.receiveStreamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.receiveStreamIds.push(e.uint32());else r.receiveStreamIds.push(e.uint32());break;case 4:r.sdpOffer=e.string();break;case 5:r.audioHost=e.string();break;case 6:r.audioCheckin=e.bool();break;case 7:r.audioMuted=e.bool();break;case 8:r.compressedSdpOffer=e.bytes();break;case 9:r.videoSubscriptionConfiguration&&r.videoSubscriptionConfiguration.length||(r.videoSubscriptionConfiguration=[]),r.videoSubscriptionConfiguration.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.sendStreams!=null&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var n=a.SdkStreamDescriptor.verify(e.sendStreams[t]);if(n)return"sendStreams."+n}}if(e.receiveStreamIds!=null&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(var t=0;t<e.receiveStreamIds.length;++t)if(!m.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&!m.isString(e.sdpOffer))return"sdpOffer: string expected";if(e.audioHost!=null&&e.hasOwnProperty("audioHost")&&!m.isString(e.audioHost))return"audioHost: string expected";if(e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&typeof e.audioCheckin!="boolean")return"audioCheckin: boolean expected";if(e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&typeof e.audioMuted!="boolean")return"audioMuted: boolean expected";if(e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&!(e.compressedSdpOffer&&typeof e.compressedSdpOffer.length=="number"||m.isString(e.compressedSdpOffer)))return"compressedSdpOffer: buffer expected";if(e.videoSubscriptionConfiguration!=null&&e.hasOwnProperty("videoSubscriptionConfiguration")){if(!Array.isArray(e.videoSubscriptionConfiguration))return"videoSubscriptionConfiguration: array expected";for(var t=0;t<e.videoSubscriptionConfiguration.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.videoSubscriptionConfiguration[t]);if(n)return"videoSubscriptionConfiguration."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkSubscribeFrame)return e;var t=new a.SdkSubscribeFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n){if(typeof e.sendStreams[n]!="object")throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[n]=a.SdkStreamDescriptor.fromObject(e.sendStreams[n])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");t.receiveStreamIds=[];for(var n=0;n<e.receiveStreamIds.length;++n)t.receiveStreamIds[n]=e.receiveStreamIds[n]>>>0}if(e.sdpOffer!=null&&(t.sdpOffer=String(e.sdpOffer)),e.audioHost!=null&&(t.audioHost=String(e.audioHost)),e.audioCheckin!=null&&(t.audioCheckin=Boolean(e.audioCheckin)),e.audioMuted!=null&&(t.audioMuted=Boolean(e.audioMuted)),e.compressedSdpOffer!=null&&(typeof e.compressedSdpOffer=="string"?m.base64.decode(e.compressedSdpOffer,t.compressedSdpOffer=m.newBuffer(m.base64.length(e.compressedSdpOffer)),0):e.compressedSdpOffer.length&&(t.compressedSdpOffer=e.compressedSdpOffer)),e.videoSubscriptionConfiguration){if(!Array.isArray(e.videoSubscriptionConfiguration))throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: array expected");t.videoSubscriptionConfiguration=[];for(var n=0;n<e.videoSubscriptionConfiguration.length;++n){if(typeof e.videoSubscriptionConfiguration[n]!="object")throw TypeError(".SdkSubscribeFrame.videoSubscriptionConfiguration: object expected");t.videoSubscriptionConfiguration[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.videoSubscriptionConfiguration[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sendStreams=[],n.receiveStreamIds=[],n.videoSubscriptionConfiguration=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpOffer="",n.audioHost="",n.audioCheckin=!1,n.audioMuted=!1,t.bytes===String?n.compressedSdpOffer="":(n.compressedSdpOffer=[],t.bytes!==Array&&(n.compressedSdpOffer=m.newBuffer(n.compressedSdpOffer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){n.sendStreams=[];for(var r=0;r<e.sendStreams.length;++r)n.sendStreams[r]=a.SdkStreamDescriptor.toObject(e.sendStreams[r],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length){n.receiveStreamIds=[];for(var r=0;r<e.receiveStreamIds.length;++r)n.receiveStreamIds[r]=e.receiveStreamIds[r]}if(e.sdpOffer!=null&&e.hasOwnProperty("sdpOffer")&&(n.sdpOffer=e.sdpOffer),e.audioHost!=null&&e.hasOwnProperty("audioHost")&&(n.audioHost=e.audioHost),e.audioCheckin!=null&&e.hasOwnProperty("audioCheckin")&&(n.audioCheckin=e.audioCheckin),e.audioMuted!=null&&e.hasOwnProperty("audioMuted")&&(n.audioMuted=e.audioMuted),e.compressedSdpOffer!=null&&e.hasOwnProperty("compressedSdpOffer")&&(n.compressedSdpOffer=t.bytes===String?m.base64.encode(e.compressedSdpOffer,0,e.compressedSdpOffer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpOffer):e.compressedSdpOffer),e.videoSubscriptionConfiguration&&e.videoSubscriptionConfiguration.length){n.videoSubscriptionConfiguration=[];for(var r=0;r<e.videoSubscriptionConfiguration.length;++r)n.videoSubscriptionConfiguration[r]=a.SdkVideoSubscriptionConfiguration.toObject(e.videoSubscriptionConfiguration[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkSubscribeAckFrame=function(){function s(i){if(this.allocations=[],this.tracks=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkSubscribeAckFrame"),s.prototype.duplex=1,s.prototype.allocations=m.emptyArray,s.prototype.sdpAnswer="",s.prototype.tracks=m.emptyArray,s.prototype.compressedSdpAnswer=m.newBuffer([]),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.duplex!=null&&Object.hasOwnProperty.call(e,"duplex")&&t.uint32(8).int32(e.duplex),e.allocations!=null&&e.allocations.length)for(var n=0;n<e.allocations.length;++n)a.SdkStreamAllocation.encode(e.allocations[n],t.uint32(18).fork()).ldelim();if(e.sdpAnswer!=null&&Object.hasOwnProperty.call(e,"sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),e.tracks!=null&&e.tracks.length)for(var n=0;n<e.tracks.length;++n)a.SdkTrackMapping.encode(e.tracks[n],t.uint32(34).fork()).ldelim();return e.compressedSdpAnswer!=null&&Object.hasOwnProperty.call(e,"compressedSdpAnswer")&&t.uint32(42).bytes(e.compressedSdpAnswer),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkSubscribeAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.duplex=e.int32();break;case 2:r.allocations&&r.allocations.length||(r.allocations=[]),r.allocations.push(a.SdkStreamAllocation.decode(e,e.uint32()));break;case 3:r.sdpAnswer=e.string();break;case 4:r.tracks&&r.tracks.length||(r.tracks=[]),r.tracks.push(a.SdkTrackMapping.decode(e,e.uint32()));break;case 5:r.compressedSdpAnswer=e.bytes();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.duplex!=null&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:break}if(e.allocations!=null&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t){var n=a.SdkStreamAllocation.verify(e.allocations[t]);if(n)return"allocations."+n}}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&!m.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(e.tracks!=null&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(var t=0;t<e.tracks.length;++t){var n=a.SdkTrackMapping.verify(e.tracks[t]);if(n)return"tracks."+n}}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&!(e.compressedSdpAnswer&&typeof e.compressedSdpAnswer.length=="number"||m.isString(e.compressedSdpAnswer))?"compressedSdpAnswer: buffer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkSubscribeAckFrame)return e;var t=new a.SdkSubscribeAckFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3;break}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var n=0;n<e.allocations.length;++n){if(typeof e.allocations[n]!="object")throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[n]=a.SdkStreamAllocation.fromObject(e.allocations[n])}}if(e.sdpAnswer!=null&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");t.tracks=[];for(var n=0;n<e.tracks.length;++n){if(typeof e.tracks[n]!="object")throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[n]=a.SdkTrackMapping.fromObject(e.tracks[n])}}return e.compressedSdpAnswer!=null&&(typeof e.compressedSdpAnswer=="string"?m.base64.decode(e.compressedSdpAnswer,t.compressedSdpAnswer=m.newBuffer(m.base64.length(e.compressedSdpAnswer)),0):e.compressedSdpAnswer.length&&(t.compressedSdpAnswer=e.compressedSdpAnswer)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.allocations=[],n.tracks=[]),t.defaults&&(n.duplex=t.enums===String?"RX":1,n.sdpAnswer="",t.bytes===String?n.compressedSdpAnswer="":(n.compressedSdpAnswer=[],t.bytes!==Array&&(n.compressedSdpAnswer=m.newBuffer(n.compressedSdpAnswer)))),e.duplex!=null&&e.hasOwnProperty("duplex")&&(n.duplex=t.enums===String?a.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){n.allocations=[];for(var r=0;r<e.allocations.length;++r)n.allocations[r]=a.SdkStreamAllocation.toObject(e.allocations[r],t)}if(e.sdpAnswer!=null&&e.hasOwnProperty("sdpAnswer")&&(n.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length){n.tracks=[];for(var r=0;r<e.tracks.length;++r)n.tracks[r]=a.SdkTrackMapping.toObject(e.tracks[r],t)}return e.compressedSdpAnswer!=null&&e.hasOwnProperty("compressedSdpAnswer")&&(n.compressedSdpAnswer=t.bytes===String?m.base64.encode(e.compressedSdpAnswer,0,e.compressedSdpAnswer.length):t.bytes===Array?Array.prototype.slice.call(e.compressedSdpAnswer):e.compressedSdpAnswer),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkIndexFrame=function(){function s(i){if(this.sources=[],this.pausedAtSourceIds=[],this.supportedReceiveCodecIntersection=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkIndexFrame"),s.prototype.atCapacity=!1,s.prototype.sources=m.emptyArray,s.prototype.pausedAtSourceIds=m.emptyArray,s.prototype.numParticipants=0,s.prototype.supportedReceiveCodecIntersection=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.atCapacity!=null&&Object.hasOwnProperty.call(e,"atCapacity")&&t.uint32(8).bool(e.atCapacity),e.sources!=null&&e.sources.length)for(var n=0;n<e.sources.length;++n)a.SdkStreamDescriptor.encode(e.sources[n],t.uint32(18).fork()).ldelim();if(e.pausedAtSourceIds!=null&&e.pausedAtSourceIds.length)for(var n=0;n<e.pausedAtSourceIds.length;++n)t.uint32(24).uint32(e.pausedAtSourceIds[n]);if(e.numParticipants!=null&&Object.hasOwnProperty.call(e,"numParticipants")&&t.uint32(32).uint32(e.numParticipants),e.supportedReceiveCodecIntersection!=null&&e.supportedReceiveCodecIntersection.length)for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)t.uint32(40).int32(e.supportedReceiveCodecIntersection[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkIndexFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.atCapacity=e.bool();break;case 2:r.sources&&r.sources.length||(r.sources=[]),r.sources.push(a.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(r.pausedAtSourceIds&&r.pausedAtSourceIds.length||(r.pausedAtSourceIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.pausedAtSourceIds.push(e.uint32());else r.pausedAtSourceIds.push(e.uint32());break;case 4:r.numParticipants=e.uint32();break;case 5:if(r.supportedReceiveCodecIntersection&&r.supportedReceiveCodecIntersection.length||(r.supportedReceiveCodecIntersection=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.supportedReceiveCodecIntersection.push(e.int32());else r.supportedReceiveCodecIntersection.push(e.int32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&typeof e.atCapacity!="boolean")return"atCapacity: boolean expected";if(e.sources!=null&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var n=a.SdkStreamDescriptor.verify(e.sources[t]);if(n)return"sources."+n}}if(e.pausedAtSourceIds!=null&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(var t=0;t<e.pausedAtSourceIds.length;++t)if(!m.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&!m.isInteger(e.numParticipants))return"numParticipants: integer expected";if(e.supportedReceiveCodecIntersection!=null&&e.hasOwnProperty("supportedReceiveCodecIntersection")){if(!Array.isArray(e.supportedReceiveCodecIntersection))return"supportedReceiveCodecIntersection: array expected";for(var t=0;t<e.supportedReceiveCodecIntersection.length;++t)switch(e.supportedReceiveCodecIntersection[t]){default:return"supportedReceiveCodecIntersection: enum value[] expected";case 1:case 3:break}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkIndexFrame)return e;var t=new a.SdkIndexFrame;if(e.atCapacity!=null&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var n=0;n<e.sources.length;++n){if(typeof e.sources[n]!="object")throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[n]=a.SdkStreamDescriptor.fromObject(e.sources[n])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");t.pausedAtSourceIds=[];for(var n=0;n<e.pausedAtSourceIds.length;++n)t.pausedAtSourceIds[n]=e.pausedAtSourceIds[n]>>>0}if(e.numParticipants!=null&&(t.numParticipants=e.numParticipants>>>0),e.supportedReceiveCodecIntersection){if(!Array.isArray(e.supportedReceiveCodecIntersection))throw TypeError(".SdkIndexFrame.supportedReceiveCodecIntersection: array expected");t.supportedReceiveCodecIntersection=[];for(var n=0;n<e.supportedReceiveCodecIntersection.length;++n)switch(e.supportedReceiveCodecIntersection[n]){default:case"VP8":case 1:t.supportedReceiveCodecIntersection[n]=1;break;case"H264_CONSTRAINED_BASELINE_PROFILE":case 3:t.supportedReceiveCodecIntersection[n]=3;break;case"VP9_PROFILE_0":case 8:t.supportedReceiveCodecIntersection[n]=8;break;case"AV1_MAIN":case 11:t.supportedReceiveCodecIntersection[n]=11;break}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.sources=[],n.pausedAtSourceIds=[],n.supportedReceiveCodecIntersection=[]),t.defaults&&(n.atCapacity=!1,n.numParticipants=0),e.atCapacity!=null&&e.hasOwnProperty("atCapacity")&&(n.atCapacity=e.atCapacity),e.sources&&e.sources.length){n.sources=[];for(var r=0;r<e.sources.length;++r)n.sources[r]=a.SdkStreamDescriptor.toObject(e.sources[r],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length){n.pausedAtSourceIds=[];for(var r=0;r<e.pausedAtSourceIds.length;++r)n.pausedAtSourceIds[r]=e.pausedAtSourceIds[r]}if(e.numParticipants!=null&&e.hasOwnProperty("numParticipants")&&(n.numParticipants=e.numParticipants),e.supportedReceiveCodecIntersection&&e.supportedReceiveCodecIntersection.length){n.supportedReceiveCodecIntersection=[];for(var r=0;r<e.supportedReceiveCodecIntersection.length;++r)n.supportedReceiveCodecIntersection[r]=t.enums===String?a.SdkVideoCodecCapability[e.supportedReceiveCodecIntersection[r]]:e.supportedReceiveCodecIntersection[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPauseResumeFrame=function(){function s(i){if(this.streamIds=[],this.groupIds=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPauseResumeFrame"),s.prototype.streamIds=m.emptyArray,s.prototype.groupIds=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.streamIds!=null&&e.streamIds.length)for(var n=0;n<e.streamIds.length;++n)t.uint32(8).uint32(e.streamIds[n]);if(e.groupIds!=null&&e.groupIds.length)for(var n=0;n<e.groupIds.length;++n)t.uint32(16).uint32(e.groupIds[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPauseResumeFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:if(r.streamIds&&r.streamIds.length||(r.streamIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.streamIds.push(e.uint32());else r.streamIds.push(e.uint32());break;case 2:if(r.groupIds&&r.groupIds.length||(r.groupIds=[]),(c&7)===2)for(var p=e.uint32()+e.pos;e.pos<p;)r.groupIds.push(e.uint32());else r.groupIds.push(e.uint32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamIds!=null&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!m.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}if(e.groupIds!=null&&e.hasOwnProperty("groupIds")){if(!Array.isArray(e.groupIds))return"groupIds: array expected";for(var t=0;t<e.groupIds.length;++t)if(!m.isInteger(e.groupIds[t]))return"groupIds: integer[] expected"}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkPauseResumeFrame)return e;var t=new a.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var n=0;n<e.streamIds.length;++n)t.streamIds[n]=e.streamIds[n]>>>0}if(e.groupIds){if(!Array.isArray(e.groupIds))throw TypeError(".SdkPauseResumeFrame.groupIds: array expected");t.groupIds=[];for(var n=0;n<e.groupIds.length;++n)t.groupIds[n]=e.groupIds[n]>>>0}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streamIds=[],n.groupIds=[]),e.streamIds&&e.streamIds.length){n.streamIds=[];for(var r=0;r<e.streamIds.length;++r)n.streamIds[r]=e.streamIds[r]}if(e.groupIds&&e.groupIds.length){n.groupIds=[];for(var r=0;r<e.groupIds.length;++r)n.groupIds[r]=e.groupIds[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkBitrateFrame=function(){function s(i){if(this.bitrates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkBitrateFrame"),s.prototype.bitrates=m.emptyArray,s.prototype.serverAvailableOutgoingBitrate=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.bitrates!=null&&e.bitrates.length)for(var n=0;n<e.bitrates.length;++n)a.SdkBitrate.encode(e.bitrates[n],t.uint32(10).fork()).ldelim();return e.serverAvailableOutgoingBitrate!=null&&Object.hasOwnProperty.call(e,"serverAvailableOutgoingBitrate")&&t.uint32(16).uint32(e.serverAvailableOutgoingBitrate),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkBitrateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.bitrates&&r.bitrates.length||(r.bitrates=[]),r.bitrates.push(a.SdkBitrate.decode(e,e.uint32()));break;case 2:r.serverAvailableOutgoingBitrate=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.bitrates!=null&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var n=a.SdkBitrate.verify(e.bitrates[t]);if(n)return"bitrates."+n}}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&!m.isInteger(e.serverAvailableOutgoingBitrate)?"serverAvailableOutgoingBitrate: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkBitrateFrame)return e;var t=new a.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var n=0;n<e.bitrates.length;++n){if(typeof e.bitrates[n]!="object")throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[n]=a.SdkBitrate.fromObject(e.bitrates[n])}}return e.serverAvailableOutgoingBitrate!=null&&(t.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.bitrates=[]),t.defaults&&(n.serverAvailableOutgoingBitrate=0),e.bitrates&&e.bitrates.length){n.bitrates=[];for(var r=0;r<e.bitrates.length;++r)n.bitrates[r]=a.SdkBitrate.toObject(e.bitrates[r],t)}return e.serverAvailableOutgoingBitrate!=null&&e.hasOwnProperty("serverAvailableOutgoingBitrate")&&(n.serverAvailableOutgoingBitrate=e.serverAvailableOutgoingBitrate),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamDescriptor=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamDescriptor"),s.prototype.streamId=0,s.prototype.framerate=0,s.prototype.maxBitrateKbps=0,s.prototype.trackLabel="",s.prototype.groupId=0,s.prototype.avgBitrateBps=0,s.prototype.attendeeId="",s.prototype.mediaType=1,s.prototype.externalUserId="",s.prototype.width=0,s.prototype.height=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.framerate!=null&&Object.hasOwnProperty.call(e,"framerate")&&t.uint32(16).uint32(e.framerate),e.maxBitrateKbps!=null&&Object.hasOwnProperty.call(e,"maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(34).string(e.trackLabel),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(66).string(e.attendeeId),e.mediaType!=null&&Object.hasOwnProperty.call(e,"mediaType")&&t.uint32(72).int32(e.mediaType),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(82).string(e.externalUserId),e.width!=null&&Object.hasOwnProperty.call(e,"width")&&t.uint32(88).uint32(e.width),e.height!=null&&Object.hasOwnProperty.call(e,"height")&&t.uint32(96).uint32(e.height),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamDescriptor;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.streamId=e.uint32();break;case 2:r.framerate=e.uint32();break;case 3:r.maxBitrateKbps=e.uint32();break;case 4:r.trackLabel=e.string();break;case 6:r.groupId=e.uint32();break;case 7:r.avgBitrateBps=e.uint32();break;case 8:r.attendeeId=e.string();break;case 9:r.mediaType=e.int32();break;case 10:r.externalUserId=e.string();break;case 11:r.width=e.uint32();break;case 12:r.height=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.framerate!=null&&e.hasOwnProperty("framerate")&&!m.isInteger(e.framerate))return"framerate: integer expected";if(e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&!m.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel))return"trackLabel: string expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.mediaType!=null&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:break}return e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.width!=null&&e.hasOwnProperty("width")&&!m.isInteger(e.width)?"width: integer expected":e.height!=null&&e.hasOwnProperty("height")&&!m.isInteger(e.height)?"height: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamDescriptor)return e;var t=new a.SdkStreamDescriptor;switch(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.framerate!=null&&(t.framerate=e.framerate>>>0),e.maxBitrateKbps!=null&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.mediaType){case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2;break}return e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.width!=null&&(t.width=e.width>>>0),e.height!=null&&(t.height=e.height>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.framerate=0,n.maxBitrateKbps=0,n.trackLabel="",n.groupId=0,n.avgBitrateBps=0,n.attendeeId="",n.mediaType=t.enums===String?"AUDIO":1,n.externalUserId="",n.width=0,n.height=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.framerate!=null&&e.hasOwnProperty("framerate")&&(n.framerate=e.framerate),e.maxBitrateKbps!=null&&e.hasOwnProperty("maxBitrateKbps")&&(n.maxBitrateKbps=e.maxBitrateKbps),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.mediaType!=null&&e.hasOwnProperty("mediaType")&&(n.mediaType=t.enums===String?a.SdkStreamMediaType[e.mediaType]:e.mediaType),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.width!=null&&e.hasOwnProperty("width")&&(n.width=e.width),e.height!=null&&e.hasOwnProperty("height")&&(n.height=e.height),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamAllocation=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamAllocation"),s.prototype.trackLabel="",s.prototype.streamId=0,s.prototype.groupId=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(10).string(e.trackLabel),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(16).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(24).uint32(e.groupId),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamAllocation;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.trackLabel=e.string();break;case 2:r.streamId=e.uint32();break;case 3:r.groupId=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId)?"groupId: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamAllocation)return e;var t=new a.SdkStreamAllocation;return e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.trackLabel="",n.streamId=0,n.groupId=0),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTrackMapping=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTrackMapping"),s.prototype.streamId=0,s.prototype.ssrc=0,s.prototype.trackLabel="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(8).uint32(e.streamId),e.ssrc!=null&&Object.hasOwnProperty.call(e,"ssrc")&&t.uint32(16).uint32(e.ssrc),e.trackLabel!=null&&Object.hasOwnProperty.call(e,"trackLabel")&&t.uint32(26).string(e.trackLabel),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTrackMapping;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.streamId=e.uint32();break;case 2:r.ssrc=e.uint32();break;case 3:r.trackLabel=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId)?"streamId: integer expected":e.ssrc!=null&&e.hasOwnProperty("ssrc")&&!m.isInteger(e.ssrc)?"ssrc: integer expected":e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&!m.isString(e.trackLabel)?"trackLabel: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTrackMapping)return e;var t=new a.SdkTrackMapping;return e.streamId!=null&&(t.streamId=e.streamId>>>0),e.ssrc!=null&&(t.ssrc=e.ssrc>>>0),e.trackLabel!=null&&(t.trackLabel=String(e.trackLabel)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.streamId=0,n.ssrc=0,n.trackLabel=""),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.ssrc!=null&&e.hasOwnProperty("ssrc")&&(n.ssrc=e.ssrc),e.trackLabel!=null&&e.hasOwnProperty("trackLabel")&&(n.trackLabel=e.trackLabel),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkBitrate=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkBitrate"),s.prototype.sourceStreamId=0,s.prototype.avgBitrateBps=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.sourceStreamId!=null&&Object.hasOwnProperty.call(e,"sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),e.avgBitrateBps!=null&&Object.hasOwnProperty.call(e,"avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkBitrate;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.sourceStreamId=e.uint32();break;case 2:r.avgBitrateBps=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&!m.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&!m.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkBitrate)return e;var t=new a.SdkBitrate;return e.sourceStreamId!=null&&(t.sourceStreamId=e.sourceStreamId>>>0),e.avgBitrateBps!=null&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.sourceStreamId=0,n.avgBitrateBps=0),e.sourceStreamId!=null&&e.hasOwnProperty("sourceStreamId")&&(n.sourceStreamId=e.sourceStreamId),e.avgBitrateBps!=null&&e.hasOwnProperty("avgBitrateBps")&&(n.avgBitrateBps=e.avgBitrateBps),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioControlFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioControlFrame"),s.prototype.muted=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(8).bool(e.muted),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioControlFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.muted=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioControlFrame)return e;var t=new a.SdkAudioControlFrame;return e.muted!=null&&(t.muted=Boolean(e.muted)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.muted=!1),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioMetadataFrame=function(){function s(i){if(this.attendeeStates=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioMetadataFrame"),s.prototype.attendeeStates=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.attendeeStates!=null&&e.attendeeStates.length)for(var n=0;n<e.attendeeStates.length;++n)a.SdkAudioAttendeeState.encode(e.attendeeStates[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioMetadataFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.attendeeStates&&r.attendeeStates.length||(r.attendeeStates=[]),r.attendeeStates.push(a.SdkAudioAttendeeState.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.attendeeStates!=null&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var n=a.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(n)return"attendeeStates."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioMetadataFrame)return e;var t=new a.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n){if(typeof e.attendeeStates[n]!="object")throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[n]=a.SdkAudioAttendeeState.fromObject(e.attendeeStates[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){n.attendeeStates=[];for(var r=0;r<e.attendeeStates.length;++r)n.attendeeStates[r]=a.SdkAudioAttendeeState.toObject(e.attendeeStates[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioAttendeeState=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioAttendeeState"),s.prototype.audioStreamId=0,s.prototype.volume=0,s.prototype.muted=!1,s.prototype.signalStrength=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.volume!=null&&Object.hasOwnProperty.call(e,"volume")&&t.uint32(16).uint32(e.volume),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.signalStrength!=null&&Object.hasOwnProperty.call(e,"signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioAttendeeState;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.audioStreamId=e.uint32();break;case 2:r.volume=e.uint32();break;case 3:r.muted=e.bool();break;case 4:r.signalStrength=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.volume!=null&&e.hasOwnProperty("volume")&&!m.isInteger(e.volume)?"volume: integer expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&!m.isInteger(e.signalStrength)?"signalStrength: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioAttendeeState)return e;var t=new a.SdkAudioAttendeeState;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.volume!=null&&(t.volume=e.volume>>>0),e.muted!=null&&(t.muted=Boolean(e.muted)),e.signalStrength!=null&&(t.signalStrength=e.signalStrength>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.volume=0,n.muted=!1,n.signalStrength=0),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.volume!=null&&e.hasOwnProperty("volume")&&(n.volume=e.volume),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.signalStrength!=null&&e.hasOwnProperty("signalStrength")&&(n.signalStrength=e.signalStrength),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioStreamIdInfoFrame=function(){function s(i){if(this.streams=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioStreamIdInfoFrame"),s.prototype.streams=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.streams!=null&&e.streams.length)for(var n=0;n<e.streams.length;++n)a.SdkAudioStreamIdInfo.encode(e.streams[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioStreamIdInfoFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.streams&&r.streams.length||(r.streams=[]),r.streams.push(a.SdkAudioStreamIdInfo.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streams!=null&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var n=a.SdkAudioStreamIdInfo.verify(e.streams[t]);if(n)return"streams."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioStreamIdInfoFrame)return e;var t=new a.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var n=0;n<e.streams.length;++n){if(typeof e.streams[n]!="object")throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[n]=a.SdkAudioStreamIdInfo.fromObject(e.streams[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.streams=[]),e.streams&&e.streams.length){n.streams=[];for(var r=0;r<e.streams.length;++r)n.streams[r]=a.SdkAudioStreamIdInfo.toObject(e.streams[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioStreamIdInfo=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioStreamIdInfo"),s.prototype.audioStreamId=0,s.prototype.attendeeId="",s.prototype.muted=!1,s.prototype.externalUserId="",s.prototype.dropped=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.audioStreamId!=null&&Object.hasOwnProperty.call(e,"audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.muted!=null&&Object.hasOwnProperty.call(e,"muted")&&t.uint32(24).bool(e.muted),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(34).string(e.externalUserId),e.dropped!=null&&Object.hasOwnProperty.call(e,"dropped")&&t.uint32(40).bool(e.dropped),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioStreamIdInfo;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.audioStreamId=e.uint32();break;case 2:r.attendeeId=e.string();break;case 3:r.muted=e.bool();break;case 4:r.externalUserId=e.string();break;case 5:r.dropped=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&!m.isInteger(e.audioStreamId)?"audioStreamId: integer expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.muted!=null&&e.hasOwnProperty("muted")&&typeof e.muted!="boolean"?"muted: boolean expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.dropped!=null&&e.hasOwnProperty("dropped")&&typeof e.dropped!="boolean"?"dropped: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioStreamIdInfo)return e;var t=new a.SdkAudioStreamIdInfo;return e.audioStreamId!=null&&(t.audioStreamId=e.audioStreamId>>>0),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.muted!=null&&(t.muted=Boolean(e.muted)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.dropped!=null&&(t.dropped=Boolean(e.dropped)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStreamId=0,n.attendeeId="",n.muted=!1,n.externalUserId="",n.dropped=!1),e.audioStreamId!=null&&e.hasOwnProperty("audioStreamId")&&(n.audioStreamId=e.audioStreamId),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.muted!=null&&e.hasOwnProperty("muted")&&(n.muted=e.muted),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.dropped!=null&&e.hasOwnProperty("dropped")&&(n.dropped=e.dropped),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPingPongType=function(){var s={},i=Object.create(s);return i[s[1]="PING"]=1,i[s[2]="PONG"]=2,i}(),a.SdkPingPongFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPingPongFrame"),s.prototype.type=1,s.prototype.pingId=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPingPongFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.pingId=e.uint32();break;default:e.skipType(c&7);break}}if(!r.hasOwnProperty("type"))throw m.ProtocolError("missing required 'type'",{instance:r});if(!r.hasOwnProperty("pingId"))throw m.ProtocolError("missing required 'pingId'",{instance:r});return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return m.isInteger(e.pingId)?null:"pingId: integer expected"},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkPingPongFrame)return e;var t=new a.SdkPingPongFrame;switch(e.type){case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2;break}return e.pingId!=null&&(t.pingId=e.pingId>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"PING":1,n.pingId=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkPingPongType[e.type]:e.type),e.pingId!=null&&e.hasOwnProperty("pingId")&&(n.pingId=e.pingId),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkAudioStatusFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkAudioStatusFrame"),s.prototype.audioStatus=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.audioStatus!=null&&Object.hasOwnProperty.call(e,"audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkAudioStatusFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.audioStatus=e.uint32();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&!m.isInteger(e.audioStatus)?"audioStatus: integer expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkAudioStatusFrame)return e;var t=new a.SdkAudioStatusFrame;return e.audioStatus!=null&&(t.audioStatus=e.audioStatus>>>0),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.audioStatus=0),e.audioStatus!=null&&e.hasOwnProperty("audioStatus")&&(n.audioStatus=e.audioStatus),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkMetric=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkMetric"),s.prototype.type=1,s.prototype.value=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&t.uint32(17).double(e.value),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkMetric;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.value=e.double();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:case 88:case 89:case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:case 98:case 99:case 100:case 101:case 102:break}return e.value!=null&&e.hasOwnProperty("value")&&typeof e.value!="number"?"value: number expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkMetric)return e;var t=new a.SdkMetric;switch(e.type){case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87;break;case"VIDEO_ENCODER_IS_HARDWARE":case 88:t.type=88;break;case"VIDEO_DECODER_IS_HARDWARE":case 89:t.type=89;break;case"VIDEO_FREEZE_DURATION":case 91:t.type=91;break;case"VIDEO_PAUSE_COUNT":case 92:t.type=92;break;case"VIDEO_PAUSE_DURATION":case 93:t.type=93;break;case"VIDEO_QUALITY_REASON":case 94:t.type=94;break;case"VIDEO_PROCESSING_TIME":case 95:t.type=95;break;case"RTC_SPK_AUDIO_LEVEL":case 96:t.type=96;break;case"RTC_MIC_AUDIO_LEVEL":case 97:t.type=97;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"RTC_SPK_TOTAL_LOST":case 98:t.type=98;break;case"RTC_SPK_TOTAL_EXPECTED":case 99:t.type=99;break;case"RTC_SPK_TOTAL_RECOVERED_RED":case 100:t.type=100;break;case"RTC_SPK_TOTAL_RECOVERED_FEC":case 101:t.type=101;break;case"VIDEO_QUALITY_LIMITATION_DURATION_CPU":case 102:t.type=102;break}return e.value!=null&&(t.value=Number(e.value)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,n.value=0),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkMetric.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=t.json&&!isFinite(e.value)?String(e.value):e.value),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,e[i[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,e[i[3]="VIDEO_RETRANSMIT_BITRATE"]=3,e[i[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,e[i[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,e[i[6]="VIDEO_BUCKET_DELAY_MS"]=6,e[i[7]="STUN_RTT_MS"]=7,e[i[8]="SOCKET_DISCARDED_PPS"]=8,e[i[9]="RTC_MIC_JITTER_MS"]=9,e[i[10]="RTC_MIC_PPS"]=10,e[i[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,e[i[12]="RTC_MIC_BITRATE"]=12,e[i[13]="RTC_MIC_RTT_MS"]=13,e[i[14]="RTC_SPK_PPS"]=14,e[i[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,e[i[16]="RTC_SPK_JITTER_MS"]=16,e[i[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,e[i[18]="RTC_SPK_BITRATE"]=18,e[i[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,e[i[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,e[i[21]="VIDEO_SENT_RTT_MS"]=21,e[i[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,e[i[23]="VIDEO_NACKS_RECEIVED"]=23,e[i[24]="VIDEO_PLIS_RECEIVED"]=24,e[i[25]="VIDEO_ENCODE_MS"]=25,e[i[26]="VIDEO_INPUT_FPS"]=26,e[i[27]="VIDEO_ENCODE_FPS"]=27,e[i[28]="VIDEO_SENT_FPS"]=28,e[i[29]="VIDEO_FIRS_RECEIVED"]=29,e[i[30]="VIDEO_SENT_PPS"]=30,e[i[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,e[i[32]="VIDEO_SENT_BITRATE"]=32,e[i[33]="VIDEO_DROPPED_FPS"]=33,e[i[34]="VIDEO_TARGET_DELAY_MS"]=34,e[i[35]="VIDEO_DECODE_MS"]=35,e[i[36]="VIDEO_OUTPUT_FPS"]=36,e[i[37]="VIDEO_RECEIVED_PPS"]=37,e[i[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,e[i[39]="VIDEO_RENDER_DELAY_MS"]=39,e[i[40]="VIDEO_RECEIVED_FPS"]=40,e[i[41]="VIDEO_DECODE_FPS"]=41,e[i[42]="VIDEO_NACKS_SENT"]=42,e[i[43]="VIDEO_FIRS_SENT"]=43,e[i[44]="VIDEO_RECEIVED_BITRATE"]=44,e[i[45]="VIDEO_CURRENT_DELAY_MS"]=45,e[i[46]="VIDEO_JITTER_BUFFER_MS"]=46,e[i[47]="VIDEO_DISCARDED_PPS"]=47,e[i[48]="VIDEO_PLIS_SENT"]=48,e[i[49]="VIDEO_RECEIVED_JITTER_MS"]=49,e[i[64]="VIDEO_ENCODE_HEIGHT"]=64,e[i[66]="VIDEO_SENT_QP_SUM"]=66,e[i[69]="VIDEO_DECODE_HEIGHT"]=69,e[i[72]="VIDEO_RECEIVED_QP_SUM"]=72,e[i[86]="VIDEO_ENCODE_WIDTH"]=86,e[i[87]="VIDEO_DECODE_WIDTH"]=87,e[i[88]="VIDEO_ENCODER_IS_HARDWARE"]=88,e[i[89]="VIDEO_DECODER_IS_HARDWARE"]=89,e[i[90]="VIDEO_FREEZE_COUNT"]=90,e[i[91]="VIDEO_FREEZE_DURATION"]=91,e[i[92]="VIDEO_PAUSE_COUNT"]=92,e[i[93]="VIDEO_PAUSE_DURATION"]=93,e[i[94]="VIDEO_QUALITY_REASON"]=94,e[i[95]="VIDEO_PROCESSING_TIME"]=95,e[i[96]="RTC_SPK_AUDIO_LEVEL"]=96,e[i[97]="RTC_MIC_AUDIO_LEVEL"]=97,e[i[98]="RTC_SPK_TOTAL_LOST"]=98,e[i[99]="RTC_SPK_TOTAL_EXPECTED"]=99,e[i[100]="RTC_SPK_TOTAL_RECOVERED_RED"]=100,e[i[101]="RTC_SPK_TOTAL_RECOVERED_FEC"]=101,e[i[102]="VIDEO_QUALITY_LIMITATION_DURATION_CPU"]=102,e}(),s}(),a.SdkStreamMetricFrame=function(){function s(i){if(this.metrics=[],this.dimensions=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamMetricFrame"),s.prototype.streamId=0,s.prototype.groupId=0,s.prototype.metrics=m.emptyArray,s.prototype.dimensions=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(32).uint32(e.groupId),e.metrics!=null&&e.metrics.length)for(var n=0;n<e.metrics.length;++n)a.SdkMetric.encode(e.metrics[n],t.uint32(42).fork()).ldelim();if(e.dimensions!=null&&e.dimensions.length)for(var n=0;n<e.dimensions.length;++n)a.SdkStreamDimension.encode(e.dimensions[n],t.uint32(50).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 3:r.streamId=e.uint32();break;case 4:r.groupId=e.uint32();break;case 5:r.metrics&&r.metrics.length||(r.metrics=[]),r.metrics.push(a.SdkMetric.decode(e,e.uint32()));break;case 6:r.dimensions&&r.dimensions.length||(r.dimensions=[]),r.dimensions.push(a.SdkStreamDimension.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.metrics!=null&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var n=a.SdkMetric.verify(e.metrics[t]);if(n)return"metrics."+n}}if(e.dimensions!=null&&e.hasOwnProperty("dimensions")){if(!Array.isArray(e.dimensions))return"dimensions: array expected";for(var t=0;t<e.dimensions.length;++t){var n=a.SdkStreamDimension.verify(e.dimensions[t]);if(n)return"dimensions."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamMetricFrame)return e;var t=new a.SdkStreamMetricFrame;if(e.streamId!=null&&(t.streamId=e.streamId>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var n=0;n<e.metrics.length;++n){if(typeof e.metrics[n]!="object")throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[n]=a.SdkMetric.fromObject(e.metrics[n])}}if(e.dimensions){if(!Array.isArray(e.dimensions))throw TypeError(".SdkStreamMetricFrame.dimensions: array expected");t.dimensions=[];for(var n=0;n<e.dimensions.length;++n){if(typeof e.dimensions[n]!="object")throw TypeError(".SdkStreamMetricFrame.dimensions: object expected");t.dimensions[n]=a.SdkStreamDimension.fromObject(e.dimensions[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.metrics=[],n.dimensions=[]),t.defaults&&(n.streamId=0,n.groupId=0),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.metrics&&e.metrics.length){n.metrics=[];for(var r=0;r<e.metrics.length;++r)n.metrics[r]=a.SdkMetric.toObject(e.metrics[r],t)}if(e.dimensions&&e.dimensions.length){n.dimensions=[];for(var r=0;r<e.dimensions.length;++r)n.dimensions[r]=a.SdkStreamDimension.toObject(e.dimensions[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkClientMetricFrame=function(){function s(i){if(this.globalMetrics=[],this.streamMetricFrames=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkClientMetricFrame"),s.prototype.globalMetrics=m.emptyArray,s.prototype.streamMetricFrames=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.globalMetrics!=null&&e.globalMetrics.length)for(var n=0;n<e.globalMetrics.length;++n)a.SdkMetric.encode(e.globalMetrics[n],t.uint32(10).fork()).ldelim();if(e.streamMetricFrames!=null&&e.streamMetricFrames.length)for(var n=0;n<e.streamMetricFrames.length;++n)a.SdkStreamMetricFrame.encode(e.streamMetricFrames[n],t.uint32(18).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkClientMetricFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.globalMetrics&&r.globalMetrics.length||(r.globalMetrics=[]),r.globalMetrics.push(a.SdkMetric.decode(e,e.uint32()));break;case 2:r.streamMetricFrames&&r.streamMetricFrames.length||(r.streamMetricFrames=[]),r.streamMetricFrames.push(a.SdkStreamMetricFrame.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.globalMetrics!=null&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t){var n=a.SdkMetric.verify(e.globalMetrics[t]);if(n)return"globalMetrics."+n}}if(e.streamMetricFrames!=null&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(var t=0;t<e.streamMetricFrames.length;++t){var n=a.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]);if(n)return"streamMetricFrames."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkClientMetricFrame)return e;var t=new a.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n){if(typeof e.globalMetrics[n]!="object")throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[n]=a.SdkMetric.fromObject(e.globalMetrics[n])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");t.streamMetricFrames=[];for(var n=0;n<e.streamMetricFrames.length;++n){if(typeof e.streamMetricFrames[n]!="object")throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[n]=a.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.globalMetrics=[],n.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){n.globalMetrics=[];for(var r=0;r<e.globalMetrics.length;++r)n.globalMetrics[r]=a.SdkMetric.toObject(e.globalMetrics[r],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length){n.streamMetricFrames=[];for(var r=0;r<e.streamMetricFrames.length;++r)n.streamMetricFrames[r]=a.SdkStreamMetricFrame.toObject(e.streamMetricFrames[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkStreamDimension=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkStreamDimension"),s.prototype.type=1,s.prototype.value=null,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.value!=null&&Object.hasOwnProperty.call(e,"value")&&a.SdkDimensionValue.encode(e.value,t.uint32(18).fork()).ldelim(),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkStreamDimension;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.value=a.SdkDimensionValue.decode(e,e.uint32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}if(e.value!=null&&e.hasOwnProperty("value")){var t=a.SdkDimensionValue.verify(e.value);if(t)return"value."+t}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkStreamDimension)return e;var t=new a.SdkStreamDimension;switch(e.type){case"VIDEO_ENCODER_NAME":case 1:t.type=1;break;case"VIDEO_DECODER_NAME":case 2:t.type=2;break}if(e.value!=null){if(typeof e.value!="object")throw TypeError(".SdkStreamDimension.value: object expected");t.value=a.SdkDimensionValue.fromObject(e.value)}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"VIDEO_ENCODER_NAME":1,n.value=null),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkStreamDimension.Type[e.type]:e.type),e.value!=null&&e.hasOwnProperty("value")&&(n.value=a.SdkDimensionValue.toObject(e.value,t)),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="VIDEO_ENCODER_NAME"]=1,e[i[2]="VIDEO_DECODER_NAME"]=2,e}(),s}(),a.SdkDimensionValue=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkDimensionValue"),s.prototype.stringValue="",s.prototype.boolValue=!1,s.prototype.uintValue=m.Long?m.Long.fromBits(0,0,!0):0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.stringValue!=null&&Object.hasOwnProperty.call(e,"stringValue")&&t.uint32(10).string(e.stringValue),e.boolValue!=null&&Object.hasOwnProperty.call(e,"boolValue")&&t.uint32(16).bool(e.boolValue),e.uintValue!=null&&Object.hasOwnProperty.call(e,"uintValue")&&t.uint32(24).uint64(e.uintValue),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkDimensionValue;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.stringValue=e.string();break;case 2:r.boolValue=e.bool();break;case 3:r.uintValue=e.uint64();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.stringValue!=null&&e.hasOwnProperty("stringValue")&&!m.isString(e.stringValue)?"stringValue: string expected":e.boolValue!=null&&e.hasOwnProperty("boolValue")&&typeof e.boolValue!="boolean"?"boolValue: boolean expected":e.uintValue!=null&&e.hasOwnProperty("uintValue")&&!m.isInteger(e.uintValue)&&!(e.uintValue&&m.isInteger(e.uintValue.low)&&m.isInteger(e.uintValue.high))?"uintValue: integer|Long expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkDimensionValue)return e;var t=new a.SdkDimensionValue;return e.stringValue!=null&&(t.stringValue=String(e.stringValue)),e.boolValue!=null&&(t.boolValue=Boolean(e.boolValue)),e.uintValue!=null&&(m.Long?(t.uintValue=m.Long.fromValue(e.uintValue)).unsigned=!0:typeof e.uintValue=="string"?t.uintValue=parseInt(e.uintValue,10):typeof e.uintValue=="number"?t.uintValue=e.uintValue:typeof e.uintValue=="object"&&(t.uintValue=new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0))),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults)if(n.stringValue="",n.boolValue=!1,m.Long){var r=new m.Long(0,0,!0);n.uintValue=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.uintValue=t.longs===String?"0":0;return e.stringValue!=null&&e.hasOwnProperty("stringValue")&&(n.stringValue=e.stringValue),e.boolValue!=null&&e.hasOwnProperty("boolValue")&&(n.boolValue=e.boolValue),e.uintValue!=null&&e.hasOwnProperty("uintValue")&&(typeof e.uintValue=="number"?n.uintValue=t.longs===String?String(e.uintValue):e.uintValue:n.uintValue=t.longs===String?m.Long.prototype.toString.call(e.uintValue):t.longs===Number?new m.LongBits(e.uintValue.low>>>0,e.uintValue.high>>>0).toNumber(!0):e.uintValue),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkDataMessageFrame=function(){function s(i){if(this.messages=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkDataMessageFrame"),s.prototype.messages=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.messages!=null&&e.messages.length)for(var n=0;n<e.messages.length;++n)a.SdkDataMessagePayload.encode(e.messages[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkDataMessageFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.messages&&r.messages.length||(r.messages=[]),r.messages.push(a.SdkDataMessagePayload.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.messages!=null&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var n=a.SdkDataMessagePayload.verify(e.messages[t]);if(n)return"messages."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkDataMessageFrame)return e;var t=new a.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var n=0;n<e.messages.length;++n){if(typeof e.messages[n]!="object")throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[n]=a.SdkDataMessagePayload.fromObject(e.messages[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.messages=[]),e.messages&&e.messages.length){n.messages=[];for(var r=0;r<e.messages.length;++r)n.messages[r]=a.SdkDataMessagePayload.toObject(e.messages[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkDataMessagePayload=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkDataMessagePayload"),s.prototype.topic="",s.prototype.data=m.newBuffer([]),s.prototype.lifetimeMs=0,s.prototype.senderAttendeeId="",s.prototype.ingestTimeNs=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.senderExternalUserId="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.topic!=null&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),e.data!=null&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),e.lifetimeMs!=null&&Object.hasOwnProperty.call(e,"lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),e.senderAttendeeId!=null&&Object.hasOwnProperty.call(e,"senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),e.ingestTimeNs!=null&&Object.hasOwnProperty.call(e,"ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),e.senderExternalUserId!=null&&Object.hasOwnProperty.call(e,"senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkDataMessagePayload;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.topic=e.string();break;case 2:r.data=e.bytes();break;case 3:r.lifetimeMs=e.uint32();break;case 4:r.senderAttendeeId=e.string();break;case 5:r.ingestTimeNs=e.int64();break;case 6:r.senderExternalUserId=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.topic!=null&&e.hasOwnProperty("topic")&&!m.isString(e.topic)?"topic: string expected":e.data!=null&&e.hasOwnProperty("data")&&!(e.data&&typeof e.data.length=="number"||m.isString(e.data))?"data: buffer expected":e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&!m.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&!m.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&!m.isInteger(e.ingestTimeNs)&&!(e.ingestTimeNs&&m.isInteger(e.ingestTimeNs.low)&&m.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&!m.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkDataMessagePayload)return e;var t=new a.SdkDataMessagePayload;return e.topic!=null&&(t.topic=String(e.topic)),e.data!=null&&(typeof e.data=="string"?m.base64.decode(e.data,t.data=m.newBuffer(m.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),e.lifetimeMs!=null&&(t.lifetimeMs=e.lifetimeMs>>>0),e.senderAttendeeId!=null&&(t.senderAttendeeId=String(e.senderAttendeeId)),e.ingestTimeNs!=null&&(m.Long?(t.ingestTimeNs=m.Long.fromValue(e.ingestTimeNs)).unsigned=!1:typeof e.ingestTimeNs=="string"?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):typeof e.ingestTimeNs=="number"?t.ingestTimeNs=e.ingestTimeNs:typeof e.ingestTimeNs=="object"&&(t.ingestTimeNs=new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),e.senderExternalUserId!=null&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.topic="",t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=m.newBuffer(n.data))),n.lifetimeMs=0,n.senderAttendeeId="",m.Long){var r=new m.Long(0,0,!1);n.ingestTimeNs=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.ingestTimeNs=t.longs===String?"0":0;n.senderExternalUserId=""}return e.topic!=null&&e.hasOwnProperty("topic")&&(n.topic=e.topic),e.data!=null&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?m.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),e.lifetimeMs!=null&&e.hasOwnProperty("lifetimeMs")&&(n.lifetimeMs=e.lifetimeMs),e.senderAttendeeId!=null&&e.hasOwnProperty("senderAttendeeId")&&(n.senderAttendeeId=e.senderAttendeeId),e.ingestTimeNs!=null&&e.hasOwnProperty("ingestTimeNs")&&(typeof e.ingestTimeNs=="number"?n.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:n.ingestTimeNs=t.longs===String?m.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new m.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),e.senderExternalUserId!=null&&e.hasOwnProperty("senderExternalUserId")&&(n.senderExternalUserId=e.senderExternalUserId),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTurnCredentials=function(){function s(i){if(this.uris=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTurnCredentials"),s.prototype.username="",s.prototype.password="",s.prototype.ttl=0,s.prototype.uris=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.username!=null&&Object.hasOwnProperty.call(e,"username")&&t.uint32(10).string(e.username),e.password!=null&&Object.hasOwnProperty.call(e,"password")&&t.uint32(18).string(e.password),e.ttl!=null&&Object.hasOwnProperty.call(e,"ttl")&&t.uint32(24).uint32(e.ttl),e.uris!=null&&e.uris.length)for(var n=0;n<e.uris.length;++n)t.uint32(34).string(e.uris[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTurnCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.username=e.string();break;case 2:r.password=e.string();break;case 3:r.ttl=e.uint32();break;case 4:r.uris&&r.uris.length||(r.uris=[]),r.uris.push(e.string());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.username!=null&&e.hasOwnProperty("username")&&!m.isString(e.username))return"username: string expected";if(e.password!=null&&e.hasOwnProperty("password")&&!m.isString(e.password))return"password: string expected";if(e.ttl!=null&&e.hasOwnProperty("ttl")&&!m.isInteger(e.ttl))return"ttl: integer expected";if(e.uris!=null&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!m.isString(e.uris[t]))return"uris: string[] expected"}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTurnCredentials)return e;var t=new a.SdkTurnCredentials;if(e.username!=null&&(t.username=String(e.username)),e.password!=null&&(t.password=String(e.password)),e.ttl!=null&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var n=0;n<e.uris.length;++n)t.uris[n]=String(e.uris[n])}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.uris=[]),t.defaults&&(n.username="",n.password="",n.ttl=0),e.username!=null&&e.hasOwnProperty("username")&&(n.username=e.username),e.password!=null&&e.hasOwnProperty("password")&&(n.password=e.password),e.ttl!=null&&e.hasOwnProperty("ttl")&&(n.ttl=e.ttl),e.uris&&e.uris.length){n.uris=[];for(var r=0;r<e.uris.length;++r)n.uris[r]=e.uris[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptItem=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptItem"),s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.speakerAttendeeId="",s.prototype.speakerExternalUserId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type=1,s.prototype.vocabularyFilterMatch=!1,s.prototype.confidence=0,s.prototype.stable=!1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(10).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(16).int64(e.endTime),e.speakerAttendeeId!=null&&Object.hasOwnProperty.call(e,"speakerAttendeeId")&&t.uint32(26).string(e.speakerAttendeeId),e.speakerExternalUserId!=null&&Object.hasOwnProperty.call(e,"speakerExternalUserId")&&t.uint32(34).string(e.speakerExternalUserId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(48).int32(e.type),e.vocabularyFilterMatch!=null&&Object.hasOwnProperty.call(e,"vocabularyFilterMatch")&&t.uint32(56).bool(e.vocabularyFilterMatch),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(65).double(e.confidence),e.stable!=null&&Object.hasOwnProperty.call(e,"stable")&&t.uint32(72).bool(e.stable),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptItem;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.content=e.string();break;case 2:r.endTime=e.int64();break;case 3:r.speakerAttendeeId=e.string();break;case 4:r.speakerExternalUserId=e.string();break;case 5:r.startTime=e.int64();break;case 6:r.type=e.int32();break;case 7:r.vocabularyFilterMatch=e.bool();break;case 8:r.confidence=e.double();break;case 9:r.stable=e.bool();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content))return"content: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&!m.isString(e.speakerAttendeeId))return"speakerAttendeeId: string expected";if(e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&!m.isString(e.speakerExternalUserId))return"speakerExternalUserId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:break}return e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&typeof e.vocabularyFilterMatch!="boolean"?"vocabularyFilterMatch: boolean expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.stable!=null&&e.hasOwnProperty("stable")&&typeof e.stable!="boolean"?"stable: boolean expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptItem)return e;var t=new a.SdkTranscriptItem;switch(e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.speakerAttendeeId!=null&&(t.speakerAttendeeId=String(e.speakerAttendeeId)),e.speakerExternalUserId!=null&&(t.speakerExternalUserId=String(e.speakerExternalUserId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type){case"PRONUNCIATION":case 1:t.type=1;break;case"PUNCTUATION":case 2:t.type=2;break}return e.vocabularyFilterMatch!=null&&(t.vocabularyFilterMatch=Boolean(e.vocabularyFilterMatch)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.stable!=null&&(t.stable=Boolean(e.stable)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.speakerAttendeeId="",n.speakerExternalUserId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=t.enums===String?"PRONUNCIATION":1,n.vocabularyFilterMatch=!1,n.confidence=0,n.stable=!1}return e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.speakerAttendeeId!=null&&e.hasOwnProperty("speakerAttendeeId")&&(n.speakerAttendeeId=e.speakerAttendeeId),e.speakerExternalUserId!=null&&e.hasOwnProperty("speakerExternalUserId")&&(n.speakerExternalUserId=e.speakerExternalUserId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptItem.Type[e.type]:e.type),e.vocabularyFilterMatch!=null&&e.hasOwnProperty("vocabularyFilterMatch")&&(n.vocabularyFilterMatch=e.vocabularyFilterMatch),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.stable!=null&&e.hasOwnProperty("stable")&&(n.stable=e.stable),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="PRONUNCIATION"]=1,e[i[2]="PUNCTUATION"]=2,e}(),s}(),a.SdkTranscriptEntity=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptEntity"),s.prototype.category="",s.prototype.confidence=0,s.prototype.content="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.type="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.category!=null&&Object.hasOwnProperty.call(e,"category")&&t.uint32(10).string(e.category),e.confidence!=null&&Object.hasOwnProperty.call(e,"confidence")&&t.uint32(17).double(e.confidence),e.content!=null&&Object.hasOwnProperty.call(e,"content")&&t.uint32(26).string(e.content),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(32).int64(e.endTime),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(40).int64(e.startTime),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(50).string(e.type),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptEntity;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.category=e.string();break;case 2:r.confidence=e.double();break;case 3:r.content=e.string();break;case 4:r.endTime=e.int64();break;case 5:r.startTime=e.int64();break;case 6:r.type=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.category!=null&&e.hasOwnProperty("category")&&!m.isString(e.category)?"category: string expected":e.confidence!=null&&e.hasOwnProperty("confidence")&&typeof e.confidence!="number"?"confidence: number expected":e.content!=null&&e.hasOwnProperty("content")&&!m.isString(e.content)?"content: string expected":e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high))?"endTime: integer|Long expected":e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high))?"startTime: integer|Long expected":e.type!=null&&e.hasOwnProperty("type")&&!m.isString(e.type)?"type: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptEntity)return e;var t=new a.SdkTranscriptEntity;return e.category!=null&&(t.category=String(e.category)),e.confidence!=null&&(t.confidence=Number(e.confidence)),e.content!=null&&(t.content=String(e.content)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.type!=null&&(t.type=String(e.type)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.category="",n.confidence=0,n.content="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.type=""}return e.category!=null&&e.hasOwnProperty("category")&&(n.category=e.category),e.confidence!=null&&e.hasOwnProperty("confidence")&&(n.confidence=t.json&&!isFinite(e.confidence)?String(e.confidence):e.confidence),e.content!=null&&e.hasOwnProperty("content")&&(n.content=e.content),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.type!=null&&e.hasOwnProperty("type")&&(n.type=e.type),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptAlternative=function(){function s(i){if(this.items=[],this.entities=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptAlternative"),s.prototype.items=m.emptyArray,s.prototype.transcript="",s.prototype.entities=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.items!=null&&e.items.length)for(var n=0;n<e.items.length;++n)a.SdkTranscriptItem.encode(e.items[n],t.uint32(10).fork()).ldelim();if(e.transcript!=null&&Object.hasOwnProperty.call(e,"transcript")&&t.uint32(18).string(e.transcript),e.entities!=null&&e.entities.length)for(var n=0;n<e.entities.length;++n)a.SdkTranscriptEntity.encode(e.entities[n],t.uint32(26).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptAlternative;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.items&&r.items.length||(r.items=[]),r.items.push(a.SdkTranscriptItem.decode(e,e.uint32()));break;case 2:r.transcript=e.string();break;case 3:r.entities&&r.entities.length||(r.entities=[]),r.entities.push(a.SdkTranscriptEntity.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.items!=null&&e.hasOwnProperty("items")){if(!Array.isArray(e.items))return"items: array expected";for(var t=0;t<e.items.length;++t){var n=a.SdkTranscriptItem.verify(e.items[t]);if(n)return"items."+n}}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&!m.isString(e.transcript))return"transcript: string expected";if(e.entities!=null&&e.hasOwnProperty("entities")){if(!Array.isArray(e.entities))return"entities: array expected";for(var t=0;t<e.entities.length;++t){var n=a.SdkTranscriptEntity.verify(e.entities[t]);if(n)return"entities."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptAlternative)return e;var t=new a.SdkTranscriptAlternative;if(e.items){if(!Array.isArray(e.items))throw TypeError(".SdkTranscriptAlternative.items: array expected");t.items=[];for(var n=0;n<e.items.length;++n){if(typeof e.items[n]!="object")throw TypeError(".SdkTranscriptAlternative.items: object expected");t.items[n]=a.SdkTranscriptItem.fromObject(e.items[n])}}if(e.transcript!=null&&(t.transcript=String(e.transcript)),e.entities){if(!Array.isArray(e.entities))throw TypeError(".SdkTranscriptAlternative.entities: array expected");t.entities=[];for(var n=0;n<e.entities.length;++n){if(typeof e.entities[n]!="object")throw TypeError(".SdkTranscriptAlternative.entities: object expected");t.entities[n]=a.SdkTranscriptEntity.fromObject(e.entities[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.items=[],n.entities=[]),t.defaults&&(n.transcript=""),e.items&&e.items.length){n.items=[];for(var r=0;r<e.items.length;++r)n.items[r]=a.SdkTranscriptItem.toObject(e.items[r],t)}if(e.transcript!=null&&e.hasOwnProperty("transcript")&&(n.transcript=e.transcript),e.entities&&e.entities.length){n.entities=[];for(var r=0;r<e.entities.length;++r)n.entities[r]=a.SdkTranscriptEntity.toObject(e.entities[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptLanguageWithScore=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptLanguageWithScore"),s.prototype.languageCode="",s.prototype.score=0,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(10).string(e.languageCode),e.score!=null&&Object.hasOwnProperty.call(e,"score")&&t.uint32(17).double(e.score),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptLanguageWithScore;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.languageCode=e.string();break;case 2:r.score=e.double();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode)?"languageCode: string expected":e.score!=null&&e.hasOwnProperty("score")&&typeof e.score!="number"?"score: number expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptLanguageWithScore)return e;var t=new a.SdkTranscriptLanguageWithScore;return e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.score!=null&&(t.score=Number(e.score)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.languageCode="",n.score=0),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.score!=null&&e.hasOwnProperty("score")&&(n.score=t.json&&!isFinite(e.score)?String(e.score):e.score),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptResult=function(){function s(i){if(this.alternatives=[],this.languageIdentification=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptResult"),s.prototype.alternatives=m.emptyArray,s.prototype.channelId="",s.prototype.endTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.isPartial=!1,s.prototype.resultId="",s.prototype.startTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.languageCode="",s.prototype.languageIdentification=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.alternatives!=null&&e.alternatives.length)for(var n=0;n<e.alternatives.length;++n)a.SdkTranscriptAlternative.encode(e.alternatives[n],t.uint32(10).fork()).ldelim();if(e.channelId!=null&&Object.hasOwnProperty.call(e,"channelId")&&t.uint32(18).string(e.channelId),e.endTime!=null&&Object.hasOwnProperty.call(e,"endTime")&&t.uint32(24).int64(e.endTime),e.isPartial!=null&&Object.hasOwnProperty.call(e,"isPartial")&&t.uint32(32).bool(e.isPartial),e.resultId!=null&&Object.hasOwnProperty.call(e,"resultId")&&t.uint32(42).string(e.resultId),e.startTime!=null&&Object.hasOwnProperty.call(e,"startTime")&&t.uint32(48).int64(e.startTime),e.languageCode!=null&&Object.hasOwnProperty.call(e,"languageCode")&&t.uint32(58).string(e.languageCode),e.languageIdentification!=null&&e.languageIdentification.length)for(var n=0;n<e.languageIdentification.length;++n)a.SdkTranscriptLanguageWithScore.encode(e.languageIdentification[n],t.uint32(66).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptResult;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.alternatives&&r.alternatives.length||(r.alternatives=[]),r.alternatives.push(a.SdkTranscriptAlternative.decode(e,e.uint32()));break;case 2:r.channelId=e.string();break;case 3:r.endTime=e.int64();break;case 4:r.isPartial=e.bool();break;case 5:r.resultId=e.string();break;case 6:r.startTime=e.int64();break;case 7:r.languageCode=e.string();break;case 8:r.languageIdentification&&r.languageIdentification.length||(r.languageIdentification=[]),r.languageIdentification.push(a.SdkTranscriptLanguageWithScore.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.alternatives!=null&&e.hasOwnProperty("alternatives")){if(!Array.isArray(e.alternatives))return"alternatives: array expected";for(var t=0;t<e.alternatives.length;++t){var n=a.SdkTranscriptAlternative.verify(e.alternatives[t]);if(n)return"alternatives."+n}}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&!m.isString(e.channelId))return"channelId: string expected";if(e.endTime!=null&&e.hasOwnProperty("endTime")&&!m.isInteger(e.endTime)&&!(e.endTime&&m.isInteger(e.endTime.low)&&m.isInteger(e.endTime.high)))return"endTime: integer|Long expected";if(e.isPartial!=null&&e.hasOwnProperty("isPartial")&&typeof e.isPartial!="boolean")return"isPartial: boolean expected";if(e.resultId!=null&&e.hasOwnProperty("resultId")&&!m.isString(e.resultId))return"resultId: string expected";if(e.startTime!=null&&e.hasOwnProperty("startTime")&&!m.isInteger(e.startTime)&&!(e.startTime&&m.isInteger(e.startTime.low)&&m.isInteger(e.startTime.high)))return"startTime: integer|Long expected";if(e.languageCode!=null&&e.hasOwnProperty("languageCode")&&!m.isString(e.languageCode))return"languageCode: string expected";if(e.languageIdentification!=null&&e.hasOwnProperty("languageIdentification")){if(!Array.isArray(e.languageIdentification))return"languageIdentification: array expected";for(var t=0;t<e.languageIdentification.length;++t){var n=a.SdkTranscriptLanguageWithScore.verify(e.languageIdentification[t]);if(n)return"languageIdentification."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptResult)return e;var t=new a.SdkTranscriptResult;if(e.alternatives){if(!Array.isArray(e.alternatives))throw TypeError(".SdkTranscriptResult.alternatives: array expected");t.alternatives=[];for(var n=0;n<e.alternatives.length;++n){if(typeof e.alternatives[n]!="object")throw TypeError(".SdkTranscriptResult.alternatives: object expected");t.alternatives[n]=a.SdkTranscriptAlternative.fromObject(e.alternatives[n])}}if(e.channelId!=null&&(t.channelId=String(e.channelId)),e.endTime!=null&&(m.Long?(t.endTime=m.Long.fromValue(e.endTime)).unsigned=!1:typeof e.endTime=="string"?t.endTime=parseInt(e.endTime,10):typeof e.endTime=="number"?t.endTime=e.endTime:typeof e.endTime=="object"&&(t.endTime=new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber())),e.isPartial!=null&&(t.isPartial=Boolean(e.isPartial)),e.resultId!=null&&(t.resultId=String(e.resultId)),e.startTime!=null&&(m.Long?(t.startTime=m.Long.fromValue(e.startTime)).unsigned=!1:typeof e.startTime=="string"?t.startTime=parseInt(e.startTime,10):typeof e.startTime=="number"?t.startTime=e.startTime:typeof e.startTime=="object"&&(t.startTime=new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber())),e.languageCode!=null&&(t.languageCode=String(e.languageCode)),e.languageIdentification){if(!Array.isArray(e.languageIdentification))throw TypeError(".SdkTranscriptResult.languageIdentification: array expected");t.languageIdentification=[];for(var n=0;n<e.languageIdentification.length;++n){if(typeof e.languageIdentification[n]!="object")throw TypeError(".SdkTranscriptResult.languageIdentification: object expected");t.languageIdentification[n]=a.SdkTranscriptLanguageWithScore.fromObject(e.languageIdentification[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.alternatives=[],n.languageIdentification=[]),t.defaults){if(n.channelId="",m.Long){var r=new m.Long(0,0,!1);n.endTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.endTime=t.longs===String?"0":0;if(n.isPartial=!1,n.resultId="",m.Long){var r=new m.Long(0,0,!1);n.startTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startTime=t.longs===String?"0":0;n.languageCode=""}if(e.alternatives&&e.alternatives.length){n.alternatives=[];for(var c=0;c<e.alternatives.length;++c)n.alternatives[c]=a.SdkTranscriptAlternative.toObject(e.alternatives[c],t)}if(e.channelId!=null&&e.hasOwnProperty("channelId")&&(n.channelId=e.channelId),e.endTime!=null&&e.hasOwnProperty("endTime")&&(typeof e.endTime=="number"?n.endTime=t.longs===String?String(e.endTime):e.endTime:n.endTime=t.longs===String?m.Long.prototype.toString.call(e.endTime):t.longs===Number?new m.LongBits(e.endTime.low>>>0,e.endTime.high>>>0).toNumber():e.endTime),e.isPartial!=null&&e.hasOwnProperty("isPartial")&&(n.isPartial=e.isPartial),e.resultId!=null&&e.hasOwnProperty("resultId")&&(n.resultId=e.resultId),e.startTime!=null&&e.hasOwnProperty("startTime")&&(typeof e.startTime=="number"?n.startTime=t.longs===String?String(e.startTime):e.startTime:n.startTime=t.longs===String?m.Long.prototype.toString.call(e.startTime):t.longs===Number?new m.LongBits(e.startTime.low>>>0,e.startTime.high>>>0).toNumber():e.startTime),e.languageCode!=null&&e.hasOwnProperty("languageCode")&&(n.languageCode=e.languageCode),e.languageIdentification&&e.languageIdentification.length){n.languageIdentification=[];for(var c=0;c<e.languageIdentification.length;++c)n.languageIdentification[c]=a.SdkTranscriptLanguageWithScore.toObject(e.languageIdentification[c],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscript=function(){function s(i){if(this.results=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscript"),s.prototype.results=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.results!=null&&e.results.length)for(var n=0;n<e.results.length;++n)a.SdkTranscriptResult.encode(e.results[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscript;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.results&&r.results.length||(r.results=[]),r.results.push(a.SdkTranscriptResult.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.results!=null&&e.hasOwnProperty("results")){if(!Array.isArray(e.results))return"results: array expected";for(var t=0;t<e.results.length;++t){var n=a.SdkTranscriptResult.verify(e.results[t]);if(n)return"results."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscript)return e;var t=new a.SdkTranscript;if(e.results){if(!Array.isArray(e.results))throw TypeError(".SdkTranscript.results: array expected");t.results=[];for(var n=0;n<e.results.length;++n){if(typeof e.results[n]!="object")throw TypeError(".SdkTranscript.results: object expected");t.results[n]=a.SdkTranscriptResult.fromObject(e.results[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.results=[]),e.results&&e.results.length){n.results=[];for(var r=0;r<e.results.length;++r)n.results[r]=a.SdkTranscriptResult.toObject(e.results[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptionStatus=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptionStatus"),s.prototype.type=1,s.prototype.eventTime=m.Long?m.Long.fromBits(0,0,!1):0,s.prototype.transcriptionRegion="",s.prototype.transcriptionConfiguration="",s.prototype.message="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.type!=null&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),e.eventTime!=null&&Object.hasOwnProperty.call(e,"eventTime")&&t.uint32(16).int64(e.eventTime),e.transcriptionRegion!=null&&Object.hasOwnProperty.call(e,"transcriptionRegion")&&t.uint32(26).string(e.transcriptionRegion),e.transcriptionConfiguration!=null&&Object.hasOwnProperty.call(e,"transcriptionConfiguration")&&t.uint32(34).string(e.transcriptionConfiguration),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(42).string(e.message),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptionStatus;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.type=e.int32();break;case 2:r.eventTime=e.int64();break;case 3:r.transcriptionRegion=e.string();break;case 4:r.transcriptionConfiguration=e.string();break;case 5:r.message=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.type!=null&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:break}return e.eventTime!=null&&e.hasOwnProperty("eventTime")&&!m.isInteger(e.eventTime)&&!(e.eventTime&&m.isInteger(e.eventTime.low)&&m.isInteger(e.eventTime.high))?"eventTime: integer|Long expected":e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&!m.isString(e.transcriptionRegion)?"transcriptionRegion: string expected":e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&!m.isString(e.transcriptionConfiguration)?"transcriptionConfiguration: string expected":e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptionStatus)return e;var t=new a.SdkTranscriptionStatus;switch(e.type){case"STARTED":case 1:t.type=1;break;case"INTERRUPTED":case 2:t.type=2;break;case"RESUMED":case 3:t.type=3;break;case"STOPPED":case 4:t.type=4;break;case"FAILED":case 5:t.type=5;break}return e.eventTime!=null&&(m.Long?(t.eventTime=m.Long.fromValue(e.eventTime)).unsigned=!1:typeof e.eventTime=="string"?t.eventTime=parseInt(e.eventTime,10):typeof e.eventTime=="number"?t.eventTime=e.eventTime:typeof e.eventTime=="object"&&(t.eventTime=new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber())),e.transcriptionRegion!=null&&(t.transcriptionRegion=String(e.transcriptionRegion)),e.transcriptionConfiguration!=null&&(t.transcriptionConfiguration=String(e.transcriptionConfiguration)),e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if(t.defaults){if(n.type=t.enums===String?"STARTED":1,m.Long){var r=new m.Long(0,0,!1);n.eventTime=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.eventTime=t.longs===String?"0":0;n.transcriptionRegion="",n.transcriptionConfiguration="",n.message=""}return e.type!=null&&e.hasOwnProperty("type")&&(n.type=t.enums===String?a.SdkTranscriptionStatus.Type[e.type]:e.type),e.eventTime!=null&&e.hasOwnProperty("eventTime")&&(typeof e.eventTime=="number"?n.eventTime=t.longs===String?String(e.eventTime):e.eventTime:n.eventTime=t.longs===String?m.Long.prototype.toString.call(e.eventTime):t.longs===Number?new m.LongBits(e.eventTime.low>>>0,e.eventTime.high>>>0).toNumber():e.eventTime),e.transcriptionRegion!=null&&e.hasOwnProperty("transcriptionRegion")&&(n.transcriptionRegion=e.transcriptionRegion),e.transcriptionConfiguration!=null&&e.hasOwnProperty("transcriptionConfiguration")&&(n.transcriptionConfiguration=e.transcriptionConfiguration),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.Type=function(){var i={},e=Object.create(i);return e[i[1]="STARTED"]=1,e[i[2]="INTERRUPTED"]=2,e[i[3]="RESUMED"]=3,e[i[4]="STOPPED"]=4,e[i[5]="FAILED"]=5,e}(),s}(),a.SdkTranscriptEvent=function(){function s(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)e[t[n]]!=null&&(this[t[n]]=e[t[n]])}o(s,"SdkTranscriptEvent"),s.prototype.status=null,s.prototype.transcript=null;var i;return Object.defineProperty(s.prototype,"Event",{get:m.oneOfGetter(i=["status","transcript"]),set:m.oneOfSetter(i)}),s.create=o(function(t){return new s(t)},"create"),s.encode=o(function(t,n){return n||(n=u.create()),t.status!=null&&Object.hasOwnProperty.call(t,"status")&&a.SdkTranscriptionStatus.encode(t.status,n.uint32(10).fork()).ldelim(),t.transcript!=null&&Object.hasOwnProperty.call(t,"transcript")&&a.SdkTranscript.encode(t.transcript,n.uint32(18).fork()).ldelim(),n},"encode"),s.encodeDelimited=o(function(t,n){return this.encode(t,n).ldelim()},"encodeDelimited"),s.decode=o(function(t,n){t instanceof h||(t=h.create(t));for(var r=n===void 0?t.len:t.pos+n,c=new a.SdkTranscriptEvent;t.pos<r;){var p=t.uint32();switch(p>>>3){case 1:c.status=a.SdkTranscriptionStatus.decode(t,t.uint32());break;case 2:c.transcript=a.SdkTranscript.decode(t,t.uint32());break;default:t.skipType(p&7);break}}return c},"decode"),s.decodeDelimited=o(function(t){return t instanceof h||(t=new h(t)),this.decode(t,t.uint32())},"decodeDelimited"),s.verify=o(function(t){if(typeof t!="object"||t===null)return"object expected";var n={};if(t.status!=null&&t.hasOwnProperty("status")){n.Event=1;{var r=a.SdkTranscriptionStatus.verify(t.status);if(r)return"status."+r}}if(t.transcript!=null&&t.hasOwnProperty("transcript")){if(n.Event===1)return"Event: multiple values";n.Event=1;{var r=a.SdkTranscript.verify(t.transcript);if(r)return"transcript."+r}}return null},"verify"),s.fromObject=o(function(t){if(t instanceof a.SdkTranscriptEvent)return t;var n=new a.SdkTranscriptEvent;if(t.status!=null){if(typeof t.status!="object")throw TypeError(".SdkTranscriptEvent.status: object expected");n.status=a.SdkTranscriptionStatus.fromObject(t.status)}if(t.transcript!=null){if(typeof t.transcript!="object")throw TypeError(".SdkTranscriptEvent.transcript: object expected");n.transcript=a.SdkTranscript.fromObject(t.transcript)}return n},"fromObject"),s.toObject=o(function(t,n){n||(n={});var r={};return t.status!=null&&t.hasOwnProperty("status")&&(r.status=a.SdkTranscriptionStatus.toObject(t.status,n),n.oneofs&&(r.Event="status")),t.transcript!=null&&t.hasOwnProperty("transcript")&&(r.transcript=a.SdkTranscript.toObject(t.transcript,n),n.oneofs&&(r.Event="transcript")),r},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkTranscriptFrame=function(){function s(i){if(this.events=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkTranscriptFrame"),s.prototype.events=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.events!=null&&e.events.length)for(var n=0;n<e.events.length;++n)a.SdkTranscriptEvent.encode(e.events[n],t.uint32(10).fork()).ldelim();return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkTranscriptFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.events&&r.events.length||(r.events=[]),r.events.push(a.SdkTranscriptEvent.decode(e,e.uint32()));break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.events!=null&&e.hasOwnProperty("events")){if(!Array.isArray(e.events))return"events: array expected";for(var t=0;t<e.events.length;++t){var n=a.SdkTranscriptEvent.verify(e.events[t]);if(n)return"events."+n}}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkTranscriptFrame)return e;var t=new a.SdkTranscriptFrame;if(e.events){if(!Array.isArray(e.events))throw TypeError(".SdkTranscriptFrame.events: array expected");t.events=[];for(var n=0;n<e.events.length;++n){if(typeof e.events[n]!="object")throw TypeError(".SdkTranscriptFrame.events: object expected");t.events[n]=a.SdkTranscriptEvent.fromObject(e.events[n])}}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.events=[]),e.events&&e.events.length){n.events=[];for(var r=0;r<e.events.length;++r)n.events[r]=a.SdkTranscriptEvent.toObject(e.events[r],t)}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkRemoteVideoUpdateFrame=function(){function s(i){if(this.addedOrUpdatedVideoSubscriptions=[],this.removedVideoSubscriptionMids=[],i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkRemoteVideoUpdateFrame"),s.prototype.addedOrUpdatedVideoSubscriptions=m.emptyArray,s.prototype.removedVideoSubscriptionMids=m.emptyArray,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){if(t||(t=u.create()),e.addedOrUpdatedVideoSubscriptions!=null&&e.addedOrUpdatedVideoSubscriptions.length)for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n)a.SdkVideoSubscriptionConfiguration.encode(e.addedOrUpdatedVideoSubscriptions[n],t.uint32(10).fork()).ldelim();if(e.removedVideoSubscriptionMids!=null&&e.removedVideoSubscriptionMids.length)for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.uint32(18).string(e.removedVideoSubscriptionMids[n]);return t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkRemoteVideoUpdateFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.addedOrUpdatedVideoSubscriptions&&r.addedOrUpdatedVideoSubscriptions.length||(r.addedOrUpdatedVideoSubscriptions=[]),r.addedOrUpdatedVideoSubscriptions.push(a.SdkVideoSubscriptionConfiguration.decode(e,e.uint32()));break;case 2:r.removedVideoSubscriptionMids&&r.removedVideoSubscriptionMids.length||(r.removedVideoSubscriptionMids=[]),r.removedVideoSubscriptionMids.push(e.string());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.addedOrUpdatedVideoSubscriptions!=null&&e.hasOwnProperty("addedOrUpdatedVideoSubscriptions")){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))return"addedOrUpdatedVideoSubscriptions: array expected";for(var t=0;t<e.addedOrUpdatedVideoSubscriptions.length;++t){var n=a.SdkVideoSubscriptionConfiguration.verify(e.addedOrUpdatedVideoSubscriptions[t]);if(n)return"addedOrUpdatedVideoSubscriptions."+n}}if(e.removedVideoSubscriptionMids!=null&&e.hasOwnProperty("removedVideoSubscriptionMids")){if(!Array.isArray(e.removedVideoSubscriptionMids))return"removedVideoSubscriptionMids: array expected";for(var t=0;t<e.removedVideoSubscriptionMids.length;++t)if(!m.isString(e.removedVideoSubscriptionMids[t]))return"removedVideoSubscriptionMids: string[] expected"}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkRemoteVideoUpdateFrame)return e;var t=new a.SdkRemoteVideoUpdateFrame;if(e.addedOrUpdatedVideoSubscriptions){if(!Array.isArray(e.addedOrUpdatedVideoSubscriptions))throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: array expected");t.addedOrUpdatedVideoSubscriptions=[];for(var n=0;n<e.addedOrUpdatedVideoSubscriptions.length;++n){if(typeof e.addedOrUpdatedVideoSubscriptions[n]!="object")throw TypeError(".SdkRemoteVideoUpdateFrame.addedOrUpdatedVideoSubscriptions: object expected");t.addedOrUpdatedVideoSubscriptions[n]=a.SdkVideoSubscriptionConfiguration.fromObject(e.addedOrUpdatedVideoSubscriptions[n])}}if(e.removedVideoSubscriptionMids){if(!Array.isArray(e.removedVideoSubscriptionMids))throw TypeError(".SdkRemoteVideoUpdateFrame.removedVideoSubscriptionMids: array expected");t.removedVideoSubscriptionMids=[];for(var n=0;n<e.removedVideoSubscriptionMids.length;++n)t.removedVideoSubscriptionMids[n]=String(e.removedVideoSubscriptionMids[n])}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.addedOrUpdatedVideoSubscriptions=[],n.removedVideoSubscriptionMids=[]),e.addedOrUpdatedVideoSubscriptions&&e.addedOrUpdatedVideoSubscriptions.length){n.addedOrUpdatedVideoSubscriptions=[];for(var r=0;r<e.addedOrUpdatedVideoSubscriptions.length;++r)n.addedOrUpdatedVideoSubscriptions[r]=a.SdkVideoSubscriptionConfiguration.toObject(e.addedOrUpdatedVideoSubscriptions[r],t)}if(e.removedVideoSubscriptionMids&&e.removedVideoSubscriptionMids.length){n.removedVideoSubscriptionMids=[];for(var r=0;r<e.removedVideoSubscriptionMids.length;++r)n.removedVideoSubscriptionMids[r]=e.removedVideoSubscriptionMids[r]}return n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkVideoQualityAdaptationPreference=function(){var s={},i=Object.create(s);return i[s[1]="BALANCED"]=1,i[s[2]="MAINTAIN_FRAMERATE"]=2,i[s[3]="MAINTAIN_RESOLUTION"]=3,i}(),a.SdkVideoSubscriptionConfiguration=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkVideoSubscriptionConfiguration"),s.prototype.mid="",s.prototype.attendeeId="",s.prototype.streamId=0,s.prototype.priority=0,s.prototype.targetBitrateKbps=0,s.prototype.groupId=0,s.prototype.qualityAdaptationPreference=1,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t.uint32(10).string(e.mid),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(18).string(e.attendeeId),e.streamId!=null&&Object.hasOwnProperty.call(e,"streamId")&&t.uint32(24).uint32(e.streamId),e.priority!=null&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(32).uint32(e.priority),e.targetBitrateKbps!=null&&Object.hasOwnProperty.call(e,"targetBitrateKbps")&&t.uint32(40).uint32(e.targetBitrateKbps),e.groupId!=null&&Object.hasOwnProperty.call(e,"groupId")&&t.uint32(48).uint32(e.groupId),e.qualityAdaptationPreference!=null&&Object.hasOwnProperty.call(e,"qualityAdaptationPreference")&&t.uint32(56).int32(e.qualityAdaptationPreference),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkVideoSubscriptionConfiguration;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.mid=e.string();break;case 2:r.attendeeId=e.string();break;case 3:r.streamId=e.uint32();break;case 4:r.priority=e.uint32();break;case 5:r.targetBitrateKbps=e.uint32();break;case 6:r.groupId=e.uint32();break;case 7:r.qualityAdaptationPreference=e.int32();break;default:e.skipType(c&7);break}}if(!r.hasOwnProperty("mid"))throw m.ProtocolError("missing required 'mid'",{instance:r});return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(!m.isString(e.mid))return"mid: string expected";if(e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId))return"attendeeId: string expected";if(e.streamId!=null&&e.hasOwnProperty("streamId")&&!m.isInteger(e.streamId))return"streamId: integer expected";if(e.priority!=null&&e.hasOwnProperty("priority")&&!m.isInteger(e.priority))return"priority: integer expected";if(e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&!m.isInteger(e.targetBitrateKbps))return"targetBitrateKbps: integer expected";if(e.groupId!=null&&e.hasOwnProperty("groupId")&&!m.isInteger(e.groupId))return"groupId: integer expected";if(e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference"))switch(e.qualityAdaptationPreference){default:return"qualityAdaptationPreference: enum value expected";case 1:case 2:case 3:break}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkVideoSubscriptionConfiguration)return e;var t=new a.SdkVideoSubscriptionConfiguration;switch(e.mid!=null&&(t.mid=String(e.mid)),e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.streamId!=null&&(t.streamId=e.streamId>>>0),e.priority!=null&&(t.priority=e.priority>>>0),e.targetBitrateKbps!=null&&(t.targetBitrateKbps=e.targetBitrateKbps>>>0),e.groupId!=null&&(t.groupId=e.groupId>>>0),e.qualityAdaptationPreference){case"BALANCED":case 1:t.qualityAdaptationPreference=1;break;case"MAINTAIN_FRAMERATE":case 2:t.qualityAdaptationPreference=2;break;case"MAINTAIN_RESOLUTION":case 3:t.qualityAdaptationPreference=3;break}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.mid="",n.attendeeId="",n.streamId=0,n.priority=0,n.targetBitrateKbps=0,n.groupId=0,n.qualityAdaptationPreference=t.enums===String?"BALANCED":1),e.mid!=null&&e.hasOwnProperty("mid")&&(n.mid=e.mid),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.streamId!=null&&e.hasOwnProperty("streamId")&&(n.streamId=e.streamId),e.priority!=null&&e.hasOwnProperty("priority")&&(n.priority=e.priority),e.targetBitrateKbps!=null&&e.hasOwnProperty("targetBitrateKbps")&&(n.targetBitrateKbps=e.targetBitrateKbps),e.groupId!=null&&e.hasOwnProperty("groupId")&&(n.groupId=e.groupId),e.qualityAdaptationPreference!=null&&e.hasOwnProperty("qualityAdaptationPreference")&&(n.qualityAdaptationPreference=t.enums===String?a.SdkVideoQualityAdaptationPreference[e.qualityAdaptationPreference]:e.qualityAdaptationPreference),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkNotificationFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkNotificationFrame"),s.prototype.level=3,s.prototype.message="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.level!=null&&Object.hasOwnProperty.call(e,"level")&&t.uint32(8).int32(e.level),e.message!=null&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkNotificationFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.level=e.int32();break;case 2:r.message=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.level!=null&&e.hasOwnProperty("level"))switch(e.level){default:return"level: enum value expected";case 1:case 2:case 3:break}return e.message!=null&&e.hasOwnProperty("message")&&!m.isString(e.message)?"message: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkNotificationFrame)return e;var t=new a.SdkNotificationFrame;switch(e.level){case"INFO":case 1:t.level=1;break;case"WARNING":case 2:t.level=2;break;case"ERROR":case 3:t.level=3;break}return e.message!=null&&(t.message=String(e.message)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.level=t.enums===String?"ERROR":3,n.message=""),e.level!=null&&e.hasOwnProperty("level")&&(n.level=t.enums===String?a.SdkNotificationFrame.NotificationLevel[e.level]:e.level),e.message!=null&&e.hasOwnProperty("message")&&(n.message=e.message),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s.NotificationLevel=function(){var i={},e=Object.create(i);return e[i[1]="INFO"]=1,e[i[2]="WARNING"]=2,e[i[3]="ERROR"]=3,e}(),s}(),a.SdkPrimaryMeetingJoinFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPrimaryMeetingJoinFrame"),s.prototype.credentials=null,s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.credentials!=null&&Object.hasOwnProperty.call(e,"credentials")&&a.SdkMeetingSessionCredentials.encode(e.credentials,t.uint32(10).fork()).ldelim(),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPrimaryMeetingJoinFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.credentials=a.SdkMeetingSessionCredentials.decode(e,e.uint32());break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){if(typeof e!="object"||e===null)return"object expected";if(e.credentials!=null&&e.hasOwnProperty("credentials")){var t=a.SdkMeetingSessionCredentials.verify(e.credentials);if(t)return"credentials."+t}return null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkPrimaryMeetingJoinFrame)return e;var t=new a.SdkPrimaryMeetingJoinFrame;if(e.credentials!=null){if(typeof e.credentials!="object")throw TypeError(".SdkPrimaryMeetingJoinFrame.credentials: object expected");t.credentials=a.SdkMeetingSessionCredentials.fromObject(e.credentials)}return t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.credentials=null),e.credentials!=null&&e.hasOwnProperty("credentials")&&(n.credentials=a.SdkMeetingSessionCredentials.toObject(e.credentials,t)),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPrimaryMeetingJoinAckFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPrimaryMeetingJoinAckFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPrimaryMeetingJoinAckFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkPrimaryMeetingJoinAckFrame?e:new a.SdkPrimaryMeetingJoinAckFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkPrimaryMeetingLeaveFrame=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkPrimaryMeetingLeaveFrame"),s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkPrimaryMeetingLeaveFrame;e.pos<n;){var c=e.uint32();switch(c>>>3){default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":null},"verify"),s.fromObject=o(function(e){return e instanceof a.SdkPrimaryMeetingLeaveFrame?e:new a.SdkPrimaryMeetingLeaveFrame},"fromObject"),s.toObject=o(function(){return{}},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkMeetingSessionCredentials=function(){function s(i){if(i)for(var e=Object.keys(i),t=0;t<e.length;++t)i[e[t]]!=null&&(this[e[t]]=i[e[t]])}return o(s,"SdkMeetingSessionCredentials"),s.prototype.attendeeId="",s.prototype.externalUserId="",s.prototype.joinToken="",s.create=o(function(e){return new s(e)},"create"),s.encode=o(function(e,t){return t||(t=u.create()),e.attendeeId!=null&&Object.hasOwnProperty.call(e,"attendeeId")&&t.uint32(10).string(e.attendeeId),e.externalUserId!=null&&Object.hasOwnProperty.call(e,"externalUserId")&&t.uint32(18).string(e.externalUserId),e.joinToken!=null&&Object.hasOwnProperty.call(e,"joinToken")&&t.uint32(26).string(e.joinToken),t},"encode"),s.encodeDelimited=o(function(e,t){return this.encode(e,t).ldelim()},"encodeDelimited"),s.decode=o(function(e,t){e instanceof h||(e=h.create(e));for(var n=t===void 0?e.len:e.pos+t,r=new a.SdkMeetingSessionCredentials;e.pos<n;){var c=e.uint32();switch(c>>>3){case 1:r.attendeeId=e.string();break;case 2:r.externalUserId=e.string();break;case 3:r.joinToken=e.string();break;default:e.skipType(c&7);break}}return r},"decode"),s.decodeDelimited=o(function(e){return e instanceof h||(e=new h(e)),this.decode(e,e.uint32())},"decodeDelimited"),s.verify=o(function(e){return typeof e!="object"||e===null?"object expected":e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&!m.isString(e.attendeeId)?"attendeeId: string expected":e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&!m.isString(e.externalUserId)?"externalUserId: string expected":e.joinToken!=null&&e.hasOwnProperty("joinToken")&&!m.isString(e.joinToken)?"joinToken: string expected":null},"verify"),s.fromObject=o(function(e){if(e instanceof a.SdkMeetingSessionCredentials)return e;var t=new a.SdkMeetingSessionCredentials;return e.attendeeId!=null&&(t.attendeeId=String(e.attendeeId)),e.externalUserId!=null&&(t.externalUserId=String(e.externalUserId)),e.joinToken!=null&&(t.joinToken=String(e.joinToken)),t},"fromObject"),s.toObject=o(function(e,t){t||(t={});var n={};return t.defaults&&(n.attendeeId="",n.externalUserId="",n.joinToken=""),e.attendeeId!=null&&e.hasOwnProperty("attendeeId")&&(n.attendeeId=e.attendeeId),e.externalUserId!=null&&e.hasOwnProperty("externalUserId")&&(n.externalUserId=e.externalUserId),e.joinToken!=null&&e.hasOwnProperty("joinToken")&&(n.joinToken=e.joinToken),n},"toObject"),s.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),s}(),a.SdkVideoCodecCapability=function(){var s={},i=Object.create(s);return i[s[1]="VP8"]=1,i[s[3]="H264_CONSTRAINED_BASELINE_PROFILE"]=3,i[s[8]="VP9_PROFILE_0"]=8,i[s[11]="AV1_MAIN"]=11,i}(),j.exports=a,m.Long=void 0,S.configure()},f3u9:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("U9CR"));let u=o(class Yc{static fullbandSpeechMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Yc(4e4,a)}static fullbandMusicMono(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Yc(64e3,a)}static fullbandMusicStereo(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return new Yc(128e3,a)}isStereo(){return this.audioBitrateBps===128e3}hasRedundancyEnabled(){return this.enableAudioRedundancy}constructor(a=null,s=!0){this.audioBitrateBps=a,this.enableAudioRedundancy=!new h.default().hasFirefoxWebRTC()&&s}},"AudioProfile");l.default=u},fCza:function(j,l,f){"use strict";var S=l;S.build="minimal",S.Writer=f("wDi9"),S.BufferWriter=f("PwtQ"),S.Reader=f("LDIi"),S.BufferReader=f("QhKv"),S.util=f("j4TH"),S.rpc=f("gCnV"),S.roots=f("3E7f"),S.configure=h;function h(){S.util._configure(),S.Writer._configure(S.BufferWriter),S.Reader._configure(S.BufferReader)}o(h,"configure"),h()},fGw7:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("hEYi"));let u=o(class{isConnectionTerminated(){switch(this.type){case h.default.WebSocketFailed:case h.default.WebSocketError:case h.default.WebSocketClosing:case h.default.WebSocketClosed:return!0;default:return!1}}constructor(a,s,i,e,t){this.client=a,this.type=s,this.message=i,this.closeCode=e,this.closeReason=t,this.timestampMs=Date.now()}},"SignalingClientEvent");l.default=u},fZkv:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ppUg")),m=h(f("wXa7")),a=h(f("CAce")),s=h(f("j+uH"));let i=o(class extends s.default{cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){var t;return S(this,void 0,void 0,function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let r=this.context.sdpAnswer;r=new m.default(r).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(r=new m.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new m.default(r).withStereoAudio().sdp)),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new m.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.currentVideoSendCodec=new m.default(r).highestPriorityVideoSendCodec();const c=this.context.activeVideoInput;if(c!==void 0){const g=this.context.audioVideoController.configuration.credentials.attendeeId,d=new u.default(g).hasModality(u.default.MODALITY_CONTENT),y=c.getVideoTracks()[0];d&&(((t=this.context.currentVideoSendCodec)===null||t===void 0?void 0:t.codecName)===a.default.av1Main().codecName?(y.contentHint="text",this.logger.info(`Setting content hint to text for AV1, attendee: ${g}`)):this.context.audioVideoController.configuration.enableSVC&&(y.contentHint="motion",this.logger.info(`Setting content hint to motion to enable SVC, attendee: ${g}`)))}this.logger.info(`processed remote description is >>>${r}<<<`);const p={type:"answer",sdp:r,toJSON:null};try{yield this.createICEConnectionCompletedPromise(p)}catch(g){throw g}})}createICEConnectionCompletedPromise(t){return new Promise((n,r)=>S(this,void 0,void 0,function*(){const c=o(()=>{(this.context.peer.iceConnectionState==="connected"||this.context.peer.iceConnectionState==="completed")&&(this.context.peer.removeEventListener("iceconnectionstatechange",c),n())},"checkConnectionCompleted");this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",c),r(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",c);try{yield this.context.peer.setRemoteDescription(t),this.logger.info("set remote description, waiting for ICE connection"),c()}catch(p){r(p)}}))}constructor(t){super(t.logger),this.context=t,this.taskName="SetRemoteDescriptionTask"}},"SetRemoteDescriptionTask");l.default=i},fi20:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEventCondition=void 0;var S;(function(h){h[h.ConnectingNew=0]="ConnectingNew",h[h.ReconnectingExisting=1]="ReconnectingExisting",h[h.StartedNew=2]="StartedNew",h[h.StartedExisting=3]="StartedExisting",h[h.StartedAfterReconnect=4]="StartedAfterReconnect",h[h.StoppedCleanly=5]="StoppedCleanly",h[h.StoppedWithFailure=6]="StoppedWithFailure"})(S=l.MeetingSessionLifecycleEventCondition||(l.MeetingSessionLifecycleEventCondition={})),l.default=S},ftz4:function(j,l,f){"use strict";var S={},h=S,u=Object.prototype,m=u.hasOwnProperty;function a(i){for(var e=i.name+"",t=h[e],n=m.call(h,e)?t.length:0;n--;){var r=t[n],c=r.func;if(c==null||c==i)return r.name}return e}o(a,"getFuncName");var s=l.a=a},fxRI:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ppUg")),m=f("XCDq"),a=h(f("j+uH"));let s=o(class extends a.default{checkAndApplyVideoConstraint(e,t,n,r,c){return S(this,void 0,void 0,function*(){const p=t.getSettings();let g;if(e?g=this.context.meetingSessionConfiguration.meetingFeatures.contentMaxResolution:g=this.context.meetingSessionConfiguration.meetingFeatures.videoMaxResolution,n>g.videoWidth||r>g.videoHeight||c>g.videoFrameRate){const d={width:{ideal:g.videoWidth},height:{ideal:g.videoHeight},frameRate:{ideal:g.videoFrameRate}};this.context.logger.warn(`Video track (content = ${e}) will be constrained to: ${JSON.stringify(d)} to remain below configured video quality settings, trackSettings: ${JSON.stringify(p)}`);try{yield t.applyConstraints(d)}catch{this.context.logger.info(`Could not apply constraint for video track (content = ${e})`)}}})}run(){return S(this,void 0,void 0,function*(){const e=this.context.videoDuplexMode===m.SdkStreamServiceType.RX||this.context.videoDuplexMode===m.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?m.SdkStreamServiceType.DUPLEX:m.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?m.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile()){this.context.logger.info("has not started local video tile"),this.context.activeVideoInput&&(this.context.activeVideoInput=void 0,this.context.videoStreamIndex.integrateUplinkPolicyDecision([]));return}const t=this.context.videoTileController.getLocalVideoTile();let n;try{n=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch{this.context.logger.warn("could not acquire video input from current device"),this.context.videoTileController.stopLocalVideoTile()}if(this.context.enableSimulcast){const r=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(r.values()))}if(this.context.activeVideoInput=n,n){const r=n.getVideoTracks();if(!r||r.length===0)return;const c=this.context.meetingSessionConfiguration.credentials.attendeeId,p=new u.default(c).hasModality(u.default.MODALITY_CONTENT),g=r[0].getSettings();if(this.context.enableSimulcast){const y=this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints();this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(y)}`);try{yield r[0].applyConstraints(y)}catch{this.context.logger.info("simulcast: pass video without more constraint")}}else this.checkAndApplyVideoConstraint(p,r[0],g.width,g.height,g.frameRate);const d=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(c,!0,n,g.width,g.height,null,d);for(let y=0;y<r.length;y++){const E=r[y];this.logger.info(`using video device label=${E.label} id=${E.id}`),this.context.videoDeviceInformation.current_camera_name=E.label,this.context.videoDeviceInformation.current_camera_id=E.id}}})}constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}},"ReceiveVideoInputTask");l.default=s},"g+gC":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"Attendee");l.default=S},gCnV:function(j,l,f){"use strict";var S=l;S.Service=f("vhAZ")},gLI0:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const S={LOW:7,MEDIUM:15,HIGH:30};let h=o(class{static getBlurAmount(m,a){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*a.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=h,h.BLUR_STRENGTH_DIVISOR=540,l.default=S},gTDO:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("qvnc")),u=S(f("TYXu")),m=S(f("ZIUS"));let a=o(class{realtimeSetLocalAttendeeId(i,e){this.state.localAttendeeId=i,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(i,e,t,n,r){try{e&&(this.state.attendeeIdToExternalUserId[i]=t);for(const c of this.state.attendeeIdChangesCallbacks)c(i,e,t,n,r)}catch(c){this.onError(c)}}realtimeSubscribeToAttendeeIdPresence(i){try{this.state.attendeeIdChangesCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(i){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(i);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(i){try{if(this.state.canUnmute===i)return;this.state.canUnmute=i;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(i)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(i){try{this.state.setCanUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(i){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!0)}catch(i){this.onError(i)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!1);return!0}catch(i){return this.onError(i),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(i){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(i){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(i,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(i)||(this.state.volumeIndicatorCallbacks[i]=[]),this.state.volumeIndicatorCallbacks[i].push(e),this.sendVolumeIndicatorChange(i,!0,!0,!0,this.state.attendeeIdToExternalUserId[i])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(i,e){if(this.state.volumeIndicatorCallbacks[i])if(e){const n=this.state.volumeIndicatorCallbacks[i].indexOf(e);n>=0&&this.state.volumeIndicatorCallbacks[i].splice(n,1)}else delete this.state.volumeIndicatorCallbacks[i]}realtimeUpdateVolumeIndicator(i,e,t,n,r){try{t=this.applyLocalMuteOverride(i,t);const c=this.getVolumeIndicatorState(i);let p=!1,g=!1,d=!1;t!==null&&c.muted!==t&&(c.muted=t,g=!0,c.muted&&c.volume!==0&&(c.volume=0,p=!0)),!c.muted&&e!==null&&(c.volume!==e&&(c.volume=e,p=!0),c.muted===null&&(c.muted=!1,g=!0)),n!==null&&c.signalStrength!==n&&(c.signalStrength=n,d=!0),this.sendVolumeIndicatorChange(i,p,g,d,r)}catch(c){this.onError(c)}}realtimeSubscribeToLocalSignalStrengthChange(i){try{if(this.state.localSignalStrengthChangeCallbacks.push(i),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(i){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(i);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(i){try{this.state.sendDataMessageCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(i){try{const e=this.state.sendDataMessageCallbacks.indexOf(i);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(i,e,t){try{for(const n of this.state.sendDataMessageCallbacks)n(i,e,t)}catch(n){this.onError(n)}}realtimeSubscribeToReceiveDataMessage(i,e){try{this.state.receiveDataMessageCallbacks.has(i)?this.state.receiveDataMessageCallbacks.get(i).push(e):this.state.receiveDataMessageCallbacks.set(i,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(i){try{this.state.receiveDataMessageCallbacks.delete(i)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(i){try{if(this.state.receiveDataMessageCallbacks.has(i.topic))for(const e of this.state.receiveDataMessageCallbacks.get(i.topic))e(i)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(i){try{this.state.fatalErrorCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(i){try{const e=this.state.fatalErrorCallbacks.indexOf(i);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(i){i?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(i,e){const t=this.state.localAttendeeId,n=this.state.muted;return i!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:n}sendVolumeIndicatorChange(i,e,t,n,r){if(this.sendLocalSignalStrengthChange(i,n),!this.state.volumeIndicatorCallbacks.hasOwnProperty(i))return;const c=this.getVolumeIndicatorState(i),p=new m.default;if(e&&(p.volume=c.volume),t&&(p.muted=c.muted),n&&(p.signalStrength=c.signalStrength),!this.stateIsEmpty(p))for(const g of this.state.volumeIndicatorCallbacks[i])g(i,p.volume,p.muted,p.signalStrength,r)}sendLocalSignalStrengthChange(i,e){if(!e||i!==this.state.localAttendeeId)return;const n=this.getVolumeIndicatorState(i).signalStrength;if(n!==null)for(const r of this.state.localSignalStrengthChangeCallbacks)r(n)}getVolumeIndicatorState(i){return this.state.volumeIndicatorState.hasOwnProperty(i)||(this.state.volumeIndicatorState[i]=new m.default),this.state.volumeIndicatorState[i]}stateIsEmpty(i){return i.volume===null&&i.muted===null&&i.signalStrength===null}onError(i){try{for(const e of this.state.fatalErrorCallbacks)e(i)}catch(e){try{console.error(i),console.error(e)}catch{}}}constructor(i,e){this.mediaStreamBroker=i,this.state=new u.default,this._transcriptionController=e||new h.default(this)}},"DefaultRealtimeController");l.default=a},ghxq:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(u){this.currentData=u}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const u=this.health();return u!==this.currentHealth?(this.currentHealth=u,u):null}constructor(u,m,a){this.minHealth=u.minHealth,this.maxHealth=u.maxHealth,this.currentHealth=u.initialHealth,this.currentData=m.clone(),this.name=a}},"BaseConnectionHealthPolicy");l.default=S},h4LR:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.STARTED="started",h.INTERRUPTED="interrupted",h.RESUMED="resumed",h.STOPPED="stopped",h.FAILED="failed"})(S||(S={})),l.default=S},h4op:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("uctb"));let u=o(class{info(a){for(const s of this._loggers)s.info(a)}warn(a){for(const s of this._loggers)s.warn(a)}error(a){for(const s of this._loggers)s.error(a)}debug(a){let s,i;typeof a=="string"?i=a:a?i=o(()=>(s||(s=a()),s),"memoized"):i=""+a;for(const e of this._loggers)e.debug(i)}setLogLevel(a){for(const s of this._loggers)s.setLogLevel(a)}getLogLevel(){for(const a of this._loggers)return a.getLogLevel();return h.default.OFF}constructor(...a){this._loggers=a}},"MultiLogger");l.default=u},h8NR:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{createWorkerTimer(){try{const m=new Blob([`self.onmessage = async function(e){ 
            var timerID = null;
            const awaitTimeout = delay => new Promise( resolve => {
              timerID = setTimeout(resolve, delay);
            })
            await awaitTimeout(e.data);
            postMessage(timerID);
          }`],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(m))}catch{}}start(m,a){return S(this,void 0,void 0,function*(){this.callback=a,this.workerTimer?(this.workerTimer.onmessage=s=>{this.lastTimeout=s.data,this.callback()},this.workerTimer.postMessage(m)):this.lastTimeout=setTimeout(()=>{this.callback()},m)})}destroy(){return S(this,void 0,void 0,function*(){this.callback=void 0,this.lastTimeout&&(clearTimeout(this.lastTimeout),this.lastTimeout=void 0),this.workerTimer&&(this.workerTimer.terminate(),this.workerTimer=void 0)})}constructor(){this.workerTimer=void 0,this.callback=void 0,this.workerTimer=this.createWorkerTimer()}},"DefaultVideoFrameProcessorTimer");l.default=h},h96U:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("w1x/")),u=S(f("aCJD"));let m=o(class Pd{partialCompare(s){return this.priority-s.priority}equals(s){return this.attendeeId===s.attendeeId&&this.targetSize===s.targetSize&&this.priority===s.priority&&this.degradationPreference===s.degradationPreference}clone(){return new Pd(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(s){switch(s){case h.default.Maximum:return Pd.MAXIMUM_BITRATE_KBPS;case h.default.High:return Pd.HIGH_BITRATE_KBPS;case h.default.Medium:return Pd.MID_BITRATE_KBPS;case h.default.Low:return Pd.LOW_BITRATE_KBPS}}constructor(s,i,e,t){this.attendeeId=s,this.priority=i,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:u.default.Balanced}},"VideoPreference");l.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},hAj8:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{getAuthenticationToken(){return this.authenticationToken}toJSON(){const u={};return u.type=this.type,u.v=this.v,u.meetingId=this.meetingId,u.attendeeId=this.attendeeId,u}constructor(u,m,a,s=[]){this.type="Meet",this.v=1,this.meetingId=u,this.attendeeId=m,this.eventsToIgnore=s,this.authenticationToken=a}},"MeetingEventsClientConfiguration");l.default=S},hEYi:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SignalingClientEventType=void 0;var S;(function(h){h[h.WebSocketConnecting=0]="WebSocketConnecting",h[h.WebSocketOpen=1]="WebSocketOpen",h[h.WebSocketError=2]="WebSocketError",h[h.WebSocketClosing=3]="WebSocketClosing",h[h.WebSocketClosed=4]="WebSocketClosed",h[h.WebSocketFailed=5]="WebSocketFailed",h[h.WebSocketMessage=6]="WebSocketMessage",h[h.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",h[h.WebSocketSentMessage=8]="WebSocketSentMessage",h[h.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",h[h.ReceivedSignalFrame=10]="ReceivedSignalFrame",h[h.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"})(S=l.SignalingClientEventType||(l.SignalingClientEventType={})),l.default=S},hGh8:function(j,l,f){"use strict";var S=this&&this.__importDefault||function($r){return $r&&$r.__esModule?$r:{default:$r}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveTURNCredentialsTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoFxProcessor=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=l.RedundantAudioEncoderWorkerCode=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=void 0;const h=S(f("nYR4"));l.AllHighestVideoBandwidthPolicy=h.default;const u=S(f("9BEE"));l.ApplicationMetadata=u.default;const m=S(f("6/h7"));l.AsyncScheduler=m.default;const a=S(f("5ViG"));l.AttachMediaInputTask=a.default;const s=S(f("g+gC"));l.Attendee=s.default;const i=S(f("J+fJ"));l.AudioLogEvent=i.default;const e=S(f("SO8M"));l.AudioProfile=e.default;const t=S(f("rEUf"));l.AudioVideoControllerState=t.default;const n=S(f("vjEy"));l.BackgroundBlurStrength=n.default;const r=S(f("YH3u"));l.BackgroundBlurVideoFrameProcessor=r.default;const c=S(f("ywpn"));l.BackgroundFilterVideoFrameProcessor=c.default;const p=S(f("Agw+"));l.BackgroundReplacementVideoFrameProcessor=p.default;const g=S(f("ghxq"));l.BaseConnectionHealthPolicy=g.default;const d=S(f("aVV0"));l.BaseTask=d.default;const y=S(f("GxrV"));l.BitrateParameters=y.default;const E=S(f("Q8+J"));l.CSPMonitor=E.default;const w=S(f("KsuK"));l.CanvasVideoFrameBuffer=w.default;const k=S(f("Yvks"));l.CheckAudioConnectivityFeedback=k.default;const V=S(f("jmx1"));l.CheckAudioInputFeedback=V.default;const F=S(f("zN22"));l.CheckAudioOutputFeedback=F.default;const N=S(f("CPHI"));l.CheckCameraResolutionFeedback=N.default;const P=S(f("2Bsk"));l.CheckContentShareConnectivityFeedback=P.default;const x=S(f("aSsB"));l.CheckNetworkTCPConnectivityFeedback=x.default;const O=S(f("kph0"));l.CheckNetworkUDPConnectivityFeedback=O.default;const M=S(f("SdmA"));l.CheckVideoConnectivityFeedback=M.default;const D=S(f("NFcc"));l.CheckVideoInputFeedback=D.default;const J=S(f("yMiq"));l.CleanRestartedSessionTask=J.default;const q=S(f("teem"));l.CleanStoppedSessionTask=q.default;const $=S(f("uCvS"));l.ClientMetricReport=$.default;const de=S(f("LmyK"));l.ClientMetricReportDirection=de.default;const Ee=S(f("mpmV"));l.ClientMetricReportMediaType=Ee.default;const _e=S(f("ya0l"));l.ClientVideoStreamReceivingReport=_e.default;const ye=S(f("RfPO"));l.ConnectionHealthData=ye.default;const Be=S(f("wR/T"));l.ConnectionHealthPolicyConfiguration=Be.default;const pt=S(f("e/ca"));l.ConsoleLogger=pt.default;const Ve=S(f("34ho"));l.ContentShareConstants=Ve.default;const gt=S(f("Lrln"));l.ContentShareMediaStreamBroker=gt.default;const dt=S(f("Fyq9"));l.CreatePeerConnectionTask=dt.default;const Je=S(f("7W6Z"));l.CreateSDPTask=Je.default;const _t=S(f("CtrA"));l.DataMessage=_t.default;const ot=S(f("1Cbm"));l.DefaultActiveSpeakerDetector=ot.default;const Et=S(f("UIXl"));l.DefaultActiveSpeakerPolicy=Et.default;const Mt=S(f("WHnE"));l.DefaultAudioMixController=Mt.default;const ze=S(f("2nae"));l.DefaultAudioVideoController=ze.default;const $t=S(f("HLgz"));l.DefaultAudioVideoFacade=$t.default;const Un=S(f("Sa54"));l.DefaultBrowserBehavior=Un.default;const ni=S(f("0NFC"));l.DefaultContentShareController=ni.default;const an=S(f("RUbL"));l.DefaultDeviceController=an.default;const Gn=S(f("t9Fz"));l.DefaultDevicePixelRatioMonitor=Gn.default;const si=S(f("eeYi"));l.DefaultEventController=si.default;const ri=S(f("Y8b2"));l.DefaultMediaDeviceFactory=ri.default;const On=S(f("MFJ1"));l.DefaultMeetingEventReporter=On.default;const Gi=S(f("yx2K"));l.DefaultMeetingReadinessChecker=Gi.default;const ui=S(f("yvTz"));l.DefaultMeetingSession=ui.default;const Fi=S(f("JJ3a"));l.DefaultMessagingSession=Fi.default;const Hi=S(f("bTau"));l.DefaultModality=Hi.default;const Sn=S(f("ML5K"));l.DefaultPingPong=Sn.default;const un=S(f("gTDO"));l.DefaultRealtimeController=un.default;const bn=S(f("ULlC"));l.DefaultReconnectController=bn.default;const Ot=S(f("9ETa"));l.DefaultSessionStateController=Ot.default;const En=S(f("PsbS"));l.DefaultSigV4=En.default;const Lt=S(f("jP1N"));l.DefaultSignalingClient=Lt.default;const Hn=S(f("LUct"));l.DefaultSimulcastUplinkPolicy=Hn.default;const Ji=S(f("NWIo"));l.DefaultSimulcastUplinkPolicyForContentShare=Ji.default;const $n=S(f("IBi3"));l.DefaultTransceiverController=$n.default;const Ti=S(f("qvnc"));l.DefaultTranscriptionController=Ti.default;const Ir=S(f("X3Fi"));l.DefaultUserAgentParser=Ir.default;const er=S(f("XJrD"));l.DefaultVideoCaptureAndEncodeParameter=er.default;const cr=S(f("3zlU"));l.DefaultVideoFrameProcessorPipeline=cr.default;const gi=S(f("EkGV"));l.DefaultVideoFrameProcessorTimer=gi.default;const Yi=S(f("Zkgh"));l.DefaultVideoStreamIdSet=Yi.default;const Xi=S(f("ldli"));l.DefaultVideoStreamIndex=Xi.default;const jt=S(f("JTre"));l.DefaultVideoTile=jt.default;const pe=S(f("+D+n"));l.DefaultVideoTileController=pe.default;const Re=S(f("rcF0"));l.DefaultVideoTileFactory=Re.default;const Fe=S(f("FxSh"));l.DefaultVideoTransformDevice=Fe.default;const qe=S(f("P3Bx"));l.DefaultVolumeIndicatorAdapter=qe.default;const vt=S(f("jHTc"));l.DefaultWebSocketAdapter=vt.default;const lt=S(f("QzVx"));l.DevicePixelRatioWindowSource=lt.default;const Nt=S(f("DbLV"));l.DeviceSelection=Nt.default;const ln=S(f("8FET"));l.EventBufferConfiguration=ln.default;const fn=S(f("Y2s1"));l.EventIngestionConfiguration=fn.default;const Bt=S(f("N9oo"));l.FinishGatheringICECandidatesTask=Bt.default;const Ci=S(f("Np2I"));l.FullJitterBackoff=Ci.default;const Si=S(f("mcAb"));l.FullJitterBackoffFactory=Si.default;const gr=S(f("5/Tg"));l.FullJitterLimitedBackoff=gr.default;const tr=S(f("xzjI"));l.GetUserMediaError=tr.default;const ai=S(f("2oFa"));l.GlobalMetricReport=ai.default;const wr=S(f("3EKQ"));l.InMemoryJSONEventBuffer=wr.default;const li=S(f("8wPz"));l.IntervalScheduler=li.default;const lr=S(f("xJ9D"));l.JoinAndReceiveIndexTask=lr.default;const Zn=S(f("FCN7"));l.LeaveAndReceiveLeaveAckTask=Zn.default;const Or=S(f("curu"));l.ListenForVolumeIndicatorsTask=Or.default;const Qi=S(f("91j7"));l.Log=Qi.default;const zr=S(f("uctb"));l.LogLevel=zr.default;const _r=S(f("tK6J"));l.MediaDeviceProxyHandler=_r.default;const Zi=S(f("hAj8"));l.MeetingEventsClientConfiguration=Zi.default;const ro=S(f("v9PG"));l.MeetingFeatures=ro.default;const yt=S(f("+7ft"));l.MeetingReadinessCheckerConfiguration=yt.default;const st=S(f("/U1e"));l.MeetingSessionConfiguration=st.default;const dn=S(f("a16/"));l.MeetingSessionCredentials=dn.default;const Kt=S(f("tcc5"));l.MeetingSessionLifecycleEvent=Kt.default;const wn=S(f("dPBs"));l.MeetingSessionLifecycleEventCondition=wn.default;const Jn=S(f("6Bxv"));l.MeetingSessionStatus=Jn.default;const z=S(f("lUhs"));l.MeetingSessionStatusCode=z.default;const ue=S(f("V5IF"));l.MeetingSessionTURNCredentials=ue.default;const Me=S(f("iNgN"));l.MeetingSessionURLs=Me.default;const Le=S(f("v8aG"));l.MeetingSessionVideoAvailability=Le.default;const Ye=S(f("evlv"));l.Message=Ye.default;const St=S(f("i+zQ"));l.MessagingSessionConfiguration=St.default;const Ct=S(f("J93s"));l.ModelSpecBuilder=Ct.default;const Tt=S(f("3Ft5"));l.MonitorTask=Tt.default;const Ke=S(f("h4op"));l.MultiLogger=Ke.default;const Pt=S(f("hhlX"));l.NScaleVideoUplinkBandwidthPolicy=Pt.default;const Dt=S(f("Jsna"));l.NoOpAudioVideoController=Dt.default;const Rn=S(f("ir/0"));l.NoOpDebugLogger=Rn.default;const pn=S(f("zNm1"));l.NoOpDeviceController=pn.default;const zn=S(f("Ni8D"));l.NoOpEventReporter=zn.default;const di=S(f("2y31"));l.NoOpLogger=di.default;const Ri=S(f("r9Lw"));l.NoOpMediaStreamBroker=Ri.default;const Pi=S(f("Nzn3"));l.NoOpTask=Pi.default;const fi=S(f("ukPp"));l.NoOpVideoElementFactory=fi.default;const hi=S(f("Wjms"));l.NoOpVideoFrameProcessor=hi.default;const Cn=S(f("otBB"));l.NoVideoDownlinkBandwidthPolicy=Cn.default;const zi=S(f("DcUe"));l.NoVideoUplinkBandwidthPolicy=zi.default;const Vi=S(f("B7cK"));l.NotFoundError=Vi.default;const Ui=S(f("UW8m"));l.NotReadableError=Ui.default;const Rr=S(f("V3UW"));l.OnceTask=Rr.default;const Ii=S(f("mjQB"));l.OpenSignalingConnectionTask=Ii.default;const Sr=S(f("XhYu"));l.OverconstrainedError=Sr.default;const Xn=S(f("e2MG"));l.POSTLogger=Xn.default;const vi=S(f("mv1L"));l.ParallelGroupTask=vi.default;const pi=S(f("V4cD"));l.PermissionDeniedError=pi.default;const _i=S(f("p3mT"));l.PrefetchOn=_i.default;const Yn=S(f("Oxpw"));l.PrefetchSortBy=Yn.default;const Ht=S(f("o13v"));l.PromiseQueue=Ht.default;const nr=S(f("LNXf"));l.PromoteToPrimaryMeetingTask=nr.default;const Fs=S(f("rbNI"));l.RealtimeAttendeePositionInFrame=Fs.default;const qr=S(f("TYXu"));l.RealtimeState=qr.default;const dr=S(f("ZIUS"));l.RealtimeVolumeIndicator=dr.default;const eo=S(f("LhvI"));l.ReceiveAudioInputTask=eo.default;const to=S(f("WRer"));l.ReceiveRemoteVideoPauseResumeTask=to.default;const ur=S(f("cizm"));l.ReceiveTURNCredentialsTask=ur.default;const Vs=S(f("5z6C"));l.ReceiveVideoInputTask=Vs.default;const Us=S(f("1J7j"));l.ReceiveVideoStreamIndexTask=Us.default;const Li=S(f("kItj"));l.ReconnectionHealthPolicy=Li.default;const kr=S(f("aNtF"));l.RedundantAudioEncoder=kr.default;const xo=S(f("i2nt"));l.RedundantAudioEncoderWorkerCode=xo.default;const Hs=S(f("Xf/8"));l.RedundantAudioRecoveryMetricReport=Hs.default;const Jr=S(f("2q7c"));l.RunnableTask=Jr.default;const bo=S(f("AUdx"));l.SDP=bo.default;const uo=S(f("0YRd"));l.SDPCandidateType=uo.default;const Bo=S(f("Iwfh"));l.SDPMediaSection=Bo.default;const ys=S(f("0jNb"));l.SendAndReceiveDataMessagesTask=ys.default;const bs=S(f("LuEC"));l.SendingAudioFailureConnectionHealthPolicy=bs.default;const Zo=S(f("8tla"));l.SerialGroupTask=Zo.default;const Cs=S(f("DUgj"));l.ServerSideNetworkAdaption=Cs.default;const Es=S(f("JHsX"));l.SessionStateControllerAction=Es.default;const fo=S(f("hWev"));l.SessionStateControllerDeferPriority=fo.default;const no=S(f("I0Bj"));l.SessionStateControllerState=no.default;const oo=S(f("87Nr"));l.SessionStateControllerTransitionResult=oo.default;const ho=S(f("ohOv"));l.SetLocalDescriptionTask=ho.default;const Co=S(f("CRwe"));l.SetRemoteDescriptionTask=Co.default;const Eo=S(f("8dVZ"));l.SignalingAndMetricsConnectionMonitor=Eo.default;const Fo=S(f("5rM1"));l.SignalingClientConnectionRequest=Fo.default;const qo=S(f("fGw7"));l.SignalingClientEvent=qo.default;const vr=S(f("hEYi"));l.SignalingClientEventType=vr.default;const es=S(f("COTZ"));l.SignalingClientJoin=es.default;const Ts=S(f("iFpF"));l.SignalingClientSubscribe=Ts.default;const ts=S(f("/sFY"));l.SignalingClientVideoSubscriptionConfiguration=ts.default;const Yr=S(f("riOr"));l.SimulcastContentShareTransceiverController=Yr.default;const Vo=S(f("H7ma"));l.SimulcastLayers=Vo.default;const Dr=S(f("OND3"));l.SimulcastTransceiverController=Dr.default;const po=S(f("nq15"));l.SimulcastVideoStreamIndex=po.default;const mo=S(f("0Kz9"));l.SingleNodeAudioTransformDevice=mo.default;const Uo=S(f("NE7a"));l.StreamMetricReport=Uo.default;const so=S(f("ZPwG"));l.SubscribeAndReceiveSubscribeAckTask=so.default;const Wr=S(f("Lspx"));l.TargetDisplaySize=Wr.default;const To=S(f("Sl5A"));l.TaskStatus=To.default;const Io=S(f("yQ3g"));l.TimeoutScheduler=Io.default;const jr=S(f("L+i+"));l.TimeoutTask=jr.default;const go=S(f("7nob"));l.Transcript=go.default;const Ho=S(f("JMN+"));l.TranscriptAlternative=Ho.default;const Is=S(f("2xSc"));l.TranscriptEntity=Is.default;const zs=S(f("Ol9i"));l.TranscriptItem=zs.default;const Lr=S(f("VWEK"));l.TranscriptItemType=Lr.default;const ns=S(f("SM5d"));l.TranscriptLanguageWithScore=ns.default;const Gr=S(f("5rZr"));l.TranscriptResult=Gr.default;const Ws=S(f("VoiG"));l.TranscriptionStatus=Ws.default;const js=S(f("h4LR"));l.TranscriptionStatusType=js.default;const Xr=S(f("SgmS"));l.TypeError=Xr.default;const wo=S(f("pCf5"));l.UnusableAudioWarningConnectionHealthPolicy=wo.default;const is=S(f("59sL"));l.Versioning=is.default;const zo=S(f("5mR7"));l.VideoAdaptiveProbePolicy=zo.default;const ws=S(f("CLOt"));l.VideoCodecCapability=ws.default;const ir=S(f("rLvK"));l.VideoFxProcessor=ir.default;const Wo=S(f("DG83"));l.VideoLogEvent=Wo.default;const Oo=S(f("NUAg"));l.VideoOnlyTransceiverController=Oo.default;const rs=S(f("uaNU"));l.VideoPreference=rs.default;const Os=S(f("P7D+"));l.VideoPreferences=Os.default;const Qr=S(f("knPd"));l.VideoPriorityBasedPolicy=Qr.default;const Gs=S(f("J1op"));l.VideoPriorityBasedPolicyConfig=Gs.default;const jo=S(f("NBIk"));l.VideoQualityAdaptationPreference=jo.default;const fr=S(f("dWQL"));l.VideoQualitySettings=fr.default;const Go=S(f("aqWb"));l.VideoSource=Go.default;const os=S(f("MhWp"));l.VideoStreamDescription=os.default;const ss=S(f("5mqp"));l.VideoTileState=ss.default;const $o=S(f("6JeQ"));l.VoiceFocusDeviceTransformer=$o.default;const Ro=S(f("25+x"));l.VoiceFocusTransformDevice=Ro.default;const as=S(f("yqyw"));l.WaitForAttendeePresenceTask=as.default;const ls=S(f("4EN+"));l.WebSocketReadyState=ls.default;const ds=S(f("MelK"));l.ZLIBTextCompressor=ds.default;const Zr=f("P7D+");Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return Zr.MutableVideoPreferences}});const ao=f("KyYT");Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return ao.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return ao.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return ao.Maybe}});const Mr=f("NDMw");Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return Mr.isAudioTransformDevice}});const cs=f("rwhO");Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return cs.isDestroyable}});const lo=f("dWP+");Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return lo.isVideoTransformDevice}})},hWev:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.SessionStateControllerDeferPriority=void 0;var S;(function(h){h[h.DoNotDefer=0]="DoNotDefer",h[h.Low=1]="Low",h[h.Medium=2]="Medium",h[h.High=3]="High",h[h.VeryHigh=4]="VeryHigh"})(S=l.SessionStateControllerDeferPriority||(l.SessionStateControllerDeferPriority={})),l.default=S},hhlX:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("XJrD"));let m=o(class Ad{reset(){this.numberOfPublishedVideoSources=void 0,this.optimalParameters=new u.default(0,0,0,0,!1),this.parametersInEffect=new u.default(0,0,0,0,!1),this.encodingParamMap.set(Ad.encodingMapKey,{maxBitrate:0})}updateConnectionMetric(s){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(s){var i;let e=!0;this.transceiverController&&(e=this.transceiverController.hasVideoInput());const t=s.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+(e?1:0),n=s.numberOfParticipants();if(this.numParticipants===n&&this.numberOfPublishedVideoSources===t){(i=this.logger)===null||i===void 0||i.debug("Skipping update index; Number of participants has not changed");return}this.numberOfPublishedVideoSources=t,this.numParticipants=n,this.updateOptimalParameters()}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}updateOptimalParameters(){let s=1;if(this.transceiverController){const i=this.getStreamCaptureSetting();i&&(s=this.calculateEncodingParameters(i).scaleResolutionDownBy)}this.optimalParameters=new u.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1,s,this.enableSVC&&this.numParticipants>2&&this.isUsingSVCCodec)}captureWidth(){let s=640;return this.getNumberOfPublishedVideoSources()>4&&(s=320),s}captureHeight(){let s=384;return this.getNumberOfPublishedVideoSources()>4&&(s=192),s}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let s=0;return this.getNumberOfPublishedVideoSources()<=2?s=this.idealMaxBandwidthKbps:this.getNumberOfPublishedVideoSources()<=4?s=this.idealMaxBandwidthKbps*2/3:s=(544/11+14880/(11*this.getNumberOfPublishedVideoSources()))/600*this.idealMaxBandwidthKbps,Math.trunc(s)}setIdealMaxBandwidthKbps(s){this.idealMaxBandwidthKbps=s}setHasBandwidthPriority(s){this.hasBandwidthPriority=s}setTransceiverController(s){this.transceiverController=s}setSVCEnabled(s){var i;this.enableSVC=s,(i=this.logger)===null||i===void 0||i.info(`setSVCEnabled, enable: ${s}}`)}setHighResolutionFeatureEnabled(s){this.enableHighResolutionFeature=s}updateTransceiverController(){return S(this,void 0,void 0,function*(){const s=this.getStreamCaptureSetting();if(!s)return;const i=this.calculateEncodingParameters(s);this.shouldUpdateEndcodingParameters(i)&&(this.encodingParamMap.set(Ad.encodingMapKey,i),this.transceiverController.setEncodingParameters(this.encodingParamMap))})}shouldUpdateEndcodingParameters(s){var i,e;const t=(e=(i=this.transceiverController.localVideoTransceiver().sender.getParameters())===null||i===void 0?void 0:i.encodings)===null||e===void 0?void 0:e[0];return s.maxBitrate!==(t==null?void 0:t.maxBitrate)||s.scaleResolutionDownBy!==(t==null?void 0:t.scaleResolutionDownBy)||(s==null?void 0:s.scalabilityMode)!==(t==null?void 0:t.scalabilityMode)}calculateEncodingParameters(s){var i,e,t;const n=this.maxBandwidthKbps()*1e3;let r=1,c=720;if(s.height!==void 0&&s.width!==void 0&&this.scaleResolution&&!this.hasBandwidthPriority&&this.getNumberOfPublishedVideoSources()>2&&(c=Ad.targetHeightArray[Math.min(this.getNumberOfPublishedVideoSources(),Ad.targetHeightArray.length-1)][this.enableHighResolutionFeature?1:0],c===480&&(!((i=this.browserBehavior)===null||i===void 0)&&i.disable480pResolutionScaleDown())&&(c=360),r=Math.max(Math.min(s.height,s.width)/c,1),(e=this.logger)===null||e===void 0||e.info(`Resolution scale factor is ${r} for capture resolution ${s.width}x${s.height}. New dimension is ${s.width/r}x${s.height/r}`)),this.enableSVC){let p;return this.numParticipants>=0&&this.numParticipants<3||!this.isUsingSVCCodec?p="L1T1":p=c>=720?"L3T3":c>=360?"L2T3":"L1T3",(t=this.logger)===null||t===void 0||t.info(`calculateEncodingParameters: SVC: ${this.enableSVC}    participants: ${this.numParticipants}     publishers: ${this.getNumberOfPublishedVideoSources()}     bitrate: ${n}  targetHeight: ${c}  scalabilityMode: ${p}   isUsingSVCCodec: ${this.isUsingSVCCodec}`),{scaleResolutionDownBy:r,maxBitrate:n,scalabilityMode:p}}else return{scaleResolutionDownBy:r,maxBitrate:n}}getStreamCaptureSetting(){var s,i,e,t;return(t=(e=(i=(s=this.transceiverController)===null||s===void 0?void 0:s.localVideoTransceiver())===null||i===void 0?void 0:i.sender)===null||e===void 0?void 0:e.track)===null||t===void 0?void 0:t.getSettings()}getNumberOfPublishedVideoSources(){var s;return(s=this.numberOfPublishedVideoSources)!==null&&s!==void 0?s:0}wantsVideoDependencyDescriptorRtpHeaderExtension(){return this.enableSVC}setMeetingSupportedVideoSendCodecs(s,i){const e=s??i,t=e.length>0&&Ad.SVCCodecNames.includes(e[0].codecName);t!==this.isUsingSVCCodec&&(this.isUsingSVCCodec=t,this.updateOptimalParameters())}constructor(s,i=!0,e=void 0,t=void 0){this.selfAttendeeId=s,this.scaleResolution=i,this.logger=e,this.browserBehavior=t,this.numberOfPublishedVideoSources=void 0,this.idealMaxBandwidthKbps=1500,this.hasBandwidthPriority=!1,this.encodingParamMap=new Map,this.enableHighResolutionFeature=!1,this.enableSVC=!1,this.isUsingSVCCodec=!0,this.numParticipants=0,this.reset()}},"NScaleVideoUplinkBandwidthPolicy");l.default=m,m.encodingMapKey="video",m.targetHeightArray=[[0,0],[0,0],[0,0],[540,720],[540,720],[480,540],[480,540],[480,540],[480,540],[360,480],[360,480],[360,480],[360,480],[270,360],[270,360],[270,360],[270,360],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270],[180,270]],m.SVCCodecNames=["VP9"]},hl97:function(j,l,f){"use strict";j.exports=t;var S=f("kU+7"),h,u=S.LongBits,m=S.base64,a=S.utf8;function s(E,w,k){this.fn=E,this.len=w,this.next=void 0,this.val=k}o(s,"Op");function i(){}o(i,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}o(e,"State");function t(){this.len=0,this.head=new s(i,0,0),this.tail=this.head,this.states=null}o(t,"Writer");var n=o(function(){return S.Buffer?o(function(){return(t.create=o(function(){return new h},"create_buffer"))()},"create_buffer_setup"):o(function(){return new t},"create_array")},"create");t.create=n(),t.alloc=o(function(w){return new S.Array(w)},"alloc"),S.Array!==Array&&(t.alloc=S.pool(t.alloc,S.Array.prototype.subarray)),t.prototype._push=o(function(w,k,V){return this.tail=this.tail.next=new s(w,k,V),this.len+=k,this},"push");function r(E,w,k){w[k]=E&255}o(r,"writeByte");function c(E,w,k){for(;E>127;)w[k++]=E&127|128,E>>>=7;w[k]=E}o(c,"writeVarint32");function p(E,w){this.len=E,this.next=void 0,this.val=w}o(p,"VarintOp"),p.prototype=Object.create(s.prototype),p.prototype.fn=c,t.prototype.uint32=o(function(w){return this.len+=(this.tail=this.tail.next=new p((w=w>>>0)<128?1:w<16384?2:w<2097152?3:w<268435456?4:5,w)).len,this},"write_uint32"),t.prototype.int32=o(function(w){return w<0?this._push(g,10,u.fromNumber(w)):this.uint32(w)},"write_int32"),t.prototype.sint32=o(function(w){return this.uint32((w<<1^w>>31)>>>0)},"write_sint32");function g(E,w,k){for(;E.hi;)w[k++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)w[k++]=E.lo&127|128,E.lo=E.lo>>>7;w[k++]=E.lo}o(g,"writeVarint64"),t.prototype.uint64=o(function(w){var k=u.from(w);return this._push(g,k.length(),k)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=o(function(w){var k=u.from(w).zzEncode();return this._push(g,k.length(),k)},"write_sint64"),t.prototype.bool=o(function(w){return this._push(r,1,w?1:0)},"write_bool");function d(E,w,k){w[k]=E&255,w[k+1]=E>>>8&255,w[k+2]=E>>>16&255,w[k+3]=E>>>24}o(d,"writeFixed32"),t.prototype.fixed32=o(function(w){return this._push(d,4,w>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=o(function(w){var k=u.from(w);return this._push(d,4,k.lo)._push(d,4,k.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=o(function(w){return this._push(S.float.writeFloatLE,4,w)},"write_float"),t.prototype.double=o(function(w){return this._push(S.float.writeDoubleLE,8,w)},"write_double");var y=S.Array.prototype.set?o(function(w,k,V){k.set(w,V)},"writeBytes_set"):o(function(w,k,V){for(var F=0;F<w.length;++F)k[V+F]=w[F]},"writeBytes_for");t.prototype.bytes=o(function(w){var k=w.length>>>0;if(!k)return this._push(r,1,0);if(S.isString(w)){var V=t.alloc(k=m.length(w));m.decode(w,V,0),w=V}return this.uint32(k)._push(y,k,w)},"write_bytes"),t.prototype.string=o(function(w){var k=a.length(w);return k?this.uint32(k)._push(a.write,k,w):this._push(r,1,0)},"write_string"),t.prototype.fork=o(function(){return this.states=new e(this),this.head=this.tail=new s(i,0,0),this.len=0,this},"fork"),t.prototype.reset=o(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=o(function(){var w=this.head,k=this.tail,V=this.len;return this.reset().uint32(V),V&&(this.tail.next=w.next,this.tail=k,this.len+=V),this},"ldelim"),t.prototype.finish=o(function(){for(var w=this.head.next,k=this.constructor.alloc(this.len),V=0;w;)w.fn(w.val,k,V),V+=w.len,w=w.next;return k},"finish"),t._configure=function(E){h=E,t.create=n(),h._configure()}},hlxM:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(d,y,E,w){function k(V){return V instanceof E?V:new E(function(F){F(V)})}return o(k,"adopt"),new(E||(E=Promise))(function(V,F){function N(O){try{x(w.next(O))}catch(M){F(M)}}o(N,"fulfilled");function P(O){try{x(w.throw(O))}catch(M){F(M)}}o(P,"rejected");function x(O){O.done?V(O.value):k(O.value).then(N,P)}o(x,"step"),x((w=w.apply(d,y||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.isOldChrome=l.supportsWASMStreaming=l.supportsSharedArrayBuffer=l.supportsWASM=l.supportsAudioWorklet=l.supportsWorker=l.supportsVoiceFocusWorker=l.supportsWASMPostMessage=l.isSafari=void 0;const h=f("GEtQ"),u=o(function(){return!!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/)},"isChrome"),m=o(function(){const y=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis).navigator.userAgent,E=y.match(/Safari\//),w=y.match(/Chrom(?:e|ium)\//);return!!(E&&!w)},"isSafari");l.isSafari=m;const a=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;return l.isSafari(d)?!1:u(d)?(p(d)||0)<95:!0},"supportsWASMPostMessage");l.supportsWASMPostMessage=a;const s=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0,E=arguments.length>2?arguments[2]:void 0;return S(void 0,void 0,void 0,function*(){if(!l.supportsWorker(d,E))return!1;const w=`${y.paths.workers}worker-v1.js`;try{const k=yield h.loadWorker(w,"VoiceFocusTestWorker",y,E);try{k.terminate()}catch(V){E==null||E.debug("Failed to terminate worker.",V)}return!0}catch(k){return E==null||E.info("Failed to fetch and instantiate test worker",k),!1}})},"supportsVoiceFocusWorker");l.supportsVoiceFocusWorker=s;const i=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.Worker}catch(E){return y==null||y.info("Does not support Worker",E),!1}},"supportsWorker");l.supportsWorker=i;const e=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.AudioWorklet&&!!d.AudioWorkletNode}catch(E){return y==null||y.info("Does not support Audio Worklet",E),!1}},"supportsAudioWorklet");l.supportsAudioWorklet=e;const t=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;try{return!!d.WebAssembly&&(!!d.WebAssembly.compile||!!d.WebAssembly.compileStreaming)}catch(E){return y==null||y.info("Does not support WASM",E),!1}},"supportsWASM");l.supportsWASM=t;const n=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:globalThis,E=arguments.length>2?arguments[2]:void 0;try{return!!d.SharedArrayBuffer&&(!!y.chrome||!!d.crossOriginIsolated)}catch{return E==null||E.info("Does not support SharedArrayBuffer."),!1}},"supportsSharedArrayBuffer");l.supportsSharedArrayBuffer=n;const r=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;var E;try{return!!(!((E=d.WebAssembly)===null||E===void 0)&&E.compileStreaming)}catch(w){return y==null||y.info("Does not support WASM streaming compilation",w),!1}},"supportsWASMStreaming");l.supportsWASMStreaming=r;const c=90,p=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis;try{if(!d.chrome)return}catch{}const y=d.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);if(y)return parseInt(y[1],10)},"chromeVersion"),g=o(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,y=arguments.length>1?arguments[1]:void 0;const E=p(d);return E&&E<c?(y==null||y.debug(`Chrome ${E} has incomplete SIMD support.`),!0):!1},"isOldChrome");l.isOldChrome=g},hrQK:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("jG7n")),m=f("gLI0"),a=h(f("FKpq"));let s=o(class extends u.default{validateOptions(e){if(super.validateOptions(e),!e.blurStrength)throw new Error("processor has null options - blurStrength")}initOnFirstExecution(){this.setBlurPixels()}drawImageWithMask(e,t){t||(t=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(t,0,0);const{canvasCtx:r,targetCanvas:c}=this,{width:p,height:g}=c;r.save(),r.clearRect(0,0,p,g),r.drawImage(this.scaledCanvas,0,0,p,g),r.globalCompositeOperation="source-in",r.drawImage(e,0,0,p,g),r.globalCompositeOperation="destination-over",r.filter=`blur(${this.blurAmount}px)`,r.drawImage(e,0,0,c.width,c.height),r.restore()}setBlurStrength(e){this._blurStrength=e,this.logger.info(`blur strength set to ${this._blurStrength}`),this.setBlurPixels()}setBlurPixels(){this.blurAmount=m.BlurStrengthMapper.getBlurAmount(this._blurStrength,{height:this.sourceHeight}),this.logger.info(`background blur amount set to ${this.blurAmount}`)}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}static isSupported(){return S(this,void 0,void 0,function*(){const e=document.createElement("canvas"),t=e.getContext("2d").filter!==void 0;return e.remove(),t})}setEventController(e){this.eventController?this.eventController=e:(this.eventController=e,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const e={backgroundBlurEnabled:"true",backgroundBlurStrength:this._blurStrength,backgroundReplacementEnabled:"false",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",e)}constructor(e,t){super("background blur",e,t,new a.default),this.blurAmount=0,this.setBlurStrength(t.blurStrength),this.logger.info("BackgroundBlur processor successfully created"),this.logger.info(`BackgroundBlur spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundBlur options: ${this.stringify(t)}`)}},"BackgroundBlurProcessorProvided");l.default=s},hspq:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("tA0R"),m=h(f("HbHZ")),a=f("XCDq"),s=h(f("j+uH"));let i=o(class extends s.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){this.context.signalingClient.ready()?(this.context.signalingClient.promoteToPrimaryMeeting(this.credentials),this.context.logger.info("Sent request to join primary meeting"),yield this.receivePrimaryMeetingJoinAck()):this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed))})}receivePrimaryMeetingJoinAck(){return new Promise((t,n)=>{let r=o(class{cancel(){this.signalingClient.removeObserver(this),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()}handleSignalingClientEvent(g){g.isConnectionTerminated()&&(this.signalingClient.removeObserver(this),this.logger.info("PromoteToPrimaryMeetingTask connection terminated"),this.completionCallback(new u.MeetingSessionStatus(u.MeetingSessionStatusCode.SignalingRequestFailed)),t()),g.type===m.default.ReceivedSignalFrame&&g.message.type===a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("Got a primary meeting join ACK"),this.completionCallback(u.MeetingSessionStatus.fromSignalFrame(g.message)),t())}constructor(g,d,y){this.signalingClient=g,this.completionCallback=d,this.logger=y}},"Interceptor");const c=new r(this.context.signalingClient,this.completionCallback,this.context.logger);this.taskCanceler=c,this.context.signalingClient.registerObserver(c)})}constructor(t,n,r){super(t.logger),this.context=t,this.credentials=n,this.completionCallback=r,this.taskName="PromoteToPrimaryMeetingTask",this.taskCanceler=null}},"PromoteToPrimaryMeetingTask");l.default=i},hxn6:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(k,V,F,N){function P(x){return x instanceof F?x:new F(function(O){O(x)})}return o(P,"adopt"),new(F||(F=Promise))(function(x,O){function M(q){try{J(N.next(q))}catch($){O($)}}o(M,"fulfilled");function D(q){try{J(N.throw(q))}catch($){O($)}}o(D,"rejected");function J(q){q.done?x(q.value):P(q.value).then(M,D)}o(J,"step"),J((N=N.apply(k,V||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=f("EkyC"),u=f("KvYa"),m=3,a=2.5,s=2.63,i=.6,e=.65,t=.5,n=.7,r={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=o(class{roundtrip(V,F,N){return new Promise((P,x)=>{this.worker.then(O=>{let M;M=o(D=>{const{message:J,key:q}=D.data;J===F&&q===N&&(O.removeEventListener("message",M),P(D.data))},"listener"),O.addEventListener("message",M),O.postMessage(V)}).catch(O=>{var M;(M=this.logger)===null||M===void 0||M.error("Failed to load worker.",O),x(O)})})}supportsSIMD(V){const F="simd",N=V||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,P={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:N,key:F};return this.roundtrip(P,"simd-support",F).then(x=>x.supports)}measure(V,F){const N=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,P=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,x=V?P:N,O=`bench:${V}`,M={message:"measure",fetchBehavior:this.fetchBehavior,budget:F,path:x,key:O};return this.roundtrip(M,"measurement",O).then(D=>{if(D.measurement)return D.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(V=>{var F;(F=this.logger)===null||F===void 0||F.debug("Stopping estimator worker."),V.terminate()}).catch(V=>{})}constructor(V,F){this.fetchConfig=V,this.logger=F;const N=`${V.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:V.headers,escapedQueryString:V.escapedQueryString},this.worker=h.loadWorker(N,"VoiceFocusEstimator",this.fetchBehavior,F)}},"Estimator");const p=o((k,V)=>k===1?i:V==="quality"?e*k:t*k,"inlineScoreMultiplier"),g=o(function(k){let{supportsSIMD:V,supportsSAB:F,duration:N,executionPreference:P="auto",simdPreference:x,variantPreference:O="auto",namePreference:M="default",usagePreference:D,executionQuantaPreference:J=m}=k,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,$=arguments.length>2?arguments[2]:void 0;const Ee=x==="force"||x!=="disable"&&V,_e=N!==-1,ye=_e?(Ee?a:s)/N:0,Be=Ee?q.simd:q.wasm,pt=_e?p(J,D)*ye:0,Ve=_e?n*ye:0,gt=M,dt=o(Et=>({supported:!1,reason:Et}),"unsupported");if(_e){if(ye<Be.noSupport)return dt(`Performance score ${ye} worse than threshold ${Be.noSupport}.`)}else if(P==="auto"||O==="auto")return dt(`Missing explicit execution (${P}) or variant (${O}) preference, but no scoring performed.`);$==null||$.debug(`Bench duration ${N} yields inline score ${pt} and worker score ${Ve}.`);const Je=o((Et,Mt,ze)=>({supported:!0,useSIMD:Ee,processor:Et,executionApproach:Mt,variant:ze,executionQuanta:Mt==="inline"?J:void 0,name:gt}),"succeed"),_t=o((Et,Mt,ze)=>Mt!=="auto"?!_e||Et>ze[Mt]?Mt:"failed":Et>ze.c100?"c100":Et>ze.c50?"c50":Et>ze.c20?"c20":Et>ze.c10?"c10":"failed","resolveVariant"),ot=o(Et=>{switch(Et||"auto"){case"auto":{let Mt=ot("inline"),ze=ot("worker");return $==null||$.debug(`Reducing auto preference: ${JSON.stringify(Mt)} vs ${JSON.stringify(ze)}`),Mt.supported===!1||ze.supported===!1?ze:Mt.variant===ze.variant||Mt.variant==="c50"?Mt:ze}case"worker":return u.supportsSharedArrayBuffer(globalThis,window,$)?ot("worker-sab"):ot("worker-postMessage");case"inline":{const Mt=_t(pt,O,Be.inline);return Mt==="failed"?dt(`Performance score ${pt} not sufficient for inline use with variant preference ${O}.`):Je("voicefocus-inline-processor","inline",Mt)}case"worker-sab":{if(!F){const ze="Requested worker-sab but no SharedArrayBuffer support.";return $==null||$.warn(ze),{supported:!1,reason:ze}}const Mt=_t(Ve,O,Be.worker);return Mt==="failed"?dt(`Performance score ${Ve} not sufficient for worker use with variant preference ${O}.`):Je("voicefocus-worker-sab-processor","worker-sab",Mt)}case"worker-postMessage":{const Mt=_t(Ve,O,Be.worker);if(Mt==="failed")return dt(`Performance score ${Ve} not sufficient for worker use.`);if(gt==="ns_es"){const ze="Requested echo suppression but postMessage executor does not support it.";return $==null||$.warn(ze),{supported:!1,reason:ze}}return Je("voicefocus-worker-postMessage-processor","worker-postMessage",Mt)}}},"reducePreference");return ot(P)},"decideExecutionApproach"),d=o((k,V,F,N)=>S(void 0,void 0,void 0,function*(){const P={supportsSIMD:k,supportsSAB:u.supportsSharedArrayBuffer(globalThis,window,F),duration:-1};if(k)return F==null||F.info("Supports SIMD: true (force)"),P;const x=!N,O=N||new c(V,F);try{const M=!u.isOldChrome(window,F)&&(yield O.supportsSIMD());return F==null||F.info(`Supports SIMD: ${M} (force: ${k})`),P.supportsSIMD=M,P}finally{x&&O.stop()}}),"featureCheck"),y=o((k,V,F,N)=>S(void 0,void 0,void 0,function*(){const P=new c(V,N);try{const x=yield d(k,V,N,P);if(x.supportsSIMD)try{return x.duration=yield P.measure(!0,F),N==null||N.info("SIMD timing:",x.duration),x}catch{N==null||N.warn("Failed SIMD estimation; falling back to non-SIMD."),x.supportsSIMD=!1}return x.duration=yield P.measure(!1,F),N==null||N.info("No-SIMD timing:",x.duration),x}catch(x){throw N==null||N.error("Could not feature check.",x),x}finally{P.stop()}}),"estimateAndFeatureCheck"),E=o(function(k,V,F){let N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;return S(void 0,void 0,void 0,function*(){let P=k.executionPreference;const{usagePreference:x,variantPreference:O,namePreference:M,simdPreference:D,estimatorBudget:J,executionQuantaPreference:q}=k;x==="interactivity"&&P!=="inline"&&(F==null||F.debug(`Overriding execution preference ${P} to reflect interactivity preference.`),P="inline");const $=D==="force",de=O!=="auto",Ee=P!=="auto";let _e;try{de&&Ee?_e=yield d($,V,F):_e=yield y($,V,J,F)}catch(ye){throw F==null||F.error("Could not load estimator.",ye),new Error("Could not load Voice Focus estimator.")}return g(Object.assign(Object.assign({},_e),{simdPreference:D,executionPreference:P,variantPreference:O,namePreference:M,usagePreference:x,executionQuantaPreference:q}),N,F)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=E;const w=o(k=>{let{category:V,name:F,variant:N,simd:P,url:x}=k;return`${V}-${F}-${N}-v1${P?"_simd":""}`},"decideModel");l.decideModel=w},"i+zQ":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{generateSessionId(){const u=new Uint32Array(1);return window.crypto.getRandomValues(u)[0].toString()}constructor(u,m,a,s){this.userArn=u,this.messagingSessionId=m,this.endpointUrl=a,this.chimeClient=s,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=S},i2nt:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=`class RedundantAudioEncoder {
    constructor() {
        // Each payload must be less than 1024 bytes to fit the 10 bit block length
        this.maxRedPacketSizeBytes = 1 << 10;
        // Limit payload to 1000 bytes to handle small MTU. 1000 is chosen because in Chromium-based browsers, writing audio
        // payloads larger than 1000 bytes using the WebRTC Insertable Streams API (which is used to enable dynamic audio
        // redundancy) will cause an error to be thrown and cause audio flow to permanently stop. See
        // https://crbug.com/1248479.
        this.maxAudioPayloadSizeBytes = 1000;
        // Each payload can encode a timestamp delta of 14 bits
        this.maxRedTimestampOffset = 1 << 14;
        // 4 byte RED header
        this.redHeaderSizeBytes = 4;
        // reduced size for last RED header
        this.redLastHeaderSizeBytes = 1;
        // P-Time for Opus 20 msec packets
        // We do not support other p-times or clock rates
        this.redPacketizationTime = 960;
        // distance between redundant payloads, Opus FEC handles a distance of 1
        // TODO(https://issues.amazon.com/issues/ChimeSDKAudio-55):
        // Consider making this dynamic
        this.redPacketDistance = 2;
        // maximum number of redundant payloads per RTP packet
        this.maxRedEncodings = 2;
        // Maximum number of encodings that can be recovered with a single RED packet, assuming the primary and redundant
        // payloads have FEC.
        this.redMaxRecoveryDistance = this.redPacketDistance * this.maxRedEncodings + 1;
        // maximum history of prior payloads to keep
        // generally we will expire old entries based on timestamp
        // this limit is in place just to make sure the history does not
        // grow too large in the case of erroneous timestamp inputs
        this.maxEncodingHistorySize = 10;
        // Current number of encodings we want to send
        // to the remote end. This will be dynamically
        // updated through the setNumEncodingsFromPacketloss API
        this.numRedundantEncodings = 0;
        // Used to enable or disable redundancy
        // in response to very high packet loss events
        this.redundancyEnabled = true;
        // Loss stats are reported to the main thread every 5 seconds.
        // Since timestamp differences between 2 consecutive packets
        // give us the number of samples in each channel, 1 second
        // is equivalent to 48000 samples:
        // P-time * (1000ms/1s)
        // = (960 samples/20ms) * (1000ms/1s)
        // = 48000 samples/s
        this.lossReportInterval = 48000 * 5;
        // Maximum distance of a packet from the most recent packet timestamp
        // that we will consider for recovery.
        this.maxOutOfOrderPacketDistance = 16;
        /**
         * Below are Opus helper methods and constants.
         */
        this.OPUS_BAD_ARG = -1;
        this.OPUS_INVALID_PACKET = -4;
        // Max number of Opus frames in an Opus packet is 48 (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5).
        this.OPUS_MAX_OPUS_FRAMES = 48;
        // Max number of bytes that any individual Opus frame can have.
        this.OPUS_MAX_FRAME_SIZE_BYTES = 1275;
        this.encodingHistory = new Array();
        this.opusPayloadType = 0;
        this.redPayloadType = 0;
        this.initializePacketLogs();
    }
    /**
     * Creates an instance of RedundantAudioEncoder and sets up callbacks.
     */
    static initializeWorker() {
        RedundantAudioEncoder.log('Initializing RedundantAudioEncoder');
        const encoder = new RedundantAudioEncoder();
        // RED encoding is done using WebRTC Encoded Transform
        // https://github.com/w3c/webrtc-encoded-transform/blob/main/explainer.md
        // Check the DedicatedWorkerGlobalScope for existence of
        // RTCRtpScriptTransformer interface. If exists, then
        // RTCRtpScriptTransform is supported by this browser.
        // @ts-ignore
        if (self.RTCRtpScriptTransformer) {
            // @ts-ignore
            self.onrtctransform = (event) => {
                if (event.transformer.options.type === 'SenderTransform') {
                    encoder.setupSenderTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'ReceiverTransform') {
                    encoder.setupReceiverTransform(event.transformer.readable, event.transformer.writable);
                }
                else if (event.transformer.options.type === 'PassthroughTransform') {
                    encoder.setupPassthroughTransform(event.transformer.readable, event.transformer.writable);
                }
            };
        }
        self.onmessage = (event) => {
            if (event.data.msgType === 'StartRedWorker') {
                encoder.setupSenderTransform(event.data.send.readable, event.data.send.writable);
                encoder.setupReceiverTransform(event.data.receive.readable, event.data.receive.writable);
            }
            else if (event.data.msgType === 'RedPayloadType') {
                encoder.setRedPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'OpusPayloadType') {
                encoder.setOpusPayloadType(event.data.payloadType);
            }
            else if (event.data.msgType === 'UpdateNumRedundantEncodings') {
                encoder.setNumRedundantEncodings(event.data.numRedundantEncodings);
            }
            else if (event.data.msgType === 'Enable') {
                encoder.setRedundancyEnabled(true);
            }
            else if (event.data.msgType === 'Disable') {
                encoder.setRedundancyEnabled(false);
            }
        };
    }
    /**
     * Post logs to the main thread
     */
    static log(msg) {
        if (RedundantAudioEncoder.shouldLog) {
            // @ts-ignore
            self.postMessage({
                type: 'REDWorkerLog',
                log: \`[AudioRed] \${msg}\`,
            });
        }
    }
    /**
     * Returns the number of encodings based on packetLoss value. This is used by \`DefaultTransceiverController\` to
     * determine when to alert the encoder to update the number of encodings. It also determines if we need to
     * turn off red in cases of very high packet loss to avoid congestion collapse.
     */
    static getNumRedundantEncodingsForPacketLoss(packetLoss) {
        let recommendedRedundantEncodings = 0;
        let shouldTurnOffRed = false;
        if (packetLoss <= 8) {
            recommendedRedundantEncodings = 0;
        }
        else if (packetLoss <= 18) {
            recommendedRedundantEncodings = 1;
        }
        else if (packetLoss <= 75) {
            recommendedRedundantEncodings = 2;
        }
        else {
            recommendedRedundantEncodings = 0;
            shouldTurnOffRed = true;
        }
        return [recommendedRedundantEncodings, shouldTurnOffRed];
    }
    /**
     * Sets up a passthrough (no-op) transform for the given streams.
     */
    setupPassthroughTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up passthrough transform');
        readable.pipeTo(writable);
    }
    /**
     * Sets up the transform stream and pipes the outgoing encoded audio frames through the transform function.
     */
    setupSenderTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up sender RED transform');
        const transformStream = new TransformStream({
            transform: this.senderTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Sets up the transform stream and pipes the received encoded audio frames through the transform function.
     */
    setupReceiverTransform(readable, writable) {
        RedundantAudioEncoder.log('Setting up receiver RED transform');
        const transformStream = new TransformStream({
            transform: this.receivePacketLogTransform.bind(this),
        });
        readable.pipeThrough(transformStream).pipeTo(writable);
        return;
    }
    /**
     * Set the RED payload type ideally obtained from local offer.
     */
    setRedPayloadType(payloadType) {
        this.redPayloadType = payloadType;
        RedundantAudioEncoder.log(\`red payload type set to \${this.redPayloadType}\`);
    }
    /**
     * Set the opus payload type ideally obtained from local offer.
     */
    setOpusPayloadType(payloadType) {
        this.opusPayloadType = payloadType;
        RedundantAudioEncoder.log(\`opus payload type set to \${this.opusPayloadType}\`);
    }
    /**
     * Set the number of redundant encodings
     */
    setNumRedundantEncodings(numRedundantEncodings) {
        this.numRedundantEncodings = numRedundantEncodings;
        if (this.numRedundantEncodings > this.maxRedEncodings) {
            this.numRedundantEncodings = this.maxRedEncodings;
        }
        RedundantAudioEncoder.log(\`Updated numRedundantEncodings to \${this.numRedundantEncodings}\`);
    }
    /**
     * Enable or disable redundancy in response to
     * high packet loss event.
     */
    setRedundancyEnabled(enabled) {
        this.redundancyEnabled = enabled;
        RedundantAudioEncoder.log(\`redundancy \${this.redundancyEnabled ? 'enabled' : 'disabled'}\`);
    }
    /**
     * Helper function to only enqueue audio frames if they do not exceed the audio payload byte limit imposed by
     * Chromium-based browsers. Chromium will throw an error (https://crbug.com/1248479) if an audio payload larger than
     * 1000 bytes is enqueued. Any controller that attempts to enqueue an audio payload larger than 1000 bytes will
     * encounter this error and will permanently stop sending or receiving audio.
     */
    enqueueAudioFrameIfPayloadSizeIsValid(
    // @ts-ignore
    frame, controller) {
        if (frame.data.byteLength > this.maxAudioPayloadSizeBytes)
            return;
        controller.enqueue(frame);
    }
    /**
     * Receives encoded frames and modifies as needed before sending to transport.
     */
    senderTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const primaryPayloadBuffer = this.getPrimaryPayload(frame.timestamp, frame.data);
        if (!primaryPayloadBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        const encodedBuffer = this.encode(frame.timestamp, primaryPayloadBuffer);
        /* istanbul ignore next */
        if (!encodedBuffer) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        frame.data = encodedBuffer;
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
        return;
    }
    /**
     * Get the primary payload from encoding
     */
    getPrimaryPayload(primaryTimestamp, frame) {
        const encodings = this.splitEncodings(primaryTimestamp, frame);
        if (!encodings || encodings.length < 1)
            return null;
        return encodings[encodings.length - 1].payload;
    }
    /**
     * Split up the encoding received into primary and redundant encodings
     * These will be ordered oldest to newest which is the same ordering
     * in the RTP red payload.
     */
    splitEncodings(primaryTimestamp, frame, getFecInfo = false, primarySequenceNumber = undefined) {
        // process RED headers (according to RFC 2198)
        //   0                   1                   2                   3
        //   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //  |F|   block PT  |  timestamp offset         |   block length    |
        //  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        //
        // last header
        //   0 1 2 3 4 5 6 7
        //  +-+-+-+-+-+-+-+-+
        //  |0|   Block PT  |
        //  +-+-+-+-+-+-+-+-+
        const payload = new DataView(frame);
        let payloadSizeBytes = payload.byteLength;
        let totalPayloadSizeBytes = 0;
        let totalHeaderSizeBytes = 0;
        let primaryPayloadSizeBytes = 0;
        let payloadOffset = 0;
        let gotLastBlock = false;
        const encodings = new Array();
        const redundantEncodingBlockLengths = new Array();
        const redundantEncodingTimestamps = new Array();
        while (payloadSizeBytes > 0) {
            gotLastBlock = (payload.getUint8(payloadOffset) & 0x80) === 0;
            if (gotLastBlock) {
                // Bits 1 through 7 are payload type
                const payloadType = payload.getUint8(payloadOffset) & 0x7f;
                // Unexpected payload type. This is a bad packet.
                if (payloadType !== this.opusPayloadType) {
                    return null;
                }
                totalPayloadSizeBytes += this.redLastHeaderSizeBytes;
                totalHeaderSizeBytes += this.redLastHeaderSizeBytes;
                // Accumulated block lengths are equal to or larger than the buffer, which means there is no primary block. This
                // is a bad packet.
                if (totalPayloadSizeBytes >= payload.byteLength) {
                    return null;
                }
                primaryPayloadSizeBytes = payload.byteLength - totalPayloadSizeBytes;
                break;
            }
            else {
                if (payloadSizeBytes < this.redHeaderSizeBytes) {
                    return null;
                }
                // Bits 22 through 31 are payload length
                const blockLength = ((payload.getUint8(payloadOffset + 2) & 0x03) << 8) + payload.getUint8(payloadOffset + 3);
                redundantEncodingBlockLengths.push(blockLength);
                const timestampOffset = payload.getUint16(payloadOffset + 1) >> 2;
                const timestamp = primaryTimestamp - timestampOffset;
                redundantEncodingTimestamps.push(timestamp);
                totalPayloadSizeBytes += blockLength + this.redHeaderSizeBytes;
                totalHeaderSizeBytes += this.redHeaderSizeBytes;
                payloadOffset += this.redHeaderSizeBytes;
                payloadSizeBytes -= this.redHeaderSizeBytes;
            }
        }
        // The last block was never found. This is a bad packet.
        if (!gotLastBlock) {
            return null;
        }
        let redundantPayloadOffset = totalHeaderSizeBytes;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const redundantPayloadBuffer = new ArrayBuffer(redundantEncodingBlockLengths[i]);
            const redundantPayloadArray = new Uint8Array(redundantPayloadBuffer);
            redundantPayloadArray.set(new Uint8Array(payload.buffer, redundantPayloadOffset, redundantEncodingBlockLengths[i]), 0);
            const encoding = {
                timestamp: redundantEncodingTimestamps[i],
                payload: redundantPayloadBuffer,
                isRedundant: true,
            };
            if (getFecInfo) {
                encoding.hasFec = this.opusPacketHasFec(new DataView(redundantPayloadBuffer), redundantPayloadBuffer.byteLength);
            }
            encodings.push(encoding);
            redundantPayloadOffset += redundantEncodingBlockLengths[i];
        }
        const primaryPayloadOffset = payload.byteLength - primaryPayloadSizeBytes;
        const primaryPayloadBuffer = new ArrayBuffer(primaryPayloadSizeBytes);
        const primaryArray = new Uint8Array(primaryPayloadBuffer);
        primaryArray.set(new Uint8Array(payload.buffer, primaryPayloadOffset, primaryPayloadSizeBytes), 0);
        const encoding = {
            timestamp: primaryTimestamp,
            payload: primaryPayloadBuffer,
            isRedundant: false,
            seq: primarySequenceNumber,
        };
        if (getFecInfo) {
            encoding.hasFec = this.opusPacketHasFec(new DataView(primaryPayloadBuffer), primaryPayloadBuffer.byteLength);
        }
        encodings.push(encoding);
        return encodings;
    }
    /**
     * Create a new encoding with current primary payload and the older payloads of choice.
     */
    encode(primaryTimestamp, primaryPayload) {
        const primaryPayloadSize = primaryPayload.byteLength;
        // Payload size needs to be valid.
        if (primaryPayloadSize === 0 ||
            primaryPayloadSize >= this.maxRedPacketSizeBytes ||
            primaryPayloadSize >= this.maxAudioPayloadSizeBytes) {
            return null;
        }
        const numRedundantEncodings = this.numRedundantEncodings;
        let headerSizeBytes = this.redLastHeaderSizeBytes;
        let payloadSizeBytes = primaryPayloadSize;
        let bytesAvailable = this.maxAudioPayloadSizeBytes - primaryPayloadSize - headerSizeBytes;
        const redundantEncodingTimestamps = new Array();
        const redundantEncodingPayloads = new Array();
        // If redundancy is disabled then only send the primary payload
        if (this.redundancyEnabled) {
            // Determine how much redundancy we can fit into our packet
            let redundantTimestamp = this.uint32WrapAround(primaryTimestamp - this.redPacketizationTime * this.redPacketDistance);
            for (let i = 0; i < numRedundantEncodings; i++) {
                // Do not add redundant encodings that are beyond the maximum timestamp offset.
                if (this.uint32WrapAround(primaryTimestamp - redundantTimestamp) >= this.maxRedTimestampOffset) {
                    break;
                }
                let findTimestamp = redundantTimestamp;
                let encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                if (!encoding) {
                    // If not found or not important then look for the previous packet.
                    // The current packet may have included FEC for the previous, so just
                    // use the previous packet instead provided that it has voice activity.
                    findTimestamp = this.uint32WrapAround(redundantTimestamp - this.redPacketizationTime);
                    encoding = this.encodingHistory.find(e => e.timestamp === findTimestamp);
                }
                if (encoding) {
                    const redundantEncodingSizeBytes = encoding.payload.byteLength;
                    // Only add redundancy if there are enough bytes available.
                    if (bytesAvailable < this.redHeaderSizeBytes + redundantEncodingSizeBytes)
                        break;
                    bytesAvailable -= this.redHeaderSizeBytes + redundantEncodingSizeBytes;
                    headerSizeBytes += this.redHeaderSizeBytes;
                    payloadSizeBytes += redundantEncodingSizeBytes;
                    redundantEncodingTimestamps.unshift(encoding.timestamp);
                    redundantEncodingPayloads.unshift(encoding.payload);
                }
                redundantTimestamp -= this.redPacketizationTime * this.redPacketDistance;
                redundantTimestamp = this.uint32WrapAround(redundantTimestamp);
            }
        }
        const redPayloadBuffer = new ArrayBuffer(headerSizeBytes + payloadSizeBytes);
        const redPayloadView = new DataView(redPayloadBuffer);
        // Add redundant encoding header(s) to new buffer
        let redPayloadOffset = 0;
        for (let i = 0; i < redundantEncodingTimestamps.length; i++) {
            const timestampDelta = primaryTimestamp - redundantEncodingTimestamps[i];
            redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType | 0x80);
            redPayloadView.setUint16(redPayloadOffset + 1, (timestampDelta << 2) | (redundantEncodingPayloads[i].byteLength >> 8));
            redPayloadView.setUint8(redPayloadOffset + 3, redundantEncodingPayloads[i].byteLength & 0xff);
            redPayloadOffset += this.redHeaderSizeBytes;
        }
        // Add primary encoding header to new buffer
        redPayloadView.setUint8(redPayloadOffset, this.opusPayloadType);
        redPayloadOffset += this.redLastHeaderSizeBytes;
        // Add redundant payload(s) to new buffer
        const redPayloadArray = new Uint8Array(redPayloadBuffer);
        for (let i = 0; i < redundantEncodingPayloads.length; i++) {
            redPayloadArray.set(new Uint8Array(redundantEncodingPayloads[i]), redPayloadOffset);
            redPayloadOffset += redundantEncodingPayloads[i].byteLength;
        }
        // Add primary payload to new buffer
        redPayloadArray.set(new Uint8Array(primaryPayload), redPayloadOffset);
        redPayloadOffset += primaryPayload.byteLength;
        /* istanbul ignore next */
        // Sanity check that we got the expected total payload size.
        if (redPayloadOffset !== headerSizeBytes + payloadSizeBytes)
            return null;
        this.updateEncodingHistory(primaryTimestamp, primaryPayload);
        return redPayloadBuffer;
    }
    /**
     * Update the encoding history with the latest primary encoding
     */
    updateEncodingHistory(primaryTimestamp, primaryPayload) {
        // Remove encodings from the history if they are too old.
        for (const encoding of this.encodingHistory) {
            const maxTimestampDelta = this.redPacketizationTime * this.redMaxRecoveryDistance;
            if (primaryTimestamp - encoding.timestamp >= maxTimestampDelta) {
                this.encodingHistory.shift();
            }
            else {
                break;
            }
        }
        // Only add an encoding to the history if the encoding is deemed to be important. An encoding is important if it is
        // a CELT-only packet or contains voice activity.
        const packet = new DataView(primaryPayload);
        if (this.opusPacketIsCeltOnly(packet) ||
            this.opusPacketHasVoiceActivity(packet, packet.byteLength) > 0) {
            // Check if adding an encoding will cause the length of the encoding history to exceed the maximum history size.
            // This is not expected to happen but could occur if we get incorrect timestamps. We want to make sure our memory
            // usage is bounded. In this case, just clear the history and start over from empty.
            if (this.encodingHistory.length + 1 > this.maxEncodingHistorySize)
                this.encodingHistory.length = 0;
            this.encodingHistory.push({ timestamp: primaryTimestamp, payload: primaryPayload });
        }
    }
    /**
     * Initialize packet logs and metric values.
     */
    initializePacketLogs() {
        // The extra space from the max RED recovery distance is to ensure that we do not incorrectly count recovery for
        // packets that have already been received but are outside of the max out-of-order distance.
        const packetLogSize = this.maxOutOfOrderPacketDistance + this.redMaxRecoveryDistance;
        this.primaryPacketLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.redRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.fecRecoveryLog = {
            window: new Array(packetLogSize),
            index: 0,
            windowSize: packetLogSize,
        };
        this.totalAudioPacketsExpected = 0;
        this.totalAudioPacketsLost = 0;
        this.totalAudioPacketsRecoveredRed = 0;
        this.totalAudioPacketsRecoveredFec = 0;
    }
    /**
     * Receives encoded frames from the server
     * and adds the timestamps to a packet log
     * to calculate an approximate recovery metric.
     */
    receivePacketLogTransform(
    // @ts-ignore
    frame, controller) {
        const frameMetadata = frame.getMetadata();
        // @ts-ignore
        if (frameMetadata.payloadType !== this.redPayloadType) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        // @ts-ignore
        const encodings = this.splitEncodings(frame.timestamp, frame.data, 
        /*getFecInfo*/ true, frameMetadata.sequenceNumber);
        if (!encodings) {
            this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
            return;
        }
        for (let i = encodings.length - 1; i >= 0; i--) {
            if (this.updateLossStats(encodings[i])) {
                this.updateRedStats(encodings[i]);
                this.updateFecStats(encodings[i]);
            }
        }
        this.maybeReportLossStats(encodings[encodings.length - 1].timestamp, frameMetadata.synchronizationSource);
        this.enqueueAudioFrameIfPayloadSizeIsValid(frame, controller);
    }
    /**
     * Adds a timestamp to the primary packet log.
     * This also updates totalAudioPacketsLost and totalAudioPacketsExpected by looking
     * at the difference between timestamps.
     *
     * @param encoding : The encoding to be analyzed
     * @returns false if sequence number was greater than max out of order distance
     *          true otherwise
     */
    updateLossStats(encoding) {
        if (encoding.isRedundant)
            return true;
        const timestamp = encoding.timestamp;
        const seq = encoding.seq;
        if (this.totalAudioPacketsExpected === 0) {
            this.totalAudioPacketsExpected = 1;
            this.newestSequenceNumber = seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
            return true;
        }
        const diff = this.int16(seq - this.newestSequenceNumber);
        if (diff < -this.maxOutOfOrderPacketDistance)
            return false;
        if (diff < 0) {
            if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
                if (this.totalAudioPacketsLost > 0)
                    this.totalAudioPacketsLost--;
                this.addTimestamp(this.primaryPacketLog, timestamp);
                this.removeFromRecoveryWindows(timestamp);
            }
        }
        else if (diff > 1) {
            this.totalAudioPacketsLost += diff - 1;
        }
        if (diff > 0) {
            this.totalAudioPacketsExpected += diff;
            this.newestSequenceNumber = encoding.seq;
            this.addTimestamp(this.primaryPacketLog, timestamp);
        }
        return true;
    }
    /**
     * Adds a timestamp to the red recovery log if it is not present in
     * the primary packet log and if it's not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateRedStats(encoding) {
        if (!encoding.isRedundant || this.totalAudioPacketsLost === 0)
            return;
        const timestamp = encoding.timestamp;
        if (!this.hasTimestamp(this.primaryPacketLog, timestamp)) {
            if (!this.hasTimestamp(this.redRecoveryLog, timestamp)) {
                this.totalAudioPacketsRecoveredRed++;
                this.addTimestamp(this.redRecoveryLog, timestamp);
            }
            if (this.removeTimestamp(this.fecRecoveryLog, timestamp)) {
                /* istanbul ignore else */
                if (this.totalAudioPacketsRecoveredFec > 0)
                    this.totalAudioPacketsRecoveredFec--;
            }
        }
    }
    /**
     * Adds a timestamp to the fec recovery log if it is not present in
     * the primary packet log and red recovery log and if it is not too old.
     *
     * @param encoding : The encoding to be analyzed
     */
    updateFecStats(encoding) {
        if (!encoding.hasFec || this.totalAudioPacketsLost === 0)
            return;
        const fecTimestamp = encoding.timestamp - this.redPacketizationTime;
        if (this.hasTimestamp(this.primaryPacketLog, fecTimestamp) ||
            this.hasTimestamp(this.redRecoveryLog, fecTimestamp) ||
            this.hasTimestamp(this.fecRecoveryLog, fecTimestamp)) {
            return;
        }
        this.totalAudioPacketsRecoveredFec++;
        this.addTimestamp(this.fecRecoveryLog, fecTimestamp);
    }
    /**
     * Reports loss metrics to DefaultTransceiverController
     *
     * @param timestamp : Timestamp of most recent primary packet
     */
    maybeReportLossStats(timestamp, ssrc) {
        if (timestamp - this.lastLossReportTimestamp < this.lossReportInterval)
            return;
        /* istanbul ignore next */
        if (RedundantAudioEncoder.shouldReportStats) {
            // @ts-ignore
            self.postMessage({
                type: 'RedundantAudioEncoderStats',
                ssrc,
                totalAudioPacketsLost: this.totalAudioPacketsLost,
                totalAudioPacketsExpected: this.totalAudioPacketsExpected,
                totalAudioPacketsRecoveredRed: this.totalAudioPacketsRecoveredRed,
                totalAudioPacketsRecoveredFec: this.totalAudioPacketsRecoveredFec,
            });
        }
        this.lastLossReportTimestamp = timestamp;
    }
    /**
     * Adds a timestamp to a packet log
     *
     * @param packetLog : The packetlog to add the timestamp to
     * @param timestamp : The timestamp that should be added
     */
    addTimestamp(packetLog, timestamp) {
        packetLog.window[packetLog.index] = timestamp;
        packetLog.index = (packetLog.index + 1) % packetLog.windowSize;
    }
    /**
     * Checks if a timestamp is in a packetlog
     *
     * @param packetLog : The packetlog to search
     * @param timestamp : The timestamp to search for
     * @returns true if timestamp is present, false otherwise
     */
    hasTimestamp(packetLog, timestamp) {
        const element = packetLog.window.find(t => t === timestamp);
        return !!element;
    }
    /**
     * Removes a timestamp from a packet log
     *
     * @param packetLog : The packetlog from which the timestamp should be removed
     * @param timestamp : The timestamp to be removed
     * @returns true if timestamp was present in the log and removed, false otherwise
     */
    removeTimestamp(packetLog, timestamp) {
        const index = packetLog.window.indexOf(timestamp);
        if (index >= 0) {
            packetLog.window[index] = undefined;
            return true;
        }
        return false;
    }
    /**
     * Removes a timestamp from red and fec recovery windows.
     *
     * @param timestamp : The timestamp to be removed
     */
    removeFromRecoveryWindows(timestamp) {
        let removed = this.removeTimestamp(this.redRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredRed > 0)
                this.totalAudioPacketsRecoveredRed--;
        }
        removed = this.removeTimestamp(this.fecRecoveryLog, timestamp);
        if (removed) {
            if (this.totalAudioPacketsRecoveredFec > 0)
                this.totalAudioPacketsRecoveredFec--;
        }
    }
    /**
     * Converts the supplied argument to 32-bit unsigned integer
     */
    uint32WrapAround(num) {
        const mod = 4294967296; // 2^32
        let res = num;
        if (num >= mod) {
            res = num - mod;
        }
        else if (num < 0) {
            res = mod + num;
        }
        return res;
    }
    /**
     * Converts the supplied argument to 16-bit signed integer
     */
    int16(num) {
        return (num << 16) >> 16;
    }
    /**
     * Determines if an Opus packet is in CELT-only mode.
     *
     * @param packet Opus packet.
     * @returns \`true\` if the packet is in CELT-only mode.
     */
    opusPacketIsCeltOnly(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // Since CELT-only packets are represented using configurations 16 to 31, the highest 'config' bit will always be 1
        // for CELT-only packets.
        return !!(packet.getUint8(0) & 0x80);
    }
    /**
     * Gets the number of samples per frame from an Opus packet.
     *
     * @param packet Opus packet. This must contain at least one byte of data.
     * @param sampleRateHz 32-bit integer sampling rate in Hz. This must be a multiple of 400 or inaccurate results will
     *                     be returned.
     * @returns Number of samples per frame.
     */
    opusPacketGetSamplesPerFrame(packet, sampleRateHz) {
        // Sample rate must be a 32-bit integer.
        sampleRateHz = Math.round(sampleRateHz);
        sampleRateHz = Math.min(Math.max(sampleRateHz, -(Math.pow(2, 32))), Math.pow(2, 32) - 1);
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        let numSamples;
        let frameSizeOption;
        // Case for CELT-only packet.
        if (this.opusPacketIsCeltOnly(packet)) {
            // The lower 3 'config' bits indicate the frame size option.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            // The frame size options 0, 1, 2, 3 correspond to frame sizes of 2.5, 5, 10, 20 ms. Notice that the frame sizes
            // can be represented as (2.5 * 2^0), (2.5 * 2^1), (2.5 * 2^2), (2.5 * 2^3) ms. So, the number of samples can be
            // calculated as follows:
            // (sample/s) * (1s/1000ms) * (2.5ms) * 2^(frameSizeOption)
            // = (sample/s) * (1s/400) * 2^(frameSizeOption)
            // = (sample/s) * 2^(frameSizeOption) * (1s/400)
            numSamples = (sampleRateHz << frameSizeOption) / 400;
        }
        // Case for Hybrid packet. Since Hybrid packets are represented using configurations 12 to 15, bits 1 and 2 in the
        // above TOC byte diagram will both be 1.
        else if ((packet.getUint8(0) & 0x60) === 0x60) {
            // In the case of configuration 13 or 15, bit 4 in the above TOC byte diagram will be 1. Configurations 13 and 15
            // correspond to a 20ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (20ms)
            // = (sample/s) * (1s/50)
            //
            // In the case of configuration 12 or 14, bit 4 in the above TOC byte diagram will be 0. Configurations 12 and 14
            // correspond to a 10ms frame size, so the number of samples is calculated as follows:
            // (sample/s) * (1s/1000ms) * (10ms)
            // = (sample/s) * (1s/100)
            numSamples = packet.getUint8(0) & 0x08 ? sampleRateHz / 50 : sampleRateHz / 100;
        }
        // Case for SILK-only packet.
        else {
            // The lower 3 'config' bits indicate the frame size option for SILK-only packets.
            frameSizeOption = (packet.getUint8(0) >> 3) & 0x3;
            if (frameSizeOption === 3) {
                // Frame size option 3 corresponds to a frame size of 60ms, so the number of samples is calculated as follows:
                // (sample/s) * (1s/1000ms) * (60ms)
                // = (sample/s) * (60ms) * (1s/1000ms)
                numSamples = (sampleRateHz * 60) / 1000;
            }
            else {
                // The frame size options 0, 1, 2 correspond to frame sizes of 10, 20, 40 ms. Notice that the frame sizes can be
                // represented as (10 * 2^0), (10 * 2^1), (10 * 2^2) ms. So, the number of samples can be calculated as follows:
                // (sample/s) * (1s/1000ms) * (10ms) * 2^(frameSizeOption)
                // = (sample/s) * (1s/100) * 2^(frameSizeOption)
                // = (sample/s) * 2^(frameSizeOption) * (1s/100)
                numSamples = (sampleRateHz << frameSizeOption) / 100;
            }
        }
        return numSamples;
    }
    /**
     * Gets the number of SILK frames per Opus frame.
     *
     * @param packet Opus packet.
     * @returns Number of SILK frames per Opus frame.
     */
    opusNumSilkFrames(packet) {
        // For computing the frame length in ms, the sample rate is not important since it cancels out. We use 48 kHz, but
        // any valid sample rate would work.
        //
        // To calculate the length of a frame (with a 48kHz sample rate) in ms:
        // (samples/frame) * (1s/48000 samples) * (1000ms/s)
        // = (samples/frame) * (1000ms/48000 samples)
        // = (samples/frame) * (1ms/48 samples)
        let frameLengthMs = this.opusPacketGetSamplesPerFrame(packet, 48000) / 48;
        if (frameLengthMs < 10)
            frameLengthMs = 10;
        // The number of SILK frames per Opus frame is described in https://www.rfc-editor.org/rfc/rfc6716#section-4.2.2.
        switch (frameLengthMs) {
            case 10:
            case 20:
                return 1;
            case 40:
                return 2;
            case 60:
                return 3;
            // It is not possible to reach the default case since an Opus packet can only encode sizes of 2.5, 5, 10, 20, 40,
            // or 60 ms, so we ignore the default case for test coverage.
            /* istanbul ignore next */
            default:
                return 0;
        }
    }
    /**
     * Gets the number of channels from an Opus packet.
     *
     * @param packet Opus packet.
     * @returns Number of channels.
     */
    opusPacketGetNumChannels(packet) {
        // TOC byte format (https://www.rfc-editor.org/rfc/rfc6716#section-3.1):
        //  0
        //  0 1 2 3 4 5 6 7
        // +-+-+-+-+-+-+-+-+
        // | config  |s| c |
        // +-+-+-+-+-+-+-+-+
        // The 's' bit indicates mono or stereo audio, with 0 indicating mono and 1 indicating stereo.
        return packet.getUint8(0) & 0x4 ? 2 : 1;
    }
    /**
     * Determine the size (in bytes) of an Opus frame.
     *
     * @param packet Opus packet.
     * @param byteOffset Offset (from the start of the packet) to the byte containing the size information.
     * @param remainingBytes Remaining number of bytes to parse from the Opus packet.
     * @param sizeBytes Variable to store the parsed frame size (in bytes).
     * @returns Number of bytes that were parsed to determine the frame size.
     */
    opusParseSize(packet, byteOffset, remainingBytes, sizeBytes) {
        // See https://www.rfc-editor.org/rfc/rfc6716#section-3.2.1 for an explanation of how frame size is represented.
        // If there are no remaining bytes to parse the size from, then the size cannot be determined.
        if (remainingBytes < 1) {
            sizeBytes[0] = -1;
            return -1;
        }
        // If the first byte is in the range 0...251, then this value is the size of the frame.
        else if (packet.getUint8(byteOffset) < 252) {
            sizeBytes[0] = packet.getUint8(byteOffset);
            return 1;
        }
        // If the first byte is in the range 252...255, a second byte is needed. If there is no second byte, then the size
        // cannot be determined.
        else if (remainingBytes < 2) {
            sizeBytes[0] = -1;
            return -1;
        }
        // The total size of the frame given two size bytes is:
        // (4 * secondSizeByte) + firstSizeByte
        else {
            sizeBytes[0] = 4 * packet.getUint8(byteOffset + 1) + packet.getUint8(byteOffset);
            return 2;
        }
    }
    /**
     * Parse binary data containing an Opus packet into one or more Opus frames.
     *
     * @param data Binary data containing an Opus packet to be parsed. The data should begin with the first byte (i.e the
     *             TOC byte) of an Opus packet. Note that the size of the data does not have to equal the size of the
     *             contained Opus packet.
     * @param lenBytes Size of the data (in bytes).
     * @param selfDelimited Indicates if the Opus packet is self-delimiting
     *                      (https://www.rfc-editor.org/rfc/rfc6716#appendix-B).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the data) to the first bytes of each
     *                     Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the data) to the first byte of the
     *                      payload.
     * @param packetLenBytes Optional variable to store the length of the Opus packet (in bytes).
     * @returns Number of Opus frames.
     */
    opusPacketParseImpl(data, lenBytes, selfDelimited, tocByte, frameOffsets, frameSizes, payloadOffset, packetLenBytes) {
        if (!frameSizes || lenBytes < 0)
            return this.OPUS_BAD_ARG;
        if (lenBytes === 0)
            return this.OPUS_INVALID_PACKET;
        // The number of Opus frames in the packet.
        let numFrames;
        // Intermediate storage for the number of bytes parsed to determine the size of a frame.
        let numBytesParsed;
        // The number of the padding bytes (excluding the padding count bytes) in the packet.
        let paddingBytes = 0;
        // Indicates whether CBR (constant bitrate) framing is used.
        let cbr = false;
        // The TOC (table of contents) byte (https://www.rfc-editor.org/rfc/rfc6716#section-3.1).
        const toc = data.getUint8(0);
        // Store the TOC byte.
        if (tocByte)
            tocByte[0] = toc;
        // The remaining number of bytes to parse from the packet. Note that the TOC byte has already been parsed, hence the
        // minus 1.
        let remainingBytes = lenBytes - 1;
        // This keeps track of where we are in the packet. This starts at 1 since the TOC byte has already been read.
        let byteOffset = 1;
        // The size of the last Opus frame in bytes.
        let lastSizeBytes = remainingBytes;
        // Read the \`c\` bits (i.e. code bits) from the TOC byte.
        switch (toc & 0x3) {
            // A code 0 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.2) has one frame.
            case 0:
                numFrames = 1;
                break;
            // A code 1 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.3) has two CBR (constant bitrate) frames.
            case 1:
                numFrames = 2;
                cbr = true;
                if (!selfDelimited) {
                    // Undelimited code 1 packets must be an even number of data bytes, otherwise the packet is invalid.
                    if (remainingBytes & 0x1)
                        return this.OPUS_INVALID_PACKET;
                    // The sizes of both frames are equal (i.e. half of the number of data bytes).
                    lastSizeBytes = remainingBytes / 2;
                    // If \`lastSizeBytes\` is too large, we will catch it later.
                    frameSizes[0][0] = lastSizeBytes;
                }
                break;
            // A code 2 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.4) has two VBR (variable bitrate) frames.
            case 2:
                numFrames = 2;
                numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[0]);
                remainingBytes -= numBytesParsed;
                // The parsed size of the first frame cannot be larger than the number of remaining bytes in the packet.
                if (frameSizes[0][0] < 0 || frameSizes[0][0] > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                byteOffset += numBytesParsed;
                // The size of the second frame is the remaining number of bytes after the first frame.
                lastSizeBytes = remainingBytes - frameSizes[0][0];
                break;
            // A code 3 packet (https://www.rfc-editor.org/rfc/rfc6716#section-3.2.5) has multiple CBR/VBR frames (from 0 to
            // 120 ms).
            default:
                // Code 3 packets must have at least 2 bytes (i.e. at least 1 byte after the TOC byte).
                if (remainingBytes < 1)
                    return this.OPUS_INVALID_PACKET;
                // Frame count byte format:
                //  0
                //  0 1 2 3 4 5 6 7
                // +-+-+-+-+-+-+-+-+
                // |v|p|     M     |
                // +-+-+-+-+-+-+-+-+
                //
                // Read the frame count byte, which immediately follows the TOC byte.
                const frameCountByte = data.getUint8(byteOffset++);
                --remainingBytes;
                // Read the 'M' bits of the frame count byte, which encode the number of frames.
                numFrames = frameCountByte & 0x3f;
                // The number of frames in a code 3 packet must not be 0.
                if (numFrames <= 0)
                    return this.OPUS_INVALID_PACKET;
                const samplesPerFrame = this.opusPacketGetSamplesPerFrame(data, 48000);
                // A single frame can have at most 2880 samples, which happens in the case where 60ms of 48kHz audio is encoded
                // per frame. A code 3 packet cannot contain more than 120ms of audio, so the total number of samples cannot
                // exceed 2880 * 2 = 5760.
                if (samplesPerFrame * numFrames > 5760)
                    return this.OPUS_INVALID_PACKET;
                // Parse padding bytes if the 'p' bit is 1.
                if (frameCountByte & 0x40) {
                    let paddingCountByte;
                    let numPaddingBytes;
                    // Remove padding bytes (including padding count bytes) from the remaining byte count.
                    do {
                        // Sanity check that there are enough bytes to parse and remove the padding.
                        if (remainingBytes <= 0)
                            return this.OPUS_INVALID_PACKET;
                        // Get the next padding count byte.
                        paddingCountByte = data.getUint8(byteOffset++);
                        --remainingBytes;
                        // If the padding count byte has a value in the range 0...254, then the total size of the padding is the
                        // value in the padding count byte.
                        //
                        // If the padding count byte has value 255, then the total size of the padding is 254 plus the value in the
                        // next padding count byte. Therefore, keep reading padding count bytes while the value is 255.
                        numPaddingBytes = paddingCountByte === 255 ? 254 : paddingCountByte;
                        remainingBytes -= numPaddingBytes;
                        paddingBytes += numPaddingBytes;
                    } while (paddingCountByte === 255);
                }
                // Sanity check that the remaining number of bytes is not negative after removing the padding.
                if (remainingBytes < 0)
                    return this.OPUS_INVALID_PACKET;
                // Read the 'v' bit (i.e. VBR bit).
                cbr = !(frameCountByte & 0x80);
                // VBR case
                if (!cbr) {
                    lastSizeBytes = remainingBytes;
                    // Let M be the number of frames. There will be M - 1 frame length indicators (which can be 1 or 2 bytes)
                    // corresponding to the lengths of frames 0 to M - 2. The size of the last frame (i.e. frame M - 1) is the
                    // number of data bytes after the end of frame M - 2 and before the start of the padding bytes.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[i]);
                        remainingBytes -= numBytesParsed;
                        // The remaining number of data bytes must be enough to contain each frame.
                        if (frameSizes[i][0] < 0 || frameSizes[i][0] > remainingBytes) {
                            return this.OPUS_INVALID_PACKET;
                        }
                        byteOffset += numBytesParsed;
                        lastSizeBytes -= numBytesParsed + frameSizes[i][0];
                    }
                    // Sanity check that the size of the last frame is not negative.
                    if (lastSizeBytes < 0)
                        return this.OPUS_INVALID_PACKET;
                }
                // CBR case
                else if (!selfDelimited) {
                    // The size of each frame is the number of data bytes divided by the number of frames.
                    lastSizeBytes = Math.trunc(remainingBytes / numFrames);
                    // The number of data bytes must be a non-negative integer multiple of the number of frames.
                    if (lastSizeBytes * numFrames !== remainingBytes)
                        return this.OPUS_INVALID_PACKET;
                    // All frames have equal size in the undelimited CBR case.
                    for (let i = 0; i < numFrames - 1; ++i) {
                        frameSizes[i][0] = lastSizeBytes;
                    }
                }
        }
        // Self-delimited framing uses an extra 1 or 2 bytes, immediately preceding the data bytes, to indicate either the
        // size of the last frame (for code 0, code 2, and VBR code 3 packets) or the size of all the frames (for code 1 and
        // CBR code 3 packets). See https://www.rfc-editor.org/rfc/rfc6716#appendix-B.
        if (selfDelimited) {
            // The extra frame size byte(s) will always indicate the size of the last frame.
            numBytesParsed = this.opusParseSize(data, byteOffset, remainingBytes, frameSizes[numFrames - 1]);
            remainingBytes -= numBytesParsed;
            // There must be enough data bytes for the last frame.
            if (frameSizes[numFrames - 1][0] < 0 || frameSizes[numFrames - 1][0] > remainingBytes) {
                return this.OPUS_INVALID_PACKET;
            }
            byteOffset += numBytesParsed;
            // For CBR packets, the sizes of all the frames are equal.
            if (cbr) {
                // There must be enough data bytes for all the frames.
                if (frameSizes[numFrames - 1][0] * numFrames > remainingBytes) {
                    return this.OPUS_INVALID_PACKET;
                }
                for (let i = 0; i < numFrames - 1; ++i) {
                    frameSizes[i][0] = frameSizes[numFrames - 1][0];
                }
            }
            // At this point, \`lastSizeBytes\` contains the size of the last frame plus the size of the extra frame size
            // byte(s), so sanity check that \`lastSizeBytes\` is the upper bound for the size of the last frame.
            else if (!(numBytesParsed + frameSizes[numFrames - 1][0] <= lastSizeBytes)) {
                return this.OPUS_INVALID_PACKET;
            }
        }
        // Undelimited case
        else {
            // Because the size of the last packet is not encoded explicitly, it is possible that the size of the last packet
            // (or of all the packets, for the CBR case) is larger than maximum frame size.
            if (lastSizeBytes > this.OPUS_MAX_FRAME_SIZE_BYTES)
                return this.OPUS_INVALID_PACKET;
            frameSizes[numFrames - 1][0] = lastSizeBytes;
        }
        // Store the offset to the start of the payload.
        if (payloadOffset)
            payloadOffset[0] = byteOffset;
        // Store the offsets to the start of each frame.
        for (let i = 0; i < numFrames; ++i) {
            if (frameOffsets)
                frameOffsets[i][0] = byteOffset;
            byteOffset += frameSizes[i][0];
        }
        // Store the length of the Opus packet.
        if (packetLenBytes)
            packetLenBytes[0] = byteOffset + paddingBytes;
        return numFrames;
    }
    /**
     * Parse a single undelimited Opus packet into one or more Opus frames.
     *
     * @param packet Opus packet to be parsed.
     * @param lenBytes Size of the packet (in bytes).
     * @param tocByte Optional variable to store the TOC (table of contents) byte.
     * @param frameOffsets Optional variable to store the offsets (from the start of the packet) to the first bytes of
     *                     each Opus frame.
     * @param frameSizes Required variable to store the sizes (in bytes) of each Opus frame.
     * @param payloadOffset Optional variable to store the offset (from the start of the packet) to the first byte of the
     *                      payload.
     * @returns Number of Opus frames.
     */
    opusPacketParse(packet, lenBytes, tocByte, frameOffsets, frameSizes, payloadOffset) {
        return this.opusPacketParseImpl(packet, lenBytes, 
        /* selfDelimited */ false, tocByte, frameOffsets, frameSizes, payloadOffset, null);
    }
    /**
     * This function returns the SILK VAD (voice activity detection) information encoded in the Opus packet. For CELT-only
     * packets that do not have VAD information, it returns -1.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  0: no frame had the VAD flag set.
     *           1: at least one frame had the VAD flag set.
     *          -1: VAD status could not be determined.
     */
    opusPacketHasVoiceActivity(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return 0;
        // In CELT-only mode, we can not determine whether there is VAD.
        if (this.opusPacketIsCeltOnly(packet))
            return -1;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        // It is not possible for \`opusNumSilkFrames()\` to return 0, so we ignore the next sanity check for test coverage.
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return -1;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        // VAD status cannot be determined for invalid packets.
        if (numOpusFrames < 0)
            return -1;
        // Iterate over all Opus frames, which may contain multiple SILK frames, to determine the VAD status.
        for (let i = 0; i < numOpusFrames; ++i) {
            if (opusFrameSizes[i][0] < 1)
                continue;
            // LP layer header bits format (https://www.rfc-editor.org/rfc/rfc6716#section-4.2.3):
            //
            // Mono case:
            // +-----------------+----------+
            // | 1 to 3 VAD bits | LBRR bit |
            // +-----------------+----------+
            //
            // Stereo case:
            // +---------------------+--------------+----------------------+---------------+
            // | 1 to 3 mid VAD bits | mid LBRR bit | 1 to 3 side VAD bits | side LBRR bit |
            // +---------------------+--------------+----------------------+---------------+
            // The upper 1 to 3 bits (dependent on the number of SILK frames) of the LP layer contain VAD bits. If any of
            // these VAD bits are 1, then voice activity is present.
            if (packet.getUint8(opusFrameOffsets[i][0]) >> (8 - numSilkFrames))
                return 1;
            // In the stereo case, there is a second set of 1 to 3 VAD bits, so also check these VAD bits.
            const channels = this.opusPacketGetNumChannels(packet);
            if (channels === 2 &&
                (packet.getUint8(opusFrameOffsets[i][0]) << (numSilkFrames + 1)) >> (8 - numSilkFrames)) {
                return 1;
            }
        }
        // No voice activity was detected.
        return 0;
    }
    /**
     * This method is based on Definition of the Opus Audio Codec
     * (https://tools.ietf.org/html/rfc6716). Basically, this method is based on
     * parsing the LP layer of an Opus packet, particularly the LBRR flag.
     *
     * @param packet Opus packet.
     * @param lenBytes Size of the packet (in bytes).
     * @returns  true: packet has fec encoding about previous packet.
     *           false: no fec encoding present.
     */
    opusPacketHasFec(packet, lenBytes) {
        if (!packet || lenBytes <= 0)
            return false;
        // In CELT-only mode, packets should not have FEC.
        if (this.opusPacketIsCeltOnly(packet))
            return false;
        const opusFrameOffsets = new Array(this.OPUS_MAX_OPUS_FRAMES);
        const opusFrameSizes = new Array(this.OPUS_MAX_OPUS_FRAMES);
        for (let i = 0; i < this.OPUS_MAX_OPUS_FRAMES; ++i) {
            opusFrameOffsets[i] = [undefined];
            opusFrameSizes[i] = [undefined];
        }
        // Parse packet to get the Opus frames.
        const numOpusFrames = this.opusPacketParse(packet, lenBytes, null, opusFrameOffsets, opusFrameSizes, null);
        if (numOpusFrames < 0)
            return false;
        /* istanbul ignore next */
        if (opusFrameSizes[0][0] <= 1)
            return false;
        const numSilkFrames = this.opusNumSilkFrames(packet);
        /* istanbul ignore next */
        if (numSilkFrames === 0)
            return false;
        const channels = this.opusPacketGetNumChannels(packet);
        /* istanbul ignore next */
        if (channels !== 1 && channels !== 2)
            return false;
        // A frame starts with the LP layer. The LP layer begins with two to eight
        // header bits.These consist of one VAD bit per SILK frame (up to 3),
        // followed by a single flag indicating the presence of LBRR frames.
        // For a stereo packet, these first flags correspond to the mid channel, and
        // a second set of flags is included for the side channel. Because these are
        // the first symbols decoded by the range coder and because they are coded
        // as binary values with uniform probability, they can be extracted directly
        // from the most significant bits of the first byte of compressed data.
        for (let i = 0; i < channels; i++) {
            if (packet.getUint8(opusFrameOffsets[0][0]) & (0x80 >> ((i + 1) * (numSilkFrames + 1) - 1)))
                return true;
        }
        return false;
    }
}
RedundantAudioEncoder.shouldLog = true;
RedundantAudioEncoder.shouldReportStats = true;
RedundantAudioEncoder.initializeWorker();
`;l.default=S},iA6Z:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=S},iAlb:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=o(h=>{const u={};for(const[m,a]of Object.entries(h))if(!(a==null||a===""))if(typeof a=="number"||typeof a=="string")u[m]=a;else throw new TypeError("Unhandled type received while flattening attributes.");return u},"flattenEventAttributes");l.default=S},iFpF:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(u,m,a,s,i,e,t,n,r,c){this.attendeeId=u,this.sdpOffer=m,this.audioHost=a,this.audioMuted=s,this.audioCheckin=i,this.receiveStreamIds=e,this.localVideoEnabled=t,this.videoStreamDescriptions=n,this.connectionTypeHasVideo=r,this.compressedSdpOffer=c,this.videoSubscriptionConfiguration=[]}},"SignalingClientSubscribe");l.default=S},iNgN:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(u){this._audioHostURL=u}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(u){this._signalingURL=u}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(u){this._turnControlURL=u}get eventIngestionURL(){return this.urlRewriter(this._eventIngestionURL)}set eventIngestionURL(u){this._eventIngestionURL=u}constructor(){this._audioHostURL=null,this._signalingURL=null,this._turnControlURL=null,this._eventIngestionURL=null,this.urlRewriter=u=>u}},"MeetingSessionURLs");l.default=S},iQPr:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("zcg+")),m=h(f("j+uH"));let a=o(class extends m.default{cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return S(this,void 0,void 0,function*(){const i=new u.default(this.timeoutMs);i.start(()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()});try{yield this.taskToRunBeforeTimeout.run()}finally{i.stop()}this.logger.info(`timeout task ${this.name()} completed`)})}constructor(i,e,t){super(i),this.taskToRunBeforeTimeout=e,this.timeoutMs=t,this.taskName=`Timeout${this.timeoutMs}ms`,e.setParent(this)}},"TimeoutTask");l.default=a},iRMv:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("J5JU")),u=S(f("9Bli")),m=S(f("vhVE"));let a=o(class{realtimeSetLocalAttendeeId(i,e){this.state.localAttendeeId=i,this.state.localExternalUserId=e}realtimeSetAttendeeIdPresence(i,e,t,n,r){try{e&&(this.state.attendeeIdToExternalUserId[i]=t);for(const c of this.state.attendeeIdChangesCallbacks)c(i,e,t,n,r)}catch(c){this.onError(c)}}realtimeSubscribeToAttendeeIdPresence(i){try{this.state.attendeeIdChangesCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(i){try{const e=this.state.attendeeIdChangesCallbacks.indexOf(i);e!==-1&&this.state.attendeeIdChangesCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(i){try{if(this.state.canUnmute===i)return;this.state.canUnmute=i;for(const e of this.state.setCanUnmuteLocalAudioCallbacks)e(i)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(i){try{this.state.setCanUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(i){try{const e=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.setCanUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!0)}catch(i){this.onError(i)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const i of this.state.muteAndUnmuteLocalAudioCallbacks)i(!1);return!0}catch(i){return this.onError(i),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(i){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(i){try{const e=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(i);e!==-1&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(i,e){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(i)||(this.state.volumeIndicatorCallbacks[i]=[]),this.state.volumeIndicatorCallbacks[i].push(e),this.sendVolumeIndicatorChange(i,!0,!0,!0,this.state.attendeeIdToExternalUserId[i])}catch(t){this.onError(t)}}realtimeUnsubscribeFromVolumeIndicator(i,e){if(this.state.volumeIndicatorCallbacks[i])if(e){const n=this.state.volumeIndicatorCallbacks[i].indexOf(e);n>=0&&this.state.volumeIndicatorCallbacks[i].splice(n,1)}else delete this.state.volumeIndicatorCallbacks[i]}realtimeUpdateVolumeIndicator(i,e,t,n,r){try{t=this.applyLocalMuteOverride(i,t);const c=this.getVolumeIndicatorState(i);let p=!1,g=!1,d=!1;t!==null&&c.muted!==t&&(c.muted=t,g=!0,c.muted&&c.volume!==0&&(c.volume=0,p=!0)),!c.muted&&e!==null&&(c.volume!==e&&(c.volume=e,p=!0),c.muted===null&&(c.muted=!1,g=!0)),n!==null&&c.signalStrength!==n&&(c.signalStrength=n,d=!0),this.sendVolumeIndicatorChange(i,p,g,d,r)}catch(c){this.onError(c)}}realtimeSubscribeToLocalSignalStrengthChange(i){try{if(this.state.localSignalStrengthChangeCallbacks.push(i),this.state.localAttendeeId===null)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(i){try{const e=this.state.localSignalStrengthChangeCallbacks.indexOf(i);e!==-1&&this.state.localSignalStrengthChangeCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(i){try{this.state.sendDataMessageCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(i){try{const e=this.state.sendDataMessageCallbacks.indexOf(i);e!==-1&&this.state.sendDataMessageCallbacks.splice(e,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(i,e,t){try{for(const n of this.state.sendDataMessageCallbacks)n(i,e,t)}catch(n){this.onError(n)}}realtimeSubscribeToReceiveDataMessage(i,e){try{this.state.receiveDataMessageCallbacks.has(i)?this.state.receiveDataMessageCallbacks.get(i).push(e):this.state.receiveDataMessageCallbacks.set(i,[e])}catch(t){this.onError(t)}}realtimeUnsubscribeFromReceiveDataMessage(i){try{this.state.receiveDataMessageCallbacks.delete(i)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(i){try{if(this.state.receiveDataMessageCallbacks.has(i.topic))for(const e of this.state.receiveDataMessageCallbacks.get(i.topic))e(i)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(i){try{this.state.fatalErrorCallbacks.push(i)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(i){try{const e=this.state.fatalErrorCallbacks.indexOf(i);e!==-1&&this.state.fatalErrorCallbacks.splice(e,1)}catch(e){this.onError(e)}}get transcriptionController(){return this._transcriptionController}setAudioInputEnabled(i){i?this.mediaStreamBroker.unmuteLocalAudioInputStream():this.mediaStreamBroker.muteLocalAudioInputStream()}applyLocalMuteOverride(i,e){const t=this.state.localAttendeeId,n=this.state.muted;return i!==t||!("activeDevices"in this.mediaStreamBroker&&this.mediaStreamBroker.activeDevices.audio)?e:n}sendVolumeIndicatorChange(i,e,t,n,r){if(this.sendLocalSignalStrengthChange(i,n),!this.state.volumeIndicatorCallbacks.hasOwnProperty(i))return;const c=this.getVolumeIndicatorState(i),p=new m.default;if(e&&(p.volume=c.volume),t&&(p.muted=c.muted),n&&(p.signalStrength=c.signalStrength),!this.stateIsEmpty(p))for(const g of this.state.volumeIndicatorCallbacks[i])g(i,p.volume,p.muted,p.signalStrength,r)}sendLocalSignalStrengthChange(i,e){if(!e||i!==this.state.localAttendeeId)return;const n=this.getVolumeIndicatorState(i).signalStrength;if(n!==null)for(const r of this.state.localSignalStrengthChangeCallbacks)r(n)}getVolumeIndicatorState(i){return this.state.volumeIndicatorState.hasOwnProperty(i)||(this.state.volumeIndicatorState[i]=new m.default),this.state.volumeIndicatorState[i]}stateIsEmpty(i){return i.volume===null&&i.muted===null&&i.signalStrength===null}onError(i){try{for(const e of this.state.fatalErrorCallbacks)e(i)}catch(e){try{console.error(i),console.error(e)}catch{}}}constructor(i,e){this.mediaStreamBroker=i,this.state=new u.default,this._transcriptionController=e||new h.default(this)}},"DefaultRealtimeController");l.default=a},ig3o:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.PermissionDenied=2]="PermissionDenied"})(S=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=S},igcJ:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("F7zz")),u=S(f("BkFD")),m=S(f("HbHZ")),a=f("XCDq"),s=f("Aplu");let i=o(class{addObserver(t){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(t)}removeObserver(t){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(t)}forEachObserver(t){for(const n of this.observerQueue)h.default.nextTick(()=>{this.observerQueue.has(n)&&t(n)})}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start(()=>{this.ping()}),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver(n=>{s.Maybe.of(n.didMissPongs).map(r=>r.bind(n)(this.consecutivePongsUnaccountedFor))})),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const t=a.SdkPingPongFrame.create();t.pingId=this.pingId,t.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(t),this.logger.debug(()=>`sent ping ${this.pingId}`)}pong(t){const n=a.SdkPingPongFrame.create();n.pingId=t,n.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(n)}handleSignalingClientEvent(t){switch(t.type){case m.default.WebSocketOpen:this.startPingInterval();break;case m.default.WebSocketFailed:case m.default.WebSocketError:this.logger.warn(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.WebSocketClosing:case m.default.WebSocketClosed:this.logger.info(`stopped pinging (${m.default[t.type]})`),this.stopPingInterval();break;case m.default.ReceivedSignalFrame:if(t.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(t.message.pingPong.type===a.SdkPingPongType.PONG){const n=t.message.pingPong.pingId;if(n!==this.pingId){this.logger.warn(`unexpected ping id ${n} (expected ${this.pingId})`);break}this.consecutivePongsUnaccountedFor=0;let r;if(typeof t.message.timestampMs=="number")r=t.message.timestampMs;else break;this.logger.debug(()=>`received pong ${n} with timestamp ${r}`);const p=t.timestampMs-this.pingTimestampLocalMs,g=Math.round(r-p/2),d=this.pingTimestampLocalMs-g;this.logger.info(`local clock skew estimate=${d}ms from ping-pong time=${p}ms`),this.forEachObserver(y=>{s.Maybe.of(y.didReceivePong).map(E=>E.bind(y)(n,d,p))})}else this.pong(t.message.pingPong.pingId);break}}constructor(t,n,r){this.signalingClient=t,this.intervalMs=n,this.logger=r,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new u.default(this.intervalMs),this.pingId=0}},"DefaultPingPong");l.default=i},ipyK:function(j,l,f){"use strict";var S=f("jLvU");function h(u,m){return m=typeof m=="function"?m:void 0,u&&u.length?Object(S.a)(u,void 0,m):[]}o(h,"uniqWith"),l.a=h},"ir/0":function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("uctb")),u=S(f("2y31"));let m=o(class extends u.default{constructor(){super(h.default.DEBUG)}},"NoOpDebugLogger");l.default=m},irli:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var S=f("+br/"),h=f("9IN5"),u=f("vapa"),m=f("v4l7"),a=function(){function i(e){if(this.hash=new u.RawSha256,e){this.outer=new u.RawSha256;var t=s(e),n=new Uint8Array(h.BLOCK_SIZE);n.set(t);for(var r=0;r<h.BLOCK_SIZE;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}}return o(i,"Sha2561"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){return[2,this.digestSync()]})})},i}();l.Sha256=a;function s(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>h.BLOCK_SIZE){var t=new u.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(h.BLOCK_SIZE);return n.set(e),n}o(s,"bufferFromSecret")},"j+uH":function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ZnGd")),m=h(f("IGBW"));let a=o(class{once(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return new u.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(i){this.parentTask=i}getStatus(){return this.status}logAndThrow(i){throw this.logger.info(i),new Error(i)}baseRun(i){return S(this,void 0,void 0,function*(){try{const e=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case m.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case m.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case m.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=m.default.RUNNING,yield i.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-e)} ms`)}catch(e){throw e}finally{this.status!==m.default.CANCELED&&(this.status=m.default.FINISHED)}})}baseCancel(i){if(this.status===m.default.CANCELED||this.status===m.default.FINISHED){this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`);return}this.logger.info(`canceling task ${this.name()}`),this.status=m.default.CANCELED,i.call(this)}constructor(i){this.logger=i,this.taskName="BaseTask",this.parentTask=null,this.status=m.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}},"BaseTask");l.default=a},j4TH:function(j,l,f){"use strict";(function(S){var h=l;h.asPromise=f("MFts"),h.base64=f("bnU+"),h.EventEmitter=f("aJe0"),h.float=f("KwGI"),h.inquire=f("/TZM"),h.utf8=f("yNTq"),h.pool=f("BEY9"),h.LongBits=f("ko9P"),h.isNode=Boolean(typeof S<"u"&&S&&S.process&&S.process.versions&&S.process.versions.node),h.global=h.isNode&&S||typeof window<"u"&&window||typeof self<"u"&&self||this,h.emptyArray=Object.freeze?Object.freeze([]):[],h.emptyObject=Object.freeze?Object.freeze({}):{},h.isInteger=Number.isInteger||o(function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},"isInteger"),h.isString=o(function(s){return typeof s=="string"||s instanceof String},"isString"),h.isObject=o(function(s){return s&&typeof s=="object"},"isObject"),h.isset=h.isSet=o(function(s,i){var e=s[i];return e!=null&&s.hasOwnProperty(i)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1},"isSet"),h.Buffer=function(){try{var a=h.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),h._Buffer_from=null,h._Buffer_allocUnsafe=null,h.newBuffer=o(function(s){return typeof s=="number"?h.Buffer?h._Buffer_allocUnsafe(s):new h.Array(s):h.Buffer?h._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},"newBuffer"),h.Array=typeof Uint8Array<"u"?Uint8Array:Array,h.Long=h.global.dcodeIO&&h.global.dcodeIO.Long||h.global.Long||h.inquire("long"),h.key2Re=/^true|false|0|1$/,h.key32Re=/^-?(?:0|[1-9][0-9]*)$/,h.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,h.longToHash=o(function(s){return s?h.LongBits.from(s).toHash():h.LongBits.zeroHash},"longToHash"),h.longFromHash=o(function(s,i){var e=h.LongBits.fromHash(s);return h.Long?h.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},"longFromHash");function u(a,s,i){for(var e=Object.keys(s),t=0;t<e.length;++t)(a[e[t]]===void 0||!i)&&(a[e[t]]=s[e[t]]);return a}o(u,"merge"),h.merge=u,h.lcFirst=o(function(s){return s.charAt(0).toLowerCase()+s.substring(1)},"lcFirst");function m(a){function s(i,e){if(!(this instanceof s))return new s(i,e);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&u(this,e)}return o(s,"CustomError"),s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:o(function(){return a},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:o(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),s}o(m,"newError"),h.newError=m,h.ProtocolError=m("ProtocolError"),h.oneOfGetter=o(function(s){for(var i={},e=0;e<s.length;++e)i[s[e]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(i[t[n]]===1&&this[t[n]]!==void 0&&this[t[n]]!==null)return t[n]}},"getOneOf"),h.oneOfSetter=o(function(s){return function(i){for(var e=0;e<s.length;++e)s[e]!==i&&delete this[s[e]]}},"setOneOf"),h.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},h._configure=function(){var a=h.Buffer;if(!a){h._Buffer_from=h._Buffer_allocUnsafe=null;return}h._Buffer_from=a.from!==Uint8Array.from&&a.from||o(function(i,e){return new a(i,e)},"Buffer_from"),h._Buffer_allocUnsafe=a.allocUnsafe||o(function(i){return new a(i)},"Buffer_allocUnsafe")}}).call(this,f("yLpj"))},j9sV:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={CouldNotFetchSections:"could_not_fetch_sections"},t=Object(a.a)("helpdesk.getSectionsAndArticlesByCategory generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason","token"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"helpdesk.getSectionsAndArticlesByCategory",args:y,reason:p.reason,computeToken:!1}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to helpdesk.getSectionsAndArticlesByCategory
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetSectionsAndArticlesByCategoryFetcher",description:"helpdesk.getSectionsAndArticlesByCategory generated fetcher"}},jG7n:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundFilterMonitor=void 0;const u=f("EkyC"),m=h(f("Xv43")),a=h(f("ZXtA"));let s=o(class{whenNext(){return this.promise||(this.promise=new Promise(n=>this.resolve=n)),this.promise}next(n){this.value=n,this.resolve(n),delete this.promise}constructor(){this.value=void 0,this.resolve=null}},"DeferredObservable"),i=o(class qf{static createWorkerPromise(){const n={resolve:null,reject:null,promise:null};return n.promise=new Promise((r,c)=>{n.resolve=r,n.reject=c}),n}validateSpec(n){if(!n)throw new Error("processor has null spec");if(!n.model)throw new Error("processor spec has null model");if(!n.paths)throw new Error("processor spec has null paths")}validateOptions(n){if(!n)throw new Error("processor has null options");if(!n.logger)throw new Error("processor has null options - logger");if(!n.reportingPeriodMillis)throw new Error("processor has null options - reportingPeriodMillis");if(!n.filterCPUUtilization)throw new Error("processor has null options - filterCPUUtilization")}initCPUMonitor(n){this.videoFramesPerFilterUpdate=1,this.frameCounter=new a.default(this.delegate,n.reportingPeriodMillis,n.filterCPUUtilization,this.logger),this.cpuMonitor=new e(5e3,{reduceCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.min(this.videoFramesPerFilterUpdate+1,10))},increaseCPUUtilization:()=>{this.updateVideoFramesPerFilterUpdate(Math.max(this.videoFramesPerFilterUpdate-1,1))}}),this.delegate.addObserver(this.cpuMonitor)}stringify(n){return JSON.stringify(n,null,2)}handleInitialize(n){if(this.logger.info(`received initialize message: ${this.stringify(n)}`),!n.payload){this.logger.error("failed to initialize module"),this.initWorkerPromise.reject(new Error("failed to initialize the module"));return}const r=this.spec.model;this.worker.postMessage({msg:"loadModel",payload:{modelUrl:r.path,inputHeight:r.input.height,inputWidth:r.input.width,inputChannels:4,modelRangeMin:r.input.range[0],modelRangeMax:r.input.range[1],blurPixels:0}}),this.initWorkerPromise.resolve({})}handleLoadModel(n){if(this.logger.info(`received load model message: ${this.stringify(n)}`),n.payload!==2){this.logger.error("failed to load model! status: "+n.payload),this.loadModelPromise.reject(new Error("failed to load model! status: "+n.payload));return}this.modelInitialized=!0,this.loadModelPromise.resolve({})}handlePredict(n){this.mask$.next(n.payload.output)}handleWorkerEvent(n){const r=n.data;switch(r.msg){case"initialize":this.handleInitialize(r);break;case"loadModel":this.handleLoadModel(r);break;case"predict":this.handlePredict(r);break;default:this.logger.info(`unexpected event msg: ${this.stringify(r)}`);break}}loadAssets(){return S(this,void 0,void 0,function*(){this.logger.info("start initializing the processor");try{this.worker=yield u.loadWorker(this.spec.paths.worker,"BackgroundFilterWorker",{},null),this.worker.addEventListener("message",n=>this.handleWorkerEvent(n)),this.worker.postMessage({msg:"initialize",payload:{wasmPath:this.spec.paths.wasm,simdPath:this.spec.paths.simd}}),yield this.initWorkerPromise.promise,this.logger.info(`successfully initialized the ${this.filterType} worker`),yield this.loadModelPromise.promise,this.logger.info(`successfully loaded ${this.filterType} worker segmentation model`)}catch(n){throw new Error(`could not initialize the ${this.filterType} video frame processor due to '${n.message}'`)}this.logger.info(`successfully initialized the ${this.filterType} processor`)})}process(n){return S(this,void 0,void 0,function*(){if(this.destroyed)return n;this.frameCounter.frameReceived(n[0].framerate),this.cpuMonitor.frameReceived();const r=n[0].asCanvasElement();if(!r)return n;if(!this.modelInitialized)return n[0]=this.canvasVideoFrameBuffer,n;const c=r.width,p=r.height;if(c===0||p===0)return n;this.sourceWidth===0&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight,this.logger.info(`${this.filterType} source width: ${this.sourceWidth}`),this.logger.info(`${this.filterType} source height: ${this.sourceHeight}`),this.initOnFirstExecution()),(this.sourceWidth!==c||this.sourceHeight!==p)&&(this.sourceWidth=c,this.sourceHeight=p,this.targetCanvas.width=this.sourceWidth,this.targetCanvas.height=this.sourceHeight);try{this.frameCounter.filterSubmitted();let g=this.mask$.value;const d=this.spec.model.input.width/r.width,y=this.spec.model.input.height/r.height;this.scaledCanvas===void 0&&(this.scaledCanvas=document.createElement("canvas"),this.scaledCanvas.width=this.spec.model.input.width,this.scaledCanvas.height=this.spec.model.input.height);const E=this.scaledCanvas.getContext("2d");E.save(),E.scale(d,y),E.drawImage(r,0,0),E.restore();const w=E.getImageData(0,0,this.scaledCanvas.width,this.scaledCanvas.height);if(this.frameNumber%this.videoFramesPerFilterUpdate===0){const k=this.mask$.whenNext();this.worker.postMessage({msg:"predict",payload:w},[w.data.buffer]),g=yield k}this.destroyed||this.drawImageWithMask(r,g)}catch(g){return this.logger.error(`could not process ${this.filterType} frame buffer due to ${g}`),n}finally{this.frameCounter.filterComplete(),this.frameNumber++}return n[0]=this.canvasVideoFrameBuffer,n})}updateVideoFramesPerFilterUpdate(n){n!==this.videoFramesPerFilterUpdate&&(this.videoFramesPerFilterUpdate=n,this.logger.info(`Adjusting filter rate to compensate for CPU utilization. Filter rate is ${this.videoFramesPerFilterUpdate} video frames per filter.`))}destroy(){var n,r,c,p;return S(this,void 0,void 0,function*(){this.destroyed=!0,this.delegate.removeObserver(this.cpuMonitor),this.canvasVideoFrameBuffer.destroy(),(n=this.worker)===null||n===void 0||n.postMessage({msg:"destroy"}),(r=this.worker)===null||r===void 0||r.postMessage({msg:"stop"}),(c=this.targetCanvas)===null||c===void 0||c.remove(),this.targetCanvas=void 0,(p=this.scaledCanvas)===null||p===void 0||p.remove(),this.scaledCanvas=void 0,this.logger.info(`${this.filterType} frame process destroyed`)})}constructor(n,r,c,p,g){this.targetCanvas=document.createElement("canvas"),this.canvasCtx=this.targetCanvas.getContext("2d"),this.canvasVideoFrameBuffer=new m.default(this.targetCanvas),this.mask$=new s,this.sourceWidth=0,this.sourceHeight=0,this.frameNumber=0,this.videoFramesPerFilterUpdate=1,this.initWorkerPromise=qf.createWorkerPromise(),this.loadModelPromise=qf.createWorkerPromise(),this.modelInitialized=!1,this.destroyed=!1,this.filterType=n,this.validateSpec(r),this.validateOptions(c),this.spec=r,this.logger=c.logger,this.delegate=p,this.initCPUMonitor(c),this.eventController=g}},"BackgroundFilterProcessor");l.default=i;let e=o(class{filterCPUUtilizationHigh(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis&&(this.lastCPUChangeTimestamp=n,this.observer.reduceCPUUtilization())}frameReceived(){const n=Date.now();n-this.lastCPUChangeTimestamp>=this.monitoringPeriodMillis*2&&(this.lastCPUChangeTimestamp=n,this.observer.increaseCPUUtilization())}constructor(n,r){this.monitoringPeriodMillis=n,this.observer=r,this.lastCPUChangeTimestamp=0}},"BackgroundFilterMonitor");l.BackgroundFilterMonitor=e},jHTc:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("59sL")),u=S(f("4EN+"));let m=o(class{create(s,i,e){this.connection=new WebSocket(e?s:h.default.urlWithVersion(s),i),this.connection.binaryType="arraybuffer"}send(s){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return s instanceof Uint8Array?this.connection.send(s.buffer):this.connection.send(s),!0}catch(i){return this.logger.debug(()=>`send error: ${i.message}, websocket state=${u.default[this.readyState()]}`),!1}}close(s,i){var e;(e=this.connection)===null||e===void 0||e.close(s,i)}destroy(){this.connection=void 0}addEventListener(s,i){if(!this.connection){this.logger.warn("Cannot add event listener with no WebSocket connection.");return}this.connection.addEventListener(s,i)}removeEventListener(s,i){var e;(e=this.connection)===null||e===void 0||e.removeEventListener(s,i)}readyState(){if(!this.connection)return u.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return u.default.Connecting;case WebSocket.OPEN:return u.default.Open;case WebSocket.CLOSING:return u.default.Closing;case WebSocket.CLOSED:return u.default.Closed}}constructor(s){this.logger=s}},"DefaultWebSocketAdapter");l.default=m},jP1N:function(j,l,f){"use strict";(function(S){var h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54")),m=h(f("yQ3g")),a=f("f2XL"),s=f("R4Nl"),i=h(f("59sL")),e=h(f("NBIk")),t=h(f("4EN+")),n=f("DUgj"),r=h(f("fGw7")),c=h(f("hEYi"));let p=o(class cc{registerObserver(d){this.logger.debug(()=>"registering signaling client observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.debug(()=>"removing signaling client observer"),this.observerQueue.delete(d)}openConnection(d){this.logger.info("adding connection request to queue: "+d.url()),this.connectionRequestQueue.push(d),this.closeConnection()}pingPong(d){this.logger.debug(()=>"sending ping");const y=a.SdkSignalFrame.create();return y.type=a.SdkSignalFrame.Type.PING_PONG,y.pingPong=d,this.sendMessage(y),y.timestampMs}join(d){this.logger.info("sending join");const y=a.SdkJoinFrame.create();y.protocolVersion=2,y.flags=a.SdkJoinFlags.HAS_STREAM_UPDATE;const E=new u.default,w={platformName:E.name(),platformVersion:E.version(),clientSource:i.default.sdkName,chimeSdkVersion:i.default.sdkVersion,clientUtcOffset:s.getFormattedOffset(new Date().getTimezoneOffset())};if(d.applicationMetadata){const{appName:V,appVersion:F}=d.applicationMetadata;w.appName=V,w.appVersion=F}y.clientDetails=a.SdkClientDetails.create(w),y.audioSessionId=this.audioSessionId,y.wantsCompressedSdp=cc.CLIENT_SUPPORTS_COMPRESSION,y.disablePeriodicKeyframeRequestOnContentSender=d.disablePeriodicKeyframeRequestOnContentSender,y.serverSideNetworkAdaption=n.convertServerSideNetworkAdaptionEnumToSignaled(d.serverSideNetworkAdaption),y.supportedServerSideNetworkAdaptions=d.supportedServerSideNetworkAdaptions.map(n.convertServerSideNetworkAdaptionEnumToSignaled),y.wantsAllTemporalLayersInIndex=d.wantsAllTemporalLayersInIndex;const k=a.SdkSignalFrame.create();k.type=a.SdkSignalFrame.Type.JOIN,k.join=y,this.sendMessage(k)}subscribe(d){const y=a.SdkSubscribeFrame.create();if(y.sendStreams=[],y.sdpOffer=d.sdpOffer,d.connectionTypeHasVideo&&(y.receiveStreamIds=d.receiveStreamIds),d.audioHost&&(y.audioCheckin=d.audioCheckin,y.audioHost=d.audioHost,y.audioMuted=d.audioMuted,!d.audioCheckin)){const w=a.SdkStreamDescriptor.create();w.mediaType=a.SdkStreamMediaType.AUDIO,w.trackLabel="AmazonChimeExpressAudio",w.attendeeId=d.attendeeId,w.streamId=1,w.groupId=1,w.framerate=15,w.maxBitrateKbps=600,w.avgBitrateBps=4e5,y.sendStreams.push(w)}if(y.compressedSdpOffer=d.compressedSdpOffer,y.duplex=a.SdkStreamServiceType.RX,d.localVideoEnabled){y.duplex=a.SdkStreamServiceType.DUPLEX;for(let w=0;w<d.videoStreamDescriptions.length;w++){const k=d.videoStreamDescriptions[w].clone();k.attendeeId=d.attendeeId,y.sendStreams.push(k.toStreamDescriptor())}}d.videoSubscriptionConfiguration.length>0&&(y.videoSubscriptionConfiguration=d.videoSubscriptionConfiguration.map(this.convertSignalingClientVideoSubscriptionConfiguration));const E=a.SdkSignalFrame.create();E.type=a.SdkSignalFrame.Type.SUBSCRIBE,E.sub=y,this.sendMessage(E)}remoteVideoUpdate(d,y){const E=a.SdkRemoteVideoUpdateFrame.create();E.addedOrUpdatedVideoSubscriptions=d.map(this.convertSignalingClientVideoSubscriptionConfiguration),E.removedVideoSubscriptionMids=y;const w=a.SdkSignalFrame.create();w.type=a.SdkSignalFrame.Type.REMOTE_VIDEO_UPDATE,w.remoteVideoUpdate=E,this.sendMessage(w)}convertSignalingClientVideoSubscriptionConfiguration(d){const y=new a.SdkVideoSubscriptionConfiguration;switch(y.mid=d.mid,y.attendeeId=d.attendeeId,y.streamId=d.streamId,y.groupId=d.groupId,y.priority=d.priority,y.targetBitrateKbps=d.targetBitrateKbps,d.qualityAdaptationPreference){case e.default.Balanced:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.BALANCED;break;case e.default.MaintainFramerate:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.MAINTAIN_FRAMERATE;break;case e.default.MaintainResolution:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.MAINTAIN_RESOLUTION;break;default:y.qualityAdaptationPreference=a.SdkVideoQualityAdaptationPreference.BALANCED}return y}leave(){const d=a.SdkSignalFrame.create();d.type=a.SdkSignalFrame.Type.LEAVE,d.leave=a.SdkLeaveFrame.create(),this.sendMessage(d),this.logger.debug(()=>"sent leave")}sendClientMetrics(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.CLIENT_METRIC,y.clientMetric=d,this.sendMessage(y)}sendDataMessage(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.DATA_MESSAGE,y.dataMessage=d,this.sendMessage(y)}closeConnection(){var d,y;if(this.webSocket.readyState()!==t.default.None&&this.webSocket.readyState()!==t.default.Closed){this.isClosing=!0,this.sendEvent(new r.default(this,c.default.WebSocketClosing,null));const E=new m.default(cc.CLOSE_EVENT_TIMEOUT_MS),w=o(k=>{var V,F;(F=(V=this.webSocket).removeEventListener)===null||F===void 0||F.call(V,"close",w),E.stop(),this.closeEventHandler(k)},"handler");(y=(d=this.webSocket).removeEventListener)===null||y===void 0||y.call(d,"close",this.closeEventHandler),this.webSocket.addEventListener("close",w),E.start(()=>{w(new CloseEvent("close",{wasClean:!1,code:1006,reason:"",bubbles:!1}))}),this.webSocket.close(),this.deactivatePageUnloadHandler()}else this.logger.info("no existing signaling client connection needs closing"),this.serviceConnectionRequestQueue()}ready(){return this.webSocket.readyState()===t.default.Open&&!this.isClosing&&this.wasOpened}mute(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.AUDIO_CONTROL;const E=a.SdkAudioControlFrame.create();E.muted=d,y.audioControl=E,this.sendMessage(y)}pause(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.PAUSE,y.pause=a.SdkPauseResumeFrame.create(),y.pause.streamIds=d,this.sendMessage(y)}resume(d){const y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.RESUME,y.pause=a.SdkPauseResumeFrame.create(),y.pause.streamIds=d,this.sendMessage(y)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(d){d.timestampMs=Date.now(),this.logger.debug(()=>`sending: ${JSON.stringify(d)}`);const y=this.prependWithFrameTypeRTC(a.SdkSignalFrame.encode(d).finish());if(this.ready()){if(!this.webSocket.send(y)){this.sendEvent(new r.default(this,c.default.WebSocketSendMessageFailure,null));return}this.sendEvent(new r.default(this,c.default.WebSocketSentMessage,null))}else this.sendEvent(new r.default(this,c.default.WebSocketSkippedMessage,null))}receiveMessage(d){let y;try{y=a.SdkSignalFrame.decode(d)}catch{this.logger.info(`failed to decode: ${d}`),this.sendEvent(new r.default(this,c.default.ProtocolDecodeFailure,null));return}this.logger.debug(()=>`received: ${JSON.stringify(y)}`),this.webSocket.readyState()===t.default.Open?this.sendEvent(new r.default(this,c.default.ReceivedSignalFrame,y)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(y)}`)}stripFrameTypeRTC(d){const y=d[0];return y!==cc.FRAME_TYPE_RTC&&y!==2&&this.logger.warn(`expected FrameTypeRTC for message but got ${y}`),d.slice(1)}prependWithFrameTypeRTC(d){const y=new Uint8Array(d.length+1);return y[0]=cc.FRAME_TYPE_RTC,y.set(d,1),y}serviceConnectionRequestQueue(){if(this.connectionRequestQueue.length===0){this.logger.info("no connection requests to service");return}const d=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${d.url()}`),this.isClosing=!1,this.webSocket.create(d.url(),d.protocols()),this.setUpEventListeners(),this.sendEvent(new r.default(this,c.default.WebSocketConnecting,null))}sendEvent(d){switch(d.type){case c.default.WebSocketMessage:case c.default.ReceivedSignalFrame:case c.default.WebSocketSentMessage:this.logger.debug(()=>`notifying event: ${c.default[d.type]}`);break;case c.default.WebSocketSkippedMessage:this.logger.debug(()=>`notifying event: ${c.default[d.type]}, websocket state=${t.default[this.webSocket.readyState()]}`);break;default:this.logger.info(`notifying event: ${c.default[d.type]}`);break}for(const y of this.observerQueue)y.handleSignalingClientEvent(d)}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new r.default(this,c.default.WebSocketOpen,null))}),this.webSocket.addEventListener("message",d=>{this.sendEvent(new r.default(this,c.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(d.data)))}),this.webSocket.addEventListener("close",this.closeEventHandler),this.webSocket.addEventListener("error",()=>{if(this.isClosing&&!this.wasOpened){this.logger.info("ignoring error closing signaling while connecting");return}this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new r.default(this,c.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new r.default(this,c.default.WebSocketFailed,null)))})}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const d=S;d.window&&d.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const d=S;d.window&&d.window.removeEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const d=new Uint32Array(1);return window.crypto.getRandomValues(d)[0]}promoteToPrimaryMeeting(d){const y=a.SdkMeetingSessionCredentials.create();y.attendeeId=d.attendeeId,y.externalUserId=d.externalUserId,y.joinToken=d.joinToken;const E=a.SdkPrimaryMeetingJoinFrame.create();E.credentials=y;const w=a.SdkSignalFrame.create();w.type=a.SdkSignalFrame.Type.PRIMARY_MEETING_JOIN,w.primaryMeetingJoin=E,this.sendMessage(w)}demoteFromPrimaryMeeting(){const d=a.SdkPrimaryMeetingLeaveFrame.create(),y=a.SdkSignalFrame.create();y.type=a.SdkSignalFrame.Type.PRIMARY_MEETING_LEAVE,y.primaryMeetingLeave=d,this.sendMessage(y)}constructor(d,y){this.webSocket=d,this.logger=y,this.unloadHandler=null,this.closeEventHandler=E=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new r.default(this,c.default.WebSocketClosed,null,E.code,E.reason)),this.serviceConnectionRequestQueue()},this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug(()=>"signaling client init"),this.audioSessionId=this.generateNewAudioSessionId()}},"DefaultSignalingClient");l.default=p,p.FRAME_TYPE_RTC=5,p.CLOSE_EVENT_TIMEOUT_MS=2e3,p.CLIENT_SUPPORTS_COMPRESSION=!0}).call(this,f("yLpj"))},jSME:function(j,l,f){var S=f("M5uj");function h(u){if(Array.isArray(u))return S(u)}o(h,"_arrayWithoutHoles"),j.exports=h,j.exports.__esModule=!0,j.exports.default=j.exports},je3o:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Sha256=void 0;var S=f("7JaV"),h=f("vdHl"),u=f("cZ61"),m=f("pU0T"),a=function(){function i(e){this.secret=e,this.hash=new u.RawSha256,this.reset()}return o(i,"Sha256"),i.prototype.update=function(e){if(!((0,m.isEmptyData)(e)||this.error))try{this.hash.update((0,m.convertToBuffer)(e))}catch(t){this.error=t}},i.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},i.prototype.digest=function(){return S.__awaiter(this,void 0,void 0,function(){return S.__generator(this,function(e){return[2,this.digestSync()]})})},i.prototype.reset=function(){if(this.hash=new u.RawSha256,this.secret){this.outer=new u.RawSha256;var e=s(this.secret),t=new Uint8Array(h.BLOCK_SIZE);t.set(e);for(var n=0;n<h.BLOCK_SIZE;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(var n=0;n<e.byteLength;n++)e[n]=0}},i}();l.Sha256=a;function s(i){var e=(0,m.convertToBuffer)(i);if(e.byteLength>h.BLOCK_SIZE){var t=new u.RawSha256;t.update(e),e=t.digest()}var n=new Uint8Array(h.BLOCK_SIZE);return n.set(e),n}o(s,"bufferFromSecret")},jhQD:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0}),l.TranscriptEventConverter=void 0;const h=f("f2XL"),u=S(f("7nob")),m=S(f("VoiG")),a=S(f("h4LR")),s=S(f("VWEK")),i={[h.SdkTranscriptionStatus.Type.STARTED]:a.default.STARTED,[h.SdkTranscriptionStatus.Type.INTERRUPTED]:a.default.INTERRUPTED,[h.SdkTranscriptionStatus.Type.RESUMED]:a.default.RESUMED,[h.SdkTranscriptionStatus.Type.STOPPED]:a.default.STOPPED,[h.SdkTranscriptionStatus.Type.FAILED]:a.default.FAILED};let e=o(class{static from(n){let r;try{r=h.SdkTranscriptFrame.decode(n.data)}catch(p){throw new Error("Cannot decode transcript data message: "+p)}const c=[];for(const p of r.events)if(p.status){const g=i[p.status.type];if(!g)continue;const d=new m.default;d.type=g,d.eventTimeMs=p.status.eventTime,d.transcriptionRegion=p.status.transcriptionRegion,d.transcriptionConfiguration=p.status.transcriptionConfiguration,p.status.message&&(d.message=p.status.message),c.push(d)}else if(p.transcript){const g=new u.default;g.results=[];for(const d of p.transcript.results){const y={channelId:d.channelId,isPartial:d.isPartial,resultId:d.resultId,startTimeMs:d.startTime,endTimeMs:d.endTime,alternatives:[]};if(d.languageCode&&(y.languageCode=d.languageCode),d.languageIdentification&&d.languageIdentification.length>0){y.languageIdentification=[];for(const E of d.languageIdentification){const w={languageCode:E.languageCode,score:E.score};y.languageIdentification.push(w)}}for(const E of d.alternatives){const w={items:[],transcript:E.transcript};for(const k of E.items){const V={content:k.content,attendee:{attendeeId:k.speakerAttendeeId,externalUserId:k.speakerExternalUserId},startTimeMs:k.startTime,endTimeMs:k.endTime,type:null};switch(k.vocabularyFilterMatch&&(V.vocabularyFilterMatch=k.vocabularyFilterMatch),k.hasOwnProperty("stable")&&(V.stable=k.stable),k.hasOwnProperty("confidence")&&(V.confidence=k.confidence),k.type){case h.SdkTranscriptItem.Type.PRONUNCIATION:V.type=s.default.PRONUNCIATION;break;case h.SdkTranscriptItem.Type.PUNCTUATION:V.type=s.default.PUNCTUATION;break}w.items.push(V)}for(const k of E.entities){w.entities||(w.entities=[]);const V={category:k.category,confidence:k.confidence,content:k.content,startTimeMs:k.startTime,endTimeMs:k.endTime};k.type&&(V.type=k.type),w.entities.push(V)}y.alternatives.push(w)}g.results.push(y)}c.push(g)}return c}},"TranscriptEventConverter");l.TranscriptEventConverter=e},jmx1:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioInputFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.PermissionDenied=2]="PermissionDenied"})(S=l.CheckAudioInputFeedback||(l.CheckAudioInputFeedback={})),l.default=S},jqgp:function(j,l){function f(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}o(f,"_iterableToArray"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},jtkq:function(j,l,f){var S;(function(h,u,m){if(!h)return;for(var a={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},e={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},t,n=1;n<20;++n)a[111+n]="f"+n;for(n=0;n<=9;++n)a[n+96]=n.toString();function r(O,M,D){if(O.addEventListener){O.addEventListener(M,D,!1);return}O.attachEvent("on"+M,D)}o(r,"_addEvent");function c(O,M,D){O.removeEventListener&&O.removeEventListener(M,D,!1)}o(c,"_removeEvent");function p(O){if(O.type=="keypress"){var M=String.fromCharCode(O.which);return O.shiftKey||(M=M.toLowerCase()),M}return a[O.which]?a[O.which]:s[O.which]?s[O.which]:String.fromCharCode(O.which).toLowerCase()}o(p,"_characterFromEvent");function g(O,M){return O.sort().join(",")===M.sort().join(",")}o(g,"_modifiersMatch");function d(O){var M=[];return O.shiftKey&&M.push("shift"),O.altKey&&M.push("alt"),O.ctrlKey&&M.push("ctrl"),O.metaKey&&M.push("meta"),M}o(d,"_eventModifiers");function y(O){if(O.preventDefault){O.preventDefault();return}O.returnValue=!1}o(y,"_preventDefault");function E(O){if(O.stopPropagation){O.stopPropagation();return}O.cancelBubble=!0}o(E,"_stopPropagation");function w(O){return O=="shift"||O=="ctrl"||O=="alt"||O=="meta"}o(w,"_isModifier");function k(){if(!t){t={};for(var O in a)O>95&&O<112||a.hasOwnProperty(O)&&(t[a[O]]=O)}return t}o(k,"_getReverseMap");function V(O,M,D){return D||(D=k()[O]?"keydown":"keypress"),D=="keypress"&&M.length&&(D="keydown"),D}o(V,"_pickBestAction");function F(O){return O==="+"?["+"]:(O=O.replace(/\+{2}/g,"+plus"),O.split("+"))}o(F,"_keysFromString");function N(O,M){var D,J,q,$=[];for(D=F(O),q=0;q<D.length;++q)J=D[q],e[J]&&(J=e[J]),M&&M!="keypress"&&i[J]&&(J=i[J],$.push("shift")),w(J)&&$.push(J);return M=V(J,$,M),{key:J,modifiers:$,action:M}}o(N,"_getKeyInfo");function P(O,M){return O===null||O===u?!1:O===M?!0:P(O.parentNode,M)}o(P,"_belongsTo");function x(O){var M=this;if(O=O||u,!(M instanceof x))return new x(O);M.target=O,M._callbacks={},M._directMap={};var D={},J,q=!1,$=!1,de=!1;function Ee(dt){dt=dt||{};var Je=!1,_t;for(_t in D){if(dt[_t]){Je=!0;continue}D[_t]=0}Je||(de=!1)}o(Ee,"_resetSequences");function _e(dt,Je,_t,ot,Et,Mt){var ze,$t,Un=[],ni=_t.type;if(!M._callbacks[dt])return[];for(ni=="keyup"&&w(dt)&&(Je=[dt]),ze=0;ze<M._callbacks[dt].length;++ze)if($t=M._callbacks[dt][ze],!(!ot&&$t.seq&&D[$t.seq]!=$t.level)&&ni==$t.action&&(ni=="keypress"&&!_t.metaKey&&!_t.ctrlKey||g(Je,$t.modifiers))){var an=!ot&&$t.combo==Et,Gn=ot&&$t.seq==ot&&$t.level==Mt;(an||Gn)&&M._callbacks[dt].splice(ze,1),Un.push($t)}return Un}o(_e,"_getMatches");function ye(dt,Je,_t,ot){M.stopCallback(Je,Je.target||Je.srcElement,_t,ot)||dt(Je,_t)===!1&&(y(Je),E(Je))}o(ye,"_fireCallback"),M._handleKey=function(dt,Je,_t){var ot=_e(dt,Je,_t),Et,Mt={},ze=0,$t=!1;for(Et=0;Et<ot.length;++Et)ot[Et].seq&&(ze=Math.max(ze,ot[Et].level));for(Et=0;Et<ot.length;++Et){if(ot[Et].seq){if(ot[Et].level!=ze)continue;$t=!0,Mt[ot[Et].seq]=1,ye(ot[Et].callback,_t,ot[Et].combo,ot[Et].seq);continue}$t||ye(ot[Et].callback,_t,ot[Et].combo)}var Un=_t.type=="keypress"&&$;_t.type==de&&!w(dt)&&!Un&&Ee(Mt),$=$t&&_t.type=="keydown"};function Be(dt){typeof dt.which!="number"&&(dt.which=dt.keyCode);var Je=p(dt);if(Je){if(dt.type=="keyup"&&q===Je){q=!1;return}M.handleKey(Je,d(dt),dt)}}o(Be,"_handleKeyEvent");function pt(){clearTimeout(J),J=setTimeout(Ee,1e3)}o(pt,"_resetSequenceTimer");function Ve(dt,Je,_t,ot){D[dt]=0;function Et(ni){return function(){de=ni,++D[dt],pt()}}o(Et,"_increaseSequence");function Mt(ni){ye(_t,ni,dt),ot!=="keyup"&&(q=p(ni)),setTimeout(Ee,10)}o(Mt,"_callbackAndReset");for(var ze=0;ze<Je.length;++ze){var $t=ze+1===Je.length,Un=$t?Mt:Et(ot||N(Je[ze+1]).action);gt(Je[ze],Un,ot,dt,ze)}}o(Ve,"_bindSequence");function gt(dt,Je,_t,ot,Et){M._directMap[dt+":"+_t]=Je,dt=dt.replace(/\s+/g," ");var Mt=dt.split(" "),ze;if(Mt.length>1){Ve(dt,Mt,Je,_t);return}ze=N(dt,_t),M._callbacks[ze.key]=M._callbacks[ze.key]||[],_e(ze.key,ze.modifiers,{type:ze.action},ot,dt,Et),M._callbacks[ze.key][ot?"unshift":"push"]({callback:Je,modifiers:ze.modifiers,action:ze.action,seq:ot,level:Et,combo:dt})}o(gt,"_bindSingle"),M._bindMultiple=function(dt,Je,_t){for(var ot=0;ot<dt.length;++ot)gt(dt[ot],Je,_t)},M.destroy=function(){c(O,"keypress",Be),c(O,"keydown",Be),c(O,"keyup",Be),M.reset()},r(O,"keypress",Be),r(O,"keydown",Be),r(O,"keyup",Be)}o(x,"Mousetrap"),x.prototype.bind=function(O,M,D){var J=this;return O=O instanceof Array?O:[O],J._bindMultiple.call(J,O,M,D),J},x.prototype.unbind=function(O,M){var D=this;return D.bind.call(D,O,function(){},M)},x.prototype.trigger=function(O,M){var D=this;return D._directMap[O+":"+M]&&D._directMap[O+":"+M]({},O),D},x.prototype.reset=function(){var O=this;return O._callbacks={},O._directMap={},O},x.prototype.stopCallback=function(O,M){var D=this;return(" "+M.className+" ").indexOf(" mousetrap ")>-1||P(M,D.target)?!1:M.tagName=="INPUT"||M.tagName=="SELECT"||M.tagName=="TEXTAREA"||M.isContentEditable},x.prototype.handleKey=function(){var O=this;return O._handleKey.apply(O,arguments)},x.addKeycodes=function(O){for(var M in O)O.hasOwnProperty(M)&&(a[M]=O[M]);t=null},x.init=function(){var O=x(u);for(var M in O)M.charAt(0)!=="_"&&(x[M]=function(D){return function(){return O[D].apply(O,arguments)}}(M))},x.init(),h.Mousetrap=x,j.exports&&(j.exports=x),S=function(){return x}.call(l,f,l,j),S!==m&&(j.exports=S)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},k6mT:function(j,l,f){"use strict";f.d(l,"a",function(){return e}),f.d(l,"b",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={BadUsername:"bad_username",CannotUpdateAdminUser:"cannot_update_admin_user",EmailBad:"email_bad",EmailTaken:"email_taken",DisplayNameNotAllowed:"display_name_not_allowed",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InvalidProfile:"invalid_profile",InvalidReservedWord:"invalid_reserved_word",InvalidUser:"invalid_user",LongUsername:"long_username",MustClearBothStatusTextAndStatusEmoji:"must_clear_both_status_text_and_status_emoji",NameNotAllowed:"name_not_allowed",NotAdmin:"not_admin",NotAppAdmin:"not_app_admin",PartialProfileSetFailed:"partial_profile_set_failed",ProfileSetFailed:"profile_set_failed",ProfileStatusSetFailedNotEmojiSyntax:"profile_status_set_failed_not_emoji_syntax",ProfileStatusSetFailedNotValidEmoji:"profile_status_set_failed_not_valid_emoji",ProfileStatusSetFailedWritingExpiration:"profile_status_set_failed_writing_expiration",ReadOnlyProfileField:"read_only_profile_field",ReservedName:"reserved_name",SudoRequired:"sudo_required",TooLong:"too_long",UserNotFound:"user_not_found",UserNotSpecified:"user_not_specified",UserRemovedFromTeam:"user_removed_from_team",UsernameEmpty:"username_empty",UsernameTaken:"username_taken"},t=Object(a.a)("users.profile.set generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"users.profile.set",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to users.profile.set
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherusersProfileSetFetcher",description:"users.profile.set generated fetcher"}},k8sa:function(j,l,f){"use strict";j.exports={}},kGhG:function(j,l,f){var S=f("IVKD"),h=f("ml5h"),u=f("H/VS"),m=f("+JPr");function a(s,i){return S(s)||h(s,i)||u(s,i)||m()}o(a,"_slicedToArray"),j.exports=a,j.exports.__esModule=!0,j.exports.default=j.exports},kItj:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("ghxq"));let u=o(class aa extends h.default{health(){if(this.currentData.isConnectionStartRecent(aa.CONNECTION_WAIT_TIME_MS))return 1;const s=this.currentData.consecutiveStatsWithNoPackets>=aa.CONNECTION_UNHEALTHY_THRESHOLD,i=this.currentData.consecutiveMissedPongs>=aa.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>aa.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const e=this.audioDelayPointsOverMaximum>aa.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return e&&(this.audioDelayPointsOverMaximum=0),s||i||e?(this.logger.warn(`reconnection recommended due to: no packets received: ${s}, missed pongs: ${i}, bad audio delay: ${e}`),0):1}constructor(a,s,i){super(s,i,"Reconnection Health"),this.logger=a,this.audioDelayPointsOverMaximum=0,aa.CONNECTION_UNHEALTHY_THRESHOLD=s.connectionUnhealthyThreshold,aa.CONNECTION_WAIT_TIME_MS=s.connectionWaitTimeMs,aa.MISSED_PONGS_THRESHOLD=s.missedPongsUpperThreshold,aa.MAXIMUM_AUDIO_DELAY_MS=s.maximumAudioDelayMs,aa.MAXIMUM_AUDIO_DELAY_DATA_POINTS=s.maximumAudioDelayDataPoints}},"ReconnectionHealthPolicy");l.default=u},kQNw:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function S(h){return typeof h=="string"?h.length===0:h.byteLength===0}o(S,"isEmptyData"),l.isEmptyData=S},"kU+7":function(j,l,f){"use strict";(function(S){var h=l;h.asPromise=f("MFts"),h.base64=f("bnU+"),h.EventEmitter=f("aJe0"),h.float=f("KwGI"),h.inquire=f("/TZM"),h.utf8=f("yNTq"),h.pool=f("BEY9"),h.LongBits=f("xGEd"),h.isNode=Boolean(typeof S<"u"&&S&&S.process&&S.process.versions&&S.process.versions.node),h.global=h.isNode&&S||typeof window<"u"&&window||typeof self<"u"&&self||this,h.emptyArray=Object.freeze?Object.freeze([]):[],h.emptyObject=Object.freeze?Object.freeze({}):{},h.isInteger=Number.isInteger||o(function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},"isInteger"),h.isString=o(function(s){return typeof s=="string"||s instanceof String},"isString"),h.isObject=o(function(s){return s&&typeof s=="object"},"isObject"),h.isset=h.isSet=o(function(s,i){var e=s[i];return e!=null&&s.hasOwnProperty(i)?typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)>0:!1},"isSet"),h.Buffer=function(){try{var a=h.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),h._Buffer_from=null,h._Buffer_allocUnsafe=null,h.newBuffer=o(function(s){return typeof s=="number"?h.Buffer?h._Buffer_allocUnsafe(s):new h.Array(s):h.Buffer?h._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},"newBuffer"),h.Array=typeof Uint8Array<"u"?Uint8Array:Array,h.Long=h.global.dcodeIO&&h.global.dcodeIO.Long||h.global.Long||h.inquire("long"),h.key2Re=/^true|false|0|1$/,h.key32Re=/^-?(?:0|[1-9][0-9]*)$/,h.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,h.longToHash=o(function(s){return s?h.LongBits.from(s).toHash():h.LongBits.zeroHash},"longToHash"),h.longFromHash=o(function(s,i){var e=h.LongBits.fromHash(s);return h.Long?h.Long.fromBits(e.lo,e.hi,i):e.toNumber(Boolean(i))},"longFromHash");function u(a,s,i){for(var e=Object.keys(s),t=0;t<e.length;++t)(a[e[t]]===void 0||!i)&&(a[e[t]]=s[e[t]]);return a}o(u,"merge"),h.merge=u,h.lcFirst=o(function(s){return s.charAt(0).toLowerCase()+s.substring(1)},"lcFirst");function m(a){function s(i,e){if(!(this instanceof s))return new s(i,e);Object.defineProperty(this,"message",{get:function(){return i}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),e&&u(this,e)}return o(s,"CustomError"),s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:o(function(){return a},"get"),set:void 0,enumerable:!1,configurable:!0},toString:{value:o(function(){return this.name+": "+this.message},"value"),writable:!0,enumerable:!1,configurable:!0}}),s}o(m,"newError"),h.newError=m,h.ProtocolError=m("ProtocolError"),h.oneOfGetter=o(function(s){for(var i={},e=0;e<s.length;++e)i[s[e]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(i[t[n]]===1&&this[t[n]]!==void 0&&this[t[n]]!==null)return t[n]}},"getOneOf"),h.oneOfSetter=o(function(s){return function(i){for(var e=0;e<s.length;++e)s[e]!==i&&delete this[s[e]]}},"setOneOf"),h.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},h._configure=function(){var a=h.Buffer;if(!a){h._Buffer_from=h._Buffer_allocUnsafe=null;return}h._Buffer_from=a.from!==Uint8Array.from&&a.from||o(function(i,e){return new a(i,e)},"Buffer_from"),h._Buffer_allocUnsafe=a.allocUnsafe||o(function(i){return new a(i)},"Buffer_allocUnsafe")}}).call(this,f("yLpj"))},kUL9:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("U9CR")),m=h(f("F7zz"));let a=o(class{bindAudioElement(i){return S(this,void 0,void 0,function*(){if(!i)throw new Error(`Cannot bind audio element: ${i}`);return this.audioElement=i,this.audioElement.autoplay=!0,this.bindAudioMix()})}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null,this.forEachObserver(i=>{this.audioStream&&i.meetingAudioStreamBecameInactive(this.audioStream)}))}bindAudioStream(i){return S(this,void 0,void 0,function*(){if(i){this.audioStream=i;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}})}bindAudioDevice(i){return S(this,void 0,void 0,function*(){if(i&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=i,this.bindAudioMix()})}forEachObserver(i){for(const e of this.observers)m.default.nextTick(()=>{i(e)})}bindAudioMix(){var i,e;return S(this,void 0,void 0,function*(){if(!this.audioElement)return;const t=this.audioElement.srcObject;this.audioStream&&(this.audioElement.srcObject=this.audioStream),t!==this.audioStream&&this.forEachObserver(d=>{t&&d.meetingAudioStreamBecameInactive(t),this.audioStream&&d.meetingAudioStreamBecameActive(this.audioStream)});const n=((i=this.audioDevice)===null||i===void 0?void 0:i.deviceId)!==this.audioElement.sinkId;if(n&&typeof this.audioElement.sinkId>"u")throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const r=this.audioDevice?this.audioDevice.deviceId:"",c=this.audioElement.sinkId;if(r===c)return;const p=this.audioElement,g=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=null),n)try{yield p.setSinkId(r)}catch(d){throw(e=this.logger)===null||e===void 0||e.error(`Failed to set sinkId for audio element: ${d}`),d}this.browserBehavior.hasChromiumWebRTC()&&(p.srcObject=g)})}getCurrentMeetingAudioStream(){return S(this,void 0,void 0,function*(){return this.audioStream})}addAudioMixObserver(i){return S(this,void 0,void 0,function*(){this.observers.add(i)})}removeAudioMixObserver(i){return S(this,void 0,void 0,function*(){this.observers.delete(i)})}audioOutputDidChange(i){return S(this,void 0,void 0,function*(){return this.logger.info("Receive an audio output change event"),this.bindAudioDevice(i)})}constructor(i){this.logger=i,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new u.default,this.observers=new Set}},"DefaultAudioMixController");l.default=a},kabN:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class Xc{onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(u){let m=0;for(const a of u.streams){const s=!!a.attendeeId,i=!!a.externalUserId,e=a.hasOwnProperty("muted"),t=!!a.dropped;if(s){this.attendeeIdToStreamId[a.attendeeId]&&this.attendeeIdToStreamId[a.attendeeId]<a.audioStreamId&&delete this.attendeeIdToStreamId[a.attendeeId],this.streamIdToAttendeeId[a.audioStreamId]=a.attendeeId;const n=i?a.externalUserId:a.attendeeId;this.streamIdToExternalUserId[a.audioStreamId]=n,this.attendeeIdToStreamId[a.attendeeId]=a.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(a.attendeeId,!0,n,!1,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}if(e){const n=this.streamIdToAttendeeId[a.audioStreamId],r=this.streamIdToExternalUserId[a.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(n,null,a.muted,null,r)}if(!s&&!e){const n=this.streamIdToAttendeeId[a.audioStreamId];if(n){const r=this.streamIdToExternalUserId[a.audioStreamId];delete this.streamIdToAttendeeId[a.audioStreamId],delete this.streamIdToExternalUserId[a.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[a.audioStreamId],this.attendeeIdToStreamId[n]===a.audioStreamId&&delete this.attendeeIdToStreamId[n];let c=!1;for(const p of Object.keys(this.streamIdToAttendeeId)){const g=parseInt(p);if(g>a.audioStreamId&&this.streamIdToAttendeeId[g]===n){c=!0;break}}c||this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,r,t,{attendeeIndex:m++,attendeesInFrame:u.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(u),this.sessionReconnected=!1)}cleanUpState(u){const m=Object.values(this.streamIdToAttendeeId),a=u.streams.map(i=>i.attendeeId),s=m.filter(i=>!a.includes(i));for(const[i,e]of s.entries()){const t=this.attendeeIdToStreamId[e],n=this.streamIdToExternalUserId[t];if(delete this.streamIdToAttendeeId[t],delete this.streamIdToExternalUserId[t],delete this.warnedAboutMissingStreamIdMapping[t],delete this.attendeeIdToStreamId[e],e===this.selfAttendeeId){this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection");continue}this.realtimeController.realtimeSetAttendeeIdPresence(e,!1,n,!1,{attendeeIndex:i,attendeesInFrame:e.length})}}sendRealtimeUpdatesForAudioMetadata(u){let m=null,a=null;for(const s of u.attendeeStates){const i=this.attendeeIdForStreamId(s.audioStreamId);s.hasOwnProperty("volume")&&(m===null&&(m={}),i!==null&&(m[i]=this.normalizedVolume(s))),s.hasOwnProperty("signalStrength")&&(a===null&&(a={}),i!==null&&(a[i]=this.normalizedSignalStrength(s)))}this.applyRealtimeUpdatesForAudioMetadata(m,a)}normalizedVolume(u){const a=1-(-u.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(a,0),1)}normalizedSignalStrength(u){const m=u.signalStrength/Xc.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(m,0),1)}applyRealtimeUpdatesForAudioMetadata(u,m){for(const a in this.streamIdToAttendeeId){const s=this.streamIdToAttendeeId[a],i=this.streamIdToExternalUserId[a];let e=null,t=null;u!==null&&(u.hasOwnProperty(s)?e=u[s]:e=Xc.IMPLICIT_VOLUME),m!==null&&(m.hasOwnProperty(s)?t=m[s]:t=Xc.IMPLICIT_SIGNAL_STRENGTH),(e!==null||t!==null)&&this.realtimeController.realtimeUpdateVolumeIndicator(s,e,null,t,i)}}attendeeIdForStreamId(u){if(u===0)return null;const m=this.streamIdToAttendeeId[u];return m||(this.warnedAboutMissingStreamIdMapping[u]||(this.warnedAboutMissingStreamIdMapping[u]=!0,this.logger.warn(`volume indicator stream id ${u} seen before being defined`)),null)}constructor(u,m,a,s,i){this.logger=u,this.realtimeController=m,this.minVolumeDecibels=a,this.maxVolumeDecibels=s,this.selfAttendeeId=i,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}},"DefaultVolumeIndicatorAdapter");l.default=S,S.MAX_SIGNAL_STRENGTH_LEVELS=2,S.IMPLICIT_VOLUME=0,S.IMPLICIT_SIGNAL_STRENGTH=1},knPd:function(j,l,f){"use strict";var S=this&&this.__createBinding||(Object.create?function(F,N,P,x){x===void 0&&(x=P),Object.defineProperty(F,x,{enumerable:!0,get:function(){return N[P]}})}:function(F,N,P,x){x===void 0&&(x=P),F[x]=N[P]}),h=this&&this.__setModuleDefault||(Object.create?function(F,N){Object.defineProperty(F,"default",{enumerable:!0,value:N})}:function(F,N){F.default=N}),u=this&&this.__importStar||function(F){if(F&&F.__esModule)return F;var N={};if(F!=null)for(var P in F)P!=="default"&&Object.prototype.hasOwnProperty.call(F,P)&&S(N,F,P);return h(N,F),N},m=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(f("g+gC")),s=m(f("LmyK")),i=m(f("mpmV")),e=m(f("34ho")),t=f("uctb"),n=u(f("DUgj")),r=m(f("aqWb")),c=m(f("Zkgh")),p=m(f("nYR4")),g=m(f("Lspx")),d=m(f("uaNU")),y=f("P7D+"),E=m(f("J1op")),w=m(f("NBIk"));let k=o(class{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}},"LinkMediaStats"),V=o(class Hr{reset(){this.allHighestPolicy=new p.default(""),this.optimalReceiveSet=new c.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new c.default,this.subscribedReceiveStreams=[],this.videoPreferences=void 0,this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new c.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=Hr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=Hr.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new k,this.prevDownlinkStats=new k,this.probeFailed=!1,this.serverSideNetworkAdaption=this.videoPriorityBasedPolicyConfig.serverSideNetworkAdaption,this.pendingActionAfterUpdatedPreferences=!1}bindToTileController(N){this.tileController=N,this.logger.info("tileController bound")}setWantsResubscribeObserver(N){this.wantsResubscribeObserver=N}chooseRemoteVideoSources(N){var P;if(!(!((P=this.videoPreferences)===null||P===void 0)&&P.equals(N))){if(this.videoPreferences=N==null?void 0:N.clone(),!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!0,this.wantsResubscribeObserver!==void 0&&(this.wantsResubscribeObserver(),this.pendingActionAfterUpdatedPreferences=!1),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)){const x=new Array;for(const O of this.videoPreferences){const M=new r.default;M.attendee=new a.default,M.attendee.attendeeId=O.attendeeId,x.push(M)}this.allHighestPolicy.chooseRemoteVideoSources(x);return}this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(N)}`)}}updateIndex(N){this.videoIndex=N,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption&&this.allHighestPolicy.updateIndex(N),this.videoPreferences||this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const N=new Set;for(const M of this.videoIndex.remoteStreamDescriptions())N.add(M.attendeeId);const P=y.VideoPreferences.prepare(),x=N.size;let O=g.default.Maximum;x>8?O=g.default.Low:x>4&&(O=g.default.Medium);for(const M of N)P.add(new d.default(M,1,O));this.defaultVideoPreferences=P.build()}updateMetrics(N){if(!this.videoIndex||this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new k;const P=N.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=P.availableIncomingBitrate/1e3;for(const x in N.streamMetricReports){const O=Number.parseInt(x,10),M=N.streamMetricReports[O];M.direction===s.default.DOWNSTREAM&&M.mediaType===i.default.VIDEO&&(M.currentMetrics.hasOwnProperty("nackCount")&&(this.downlinkStats.nackCount+=N.countPerSecond("nackCount",O)),M.currentMetrics.hasOwnProperty("packetsLost")&&(this.downlinkStats.packetsLost+=N.countPerSecond("packetsLost",O)),M.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=N.bitsPerSecond("bytesReceived",O)/1e3))}}wantsResubscribe(){let N=!1;return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(N||(N=this.pendingActionAfterUpdatedPreferences),this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?N||this.allHighestPolicy.wantsResubscribe():(this.calculateOptimalReceiveSet(),N||(N=!this.subscribedReceiveSet.equal(this.optimalReceiveSet)),N)}chooseSubscriptions(){return!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption)&&(this.pendingActionAfterUpdatedPreferences=!1,this.serverSideNetworkAdaption===n.default.BandwidthProbingAndRemoteVideoQualityAdaption)?this.allHighestPolicy.chooseSubscriptions():(this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone())}addObserver(N){this.observerQueue.add(N)}removeObserver(N){this.observerQueue.delete(N)}forEachObserver(N){for(const P of this.observerQueue)N(P)}setVideoPriorityBasedPolicyConfigs(N){this.videoPriorityBasedPolicyConfig=N}calculateOptimalReceiveStreams(){var N;const P=[],x=this.videoIndex.remoteStreamDescriptions();if(x.length===0||!((N=this.videoPreferences)===null||N===void 0)&&N.isEmpty()){this.optimalReceiveStreams=[];return}const O=this.rateProbeState;this.cleanBwPausedTiles(x),this.handleAppPausedStreams(P,x);const M=new Map;for(const Je of this.getCurrentVideoPreferences())M.set(Je.attendeeId,Je);const D=x.filter(Je=>M.has(Je.attendeeId)),J=!this.streamsWithPreferenceDidChange(D),q=!this.startupPeriod&&J;if(q&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;D.sort((Je,_t)=>Je.maxBitrateKbps===_t.maxBitrateKbps?Je.streamId-_t.streamId:Je.maxBitrateKbps-_t.maxBitrateKbps);for(const Je of D)(Je.avgBitrateKbps===0||Je.avgBitrateKbps>Je.maxBitrateKbps)&&(Je.attendeeId.endsWith(e.default.Modality)&&Je.maxBitrateKbps<100?Je.maxBitrateKbps=Je.avgBitrateKbps:Je.avgBitrateKbps=Je.maxBitrateKbps);const $=new Set;for(const Je of this.getCurrentVideoPreferences()){const _t=D.filter(ze=>ze.attendeeId===Je.attendeeId);if(_t.length<3)continue;let ot=15,Et=320*480;_t.forEach(ze=>{ot=Math.max(ot,ze.maxFrameRate),Et=Math.max(Et,ze.totalPixels())}),_t.sort((ze,$t)=>{if(Je.degradationPreference===w.default.MaintainResolution)return Math.abs(ze.maxFrameRate-$t.maxFrameRate)<2?ze.totalPixels()-$t.totalPixels():ze.maxFrameRate-$t.maxFrameRate;if(Je.degradationPreference===w.default.MaintainFramerate)return ze.totalPixels()===$t.totalPixels()?ze.maxFrameRate-$t.maxFrameRate:ze.totalPixels()-$t.totalPixels();{const an=o(Gn=>Gn.avgBitrateKbps*Math.pow(2,5*Gn.maxFrameRate/ot*Math.pow(4,Gn.totalPixels()/Et)),"weighByFramerate");return an(ze)-an($t)}});let Mt;for(const ze of _t){if(Mt!==void 0&&(ze.maxFrameRate<Mt.maxFrameRate&&Math.abs(Mt.maxFrameRate-ze.maxFrameRate)>2||ze.totalPixels()<Mt.totalPixels())){$.add(ze.streamId);continue}Mt=ze}}const de=D.filter(Je=>!$.has(Je.streamId));this.logger.info(`Filtered to ${JSON.stringify(de)}`);const Ee={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};Ee.targetDownlinkBitrate=this.determineTargetRate();const _e=this.subscribedReceiveSet.size(),ye=this.downlinkStats.bandwidthEstimateKbps,Be=!this.videoPriorityBasedPolicyConfig.allowSubscribe(_e,ye);if(this.probeFailed&&(this.probeFailed=!1,this.timeBeforeAllowSubscribeMs=Hr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,q&&Be))return;const pt=this.priorityPolicy(Ee,de,P),Ve=!n.serverSideNetworkAdaptionIsNoneOrDefault(this.serverSideNetworkAdaption);let gt=0;if(!Ve&&!this.startupPeriod&&J?this.rateProbeState==="Probing"?gt=this.handleProbe(P,Ee.targetDownlinkBitrate):Ee.deltaToNextUpgrade!==0&&(gt=this.maybeOverrideOrProbe(P,Ee,pt)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.previousStreamsWithPreference=D,this.videoPreferencesUpdated=!1,gt===1){this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),this.prevTargetRateKbps=Ee.targetDownlinkBitrate;return}if(gt===2){const Je=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(D,this.preProbeNonPausedReceiveStreams),this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+Je);return}this.optimalNonPausedReceiveStreams=P.slice();const dt=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(D,P),this.logger.getLogLevel()<=t.LogLevel.INFO&&(this.logCount%15===0||this.rateProbeState!==O||this.optimalReceiveStreams.length!==P.length||dt!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(x,Ee.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=Ee.targetDownlinkBitrate,this.optimalReceiveStreams=P.slice()}calculateOptimalReceiveSet(){const N=new c.default;this.calculateOptimalReceiveStreams();for(const P of this.optimalReceiveStreams)N.add(P.streamId);if(!this.optimalReceiveSet.equal(N)){const P=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(N)} subscribedRate:${P}`)}this.optimalReceiveSet=N}determineTargetRate(){let N=0;const P=Date.now();return this.downlinkStats.bandwidthEstimateKbps!==0?(this.firstEstimateTimestamp===0&&(this.firstEstimateTimestamp=P),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>Hr.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||P-this.firstEstimateTimestamp>Hr.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),this.startupPeriod?N=Hr.DEFAULT_BANDWIDTH_KBPS:this.rateProbeState==="Probing"&&this.downlinkStats.usedBandwidthKbps>this.downlinkStats.bandwidthEstimateKbps&&this.downlinkStats.packetsLost<Hr.SPURIOUS_PACKET_LOST_THRESHOLD?(this.logger.info(`bwe: In probe state, overriding estimate ${this.downlinkStats.bandwidthEstimateKbps} with actual receive bitrate ${this.downlinkStats.usedBandwidthKbps}`),N=this.downlinkStats.usedBandwidthKbps+Hr.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS):N=this.downlinkStats.bandwidthEstimateKbps):this.firstEstimateTimestamp===0?N=Hr.DEFAULT_BANDWIDTH_KBPS:N=this.prevTargetRateKbps,!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-Hr.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*Hr.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&this.downlinkStats.packetsLost===0?(this.logger.debug(()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps),this.usingPrevTargetRate=!0,N=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,N>15e3&&this.logger.warn("bwe: "+N+" exceeds maximum limit (15000). Limit TargetDisplaySize with VideoPreferences to avoid this."),Math.min(N,15e3)}setProbeState(N){if(this.rateProbeState===N)return!1;const P=Date.now();switch(N){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(this.lastProbeTimestamp===0||P-this.lastProbeTimestamp>Hr.MIN_TIME_BETWEEN_PROBE_MS)this.probePendingStartTimestamp=P;else return!1;break;case"Probing":if(P-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs)this.lastProbeTimestamp=P,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(this.timeBeforeAllowProbeMs*2,Hr.MAX_HOLD_BEFORE_PROBE_MS);else return!1;break}return this.logger.info("bwe: setProbeState to "+N+" from "+this.rateProbeState),this.rateProbeState=N,!0}upgradeToStream(N,P){for(let x=0;x<N.length;x++)if(N[x].groupId===P.groupId){const O=P.avgBitrateKbps-N[x].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(N[x])+" to "+P),this.lastUpgradeRateKbps=O,N[x]=P,O}return N.push(P),this.lastUpgradeRateKbps=P.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(N,P){if(Date.now()-this.lastProbeTimestamp>Hr.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0&&(this.logger.info(`bwe: Probe encountering packets lost:${this.downlinkStats.packetsLost}`),this.downlinkStats.packetsLost>Hr.SPURIOUS_PACKET_LOST_THRESHOLD))return this.setProbeState("Not Probing"),this.logger.info(`bwe: Canceling probe due to packets lost:${this.downlinkStats.packetsLost}`),this.probeFailed=!0,this.timeBeforeAllowSubscribeMs=Math.max(Hr.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.timeBeforeAllowSubscribeMs)*3,2;const x=this.calculateSubscribeRate(this.optimalReceiveStreams);return this.chosenStreamsSameAsLast(N)||P>x?(this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=Hr.MIN_TIME_BETWEEN_PROBE_MS,0):1}maybeOverrideOrProbe(N,P,x){const O=this.chosenStreamsSameAsLast(N);let M=0;const D=P.targetDownlinkBitrate>Hr.LOW_BITRATE_THRESHOLD_KBPS?Hr.TARGET_RATE_CHANGE_TRIGGER_PERCENT:Hr.TARGET_RATE_CHANGE_TRIGGER_PERCENT*2,J=P.targetDownlinkBitrate*D/100;if(this.targetRateBaselineForDeltaCheckKbps=this.targetRateBaselineForDeltaCheckKbps!==void 0?this.targetRateBaselineForDeltaCheckKbps:this.prevTargetRateKbps,!O&&Math.abs(P.targetDownlinkBitrate-this.targetRateBaselineForDeltaCheckKbps)<J?(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),M=1):this.targetRateBaselineForDeltaCheckKbps=P.targetDownlinkBitrate,this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,M;if(O||M===1)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.upgradeToStream(N,x),M=0);break}else this.setProbeState("Not Probing");return M}calculateSubscribeRate(N){let P=0;for(const x of N)!this.pausedStreamIds.contain(x.streamId)&&!this.pausedBwAttendeeIds.has(x.attendeeId)&&(P+=x.maxBitrateKbps);return P}handleAppPausedStreams(N,P){if(!this.tileController){this.logger.warn("tileController not found!");return}this.pausedStreamIds=new c.default;const x=this.tileController.getAllRemoteVideoTiles();for(const O of x){const M=O.state();if(M.paused&&!this.pausedBwAttendeeIds.has(M.boundAttendeeId)){let D=P.length;for(;D--;)P[D].attendeeId===M.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+M.boundAttendeeId+" streamId: "+P[D].streamId),this.pausedStreamIds.add(P[D].streamId),this.subscribedReceiveSet.contain(P[D].streamId)&&N.push(P[D]),P.splice(D,1))}}}processBwPausedStreams(N,P){if(!this.tileController){this.logger.warn("tileController not found!");return}const x=this.getCurrentVideoPreferences();if(x&&this.shouldPauseTiles){const O=this.tileController.getAllVideoTiles();for(const M of x){const D=this.getVideoTileForAttendeeId(M.attendeeId,O),J=(D==null?void 0:D.state().paused)||!1;if(P.some(q=>q.attendeeId===M.attendeeId))J&&this.pausedBwAttendeeIds.has(M.attendeeId)&&(this.logger.info(`bwe: unpausing attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(q=>{q.tileWillBeUnpausedByDownlinkPolicy(D.id())}),this.tileController.unpauseVideoTile(D.id()),this.pausedBwAttendeeIds.delete(M.attendeeId));else{const q=N.some($=>$.attendeeId===M.attendeeId);if(D&&q){const $=this.optimalReceiveStreams.find(de=>de.attendeeId===M.attendeeId);$!==void 0&&(J||(this.logger.info(`bwe: pausing streamId ${$.streamId} attendee ${M.attendeeId} due to bandwidth`),this.forEachObserver(de=>{de.tileWillBePausedByDownlinkPolicy(D.id())}),this.tileController.pauseVideoTile(D.id())),P.push($)),this.pausedBwAttendeeIds.add(M.attendeeId)}else if(q){const $=this.tileController.addVideoTile();$.bindVideoStream(M.attendeeId,!1,null,0,0,0,null),this.forEachObserver(de=>{de.tileWillBePausedByDownlinkPolicy($.id())}),$.pause(),this.logger.info(`bwe: Created video tile ${$.id()} for bw paused attendee ${M.attendeeId}`),this.pausedBwAttendeeIds.add(M.attendeeId)}}}}}cleanBwPausedTiles(N){if(!this.tileController){this.logger.warn("tileController not found!");return}const P=this.tileController.getAllRemoteVideoTiles(),x=this.getCurrentVideoPreferences();for(const O of P){const M=O.state();M.boundVideoStream||(N.some(D=>D.attendeeId===M.boundAttendeeId)?x!==void 0&&!x.some(D=>D.attendeeId===M.boundAttendeeId)&&this.tileController.removeVideoTile(M.tileId):(this.tileController.removeVideoTile(M.tileId),this.logger.info(`bwe: Removed video tile ${M.tileId} for bw paused attendee ${M.boundAttendeeId}`)))}}priorityPolicy(N,P,x){let O;const M=this.getCurrentVideoPreferences(),D=M.highestPriority();let J,q=D;for(;q!==-1;){J=-1;for(const $ of M)if($.priority===q)for(const de of P)de.attendeeId===$.attendeeId&&(x.some(Ee=>Ee.groupId===de.groupId)||(N.chosenTotalBitrate+de.avgBitrateKbps<=N.targetDownlinkBitrate?(x.push(de),N.chosenTotalBitrate+=de.avgBitrateKbps):N.deltaToNextUpgrade===0&&(N.deltaToNextUpgrade=de.avgBitrateKbps,O=de)));else if($.priority>q){J=$.priority;break}for(const $ of M)if($.priority===q){for(const de of P)if(de.attendeeId===$.attendeeId){const Ee=x.findIndex(_e=>_e.groupId===de.groupId&&_e.maxBitrateKbps<=de.maxBitrateKbps&&_e.avgBitrateKbps<de.avgBitrateKbps);if(Ee!==-1){const _e=de.avgBitrateKbps-x[Ee].avgBitrateKbps;this.hasSimulcastStreams(P,de.attendeeId,de.groupId)&&this.canUpgrade(de.avgBitrateKbps,$.targetSize,$.targetSizeToBitrateKbps($.targetSize),de.attendeeId.endsWith(e.default.Modality))?(this.logger.info(`bwe: attendee: ${de.attendeeId} group: ${de.groupId} has simulcast and can upgrade avgBitrate: ${de.avgBitrateKbps} target: ${$.targetSizeToBitrateKbps($.targetSize)} targetTotalBitrate: ${N.targetDownlinkBitrate}`),N.chosenTotalBitrate+_e<=N.targetDownlinkBitrate?(N.chosenTotalBitrate+=_e,x[Ee]=de):N.deltaToNextUpgrade===0&&(N.deltaToNextUpgrade=_e,O=de)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if($.priority>q)break;if(q===D&&N.deltaToNextUpgrade!==0)break;q=J}return O}getVideoTileForAttendeeId(N,P){for(const x of P)if(x.state().boundAttendeeId===N)return x;return null}canUpgrade(N,P,x,O){let M=!1;return(P===g.default.High||!O&&N<=x||O&&P===g.default.Medium&&N<=x)&&(M=!0),M?(this.logger.info(`bwe: canUpgrade: bitrateKbps: ${N} targetBitrateKbps: ${x}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbps: ${N} targetBitrateKbps: ${x}`),!1)}hasSimulcastStreams(N,P,x){let O=0;for(const M of N)M.attendeeId===P&&M.groupId===x&&O++;return this.logger.info(`bwe: attendeeId: ${P} groupId: ${x} hasSimulcastStreams: streamCount: ${O}`),O>1}streamsWithPreferenceDidChange(N){if(this.previousStreamsWithPreference===void 0||N.length!==this.previousStreamsWithPreference.length||this.videoPreferencesUpdated===!0)return!0;for(const P of N)if(this.previousStreamsWithPreference.find(O=>O.groupId===P.groupId&&O.streamId===P.streamId&&O.maxBitrateKbps===P.maxBitrateKbps)===void 0)return!0;return!1}chosenStreamsSameAsLast(N){if(this.optimalNonPausedReceiveStreams.length!==N.length)return!1;for(const P of this.optimalNonPausedReceiveStreams)if(!N.some(x=>x.streamId===P.streamId))return!1;return!0}policyStateLogStr(N,P){const x=this.calculateSubscribeRate(this.optimalReceiveStreams),O={targetBitrate:P,subscribedRate:x,probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let M="remoteInfos: [";for(const J of N)M+=`{grpId:${J.groupId} strId:${J.streamId} maxBr:${J.maxBitrateKbps} avgBr:${J.avgBitrateKbps}}, `;M+="]";let D=`bwe: optimalReceiveSet ${JSON.stringify(O)}
bwe:   prev ${JSON.stringify(this.prevDownlinkStats)}
bwe:   now  ${JSON.stringify(this.downlinkStats)}
bwe:   ${M}
`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(D+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }
`),this.videoPreferences?D+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`:D+=`bwe:   default preferences: ${JSON.stringify(this.defaultVideoPreferences)}`,D}getCurrentVideoPreferences(){return this.videoPreferences||this.defaultVideoPreferences}getServerSideNetworkAdaption(){return this.serverSideNetworkAdaption}setServerSideNetworkAdaption(N){this.serverSideNetworkAdaption=N,this.setProbeState("Not Probing")}supportedServerSideNetworkAdaptions(){return[n.default.None,n.default.BandwidthProbing,n.default.BandwidthProbingAndRemoteVideoQualityAdaption]}getVideoPreferences(){let N=this.getCurrentVideoPreferences();return N||(N=y.VideoPreferences.prepare().build()),N}wantsAllTemporalLayersInIndex(){return!0}constructor(N,P=E.default.Default){this.logger=N,this.videoPriorityBasedPolicyConfig=P,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.wantsResubscribeObserver=void 0,this.reset()}},"VideoPriorityBasedPolicy");l.default=V,V.DEFAULT_BANDWIDTH_KBPS=2800,V.STARTUP_PERIOD_MS=6e3,V.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,V.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,V.LOW_BITRATE_THRESHOLD_KBPS=300,V.MIN_TIME_BETWEEN_PROBE_MS=5e3,V.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,V.MAX_HOLD_BEFORE_PROBE_MS=3e4,V.MAX_ALLOWED_PROBE_TIME_MS=6e4,V.SPURIOUS_PACKET_LOST_THRESHOLD=2,V.USED_BANDWIDTH_OVERRIDE_BUFFER_KBPS=100},ko9P:function(j,l,f){"use strict";j.exports=h;var S=f("j4TH");function h(s,i){this.lo=s>>>0,this.hi=i>>>0}o(h,"LongBits");var u=h.zero=new h(0,0);u.toNumber=function(){return 0},u.zzEncode=u.zzDecode=function(){return this},u.length=function(){return 1};var m=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=o(function(i){if(i===0)return u;var e=i<0;e&&(i=-i);var t=i>>>0,n=(i-t)/4294967296>>>0;return e&&(n=~n>>>0,t=~t>>>0,++t>4294967295&&(t=0,++n>4294967295&&(n=0))),new h(t,n)},"fromNumber"),h.from=o(function(i){if(typeof i=="number")return h.fromNumber(i);if(S.isString(i))if(S.Long)i=S.Long.fromString(i);else return h.fromNumber(parseInt(i,10));return i.low||i.high?new h(i.low>>>0,i.high>>>0):u},"from"),h.prototype.toNumber=o(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=o(function(i){return S.Long?new S.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=o(function(i){return i===m?u:new h((a.call(i,0)|a.call(i,1)<<8|a.call(i,2)<<16|a.call(i,3)<<24)>>>0,(a.call(i,4)|a.call(i,5)<<8|a.call(i,6)<<16|a.call(i,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=o(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=o(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),h.prototype.zzDecode=o(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),h.prototype.length=o(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},kph0:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckNetworkUDPConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",h[h.ConnectionFailed=2]="ConnectionFailed",h[h.ICENegotiationFailed=3]="ICENegotiationFailed"})(S=l.CheckNetworkUDPConnectivityFeedback||(l.CheckNetworkUDPConnectivityFeedback={})),l.default=S},kud1:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("jG7n")),m=h(f("83pg"));let a=o(class eh extends u.default{setImageBlob(i){return S(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield eh.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:n,targetCanvas:r}=this,{width:c,height:p}=r;n.save(),n.clearRect(0,0,c,p),n.drawImage(this.scaledCanvas,0,0,c,p),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,p),n.globalCompositeOperation="destination-over",n.drawImage(this.replacementImage,0,0,r.width,r.height),n.restore()}static loadImageExecutor(i,e,t){const n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",()=>{i(n)},!1),n.addEventListener("error",r=>{e(new Error(`Could not load replacement image ${n.src}: ${r.message}`))},!1),n.src=t}static loadImage(i){return S(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return S(this,void 0,void 0,function*(){this.replacementImage=yield eh.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return S(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=a},l7oq:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("zcg+"));let u=o(class kS{timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs?!0:this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(a){this._isFirstConnection=a,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(a,s){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=s,this.backoffTimer=new h.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start(()=>{this.backoffCancel=null,a()})),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new kS(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(a){this.lastActiveTimestampMs=a}constructor(a,s){this.reconnectTimeoutMs=a,this.backoffPolicy=s,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}},"DefaultReconnectController");l.default=u},l8QA:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Czkq"));let u=o(class extends h.default{},"BackgroundBlurVideoFrameProcessorDelegate");l.default=u},lFzH:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("papz")),m=h(f("wXa7")),a=h(f("j+uH"));let s=o(class extends a.default{cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(!((t=(e=this.context.meetingSessionConfiguration)===null||e===void 0?void 0:e.urls)===null||t===void 0)&&t.audioHostURL)}sessionUsesVideo(){let t;this.context.transceiverController.useTransceivers()?t=this.context.transceiverController.hasVideoInput():t=this.context.videoTileController.hasStartedLocalVideoTile();const n=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),r=t||n;return this.context.logger.info(`uses video: ${r} (enabled: ${!0}, sending: ${t}, receiving: ${n})`),r}run(){return S(this,void 0,void 0,function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise((t,n)=>S(this,void 0,void 0,function*(){this.cancelPromise=r=>{n(r)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new m.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const r=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.IncompatibleSDP}`);this.context.previousSdpOffer=null,n(r);return}t()}catch(r){n(r)}finally{delete this.cancelPromise}}))})}constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}},"CreateSDPTask");l.default=s},lUhs:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var S;(function(h){h[h.OK=0]="OK",h[h.Left=1]="Left",h[h.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",h[h.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",h[h.AudioCallAtCapacity=4]="AudioCallAtCapacity",h[h.MeetingEnded=5]="MeetingEnded",h[h.AudioInternalServerError=6]="AudioInternalServerError",h[h.AudioServiceUnavailable=7]="AudioServiceUnavailable",h[h.AudioDisconnected=8]="AudioDisconnected",h[h.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",h[h.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",h[h.SignalingBadRequest=11]="SignalingBadRequest",h[h.SignalingInternalServerError=12]="SignalingInternalServerError",h[h.SignalingRequestFailed=13]="SignalingRequestFailed",h[h.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",h[h.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",h[h.RealtimeApiFailed=16]="RealtimeApiFailed",h[h.TaskFailed=17]="TaskFailed",h[h.IncompatibleSDP=18]="IncompatibleSDP",h[h.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",h[h.NoAttendeePresent=20]="NoAttendeePresent",h[h.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",h[h.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",h[h.AudioDisconnectAudio=23]="AudioDisconnectAudio"})(S=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=S},ldli:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("f2XL"),u=S(f("Zkgh")),m=S(f("MhWp"));let a=o(class{localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(i){return i>0&&i<1e3?1:Math.trunc(i/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const i=[];return this.currentIndex.sources.forEach(e=>{const t=new m.default;t.attendeeId=e.attendeeId,t.groupId=e.groupId,t.streamId=e.streamId,t.maxBitrateKbps=e.maxBitrateKbps,t.avgBitrateKbps=this.convertBpsToKbps(e.avgBitrateBps),t.width=e.width,t.height=e.height,t.maxFrameRate=e.framerate,i.push(t)}),i}integrateUplinkPolicyDecision(i){if(i&&i.length){const e=i[0];this.videoStreamDescription.maxBitrateKbps=e.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=e.maxFramerate}}integrateIndexFrame(i){if(this.currentIndex=i,!i)return;const e=new Map;let t=!1;for(const n of i.sources){if(!e.has(n.attendeeId)){e.set(n.attendeeId,n.groupId);continue}const r=e.get(n.attendeeId);r<n.groupId&&(this.logger.warn(`Old group ID ${r} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),e.set(n.attendeeId,n.groupId)),t=!0}t&&(this.currentIndex.sources=this.currentIndex.sources.filter(n=>e.get(n.attendeeId)===n.groupId)),this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(i){this.currentSubscribeAck=i,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToGroupMap=this.buildSSRCToGroupMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe),this.sendVideoStreamId=0,i.allocations&&i.allocations!==void 0&&i.allocations.length>0&&(this.sendVideoStreamId=i.allocations[0].streamId)}integrateBitratesFrame(i){if(this.currentIndex)for(const e of i.bitrates){const t=this.currentIndex.sources.find(n=>n.streamId===e.sourceStreamId);t!==void 0&&(t.avgBitrateBps=e.avgBitrateBps)}}allStreams(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.sources)i.add(e.streamId);return i}allVideoSendingSourcesExcludingSelf(i){const e=[],t=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const n of this.currentIndex.sources){const{attendeeId:r,externalUserId:c,mediaType:p}=n;r!==i&&p===h.SdkStreamMediaType.VIDEO&&(t.has(r)||(e.push({attendee:{attendeeId:r,externalUserId:c}}),t.add(r)))}return e}streamSelectionUnderBandwidthConstraint(i,e,t,n){const r=new Set;if(this.currentIndex)for(const y of this.currentIndex.sources)y.attendeeId===i||y.mediaType!==h.SdkStreamMediaType.VIDEO||!e.has(y.attendeeId)&&!t.has(y.attendeeId)&&r.add(y.attendeeId);const c=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i),p=new Map;let g=0;c.forEach((y,E)=>{p.set(E,y[0]),g+=y[0].maxBitrateKbps}),g=this.trySelectHighBitrateForAttendees(c,e,g,n,p),this.trySelectHighBitrateForAttendees(c,r,g,n,p);const d=new u.default;for(const y of p.values())d.add(y.streamId);return d}highestQualityStreamFromEachGroupExcludingSelf(i){const e=new u.default;if(this.currentIndex){const t=new Map;for(const n of this.currentIndex.sources)n.attendeeId===i||n.mediaType!==h.SdkStreamMediaType.VIDEO||(!t.has(n.groupId)||n.maxBitrateKbps>t.get(n.groupId).maxBitrateKbps)&&t.set(n.groupId,n);for(const n of t.values())e.add(n.streamId)}return e}numberOfVideoPublishingParticipantsExcludingSelf(i){return this.highestQualityStreamFromEachGroupExcludingSelf(i).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${i}`),"";const t=this.subscribeStreamToAttendeeMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known attendee`),"")}externalUserIdForTrack(i){const e=this.streamIdForTrack(i);if(e===void 0||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${i}`),"";const t=this.subscribeStreamToExternalUserIdMap.get(e);return t||(this.logger.info(`track ${i} (stream ${e}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(i){if(!this.streamToAttendeeMap)if(this.currentIndex)this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex);else return"";const e=this.streamToAttendeeMap.get(i);return e||(this.logger.info(`stream ID ${i} does not correspond to a known attendee`),"")}attendeeIdForGroupId(i){if(!this.groupIdToAttendeeMap)if(this.currentIndex)this.groupIdToAttendeeMap=this.buildGroupIdToAttendeeMap(this.currentIndex);else return"";const e=this.groupIdToAttendeeMap.get(i);return e||(this.logger.info(`group ID ${i} does not correspond to a known attendee`),"")}groupIdForStreamId(i){if(!(!this.currentIndex||!this.currentIndex.sources)){for(const e of this.currentIndex.sources)if(e.streamId===i)return e.groupId;if(this.indexForSubscribe){for(const e of this.indexForSubscribe.sources)if(e.streamId===i)return e.groupId}}}StreamIdsInSameGroup(i,e){return this.groupIdForStreamId(i)===this.groupIdForStreamId(e)}streamIdForTrack(i){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(i)}streamIdForSSRC(i){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(i)}overrideStreamIdMappings(i,e){if(this.subscribeTrackToStreamMap){for(const[t,n]of this.subscribeTrackToStreamMap.entries())if(i===n){this.subscribeTrackToStreamMap.set(t,e);break}}if(this.subscribeSsrcToStreamMap){for(const[t,n]of this.subscribeSsrcToStreamMap.entries())if(i===n){this.subscribeSsrcToStreamMap.set(t,e);break}}}groupIdForSSRC(i){if(this.subscribeSsrcToGroupMap)return this.subscribeSsrcToGroupMap.get(i)}streamsPausedAtSource(){const i=new u.default;if(this.currentIndex)for(const e of this.currentIndex.pausedAtSourceIds)i.add(e);return i}sendVideoStreamIdFromRid(i){return this.sendVideoStreamId}buildTrackToStreamMap(i){const e=new Map;this.logger.debug(()=>`trackMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.trackLabel,t.streamId);return e}buildSSRCToStreamMap(i){const e=new Map;this.logger.debug(()=>`ssrcMap ${JSON.stringify(i.tracks)}`);for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,t.streamId);return e}buildSSRCToGroupMap(i){const e=new Map;for(const t of i.tracks)t.trackLabel.length>0&&t.streamId>0&&e.set(t.ssrc,this.groupIdForStreamId(t.streamId));return e}buildStreamToAttendeeMap(i){const e=new Map;if(i)for(const t of i.sources)e.set(t.streamId,t.attendeeId);return e}buildGroupIdToAttendeeMap(i){const e=new Map;for(const t of i.sources)e.set(t.groupId,t.attendeeId);return e}buildStreamExternalUserIdMap(i){const e=new Map;if(i)for(const t of i.sources)t.externalUserId&&e.set(t.streamId,t.externalUserId);return e}trySelectHighBitrateForAttendees(i,e,t,n,r){for(const c of e){if(t>=n)break;if(i.has(c)){const p=i.get(c);for(const g of p.reverse())if(t-r.get(c).maxBitrateKbps+g.maxBitrateKbps<n){t=t-r.get(c).maxBitrateKbps+g.maxBitrateKbps,r.set(c,g);break}}}return t}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(i){const e=new Map;if(this.currentIndex)for(const t of this.currentIndex.sources)t.attendeeId===i||t.mediaType!==h.SdkStreamMediaType.VIDEO||(e.has(t.attendeeId)?e.get(t.attendeeId).push(t):e.set(t.attendeeId,[t]));return e.forEach((t,n)=>{t.sort((r,c)=>r.maxBitrateKbps>c.maxBitrateKbps?1:r.maxBitrateKbps<c.maxBitrateKbps?-1:0)}),e}constructor(i){this.logger=i,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.subscribeSsrcToGroupMap=null,this.streamToAttendeeMap=null,this.groupIdToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new m.default,this.sendVideoStreamId=0,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}},"DefaultVideoStreamIndex");l.default=a},lmsn:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={CouldNotFindArticle:"could_not_find_article"},t=Object(a.a)("helpdesk.getArticle generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"helpdesk.getArticle",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to helpdesk.getArticle
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpdeskGetArticleFetcher",description:"helpdesk.getArticle generated fetcher"}},lnWt:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function S(h){return new Uint8Array([(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255])}o(S,"numToUint8"),l.numToUint8=S},"m/NO":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var S;(function(h){h[h.Connecting=0]="Connecting",h[h.Started=1]="Started",h[h.Stopped=2]="Stopped"})(S=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=S},m0Av:function(j,l,f){"use strict";(function(S){f.d(l,"a",function(){return h});function h(u,m){var a;typeof m<"u"?a=m:typeof window<"u"?a=window:typeof self<"u"?a=self:a=S;var s=typeof a.document<"u"&&a.document.attachEvent;if(!s){var i=function(){var M=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||function(D){return a.setTimeout(D,20)};return function(D){return M(D)}}(),e=function(){var M=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame||a.clearTimeout;return function(D){return M(D)}}(),t=o(function(D){var J=D.__resizeTriggers__,q=J.firstElementChild,$=J.lastElementChild,de=q.firstElementChild;$.scrollLeft=$.scrollWidth,$.scrollTop=$.scrollHeight,de.style.width=q.offsetWidth+1+"px",de.style.height=q.offsetHeight+1+"px",q.scrollLeft=q.scrollWidth,q.scrollTop=q.scrollHeight},"resetTriggers"),n=o(function(D){return D.offsetWidth!=D.__resizeLast__.width||D.offsetHeight!=D.__resizeLast__.height},"checkTriggers"),r=o(function(D){if(!(D.target.className&&typeof D.target.className.indexOf=="function"&&D.target.className.indexOf("contract-trigger")<0&&D.target.className.indexOf("expand-trigger")<0)){var J=this;t(this),this.__resizeRAF__&&e(this.__resizeRAF__),this.__resizeRAF__=i(function(){n(J)&&(J.__resizeLast__.width=J.offsetWidth,J.__resizeLast__.height=J.offsetHeight,J.__resizeListeners__.forEach(function(q){q.call(J,D)}))})}},"scrollListener"),c=!1,p="",g="animationstart",d="Webkit Moz O ms".split(" "),y="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),E="";{var w=a.document.createElement("fakeelement");if(w.style.animationName!==void 0&&(c=!0),c===!1){for(var k=0;k<d.length;k++)if(w.style[d[k]+"AnimationName"]!==void 0){E=d[k],p="-"+E.toLowerCase()+"-",g=y[k],c=!0;break}}}var V="resizeanim",F="@"+p+"keyframes "+V+" { from { opacity: 0; } to { opacity: 0; } } ",N=p+"animation: 1ms "+V+"; "}var P=o(function(D){if(!D.getElementById("detectElementResize")){var J=(F||"")+".resize-triggers { "+(N||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',q=D.head||D.getElementsByTagName("head")[0],$=D.createElement("style");$.id="detectElementResize",$.type="text/css",u!=null&&$.setAttribute("nonce",u),$.styleSheet?$.styleSheet.cssText=J:$.appendChild(D.createTextNode(J)),q.appendChild($)}},"createStyles"),x=o(function(D,J){if(s)D.attachEvent("onresize",J);else{if(!D.__resizeTriggers__){var q=D.ownerDocument,$=a.getComputedStyle(D);$&&$.position=="static"&&(D.style.position="relative"),P(q),D.__resizeLast__={},D.__resizeListeners__=[],(D.__resizeTriggers__=q.createElement("div")).className="resize-triggers";var de='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var Ee=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:o(function(){return de},"createHTML")});D.__resizeTriggers__.innerHTML=Ee.createHTML("")}else D.__resizeTriggers__.innerHTML=de;D.appendChild(D.__resizeTriggers__),t(D),D.addEventListener("scroll",r,!0),g&&(D.__resizeTriggers__.__animationListener__=o(function(ye){ye.animationName==V&&t(D)},"animationListener"),D.__resizeTriggers__.addEventListener(g,D.__resizeTriggers__.__animationListener__))}D.__resizeListeners__.push(J)}},"addResizeListener"),O=o(function(D,J){if(s)D.detachEvent("onresize",J);else if(D.__resizeListeners__.splice(D.__resizeListeners__.indexOf(J),1),!D.__resizeListeners__.length){D.removeEventListener("scroll",r,!0),D.__resizeTriggers__.__animationListener__&&(D.__resizeTriggers__.removeEventListener(g,D.__resizeTriggers__.__animationListener__),D.__resizeTriggers__.__animationListener__=null);try{D.__resizeTriggers__=!D.removeChild(D.__resizeTriggers__)}catch{}}},"removeResizeListener");return{addResizeListener:x,removeResizeListener:O}}o(h,"createDetectElementResize")}).call(this,f("yLpj"))},mYvd:function(j,l,f){"use strict";f.r(l),f.d(l,"Deflate",function(){return Fa}),f.d(l,"Inflate",function(){return pr}),f.d(l,"constants",function(){return Wa}),f.d(l,"default",function(){return ja}),f.d(l,"deflate",function(){return Va}),f.d(l,"deflateRaw",function(){return Ua}),f.d(l,"gzip",function(){return Cl}),f.d(l,"inflate",function(){return As}),f.d(l,"inflateRaw",function(){return Ha}),f.d(l,"ungzip",function(){return za});/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const S=4,h=0,u=1,m=2;function a(C){let U=C.length;for(;--U>=0;)C[U]=0}o(a,"zero$1");const s=0,i=1,e=2,t=3,n=258,r=29,c=256,p=c+1+r,g=30,d=19,y=2*p+1,E=15,w=16,k=7,V=256,F=16,N=17,P=18,x=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),O=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J=512,q=new Array((p+2)*2);a(q);const $=new Array(g*2);a($);const de=new Array(J);a(de);const Ee=new Array(n-t+1);a(Ee);const _e=new Array(r);a(_e);const ye=new Array(g);a(ye);function Be(C,U,R,Y,G){this.static_tree=C,this.extra_bits=U,this.extra_base=R,this.elems=Y,this.max_length=G,this.has_stree=C&&C.length}o(Be,"StaticTreeDesc");let pt,Ve,gt;function dt(C,U){this.dyn_tree=C,this.max_code=0,this.stat_desc=U}o(dt,"TreeDesc");const Je=o(C=>C<256?de[C]:de[256+(C>>>7)],"d_code"),_t=o((C,U)=>{C.pending_buf[C.pending++]=U&255,C.pending_buf[C.pending++]=U>>>8&255},"put_short"),ot=o((C,U,R)=>{C.bi_valid>w-R?(C.bi_buf|=U<<C.bi_valid&65535,_t(C,C.bi_buf),C.bi_buf=U>>w-C.bi_valid,C.bi_valid+=R-w):(C.bi_buf|=U<<C.bi_valid&65535,C.bi_valid+=R)},"send_bits"),Et=o((C,U,R)=>{ot(C,R[U*2],R[U*2+1])},"send_code"),Mt=o((C,U)=>{let R=0;do R|=C&1,C>>>=1,R<<=1;while(--U>0);return R>>>1},"bi_reverse"),ze=o(C=>{C.bi_valid===16?(_t(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):C.bi_valid>=8&&(C.pending_buf[C.pending++]=C.bi_buf&255,C.bi_buf>>=8,C.bi_valid-=8)},"bi_flush"),$t=o((C,U)=>{const R=U.dyn_tree,Y=U.max_code,G=U.stat_desc.static_tree,re=U.stat_desc.has_stree,Ce=U.stat_desc.extra_bits,ge=U.stat_desc.extra_base,et=U.stat_desc.max_length;let he,Te,tn,Qe,Ne,It,Wn=0;for(Qe=0;Qe<=E;Qe++)C.bl_count[Qe]=0;for(R[C.heap[C.heap_max]*2+1]=0,he=C.heap_max+1;he<y;he++)Te=C.heap[he],Qe=R[R[Te*2+1]*2+1]+1,Qe>et&&(Qe=et,Wn++),R[Te*2+1]=Qe,!(Te>Y)&&(C.bl_count[Qe]++,Ne=0,Te>=ge&&(Ne=Ce[Te-ge]),It=R[Te*2],C.opt_len+=It*(Qe+Ne),re&&(C.static_len+=It*(G[Te*2+1]+Ne)));if(Wn!==0){do{for(Qe=et-1;C.bl_count[Qe]===0;)Qe--;C.bl_count[Qe]--,C.bl_count[Qe+1]+=2,C.bl_count[et]--,Wn-=2}while(Wn>0);for(Qe=et;Qe!==0;Qe--)for(Te=C.bl_count[Qe];Te!==0;)tn=C.heap[--he],!(tn>Y)&&(R[tn*2+1]!==Qe&&(C.opt_len+=(Qe-R[tn*2+1])*R[tn*2],R[tn*2+1]=Qe),Te--)}},"gen_bitlen"),Un=o((C,U,R)=>{const Y=new Array(E+1);let G=0,re,Ce;for(re=1;re<=E;re++)Y[re]=G=G+R[re-1]<<1;for(Ce=0;Ce<=U;Ce++){let ge=C[Ce*2+1];ge!==0&&(C[Ce*2]=Mt(Y[ge]++,ge))}},"gen_codes"),ni=o(()=>{let C,U,R,Y,G;const re=new Array(E+1);for(R=0,Y=0;Y<r-1;Y++)for(_e[Y]=R,C=0;C<1<<x[Y];C++)Ee[R++]=Y;for(Ee[R-1]=Y,G=0,Y=0;Y<16;Y++)for(ye[Y]=G,C=0;C<1<<O[Y];C++)de[G++]=Y;for(G>>=7;Y<g;Y++)for(ye[Y]=G<<7,C=0;C<1<<O[Y]-7;C++)de[256+G++]=Y;for(U=0;U<=E;U++)re[U]=0;for(C=0;C<=143;)q[C*2+1]=8,C++,re[8]++;for(;C<=255;)q[C*2+1]=9,C++,re[9]++;for(;C<=279;)q[C*2+1]=7,C++,re[7]++;for(;C<=287;)q[C*2+1]=8,C++,re[8]++;for(Un(q,p+1,re),C=0;C<g;C++)$[C*2+1]=5,$[C*2]=Mt(C,5);pt=new Be(q,x,c+1,p,E),Ve=new Be($,O,0,g,E),gt=new Be(new Array(0),M,0,d,k)},"tr_static_init"),an=o(C=>{let U;for(U=0;U<p;U++)C.dyn_ltree[U*2]=0;for(U=0;U<g;U++)C.dyn_dtree[U*2]=0;for(U=0;U<d;U++)C.bl_tree[U*2]=0;C.dyn_ltree[V*2]=1,C.opt_len=C.static_len=0,C.last_lit=C.matches=0},"init_block"),Gn=o(C=>{C.bi_valid>8?_t(C,C.bi_buf):C.bi_valid>0&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0},"bi_windup"),si=o((C,U,R,Y)=>{Gn(C),Y&&(_t(C,R),_t(C,~R)),C.pending_buf.set(C.window.subarray(U,U+R),C.pending),C.pending+=R},"copy_block"),ri=o((C,U,R,Y)=>{const G=U*2,re=R*2;return C[G]<C[re]||C[G]===C[re]&&Y[U]<=Y[R]},"smaller"),On=o((C,U,R)=>{const Y=C.heap[R];let G=R<<1;for(;G<=C.heap_len&&(G<C.heap_len&&ri(U,C.heap[G+1],C.heap[G],C.depth)&&G++,!ri(U,Y,C.heap[G],C.depth));)C.heap[R]=C.heap[G],R=G,G<<=1;C.heap[R]=Y},"pqdownheap"),Gi=o((C,U,R)=>{let Y,G,re=0,Ce,ge;if(C.last_lit!==0)do Y=C.pending_buf[C.d_buf+re*2]<<8|C.pending_buf[C.d_buf+re*2+1],G=C.pending_buf[C.l_buf+re],re++,Y===0?Et(C,G,U):(Ce=Ee[G],Et(C,Ce+c+1,U),ge=x[Ce],ge!==0&&(G-=_e[Ce],ot(C,G,ge)),Y--,Ce=Je(Y),Et(C,Ce,R),ge=O[Ce],ge!==0&&(Y-=ye[Ce],ot(C,Y,ge)));while(re<C.last_lit);Et(C,V,U)},"compress_block"),ui=o((C,U)=>{const R=U.dyn_tree,Y=U.stat_desc.static_tree,G=U.stat_desc.has_stree,re=U.stat_desc.elems;let Ce,ge,et=-1,he;for(C.heap_len=0,C.heap_max=y,Ce=0;Ce<re;Ce++)R[Ce*2]!==0?(C.heap[++C.heap_len]=et=Ce,C.depth[Ce]=0):R[Ce*2+1]=0;for(;C.heap_len<2;)he=C.heap[++C.heap_len]=et<2?++et:0,R[he*2]=1,C.depth[he]=0,C.opt_len--,G&&(C.static_len-=Y[he*2+1]);for(U.max_code=et,Ce=C.heap_len>>1;Ce>=1;Ce--)On(C,R,Ce);he=re;do Ce=C.heap[1],C.heap[1]=C.heap[C.heap_len--],On(C,R,1),ge=C.heap[1],C.heap[--C.heap_max]=Ce,C.heap[--C.heap_max]=ge,R[he*2]=R[Ce*2]+R[ge*2],C.depth[he]=(C.depth[Ce]>=C.depth[ge]?C.depth[Ce]:C.depth[ge])+1,R[Ce*2+1]=R[ge*2+1]=he,C.heap[1]=he++,On(C,R,1);while(C.heap_len>=2);C.heap[--C.heap_max]=C.heap[1],$t(C,U),Un(R,et,C.bl_count)},"build_tree"),Fi=o((C,U,R)=>{let Y,G=-1,re,Ce=U[0*2+1],ge=0,et=7,he=4;for(Ce===0&&(et=138,he=3),U[(R+1)*2+1]=65535,Y=0;Y<=R;Y++)re=Ce,Ce=U[(Y+1)*2+1],!(++ge<et&&re===Ce)&&(ge<he?C.bl_tree[re*2]+=ge:re!==0?(re!==G&&C.bl_tree[re*2]++,C.bl_tree[F*2]++):ge<=10?C.bl_tree[N*2]++:C.bl_tree[P*2]++,ge=0,G=re,Ce===0?(et=138,he=3):re===Ce?(et=6,he=3):(et=7,he=4))},"scan_tree"),Hi=o((C,U,R)=>{let Y,G=-1,re,Ce=U[0*2+1],ge=0,et=7,he=4;for(Ce===0&&(et=138,he=3),Y=0;Y<=R;Y++)if(re=Ce,Ce=U[(Y+1)*2+1],!(++ge<et&&re===Ce)){if(ge<he)do Et(C,re,C.bl_tree);while(--ge!==0);else re!==0?(re!==G&&(Et(C,re,C.bl_tree),ge--),Et(C,F,C.bl_tree),ot(C,ge-3,2)):ge<=10?(Et(C,N,C.bl_tree),ot(C,ge-3,3)):(Et(C,P,C.bl_tree),ot(C,ge-11,7));ge=0,G=re,Ce===0?(et=138,he=3):re===Ce?(et=6,he=3):(et=7,he=4)}},"send_tree"),Sn=o(C=>{let U;for(Fi(C,C.dyn_ltree,C.l_desc.max_code),Fi(C,C.dyn_dtree,C.d_desc.max_code),ui(C,C.bl_desc),U=d-1;U>=3&&C.bl_tree[D[U]*2+1]===0;U--);return C.opt_len+=3*(U+1)+5+5+4,U},"build_bl_tree"),un=o((C,U,R,Y)=>{let G;for(ot(C,U-257,5),ot(C,R-1,5),ot(C,Y-4,4),G=0;G<Y;G++)ot(C,C.bl_tree[D[G]*2+1],3);Hi(C,C.dyn_ltree,U-1),Hi(C,C.dyn_dtree,R-1)},"send_all_trees"),bn=o(C=>{let U=4093624447,R;for(R=0;R<=31;R++,U>>>=1)if(U&1&&C.dyn_ltree[R*2]!==0)return h;if(C.dyn_ltree[9*2]!==0||C.dyn_ltree[10*2]!==0||C.dyn_ltree[13*2]!==0)return u;for(R=32;R<c;R++)if(C.dyn_ltree[R*2]!==0)return u;return h},"detect_data_type");let Ot=!1;const En=o(C=>{Ot||(ni(),Ot=!0),C.l_desc=new dt(C.dyn_ltree,pt),C.d_desc=new dt(C.dyn_dtree,Ve),C.bl_desc=new dt(C.bl_tree,gt),C.bi_buf=0,C.bi_valid=0,an(C)},"_tr_init$1"),Lt=o((C,U,R,Y)=>{ot(C,(s<<1)+(Y?1:0),3),si(C,U,R,!0)},"_tr_stored_block$1"),Hn=o(C=>{ot(C,i<<1,3),Et(C,V,q),ze(C)},"_tr_align$1"),Ji=o((C,U,R,Y)=>{let G,re,Ce=0;C.level>0?(C.strm.data_type===m&&(C.strm.data_type=bn(C)),ui(C,C.l_desc),ui(C,C.d_desc),Ce=Sn(C),G=C.opt_len+3+7>>>3,re=C.static_len+3+7>>>3,re<=G&&(G=re)):G=re=R+5,R+4<=G&&U!==-1?Lt(C,U,R,Y):C.strategy===S||re===G?(ot(C,(i<<1)+(Y?1:0),3),Gi(C,q,$)):(ot(C,(e<<1)+(Y?1:0),3),un(C,C.l_desc.max_code+1,C.d_desc.max_code+1,Ce+1),Gi(C,C.dyn_ltree,C.dyn_dtree)),an(C),Y&&Gn(C)},"_tr_flush_block$1"),$n=o((C,U,R)=>(C.pending_buf[C.d_buf+C.last_lit*2]=U>>>8&255,C.pending_buf[C.d_buf+C.last_lit*2+1]=U&255,C.pending_buf[C.l_buf+C.last_lit]=R&255,C.last_lit++,U===0?C.dyn_ltree[R*2]++:(C.matches++,U--,C.dyn_ltree[(Ee[R]+c+1)*2]++,C.dyn_dtree[Je(U)*2]++),C.last_lit===C.lit_bufsize-1),"_tr_tally$1");var Ti=En,Ir=Lt,er=Ji,cr=$n,gi=Hn,Yi={_tr_init:Ti,_tr_stored_block:Ir,_tr_flush_block:er,_tr_tally:cr,_tr_align:gi},jt=o((C,U,R,Y)=>{let G=C&65535|0,re=C>>>16&65535|0,Ce=0;for(;R!==0;){Ce=R>2e3?2e3:R,R-=Ce;do G=G+U[Y++]|0,re=re+G|0;while(--Ce);G%=65521,re%=65521}return G|re<<16|0},"adler32");const pe=o(()=>{let C,U=[];for(var R=0;R<256;R++){C=R;for(var Y=0;Y<8;Y++)C=C&1?3988292384^C>>>1:C>>>1;U[R]=C}return U},"makeTable"),Re=new Uint32Array(pe());var qe=o((C,U,R,Y)=>{const G=Re,re=Y+R;C^=-1;for(let Ce=Y;Ce<re;Ce++)C=C>>>8^G[(C^U[Ce])&255];return C^-1},"crc32"),vt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},lt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Nt,_tr_stored_block:ln,_tr_flush_block:fn,_tr_tally:Bt,_tr_align:Ci}=Yi,{Z_NO_FLUSH:Si,Z_PARTIAL_FLUSH:gr,Z_FULL_FLUSH:tr,Z_FINISH:ai,Z_BLOCK:wr,Z_OK:li,Z_STREAM_END:lr,Z_STREAM_ERROR:Zn,Z_DATA_ERROR:Or,Z_BUF_ERROR:Qi,Z_DEFAULT_COMPRESSION:zr,Z_FILTERED:_r,Z_HUFFMAN_ONLY:Zi,Z_RLE:ro,Z_FIXED:yt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:dn,Z_DEFLATED:Kt}=lt,wn=9,Jn=15,z=8,ue=29,Le=256+1+ue,Ye=30,St=19,Ct=2*Le+1,Tt=15,Ke=3,Pt=258,Dt=Pt+Ke+1,Rn=32,pn=42,zn=69,di=73,Ri=91,Pi=103,fi=113,hi=666,Cn=1,zi=2,Vi=3,Ui=4,Rr=3,Ii=o((C,U)=>(C.msg=vt[U],U),"err"),Sr=o(C=>(C<<1)-(C>4?9:0),"rank"),Xn=o(C=>{let U=C.length;for(;--U>=0;)C[U]=0},"zero");let pi=o((C,U,R)=>(U<<C.hash_shift^R)&C.hash_mask,"HASH_ZLIB");const _i=o(C=>{const U=C.state;let R=U.pending;R>C.avail_out&&(R=C.avail_out),R!==0&&(C.output.set(U.pending_buf.subarray(U.pending_out,U.pending_out+R),C.next_out),C.next_out+=R,U.pending_out+=R,C.total_out+=R,C.avail_out-=R,U.pending-=R,U.pending===0&&(U.pending_out=0))},"flush_pending"),Yn=o((C,U)=>{fn(C,C.block_start>=0?C.block_start:-1,C.strstart-C.block_start,U),C.block_start=C.strstart,_i(C.strm)},"flush_block_only"),Ht=o((C,U)=>{C.pending_buf[C.pending++]=U},"put_byte"),nr=o((C,U)=>{C.pending_buf[C.pending++]=U>>>8&255,C.pending_buf[C.pending++]=U&255},"putShortMSB"),Fs=o((C,U,R,Y)=>{let G=C.avail_in;return G>Y&&(G=Y),G===0?0:(C.avail_in-=G,U.set(C.input.subarray(C.next_in,C.next_in+G),R),C.state.wrap===1?C.adler=jt(C.adler,U,G,R):C.state.wrap===2&&(C.adler=qe(C.adler,U,G,R)),C.next_in+=G,C.total_in+=G,G)},"read_buf"),qr=o((C,U)=>{let R=C.max_chain_length,Y=C.strstart,G,re,Ce=C.prev_length,ge=C.nice_match;const et=C.strstart>C.w_size-Dt?C.strstart-(C.w_size-Dt):0,he=C.window,Te=C.w_mask,tn=C.prev,Qe=C.strstart+Pt;let Ne=he[Y+Ce-1],It=he[Y+Ce];C.prev_length>=C.good_match&&(R>>=2),ge>C.lookahead&&(ge=C.lookahead);do if(G=U,!(he[G+Ce]!==It||he[G+Ce-1]!==Ne||he[G]!==he[Y]||he[++G]!==he[Y+1])){Y+=2,G++;do;while(he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&he[++Y]===he[++G]&&Y<Qe);if(re=Pt-(Qe-Y),Y=Qe-Pt,re>Ce){if(C.match_start=U,Ce=re,re>=ge)break;Ne=he[Y+Ce-1],It=he[Y+Ce]}}while((U=tn[U&Te])>et&&--R!==0);return Ce<=C.lookahead?Ce:C.lookahead},"longest_match"),dr=o(C=>{const U=C.w_size;let R,Y,G,re,Ce;do{if(re=C.window_size-C.lookahead-C.strstart,C.strstart>=U+(U-Dt)){C.window.set(C.window.subarray(U,U+U),0),C.match_start-=U,C.strstart-=U,C.block_start-=U,Y=C.hash_size,R=Y;do G=C.head[--R],C.head[R]=G>=U?G-U:0;while(--Y);Y=U,R=Y;do G=C.prev[--R],C.prev[R]=G>=U?G-U:0;while(--Y);re+=U}if(C.strm.avail_in===0)break;if(Y=Fs(C.strm,C.window,C.strstart+C.lookahead,re),C.lookahead+=Y,C.lookahead+C.insert>=Ke)for(Ce=C.strstart-C.insert,C.ins_h=C.window[Ce],C.ins_h=pi(C,C.ins_h,C.window[Ce+1]);C.insert&&(C.ins_h=pi(C,C.ins_h,C.window[Ce+Ke-1]),C.prev[Ce&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=Ce,Ce++,C.insert--,!(C.lookahead+C.insert<Ke)););}while(C.lookahead<Dt&&C.strm.avail_in!==0)},"fill_window"),eo=o((C,U)=>{let R=65535;for(R>C.pending_buf_size-5&&(R=C.pending_buf_size-5);;){if(C.lookahead<=1){if(dr(C),C.lookahead===0&&U===Si)return Cn;if(C.lookahead===0)break}C.strstart+=C.lookahead,C.lookahead=0;const Y=C.block_start+R;if((C.strstart===0||C.strstart>=Y)&&(C.lookahead=C.strstart-Y,C.strstart=Y,Yn(C,!1),C.strm.avail_out===0)||C.strstart-C.block_start>=C.w_size-Dt&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=0,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):(C.strstart>C.block_start&&(Yn(C,!1),C.strm.avail_out===0),Cn)},"deflate_stored"),to=o((C,U)=>{let R,Y;for(;;){if(C.lookahead<Dt){if(dr(C),C.lookahead<Dt&&U===Si)return Cn;if(C.lookahead===0)break}if(R=0,C.lookahead>=Ke&&(C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),R!==0&&C.strstart-R<=C.w_size-Dt&&(C.match_length=qr(C,R)),C.match_length>=Ke)if(Y=Bt(C,C.strstart-C.match_start,C.match_length-Ke),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=Ke){C.match_length--;do C.strstart++,C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart;while(--C.match_length!==0);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=pi(C,C.ins_h,C.window[C.strstart+1]);else Y=Bt(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(Y&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=C.strstart<Ke-1?C.strstart:Ke-1,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_fast"),ur=o((C,U)=>{let R,Y,G;for(;;){if(C.lookahead<Dt){if(dr(C),C.lookahead<Dt&&U===Si)return Cn;if(C.lookahead===0)break}if(R=0,C.lookahead>=Ke&&(C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=Ke-1,R!==0&&C.prev_length<C.max_lazy_match&&C.strstart-R<=C.w_size-Dt&&(C.match_length=qr(C,R),C.match_length<=5&&(C.strategy===_r||C.match_length===Ke&&C.strstart-C.match_start>4096)&&(C.match_length=Ke-1)),C.prev_length>=Ke&&C.match_length<=C.prev_length){G=C.strstart+C.lookahead-Ke,Y=Bt(C,C.strstart-1-C.prev_match,C.prev_length-Ke),C.lookahead-=C.prev_length-1,C.prev_length-=2;do++C.strstart<=G&&(C.ins_h=pi(C,C.ins_h,C.window[C.strstart+Ke-1]),R=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart);while(--C.prev_length!==0);if(C.match_available=0,C.match_length=Ke-1,C.strstart++,Y&&(Yn(C,!1),C.strm.avail_out===0))return Cn}else if(C.match_available){if(Y=Bt(C,0,C.window[C.strstart-1]),Y&&Yn(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return Cn}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(Y=Bt(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<Ke-1?C.strstart:Ke-1,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_slow"),Vs=o((C,U)=>{let R,Y,G,re;const Ce=C.window;for(;;){if(C.lookahead<=Pt){if(dr(C),C.lookahead<=Pt&&U===Si)return Cn;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=Ke&&C.strstart>0&&(G=C.strstart-1,Y=Ce[G],Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G])){re=C.strstart+Pt;do;while(Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&Y===Ce[++G]&&G<re);C.match_length=Pt-(re-G),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=Ke?(R=Bt(C,1,C.match_length-Ke),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(R=Bt(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),R&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=0,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_rle"),Us=o((C,U)=>{let R;for(;;){if(C.lookahead===0&&(dr(C),C.lookahead===0)){if(U===Si)return Cn;break}if(C.match_length=0,R=Bt(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,R&&(Yn(C,!1),C.strm.avail_out===0))return Cn}return C.insert=0,U===ai?(Yn(C,!0),C.strm.avail_out===0?Vi:Ui):C.last_lit&&(Yn(C,!1),C.strm.avail_out===0)?Cn:zi},"deflate_huff");function Li(C,U,R,Y,G){this.good_length=C,this.max_lazy=U,this.nice_length=R,this.max_chain=Y,this.func=G}o(Li,"Config");const kr=[new Li(0,0,0,0,eo),new Li(4,4,8,4,to),new Li(4,5,16,8,to),new Li(4,6,32,32,to),new Li(4,4,16,16,ur),new Li(8,16,32,32,ur),new Li(8,16,128,128,ur),new Li(8,32,128,256,ur),new Li(32,128,258,1024,ur),new Li(32,258,258,4096,ur)],xo=o(C=>{C.window_size=2*C.w_size,Xn(C.head),C.max_lazy_match=kr[C.level].max_lazy,C.good_match=kr[C.level].good_length,C.nice_match=kr[C.level].nice_length,C.max_chain_length=kr[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=Ke-1,C.match_available=0,C.ins_h=0},"lm_init");function Hs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Kt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ct*2),this.dyn_dtree=new Uint16Array((2*Ye+1)*2),this.bl_tree=new Uint16Array((2*St+1)*2),Xn(this.dyn_ltree),Xn(this.dyn_dtree),Xn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Tt+1),this.heap=new Uint16Array(2*Le+1),Xn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Le+1),Xn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}o(Hs,"DeflateState");const Jr=o(C=>{if(!C||!C.state)return Ii(C,Zn);C.total_in=C.total_out=0,C.data_type=dn;const U=C.state;return U.pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?pn:fi,C.adler=U.wrap===2?0:1,U.last_flush=Si,Nt(U),li},"deflateResetKeep"),bo=o(C=>{const U=Jr(C);return U===li&&xo(C.state),U},"deflateReset"),uo=o((C,U)=>!C||!C.state||C.state.wrap!==2?Zn:(C.state.gzhead=U,li),"deflateSetHeader"),Bo=o((C,U,R,Y,G,re)=>{if(!C)return Zn;let Ce=1;if(U===zr&&(U=6),Y<0?(Ce=0,Y=-Y):Y>15&&(Ce=2,Y-=16),G<1||G>wn||R!==Kt||Y<8||Y>15||U<0||U>9||re<0||re>yt)return Ii(C,Zn);Y===8&&(Y=9);const ge=new Hs;return C.state=ge,ge.strm=C,ge.wrap=Ce,ge.gzhead=null,ge.w_bits=Y,ge.w_size=1<<ge.w_bits,ge.w_mask=ge.w_size-1,ge.hash_bits=G+7,ge.hash_size=1<<ge.hash_bits,ge.hash_mask=ge.hash_size-1,ge.hash_shift=~~((ge.hash_bits+Ke-1)/Ke),ge.window=new Uint8Array(ge.w_size*2),ge.head=new Uint16Array(ge.hash_size),ge.prev=new Uint16Array(ge.w_size),ge.lit_bufsize=1<<G+6,ge.pending_buf_size=ge.lit_bufsize*4,ge.pending_buf=new Uint8Array(ge.pending_buf_size),ge.d_buf=1*ge.lit_bufsize,ge.l_buf=(1+2)*ge.lit_bufsize,ge.level=U,ge.strategy=re,ge.method=R,bo(C)},"deflateInit2"),ys=o((C,U)=>Bo(C,U,Kt,Jn,z,st),"deflateInit"),bs=o((C,U)=>{let R,Y;if(!C||!C.state||U>wr||U<0)return C?Ii(C,Zn):Zn;const G=C.state;if(!C.output||!C.input&&C.avail_in!==0||G.status===hi&&U!==ai)return Ii(C,C.avail_out===0?Qi:Zn);G.strm=C;const re=G.last_flush;if(G.last_flush=U,G.status===pn)if(G.wrap===2)C.adler=0,Ht(G,31),Ht(G,139),Ht(G,8),G.gzhead?(Ht(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),Ht(G,G.gzhead.time&255),Ht(G,G.gzhead.time>>8&255),Ht(G,G.gzhead.time>>16&255),Ht(G,G.gzhead.time>>24&255),Ht(G,G.level===9?2:G.strategy>=Zi||G.level<2?4:0),Ht(G,G.gzhead.os&255),G.gzhead.extra&&G.gzhead.extra.length&&(Ht(G,G.gzhead.extra.length&255),Ht(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(C.adler=qe(C.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=zn):(Ht(G,0),Ht(G,0),Ht(G,0),Ht(G,0),Ht(G,0),Ht(G,G.level===9?2:G.strategy>=Zi||G.level<2?4:0),Ht(G,Rr),G.status=fi);else{let Ce=Kt+(G.w_bits-8<<4)<<8,ge=-1;G.strategy>=Zi||G.level<2?ge=0:G.level<6?ge=1:G.level===6?ge=2:ge=3,Ce|=ge<<6,G.strstart!==0&&(Ce|=Rn),Ce+=31-Ce%31,G.status=fi,nr(G,Ce),G.strstart!==0&&(nr(G,C.adler>>>16),nr(G,C.adler&65535)),C.adler=1}if(G.status===zn)if(G.gzhead.extra){for(R=G.pending;G.gzindex<(G.gzhead.extra.length&65535)&&!(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),_i(C),R=G.pending,G.pending===G.pending_buf_size));)Ht(G,G.gzhead.extra[G.gzindex]&255),G.gzindex++;G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=di)}else G.status=di;if(G.status===di)if(G.gzhead.name){R=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),_i(C),R=G.pending,G.pending===G.pending_buf_size)){Y=1;break}G.gzindex<G.gzhead.name.length?Y=G.gzhead.name.charCodeAt(G.gzindex++)&255:Y=0,Ht(G,Y)}while(Y!==0);G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),Y===0&&(G.gzindex=0,G.status=Ri)}else G.status=Ri;if(G.status===Ri)if(G.gzhead.comment){R=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),_i(C),R=G.pending,G.pending===G.pending_buf_size)){Y=1;break}G.gzindex<G.gzhead.comment.length?Y=G.gzhead.comment.charCodeAt(G.gzindex++)&255:Y=0,Ht(G,Y)}while(Y!==0);G.gzhead.hcrc&&G.pending>R&&(C.adler=qe(C.adler,G.pending_buf,G.pending-R,R)),Y===0&&(G.status=Pi)}else G.status=Pi;if(G.status===Pi&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&_i(C),G.pending+2<=G.pending_buf_size&&(Ht(G,C.adler&255),Ht(G,C.adler>>8&255),C.adler=0,G.status=fi)):G.status=fi),G.pending!==0){if(_i(C),C.avail_out===0)return G.last_flush=-1,li}else if(C.avail_in===0&&Sr(U)<=Sr(re)&&U!==ai)return Ii(C,Qi);if(G.status===hi&&C.avail_in!==0)return Ii(C,Qi);if(C.avail_in!==0||G.lookahead!==0||U!==Si&&G.status!==hi){let Ce=G.strategy===Zi?Us(G,U):G.strategy===ro?Vs(G,U):kr[G.level].func(G,U);if((Ce===Vi||Ce===Ui)&&(G.status=hi),Ce===Cn||Ce===Vi)return C.avail_out===0&&(G.last_flush=-1),li;if(Ce===zi&&(U===gr?Ci(G):U!==wr&&(ln(G,0,0,!1),U===tr&&(Xn(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),_i(C),C.avail_out===0))return G.last_flush=-1,li}return U!==ai?li:G.wrap<=0?lr:(G.wrap===2?(Ht(G,C.adler&255),Ht(G,C.adler>>8&255),Ht(G,C.adler>>16&255),Ht(G,C.adler>>24&255),Ht(G,C.total_in&255),Ht(G,C.total_in>>8&255),Ht(G,C.total_in>>16&255),Ht(G,C.total_in>>24&255)):(nr(G,C.adler>>>16),nr(G,C.adler&65535)),_i(C),G.wrap>0&&(G.wrap=-G.wrap),G.pending!==0?li:lr)},"deflate$2"),Zo=o(C=>{if(!C||!C.state)return Zn;const U=C.state.status;return U!==pn&&U!==zn&&U!==di&&U!==Ri&&U!==Pi&&U!==fi&&U!==hi?Ii(C,Zn):(C.state=null,U===fi?Ii(C,Or):li)},"deflateEnd"),Cs=o((C,U)=>{let R=U.length;if(!C||!C.state)return Zn;const Y=C.state,G=Y.wrap;if(G===2||G===1&&Y.status!==pn||Y.lookahead)return Zn;if(G===1&&(C.adler=jt(C.adler,U,R,0)),Y.wrap=0,R>=Y.w_size){G===0&&(Xn(Y.head),Y.strstart=0,Y.block_start=0,Y.insert=0);let et=new Uint8Array(Y.w_size);et.set(U.subarray(R-Y.w_size,R),0),U=et,R=Y.w_size}const re=C.avail_in,Ce=C.next_in,ge=C.input;for(C.avail_in=R,C.next_in=0,C.input=U,dr(Y);Y.lookahead>=Ke;){let et=Y.strstart,he=Y.lookahead-(Ke-1);do Y.ins_h=pi(Y,Y.ins_h,Y.window[et+Ke-1]),Y.prev[et&Y.w_mask]=Y.head[Y.ins_h],Y.head[Y.ins_h]=et,et++;while(--he);Y.strstart=et,Y.lookahead=Ke-1,dr(Y)}return Y.strstart+=Y.lookahead,Y.block_start=Y.strstart,Y.insert=Y.lookahead,Y.lookahead=0,Y.match_length=Y.prev_length=Ke-1,Y.match_available=0,C.next_in=Ce,C.input=ge,C.avail_in=re,Y.wrap=G,li},"deflateSetDictionary");var Es=ys,fo=Bo,no=bo,oo=Jr,ho=uo,Co=bs,Eo=Zo,Fo=Cs,qo="pako deflate (from Nodeca project)",vr={deflateInit:Es,deflateInit2:fo,deflateReset:no,deflateResetKeep:oo,deflateSetHeader:ho,deflate:Co,deflateEnd:Eo,deflateSetDictionary:Fo,deflateInfo:qo};const es=o((C,U)=>Object.prototype.hasOwnProperty.call(C,U),"_has");var Ts=o(function(C){const U=Array.prototype.slice.call(arguments,1);for(;U.length;){const R=U.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(const Y in R)es(R,Y)&&(C[Y]=R[Y])}}return C},"assign"),ts=o(C=>{let U=0;for(let Y=0,G=C.length;Y<G;Y++)U+=C[Y].length;const R=new Uint8Array(U);for(let Y=0,G=0,re=C.length;Y<re;Y++){let Ce=C[Y];R.set(Ce,G),G+=Ce.length}return R},"flattenChunks"),Yr={assign:Ts,flattenChunks:ts};let Vo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Vo=!1}const Dr=new Uint8Array(256);for(let C=0;C<256;C++)Dr[C]=C>=252?6:C>=248?5:C>=240?4:C>=224?3:C>=192?2:1;Dr[254]=Dr[254]=1;var po=o(C=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(C);let U,R,Y,G,re,Ce=C.length,ge=0;for(G=0;G<Ce;G++)R=C.charCodeAt(G),(R&64512)===55296&&G+1<Ce&&(Y=C.charCodeAt(G+1),(Y&64512)===56320&&(R=65536+(R-55296<<10)+(Y-56320),G++)),ge+=R<128?1:R<2048?2:R<65536?3:4;for(U=new Uint8Array(ge),re=0,G=0;re<ge;G++)R=C.charCodeAt(G),(R&64512)===55296&&G+1<Ce&&(Y=C.charCodeAt(G+1),(Y&64512)===56320&&(R=65536+(R-55296<<10)+(Y-56320),G++)),R<128?U[re++]=R:R<2048?(U[re++]=192|R>>>6,U[re++]=128|R&63):R<65536?(U[re++]=224|R>>>12,U[re++]=128|R>>>6&63,U[re++]=128|R&63):(U[re++]=240|R>>>18,U[re++]=128|R>>>12&63,U[re++]=128|R>>>6&63,U[re++]=128|R&63);return U},"string2buf");const mo=o((C,U)=>{if(U<65534&&C.subarray&&Vo)return String.fromCharCode.apply(null,C.length===U?C:C.subarray(0,U));let R="";for(let Y=0;Y<U;Y++)R+=String.fromCharCode(C[Y]);return R},"buf2binstring");var Uo=o((C,U)=>{const R=U||C.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(C.subarray(0,U));let Y,G;const re=new Array(R*2);for(G=0,Y=0;Y<R;){let Ce=C[Y++];if(Ce<128){re[G++]=Ce;continue}let ge=Dr[Ce];if(ge>4){re[G++]=65533,Y+=ge-1;continue}for(Ce&=ge===2?31:ge===3?15:7;ge>1&&Y<R;)Ce=Ce<<6|C[Y++]&63,ge--;if(ge>1){re[G++]=65533;continue}Ce<65536?re[G++]=Ce:(Ce-=65536,re[G++]=55296|Ce>>10&1023,re[G++]=56320|Ce&1023)}return mo(re,G)},"buf2string"),so=o((C,U)=>{U=U||C.length,U>C.length&&(U=C.length);let R=U-1;for(;R>=0&&(C[R]&192)===128;)R--;return R<0||R===0?U:R+Dr[C[R]]>U?R:U},"utf8border"),Wr={string2buf:po,buf2string:Uo,utf8border:so};function To(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}o(To,"ZStream");var Io=To;const jr=Object.prototype.toString,{Z_NO_FLUSH:go,Z_SYNC_FLUSH:Ho,Z_FULL_FLUSH:Is,Z_FINISH:zs,Z_OK:Lr,Z_STREAM_END:ns,Z_DEFAULT_COMPRESSION:Gr,Z_DEFAULT_STRATEGY:Ws,Z_DEFLATED:js}=lt;function Xr(C){this.options=Yr.assign({level:Gr,method:js,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ws},C||{});let U=this.options;U.raw&&U.windowBits>0?U.windowBits=-U.windowBits:U.gzip&&U.windowBits>0&&U.windowBits<16&&(U.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Io,this.strm.avail_out=0;let R=vr.deflateInit2(this.strm,U.level,U.method,U.windowBits,U.memLevel,U.strategy);if(R!==Lr)throw new Error(vt[R]);if(U.header&&vr.deflateSetHeader(this.strm,U.header),U.dictionary){let Y;if(typeof U.dictionary=="string"?Y=Wr.string2buf(U.dictionary):jr.call(U.dictionary)==="[object ArrayBuffer]"?Y=new Uint8Array(U.dictionary):Y=U.dictionary,R=vr.deflateSetDictionary(this.strm,Y),R!==Lr)throw new Error(vt[R]);this._dict_set=!0}}o(Xr,"Deflate$1"),Xr.prototype.push=function(C,U){const R=this.strm,Y=this.options.chunkSize;let G,re;if(this.ended)return!1;for(U===~~U?re=U:re=U===!0?zs:go,typeof C=="string"?R.input=Wr.string2buf(C):jr.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(Y),R.next_out=0,R.avail_out=Y),(re===Ho||re===Is)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(G=vr.deflate(R,re),G===ns)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),G=vr.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===Lr;if(R.avail_out===0){this.onData(R.output);continue}if(re>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0},Xr.prototype.onData=function(C){this.chunks.push(C)},Xr.prototype.onEnd=function(C){C===Lr&&(this.result=Yr.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function wo(C,U){const R=new Xr(U);if(R.push(C,!0),R.err)throw R.msg||vt[R.err];return R.result}o(wo,"deflate$1");function is(C,U){return U=U||{},U.raw=!0,wo(C,U)}o(is,"deflateRaw$1");function zo(C,U){return U=U||{},U.gzip=!0,wo(C,U)}o(zo,"gzip$1");var ws=Xr,ir=wo,Wo=is,Oo=zo,rs=lt,Os={Deflate:ws,deflate:ir,deflateRaw:Wo,gzip:Oo,constants:rs};const Qr=30,Gs=12;var jo=o(function(U,R){let Y,G,re,Ce,ge,et,he,Te,tn,Qe,Ne,It,Wn,en,Ft,gn,Yt,$e,nn,We,Rt,nt,vn,Vt;const zt=U.state;Y=U.next_in,vn=U.input,G=Y+(U.avail_in-5),re=U.next_out,Vt=U.output,Ce=re-(R-U.avail_out),ge=re+(U.avail_out-257),et=zt.dmax,he=zt.wsize,Te=zt.whave,tn=zt.wnext,Qe=zt.window,Ne=zt.hold,It=zt.bits,Wn=zt.lencode,en=zt.distcode,Ft=(1<<zt.lenbits)-1,gn=(1<<zt.distbits)-1;e:do{It<15&&(Ne+=vn[Y++]<<It,It+=8,Ne+=vn[Y++]<<It,It+=8),Yt=Wn[Ne&Ft];t:for(;;){if($e=Yt>>>24,Ne>>>=$e,It-=$e,$e=Yt>>>16&255,$e===0)Vt[re++]=Yt&65535;else if($e&16){nn=Yt&65535,$e&=15,$e&&(It<$e&&(Ne+=vn[Y++]<<It,It+=8),nn+=Ne&(1<<$e)-1,Ne>>>=$e,It-=$e),It<15&&(Ne+=vn[Y++]<<It,It+=8,Ne+=vn[Y++]<<It,It+=8),Yt=en[Ne&gn];n:for(;;){if($e=Yt>>>24,Ne>>>=$e,It-=$e,$e=Yt>>>16&255,$e&16){if(We=Yt&65535,$e&=15,It<$e&&(Ne+=vn[Y++]<<It,It+=8,It<$e&&(Ne+=vn[Y++]<<It,It+=8)),We+=Ne&(1<<$e)-1,We>et){U.msg="invalid distance too far back",zt.mode=Qr;break e}if(Ne>>>=$e,It-=$e,$e=re-Ce,We>$e){if($e=We-$e,$e>Te&&zt.sane){U.msg="invalid distance too far back",zt.mode=Qr;break e}if(Rt=0,nt=Qe,tn===0){if(Rt+=he-$e,$e<nn){nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);Rt=re-We,nt=Vt}}else if(tn<$e){if(Rt+=he+tn-$e,$e-=tn,$e<nn){nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);if(Rt=0,tn<nn){$e=tn,nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);Rt=re-We,nt=Vt}}}else if(Rt+=tn-$e,$e<nn){nn-=$e;do Vt[re++]=Qe[Rt++];while(--$e);Rt=re-We,nt=Vt}for(;nn>2;)Vt[re++]=nt[Rt++],Vt[re++]=nt[Rt++],Vt[re++]=nt[Rt++],nn-=3;nn&&(Vt[re++]=nt[Rt++],nn>1&&(Vt[re++]=nt[Rt++]))}else{Rt=re-We;do Vt[re++]=Vt[Rt++],Vt[re++]=Vt[Rt++],Vt[re++]=Vt[Rt++],nn-=3;while(nn>2);nn&&(Vt[re++]=Vt[Rt++],nn>1&&(Vt[re++]=Vt[Rt++]))}}else if($e&64){U.msg="invalid distance code",zt.mode=Qr;break e}else{Yt=en[(Yt&65535)+(Ne&(1<<$e)-1)];continue n}break}}else if($e&64)if($e&32){zt.mode=Gs;break e}else{U.msg="invalid literal/length code",zt.mode=Qr;break e}else{Yt=Wn[(Yt&65535)+(Ne&(1<<$e)-1)];continue t}break}}while(Y<G&&re<ge);nn=It>>3,Y-=nn,It-=nn<<3,Ne&=(1<<It)-1,U.next_in=Y,U.next_out=re,U.avail_in=Y<G?5+(G-Y):5-(Y-G),U.avail_out=re<ge?257+(ge-re):257-(re-ge),zt.hold=Ne,zt.bits=It},"inflate_fast");const fr=15,Go=852,os=592,ss=0,$o=1,Ro=2,as=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ls=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ds=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Zr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Mr=o((C,U,R,Y,G,re,Ce,ge)=>{const et=ge.bits;let he=0,Te=0,tn=0,Qe=0,Ne=0,It=0,Wn=0,en=0,Ft=0,gn=0,Yt,$e,nn,We,Rt,nt=null,vn=0,Vt;const zt=new Uint16Array(fr+1),io=new Uint16Array(fr+1);let mn=null,El=0,hn,qs,_s;for(he=0;he<=fr;he++)zt[he]=0;for(Te=0;Te<Y;Te++)zt[U[R+Te]]++;for(Ne=et,Qe=fr;Qe>=1&&zt[Qe]===0;Qe--);if(Ne>Qe&&(Ne=Qe),Qe===0)return G[re++]=1<<24|64<<16|0,G[re++]=1<<24|64<<16|0,ge.bits=1,0;for(tn=1;tn<Qe&&zt[tn]===0;tn++);for(Ne<tn&&(Ne=tn),en=1,he=1;he<=fr;he++)if(en<<=1,en-=zt[he],en<0)return-1;if(en>0&&(C===ss||Qe!==1))return-1;for(io[1]=0,he=1;he<fr;he++)io[he+1]=io[he]+zt[he];for(Te=0;Te<Y;Te++)U[R+Te]!==0&&(Ce[io[U[R+Te]]++]=Te);if(C===ss?(nt=mn=Ce,Vt=19):C===$o?(nt=as,vn-=257,mn=ls,El-=257,Vt=256):(nt=ds,mn=Zr,Vt=-1),gn=0,Te=0,he=tn,Rt=re,It=Ne,Wn=0,nn=-1,Ft=1<<Ne,We=Ft-1,C===$o&&Ft>Go||C===Ro&&Ft>os)return 1;for(;;){hn=he-Wn,Ce[Te]<Vt?(qs=0,_s=Ce[Te]):Ce[Te]>Vt?(qs=mn[El+Ce[Te]],_s=nt[vn+Ce[Te]]):(qs=32+64,_s=0),Yt=1<<he-Wn,$e=1<<It,tn=$e;do $e-=Yt,G[Rt+(gn>>Wn)+$e]=hn<<24|qs<<16|_s|0;while($e!==0);for(Yt=1<<he-1;gn&Yt;)Yt>>=1;if(Yt!==0?(gn&=Yt-1,gn+=Yt):gn=0,Te++,--zt[he]===0){if(he===Qe)break;he=U[R+Ce[Te]]}if(he>Ne&&(gn&We)!==nn){for(Wn===0&&(Wn=Ne),Rt+=tn,It=he-Wn,en=1<<It;It+Wn<Qe&&(en-=zt[It+Wn],!(en<=0));)It++,en<<=1;if(Ft+=1<<It,C===$o&&Ft>Go||C===Ro&&Ft>os)return 1;nn=gn&We,G[nn]=Ne<<24|It<<16|Rt-re|0}}return gn!==0&&(G[Rt+gn]=he-Wn<<24|64<<16|0),ge.bits=Ne,0},"inflate_table");const cs=0,lo=1,$r=2,{Z_FINISH:Mo,Z_BLOCK:Rs,Z_TREES:Ko,Z_OK:$i,Z_STREAM_END:Ms,Z_NEED_DICT:Po,Z_STREAM_ERROR:Ni,Z_DATA_ERROR:$s,Z_MEM_ERROR:Jo,Z_BUF_ERROR:So,Z_DEFLATED:hr}=lt,Ks=1,us=2,Yo=3,fs=4,Js=5,Ys=6,Xs=7,Qs=8,Ps=9,la=10,Xo=11,rr=12,Ao=13,hs=14,ne=15,te=16,Q=17,A=18,X=19,se=20,oe=21,ve=22,Ie=23,Ae=24,ke=25,De=26,Ge=27,Xe=28,ut=29,Ze=30,Zt=31,rn=32,Tn=852,Pn=592,Kn=15,ti=o(C=>(C>>>24&255)+(C>>>8&65280)+((C&65280)<<8)+((C&255)<<24),"zswap32");function ei(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}o(ei,"InflateState");const wi=o(C=>{if(!C||!C.state)return Ni;const U=C.state;return C.total_in=C.total_out=U.total=0,C.msg="",U.wrap&&(C.adler=U.wrap&1),U.mode=Ks,U.last=0,U.havedict=0,U.dmax=32768,U.head=null,U.hold=0,U.bits=0,U.lencode=U.lendyn=new Int32Array(Tn),U.distcode=U.distdyn=new Int32Array(Pn),U.sane=1,U.back=-1,$i},"inflateResetKeep"),ki=o(C=>{if(!C||!C.state)return Ni;const U=C.state;return U.wsize=0,U.whave=0,U.wnext=0,wi(C)},"inflateReset"),ci=o((C,U)=>{let R;if(!C||!C.state)return Ni;const Y=C.state;return U<0?(R=0,U=-U):(R=(U>>4)+1,U<48&&(U&=15)),U&&(U<8||U>15)?Ni:(Y.window!==null&&Y.wbits!==U&&(Y.window=null),Y.wrap=R,Y.wbits=U,ki(C))},"inflateReset2"),yi=o((C,U)=>{if(!C)return Ni;const R=new ei;C.state=R,R.window=null;const Y=ci(C,U);return Y!==$i&&(C.state=null),Y},"inflateInit2"),or=o(C=>yi(C,Kn),"inflateInit");let Mi=!0,Wi,Kr;const vo=o(C=>{if(Mi){Wi=new Int32Array(512),Kr=new Int32Array(32);let U=0;for(;U<144;)C.lens[U++]=8;for(;U<256;)C.lens[U++]=9;for(;U<280;)C.lens[U++]=7;for(;U<288;)C.lens[U++]=8;for(Mr(lo,C.lens,0,288,Wi,0,C.work,{bits:9}),U=0;U<32;)C.lens[U++]=5;Mr($r,C.lens,0,32,Kr,0,C.work,{bits:5}),Mi=!1}C.lencode=Wi,C.lenbits=9,C.distcode=Kr,C.distbits=5},"fixedtables"),yr=o((C,U,R,Y)=>{let G;const re=C.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new Uint8Array(re.wsize)),Y>=re.wsize?(re.window.set(U.subarray(R-re.wsize,R),0),re.wnext=0,re.whave=re.wsize):(G=re.wsize-re.wnext,G>Y&&(G=Y),re.window.set(U.subarray(R-Y,R-Y+G),re.wnext),Y-=G,Y?(re.window.set(U.subarray(R-Y,R),0),re.wnext=Y,re.whave=re.wsize):(re.wnext+=G,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=G))),0},"updatewindow"),In=o((C,U)=>{let R,Y,G,re,Ce,ge,et,he,Te,tn,Qe,Ne,It,Wn,en=0,Ft,gn,Yt,$e,nn,We,Rt,nt;const vn=new Uint8Array(4);let Vt,zt;const io=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return Ni;R=C.state,R.mode===rr&&(R.mode=Ao),Ce=C.next_out,G=C.output,et=C.avail_out,re=C.next_in,Y=C.input,ge=C.avail_in,he=R.hold,Te=R.bits,tn=ge,Qe=et,nt=$i;e:for(;;)switch(R.mode){case Ks:if(R.wrap===0){R.mode=Ao;break}for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(R.wrap&2&&he===35615){R.check=0,vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0),he=0,Te=0,R.mode=us;break}if(R.flags=0,R.head&&(R.head.done=!1),!(R.wrap&1)||(((he&255)<<8)+(he>>8))%31){C.msg="incorrect header check",R.mode=Ze;break}if((he&15)!==hr){C.msg="unknown compression method",R.mode=Ze;break}if(he>>>=4,Te-=4,Rt=(he&15)+8,R.wbits===0)R.wbits=Rt;else if(Rt>R.wbits){C.msg="invalid window size",R.mode=Ze;break}R.dmax=1<<R.wbits,C.adler=R.check=1,R.mode=he&512?la:rr,he=0,Te=0;break;case us:for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(R.flags=he,(R.flags&255)!==hr){C.msg="unknown compression method",R.mode=Ze;break}if(R.flags&57344){C.msg="unknown header flags set",R.mode=Ze;break}R.head&&(R.head.text=he>>8&1),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0)),he=0,Te=0,R.mode=Yo;case Yo:for(;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.head&&(R.head.time=he),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,vn[2]=he>>>16&255,vn[3]=he>>>24&255,R.check=qe(R.check,vn,4,0)),he=0,Te=0,R.mode=fs;case fs:for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.head&&(R.head.xflags=he&255,R.head.os=he>>8),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0)),he=0,Te=0,R.mode=Js;case Js:if(R.flags&1024){for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.length=he,R.head&&(R.head.extra_len=he),R.flags&512&&(vn[0]=he&255,vn[1]=he>>>8&255,R.check=qe(R.check,vn,2,0)),he=0,Te=0}else R.head&&(R.head.extra=null);R.mode=Ys;case Ys:if(R.flags&1024&&(Ne=R.length,Ne>ge&&(Ne=ge),Ne&&(R.head&&(Rt=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Uint8Array(R.head.extra_len)),R.head.extra.set(Y.subarray(re,re+Ne),Rt)),R.flags&512&&(R.check=qe(R.check,Y,Ne,re)),ge-=Ne,re+=Ne,R.length-=Ne),R.length))break e;R.length=0,R.mode=Xs;case Xs:if(R.flags&2048){if(ge===0)break e;Ne=0;do Rt=Y[re+Ne++],R.head&&Rt&&R.length<65536&&(R.head.name+=String.fromCharCode(Rt));while(Rt&&Ne<ge);if(R.flags&512&&(R.check=qe(R.check,Y,Ne,re)),ge-=Ne,re+=Ne,Rt)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=Qs;case Qs:if(R.flags&4096){if(ge===0)break e;Ne=0;do Rt=Y[re+Ne++],R.head&&Rt&&R.length<65536&&(R.head.comment+=String.fromCharCode(Rt));while(Rt&&Ne<ge);if(R.flags&512&&(R.check=qe(R.check,Y,Ne,re)),ge-=Ne,re+=Ne,Rt)break e}else R.head&&(R.head.comment=null);R.mode=Ps;case Ps:if(R.flags&512){for(;Te<16;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(he!==(R.check&65535)){C.msg="header crc mismatch",R.mode=Ze;break}he=0,Te=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),C.adler=R.check=0,R.mode=rr;break;case la:for(;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}C.adler=R.check=ti(he),he=0,Te=0,R.mode=Xo;case Xo:if(R.havedict===0)return C.next_out=Ce,C.avail_out=et,C.next_in=re,C.avail_in=ge,R.hold=he,R.bits=Te,Po;C.adler=R.check=1,R.mode=rr;case rr:if(U===Rs||U===Ko)break e;case Ao:if(R.last){he>>>=Te&7,Te-=Te&7,R.mode=Ge;break}for(;Te<3;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}switch(R.last=he&1,he>>>=1,Te-=1,he&3){case 0:R.mode=hs;break;case 1:if(vo(R),R.mode=se,U===Ko){he>>>=2,Te-=2;break e}break;case 2:R.mode=Q;break;case 3:C.msg="invalid block type",R.mode=Ze}he>>>=2,Te-=2;break;case hs:for(he>>>=Te&7,Te-=Te&7;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if((he&65535)!==(he>>>16^65535)){C.msg="invalid stored block lengths",R.mode=Ze;break}if(R.length=he&65535,he=0,Te=0,R.mode=ne,U===Ko)break e;case ne:R.mode=te;case te:if(Ne=R.length,Ne){if(Ne>ge&&(Ne=ge),Ne>et&&(Ne=et),Ne===0)break e;G.set(Y.subarray(re,re+Ne),Ce),ge-=Ne,re+=Ne,et-=Ne,Ce+=Ne,R.length-=Ne;break}R.mode=rr;break;case Q:for(;Te<14;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(R.nlen=(he&31)+257,he>>>=5,Te-=5,R.ndist=(he&31)+1,he>>>=5,Te-=5,R.ncode=(he&15)+4,he>>>=4,Te-=4,R.nlen>286||R.ndist>30){C.msg="too many length or distance symbols",R.mode=Ze;break}R.have=0,R.mode=A;case A:for(;R.have<R.ncode;){for(;Te<3;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.lens[io[R.have++]]=he&7,he>>>=3,Te-=3}for(;R.have<19;)R.lens[io[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,Vt={bits:R.lenbits},nt=Mr(cs,R.lens,0,19,R.lencode,0,R.work,Vt),R.lenbits=Vt.bits,nt){C.msg="invalid code lengths set",R.mode=Ze;break}R.have=0,R.mode=X;case X:for(;R.have<R.nlen+R.ndist;){for(;en=R.lencode[he&(1<<R.lenbits)-1],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!(Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(Yt<16)he>>>=Ft,Te-=Ft,R.lens[R.have++]=Yt;else{if(Yt===16){for(zt=Ft+2;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(he>>>=Ft,Te-=Ft,R.have===0){C.msg="invalid bit length repeat",R.mode=Ze;break}Rt=R.lens[R.have-1],Ne=3+(he&3),he>>>=2,Te-=2}else if(Yt===17){for(zt=Ft+3;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=Ft,Te-=Ft,Rt=0,Ne=3+(he&7),he>>>=3,Te-=3}else{for(zt=Ft+7;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=Ft,Te-=Ft,Rt=0,Ne=11+(he&127),he>>>=7,Te-=7}if(R.have+Ne>R.nlen+R.ndist){C.msg="invalid bit length repeat",R.mode=Ze;break}for(;Ne--;)R.lens[R.have++]=Rt}}if(R.mode===Ze)break;if(R.lens[256]===0){C.msg="invalid code -- missing end-of-block",R.mode=Ze;break}if(R.lenbits=9,Vt={bits:R.lenbits},nt=Mr(lo,R.lens,0,R.nlen,R.lencode,0,R.work,Vt),R.lenbits=Vt.bits,nt){C.msg="invalid literal/lengths set",R.mode=Ze;break}if(R.distbits=6,R.distcode=R.distdyn,Vt={bits:R.distbits},nt=Mr($r,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,Vt),R.distbits=Vt.bits,nt){C.msg="invalid distances set",R.mode=Ze;break}if(R.mode=se,U===Ko)break e;case se:R.mode=oe;case oe:if(ge>=6&&et>=258){C.next_out=Ce,C.avail_out=et,C.next_in=re,C.avail_in=ge,R.hold=he,R.bits=Te,jo(C,Qe),Ce=C.next_out,G=C.output,et=C.avail_out,re=C.next_in,Y=C.input,ge=C.avail_in,he=R.hold,Te=R.bits,R.mode===rr&&(R.back=-1);break}for(R.back=0;en=R.lencode[he&(1<<R.lenbits)-1],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!(Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(gn&&!(gn&240)){for($e=Ft,nn=gn,We=Yt;en=R.lencode[We+((he&(1<<$e+nn)-1)>>$e)],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!($e+Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=$e,Te-=$e,R.back+=$e}if(he>>>=Ft,Te-=Ft,R.back+=Ft,R.length=Yt,gn===0){R.mode=De;break}if(gn&32){R.back=-1,R.mode=rr;break}if(gn&64){C.msg="invalid literal/length code",R.mode=Ze;break}R.extra=gn&15,R.mode=ve;case ve:if(R.extra){for(zt=R.extra;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.length+=he&(1<<R.extra)-1,he>>>=R.extra,Te-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=Ie;case Ie:for(;en=R.distcode[he&(1<<R.distbits)-1],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!(Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(!(gn&240)){for($e=Ft,nn=gn,We=Yt;en=R.distcode[We+((he&(1<<$e+nn)-1)>>$e)],Ft=en>>>24,gn=en>>>16&255,Yt=en&65535,!($e+Ft<=Te);){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}he>>>=$e,Te-=$e,R.back+=$e}if(he>>>=Ft,Te-=Ft,R.back+=Ft,gn&64){C.msg="invalid distance code",R.mode=Ze;break}R.offset=Yt,R.extra=gn&15,R.mode=Ae;case Ae:if(R.extra){for(zt=R.extra;Te<zt;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}R.offset+=he&(1<<R.extra)-1,he>>>=R.extra,Te-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){C.msg="invalid distance too far back",R.mode=Ze;break}R.mode=ke;case ke:if(et===0)break e;if(Ne=Qe-et,R.offset>Ne){if(Ne=R.offset-Ne,Ne>R.whave&&R.sane){C.msg="invalid distance too far back",R.mode=Ze;break}Ne>R.wnext?(Ne-=R.wnext,It=R.wsize-Ne):It=R.wnext-Ne,Ne>R.length&&(Ne=R.length),Wn=R.window}else Wn=G,It=Ce-R.offset,Ne=R.length;Ne>et&&(Ne=et),et-=Ne,R.length-=Ne;do G[Ce++]=Wn[It++];while(--Ne);R.length===0&&(R.mode=oe);break;case De:if(et===0)break e;G[Ce++]=R.length,et--,R.mode=oe;break;case Ge:if(R.wrap){for(;Te<32;){if(ge===0)break e;ge--,he|=Y[re++]<<Te,Te+=8}if(Qe-=et,C.total_out+=Qe,R.total+=Qe,Qe&&(C.adler=R.check=R.flags?qe(R.check,G,Qe,Ce-Qe):jt(R.check,G,Qe,Ce-Qe)),Qe=et,(R.flags?he:ti(he))!==R.check){C.msg="incorrect data check",R.mode=Ze;break}he=0,Te=0}R.mode=Xe;case Xe:if(R.wrap&&R.flags){for(;Te<32;){if(ge===0)break e;ge--,he+=Y[re++]<<Te,Te+=8}if(he!==(R.total&4294967295)){C.msg="incorrect length check",R.mode=Ze;break}he=0,Te=0}R.mode=ut;case ut:nt=Ms;break e;case Ze:nt=$s;break e;case Zt:return Jo;case rn:default:return Ni}return C.next_out=Ce,C.avail_out=et,C.next_in=re,C.avail_in=ge,R.hold=he,R.bits=Te,(R.wsize||Qe!==C.avail_out&&R.mode<Ze&&(R.mode<Ge||U!==Mo))&&yr(C,C.output,C.next_out,Qe-C.avail_out),tn-=C.avail_in,Qe-=C.avail_out,C.total_in+=tn,C.total_out+=Qe,R.total+=Qe,R.wrap&&Qe&&(C.adler=R.check=R.flags?qe(R.check,G,Qe,C.next_out-Qe):jt(R.check,G,Qe,C.next_out-Qe)),C.data_type=R.bits+(R.last?64:0)+(R.mode===rr?128:0)+(R.mode===se||R.mode===ne?256:0),(tn===0&&Qe===0||U===Mo)&&nt===$i&&(nt=So),nt},"inflate$2"),Jt=o(C=>{if(!C||!C.state)return Ni;let U=C.state;return U.window&&(U.window=null),C.state=null,$i},"inflateEnd"),jl=o((C,U)=>{if(!C||!C.state)return Ni;const R=C.state;return R.wrap&2?(R.head=U,U.done=!1,$i):Ni},"inflateGetHeader"),Dd=o((C,U)=>{const R=U.length;let Y,G,re;return!C||!C.state||(Y=C.state,Y.wrap!==0&&Y.mode!==Xo)?Ni:Y.mode===Xo&&(G=1,G=jt(G,U,R,0),G!==Y.check)?$s:(re=yr(C,U,R,R),re?(Y.mode=Zt,Jo):(Y.havedict=1,$i))},"inflateSetDictionary");var ml=ki,sr=ci,Gl=wi,Na=or,va=yi,Ld=In,gl=Jt,Sl=jl,vl=Dd,xa="pako inflate (from Nodeca project)",Pr={inflateReset:ml,inflateReset2:sr,inflateResetKeep:Gl,inflateInit:Na,inflateInit2:va,inflate:Ld,inflateEnd:gl,inflateGetHeader:Sl,inflateSetDictionary:vl,inflateInfo:xa};function sn(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}o(sn,"GZheader");var Qn=sn;const At=Object.prototype.toString,{Z_NO_FLUSH:Nd,Z_FINISH:yl,Z_OK:ps,Z_STREAM_END:da,Z_NEED_DICT:ca,Z_STREAM_ERROR:Zs,Z_DATA_ERROR:ya,Z_MEM_ERROR:xd}=lt;function ms(C){this.options=Yr.assign({chunkSize:1024*64,windowBits:15,to:""},C||{});const U=this.options;U.raw&&U.windowBits>=0&&U.windowBits<16&&(U.windowBits=-U.windowBits,U.windowBits===0&&(U.windowBits=-15)),U.windowBits>=0&&U.windowBits<16&&!(C&&C.windowBits)&&(U.windowBits+=32),U.windowBits>15&&U.windowBits<48&&(U.windowBits&15||(U.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Io,this.strm.avail_out=0;let R=Pr.inflateInit2(this.strm,U.windowBits);if(R!==ps)throw new Error(vt[R]);if(this.header=new Qn,Pr.inflateGetHeader(this.strm,this.header),U.dictionary&&(typeof U.dictionary=="string"?U.dictionary=Wr.string2buf(U.dictionary):At.call(U.dictionary)==="[object ArrayBuffer]"&&(U.dictionary=new Uint8Array(U.dictionary)),U.raw&&(R=Pr.inflateSetDictionary(this.strm,U.dictionary),R!==ps)))throw new Error(vt[R])}o(ms,"Inflate$1"),ms.prototype.push=function(C,U){const R=this.strm,Y=this.options.chunkSize,G=this.options.dictionary;let re,Ce,ge;if(this.ended)return!1;for(U===~~U?Ce=U:Ce=U===!0?yl:Nd,At.call(C)==="[object ArrayBuffer]"?R.input=new Uint8Array(C):R.input=C,R.next_in=0,R.avail_in=R.input.length;;){for(R.avail_out===0&&(R.output=new Uint8Array(Y),R.next_out=0,R.avail_out=Y),re=Pr.inflate(R,Ce),re===ca&&G&&(re=Pr.inflateSetDictionary(R,G),re===ps?re=Pr.inflate(R,Ce):re===ya&&(re=ca));R.avail_in>0&&re===da&&R.state.wrap>0&&C[R.next_in]!==0;)Pr.inflateReset(R),re=Pr.inflate(R,Ce);switch(re){case Zs:case ya:case ca:case xd:return this.onEnd(re),this.ended=!0,!1}if(ge=R.avail_out,R.next_out&&(R.avail_out===0||re===da))if(this.options.to==="string"){let et=Wr.utf8border(R.output,R.next_out),he=R.next_out-et,Te=Wr.buf2string(R.output,et);R.next_out=he,R.avail_out=Y-he,he&&R.output.set(R.output.subarray(et,et+he),0),this.onData(Te)}else this.onData(R.output.length===R.next_out?R.output:R.output.subarray(0,R.next_out));if(!(re===ps&&ge===0)){if(re===da)return re=Pr.inflateEnd(this.strm),this.onEnd(re),this.ended=!0,!0;if(R.avail_in===0)break}}return!0},ms.prototype.onData=function(C){this.chunks.push(C)},ms.prototype.onEnd=function(C){C===ps&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yr.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function ba(C,U){const R=new ms(U);if(R.push(C),R.err)throw R.msg||vt[R.err];return R.result}o(ba,"inflate$1");function bl(C,U){return U=U||{},U.raw=!0,ba(C,U)}o(bl,"inflateRaw$1");var Bd=ms,Fd=ba,Vd=bl,ua=ba,$l=lt,Ca={Inflate:Bd,inflate:Fd,inflateRaw:Vd,ungzip:ua,constants:$l};const{Deflate:Ea,deflate:Kl,deflateRaw:Ba,gzip:Ud}=Os,{Inflate:Jl,inflate:Hd,inflateRaw:Yl,ungzip:zd}=Ca;var Fa=Ea,Va=Kl,Ua=Ba,Cl=Ud,pr=Jl,As=Hd,Ha=Yl,za=zd,Wa=lt,ja={Deflate:Fa,deflate:Va,deflateRaw:Ua,gzip:Cl,Inflate:pr,inflate:As,inflateRaw:Ha,ungzip:za,constants:Wa}},mZDK:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(u){}},"NoOpTask");l.default=S},mb4i:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={ChannelNotFound:"channel_not_found",InvalidChannelId:"invalid_channel_id"},t=Object(a.a)("conversations.teamConnections generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"conversations.teamConnections",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to conversations.teamConnections
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsTeamConnectionsFetcher",description:"conversations.teamConnections generated fetcher"}},mcAb:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Np2I")),u=S(f("5/Tg"));let m=o(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(s){return new u.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,s)}constructor(s,i,e){this.fixedWaitMs=s,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=m},mgFs:function(j,l,f){"use strict";f.d(l,"b",function(){return S}),f.d(l,"a",function(){return h});var S;(function(u){u[u.ID=25]="ID",u[u.FRECENCY=0]="FRECENCY",u[u.RAW_FRECENCY=65]="RAW_FRECENCY",u[u.FRECENCY_BONUS=76]="FRECENCY_BONUS",u[u.FRECENCY_WEIGHT_HIT_VISITS=91]="FRECENCY_WEIGHT_HIT_VISITS",u[u.FRECENCY_HIT_COUNT=92]="FRECENCY_HIT_COUNT",u[u.FRECENCY_WEIGHT_ITEM_VISITS=93]="FRECENCY_WEIGHT_ITEM_VISITS",u[u.FRECENCY_ITEM_COUNT=94]="FRECENCY_ITEM_COUNT",u[u.FRECENCY_LOG_HIT_COUNT=105]="FRECENCY_LOG_HIT_COUNT",u[u.FRECENCY_LOG_HIT_COUNT_SCALED=106]="FRECENCY_LOG_HIT_COUNT_SCALED",u[u.FRECENCY_LOG_ITEM_COUNT=159]="FRECENCY_LOG_ITEM_COUNT",u[u.FRECENCY_LOG_ITEM_COUNT_SCALED=160]="FRECENCY_LOG_ITEM_COUNT_SCALED",u[u.FRECENCY_HIT_VISIT_DECAY_2H=162]="FRECENCY_HIT_VISIT_DECAY_2H",u[u.FRECENCY_HIT_VISIT_DECAY_7D=163]="FRECENCY_HIT_VISIT_DECAY_7D",u[u.FRECENCY_ITEM_VISIT_DECAY_2H=164]="FRECENCY_ITEM_VISIT_DECAY_2H",u[u.FRECENCY_ITEM_VISIT_DECAY_7D=165]="FRECENCY_ITEM_VISIT_DECAY_7D",u[u.FRECENCY_HIT_VISITS_4H=242]="FRECENCY_HIT_VISITS_4H",u[u.FRECENCY_HIT_VISITS_1D=243]="FRECENCY_HIT_VISITS_1D",u[u.FRECENCY_HIT_VISITS_3D=244]="FRECENCY_HIT_VISITS_3D",u[u.FRECENCY_HIT_VISITS_1W=245]="FRECENCY_HIT_VISITS_1W",u[u.FRECENCY_HIT_VISITS_1M=246]="FRECENCY_HIT_VISITS_1M",u[u.FRECENCY_HIT_VISITS_90D=247]="FRECENCY_HIT_VISITS_90D",u[u.FRECENCY_ITEM_VISITS_4H=248]="FRECENCY_ITEM_VISITS_4H",u[u.FRECENCY_ITEM_VISITS_1D=249]="FRECENCY_ITEM_VISITS_1D",u[u.FRECENCY_ITEM_VISITS_3D=250]="FRECENCY_ITEM_VISITS_3D",u[u.FRECENCY_ITEM_VISITS_1W=251]="FRECENCY_ITEM_VISITS_1W",u[u.FRECENCY_ITEM_VISITS_1M=252]="FRECENCY_ITEM_VISITS_1M",u[u.FRECENCY_ITEM_VISITS_90D=253]="FRECENCY_ITEM_VISITS_90D",u[u.TYPE_NAVIGATION_CHANNEL=2]="TYPE_NAVIGATION_CHANNEL",u[u.TYPE_NAVIGATION_LINK=172]="TYPE_NAVIGATION_LINK",u[u.TYPE_NAVIGATION_MPIM=4]="TYPE_NAVIGATION_MPIM",u[u.TYPE_NAVIGATION_MODAL=177]="TYPE_NAVIGATION_MODAL",u[u.TYPE_NAVIGATION_USER=5]="TYPE_NAVIGATION_USER",u[u.TYPE_QUERY=6]="TYPE_QUERY",u[u.TYPE_QUERY_HISTORY=7]="TYPE_QUERY_HISTORY",u[u.TYPE_EMOJI=178]="TYPE_EMOJI",u[u.ACTIVE_TOKEN_FILTER_IN=8]="ACTIVE_TOKEN_FILTER_IN",u[u.ACTIVE_TOKEN_FILTER_FROM=9]="ACTIVE_TOKEN_FILTER_FROM",u[u.ACTIVE_TOKEN_FILTER_TO=10]="ACTIVE_TOKEN_FILTER_TO",u[u.ACTIVE_TOKEN_FILTER_BEFORE=11]="ACTIVE_TOKEN_FILTER_BEFORE",u[u.ACTIVE_TOKEN_FILTER_DURING=12]="ACTIVE_TOKEN_FILTER_DURING",u[u.ACTIVE_TOKEN_FILTER_ON=13]="ACTIVE_TOKEN_FILTER_ON",u[u.ACTIVE_TOKEN_FILTER_AFTER=14]="ACTIVE_TOKEN_FILTER_AFTER",u[u.ACTIVE_TOKEN_FILTER_HAS=15]="ACTIVE_TOKEN_FILTER_HAS",u[u.ACTIVE_TOKEN_FILTER_IS=155]="ACTIVE_TOKEN_FILTER_IS",u[u.ACTIVE_TOKEN_FILTER_WITH=233]="ACTIVE_TOKEN_FILTER_WITH",u[u.ACTIVE_TOKEN_MEMBER=16]="ACTIVE_TOKEN_MEMBER",u[u.ACTIVE_TOKEN_STRING=17]="ACTIVE_TOKEN_STRING",u[u.ACTIVE_TOKEN_PHRASE=18]="ACTIVE_TOKEN_PHRASE",u[u.STRING_EXACT_MATCH=19]="STRING_EXACT_MATCH",u[u.STRING_EXACT_PREFIX_MATCH=20]="STRING_EXACT_PREFIX_MATCH",u[u.STRING_NORMAL_MATCH=21]="STRING_NORMAL_MATCH",u[u.STRING_NORMAL_PREFIX_MATCH=22]="STRING_NORMAL_PREFIX_MATCH",u[u.STRING_SAME_NUMBER_WORDS=23]="STRING_SAME_NUMBER_WORDS",u[u.EXCESS_STRING_LENGTH=24]="EXCESS_STRING_LENGTH",u[u.EXACT_MATCH_LOG_RESULTS=229]="EXACT_MATCH_LOG_RESULTS",u[u.FILE_SUGGESTION_SCORE=26]="FILE_SUGGESTION_SCORE",u[u.ACTIVE_TOKEN_QUERY_SUGGESTION=27]="ACTIVE_TOKEN_QUERY_SUGGESTION",u[u.QUERY_SUGGESTION_SCORE_V2=28]="QUERY_SUGGESTION_SCORE_V2",u[u.TYPE_NAVIGATION_TEAM=31]="TYPE_NAVIGATION_TEAM",u[u.TYPE_NAVIGATION_VIEW=32]="TYPE_NAVIGATION_VIEW",u[u.TYPE_USER_QUERY=33]="TYPE_USER_QUERY",u[u.NAV_EXACT_MATCH=35]="NAV_EXACT_MATCH",u[u.NAV_EXACT_PREFIX_MATCH=36]="NAV_EXACT_PREFIX_MATCH",u[u.NAV_NORMAL_MATCH=37]="NAV_NORMAL_MATCH",u[u.NAV_NORMAL_PREFIX_MATCH=75]="NAV_NORMAL_PREFIX_MATCH",u[u.CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH=38]="CHANNEL_IS_PREVIOUS_NAME_EXACT_MATCH",u[u.CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH=39]="CHANNEL_IS_PREVIOUS_NAME_PREFIX_MATCH",u[u.CHANNEL_IS_ARCHIVED=40]="CHANNEL_IS_ARCHIVED",u[u.CHANNEL_IS_MEMBER=41]="CHANNEL_IS_MEMBER",u[u.CHANNEL_IS_STARRED=42]="CHANNEL_IS_STARRED",u[u.MPIM_IS_STARRED=43]="MPIM_IS_STARRED",u[u.CHANNEL_IS_UNREAD=44]="CHANNEL_IS_UNREAD",u[u.MPIM_IS_UNREAD=45]="MPIM_IS_UNREAD",u[u.CHANNEL_IS_OTHER_TEAM=46]="CHANNEL_IS_OTHER_TEAM",u[u.USER_IS_ACTIVE=47]="USER_IS_ACTIVE",u[u.USER_IS_CURRENT_USER=48]="USER_IS_CURRENT_USER",u[u.USER_DM_IS_STARRED=49]="USER_DM_IS_STARRED",u[u.USER_DM_IS_UNREAD=50]="USER_DM_IS_UNREAD",u[u.CHANNEL_PRIORITY=51]="CHANNEL_PRIORITY",u[u.CHANNEL_READ_AGE_DECAY_7D=52]="CHANNEL_READ_AGE_DECAY_7D",u[u.CHANNEL_READ_AGE_DECAY_2H=53]="CHANNEL_READ_AGE_DECAY_2H",u[u.MPIM_READ_AGE_DECAY_2H=54]="MPIM_READ_AGE_DECAY_2H",u[u.MPIM_READ_AGE_DECAY_7D=55]="MPIM_READ_AGE_DECAY_7D",u[u.USER_DM_READ_AGE_DECAY_7D=56]="USER_DM_READ_AGE_DECAY_7D",u[u.USER_DM_READ_AGE_DECAY_2H=57]="USER_DM_READ_AGE_DECAY_2H",u[u.USER_DM_READ_AGE_DECAY_7D_V2=274]="USER_DM_READ_AGE_DECAY_7D_V2",u[u.USER_DM_READ_AGE_DECAY_2H_V2=275]="USER_DM_READ_AGE_DECAY_2H_V2",u[u.QUERY_LENGTH=61]="QUERY_LENGTH",u[u.NAV_QUERY_LENGTH=62]="NAV_QUERY_LENGTH",u[u.SUGGESTION_TEXT_LENGTH=63]="SUGGESTION_TEXT_LENGTH",u[u.NAV_TEXT_LENGTH=64]="NAV_TEXT_LENGTH",u[u.MPIM_PRIORITY=66]="MPIM_PRIORITY",u[u.QUERY_RATIO_LENGTH_STRING=68]="QUERY_RATIO_LENGTH_STRING",u[u.NAV_QUERY_RATIO_LENGTH_STRING=69]="NAV_QUERY_RATIO_LENGTH_STRING",u[u.USER_QUERY_RATIO_LENGTH_STRING=70]="USER_QUERY_RATIO_LENGTH_STRING",u[u.CHANNEL_QUERY_RATIO_LENGTH_STRING=71]="CHANNEL_QUERY_RATIO_LENGTH_STRING",u[u.MPIM_QUERY_RATIO_LENGTH_STRING=72]="MPIM_QUERY_RATIO_LENGTH_STRING",u[u.FUZZY_SCORE=73]="FUZZY_SCORE",u[u.MPIM_WITH_DEACTIVATED_USER=74]="MPIM_WITH_DEACTIVATED_USER",u[u.USER_FIRST_NAME_EXACT_MATCH=81]="USER_FIRST_NAME_EXACT_MATCH",u[u.USER_FIRST_NAME_EXACT_PREFIX_MATCH=82]="USER_FIRST_NAME_EXACT_PREFIX_MATCH",u[u.USER_FIRST_NAME_NORMAL_MATCH=83]="USER_FIRST_NAME_NORMAL_MATCH",u[u.USER_FIRST_NAME_NORMAL_PREFIX_MATCH=84]="USER_FIRST_NAME_NORMAL_PREFIX_MATCH",u[u.USER_LAST_NAME_EXACT_MATCH=85]="USER_LAST_NAME_EXACT_MATCH",u[u.USER_LAST_NAME_EXACT_PREFIX_MATCH=86]="USER_LAST_NAME_EXACT_PREFIX_MATCH",u[u.USER_LAST_NAME_NORMAL_MATCH=87]="USER_LAST_NAME_NORMAL_MATCH",u[u.USER_LAST_NAME_NORMAL_PREFIX_MATCH=88]="USER_LAST_NAME_NORMAL_PREFIX_MATCH",u[u.USER_PRIORITY=89]="USER_PRIORITY",u[u.ONLY_MATCHES_PREVIOUS_NAME=90]="ONLY_MATCHES_PREVIOUS_NAME",u[u.NAV_NORMAL_MATCH_USER=95]="NAV_NORMAL_MATCH_USER",u[u.NAV_NORMAL_PREFIX_MATCH_USER=96]="NAV_NORMAL_PREFIX_MATCH_USER",u[u.NAV_NORMAL_MATCH_NO_USER=97]="NAV_NORMAL_MATCH_NO_USER",u[u.NAV_NORMAL_PREFIX_MATCH_NO_USER=98]="NAV_NORMAL_PREFIX_MATCH_NO_USER",u[u.CHANNEL_LATEST_MSG_AGE_DECAY_7D=99]="CHANNEL_LATEST_MSG_AGE_DECAY_7D",u[u.CHANNEL_LATEST_MSG_AGE_DECAY_2H=100]="CHANNEL_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_LATEST_MSG_AGE_DECAY_2H=101]="MPIM_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_LATEST_MSG_AGE_DECAY_7D=102]="MPIM_LATEST_MSG_AGE_DECAY_7D",u[u.USER_DM_LATEST_MSG_AGE_DECAY_7D=103]="USER_DM_LATEST_MSG_AGE_DECAY_7D",u[u.USER_DM_LATEST_MSG_AGE_DECAY_2H=104]="USER_DM_LATEST_MSG_AGE_DECAY_2H",u[u.USER_DM_LATEST_MSG_AGE_DECAY_7D_V2=260]="USER_DM_LATEST_MSG_AGE_DECAY_7D_V2",u[u.USER_DM_LATEST_MSG_AGE_DECAY_2H_V2=261]="USER_DM_LATEST_MSG_AGE_DECAY_2H_V2",u[u.FUZZY_SCORE_50=127]="FUZZY_SCORE_50",u[u.FUZZY_SCORE_25=128]="FUZZY_SCORE_25",u[u.FUZZY_SCORE_ALL=129]="FUZZY_SCORE_ALL",u[u.FUZZY_SCORE_SCALED_EXP=291]="FUZZY_SCORE_SCALED_EXP",u[u.FUZZY_SCORE_SCALED_FLIPPED=292]="FUZZY_SCORE_SCALED_FLIPPED",u[u.FUZZY_SCORE_SCALED_SUBTRACT=293]="FUZZY_SCORE_SCALED_SUBTRACT",u[u.HERE_KEYWORD=131]="HERE_KEYWORD",u[u.HERE_KEYWORD_EXACT_MATCH=132]="HERE_KEYWORD_EXACT_MATCH",u[u.IS_BROADCAST_KEYWORD=133]="IS_BROADCAST_KEYWORD",u[u.BROADCAST_KEYWORD_NORMAL_MATCH=134]="BROADCAST_KEYWORD_NORMAL_MATCH",u[u.MEMBER_OF_CURRENT_CHANNEL=153]="MEMBER_OF_CURRENT_CHANNEL",u[u.QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL=154]="QUERY_LENGTH_DECAY_NORMAL_MATCH_CHANNEL",u[u.USER_EMAIL_MATCH=170]="USER_EMAIL_MATCH",u[u.USER_EMAIL_ONLY_MATCH=171]="USER_EMAIL_ONLY_MATCH",u[u.QUERY_IS_SELF=193]="QUERY_IS_SELF",u[u.CURRENT_USER_TEXTY=194]="CURRENT_USER_TEXTY",u[u.USER_IS_EXTERNAL=234]="USER_IS_EXTERNAL",u[u.USER_SAME_TEAM=235]="USER_SAME_TEAM",u[u.USER_IS_BOT=254]="USER_IS_BOT",u[u.CHANNEL_TEAM_CTR_90DD=189]="CHANNEL_TEAM_CTR_90DD",u[u.CHANNEL_USER_CTR_30DD=190]="CHANNEL_USER_CTR_30DD",u[u.NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS=199]="NAV_NORMAL_MATCH_CHANNEL_LOG_RESULTS",u[u.HISTORY_AGE_DECAY_2H=230]="HISTORY_AGE_DECAY_2H",u[u.HISTORY_AGE_DECAY_7D=231]="HISTORY_AGE_DECAY_7D",u[u.HISTORY_POSITION=232]="HISTORY_POSITION",u[u.USER_DM_NULL=179]="USER_DM_NULL",u[u.USER_DM_EMPTY=180]="USER_DM_EMPTY",u[u.USER_DM_NOT_OPEN=181]="USER_DM_NOT_OPEN",u[u.USER_DM_OPEN=182]="USER_DM_OPEN",u[u.USER_DM_LATEST_OLDER_30D=183]="USER_DM_LATEST_OLDER_30D",u[u.USER_DM_LATEST_OLDER_90D=184]="USER_DM_LATEST_OLDER_90D",u[u.USER_DM_EMPTY_V2=257]="USER_DM_EMPTY_V2",u[u.USER_DM_LATEST_OLDER_30D_V2=258]="USER_DM_LATEST_OLDER_30D_V2",u[u.USER_DM_LATEST_OLDER_90D_V2=259]="USER_DM_LATEST_OLDER_90D_V2",u[u.USER_HAS_DMED=284]="USER_HAS_DMED",u[u.USER_DM_READ_AGE_DECAY_2H_V3=285]="USER_DM_READ_AGE_DECAY_2H_V3",u[u.USER_DM_READ_AGE_DECAY_7D_V3=286]="USER_DM_READ_AGE_DECAY_7D_V3",u[u.USER_DM_READ_OLDER_7D=287]="USER_DM_READ_OLDER_7D",u[u.USER_DM_READ_OLDER_30D=288]="USER_DM_READ_OLDER_30D",u[u.USER_DM_READ_OLDER_90D=289]="USER_DM_READ_OLDER_90D",u[u.USER_MPIM_READ_AGE_DECAY_7D=236]="USER_MPIM_READ_AGE_DECAY_7D",u[u.USER_MPIM_READ_AGE_DECAY_2H=237]="USER_MPIM_READ_AGE_DECAY_2H",u[u.USER_MPIM_LATEST_MSG_AGE_DECAY_7D=238]="USER_MPIM_LATEST_MSG_AGE_DECAY_7D",u[u.USER_MPIM_LATEST_MSG_AGE_DECAY_2H=239]="USER_MPIM_LATEST_MSG_AGE_DECAY_2H",u[u.USER_MPIM_FRECENCY_LOG_HIT_COUNT=240]="USER_MPIM_FRECENCY_LOG_HIT_COUNT",u[u.USER_MPIM_FRECENCY_LOG_ITEM_COUNT=241]="USER_MPIM_FRECENCY_LOG_ITEM_COUNT",u[u.MPIM_MEMBERS=166]="MPIM_MEMBERS",u[u.MPIM_MEMBER_NAME_MATCHES=167]="MPIM_MEMBER_NAME_MATCHES",u[u.MPIM_MEMBER_ALL_MATCHES=168]="MPIM_MEMBER_ALL_MATCHES",u[u.MPIM_MATCHER_SCORE=169]="MPIM_MATCHER_SCORE",u[u.MPIM_MATCHER_SCORE_0=173]="MPIM_MATCHER_SCORE_0",u[u.MPIM_MATCHER_SCORE_1=174]="MPIM_MATCHER_SCORE_1",u[u.MPIM_MATCHER_SCORE_2=175]="MPIM_MATCHER_SCORE_2",u[u.MPIM_MATCHER_SCORE_3=176]="MPIM_MATCHER_SCORE_3",u[u.MPIM_TEAM_CTR_90DD=187]="MPIM_TEAM_CTR_90DD",u[u.MPIM_USER_CTR_30DD=188]="MPIM_USER_CTR_30DD",u[u.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H=262]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D=263]="MPIM_USERS_MAX_LATEST_MSG_AGE_DECAY_7D",u[u.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H=264]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_2H",u[u.MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D=265]="MPIM_USERS_AVG_LATEST_MSG_AGE_DECAY_7D",u[u.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H=266]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_2H",u[u.MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D=267]="MPIM_USERS_MAX_MSG_READ_AGE_DECAY_7D",u[u.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H=268]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_2H",u[u.MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D=269]="MPIM_USERS_AVG_MSG_READ_AGE_DECAY_7D",u[u.MPIM_USERS_PCT_NON_EMPTY_DMS=270]="MPIM_USERS_PCT_NON_EMPTY_DMS",u[u.MPIM_USERS_PCT_NON_NULL_DMS=271]="MPIM_USERS_PCT_NON_NULL_DMS",u[u.MPIM_USERS_ALL_INTERNAL=272]="MPIM_USERS_ALL_INTERNAL",u[u.EMOJI_EXACT_MATCH=136]="EMOJI_EXACT_MATCH",u[u.EMOJI_QUERY_LENGTH_RATIO=150]="EMOJI_QUERY_LENGTH_RATIO",u[u.EMOJI_TOTAL_COMBO_BREAKS=151]="EMOJI_TOTAL_COMBO_BREAKS",u[u.EMOJI_COMBO_BREAK_0=161]="EMOJI_COMBO_BREAK_0",u[u.EMOJI_COMBO_BREAK_1=156]="EMOJI_COMBO_BREAK_1",u[u.EMOJI_COMBO_BREAK_2=157]="EMOJI_COMBO_BREAK_2",u[u.EMOJI_COMBO_BREAK_3=158]="EMOJI_COMBO_BREAK_3",u[u.EMOJI_TEAM_CTR_90DD=185]="EMOJI_TEAM_CTR_90DD",u[u.EMOJI_USER_CTR_30DD=186]="EMOJI_USER_CTR_30DD",u[u.CHANNEL_IS_FROZEN=146]="CHANNEL_IS_FROZEN",u[u.USER_DM_IS_FROZEN=147]="USER_DM_IS_FROZEN",u[u.CHANNEL_HAS_DRAFT=148]="CHANNEL_HAS_DRAFT",u[u.USER_DM_HAS_DRAFT=149]="USER_DM_HAS_DRAFT",u[u.QUERY_FRECENCY_RAW=107]="QUERY_FRECENCY_RAW",u[u.QUERY_FRECENCY_WEIGHT_HIT_VISITS=108]="QUERY_FRECENCY_WEIGHT_HIT_VISITS",u[u.QUERY_FRECENCY_HIT_COUNT=109]="QUERY_FRECENCY_HIT_COUNT",u[u.QUERY_FRECENCY_WEIGHT_ITEM_VISITS=110]="QUERY_FRECENCY_WEIGHT_ITEM_VISITS",u[u.QUERY_FRECENCY_ITEM_COUNT=111]="QUERY_FRECENCY_ITEM_COUNT",u[u.QUERY_FUZZY_SCORE=112]="QUERY_FUZZY_SCORE",u[u.QUERY_FRECENCY_BONUS=113]="QUERY_FRECENCY_BONUS",u[u.QUERY_LOG_HIT_COUNT=130]="QUERY_LOG_HIT_COUNT",u[u.QUERY_TOKEN_NORMAL_MATCH=137]="QUERY_TOKEN_NORMAL_MATCH",u[u.QUERY_TOKEN_NORMAL_PREFIX_MATCH=138]="QUERY_TOKEN_NORMAL_PREFIX_MATCH",u[u.QUERY_HISTORY_AGE_DECAY_30D=282]="QUERY_HISTORY_AGE_DECAY_30D",u[u.QUERY_HISTORY_LOG_INDEX=283]="QUERY_HISTORY_LOG_INDEX",u[u.FILTER_USER_IS_ACTIVE=114]="FILTER_USER_IS_ACTIVE",u[u.FILTER_USER_IS_CURRENT_USER=115]="FILTER_USER_IS_CURRENT_USER",u[u.FILTER_USER_DM_IS_STARRED=116]="FILTER_USER_DM_IS_STARRED",u[u.FILTER_USER_DM_IS_UNREAD=117]="FILTER_USER_DM_IS_UNREAD",u[u.FILTER_USER_DM_READ_AGE_DECAY_7D=118]="FILTER_USER_DM_READ_AGE_DECAY_7D",u[u.FILTER_USER_DM_READ_AGE_DECAY_2H=119]="FILTER_USER_DM_READ_AGE_DECAY_2H",u[u.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D=120]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_7D",u[u.FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H=121]="FILTER_USER_DM_LATEST_MSG_AGE_DECAY_2H",u[u.FILTER_USER_FIRST_NAME_NORMAL_MATCH=122]="FILTER_USER_FIRST_NAME_NORMAL_MATCH",u[u.FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH=123]="FILTER_USER_FIRST_NAME_NORMAL_PREFIX_MATCH",u[u.FILTER_USER_LAST_NAME_NORMAL_MATCH=124]="FILTER_USER_LAST_NAME_NORMAL_MATCH",u[u.FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH=125]="FILTER_USER_LAST_NAME_NORMAL_PREFIX_MATCH",u[u.FILTER_USER_PRIORITY=126]="FILTER_USER_PRIORITY",u[u.FILTER_CHANNEL_IS_ARCHIVED=139]="FILTER_CHANNEL_IS_ARCHIVED",u[u.FILTER_CHANNEL_IS_MEMBER=140]="FILTER_CHANNEL_IS_MEMBER",u[u.FILTER_CHANNEL_IS_STARRED=141]="FILTER_CHANNEL_IS_STARRED",u[u.FILTER_CHANNEL_IS_UNREAD=142]="FILTER_CHANNEL_IS_UNREAD",u[u.FILTER_CHANNEL_READ_AGE_DECAY_7D=143]="FILTER_CHANNEL_READ_AGE_DECAY_7D",u[u.FILTER_CHANNEL_READ_AGE_DECAY_2H=144]="FILTER_CHANNEL_READ_AGE_DECAY_2H",u[u.FILTER_CHANNEL_PRIORITY=145]="FILTER_CHANNEL_PRIORITY",u[u.USER_ENTITY_TYPE_CTR_30DD=191]="USER_ENTITY_TYPE_CTR_30DD",u[u.NUM_RESULTS=192]="NUM_RESULTS",u[u.TYPE_NAVIGATION_FILE=3]="TYPE_NAVIGATION_FILE",u[u.FILE_AGE_DECAY_7D=195]="FILE_AGE_DECAY_7D",u[u.FILE_AGE_DECAY_28D=196]="FILE_AGE_DECAY_28D",u[u.FILE_AGE_DECAY_90D=197]="FILE_AGE_DECAY_90D",u[u.FILE_FROM_CURRENT_USER=198]="FILE_FROM_CURRENT_USER",u[u.FILE_LOG_PRIVATE_SHARES=200]="FILE_LOG_PRIVATE_SHARES",u[u.FILE_LOG_PUBLIC_SHARES=201]="FILE_LOG_PUBLIC_SHARES",u[u.FILE_LOG_ACTIONS=202]="FILE_LOG_ACTIONS",u[u.FILE_LATEST_ACTION_AGE_DECAY_2H=203]="FILE_LATEST_ACTION_AGE_DECAY_2H",u[u.FILE_LATEST_ACTION_AGE_DECAY_7D=204]="FILE_LATEST_ACTION_AGE_DECAY_7D",u[u.FILE_LATEST_ACTION_AGE_DECAY_90D=205]="FILE_LATEST_ACTION_AGE_DECAY_90D",u[u.FILE_LATEST_SHARE_AGE_DECAY_2H=206]="FILE_LATEST_SHARE_AGE_DECAY_2H",u[u.FILE_LATEST_SHARE_AGE_DECAY_7D=207]="FILE_LATEST_SHARE_AGE_DECAY_7D",u[u.FILE_LATEST_SHARE_AGE_DECAY_90D=208]="FILE_LATEST_SHARE_AGE_DECAY_90D",u[u.FILE_CHANNEL_CTR=209]="FILE_CHANNEL_CTR",u[u.FILE_SUGGESTIONS_SEARCHER=210]="FILE_SUGGESTIONS_SEARCHER",u[u.FILE_USER_CTR=211]="FILE_USER_CTR",u[u.FILE_NAME_CONTAINS_QUERY_NORMALIZED=273]="FILE_NAME_CONTAINS_QUERY_NORMALIZED",u[u.FILE_IS_CANVAS=276]="FILE_IS_CANVAS",u[u.FILE_HAS_DMS_WITH_CREATOR=277]="FILE_HAS_DMS_WITH_CREATOR",u[u.FILE_LATEST_VIEW_BY_USER_OLDER_90D=278]="FILE_LATEST_VIEW_BY_USER_OLDER_90D",u[u.FILE_HAS_DMS_WITH_CREATOR_V2=290]="FILE_HAS_DMS_WITH_CREATOR_V2",u[u.APP_NAME_PREFIX_MATCH=215]="APP_NAME_PREFIX_MATCH",u[u.BEST_NAME_MATCH_LOG_RESULTS=218]="BEST_NAME_MATCH_LOG_RESULTS",u[u.SHORTCUT_ENTITY_TYPE_CTR=226]="SHORTCUT_ENTITY_TYPE_CTR",u[u.TYPE_SLASH_COMMAND=212]="TYPE_SLASH_COMMAND",u[u.SLASH_COMMAND_TEAM_CTR=227]="SLASH_COMMAND_TEAM_CTR",u[u.SLASH_COMMAND_USER_CTR=219]="SLASH_COMMAND_USER_CTR",u[u.TYPE_GLOBAL_ACTION=213]="TYPE_GLOBAL_ACTION",u[u.IS_INVITE_WORKSPACE=217]="IS_INVITE_WORKSPACE",u[u.GLOBAL_ACTION_TEAM_CTR=220]="GLOBAL_ACTION_TEAM_CTR",u[u.GLOBAL_ACTION_USER_CTR=221]="GLOBAL_ACTION_USER_CTR",u[u.TYPE_CHANNEL_ACTION=214]="TYPE_CHANNEL_ACTION",u[u.CHANNEL_ACTION_TEAM_CTR=222]="CHANNEL_ACTION_TEAM_CTR",u[u.CHANNEL_ACTION_USER_CTR=223]="CHANNEL_ACTION_USER_CTR",u[u.TYPE_APP_ACTION=152]="TYPE_APP_ACTION",u[u.APP_ACTION_TEAM_CTR=224]="APP_ACTION_TEAM_CTR",u[u.APP_ACTION_USER_CTR=225]="APP_ACTION_USER_CTR",u[u.OS_APP_ACTION=228]="OS_APP_ACTION",u[u.TYPE_APP=216]="TYPE_APP",u[u.TYPE_NAVIGATION_MESSAGE=255]="TYPE_NAVIGATION_MESSAGE",u[u.TYPE_WORKFLOW_TRIGGER=256]="TYPE_WORKFLOW_TRIGGER",u[u.WORKFLOW_TRIGGER_TEAM_CTR=279]="WORKFLOW_TRIGGER_TEAM_CTR",u[u.WORKFLOW_TRIGGER_USER_CTR=280]="WORKFLOW_TRIGGER_USER_CTR",u[u.HAS_CHANNEL_ASSOCIATION=281]="HAS_CHANNEL_ASSOCIATION",u[u.DEPRECATED_QUERY_SUGGESTION_SCORE=1]="DEPRECATED_QUERY_SUGGESTION_SCORE",u[u.DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL=29]="DEPRECATED_TYPE_NAVIGATION_EXPERT_CHANNEL",u[u.DEPRECATED_BM25_SCORE=30]="DEPRECATED_BM25_SCORE",u[u.DEPRECATED_NAV_EXCESS_STRING_LENGTH=34]="DEPRECATED_NAV_EXCESS_STRING_LENGTH",u[u.DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH=58]="DEPRECATED_CHANNEL_EXCESS_STRING_LENGTH",u[u.DEPRECATED_USER_EXCESS_STRING_LENGTH=59]="DEPRECATED_USER_EXCESS_STRING_LENGTH",u[u.DEPRECATED_MPIM_EXCESS_STRING_LENGTH=60]="DEPRECATED_MPIM_EXCESS_STRING_LENGTH",u[u.DEPRECATED_LOG_FRECENCY=67]="DEPRECATED_LOG_FRECENCY",u[u.DEPRECATED_LOG_FRECENCY_BONUS=77]="DEPRECATED_LOG_FRECENCY_BONUS",u[u.DEPRECATED_LOG_FRECENCY_CHANNEL=78]="DEPRECATED_LOG_FRECENCY_CHANNEL",u[u.DEPRECATED_LOG_FRECENCY_USER=79]="DEPRECATED_LOG_FRECENCY_USER",u[u.DEPRECATED_LOG_FRECENCY_MPIM=80]="DEPRECATED_LOG_FRECENCY_MPIM",u[u.DEPRECATED_EMOJI_SCORE_BONUS=135]="DEPRECATED_EMOJI_SCORE_BONUS",u[u.TEST_FEATURE_1=1e3]="TEST_FEATURE_1",u[u.TEST_FEATURE_2=1001]="TEST_FEATURE_2",u[u.TEST_FEATURE_3=1002]="TEST_FEATURE_3",u[u.TEST_FEATURE_4=1003]="TEST_FEATURE_4",u[u.TEST_FEATURE_5=1004]="TEST_FEATURE_5",u[u.TEST_FEATURE_6=1005]="TEST_FEATURE_6",u[u.TEST_FEATURE_7=1006]="TEST_FEATURE_7",u[u.TEST_FEATURE_8=1007]="TEST_FEATURE_8",u[u.TEST_FEATURE_9=1008]="TEST_FEATURE_9",u[u.TEST_FEATURE_10=1009]="TEST_FEATURE_10"})(S||(S={}));var h;(function(u){u[u.NUMERICAL=1]="NUMERICAL",u[u.BINARY=2]="BINARY",u[u.TEXT=3]="TEXT"})(h||(h={}))},mjQB:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("5rM1")),m=h(f("hEYi")),a=h(f("aVV0"));let s=o(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new u.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((n,r)=>{let c=o(class{cancel(){this.signalingClient.removeObserver(this),r(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(d){switch(d.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),n();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),r(new Error("WebSocket connection failed"));break}}constructor(d){this.signalingClient=d}},"WebSocketOpenInterceptor");const p=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(p),this.taskCanceler=p})}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=s},ml5h:function(j,l){function f(S,h){var u=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(u!=null){var m=[],a=!0,s=!1,i,e;try{for(u=u.call(S);!(a=(i=u.next()).done)&&(m.push(i.value),!(h&&m.length===h));a=!0);}catch(t){s=!0,e=t}finally{try{!a&&u.return!=null&&u.return()}finally{if(s)throw e}}return m}}o(f,"_iterableToArrayLimit"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},mlaT:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var S;(function(h){h[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF"})(S=l.LogLevel||(l.LogLevel={})),l.default=S},mpmV:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var S;(function(h){h[h.AUDIO=0]="AUDIO",h[h.VIDEO=1]="VIDEO"})(S=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=S},mv1L:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("aVV0"));let m=o(class extends u.default{cancel(){for(const s of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${s.name()}`),s.cancel()}run(){return S(this,void 0,void 0,function*(){const s=[];for(const e of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${e.name()}`),s.push(e.run());const i=[];for(let e=0;e<s.length;e++){try{yield s[e]}catch(t){i.push(`task ${this.tasksToRunParallel[e].name()} failed: ${t.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[e].name()}`)}if(i.length>0){const e=i.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)})}constructor(s,i,e){super(s),this.taskName=i,this.tasksToRunParallel=e;for(const t of e)t.setParent(this)}},"ParallelGroupTask");l.default=m},my46:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{equals(u){return this.videoWidth===u.videoWidth&&this.videoHeight===u.videoHeight&&this.videoFrameRate===u.videoFrameRate}constructor(u,m,a){this.videoWidth=u,this.videoHeight=m,this.videoFrameRate=a}},"VideoQualitySettings");l.default=S,S.VideoDisabled=new S(0,0,0),S.VideoResolutionHD=new S(1280,720,30),S.VideoResolutionFHD=new S(1920,1080,30),S.VideoResolutionUHD=new S(3840,2160,30)},nDuE:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("10yS")),m=h(f("j+uH"));let a=o(class extends m.default{run(){return S(this,void 0,void 0,function*(){const i=this.context.transceiverController;i.setPeer(this.context.peer);try{i.setupLocalTransceivers()}catch(n){throw n}const e=this.context.activeAudioInput;if(e){const n=e.getAudioTracks();this.context.logger.info("attaching audio track to peer connection"),yield i.setAudioInput(n.length?n[0]:null)}else yield i.setAudioInput(null),this.context.logger.info("no audio track");this.setAudioCodecPreferences();const t=this.context.activeVideoInput;if(t){const n=t.getVideoTracks(),r=n.length?n[0]:null;if(this.context.logger.info("attaching video track to peer connection"),yield i.setVideoInput(r),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const c=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();i.setEncodingParameters(c)}r&&this.context.statsCollector.logVideoEvent(u.default.InputAttached,this.context.videoDeviceInformation)}else yield i.setVideoInput(null),this.context.logger.info("no video track");this.context.videoSubscriptions=i.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)})}setAudioCodecPreferences(){const i=window.RTCRtpTransceiver&&"setCodecPreferences"in window.RTCRtpTransceiver.prototype,e=this.context.audioProfile.hasRedundancyEnabled();if(!i){this.context.logger.warn("Setting codec preferences not supported");return}const t=this.context.transceiverController.localAudioTransceiver(),{codecs:n}=RTCRtpSender.getCapabilities("audio");this.context.logger.debug(`Available audio codecs ${JSON.stringify(n,null,4)}`);const r=n.findIndex(c=>c.mimeType==="audio/red");if(!t){this.context.logger.error("audio transceiver is null");return}if(r>=0){const c=n[r];n.splice(r,1),e?(n.unshift(c),this.context.logger.info("audio/red set as preferred codec")):this.context.logger.info("audio/red removed from preferred codec"),t.setCodecPreferences(n);return}this.context.logger.info("audio/red codec not supported")}constructor(i){super(i.logger),this.context=i,this.taskName="AttachMediaInputTask"}},"AttachMediaInputTask");l.default=a},"nJ1/":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let S=o(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||o(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=S},nSNv:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.VoiceFocusAudioWorkletNode=void 0;let S=o(class extends(typeof globalThis<"u"&&globalThis.AudioWorkletNode||o(class{},"Sadness")){},"VoiceFocusAudioWorkletNode");l.VoiceFocusAudioWorkletNode=S},nWLk:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckCameraResolutionFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.ResolutionNotSupported=2]="ResolutionNotSupported",h[h.PermissionDenied=3]="PermissionDenied"})(S=l.CheckCameraResolutionFeedback||(l.CheckCameraResolutionFeedback={})),l.default=S},nWxe:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("hlxM"),u=f("nSNv"),m=5*1e3;let a=o(class extends u.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return S(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return S(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return S(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,n;const r=i.data;switch(r.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),p=this.cpuWarningLastTriggered||c,g=Math.abs(c-p);(!this.cpuWarningLastTriggered||g>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,r.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(n=this.logger)===null||n===void 0||n.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:n,fetchBehavior:r,logger:c,delegate:p}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=p,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const g=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:g,key:"model",fetchBehavior:r,path:t})}},"VoiceFocusInlineNode");l.default=a},nXJe:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"TranscriptResult");l.default=S},nYR4:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Zkgh"));let u=o(class DS{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const s=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return s;const i=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),n=new Map;for(const c of t)i.contain(c.streamId)&&n.set(c.attendeeId,c);let r=0;for(const c of e){const p=c.attendee.attendeeId;if(n.has(p)){const g=n.get(p);if(r+g.maxBitrateKbps<=DS.maxReceiveBitrateKbps)s.add(g.streamId),r+=g.maxBitrateKbps;else{console.warn("total bitrate "+(r+g.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return s}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=u,u.maxReceiveBitrateKbps=15e3},ngjY:function(j,l,f){"use strict";var S=f("+Xah"),h=f("YXGX"),u=h.a?function(yt,st){return h.a.set(yt,st),yt}:S.a,m=u,a=f("c3gm"),s=f("IzLi");function i(yt){return function(){var st=arguments;switch(st.length){case 0:return new yt;case 1:return new yt(st[0]);case 2:return new yt(st[0],st[1]);case 3:return new yt(st[0],st[1],st[2]);case 4:return new yt(st[0],st[1],st[2],st[3]);case 5:return new yt(st[0],st[1],st[2],st[3],st[4]);case 6:return new yt(st[0],st[1],st[2],st[3],st[4],st[5]);case 7:return new yt(st[0],st[1],st[2],st[3],st[4],st[5],st[6])}var dn=Object(a.a)(yt.prototype),Kt=yt.apply(dn,st);return Object(s.a)(Kt)?Kt:dn}}o(i,"createCtor");var e=i,t=f("Ju5/"),n=1;function r(yt,st,dn){var Kt=st&n,wn=e(yt);function Jn(){var z=this&&this!==t.a&&this instanceof Jn?wn:yt;return z.apply(Kt?dn:this,arguments)}return o(Jn,"wrapper"),Jn}o(r,"createBind");var c=r,p=f("uRGJ"),g=Math.max;function d(yt,st,dn,Kt){for(var wn=-1,Jn=yt.length,z=dn.length,ue=-1,Me=st.length,Le=g(Jn-z,0),Ye=Array(Me+Le),St=!Kt;++ue<Me;)Ye[ue]=st[ue];for(;++wn<z;)(St||wn<Jn)&&(Ye[dn[wn]]=yt[wn]);for(;Le--;)Ye[ue++]=yt[wn++];return Ye}o(d,"composeArgs");var y=d,E=Math.max;function w(yt,st,dn,Kt){for(var wn=-1,Jn=yt.length,z=-1,ue=dn.length,Me=-1,Le=st.length,Ye=E(Jn-ue,0),St=Array(Ye+Le),Ct=!Kt;++wn<Ye;)St[wn]=yt[wn];for(var Tt=wn;++Me<Le;)St[Tt+Me]=st[Me];for(;++z<ue;)(Ct||wn<Jn)&&(St[Tt+dn[z]]=yt[wn++]);return St}o(w,"composeArgsRight");var k=w;function V(yt,st){for(var dn=yt.length,Kt=0;dn--;)yt[dn]===st&&++Kt;return Kt}o(V,"countHolders");var F=V,N=f("Zhxc"),P=f("Ha6T"),x=Object(P.a)(m),O=x,M=/\{\n\/\* \[wrapped with (.+)\] \*/,D=/,? & /;function J(yt){var st=yt.match(M);return st?st[1].split(D):[]}o(J,"getWrapDetails");var q=J,$=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function de(yt,st){var dn=st.length;if(!dn)return yt;var Kt=dn-1;return st[Kt]=(dn>1?"& ":"")+st[Kt],st=st.join(dn>2?", ":" "),yt.replace($,`{
/* [wrapped with `+st+`] */
`)}o(de,"insertWrapDetails");var Ee=de,_e=f("xhnO"),ye=f("ILaC"),Be=f("cvt+"),pt=1,Ve=2,gt=8,dt=16,Je=32,_t=64,ot=128,Et=256,Mt=512,ze=[["ary",ot],["bind",pt],["bindKey",Ve],["curry",gt],["curryRight",dt],["flip",Mt],["partial",Je],["partialRight",_t],["rearg",Et]];function $t(yt,st){return Object(ye.a)(ze,function(dn){var Kt="_."+dn[0];st&dn[1]&&!Object(Be.a)(yt,Kt)&&yt.push(Kt)}),yt.sort()}o($t,"updateWrapDetails");var Un=$t;function ni(yt,st,dn){var Kt=st+"";return Object(_e.a)(yt,Ee(Kt,Un(q(Kt),dn)))}o(ni,"setWrapToString");var an=ni,Gn=1,si=2,ri=4,On=8,Gi=32,ui=64;function Fi(yt,st,dn,Kt,wn,Jn,z,ue,Me,Le){var Ye=st&On,St=Ye?z:void 0,Ct=Ye?void 0:z,Tt=Ye?Jn:void 0,Ke=Ye?void 0:Jn;st|=Ye?Gi:ui,st&=~(Ye?ui:Gi),st&ri||(st&=~(Gn|si));var Pt=[yt,st,wn,Tt,St,Ke,Ct,ue,Me,Le],Dt=dn.apply(void 0,Pt);return Object(N.a)(yt)&&O(Dt,Pt),Dt.placeholder=Kt,an(Dt,yt,st)}o(Fi,"createRecurry");var Hi=Fi,Sn=f("KSud"),un=f("eAQQ"),bn=f("cSlR"),Ot=Math.min;function En(yt,st){for(var dn=yt.length,Kt=Ot(st.length,dn),wn=Object(un.a)(yt);Kt--;){var Jn=st[Kt];yt[Kt]=Object(bn.a)(Jn,dn)?wn[Jn]:void 0}return yt}o(En,"reorder");var Lt=En,Hn=f("nzLN"),Ji=1,$n=2,Ti=8,Ir=16,er=128,cr=512;function gi(yt,st,dn,Kt,wn,Jn,z,ue,Me,Le){var Ye=st&er,St=st&Ji,Ct=st&$n,Tt=st&(Ti|Ir),Ke=st&cr,Pt=Ct?void 0:e(yt);function Dt(){for(var Rn=arguments.length,pn=Array(Rn),zn=Rn;zn--;)pn[zn]=arguments[zn];if(Tt)var di=Object(Sn.a)(Dt),Ri=F(pn,di);if(Kt&&(pn=y(pn,Kt,wn,Tt)),Jn&&(pn=k(pn,Jn,z,Tt)),Rn-=Ri,Tt&&Rn<Le){var Pi=Object(Hn.a)(pn,di);return Hi(yt,st,gi,Dt.placeholder,dn,pn,Pi,ue,Me,Le-Rn)}var fi=St?dn:this,hi=Ct?fi[yt]:yt;return Rn=pn.length,ue?pn=Lt(pn,ue):Ke&&Rn>1&&pn.reverse(),Ye&&Me<Rn&&(pn.length=Me),this&&this!==t.a&&this instanceof Dt&&(hi=Pt||e(hi)),hi.apply(fi,pn)}return o(Dt,"wrapper"),Dt}o(gi,"createHybrid");var Yi=gi;function Xi(yt,st,dn){var Kt=e(yt);function wn(){for(var Jn=arguments.length,z=Array(Jn),ue=Jn,Me=Object(Sn.a)(wn);ue--;)z[ue]=arguments[ue];var Le=Jn<3&&z[0]!==Me&&z[Jn-1]!==Me?[]:Object(Hn.a)(z,Me);if(Jn-=Le.length,Jn<dn)return Hi(yt,st,Yi,wn.placeholder,void 0,z,Le,void 0,void 0,dn-Jn);var Ye=this&&this!==t.a&&this instanceof wn?Kt:yt;return Object(p.a)(Ye,this,z)}return o(wn,"wrapper"),wn}o(Xi,"createCurry");var jt=Xi,pe=1;function Re(yt,st,dn,Kt){var wn=st&pe,Jn=e(yt);function z(){for(var ue=-1,Me=arguments.length,Le=-1,Ye=Kt.length,St=Array(Ye+Me),Ct=this&&this!==t.a&&this instanceof z?Jn:yt;++Le<Ye;)St[Le]=Kt[Le];for(;Me--;)St[Le++]=arguments[++ue];return Object(p.a)(Ct,wn?dn:this,St)}return o(z,"wrapper"),z}o(Re,"createPartial");var Fe=Re,qe=f("+j7y"),vt="__lodash_placeholder__",lt=1,Nt=2,ln=4,fn=8,Bt=128,Ci=256,Si=Math.min;function gr(yt,st){var dn=yt[1],Kt=st[1],wn=dn|Kt,Jn=wn<(lt|Nt|Bt),z=Kt==Bt&&dn==fn||Kt==Bt&&dn==Ci&&yt[7].length<=st[8]||Kt==(Bt|Ci)&&st[7].length<=st[8]&&dn==fn;if(!(Jn||z))return yt;Kt&lt&&(yt[2]=st[2],wn|=dn&lt?0:ln);var ue=st[3];if(ue){var Me=yt[3];yt[3]=Me?y(Me,ue,st[4]):ue,yt[4]=Me?Object(Hn.a)(yt[3],vt):st[4]}return ue=st[5],ue&&(Me=yt[5],yt[5]=Me?k(Me,ue,st[6]):ue,yt[6]=Me?Object(Hn.a)(yt[5],vt):st[6]),ue=st[7],ue&&(yt[7]=ue),Kt&Bt&&(yt[8]=yt[8]==null?st[8]:Si(yt[8],st[8])),yt[9]==null&&(yt[9]=st[9]),yt[0]=st[0],yt[1]=wn,yt}o(gr,"mergeData");var tr=gr,ai=f("fshX"),wr="Expected a function",li=1,lr=2,Zn=8,Or=16,Qi=32,zr=64,_r=Math.max;function Zi(yt,st,dn,Kt,wn,Jn,z,ue){var Me=st&lr;if(!Me&&typeof yt!="function")throw new TypeError(wr);var Le=Kt?Kt.length:0;if(Le||(st&=~(Qi|zr),Kt=wn=void 0),z=z===void 0?z:_r(Object(ai.a)(z),0),ue=ue===void 0?ue:Object(ai.a)(ue),Le-=wn?wn.length:0,st&zr){var Ye=Kt,St=wn;Kt=wn=void 0}var Ct=Me?void 0:Object(qe.a)(yt),Tt=[yt,st,dn,Kt,wn,Ye,St,Jn,z,ue];if(Ct&&tr(Tt,Ct),yt=Tt[0],st=Tt[1],dn=Tt[2],Kt=Tt[3],wn=Tt[4],ue=Tt[9]=Tt[9]===void 0?Me?0:yt.length:_r(Tt[9]-Le,0),!ue&&st&(Zn|Or)&&(st&=~(Zn|Or)),!st||st==li)var Ke=c(yt,st,dn);else st==Zn||st==Or?Ke=jt(yt,st,ue):(st==Qi||st==(li|Qi))&&!wn.length?Ke=Fe(yt,st,dn,Kt):Ke=Yi.apply(void 0,Tt);var Pt=Ct?m:O;return an(Pt(Ke,Tt),yt,st)}o(Zi,"createWrap");var ro=l.a=Zi},nq15:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("f2XL"),u=S(f("ldli")),m=S(f("MhWp"));let a=o(class La extends u.default{localStreamDescriptions(){const i=[];return this._localStreamInfos.forEach(e=>{i.push(e.clone())}),i}integrateUplinkPolicyDecision(i){let e=!0,t=0;for(let n=0;n<i.length;n++){const r=i[n].maxBitrate/1e3,c=i[n].maxFramerate;if(!e||n===this._localStreamInfos.length){e=!1;const p=new m.default;p.maxBitrateKbps=r,p.maxFrameRate=c,p.disabledByUplinkPolicy=r===0,p.rid=i[n].rid,r!==0&&(p.timeEnabled=Date.now()),this._localStreamInfos.push(p),t++;continue}this._localStreamInfos[t].maxBitrateKbps===0&&r>0&&(this._localStreamInfos[t].timeEnabled=Date.now()),this._localStreamInfos[t].maxBitrateKbps=r,this._localStreamInfos[t].maxFrameRate=c,this._localStreamInfos[t].disabledByUplinkPolicy=r===0,this._localStreamInfos[t].disabledByUplinkPolicy===!0&&(this._localStreamInfos[t].disabledByWebRTC=!1),t++}e&&this._localStreamInfos.splice(t)}integrateBitratesFrame(i){super.integrateBitratesFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of i.bitrates)e.add(n.sourceStreamId),this.streamIdToBitrateKbpsMap.set(n.sourceStreamId,this.convertBpsToKbps(n.avgBitrateBps));for(const n of t)e.has(n)||(this.streamIdToBitrateKbpsMap.get(n)===La.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(n,La.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(n,La.NOT_SENDING_STREAM_BITRATE));for(let n=0;n<this._localStreamInfos.length;n++){this._localStreamInfos[n].disabledByWebRTC=!1;const r=this._localStreamInfos[n].streamId;this._localStreamInfos[n].disabledByUplinkPolicy||(this.streamIdToBitrateKbpsMap.has(r)?this.streamIdToBitrateKbpsMap.get(r)===La.NOT_SENDING_STREAM_BITRATE&&this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>La.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0):this._lastBitRateMsgTime-this._localStreamInfos[n].timeEnabled>La.BitratesMsgFrequencyMs&&(this._localStreamInfos[n].disabledByWebRTC=!0))}this._lastBitRateMsgTime=Date.now(),this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let i="";for(const e of this._localStreamInfos)i+=`streamId=${e.streamId} maxBitrate=${e.maxBitrateKbps} disabledByWebRTC=${e.disabledByWebRTC} disabledByUplink=${e.disabledByUplinkPolicy}
`;this.logger.debug(()=>i)}integrateIndexFrame(i){super.integrateIndexFrame(i);const e=new Set,t=new Set(this.streamIdToBitrateKbpsMap.keys());for(const n of this.currentIndex.sources)n.mediaType===h.SdkStreamMediaType.VIDEO&&(e.add(n.streamId),this.streamIdToBitrateKbpsMap.has(n.streamId)||this.streamIdToBitrateKbpsMap.set(n.streamId,La.UNSEEN_STREAM_BITRATE));for(const n of t)e.has(n)||this.streamIdToBitrateKbpsMap.delete(n)}integrateSubscribeAckFrame(i){if(super.integrateSubscribeAckFrame(i),!i.allocations||i.allocations===void 0)return;let e=0;this._sendRidToVideoStreamIdMap.clear();for(const t of i.allocations){if(this._localStreamInfos.length<e+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[e].groupId=t.groupId,this._localStreamInfos[e].streamId=t.streamId,this.streamIdToBitrateKbpsMap.has(t.streamId)||this.streamIdToBitrateKbpsMap.set(t.streamId,La.UNSEEN_STREAM_BITRATE),this._sendRidToVideoStreamIdMap.set(this._localStreamInfos[e].rid,t.streamId),e++}}sendVideoStreamIdFromRid(i){let e=0;return this._sendRidToVideoStreamIdMap.has(i)&&(e=this._sendRidToVideoStreamIdMap.get(i)),e}constructor(i){super(i),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._sendRidToVideoStreamIdMap=new Map,this._lastBitRateMsgTime=Date.now()}},"SimulcastVideoStreamIndex");l.default=a,a.UNSEEN_STREAM_BITRATE=-2,a.RECENTLY_INACTIVE_STREAM_BITRATE=-1,a.NOT_SENDING_STREAM_BITRATE=0,a.BitratesMsgFrequencyMs=4e3},ntEb:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.supportsZeroByteGCM=l.supportsSubtleCrypto=l.supportsSecureRandom=l.supportsWebCrypto=void 0;var S=f("4vb1"),h=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function u(i){if(m(i)&&typeof i.crypto.subtle=="object"){var e=i.crypto.subtle;return a(e)}return!1}o(u,"supportsWebCrypto"),l.supportsWebCrypto=u;function m(i){if(typeof i=="object"&&typeof i.crypto=="object"){var e=i.crypto.getRandomValues;return typeof e=="function"}return!1}o(m,"supportsSecureRandom"),l.supportsSecureRandom=m;function a(i){return i&&h.every(function(e){return typeof i[e]=="function"})}o(a,"supportsSubtleCrypto"),l.supportsSubtleCrypto=a;function s(i){return S.__awaiter(this,void 0,void 0,function(){var e,t,n;return S.__generator(this,function(r){switch(r.label){case 0:if(!a(i))return[2,!1];r.label=1;case 1:return r.trys.push([1,4,,5]),[4,i.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return e=r.sent(),[4,i.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},e,new Uint8Array(0))];case 3:return t=r.sent(),[2,t.byteLength===16];case 4:return n=r.sent(),[2,!1];case 5:return[2]}})})}o(s,"supportsZeroByteGCM"),l.supportsZeroByteGCM=s},ntxC:function(j,l,f){"use strict";var S=f("FUmc"),h=f("cSlR"),u=Array.prototype,m=u.splice;function a(s,i){for(var e=s?i.length:0,t=e-1;e--;){var n=i[e];if(e==t||n!==r){var r=n;Object(h.a)(n)?m.call(s,n,1):Object(S.a)(s,n)}}return s}o(a,"basePullAt"),l.a=a},nzLN:function(j,l,f){"use strict";var S="__lodash_placeholder__";function h(u,m){for(var a=-1,s=u.length,i=0,e=[];++a<s;){var t=u[a];(t===m||t===S)&&(u[a]=S,e[i++]=a)}return e}o(h,"replaceHolders"),l.a=h},o13v:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{add(u){return new Promise((m,a)=>{this.queue=this.queue.then(u).then(m).catch(a)})}constructor(){this.queue=Promise.resolve()}},"PromiseQueue");l.default=S},o1Pf:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={InvalidCallId:"invalid_call_id",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",TeamNotFound:"team_not_found",InvalidHuddle:"invalid_huddle",InvalidTranscriptionCache:"invalid_transcription_cache",ExternalApiFailed:"external_api_failed",PermissionDenied:"permission_denied"},t=Object(a.a)("rooms.stopTranscription generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"rooms.stopTranscription",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to rooms.stopTranscription
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsStopTranscriptionFetcher",description:"rooms.stopTranscription generated fetcher"}},"o3U+":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isValidRevisionID=l.isValidAssetGroup=l.resolveURL=l.addQueryParams=l.withQueryString=l.withRequestHeaders=l.fetchWithBehavior=void 0;function S(t,n,r){if(!r)return fetch(t,n);const c=u(t,r),p=h(n,r);return fetch(c,p)}o(S,"fetchWithBehavior"),l.fetchWithBehavior=S;function h(t,n){return n!=null&&n.headers?t?Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers||{}),n.headers)}):{headers:n.headers}:t}o(h,"withRequestHeaders"),l.withRequestHeaders=h;function u(t,n){if(!(n!=null&&n.escapedQueryString))return t;const r=t.lastIndexOf("?")!==-1;return`${t}${r?"&":"?"}${n.escapedQueryString}`}o(u,"withQueryString"),l.withQueryString=u;function m(t,n){const r=Object.keys(n);if(!r.length)return t;const c=new URLSearchParams(t==null?void 0:t.escapedQueryString);for(const p of r)c.append(p,n[p]);return Object.assign(Object.assign({},t),{escapedQueryString:c.toString()})}o(m,"addQueryParams"),l.addQueryParams=m;const a={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};function s(t,n){return S(t,a,n).then(r=>r.redirected?r.url:t)}o(s,"resolveURL"),l.resolveURL=s;function i(t){return!!t&&/^[-.a-zA-Z0-9]+$/.test(t)}o(i,"isValidAssetGroup"),l.isValidAssetGroup=i;function e(t){return!!t&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(t)}o(e,"isValidRevisionID"),l.isValidRevisionID=e},o4xN:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=f("riVe"),u=f("XEV2"),m=f("GEtQ"),a=f("hlxM"),s=f("nWxe"),i=f("TdKi"),e=f("M9Lm"),n={useVoiceFocusAGC:!1,useBuiltInAGC:!0},r="stable-v1",c="https://static.sdkassets.chime.aws",p={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},g={latencyHint:0},d={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},d),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},d),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),w={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:s.default}},k=o((O,M)=>{if(O!==void 0&&!u.isValidAssetGroup(O))throw new Error(`Invalid asset group ${O}`);if(M!==void 0&&!u.isValidRevisionID(M))throw new Error(`Invalid revision ID ${M}`)},"validateAssetSpec"),V=o((O,M)=>{let D;if(M.useBuiltInAGC?D=y:D=E,!O)return{audio:D};if(!O.audio)return O;if(O.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},O),{audio:O.audio===!0?D:Object.assign(Object.assign({},O.audio),D)})},"mungeConstraints"),F=o((O,M)=>`${M.models}${h.decideModel(O)}.wasm`,"urlForModel");let N=o(class LS{static isSupported(M,D){const{fetchBehavior:J,logger:q}=D||{};if(typeof globalThis>"u")return q==null||q.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,q))return q==null||q.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,q))return q==null||q.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,q)||q==null||q.debug("Browser does not support streaming WASM compilation.");const{assetGroup:$=r,revisionID:de,paths:Ee=p}=M||{};k($,de);const _e=de?{revisionID:de}:{assetGroup:$},ye=u.addQueryParams(J,_e),Be=Object.assign(Object.assign({},ye),{paths:Ee});return a.supportsVoiceFocusWorker(globalThis,Be,q)}static mungeExecutionPreference(M,D){const J=M===void 0||M==="auto";if(a.isSafari(globalThis)){if(J||M==="inline")return"inline";if(!J)throw new Error(`Unsupported execution preference ${M}`)}if(M==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,D))throw new Error(`Unsupported execution preference ${M}`);return M||"auto"}static configure(M,D){return S(this,void 0,void 0,function*(){const{fetchBehavior:J,preResolve:q,logger:$}=D||{},{category:de="voicefocus",name:Ee="default",variant:_e="auto",assetGroup:ye=r,revisionID:Be,simd:pt="detect",executionPreference:Ve="auto",executionQuantaPreference:gt,usagePreference:dt="interactivity",estimatorBudget:Je=100,paths:_t=p,thresholds:ot}=M||{};if($==null||$.debug("Configuring Voice Focus with spec",M),de!==void 0&&de!=="voicefocus")throw new Error(`Unrecognized category ${de}`);if(Ee!==void 0&&Ee!=="default"&&Ee!=="ns_es")throw new Error(`Unrecognized feature name ${Ee}`);if(_e!==void 0&&!["auto","c100","c50","c20","c10"].includes(_e))throw new Error(`Unrecognized feature variant ${_e}`);if(gt!==void 0&&![1,2,3].includes(gt))throw new Error(`Unrecognized execution quanta preference ${gt}`);if(k(ye,Be),pt!==void 0&&!["detect","force","disable"].includes(pt))throw new Error(`Unrecognized SIMD option ${pt}`);if(Ve!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ve))throw new Error(`Unrecognized execution preference ${Ve}`);if(dt!==void 0&&!["quality","interactivity"].includes(dt))throw new Error(`Unrecognized usage preference ${dt}`);const Et={executionPreference:this.mungeExecutionPreference(Ve,$),usagePreference:dt,executionQuantaPreference:gt,variantPreference:_e,namePreference:Ee,simdPreference:pt,estimatorBudget:Je},Mt=Be?{revisionID:Be}:{assetGroup:ye},ze=u.addQueryParams(J,Mt),$t=Object.assign({paths:_t},ze),Un=yield h.measureAndDecideExecutionApproach(Et,$t,$,ot);if(Un.supported===!1)return{supported:!1,reason:Un.reason};$==null||$.info("Decided execution approach",Un);const{useSIMD:ni,processor:an,variant:Gn,executionQuanta:si}=Un,ri={category:de||"voicefocus",name:Ee||"default",variant:Gn,simd:ni};if(q){const On=F(ri,_t);ri.url=yield u.resolveURL(On,ze)}return{fetchConfig:$t,model:ri,processor:an,executionQuanta:si,supported:!0}})}static init(M,D){let{delegate:J,preload:q=!0,logger:$}=D;return S(this,void 0,void 0,function*(){if(M.supported===!1)throw new Error("Voice Focus not supported. Reason: "+M.reason);const{model:de,processor:Ee,fetchConfig:_e,executionQuanta:ye}=M,{simd:Be,name:pt}=de,{paths:Ve}=_e;if(Ee!=="voicefocus-inline-processor"&&Ee!=="voicefocus-worker-postMessage-processor"&&Ee!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${Ee}`);const gt=de.url||F(de,Ve);$==null||$.debug(`Using model URL ${gt}.`);const dt=`${Ve.wasm}audio_buffer-v1${Be?"_simd":""}.wasm`,Je=`${Ve.wasm}resampler-v1${Be?"_simd":""}.wasm`,_t=`${Ve.workers}worker-v1.js`,{file:ot,node:Et}=w[Ee],Mt=`${Ve.processors}${ot}`,ze=yield m.loadWorker(_t,"VoiceFocusWorker",_e,$);if(q){$==null||$.debug("Preloading",gt);let an=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";ze.postMessage({message:an,preload:!0,key:"model",fetchBehavior:_e,path:gt})}const Un={processor:Ee,worker:ze,audioBufferURL:dt,resamplerURL:Je,fetchBehavior:_e,modelURL:gt,delegate:J,logger:$,numberOfInputs:pt==="ns_es"?2:1},ni=new LS(ze,Mt,Et,Un,ye);return Promise.resolve(ni)})}createNode(M,D){var J;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:q=M.sampleRate===16e3?16e3:48e3,enabled:$=!0,agc:de=n}=D||{},Ee=D==null?void 0:D.es,_e={voiceFocusSampleRate:q,enabled:$,sendBufferCount:10,prefill:6,agc:de,executionQuanta:this.executionQuanta,supportFarendStream:Ee},ye=u.withQueryString(this.processorURL,(J=this.nodeOptions)===null||J===void 0?void 0:J.fetchBehavior);return M.audioWorklet.addModule(ye).then(()=>new this.nodeConstructor(M,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:_e})))}applyToStream(M,D,J){return S(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const q=D.createMediaStreamSource(M),$=yield this.applyToSourceNode(q,D,J),de=D.createMediaStreamDestination();return $.connect(de),{node:$,source:q,destination:de,stream:de.stream}})}applyToSourceNode(M,D,J){return S(this,void 0,void 0,function*(){const q=yield this.createNode(D,J);return M.connect(q),q})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(M,D,J,q,$){this.processorURL=D,this.nodeConstructor=J,this.nodeOptions=q,this.executionQuanta=$,this.internal={worker:M,nodeOptions:q,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=N;const P=o(function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;return new(window.AudioContext||window.webkitAudioContext)(O)},"createAudioContext");l.createAudioContext=P;const x=o((O,M,D)=>S(void 0,void 0,void 0,function*(){var J,q;const{constraints:$,spec:de,delegate:Ee,preload:_e=!0,options:ye}=M,{logger:Be}=D,pt=yield N.configure(de,D);if(!pt.supported)return(J=D.logger)===null||J===void 0||J.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia($);const Ve=yield N.init(pt,{delegate:Ee,preload:_e,logger:Be}),gt=((q=M.options)===null||q===void 0?void 0:q.agc)||n,dt=yield window.navigator.mediaDevices.getUserMedia(V($,gt));return Ve.applyToStream(dt,O,ye).then(Je=>Je.stream)}),"getAudioInput");l.getAudioInput=x},o5nl:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("cKqT")),u=S(f("HCbE"));let m=o(class{create(){return new h.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(s){return new u.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,s)}constructor(s,i,e){this.fixedWaitMs=s,this.shortBackoffMs=i,this.longBackoffMs=e}},"FullJitterBackoffFactory");l.default=m},oHvd:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(u){this.currentData=u}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const u=this.health();return u!==this.currentHealth?(this.currentHealth=u,u):null}constructor(u,m,a){this.minHealth=u.minHealth,this.maxHealth=u.maxHealth,this.currentHealth=u.initialHealth,this.currentData=m.clone(),this.name=a}},"BaseConnectionHealthPolicy");l.default=S},oJqn:function(j,l,f){"use strict";f.d(l,"a",function(){return i});var S=f("VDtp"),h=f.n(S);const u=S.Reader,m=S.Writer,a=S.util,s=S.roots.default||(S.roots.default={}),i=s.slack=(()=>{const e={};return e.calls=function(){const t={};return t.analytics=function(){const n={};return n.RecvMedia=function(){function r(p){if(p)for(let g=Object.keys(p),d=0;d<g.length;++d)p[g[d]]!=null&&(this[g[d]]=p[g[d]])}o(r,"RecvMedia"),r.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.bytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.packetsReceived=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.fractionLost=0,r.prototype.jitter=0,r.prototype.packetsLost=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.codec=0,r.prototype.userId="",r.prototype.peerIdString="",r.prototype.audioStats=null,r.prototype.videoStats=null;let c;return Object.defineProperty(r.prototype,"mediaType",{get:a.oneOfGetter(c=["audioStats","videoStats"]),set:a.oneOfSetter(c)}),r.create=o(function(g){return new r(g)},"create"),r.encode=o(function(g,d){return d||(d=m.create()),g.peerId!=null&&Object.hasOwnProperty.call(g,"peerId")&&d.uint32(8).uint64(g.peerId),g.bytesReceived!=null&&Object.hasOwnProperty.call(g,"bytesReceived")&&d.uint32(16).uint64(g.bytesReceived),g.packetsReceived!=null&&Object.hasOwnProperty.call(g,"packetsReceived")&&d.uint32(24).uint64(g.packetsReceived),g.fractionLost!=null&&Object.hasOwnProperty.call(g,"fractionLost")&&d.uint32(33).double(g.fractionLost),g.jitter!=null&&Object.hasOwnProperty.call(g,"jitter")&&d.uint32(41).double(g.jitter),g.packetsLost!=null&&Object.hasOwnProperty.call(g,"packetsLost")&&d.uint32(48).uint64(g.packetsLost),g.codec!=null&&Object.hasOwnProperty.call(g,"codec")&&d.uint32(56).int32(g.codec),g.audioStats!=null&&Object.hasOwnProperty.call(g,"audioStats")&&s.slack.calls.analytics.RecvMedia.Audio.encode(g.audioStats,d.uint32(66).fork()).ldelim(),g.videoStats!=null&&Object.hasOwnProperty.call(g,"videoStats")&&s.slack.calls.analytics.RecvMedia.Video.encode(g.videoStats,d.uint32(74).fork()).ldelim(),g.userId!=null&&Object.hasOwnProperty.call(g,"userId")&&d.uint32(82).string(g.userId),g.peerIdString!=null&&Object.hasOwnProperty.call(g,"peerIdString")&&d.uint32(90).string(g.peerIdString),d},"encode"),r.encodeDelimited=o(function(g,d){return this.encode(g,d).ldelim()},"encodeDelimited"),r.decode=o(function(g,d){g instanceof u||(g=u.create(g));let y=d===void 0?g.len:g.pos+d,E=new s.slack.calls.analytics.RecvMedia;for(;g.pos<y;){let w=g.uint32();switch(w>>>3){case 1:{E.peerId=g.uint64();break}case 2:{E.bytesReceived=g.uint64();break}case 3:{E.packetsReceived=g.uint64();break}case 4:{E.fractionLost=g.double();break}case 5:{E.jitter=g.double();break}case 6:{E.packetsLost=g.uint64();break}case 7:{E.codec=g.int32();break}case 10:{E.userId=g.string();break}case 11:{E.peerIdString=g.string();break}case 8:{E.audioStats=s.slack.calls.analytics.RecvMedia.Audio.decode(g,g.uint32());break}case 9:{E.videoStats=s.slack.calls.analytics.RecvMedia.Video.decode(g,g.uint32());break}default:g.skipType(w&7);break}}return E},"decode"),r.decodeDelimited=o(function(g){return g instanceof u||(g=new u(g)),this.decode(g,g.uint32())},"decodeDelimited"),r.verify=o(function(g){if(typeof g!="object"||g===null)return"object expected";let d={};if(g.peerId!=null&&g.hasOwnProperty("peerId")&&!a.isInteger(g.peerId)&&!(g.peerId&&a.isInteger(g.peerId.low)&&a.isInteger(g.peerId.high)))return"peerId: integer|Long expected";if(g.bytesReceived!=null&&g.hasOwnProperty("bytesReceived")&&!a.isInteger(g.bytesReceived)&&!(g.bytesReceived&&a.isInteger(g.bytesReceived.low)&&a.isInteger(g.bytesReceived.high)))return"bytesReceived: integer|Long expected";if(g.packetsReceived!=null&&g.hasOwnProperty("packetsReceived")&&!a.isInteger(g.packetsReceived)&&!(g.packetsReceived&&a.isInteger(g.packetsReceived.low)&&a.isInteger(g.packetsReceived.high)))return"packetsReceived: integer|Long expected";if(g.fractionLost!=null&&g.hasOwnProperty("fractionLost")&&typeof g.fractionLost!="number")return"fractionLost: number expected";if(g.jitter!=null&&g.hasOwnProperty("jitter")&&typeof g.jitter!="number")return"jitter: number expected";if(g.packetsLost!=null&&g.hasOwnProperty("packetsLost")&&!a.isInteger(g.packetsLost)&&!(g.packetsLost&&a.isInteger(g.packetsLost.low)&&a.isInteger(g.packetsLost.high)))return"packetsLost: integer|Long expected";if(g.codec!=null&&g.hasOwnProperty("codec"))switch(g.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(g.userId!=null&&g.hasOwnProperty("userId")&&!a.isString(g.userId))return"userId: string expected";if(g.peerIdString!=null&&g.hasOwnProperty("peerIdString")&&!a.isString(g.peerIdString))return"peerIdString: string expected";if(g.audioStats!=null&&g.hasOwnProperty("audioStats")){d.mediaType=1;{let y=s.slack.calls.analytics.RecvMedia.Audio.verify(g.audioStats);if(y)return"audioStats."+y}}if(g.videoStats!=null&&g.hasOwnProperty("videoStats")){if(d.mediaType===1)return"mediaType: multiple values";d.mediaType=1;{let y=s.slack.calls.analytics.RecvMedia.Video.verify(g.videoStats);if(y)return"videoStats."+y}}return null},"verify"),r.fromObject=o(function(g){if(g instanceof s.slack.calls.analytics.RecvMedia)return g;let d=new s.slack.calls.analytics.RecvMedia;switch(g.peerId!=null&&(a.Long?(d.peerId=a.Long.fromValue(g.peerId)).unsigned=!0:typeof g.peerId=="string"?d.peerId=parseInt(g.peerId,10):typeof g.peerId=="number"?d.peerId=g.peerId:typeof g.peerId=="object"&&(d.peerId=new a.LongBits(g.peerId.low>>>0,g.peerId.high>>>0).toNumber(!0))),g.bytesReceived!=null&&(a.Long?(d.bytesReceived=a.Long.fromValue(g.bytesReceived)).unsigned=!0:typeof g.bytesReceived=="string"?d.bytesReceived=parseInt(g.bytesReceived,10):typeof g.bytesReceived=="number"?d.bytesReceived=g.bytesReceived:typeof g.bytesReceived=="object"&&(d.bytesReceived=new a.LongBits(g.bytesReceived.low>>>0,g.bytesReceived.high>>>0).toNumber(!0))),g.packetsReceived!=null&&(a.Long?(d.packetsReceived=a.Long.fromValue(g.packetsReceived)).unsigned=!0:typeof g.packetsReceived=="string"?d.packetsReceived=parseInt(g.packetsReceived,10):typeof g.packetsReceived=="number"?d.packetsReceived=g.packetsReceived:typeof g.packetsReceived=="object"&&(d.packetsReceived=new a.LongBits(g.packetsReceived.low>>>0,g.packetsReceived.high>>>0).toNumber(!0))),g.fractionLost!=null&&(d.fractionLost=Number(g.fractionLost)),g.jitter!=null&&(d.jitter=Number(g.jitter)),g.packetsLost!=null&&(a.Long?(d.packetsLost=a.Long.fromValue(g.packetsLost)).unsigned=!0:typeof g.packetsLost=="string"?d.packetsLost=parseInt(g.packetsLost,10):typeof g.packetsLost=="number"?d.packetsLost=g.packetsLost:typeof g.packetsLost=="object"&&(d.packetsLost=new a.LongBits(g.packetsLost.low>>>0,g.packetsLost.high>>>0).toNumber(!0))),g.codec){default:if(typeof g.codec=="number"){d.codec=g.codec;break}break;case"UNKNOWN":case 0:d.codec=0;break;case"OPUS":case 1:d.codec=1;break;case"VP8":case 2:d.codec=2;break;case"VP9":case 3:d.codec=3;break;case"H264":case 4:d.codec=4;break}if(g.userId!=null&&(d.userId=String(g.userId)),g.peerIdString!=null&&(d.peerIdString=String(g.peerIdString)),g.audioStats!=null){if(typeof g.audioStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.audioStats: object expected");d.audioStats=s.slack.calls.analytics.RecvMedia.Audio.fromObject(g.audioStats)}if(g.videoStats!=null){if(typeof g.videoStats!="object")throw TypeError(".slack.calls.analytics.RecvMedia.videoStats: object expected");d.videoStats=s.slack.calls.analytics.RecvMedia.Video.fromObject(g.videoStats)}return d},"fromObject"),r.toObject=o(function(g,d){d||(d={});let y={};if(d.defaults){if(a.Long){let E=new a.Long(0,0,!0);y.peerId=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.peerId=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.bytesReceived=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.bytesReceived=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.packetsReceived=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.packetsReceived=d.longs===String?"0":0;if(y.fractionLost=0,y.jitter=0,a.Long){let E=new a.Long(0,0,!0);y.packetsLost=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.packetsLost=d.longs===String?"0":0;y.codec=d.enums===String?"UNKNOWN":0,y.userId="",y.peerIdString=""}return g.peerId!=null&&g.hasOwnProperty("peerId")&&(typeof g.peerId=="number"?y.peerId=d.longs===String?String(g.peerId):g.peerId:y.peerId=d.longs===String?a.Long.prototype.toString.call(g.peerId):d.longs===Number?new a.LongBits(g.peerId.low>>>0,g.peerId.high>>>0).toNumber(!0):g.peerId),g.bytesReceived!=null&&g.hasOwnProperty("bytesReceived")&&(typeof g.bytesReceived=="number"?y.bytesReceived=d.longs===String?String(g.bytesReceived):g.bytesReceived:y.bytesReceived=d.longs===String?a.Long.prototype.toString.call(g.bytesReceived):d.longs===Number?new a.LongBits(g.bytesReceived.low>>>0,g.bytesReceived.high>>>0).toNumber(!0):g.bytesReceived),g.packetsReceived!=null&&g.hasOwnProperty("packetsReceived")&&(typeof g.packetsReceived=="number"?y.packetsReceived=d.longs===String?String(g.packetsReceived):g.packetsReceived:y.packetsReceived=d.longs===String?a.Long.prototype.toString.call(g.packetsReceived):d.longs===Number?new a.LongBits(g.packetsReceived.low>>>0,g.packetsReceived.high>>>0).toNumber(!0):g.packetsReceived),g.fractionLost!=null&&g.hasOwnProperty("fractionLost")&&(y.fractionLost=d.json&&!isFinite(g.fractionLost)?String(g.fractionLost):g.fractionLost),g.jitter!=null&&g.hasOwnProperty("jitter")&&(y.jitter=d.json&&!isFinite(g.jitter)?String(g.jitter):g.jitter),g.packetsLost!=null&&g.hasOwnProperty("packetsLost")&&(typeof g.packetsLost=="number"?y.packetsLost=d.longs===String?String(g.packetsLost):g.packetsLost:y.packetsLost=d.longs===String?a.Long.prototype.toString.call(g.packetsLost):d.longs===Number?new a.LongBits(g.packetsLost.low>>>0,g.packetsLost.high>>>0).toNumber(!0):g.packetsLost),g.codec!=null&&g.hasOwnProperty("codec")&&(y.codec=d.enums===String?s.slack.calls.analytics.Codec[g.codec]===void 0?g.codec:s.slack.calls.analytics.Codec[g.codec]:g.codec),g.audioStats!=null&&g.hasOwnProperty("audioStats")&&(y.audioStats=s.slack.calls.analytics.RecvMedia.Audio.toObject(g.audioStats,d),d.oneofs&&(y.mediaType="audioStats")),g.videoStats!=null&&g.hasOwnProperty("videoStats")&&(y.videoStats=s.slack.calls.analytics.RecvMedia.Video.toObject(g.videoStats,d),d.oneofs&&(y.mediaType="videoStats")),g.userId!=null&&g.hasOwnProperty("userId")&&(y.userId=g.userId),g.peerIdString!=null&&g.hasOwnProperty("peerIdString")&&(y.peerIdString=g.peerIdString),y},"toObject"),r.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),r.getTypeUrl=o(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.RecvMedia"},"getTypeUrl"),r.Audio=function(){function p(g){if(g)for(let d=Object.keys(g),y=0;y<d.length;++y)g[d[y]]!=null&&(this[d[y]]=g[d[y]])}return o(p,"Audio"),p.prototype.audioLevel=0,p.prototype.jitterBufferDelay=0,p.prototype.concealmentEvents=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.concealedSamples=a.Long?a.Long.fromBits(0,0,!0):0,p.create=o(function(d){return new p(d)},"create"),p.encode=o(function(d,y){return y||(y=m.create()),d.audioLevel!=null&&Object.hasOwnProperty.call(d,"audioLevel")&&y.uint32(9).double(d.audioLevel),d.jitterBufferDelay!=null&&Object.hasOwnProperty.call(d,"jitterBufferDelay")&&y.uint32(17).double(d.jitterBufferDelay),d.concealmentEvents!=null&&Object.hasOwnProperty.call(d,"concealmentEvents")&&y.uint32(24).uint64(d.concealmentEvents),d.concealedSamples!=null&&Object.hasOwnProperty.call(d,"concealedSamples")&&y.uint32(32).uint64(d.concealedSamples),y},"encode"),p.encodeDelimited=o(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=o(function(d,y){d instanceof u||(d=u.create(d));let E=y===void 0?d.len:d.pos+y,w=new s.slack.calls.analytics.RecvMedia.Audio;for(;d.pos<E;){let k=d.uint32();switch(k>>>3){case 1:{w.audioLevel=d.double();break}case 2:{w.jitterBufferDelay=d.double();break}case 3:{w.concealmentEvents=d.uint64();break}case 4:{w.concealedSamples=d.uint64();break}default:d.skipType(k&7);break}}return w},"decode"),p.decodeDelimited=o(function(d){return d instanceof u||(d=new u(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=o(function(d){return typeof d!="object"||d===null?"object expected":d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&typeof d.audioLevel!="number"?"audioLevel: number expected":d.jitterBufferDelay!=null&&d.hasOwnProperty("jitterBufferDelay")&&typeof d.jitterBufferDelay!="number"?"jitterBufferDelay: number expected":d.concealmentEvents!=null&&d.hasOwnProperty("concealmentEvents")&&!a.isInteger(d.concealmentEvents)&&!(d.concealmentEvents&&a.isInteger(d.concealmentEvents.low)&&a.isInteger(d.concealmentEvents.high))?"concealmentEvents: integer|Long expected":d.concealedSamples!=null&&d.hasOwnProperty("concealedSamples")&&!a.isInteger(d.concealedSamples)&&!(d.concealedSamples&&a.isInteger(d.concealedSamples.low)&&a.isInteger(d.concealedSamples.high))?"concealedSamples: integer|Long expected":null},"verify"),p.fromObject=o(function(d){if(d instanceof s.slack.calls.analytics.RecvMedia.Audio)return d;let y=new s.slack.calls.analytics.RecvMedia.Audio;return d.audioLevel!=null&&(y.audioLevel=Number(d.audioLevel)),d.jitterBufferDelay!=null&&(y.jitterBufferDelay=Number(d.jitterBufferDelay)),d.concealmentEvents!=null&&(a.Long?(y.concealmentEvents=a.Long.fromValue(d.concealmentEvents)).unsigned=!0:typeof d.concealmentEvents=="string"?y.concealmentEvents=parseInt(d.concealmentEvents,10):typeof d.concealmentEvents=="number"?y.concealmentEvents=d.concealmentEvents:typeof d.concealmentEvents=="object"&&(y.concealmentEvents=new a.LongBits(d.concealmentEvents.low>>>0,d.concealmentEvents.high>>>0).toNumber(!0))),d.concealedSamples!=null&&(a.Long?(y.concealedSamples=a.Long.fromValue(d.concealedSamples)).unsigned=!0:typeof d.concealedSamples=="string"?y.concealedSamples=parseInt(d.concealedSamples,10):typeof d.concealedSamples=="number"?y.concealedSamples=d.concealedSamples:typeof d.concealedSamples=="object"&&(y.concealedSamples=new a.LongBits(d.concealedSamples.low>>>0,d.concealedSamples.high>>>0).toNumber(!0))),y},"fromObject"),p.toObject=o(function(d,y){y||(y={});let E={};if(y.defaults){if(E.audioLevel=0,E.jitterBufferDelay=0,a.Long){let w=new a.Long(0,0,!0);E.concealmentEvents=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.concealmentEvents=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.concealedSamples=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.concealedSamples=y.longs===String?"0":0}return d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&(E.audioLevel=y.json&&!isFinite(d.audioLevel)?String(d.audioLevel):d.audioLevel),d.jitterBufferDelay!=null&&d.hasOwnProperty("jitterBufferDelay")&&(E.jitterBufferDelay=y.json&&!isFinite(d.jitterBufferDelay)?String(d.jitterBufferDelay):d.jitterBufferDelay),d.concealmentEvents!=null&&d.hasOwnProperty("concealmentEvents")&&(typeof d.concealmentEvents=="number"?E.concealmentEvents=y.longs===String?String(d.concealmentEvents):d.concealmentEvents:E.concealmentEvents=y.longs===String?a.Long.prototype.toString.call(d.concealmentEvents):y.longs===Number?new a.LongBits(d.concealmentEvents.low>>>0,d.concealmentEvents.high>>>0).toNumber(!0):d.concealmentEvents),d.concealedSamples!=null&&d.hasOwnProperty("concealedSamples")&&(typeof d.concealedSamples=="number"?E.concealedSamples=y.longs===String?String(d.concealedSamples):d.concealedSamples:E.concealedSamples=y.longs===String?a.Long.prototype.toString.call(d.concealedSamples):y.longs===Number?new a.LongBits(d.concealedSamples.low>>>0,d.concealedSamples.high>>>0).toNumber(!0):d.concealedSamples),E},"toObject"),p.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),p.getTypeUrl=o(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.RecvMedia.Audio"},"getTypeUrl"),p}(),r.Video=function(){function p(g){if(g)for(let d=Object.keys(g),y=0;y<d.length;++y)g[d[y]]!=null&&(this[d[y]]=g[d[y]])}return o(p,"Video"),p.prototype.firCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.nackCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.pliCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.sliCount=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesPerSecond=0,p.prototype.framesCorrupted=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesDecoded=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesDropped=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesReceived=a.Long?a.Long.fromBits(0,0,!0):0,p.create=o(function(d){return new p(d)},"create"),p.encode=o(function(d,y){return y||(y=m.create()),d.firCount!=null&&Object.hasOwnProperty.call(d,"firCount")&&y.uint32(8).uint64(d.firCount),d.nackCount!=null&&Object.hasOwnProperty.call(d,"nackCount")&&y.uint32(16).uint64(d.nackCount),d.pliCount!=null&&Object.hasOwnProperty.call(d,"pliCount")&&y.uint32(24).uint64(d.pliCount),d.sliCount!=null&&Object.hasOwnProperty.call(d,"sliCount")&&y.uint32(32).uint64(d.sliCount),d.frameHeight!=null&&Object.hasOwnProperty.call(d,"frameHeight")&&y.uint32(40).uint64(d.frameHeight),d.frameWidth!=null&&Object.hasOwnProperty.call(d,"frameWidth")&&y.uint32(48).uint64(d.frameWidth),d.framesPerSecond!=null&&Object.hasOwnProperty.call(d,"framesPerSecond")&&y.uint32(57).double(d.framesPerSecond),d.framesCorrupted!=null&&Object.hasOwnProperty.call(d,"framesCorrupted")&&y.uint32(64).uint64(d.framesCorrupted),d.framesDecoded!=null&&Object.hasOwnProperty.call(d,"framesDecoded")&&y.uint32(72).uint64(d.framesDecoded),d.framesDropped!=null&&Object.hasOwnProperty.call(d,"framesDropped")&&y.uint32(80).uint64(d.framesDropped),d.framesReceived!=null&&Object.hasOwnProperty.call(d,"framesReceived")&&y.uint32(88).uint64(d.framesReceived),y},"encode"),p.encodeDelimited=o(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=o(function(d,y){d instanceof u||(d=u.create(d));let E=y===void 0?d.len:d.pos+y,w=new s.slack.calls.analytics.RecvMedia.Video;for(;d.pos<E;){let k=d.uint32();switch(k>>>3){case 1:{w.firCount=d.uint64();break}case 2:{w.nackCount=d.uint64();break}case 3:{w.pliCount=d.uint64();break}case 4:{w.sliCount=d.uint64();break}case 5:{w.frameHeight=d.uint64();break}case 6:{w.frameWidth=d.uint64();break}case 7:{w.framesPerSecond=d.double();break}case 8:{w.framesCorrupted=d.uint64();break}case 9:{w.framesDecoded=d.uint64();break}case 10:{w.framesDropped=d.uint64();break}case 11:{w.framesReceived=d.uint64();break}default:d.skipType(k&7);break}}return w},"decode"),p.decodeDelimited=o(function(d){return d instanceof u||(d=new u(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=o(function(d){return typeof d!="object"||d===null?"object expected":d.firCount!=null&&d.hasOwnProperty("firCount")&&!a.isInteger(d.firCount)&&!(d.firCount&&a.isInteger(d.firCount.low)&&a.isInteger(d.firCount.high))?"firCount: integer|Long expected":d.nackCount!=null&&d.hasOwnProperty("nackCount")&&!a.isInteger(d.nackCount)&&!(d.nackCount&&a.isInteger(d.nackCount.low)&&a.isInteger(d.nackCount.high))?"nackCount: integer|Long expected":d.pliCount!=null&&d.hasOwnProperty("pliCount")&&!a.isInteger(d.pliCount)&&!(d.pliCount&&a.isInteger(d.pliCount.low)&&a.isInteger(d.pliCount.high))?"pliCount: integer|Long expected":d.sliCount!=null&&d.hasOwnProperty("sliCount")&&!a.isInteger(d.sliCount)&&!(d.sliCount&&a.isInteger(d.sliCount.low)&&a.isInteger(d.sliCount.high))?"sliCount: integer|Long expected":d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&!a.isInteger(d.frameHeight)&&!(d.frameHeight&&a.isInteger(d.frameHeight.low)&&a.isInteger(d.frameHeight.high))?"frameHeight: integer|Long expected":d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&!a.isInteger(d.frameWidth)&&!(d.frameWidth&&a.isInteger(d.frameWidth.low)&&a.isInteger(d.frameWidth.high))?"frameWidth: integer|Long expected":d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&typeof d.framesPerSecond!="number"?"framesPerSecond: number expected":d.framesCorrupted!=null&&d.hasOwnProperty("framesCorrupted")&&!a.isInteger(d.framesCorrupted)&&!(d.framesCorrupted&&a.isInteger(d.framesCorrupted.low)&&a.isInteger(d.framesCorrupted.high))?"framesCorrupted: integer|Long expected":d.framesDecoded!=null&&d.hasOwnProperty("framesDecoded")&&!a.isInteger(d.framesDecoded)&&!(d.framesDecoded&&a.isInteger(d.framesDecoded.low)&&a.isInteger(d.framesDecoded.high))?"framesDecoded: integer|Long expected":d.framesDropped!=null&&d.hasOwnProperty("framesDropped")&&!a.isInteger(d.framesDropped)&&!(d.framesDropped&&a.isInteger(d.framesDropped.low)&&a.isInteger(d.framesDropped.high))?"framesDropped: integer|Long expected":d.framesReceived!=null&&d.hasOwnProperty("framesReceived")&&!a.isInteger(d.framesReceived)&&!(d.framesReceived&&a.isInteger(d.framesReceived.low)&&a.isInteger(d.framesReceived.high))?"framesReceived: integer|Long expected":null},"verify"),p.fromObject=o(function(d){if(d instanceof s.slack.calls.analytics.RecvMedia.Video)return d;let y=new s.slack.calls.analytics.RecvMedia.Video;return d.firCount!=null&&(a.Long?(y.firCount=a.Long.fromValue(d.firCount)).unsigned=!0:typeof d.firCount=="string"?y.firCount=parseInt(d.firCount,10):typeof d.firCount=="number"?y.firCount=d.firCount:typeof d.firCount=="object"&&(y.firCount=new a.LongBits(d.firCount.low>>>0,d.firCount.high>>>0).toNumber(!0))),d.nackCount!=null&&(a.Long?(y.nackCount=a.Long.fromValue(d.nackCount)).unsigned=!0:typeof d.nackCount=="string"?y.nackCount=parseInt(d.nackCount,10):typeof d.nackCount=="number"?y.nackCount=d.nackCount:typeof d.nackCount=="object"&&(y.nackCount=new a.LongBits(d.nackCount.low>>>0,d.nackCount.high>>>0).toNumber(!0))),d.pliCount!=null&&(a.Long?(y.pliCount=a.Long.fromValue(d.pliCount)).unsigned=!0:typeof d.pliCount=="string"?y.pliCount=parseInt(d.pliCount,10):typeof d.pliCount=="number"?y.pliCount=d.pliCount:typeof d.pliCount=="object"&&(y.pliCount=new a.LongBits(d.pliCount.low>>>0,d.pliCount.high>>>0).toNumber(!0))),d.sliCount!=null&&(a.Long?(y.sliCount=a.Long.fromValue(d.sliCount)).unsigned=!0:typeof d.sliCount=="string"?y.sliCount=parseInt(d.sliCount,10):typeof d.sliCount=="number"?y.sliCount=d.sliCount:typeof d.sliCount=="object"&&(y.sliCount=new a.LongBits(d.sliCount.low>>>0,d.sliCount.high>>>0).toNumber(!0))),d.frameHeight!=null&&(a.Long?(y.frameHeight=a.Long.fromValue(d.frameHeight)).unsigned=!0:typeof d.frameHeight=="string"?y.frameHeight=parseInt(d.frameHeight,10):typeof d.frameHeight=="number"?y.frameHeight=d.frameHeight:typeof d.frameHeight=="object"&&(y.frameHeight=new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0))),d.frameWidth!=null&&(a.Long?(y.frameWidth=a.Long.fromValue(d.frameWidth)).unsigned=!0:typeof d.frameWidth=="string"?y.frameWidth=parseInt(d.frameWidth,10):typeof d.frameWidth=="number"?y.frameWidth=d.frameWidth:typeof d.frameWidth=="object"&&(y.frameWidth=new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0))),d.framesPerSecond!=null&&(y.framesPerSecond=Number(d.framesPerSecond)),d.framesCorrupted!=null&&(a.Long?(y.framesCorrupted=a.Long.fromValue(d.framesCorrupted)).unsigned=!0:typeof d.framesCorrupted=="string"?y.framesCorrupted=parseInt(d.framesCorrupted,10):typeof d.framesCorrupted=="number"?y.framesCorrupted=d.framesCorrupted:typeof d.framesCorrupted=="object"&&(y.framesCorrupted=new a.LongBits(d.framesCorrupted.low>>>0,d.framesCorrupted.high>>>0).toNumber(!0))),d.framesDecoded!=null&&(a.Long?(y.framesDecoded=a.Long.fromValue(d.framesDecoded)).unsigned=!0:typeof d.framesDecoded=="string"?y.framesDecoded=parseInt(d.framesDecoded,10):typeof d.framesDecoded=="number"?y.framesDecoded=d.framesDecoded:typeof d.framesDecoded=="object"&&(y.framesDecoded=new a.LongBits(d.framesDecoded.low>>>0,d.framesDecoded.high>>>0).toNumber(!0))),d.framesDropped!=null&&(a.Long?(y.framesDropped=a.Long.fromValue(d.framesDropped)).unsigned=!0:typeof d.framesDropped=="string"?y.framesDropped=parseInt(d.framesDropped,10):typeof d.framesDropped=="number"?y.framesDropped=d.framesDropped:typeof d.framesDropped=="object"&&(y.framesDropped=new a.LongBits(d.framesDropped.low>>>0,d.framesDropped.high>>>0).toNumber(!0))),d.framesReceived!=null&&(a.Long?(y.framesReceived=a.Long.fromValue(d.framesReceived)).unsigned=!0:typeof d.framesReceived=="string"?y.framesReceived=parseInt(d.framesReceived,10):typeof d.framesReceived=="number"?y.framesReceived=d.framesReceived:typeof d.framesReceived=="object"&&(y.framesReceived=new a.LongBits(d.framesReceived.low>>>0,d.framesReceived.high>>>0).toNumber(!0))),y},"fromObject"),p.toObject=o(function(d,y){y||(y={});let E={};if(y.defaults){if(a.Long){let w=new a.Long(0,0,!0);E.firCount=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.firCount=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.nackCount=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.nackCount=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.pliCount=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.pliCount=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.sliCount=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.sliCount=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.frameHeight=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.frameHeight=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.frameWidth=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.frameWidth=y.longs===String?"0":0;if(E.framesPerSecond=0,a.Long){let w=new a.Long(0,0,!0);E.framesCorrupted=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.framesCorrupted=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.framesDecoded=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.framesDecoded=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.framesDropped=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.framesDropped=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.framesReceived=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.framesReceived=y.longs===String?"0":0}return d.firCount!=null&&d.hasOwnProperty("firCount")&&(typeof d.firCount=="number"?E.firCount=y.longs===String?String(d.firCount):d.firCount:E.firCount=y.longs===String?a.Long.prototype.toString.call(d.firCount):y.longs===Number?new a.LongBits(d.firCount.low>>>0,d.firCount.high>>>0).toNumber(!0):d.firCount),d.nackCount!=null&&d.hasOwnProperty("nackCount")&&(typeof d.nackCount=="number"?E.nackCount=y.longs===String?String(d.nackCount):d.nackCount:E.nackCount=y.longs===String?a.Long.prototype.toString.call(d.nackCount):y.longs===Number?new a.LongBits(d.nackCount.low>>>0,d.nackCount.high>>>0).toNumber(!0):d.nackCount),d.pliCount!=null&&d.hasOwnProperty("pliCount")&&(typeof d.pliCount=="number"?E.pliCount=y.longs===String?String(d.pliCount):d.pliCount:E.pliCount=y.longs===String?a.Long.prototype.toString.call(d.pliCount):y.longs===Number?new a.LongBits(d.pliCount.low>>>0,d.pliCount.high>>>0).toNumber(!0):d.pliCount),d.sliCount!=null&&d.hasOwnProperty("sliCount")&&(typeof d.sliCount=="number"?E.sliCount=y.longs===String?String(d.sliCount):d.sliCount:E.sliCount=y.longs===String?a.Long.prototype.toString.call(d.sliCount):y.longs===Number?new a.LongBits(d.sliCount.low>>>0,d.sliCount.high>>>0).toNumber(!0):d.sliCount),d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&(typeof d.frameHeight=="number"?E.frameHeight=y.longs===String?String(d.frameHeight):d.frameHeight:E.frameHeight=y.longs===String?a.Long.prototype.toString.call(d.frameHeight):y.longs===Number?new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0):d.frameHeight),d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&(typeof d.frameWidth=="number"?E.frameWidth=y.longs===String?String(d.frameWidth):d.frameWidth:E.frameWidth=y.longs===String?a.Long.prototype.toString.call(d.frameWidth):y.longs===Number?new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0):d.frameWidth),d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=y.json&&!isFinite(d.framesPerSecond)?String(d.framesPerSecond):d.framesPerSecond),d.framesCorrupted!=null&&d.hasOwnProperty("framesCorrupted")&&(typeof d.framesCorrupted=="number"?E.framesCorrupted=y.longs===String?String(d.framesCorrupted):d.framesCorrupted:E.framesCorrupted=y.longs===String?a.Long.prototype.toString.call(d.framesCorrupted):y.longs===Number?new a.LongBits(d.framesCorrupted.low>>>0,d.framesCorrupted.high>>>0).toNumber(!0):d.framesCorrupted),d.framesDecoded!=null&&d.hasOwnProperty("framesDecoded")&&(typeof d.framesDecoded=="number"?E.framesDecoded=y.longs===String?String(d.framesDecoded):d.framesDecoded:E.framesDecoded=y.longs===String?a.Long.prototype.toString.call(d.framesDecoded):y.longs===Number?new a.LongBits(d.framesDecoded.low>>>0,d.framesDecoded.high>>>0).toNumber(!0):d.framesDecoded),d.framesDropped!=null&&d.hasOwnProperty("framesDropped")&&(typeof d.framesDropped=="number"?E.framesDropped=y.longs===String?String(d.framesDropped):d.framesDropped:E.framesDropped=y.longs===String?a.Long.prototype.toString.call(d.framesDropped):y.longs===Number?new a.LongBits(d.framesDropped.low>>>0,d.framesDropped.high>>>0).toNumber(!0):d.framesDropped),d.framesReceived!=null&&d.hasOwnProperty("framesReceived")&&(typeof d.framesReceived=="number"?E.framesReceived=y.longs===String?String(d.framesReceived):d.framesReceived:E.framesReceived=y.longs===String?a.Long.prototype.toString.call(d.framesReceived):y.longs===Number?new a.LongBits(d.framesReceived.low>>>0,d.framesReceived.high>>>0).toNumber(!0):d.framesReceived),E},"toObject"),p.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),p.getTypeUrl=o(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.RecvMedia.Video"},"getTypeUrl"),p}(),r}(),n.SendMedia=function(){function r(p){if(p)for(let g=Object.keys(p),d=0;d<g.length;++d)p[g[d]]!=null&&(this[g[d]]=p[g[d]])}o(r,"SendMedia"),r.prototype.peerId=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.bytesSent=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.packetsSent=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.codec=0,r.prototype.peerIdString="",r.prototype.audioStats=null,r.prototype.videoStats=null;let c;return Object.defineProperty(r.prototype,"mediaType",{get:a.oneOfGetter(c=["audioStats","videoStats"]),set:a.oneOfSetter(c)}),r.create=o(function(g){return new r(g)},"create"),r.encode=o(function(g,d){return d||(d=m.create()),g.peerId!=null&&Object.hasOwnProperty.call(g,"peerId")&&d.uint32(8).uint64(g.peerId),g.bytesSent!=null&&Object.hasOwnProperty.call(g,"bytesSent")&&d.uint32(16).uint64(g.bytesSent),g.packetsSent!=null&&Object.hasOwnProperty.call(g,"packetsSent")&&d.uint32(24).uint64(g.packetsSent),g.codec!=null&&Object.hasOwnProperty.call(g,"codec")&&d.uint32(32).int32(g.codec),g.audioStats!=null&&Object.hasOwnProperty.call(g,"audioStats")&&s.slack.calls.analytics.SendMedia.Audio.encode(g.audioStats,d.uint32(42).fork()).ldelim(),g.videoStats!=null&&Object.hasOwnProperty.call(g,"videoStats")&&s.slack.calls.analytics.SendMedia.Video.encode(g.videoStats,d.uint32(50).fork()).ldelim(),g.peerIdString!=null&&Object.hasOwnProperty.call(g,"peerIdString")&&d.uint32(58).string(g.peerIdString),d},"encode"),r.encodeDelimited=o(function(g,d){return this.encode(g,d).ldelim()},"encodeDelimited"),r.decode=o(function(g,d){g instanceof u||(g=u.create(g));let y=d===void 0?g.len:g.pos+d,E=new s.slack.calls.analytics.SendMedia;for(;g.pos<y;){let w=g.uint32();switch(w>>>3){case 1:{E.peerId=g.uint64();break}case 2:{E.bytesSent=g.uint64();break}case 3:{E.packetsSent=g.uint64();break}case 4:{E.codec=g.int32();break}case 7:{E.peerIdString=g.string();break}case 5:{E.audioStats=s.slack.calls.analytics.SendMedia.Audio.decode(g,g.uint32());break}case 6:{E.videoStats=s.slack.calls.analytics.SendMedia.Video.decode(g,g.uint32());break}default:g.skipType(w&7);break}}return E},"decode"),r.decodeDelimited=o(function(g){return g instanceof u||(g=new u(g)),this.decode(g,g.uint32())},"decodeDelimited"),r.verify=o(function(g){if(typeof g!="object"||g===null)return"object expected";let d={};if(g.peerId!=null&&g.hasOwnProperty("peerId")&&!a.isInteger(g.peerId)&&!(g.peerId&&a.isInteger(g.peerId.low)&&a.isInteger(g.peerId.high)))return"peerId: integer|Long expected";if(g.bytesSent!=null&&g.hasOwnProperty("bytesSent")&&!a.isInteger(g.bytesSent)&&!(g.bytesSent&&a.isInteger(g.bytesSent.low)&&a.isInteger(g.bytesSent.high)))return"bytesSent: integer|Long expected";if(g.packetsSent!=null&&g.hasOwnProperty("packetsSent")&&!a.isInteger(g.packetsSent)&&!(g.packetsSent&&a.isInteger(g.packetsSent.low)&&a.isInteger(g.packetsSent.high)))return"packetsSent: integer|Long expected";if(g.codec!=null&&g.hasOwnProperty("codec"))switch(g.codec){default:return"codec: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(g.peerIdString!=null&&g.hasOwnProperty("peerIdString")&&!a.isString(g.peerIdString))return"peerIdString: string expected";if(g.audioStats!=null&&g.hasOwnProperty("audioStats")){d.mediaType=1;{let y=s.slack.calls.analytics.SendMedia.Audio.verify(g.audioStats);if(y)return"audioStats."+y}}if(g.videoStats!=null&&g.hasOwnProperty("videoStats")){if(d.mediaType===1)return"mediaType: multiple values";d.mediaType=1;{let y=s.slack.calls.analytics.SendMedia.Video.verify(g.videoStats);if(y)return"videoStats."+y}}return null},"verify"),r.fromObject=o(function(g){if(g instanceof s.slack.calls.analytics.SendMedia)return g;let d=new s.slack.calls.analytics.SendMedia;switch(g.peerId!=null&&(a.Long?(d.peerId=a.Long.fromValue(g.peerId)).unsigned=!0:typeof g.peerId=="string"?d.peerId=parseInt(g.peerId,10):typeof g.peerId=="number"?d.peerId=g.peerId:typeof g.peerId=="object"&&(d.peerId=new a.LongBits(g.peerId.low>>>0,g.peerId.high>>>0).toNumber(!0))),g.bytesSent!=null&&(a.Long?(d.bytesSent=a.Long.fromValue(g.bytesSent)).unsigned=!0:typeof g.bytesSent=="string"?d.bytesSent=parseInt(g.bytesSent,10):typeof g.bytesSent=="number"?d.bytesSent=g.bytesSent:typeof g.bytesSent=="object"&&(d.bytesSent=new a.LongBits(g.bytesSent.low>>>0,g.bytesSent.high>>>0).toNumber(!0))),g.packetsSent!=null&&(a.Long?(d.packetsSent=a.Long.fromValue(g.packetsSent)).unsigned=!0:typeof g.packetsSent=="string"?d.packetsSent=parseInt(g.packetsSent,10):typeof g.packetsSent=="number"?d.packetsSent=g.packetsSent:typeof g.packetsSent=="object"&&(d.packetsSent=new a.LongBits(g.packetsSent.low>>>0,g.packetsSent.high>>>0).toNumber(!0))),g.codec){default:if(typeof g.codec=="number"){d.codec=g.codec;break}break;case"UNKNOWN":case 0:d.codec=0;break;case"OPUS":case 1:d.codec=1;break;case"VP8":case 2:d.codec=2;break;case"VP9":case 3:d.codec=3;break;case"H264":case 4:d.codec=4;break}if(g.peerIdString!=null&&(d.peerIdString=String(g.peerIdString)),g.audioStats!=null){if(typeof g.audioStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.audioStats: object expected");d.audioStats=s.slack.calls.analytics.SendMedia.Audio.fromObject(g.audioStats)}if(g.videoStats!=null){if(typeof g.videoStats!="object")throw TypeError(".slack.calls.analytics.SendMedia.videoStats: object expected");d.videoStats=s.slack.calls.analytics.SendMedia.Video.fromObject(g.videoStats)}return d},"fromObject"),r.toObject=o(function(g,d){d||(d={});let y={};if(d.defaults){if(a.Long){let E=new a.Long(0,0,!0);y.peerId=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.peerId=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.bytesSent=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.bytesSent=d.longs===String?"0":0;if(a.Long){let E=new a.Long(0,0,!0);y.packetsSent=d.longs===String?E.toString():d.longs===Number?E.toNumber():E}else y.packetsSent=d.longs===String?"0":0;y.codec=d.enums===String?"UNKNOWN":0,y.peerIdString=""}return g.peerId!=null&&g.hasOwnProperty("peerId")&&(typeof g.peerId=="number"?y.peerId=d.longs===String?String(g.peerId):g.peerId:y.peerId=d.longs===String?a.Long.prototype.toString.call(g.peerId):d.longs===Number?new a.LongBits(g.peerId.low>>>0,g.peerId.high>>>0).toNumber(!0):g.peerId),g.bytesSent!=null&&g.hasOwnProperty("bytesSent")&&(typeof g.bytesSent=="number"?y.bytesSent=d.longs===String?String(g.bytesSent):g.bytesSent:y.bytesSent=d.longs===String?a.Long.prototype.toString.call(g.bytesSent):d.longs===Number?new a.LongBits(g.bytesSent.low>>>0,g.bytesSent.high>>>0).toNumber(!0):g.bytesSent),g.packetsSent!=null&&g.hasOwnProperty("packetsSent")&&(typeof g.packetsSent=="number"?y.packetsSent=d.longs===String?String(g.packetsSent):g.packetsSent:y.packetsSent=d.longs===String?a.Long.prototype.toString.call(g.packetsSent):d.longs===Number?new a.LongBits(g.packetsSent.low>>>0,g.packetsSent.high>>>0).toNumber(!0):g.packetsSent),g.codec!=null&&g.hasOwnProperty("codec")&&(y.codec=d.enums===String?s.slack.calls.analytics.Codec[g.codec]===void 0?g.codec:s.slack.calls.analytics.Codec[g.codec]:g.codec),g.audioStats!=null&&g.hasOwnProperty("audioStats")&&(y.audioStats=s.slack.calls.analytics.SendMedia.Audio.toObject(g.audioStats,d),d.oneofs&&(y.mediaType="audioStats")),g.videoStats!=null&&g.hasOwnProperty("videoStats")&&(y.videoStats=s.slack.calls.analytics.SendMedia.Video.toObject(g.videoStats,d),d.oneofs&&(y.mediaType="videoStats")),g.peerIdString!=null&&g.hasOwnProperty("peerIdString")&&(y.peerIdString=g.peerIdString),y},"toObject"),r.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),r.getTypeUrl=o(function(g){return g===void 0&&(g="type.googleapis.com"),g+"/slack.calls.analytics.SendMedia"},"getTypeUrl"),r.Audio=function(){function p(g){if(g)for(let d=Object.keys(g),y=0;y<d.length;++y)g[d[y]]!=null&&(this[d[y]]=g[d[y]])}return o(p,"Audio"),p.prototype.audioLevel=0,p.prototype.echoReturnLoss=0,p.prototype.echoReturnLossEnhancement=0,p.prototype.totalAudioEnergy=0,p.prototype.totalSamplesDuration=0,p.create=o(function(d){return new p(d)},"create"),p.encode=o(function(d,y){return y||(y=m.create()),d.audioLevel!=null&&Object.hasOwnProperty.call(d,"audioLevel")&&y.uint32(9).double(d.audioLevel),d.echoReturnLoss!=null&&Object.hasOwnProperty.call(d,"echoReturnLoss")&&y.uint32(17).double(d.echoReturnLoss),d.echoReturnLossEnhancement!=null&&Object.hasOwnProperty.call(d,"echoReturnLossEnhancement")&&y.uint32(25).double(d.echoReturnLossEnhancement),d.totalAudioEnergy!=null&&Object.hasOwnProperty.call(d,"totalAudioEnergy")&&y.uint32(33).double(d.totalAudioEnergy),d.totalSamplesDuration!=null&&Object.hasOwnProperty.call(d,"totalSamplesDuration")&&y.uint32(41).double(d.totalSamplesDuration),y},"encode"),p.encodeDelimited=o(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=o(function(d,y){d instanceof u||(d=u.create(d));let E=y===void 0?d.len:d.pos+y,w=new s.slack.calls.analytics.SendMedia.Audio;for(;d.pos<E;){let k=d.uint32();switch(k>>>3){case 1:{w.audioLevel=d.double();break}case 2:{w.echoReturnLoss=d.double();break}case 3:{w.echoReturnLossEnhancement=d.double();break}case 4:{w.totalAudioEnergy=d.double();break}case 5:{w.totalSamplesDuration=d.double();break}default:d.skipType(k&7);break}}return w},"decode"),p.decodeDelimited=o(function(d){return d instanceof u||(d=new u(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=o(function(d){return typeof d!="object"||d===null?"object expected":d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&typeof d.audioLevel!="number"?"audioLevel: number expected":d.echoReturnLoss!=null&&d.hasOwnProperty("echoReturnLoss")&&typeof d.echoReturnLoss!="number"?"echoReturnLoss: number expected":d.echoReturnLossEnhancement!=null&&d.hasOwnProperty("echoReturnLossEnhancement")&&typeof d.echoReturnLossEnhancement!="number"?"echoReturnLossEnhancement: number expected":d.totalAudioEnergy!=null&&d.hasOwnProperty("totalAudioEnergy")&&typeof d.totalAudioEnergy!="number"?"totalAudioEnergy: number expected":d.totalSamplesDuration!=null&&d.hasOwnProperty("totalSamplesDuration")&&typeof d.totalSamplesDuration!="number"?"totalSamplesDuration: number expected":null},"verify"),p.fromObject=o(function(d){if(d instanceof s.slack.calls.analytics.SendMedia.Audio)return d;let y=new s.slack.calls.analytics.SendMedia.Audio;return d.audioLevel!=null&&(y.audioLevel=Number(d.audioLevel)),d.echoReturnLoss!=null&&(y.echoReturnLoss=Number(d.echoReturnLoss)),d.echoReturnLossEnhancement!=null&&(y.echoReturnLossEnhancement=Number(d.echoReturnLossEnhancement)),d.totalAudioEnergy!=null&&(y.totalAudioEnergy=Number(d.totalAudioEnergy)),d.totalSamplesDuration!=null&&(y.totalSamplesDuration=Number(d.totalSamplesDuration)),y},"fromObject"),p.toObject=o(function(d,y){y||(y={});let E={};return y.defaults&&(E.audioLevel=0,E.echoReturnLoss=0,E.echoReturnLossEnhancement=0,E.totalAudioEnergy=0,E.totalSamplesDuration=0),d.audioLevel!=null&&d.hasOwnProperty("audioLevel")&&(E.audioLevel=y.json&&!isFinite(d.audioLevel)?String(d.audioLevel):d.audioLevel),d.echoReturnLoss!=null&&d.hasOwnProperty("echoReturnLoss")&&(E.echoReturnLoss=y.json&&!isFinite(d.echoReturnLoss)?String(d.echoReturnLoss):d.echoReturnLoss),d.echoReturnLossEnhancement!=null&&d.hasOwnProperty("echoReturnLossEnhancement")&&(E.echoReturnLossEnhancement=y.json&&!isFinite(d.echoReturnLossEnhancement)?String(d.echoReturnLossEnhancement):d.echoReturnLossEnhancement),d.totalAudioEnergy!=null&&d.hasOwnProperty("totalAudioEnergy")&&(E.totalAudioEnergy=y.json&&!isFinite(d.totalAudioEnergy)?String(d.totalAudioEnergy):d.totalAudioEnergy),d.totalSamplesDuration!=null&&d.hasOwnProperty("totalSamplesDuration")&&(E.totalSamplesDuration=y.json&&!isFinite(d.totalSamplesDuration)?String(d.totalSamplesDuration):d.totalSamplesDuration),E},"toObject"),p.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),p.getTypeUrl=o(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.SendMedia.Audio"},"getTypeUrl"),p}(),r.Video=function(){function p(g){if(g)for(let d=Object.keys(g),y=0;y<d.length;++y)g[d[y]]!=null&&(this[d[y]]=g[d[y]])}return o(p,"Video"),p.prototype.frameHeight=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.frameWidth=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesPerSecond=0,p.prototype.framesSent=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.framesEncoded=a.Long?a.Long.fromBits(0,0,!0):0,p.prototype.hugeFramesSent=a.Long?a.Long.fromBits(0,0,!0):0,p.create=o(function(d){return new p(d)},"create"),p.encode=o(function(d,y){return y||(y=m.create()),d.frameHeight!=null&&Object.hasOwnProperty.call(d,"frameHeight")&&y.uint32(8).uint64(d.frameHeight),d.frameWidth!=null&&Object.hasOwnProperty.call(d,"frameWidth")&&y.uint32(16).uint64(d.frameWidth),d.framesPerSecond!=null&&Object.hasOwnProperty.call(d,"framesPerSecond")&&y.uint32(25).double(d.framesPerSecond),d.framesSent!=null&&Object.hasOwnProperty.call(d,"framesSent")&&y.uint32(32).uint64(d.framesSent),d.framesEncoded!=null&&Object.hasOwnProperty.call(d,"framesEncoded")&&y.uint32(40).uint64(d.framesEncoded),d.hugeFramesSent!=null&&Object.hasOwnProperty.call(d,"hugeFramesSent")&&y.uint32(48).uint64(d.hugeFramesSent),y},"encode"),p.encodeDelimited=o(function(d,y){return this.encode(d,y).ldelim()},"encodeDelimited"),p.decode=o(function(d,y){d instanceof u||(d=u.create(d));let E=y===void 0?d.len:d.pos+y,w=new s.slack.calls.analytics.SendMedia.Video;for(;d.pos<E;){let k=d.uint32();switch(k>>>3){case 1:{w.frameHeight=d.uint64();break}case 2:{w.frameWidth=d.uint64();break}case 3:{w.framesPerSecond=d.double();break}case 4:{w.framesSent=d.uint64();break}case 5:{w.framesEncoded=d.uint64();break}case 6:{w.hugeFramesSent=d.uint64();break}default:d.skipType(k&7);break}}return w},"decode"),p.decodeDelimited=o(function(d){return d instanceof u||(d=new u(d)),this.decode(d,d.uint32())},"decodeDelimited"),p.verify=o(function(d){return typeof d!="object"||d===null?"object expected":d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&!a.isInteger(d.frameHeight)&&!(d.frameHeight&&a.isInteger(d.frameHeight.low)&&a.isInteger(d.frameHeight.high))?"frameHeight: integer|Long expected":d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&!a.isInteger(d.frameWidth)&&!(d.frameWidth&&a.isInteger(d.frameWidth.low)&&a.isInteger(d.frameWidth.high))?"frameWidth: integer|Long expected":d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&typeof d.framesPerSecond!="number"?"framesPerSecond: number expected":d.framesSent!=null&&d.hasOwnProperty("framesSent")&&!a.isInteger(d.framesSent)&&!(d.framesSent&&a.isInteger(d.framesSent.low)&&a.isInteger(d.framesSent.high))?"framesSent: integer|Long expected":d.framesEncoded!=null&&d.hasOwnProperty("framesEncoded")&&!a.isInteger(d.framesEncoded)&&!(d.framesEncoded&&a.isInteger(d.framesEncoded.low)&&a.isInteger(d.framesEncoded.high))?"framesEncoded: integer|Long expected":d.hugeFramesSent!=null&&d.hasOwnProperty("hugeFramesSent")&&!a.isInteger(d.hugeFramesSent)&&!(d.hugeFramesSent&&a.isInteger(d.hugeFramesSent.low)&&a.isInteger(d.hugeFramesSent.high))?"hugeFramesSent: integer|Long expected":null},"verify"),p.fromObject=o(function(d){if(d instanceof s.slack.calls.analytics.SendMedia.Video)return d;let y=new s.slack.calls.analytics.SendMedia.Video;return d.frameHeight!=null&&(a.Long?(y.frameHeight=a.Long.fromValue(d.frameHeight)).unsigned=!0:typeof d.frameHeight=="string"?y.frameHeight=parseInt(d.frameHeight,10):typeof d.frameHeight=="number"?y.frameHeight=d.frameHeight:typeof d.frameHeight=="object"&&(y.frameHeight=new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0))),d.frameWidth!=null&&(a.Long?(y.frameWidth=a.Long.fromValue(d.frameWidth)).unsigned=!0:typeof d.frameWidth=="string"?y.frameWidth=parseInt(d.frameWidth,10):typeof d.frameWidth=="number"?y.frameWidth=d.frameWidth:typeof d.frameWidth=="object"&&(y.frameWidth=new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0))),d.framesPerSecond!=null&&(y.framesPerSecond=Number(d.framesPerSecond)),d.framesSent!=null&&(a.Long?(y.framesSent=a.Long.fromValue(d.framesSent)).unsigned=!0:typeof d.framesSent=="string"?y.framesSent=parseInt(d.framesSent,10):typeof d.framesSent=="number"?y.framesSent=d.framesSent:typeof d.framesSent=="object"&&(y.framesSent=new a.LongBits(d.framesSent.low>>>0,d.framesSent.high>>>0).toNumber(!0))),d.framesEncoded!=null&&(a.Long?(y.framesEncoded=a.Long.fromValue(d.framesEncoded)).unsigned=!0:typeof d.framesEncoded=="string"?y.framesEncoded=parseInt(d.framesEncoded,10):typeof d.framesEncoded=="number"?y.framesEncoded=d.framesEncoded:typeof d.framesEncoded=="object"&&(y.framesEncoded=new a.LongBits(d.framesEncoded.low>>>0,d.framesEncoded.high>>>0).toNumber(!0))),d.hugeFramesSent!=null&&(a.Long?(y.hugeFramesSent=a.Long.fromValue(d.hugeFramesSent)).unsigned=!0:typeof d.hugeFramesSent=="string"?y.hugeFramesSent=parseInt(d.hugeFramesSent,10):typeof d.hugeFramesSent=="number"?y.hugeFramesSent=d.hugeFramesSent:typeof d.hugeFramesSent=="object"&&(y.hugeFramesSent=new a.LongBits(d.hugeFramesSent.low>>>0,d.hugeFramesSent.high>>>0).toNumber(!0))),y},"fromObject"),p.toObject=o(function(d,y){y||(y={});let E={};if(y.defaults){if(a.Long){let w=new a.Long(0,0,!0);E.frameHeight=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.frameHeight=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.frameWidth=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.frameWidth=y.longs===String?"0":0;if(E.framesPerSecond=0,a.Long){let w=new a.Long(0,0,!0);E.framesSent=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.framesSent=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.framesEncoded=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.framesEncoded=y.longs===String?"0":0;if(a.Long){let w=new a.Long(0,0,!0);E.hugeFramesSent=y.longs===String?w.toString():y.longs===Number?w.toNumber():w}else E.hugeFramesSent=y.longs===String?"0":0}return d.frameHeight!=null&&d.hasOwnProperty("frameHeight")&&(typeof d.frameHeight=="number"?E.frameHeight=y.longs===String?String(d.frameHeight):d.frameHeight:E.frameHeight=y.longs===String?a.Long.prototype.toString.call(d.frameHeight):y.longs===Number?new a.LongBits(d.frameHeight.low>>>0,d.frameHeight.high>>>0).toNumber(!0):d.frameHeight),d.frameWidth!=null&&d.hasOwnProperty("frameWidth")&&(typeof d.frameWidth=="number"?E.frameWidth=y.longs===String?String(d.frameWidth):d.frameWidth:E.frameWidth=y.longs===String?a.Long.prototype.toString.call(d.frameWidth):y.longs===Number?new a.LongBits(d.frameWidth.low>>>0,d.frameWidth.high>>>0).toNumber(!0):d.frameWidth),d.framesPerSecond!=null&&d.hasOwnProperty("framesPerSecond")&&(E.framesPerSecond=y.json&&!isFinite(d.framesPerSecond)?String(d.framesPerSecond):d.framesPerSecond),d.framesSent!=null&&d.hasOwnProperty("framesSent")&&(typeof d.framesSent=="number"?E.framesSent=y.longs===String?String(d.framesSent):d.framesSent:E.framesSent=y.longs===String?a.Long.prototype.toString.call(d.framesSent):y.longs===Number?new a.LongBits(d.framesSent.low>>>0,d.framesSent.high>>>0).toNumber(!0):d.framesSent),d.framesEncoded!=null&&d.hasOwnProperty("framesEncoded")&&(typeof d.framesEncoded=="number"?E.framesEncoded=y.longs===String?String(d.framesEncoded):d.framesEncoded:E.framesEncoded=y.longs===String?a.Long.prototype.toString.call(d.framesEncoded):y.longs===Number?new a.LongBits(d.framesEncoded.low>>>0,d.framesEncoded.high>>>0).toNumber(!0):d.framesEncoded),d.hugeFramesSent!=null&&d.hasOwnProperty("hugeFramesSent")&&(typeof d.hugeFramesSent=="number"?E.hugeFramesSent=y.longs===String?String(d.hugeFramesSent):d.hugeFramesSent:E.hugeFramesSent=y.longs===String?a.Long.prototype.toString.call(d.hugeFramesSent):y.longs===Number?new a.LongBits(d.hugeFramesSent.low>>>0,d.hugeFramesSent.high>>>0).toNumber(!0):d.hugeFramesSent),E},"toObject"),p.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),p.getTypeUrl=o(function(d){return d===void 0&&(d="type.googleapis.com"),d+"/slack.calls.analytics.SendMedia.Video"},"getTypeUrl"),p}(),r}(),n.MemoryInfo=function(){function r(c){if(c)for(let p=Object.keys(c),g=0;g<p.length;++g)c[p[g]]!=null&&(this[p[g]]=c[p[g]])}return o(r,"MemoryInfo"),r.prototype.workingSetSize=0,r.prototype.peakWorkingSetSize=0,r.create=o(function(p){return new r(p)},"create"),r.encode=o(function(p,g){return g||(g=m.create()),p.workingSetSize!=null&&Object.hasOwnProperty.call(p,"workingSetSize")&&g.uint32(9).double(p.workingSetSize),p.peakWorkingSetSize!=null&&Object.hasOwnProperty.call(p,"peakWorkingSetSize")&&g.uint32(17).double(p.peakWorkingSetSize),g},"encode"),r.encodeDelimited=o(function(p,g){return this.encode(p,g).ldelim()},"encodeDelimited"),r.decode=o(function(p,g){p instanceof u||(p=u.create(p));let d=g===void 0?p.len:p.pos+g,y=new s.slack.calls.analytics.MemoryInfo;for(;p.pos<d;){let E=p.uint32();switch(E>>>3){case 1:{y.workingSetSize=p.double();break}case 2:{y.peakWorkingSetSize=p.double();break}default:p.skipType(E&7);break}}return y},"decode"),r.decodeDelimited=o(function(p){return p instanceof u||(p=new u(p)),this.decode(p,p.uint32())},"decodeDelimited"),r.verify=o(function(p){return typeof p!="object"||p===null?"object expected":p.workingSetSize!=null&&p.hasOwnProperty("workingSetSize")&&typeof p.workingSetSize!="number"?"workingSetSize: number expected":p.peakWorkingSetSize!=null&&p.hasOwnProperty("peakWorkingSetSize")&&typeof p.peakWorkingSetSize!="number"?"peakWorkingSetSize: number expected":null},"verify"),r.fromObject=o(function(p){if(p instanceof s.slack.calls.analytics.MemoryInfo)return p;let g=new s.slack.calls.analytics.MemoryInfo;return p.workingSetSize!=null&&(g.workingSetSize=Number(p.workingSetSize)),p.peakWorkingSetSize!=null&&(g.peakWorkingSetSize=Number(p.peakWorkingSetSize)),g},"fromObject"),r.toObject=o(function(p,g){g||(g={});let d={};return g.defaults&&(d.workingSetSize=0,d.peakWorkingSetSize=0),p.workingSetSize!=null&&p.hasOwnProperty("workingSetSize")&&(d.workingSetSize=g.json&&!isFinite(p.workingSetSize)?String(p.workingSetSize):p.workingSetSize),p.peakWorkingSetSize!=null&&p.hasOwnProperty("peakWorkingSetSize")&&(d.peakWorkingSetSize=g.json&&!isFinite(p.peakWorkingSetSize)?String(p.peakWorkingSetSize):p.peakWorkingSetSize),d},"toObject"),r.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),r.getTypeUrl=o(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.MemoryInfo"},"getTypeUrl"),r}(),n.AppMetrics=function(){function r(c){if(c)for(let p=Object.keys(c),g=0;g<p.length;++g)c[p[g]]!=null&&(this[p[g]]=c[p[g]])}return o(r,"AppMetrics"),r.prototype.cpu=0,r.prototype.memory=null,r.create=o(function(p){return new r(p)},"create"),r.encode=o(function(p,g){return g||(g=m.create()),p.cpu!=null&&Object.hasOwnProperty.call(p,"cpu")&&g.uint32(9).double(p.cpu),p.memory!=null&&Object.hasOwnProperty.call(p,"memory")&&s.slack.calls.analytics.MemoryInfo.encode(p.memory,g.uint32(18).fork()).ldelim(),g},"encode"),r.encodeDelimited=o(function(p,g){return this.encode(p,g).ldelim()},"encodeDelimited"),r.decode=o(function(p,g){p instanceof u||(p=u.create(p));let d=g===void 0?p.len:p.pos+g,y=new s.slack.calls.analytics.AppMetrics;for(;p.pos<d;){let E=p.uint32();switch(E>>>3){case 1:{y.cpu=p.double();break}case 2:{y.memory=s.slack.calls.analytics.MemoryInfo.decode(p,p.uint32());break}default:p.skipType(E&7);break}}return y},"decode"),r.decodeDelimited=o(function(p){return p instanceof u||(p=new u(p)),this.decode(p,p.uint32())},"decodeDelimited"),r.verify=o(function(p){if(typeof p!="object"||p===null)return"object expected";if(p.cpu!=null&&p.hasOwnProperty("cpu")&&typeof p.cpu!="number")return"cpu: number expected";if(p.memory!=null&&p.hasOwnProperty("memory")){let g=s.slack.calls.analytics.MemoryInfo.verify(p.memory);if(g)return"memory."+g}return null},"verify"),r.fromObject=o(function(p){if(p instanceof s.slack.calls.analytics.AppMetrics)return p;let g=new s.slack.calls.analytics.AppMetrics;if(p.cpu!=null&&(g.cpu=Number(p.cpu)),p.memory!=null){if(typeof p.memory!="object")throw TypeError(".slack.calls.analytics.AppMetrics.memory: object expected");g.memory=s.slack.calls.analytics.MemoryInfo.fromObject(p.memory)}return g},"fromObject"),r.toObject=o(function(p,g){g||(g={});let d={};return g.defaults&&(d.cpu=0,d.memory=null),p.cpu!=null&&p.hasOwnProperty("cpu")&&(d.cpu=g.json&&!isFinite(p.cpu)?String(p.cpu):p.cpu),p.memory!=null&&p.hasOwnProperty("memory")&&(d.memory=s.slack.calls.analytics.MemoryInfo.toObject(p.memory,g)),d},"toObject"),r.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),r.getTypeUrl=o(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.AppMetrics"},"getTypeUrl"),r}(),n.Codec=function(){const r={},c=Object.create(r);return c[r[0]="UNKNOWN"]=0,c[r[1]="OPUS"]=1,c[r[2]="VP8"]=2,c[r[3]="VP9"]=3,c[r[4]="H264"]=4,c}(),n.Protocol=function(){const r={},c=Object.create(r);return c[r[0]="UDP"]=0,c[r[1]="TCP"]=1,c}(),n.PathType=function(){const r={},c=Object.create(r);return c[r[0]="DIRECT"]=0,c[r[1]="RELAY"]=1,c}(),n.Report=function(){function r(c){if(this.recv=[],this.send=[],c)for(let p=Object.keys(c),g=0;g<p.length;++g)c[p[g]]!=null&&(this[p[g]]=c[p[g]])}return o(r,"Report"),r.prototype.totalBytesSent=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.totalBytesReceived=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.totalRoundTripTime=0,r.prototype.currentRoundTripTime=0,r.prototype.availableOutgoingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.protocol=0,r.prototype.pathType=0,r.prototype.recv=a.emptyArray,r.prototype.send=a.emptyArray,r.prototype.clientTime=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.availableIncomingBitrate=a.Long?a.Long.fromBits(0,0,!0):0,r.prototype.appMetrics=null,r.create=o(function(p){return new r(p)},"create"),r.encode=o(function(p,g){if(g||(g=m.create()),p.totalBytesSent!=null&&Object.hasOwnProperty.call(p,"totalBytesSent")&&g.uint32(8).uint64(p.totalBytesSent),p.totalBytesReceived!=null&&Object.hasOwnProperty.call(p,"totalBytesReceived")&&g.uint32(16).uint64(p.totalBytesReceived),p.totalRoundTripTime!=null&&Object.hasOwnProperty.call(p,"totalRoundTripTime")&&g.uint32(25).double(p.totalRoundTripTime),p.currentRoundTripTime!=null&&Object.hasOwnProperty.call(p,"currentRoundTripTime")&&g.uint32(33).double(p.currentRoundTripTime),p.availableOutgoingBitrate!=null&&Object.hasOwnProperty.call(p,"availableOutgoingBitrate")&&g.uint32(40).uint64(p.availableOutgoingBitrate),p.protocol!=null&&Object.hasOwnProperty.call(p,"protocol")&&g.uint32(48).int32(p.protocol),p.pathType!=null&&Object.hasOwnProperty.call(p,"pathType")&&g.uint32(56).int32(p.pathType),p.recv!=null&&p.recv.length)for(let d=0;d<p.recv.length;++d)s.slack.calls.analytics.RecvMedia.encode(p.recv[d],g.uint32(66).fork()).ldelim();if(p.send!=null&&p.send.length)for(let d=0;d<p.send.length;++d)s.slack.calls.analytics.SendMedia.encode(p.send[d],g.uint32(74).fork()).ldelim();return p.clientTime!=null&&Object.hasOwnProperty.call(p,"clientTime")&&g.uint32(80).uint64(p.clientTime),p.availableIncomingBitrate!=null&&Object.hasOwnProperty.call(p,"availableIncomingBitrate")&&g.uint32(88).uint64(p.availableIncomingBitrate),p.appMetrics!=null&&Object.hasOwnProperty.call(p,"appMetrics")&&s.slack.calls.analytics.AppMetrics.encode(p.appMetrics,g.uint32(98).fork()).ldelim(),g},"encode"),r.encodeDelimited=o(function(p,g){return this.encode(p,g).ldelim()},"encodeDelimited"),r.decode=o(function(p,g){p instanceof u||(p=u.create(p));let d=g===void 0?p.len:p.pos+g,y=new s.slack.calls.analytics.Report;for(;p.pos<d;){let E=p.uint32();switch(E>>>3){case 1:{y.totalBytesSent=p.uint64();break}case 2:{y.totalBytesReceived=p.uint64();break}case 3:{y.totalRoundTripTime=p.double();break}case 4:{y.currentRoundTripTime=p.double();break}case 5:{y.availableOutgoingBitrate=p.uint64();break}case 6:{y.protocol=p.int32();break}case 7:{y.pathType=p.int32();break}case 8:{y.recv&&y.recv.length||(y.recv=[]),y.recv.push(s.slack.calls.analytics.RecvMedia.decode(p,p.uint32()));break}case 9:{y.send&&y.send.length||(y.send=[]),y.send.push(s.slack.calls.analytics.SendMedia.decode(p,p.uint32()));break}case 10:{y.clientTime=p.uint64();break}case 11:{y.availableIncomingBitrate=p.uint64();break}case 12:{y.appMetrics=s.slack.calls.analytics.AppMetrics.decode(p,p.uint32());break}default:p.skipType(E&7);break}}return y},"decode"),r.decodeDelimited=o(function(p){return p instanceof u||(p=new u(p)),this.decode(p,p.uint32())},"decodeDelimited"),r.verify=o(function(p){if(typeof p!="object"||p===null)return"object expected";if(p.totalBytesSent!=null&&p.hasOwnProperty("totalBytesSent")&&!a.isInteger(p.totalBytesSent)&&!(p.totalBytesSent&&a.isInteger(p.totalBytesSent.low)&&a.isInteger(p.totalBytesSent.high)))return"totalBytesSent: integer|Long expected";if(p.totalBytesReceived!=null&&p.hasOwnProperty("totalBytesReceived")&&!a.isInteger(p.totalBytesReceived)&&!(p.totalBytesReceived&&a.isInteger(p.totalBytesReceived.low)&&a.isInteger(p.totalBytesReceived.high)))return"totalBytesReceived: integer|Long expected";if(p.totalRoundTripTime!=null&&p.hasOwnProperty("totalRoundTripTime")&&typeof p.totalRoundTripTime!="number")return"totalRoundTripTime: number expected";if(p.currentRoundTripTime!=null&&p.hasOwnProperty("currentRoundTripTime")&&typeof p.currentRoundTripTime!="number")return"currentRoundTripTime: number expected";if(p.availableOutgoingBitrate!=null&&p.hasOwnProperty("availableOutgoingBitrate")&&!a.isInteger(p.availableOutgoingBitrate)&&!(p.availableOutgoingBitrate&&a.isInteger(p.availableOutgoingBitrate.low)&&a.isInteger(p.availableOutgoingBitrate.high)))return"availableOutgoingBitrate: integer|Long expected";if(p.protocol!=null&&p.hasOwnProperty("protocol"))switch(p.protocol){default:return"protocol: enum value expected";case 0:case 1:break}if(p.pathType!=null&&p.hasOwnProperty("pathType"))switch(p.pathType){default:return"pathType: enum value expected";case 0:case 1:break}if(p.recv!=null&&p.hasOwnProperty("recv")){if(!Array.isArray(p.recv))return"recv: array expected";for(let g=0;g<p.recv.length;++g){let d=s.slack.calls.analytics.RecvMedia.verify(p.recv[g]);if(d)return"recv."+d}}if(p.send!=null&&p.hasOwnProperty("send")){if(!Array.isArray(p.send))return"send: array expected";for(let g=0;g<p.send.length;++g){let d=s.slack.calls.analytics.SendMedia.verify(p.send[g]);if(d)return"send."+d}}if(p.clientTime!=null&&p.hasOwnProperty("clientTime")&&!a.isInteger(p.clientTime)&&!(p.clientTime&&a.isInteger(p.clientTime.low)&&a.isInteger(p.clientTime.high)))return"clientTime: integer|Long expected";if(p.availableIncomingBitrate!=null&&p.hasOwnProperty("availableIncomingBitrate")&&!a.isInteger(p.availableIncomingBitrate)&&!(p.availableIncomingBitrate&&a.isInteger(p.availableIncomingBitrate.low)&&a.isInteger(p.availableIncomingBitrate.high)))return"availableIncomingBitrate: integer|Long expected";if(p.appMetrics!=null&&p.hasOwnProperty("appMetrics")){let g=s.slack.calls.analytics.AppMetrics.verify(p.appMetrics);if(g)return"appMetrics."+g}return null},"verify"),r.fromObject=o(function(p){if(p instanceof s.slack.calls.analytics.Report)return p;let g=new s.slack.calls.analytics.Report;switch(p.totalBytesSent!=null&&(a.Long?(g.totalBytesSent=a.Long.fromValue(p.totalBytesSent)).unsigned=!0:typeof p.totalBytesSent=="string"?g.totalBytesSent=parseInt(p.totalBytesSent,10):typeof p.totalBytesSent=="number"?g.totalBytesSent=p.totalBytesSent:typeof p.totalBytesSent=="object"&&(g.totalBytesSent=new a.LongBits(p.totalBytesSent.low>>>0,p.totalBytesSent.high>>>0).toNumber(!0))),p.totalBytesReceived!=null&&(a.Long?(g.totalBytesReceived=a.Long.fromValue(p.totalBytesReceived)).unsigned=!0:typeof p.totalBytesReceived=="string"?g.totalBytesReceived=parseInt(p.totalBytesReceived,10):typeof p.totalBytesReceived=="number"?g.totalBytesReceived=p.totalBytesReceived:typeof p.totalBytesReceived=="object"&&(g.totalBytesReceived=new a.LongBits(p.totalBytesReceived.low>>>0,p.totalBytesReceived.high>>>0).toNumber(!0))),p.totalRoundTripTime!=null&&(g.totalRoundTripTime=Number(p.totalRoundTripTime)),p.currentRoundTripTime!=null&&(g.currentRoundTripTime=Number(p.currentRoundTripTime)),p.availableOutgoingBitrate!=null&&(a.Long?(g.availableOutgoingBitrate=a.Long.fromValue(p.availableOutgoingBitrate)).unsigned=!0:typeof p.availableOutgoingBitrate=="string"?g.availableOutgoingBitrate=parseInt(p.availableOutgoingBitrate,10):typeof p.availableOutgoingBitrate=="number"?g.availableOutgoingBitrate=p.availableOutgoingBitrate:typeof p.availableOutgoingBitrate=="object"&&(g.availableOutgoingBitrate=new a.LongBits(p.availableOutgoingBitrate.low>>>0,p.availableOutgoingBitrate.high>>>0).toNumber(!0))),p.protocol){default:if(typeof p.protocol=="number"){g.protocol=p.protocol;break}break;case"UDP":case 0:g.protocol=0;break;case"TCP":case 1:g.protocol=1;break}switch(p.pathType){default:if(typeof p.pathType=="number"){g.pathType=p.pathType;break}break;case"DIRECT":case 0:g.pathType=0;break;case"RELAY":case 1:g.pathType=1;break}if(p.recv){if(!Array.isArray(p.recv))throw TypeError(".slack.calls.analytics.Report.recv: array expected");g.recv=[];for(let d=0;d<p.recv.length;++d){if(typeof p.recv[d]!="object")throw TypeError(".slack.calls.analytics.Report.recv: object expected");g.recv[d]=s.slack.calls.analytics.RecvMedia.fromObject(p.recv[d])}}if(p.send){if(!Array.isArray(p.send))throw TypeError(".slack.calls.analytics.Report.send: array expected");g.send=[];for(let d=0;d<p.send.length;++d){if(typeof p.send[d]!="object")throw TypeError(".slack.calls.analytics.Report.send: object expected");g.send[d]=s.slack.calls.analytics.SendMedia.fromObject(p.send[d])}}if(p.clientTime!=null&&(a.Long?(g.clientTime=a.Long.fromValue(p.clientTime)).unsigned=!0:typeof p.clientTime=="string"?g.clientTime=parseInt(p.clientTime,10):typeof p.clientTime=="number"?g.clientTime=p.clientTime:typeof p.clientTime=="object"&&(g.clientTime=new a.LongBits(p.clientTime.low>>>0,p.clientTime.high>>>0).toNumber(!0))),p.availableIncomingBitrate!=null&&(a.Long?(g.availableIncomingBitrate=a.Long.fromValue(p.availableIncomingBitrate)).unsigned=!0:typeof p.availableIncomingBitrate=="string"?g.availableIncomingBitrate=parseInt(p.availableIncomingBitrate,10):typeof p.availableIncomingBitrate=="number"?g.availableIncomingBitrate=p.availableIncomingBitrate:typeof p.availableIncomingBitrate=="object"&&(g.availableIncomingBitrate=new a.LongBits(p.availableIncomingBitrate.low>>>0,p.availableIncomingBitrate.high>>>0).toNumber(!0))),p.appMetrics!=null){if(typeof p.appMetrics!="object")throw TypeError(".slack.calls.analytics.Report.appMetrics: object expected");g.appMetrics=s.slack.calls.analytics.AppMetrics.fromObject(p.appMetrics)}return g},"fromObject"),r.toObject=o(function(p,g){g||(g={});let d={};if((g.arrays||g.defaults)&&(d.recv=[],d.send=[]),g.defaults){if(a.Long){let y=new a.Long(0,0,!0);d.totalBytesSent=g.longs===String?y.toString():g.longs===Number?y.toNumber():y}else d.totalBytesSent=g.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);d.totalBytesReceived=g.longs===String?y.toString():g.longs===Number?y.toNumber():y}else d.totalBytesReceived=g.longs===String?"0":0;if(d.totalRoundTripTime=0,d.currentRoundTripTime=0,a.Long){let y=new a.Long(0,0,!0);d.availableOutgoingBitrate=g.longs===String?y.toString():g.longs===Number?y.toNumber():y}else d.availableOutgoingBitrate=g.longs===String?"0":0;if(d.protocol=g.enums===String?"UDP":0,d.pathType=g.enums===String?"DIRECT":0,a.Long){let y=new a.Long(0,0,!0);d.clientTime=g.longs===String?y.toString():g.longs===Number?y.toNumber():y}else d.clientTime=g.longs===String?"0":0;if(a.Long){let y=new a.Long(0,0,!0);d.availableIncomingBitrate=g.longs===String?y.toString():g.longs===Number?y.toNumber():y}else d.availableIncomingBitrate=g.longs===String?"0":0;d.appMetrics=null}if(p.totalBytesSent!=null&&p.hasOwnProperty("totalBytesSent")&&(typeof p.totalBytesSent=="number"?d.totalBytesSent=g.longs===String?String(p.totalBytesSent):p.totalBytesSent:d.totalBytesSent=g.longs===String?a.Long.prototype.toString.call(p.totalBytesSent):g.longs===Number?new a.LongBits(p.totalBytesSent.low>>>0,p.totalBytesSent.high>>>0).toNumber(!0):p.totalBytesSent),p.totalBytesReceived!=null&&p.hasOwnProperty("totalBytesReceived")&&(typeof p.totalBytesReceived=="number"?d.totalBytesReceived=g.longs===String?String(p.totalBytesReceived):p.totalBytesReceived:d.totalBytesReceived=g.longs===String?a.Long.prototype.toString.call(p.totalBytesReceived):g.longs===Number?new a.LongBits(p.totalBytesReceived.low>>>0,p.totalBytesReceived.high>>>0).toNumber(!0):p.totalBytesReceived),p.totalRoundTripTime!=null&&p.hasOwnProperty("totalRoundTripTime")&&(d.totalRoundTripTime=g.json&&!isFinite(p.totalRoundTripTime)?String(p.totalRoundTripTime):p.totalRoundTripTime),p.currentRoundTripTime!=null&&p.hasOwnProperty("currentRoundTripTime")&&(d.currentRoundTripTime=g.json&&!isFinite(p.currentRoundTripTime)?String(p.currentRoundTripTime):p.currentRoundTripTime),p.availableOutgoingBitrate!=null&&p.hasOwnProperty("availableOutgoingBitrate")&&(typeof p.availableOutgoingBitrate=="number"?d.availableOutgoingBitrate=g.longs===String?String(p.availableOutgoingBitrate):p.availableOutgoingBitrate:d.availableOutgoingBitrate=g.longs===String?a.Long.prototype.toString.call(p.availableOutgoingBitrate):g.longs===Number?new a.LongBits(p.availableOutgoingBitrate.low>>>0,p.availableOutgoingBitrate.high>>>0).toNumber(!0):p.availableOutgoingBitrate),p.protocol!=null&&p.hasOwnProperty("protocol")&&(d.protocol=g.enums===String?s.slack.calls.analytics.Protocol[p.protocol]===void 0?p.protocol:s.slack.calls.analytics.Protocol[p.protocol]:p.protocol),p.pathType!=null&&p.hasOwnProperty("pathType")&&(d.pathType=g.enums===String?s.slack.calls.analytics.PathType[p.pathType]===void 0?p.pathType:s.slack.calls.analytics.PathType[p.pathType]:p.pathType),p.recv&&p.recv.length){d.recv=[];for(let y=0;y<p.recv.length;++y)d.recv[y]=s.slack.calls.analytics.RecvMedia.toObject(p.recv[y],g)}if(p.send&&p.send.length){d.send=[];for(let y=0;y<p.send.length;++y)d.send[y]=s.slack.calls.analytics.SendMedia.toObject(p.send[y],g)}return p.clientTime!=null&&p.hasOwnProperty("clientTime")&&(typeof p.clientTime=="number"?d.clientTime=g.longs===String?String(p.clientTime):p.clientTime:d.clientTime=g.longs===String?a.Long.prototype.toString.call(p.clientTime):g.longs===Number?new a.LongBits(p.clientTime.low>>>0,p.clientTime.high>>>0).toNumber(!0):p.clientTime),p.availableIncomingBitrate!=null&&p.hasOwnProperty("availableIncomingBitrate")&&(typeof p.availableIncomingBitrate=="number"?d.availableIncomingBitrate=g.longs===String?String(p.availableIncomingBitrate):p.availableIncomingBitrate:d.availableIncomingBitrate=g.longs===String?a.Long.prototype.toString.call(p.availableIncomingBitrate):g.longs===Number?new a.LongBits(p.availableIncomingBitrate.low>>>0,p.availableIncomingBitrate.high>>>0).toNumber(!0):p.availableIncomingBitrate),p.appMetrics!=null&&p.hasOwnProperty("appMetrics")&&(d.appMetrics=s.slack.calls.analytics.AppMetrics.toObject(p.appMetrics,g)),d},"toObject"),r.prototype.toJSON=o(function(){return this.constructor.toObject(this,S.util.toJSONOptions)},"toJSON"),r.getTypeUrl=o(function(p){return p===void 0&&(p="type.googleapis.com"),p+"/slack.calls.analytics.Report"},"getTypeUrl"),r}(),n}(),t}(),e})()},ohOv:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sa54")),m=h(f("bTau")),a=h(f("AUdx")),s=h(f("aVV0"));let i=o(class extends s.default{cancel(){if(this.cancelPromise){const t=new Error(`canceling ${this.name()}`);this.cancelPromise(t),delete this.cancelPromise}}run(){return S(this,void 0,void 0,function*(){const t=this.context.peer;let r=this.context.sdpOfferInit.sdp;this.context.browserBehavior.supportsVideoLayersAllocationRtpHeaderExtension()&&(r=new a.default(r).withVideoLayersAllocationRtpHeaderExtension(this.context.previousSdpOffer).sdp),this.context.browserBehavior.supportsDependencyDescriptorRtpHeaderExtension()&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension!==void 0&&this.context.videoUplinkBandwidthPolicy.wantsVideoDependencyDescriptorRtpHeaderExtension()&&(r=new a.default(r).withDependencyDescriptorRtpHeaderExtension(this.context.previousSdpOffer).sdp),new u.default().requiresDisablingH264Encoding()&&(r=new a.default(r).removeH264SupportFromSendSection().sdp);const c=this.context.audioVideoController.configuration.credentials.attendeeId;if(new m.default(c).hasModality(m.default.MODALITY_CONTENT)&&this.context.audioVideoController.configuration.enableSVC&&(r=new a.default(r).withStartingVideoSendBitrate(100).sdp),this.context.videoSendCodecPreferences!==void 0&&this.context.videoSendCodecPreferences.length>0&&(r=new a.default(r).withVideoSendCodecPreferences(this.context.meetingSupportedVideoSendCodecPreferences!==void 0?this.context.meetingSupportedVideoSendCodecPreferences:this.context.videoSendCodecPreferences).sdp),this.context.audioProfile&&(r=new a.default(r).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp,this.context.audioProfile.isStereo()&&(r=new a.default(r).withStereoAudio().sdp),this.context.audioProfile.hasRedundancyEnabled())){const d=new a.default(r).getAudioPayloadTypes();this.context.transceiverController&&this.context.transceiverController.setAudioPayloadTypes&&this.context.transceiverController.setAudioPayloadTypes(d)}this.logger.debug(()=>`local description is >>>${r}<<<`);const g={type:"offer",sdp:r,toJSON:null};yield new Promise((d,y)=>S(this,void 0,void 0,function*(){this.cancelPromise=E=>{y(E)};try{yield t.setLocalDescription(g),d()}catch(E){y(E)}finally{delete this.cancelPromise}})),this.context.logger.info("set local description")})}constructor(t){super(t.logger),this.context=t,this.taskName="SetLocalDescriptionTask"}},"SetLocalDescriptionTask");l.default=i},okoL:function(j,l,f){"use strict";var S=f("5iG2"),h=f("fshX");function u(m,a,s){var i=m==null?0:m.length;return i?(a=s||a===void 0?1:Object(h.a)(a),a=i-a,Object(S.a)(m,a<0?0:a,i)):[]}o(u,"takeRight"),l.a=u},on9F:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});const S=f("K5tc"),h=f("JOZa"),u=f("AXyi"),m=f("Q2ix");let a=o(class{perform(i,e){const t=this.currentState;if(t===u.SessionStateControllerState.NotConnected&&i===S.SessionStateControllerAction.Connect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===S.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connecting&&i===S.SessionStateControllerAction.FinishConnecting)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Disconnect)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Reconnect)this.transition(u.SessionStateControllerState.Connecting,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Connected&&i===S.SessionStateControllerAction.Update)this.transition(u.SessionStateControllerState.Updating,i);else if(t===u.SessionStateControllerState.Updating&&i===S.SessionStateControllerAction.Fail)this.transition(u.SessionStateControllerState.Disconnecting,i);else if(t===u.SessionStateControllerState.Updating&&i===S.SessionStateControllerAction.FinishUpdating)this.transition(u.SessionStateControllerState.Connected,i);else if(t===u.SessionStateControllerState.Disconnecting&&i===S.SessionStateControllerAction.FinishDisconnecting)this.transition(u.SessionStateControllerState.NotConnected,i);else return this.canDefer(i)?(this.logger.info(`deferring transition from ${u.SessionStateControllerState[this.currentState]} with ${S.SessionStateControllerAction[i]}`),this.deferAction(i,e),m.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${u.SessionStateControllerState[this.currentState]} with ${S.SessionStateControllerAction[i]}`),m.SessionStateControllerTransitionResult.NoTransitionAvailable);try{e()}catch(n){return this.logger.error(`error during state ${u.SessionStateControllerState[this.currentState]} with action ${S.SessionStateControllerAction[i]}: ${n}`),this.logger.info(`rolling back transition to ${u.SessionStateControllerState[t]}`),this.currentState=t,m.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),m.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(i,e){this.logger.info(`transitioning from ${u.SessionStateControllerState[this.currentState]} to ${u.SessionStateControllerState[i]} with ${S.SessionStateControllerAction[e]}`),this.currentState=i}deferPriority(i){switch(i){case S.SessionStateControllerAction.Disconnect:return h.SessionStateControllerDeferPriority.VeryHigh;case S.SessionStateControllerAction.Fail:return h.SessionStateControllerDeferPriority.High;case S.SessionStateControllerAction.Reconnect:return h.SessionStateControllerDeferPriority.Medium;case S.SessionStateControllerAction.Update:return h.SessionStateControllerDeferPriority.Low;default:return h.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(i,e){this.deferredAction!==null&&this.deferPriority(this.deferredAction)>this.deferPriority(i)||(this.deferredAction=i,this.deferredWork=e)}canDefer(i){return this.deferPriority(i)!==h.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===u.SessionStateControllerState.Connecting||this.currentState===u.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const i=this.deferredAction,e=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${S.SessionStateControllerAction[i]}`),this.perform(i,e)!==m.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${S.SessionStateControllerAction[i]} in state ${u.SessionStateControllerState[this.currentState]}`)}constructor(i){this.logger=i,this.currentState=u.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}},"DefaultSessionStateController");l.default=a},otBB:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Zkgh"));let u=o(class{reset(){}updateIndex(a){}updateMetrics(a){}wantsResubscribe(){return!1}chooseSubscriptions(){return new h.default}},"NoVideoDownlinkBandwidthPolicy");l.default=u},p3mT:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.Connect="connect"})(S||(S={})),l.default=S},p5Ac:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"BitrateParameters");l.default=S},p72H:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.EMPTY_DATA_SHA_256=l.SHA_256_HMAC_ALGO=l.SHA_256_HASH=void 0,l.SHA_256_HASH={name:"SHA-256"},l.SHA_256_HMAC_ALGO={name:"HMAC",hash:l.SHA_256_HASH},l.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},p7bP:function(j,l,f){"use strict";(function(S){Object.defineProperty(l,"__esModule",{value:!0});let h=o(class Bs{static register(){!("document"in S)||!document.addEventListener||Bs.shouldRegisterCSPMonitor&&(Bs.added||(document.addEventListener("securitypolicyviolation",Bs.listener),Bs.added=!0))}static unregister(){!("document"in S)||!document.removeEventListener||(document.removeEventListener("securitypolicyviolation",Bs.listener),Bs.loggers=new Set,Bs.added=!1)}static disable(){Bs.shouldRegisterCSPMonitor=!1,Bs.unregister()}static addLogger(m){m&&Bs.loggers.add(m)}static removeLogger(m){m&&Bs.loggers.delete(m)}},"CSPMonitor");l.default=h,h.loggers=new Set,h.shouldRegisterCSPMonitor=!0,h.added=!1,h.listener=u=>{const m=`Security Policy Violation
Blocked URI: ${u.blockedURI}
Violated Directive: ${u.violatedDirective}
Original Policy: ${u.originalPolicy}
Document URI: ${u.documentURI}
Source File: ${u.sourceFile}
Line No.: ${u.lineNumber}
`;for(const a of h.loggers)a.error(m);h.loggers.size===0&&console.error(m)}}).call(this,f("yLpj"))},pCf5:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("ghxq"));let u=o(class extends h.default{calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const a=this.pastSamplesToConsider,s=a*this.packetsExpected;let i=0;for(let e=0;e<a;e++)i+=this.currentData.packetsReceivedInLastMinute[e];return Math.min(Math.max(1-i/s,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?this.currentHealth!==0&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}constructor(a,s){super(a,s,"Unusable Audio Warning"),this.coolDownTimeMs=a.cooldownTimeMs,this.pastSamplesToConsider=a.pastSamplesToConsider,this.fractionalLoss=a.fractionalLoss,this.packetsExpected=a.packetsExpected,this.maximumTimesToWarn=a.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}},"UnusableAudioWarningConnectionHealthPolicy");l.default=u},pU0T:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var S=f("YcE2");Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return S.convertToBuffer}});var h=f("zW/2");Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var u=f("lnWt");Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return u.numToUint8}});var m=f("wiFD");Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},pacc:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(g,d,y,E){function w(k){return k instanceof y?k:new y(function(V){V(k)})}return o(w,"adopt"),new(y||(y=Promise))(function(k,V){function F(x){try{P(E.next(x))}catch(O){V(O)}}o(F,"fulfilled");function N(x){try{P(E.throw(x))}catch(O){V(O)}}o(N,"rejected");function P(x){x.done?k(x.value):w(x.value).then(F,N)}o(P,"step"),P((E=E.apply(g,d||[])).next())})},h=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("Zit3"),m=h(f("cKqT")),a=h(f("p7bP")),s=h(f("HXIC")),i=h(f("l7oq")),e=h(f("F7zz")),t=h(f("dPyZ")),n=h(f("3jln")),r=h(f("z8+u")),c=h(f("18tZ"));let p=o(class{addObserver(d){this.logger.info("adding messaging observer"),this.observerQueue.add(d)}removeObserver(d){this.logger.info("removing messaging observer"),this.observerQueue.delete(d)}start(){return S(this,void 0,void 0,function*(){this.isClosed()?yield this.startConnecting(!1):this.logger.info("messaging session already started")})}stop(){this.isClosed()?this.logger.info("no existing messaging session needs closing"):(this.isClosing=!0,this.webSocket.close(),a.default.removeLogger(this.logger))}forEachObserver(d){for(const y of this.observerQueue)e.default.nextTick(()=>{this.observerQueue.has(y)&&d(y)})}setUpEventListeners(){this.webSocket.addEventListener("open",()=>{this.openEventHandler()}),this.webSocket.addEventListener("message",d=>{this.receiveMessageHandler(d.data)}),this.webSocket.addEventListener("close",d=>{this.closeEventHandler(d)}),this.webSocket.addEventListener("error",()=>{this.logger.error("WebSocket error")})}startConnecting(d){return S(this,void 0,void 0,function*(){return yield this.startConnectingInternal(d),yield new Promise((y,E)=>{this.bootstrapResolved=y,this.bootstrapRejected=E})})}startConnectingInternal(d){var y;return S(this,void 0,void 0,function*(){let E=this.configuration.endpointUrl;if(d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),d||E===void 0)try{if(this.configuration.chimeClient.getMessagingSessionEndpoint instanceof Function){const k=yield this.configuration.chimeClient.getMessagingSessionEndpoint();!((y=k.Endpoint)===null||y===void 0)&&y.Url?E=k.Endpoint.Url:E=(yield this.configuration.chimeClient.getMessagingSessionEndpoint().promise()).Endpoint.Url}else E=(yield this.configuration.chimeClient.send(new u.GetMessagingSessionEndpointCommand({}))).Endpoint.Url;this.logger.debug(`Messaging endpoint resolved to: ${E}`)}catch(k){this.logger.error(`Messaging Session failed to resolve endpoint: ${k}`);const V=new CloseEvent("close",{wasClean:!1,code:4999,reason:"Failed to get messaging session endpoint URL",bubbles:!1});this.closeEventHandler(V);return}const w=yield this.prepareWebSocketUrl(E);this.logger.info(`opening connection to ${w}`),d||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(w,[],!0),this.forEachObserver(k=>{k.messagingSessionDidStartConnecting&&k.messagingSessionDidStartConnecting(d)}),this.setUpEventListeners()})}prepareWebSocketUrl(d){return S(this,void 0,void 0,function*(){const y=new Map;return y.set("userArn",[this.configuration.userArn]),y.set("sessionId",[this.configuration.messagingSessionId]),this.configuration.prefetchOn===c.default.Connect&&y.set("prefetch-on",[c.default.Connect]),this.configuration.prefetchSortBy&&y.set("prefetch-sort-by",[this.configuration.prefetchSortBy]),yield this.sigV4.signURL("GET","wss","chime",d,"/connect","",y)})}isClosed(){return this.webSocket.readyState()===r.default.None||this.webSocket.readyState()===r.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isSessionEstablished=!1}receiveMessageHandler(d){try{const y=JSON.parse(d),E=y.Headers["x-amz-chime-event-type"],w=new s.default(E,y.Headers,y.Payload||null);if(!this.isSessionEstablished&&E==="SESSION_ESTABLISHED"){this.forEachObserver(V=>{V.messagingSessionDidStart&&V.messagingSessionDidStart()}),this.bootstrapResolved(),this.isSessionEstablished=!0;const k=this.preBootstrapMessages.length;for(let V=0;V<k;V++){const F=this.preBootstrapMessages.shift();this.forEachObserver(N=>{this.sendMessageToObserver(N,F)})}}else if(!this.isSessionEstablished){this.preBootstrapMessages.push(w);return}this.forEachObserver(k=>{this.sendMessageToObserver(k,w)})}catch(y){this.logger.error(`Messaging parsing failed: ${y}`)}}sendMessageToObserver(d,y){d.messagingSessionDidReceiveMessage&&d.messagingSessionDidReceiveMessage(y)}retryConnection(){return this.reconnectController.retryWithBackoff(()=>S(this,void 0,void 0,function*(){yield this.startConnecting(!0)}),null)}closeEventHandler(d){this.logger.info(`WebSocket close: ${d.code} ${d.reason}`),d.code!==4999&&this.webSocket.destroy(),!(!this.isClosing&&this.canReconnect(d.code)&&this.retryConnection())&&(this.isClosing=!1,this.isSessionEstablished?this.forEachObserver(y=>{y.messagingSessionDidStop&&y.messagingSessionDidStop(d)}):this.bootstrapRejected(d))}canReconnect(d){return d===1001||d===1006||d>=1011&&d<=1014||d>4e3&&d!==4002&&d!==4003&&d!==4401}constructor(d,y,E,w,k){this.configuration=d,this.logger=y,this.webSocket=E,this.reconnectController=w,this.sigV4=k,this.observerQueue=new Set,this.webSocket||(this.webSocket=new n.default(this.logger)),this.reconnectController||(this.reconnectController=new i.default(d.reconnectTimeoutMs,new m.default(d.reconnectFixedWaitMs,d.reconnectShortBackoffMs,d.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new t.default(this.configuration.chimeClient)),a.default.addLogger(this.logger),a.default.register(),this.preBootstrapMessages=[]}},"DefaultMessagingSession");l.default=p},papz:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionStatusCode=void 0;var S;(function(h){h[h.OK=0]="OK",h[h.Left=1]="Left",h[h.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",h[h.AudioAuthenticationRejected=3]="AudioAuthenticationRejected",h[h.AudioCallAtCapacity=4]="AudioCallAtCapacity",h[h.MeetingEnded=5]="MeetingEnded",h[h.AudioInternalServerError=6]="AudioInternalServerError",h[h.AudioServiceUnavailable=7]="AudioServiceUnavailable",h[h.AudioDisconnected=8]="AudioDisconnected",h[h.VideoCallSwitchToViewOnly=9]="VideoCallSwitchToViewOnly",h[h.VideoCallAtSourceCapacity=10]="VideoCallAtSourceCapacity",h[h.SignalingBadRequest=11]="SignalingBadRequest",h[h.SignalingInternalServerError=12]="SignalingInternalServerError",h[h.SignalingRequestFailed=13]="SignalingRequestFailed",h[h.ICEGatheringTimeoutWorkaround=14]="ICEGatheringTimeoutWorkaround",h[h.ConnectionHealthReconnect=15]="ConnectionHealthReconnect",h[h.RealtimeApiFailed=16]="RealtimeApiFailed",h[h.TaskFailed=17]="TaskFailed",h[h.IncompatibleSDP=18]="IncompatibleSDP",h[h.TURNCredentialsForbidden=19]="TURNCredentialsForbidden",h[h.NoAttendeePresent=20]="NoAttendeePresent",h[h.AudioAttendeeRemoved=21]="AudioAttendeeRemoved",h[h.AudioVideoWasRemovedFromPrimaryMeeting=22]="AudioVideoWasRemovedFromPrimaryMeeting",h[h.AudioDisconnectAudio=23]="AudioDisconnectAudio"})(S=l.MeetingSessionStatusCode||(l.MeetingSessionStatusCode={})),l.default=S},pewp:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("crgu"),m=h(f("sfTB"));let a=o(class{start(){if(!this.reportingEvents)try{this.eventBuffer.start(),this.logger.info("Event reporting started"),this.reportingEvents=!0}catch(i){this.logger.error(`Event Reporting - Error starting the event buffer ${i}`)}}stop(){if(this.reportingEvents)try{this.eventBuffer.stop(),this.logger.info("Event reporting stopped"),this.reportingEvents=!1}catch(i){this.logger.error(`Event Reporting - Error stopping the event buffer ${i}`)}}reportEvent(i,e,t){return S(this,void 0,void 0,function*(){if(this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - event received in reportEvent ${i}, ${e}, ${JSON.stringify(t)}`),this.eventsToIgnore.includes(e)){this.logger.debug(`Event Reporting - DefaultMeetingEventReporter - ${e} event will be ignored as it is in events to ignore`);return}try{this.logger.debug("Event Reporting - DefaultMeetingEventReporter - adding item to event buffer"),yield this.eventBuffer.addItem({ts:i,name:e,attributes:t})}catch(n){this.logger.error(`Event Reporting - Error adding event to buffer ${n}`)}})}destroy(){return S(this,void 0,void 0,function*(){this.destroyed=!0,this.stop(),u.isDestroyable(this.eventBuffer)&&this.eventBuffer.destroy(),this.eventBuffer=void 0})}constructor(i,e){this.reportingEvents=!1,this.importantEvents=["meetingEnded","meetingFailed","meetingStartFailed","audioInputFailed","videoInputFailed","meetingStartSucceeded","deviceLabelTriggerFailed"],this.destroyed=!1;const{eventsClientConfiguration:t,ingestionURL:n,eventBufferConfiguration:r}=i,{eventsToIgnore:c}=t;this.eventBuffer=new m.default(r,t,n,this.importantEvents,e),this.logger=e,this.eventsToIgnore=c,this.start()}},"DefaultMeetingEventReporter");l.default=a},ppUg:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("r3TB"));let u=o(class zl{id(){return this._id}base(){return this._id?this._id.split(zl.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const a=this._id.split(zl.MODALITY_SEPARATOR);return a.length===2?a[1]:""}hasModality(a){return a!==""&&this.modality()===a}withModality(a){const s=new zl(this.base()+zl.MODALITY_SEPARATOR+a);return a===""||this.base()===""||new zl(s._id).modality()!==a?new zl(this.base()):s}constructor(a){this._id=a}},"DefaultModality");l.default=u,u.MODALITY_SEPARATOR=h.default.Modality[0],u.MODALITY_CONTENT=h.default.Modality.substr(1)},qhdC:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={},t=Object(a.a)("help.productHelpCard.list generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"help.productHelpCard.list",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to help.productHelpCard.list
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherhelpProductHelpCardListFetcher",description:"help.productHelpCard.list generated fetcher"}},qr10:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={UserNotFound:"user_not_found",AlreadyInCall:"already_in_call",ChannelNotFound:"channel_not_found",HuddleNotFound:"huddle_not_found",InvalidResponse:"invalid_response",InviteNotFound:"invite_not_found",PermissionDenied:"permission_denied",TeamNotFound:"team_not_found"},t=Object(a.a)("rooms.inviteResponse generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"rooms.inviteResponse",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to rooms.inviteResponse
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherroomsInviteResponseFetcher",description:"rooms.inviteResponse generated fetcher"}},qvnc:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TRANSCRIPTION_DATA_MESSAGE_TOPIC=void 0;const S=f("jhQD");l.TRANSCRIPTION_DATA_MESSAGE_TOPIC="aws:chime:transcription";let h=o(class{subscribeToTranscriptEvent(m){this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeSubscribeToReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC,a=>{for(const s of S.TranscriptEventConverter.from(a))for(const i of this.transcriptEventCallbacks)i(s)}),this.transcriptEventCallbacks.add(m)}unsubscribeFromTranscriptEvent(m){this.transcriptEventCallbacks.delete(m),this.transcriptEventCallbacks.size===0&&this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(l.TRANSCRIPTION_DATA_MESSAGE_TOPIC)}constructor(m){this.realtimeController=m,this.transcriptEventCallbacks=new Set}},"DefaultTranscriptionController");l.default=h},r3TB:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S;(function(h){h.Modality="#content"})(S||(S={})),l.default=S},r7zX:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("KvYa"),u=f("nJ1/"),m={ready:0,enabled:1},a={disabled:0,enabled:1,stopped:2};let s=o(class extends u.VoiceFocusAudioWorkletNode{enable(){return S(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.enabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"enable"})})}disable(){return S(this,void 0,void 0,function*(){this.state?(Atomics.store(this.state,m.enabled,a.disabled),Atomics.notify(this.state,m.ready,1)):this.worker.postMessage({message:"disable"})})}stop(){return S(this,void 0,void 0,function*(){if(this.state)Atomics.store(this.state,m.enabled,a.stopped),Atomics.notify(this.state,m.ready,1);else try{this.worker.postMessage({message:"stop"})}catch{}this.disconnect()})}onWorkerMessage(e){var t;const n=e.data;switch(n.message){case"ready":if(!n.shared)throw new Error("No shared state.");this.state=new Int32Array(n.shared.state),this.port.postMessage(n);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":this.port.postMessage(n);break;case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"processing":this.port.postMessage(n);break;default:return}}onProcessorMessage(e){var t;const n=e.data;switch(n.message){case"cpu":(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(n);break;default:}}constructor(e,t){super(e,t.processor,t),this.channelCountMode="explicit",this.channelCount=1;const{modelURL:n,resamplerURL:r,worker:c,fetchBehavior:p,delegate:g}=t;this.delegate=g,this.worker=c,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this);const{enabled:d,supportFarendStream:y}=t.processorOptions;this.worker.postMessage({message:"init",approach:"sab",frames:e.sampleRate===16e3?160:480,enabled:d,model:n,supportFarendStream:y});const E=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:E,key:"resampler",fetchBehavior:p,path:r})}},"VoiceFocusWorkerBufferNode");l.default=s},r9Lw:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(u){return Promise.reject()}muteLocalAudioInputStream(){}unmuteLocalAudioInputStream(){}addMediaStreamBrokerObserver(u){}removeMediaStreamBrokerObserver(u){}},"NoOpMediaStreamBroker");l.default=S},rCkh:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("r3TB")),u=S(f("h96U")),m=f("T44/"),a=S(f("5/lR"));let s=o(class extends a.default{reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=m.VideoPreferences.prepare();let n=!1;const r=e.remoteStreamDescriptions();for(const c of r)t.some(p=>p.attendeeId===c.attendeeId)||(c.attendeeId.endsWith(h.default.Modality)?(t.add(new u.default(c.attendeeId,1)),n=!0):t.add(new u.default(c.attendeeId,2)));n?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}},"VideoAdaptiveProbePolicy");l.default=s},rEUf:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=void 0,l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT=25;let S=o(class{resetConnectionSpecificState(){this.peer&&this.peer.close(),this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.transceiverController!==void 0&&this.transceiverController.reset(),this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.videoDownlinkBandwidthPolicy.reset(),this.videoUplinkBandwidthPolicy.reset&&this.videoUplinkBandwidthPolicy.reset(),this.lastVideosToReceive=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptions=null,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videoDuplexMode=null}constructor(){this.logger=null,this.browserBehavior=null,this.meetingSessionConfiguration=null,this.signalingClient=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.activeAudioInput=void 0,this.activeVideoInput=void 0,this.audioMixController=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.lastVideosToReceive=null,this.videoSubscriptions=null,this.lastVideoSubscriptionConfiguration=new Map,this.videoSubscriptionLimit=l.DEFAULT_VIDEO_SUBSCRIPTION_LIMIT,this.previousSdpAnswerAsString="",this.serverSupportsCompression=!1,this.videoSendCodecPreferences=[],this.currentVideoSendCodec=void 0,this.meetingSupportedVideoSendCodecPreferences=void 0,this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.enableSVC=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}},"AudioVideoControllerState");l.default=S},rIeS:function(j,l,f){"use strict";var S=l;S.Service=f("DJgg")},rLvK:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(y,E,w,k){function V(F){return F instanceof w?F:new w(function(N){N(F)})}return o(V,"adopt"),new(w||(w=Promise))(function(F,N){function P(M){try{O(k.next(M))}catch(D){N(D)}}o(P,"fulfilled");function x(M){try{O(k.throw(M))}catch(D){N(D)}}o(x,"rejected");function O(M){M.done?F(M.value):V(M.value).then(P,x)}o(O,"step"),O((k=k.apply(y,E||[])).next())})},h=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("XEV2"),m=f("GEtQ"),a=f("hlxM"),s=h(f("Sa54")),i=h(f("2y31")),e=f("R4Nl"),t=h(f("59sL")),n=h(f("KsuK")),r=f("2ede"),c=f("VcdL"),p=f("6qF3"),g=f("EjQB");let d=o(class _d{process(E){return S(this,void 0,void 0,function*(){return E})}fxProcess(E){return S(this,void 0,void 0,function*(){const w=E[0].asCanvasElement();this.didStreamParametersChange(w)&&(yield this.adjustProcessorForNewStreamParameters(w));try{yield this.manageSegmentationMask(w)}catch(k){throw this.logger.error(k),new Error("Video stream could not be processed")}return yield this.renderer.render(w,this.segmentationMask),E[0]=this.canvasVideoFrameBuffer,E})}noOpProcess(E){return S(this,void 0,void 0,function*(){return E})}didStreamParametersChange(E){return E.width!==this.streamParameters.width||E.height!==this.streamParameters.height}adjustProcessorForNewStreamParameters(E){return S(this,void 0,void 0,function*(){this.streamParameters.width=E.width,this.streamParameters.height=E.height,yield this.canvasOpsManager.configureForStreamParameters(this.streamParameters),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,this.effectConfig)})}destroy(){return S(this,void 0,void 0,function*(){this.canvasVideoFrameBuffer.destroy(),this.fxLibScript&&this.fxLibScript.parentNode&&this.fxLibScript.parentNode.removeChild(this.fxLibScript),this.engineWorker&&(this.destroyedAssetsPromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.DESTROY_ASSETS_REQUEST}),yield this.destroyedAssetsPromise.getPromise(),this.engineWorker.postMessage({msg:p.WORKER_MSG.CLOSE_WORKER_REQUEST})),this.logger.info("VideoFxProcessor destroyed.")})}manageSegmentationMask(E){return S(this,void 0,void 0,function*(){try{if(this.segmentationRateManager.submitFrame(),this.segmentationRateManager.shouldApplySegmentation()){this.segmentationRateManager.startSegmentation();const w=this.canvasOpsManager.getInferenceInputData(E);this.segmentationMask=yield this.generateSegmentationMask(w),this.segmentationRateManager.completeSegmentation()}}catch(w){throw this.logger.error(w.toString()),new Error("Can not properly manage the returned segmentation mask")}})}generateSegmentationMask(E){return S(this,void 0,void 0,function*(){_d.isSharedArrayBufferSupported?(this.sharedImageData.set(E.data),this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_REQUEST,payload:this.sharedImageBuffer})):this.engineWorker.postMessage({msg:p.WORKER_MSG.PERFORM_SEGMENTATION_REQUEST,payload:E},[E.data.buffer]);try{return yield this.segmentationRequestPromise.getPromise()}catch(w){throw this.logger.error(w.toString()),new Error("Segmentation mask could not be generated")}})}cloneConfigFrom(E){return{backgroundBlur:{isEnabled:E.backgroundBlur.isEnabled,strength:E.backgroundBlur.strength},backgroundReplacement:{isEnabled:E.backgroundReplacement.isEnabled,backgroundImageURL:E.backgroundReplacement.backgroundImageURL,defaultColor:E.backgroundReplacement.defaultColor}}}setEffectConfig(E){return S(this,void 0,void 0,function*(){if(this.sameVideoFxConfig(E,this.effectConfig))return;const w=this.cloneConfigFrom(E);try{yield this.validateEffectConfig(w)}catch(k){throw this.logger.error(k.toString()),new Error("Provided effect config is invalid, not updating VideoFxProcessor")}w.backgroundReplacement.isEnabled&&(yield this.canvasOpsManager.loadReplacementBackground(w),yield this.renderer.setBackgroundReplacementCanvas(this.canvasOpsManager.getBackgroundReplacementCanvas())),yield this.renderer.configure(this.streamParameters.width,this.streamParameters.height,w),this.effectConfig=w,!this.effectConfig.backgroundBlur.isEnabled&&!this.effectConfig.backgroundReplacement.isEnabled?this.process=this.noOpProcess:this.process=this.fxProcess,this.logger.info(`VideoFxProcessor effect configuration updated to: ${JSON.stringify(this.effectConfig)}`),this.eventController&&this.publishVideoFxConfigEvent()})}validateEffectConfig(E){return S(this,void 0,void 0,function*(){if(E.backgroundBlur.isEnabled&&E.backgroundReplacement.isEnabled)throw new Error("Invalid VideoFx configuration: Background Blur and Background Replacement can not both be enabled");E.backgroundReplacement.isEnabled&&(yield this.validateReplacementConfig(E))})}validateReplacementConfig(E){return S(this,void 0,void 0,function*(){if(E.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement can not have both an image URL and default color");if(!E.backgroundReplacement.backgroundImageURL&&!E.backgroundReplacement.defaultColor)throw new Error("Invalid VideoFx configuration: Background Replacement image URL and default can not both be null/undefined");try{E.backgroundReplacement.backgroundImageURL&&(yield this.canvasOpsManager.loadImage(E.backgroundReplacement.backgroundImageURL))}catch(k){throw this.logger.error(k.toString()),new Error("Invalid VideoFx configuration: backgroundImageURL failed to load")}const w=E.backgroundReplacement.defaultColor;if(w&&w!=="black"&&w!=="#000000"&&w!=="#000"){if(w.includes("#")&&!new RegExp(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/).test(w))throw new Error(`Invalid hexadecimal color code for default replacement background: ${w}`);const V=document.createElement("canvas").getContext("2d"),F=V.fillStyle;if(V.fillStyle=w,V.fillStyle===F)throw new Error(`Invalid color for default replacement background: ${w}`)}})}validateProcessingBudgetPerFrame(E){if(E<p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET||E>p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET)throw new Error(`Invalid resource constraint: cycle percentage must be within range of ${p.RESOURCE_CONSTRAINTS.MIN_PROCESSING_BUDGET} and ${p.RESOURCE_CONSTRAINTS.MAX_PROCESSING_BUDGET}`)}loadAssets(){return S(this,void 0,void 0,function*(){this.logger.info("Loading required assets for the VideoFxProcessor");try{const E=this.getVideoFxAssetParams();yield this.loadEngineWorker(E),yield this.buildEngine(E),yield this.loadFxLib(E),this.renderer=constructRenderer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS,this.effectConfig,this.outputCanvas)}catch(E){throw this.logger.error(E.toString()),new Error("Failed to load necessary assets for the VideoFxProcessor")}this.logger.info("Finished loading of essential VideoFxProcessor assets.")})}getVideoFxAssetParams(){const E=e.getDefaultAssetSpec();return{assetGroup:E.assetGroup,revisionID:E.revisionID,sdk:encodeURIComponent(t.default.sdkVersion),ua:encodeURIComponent(t.default.sdkUserAgentLowResolution)}}getPathFromVideoFxAssetParams(E,w){const k=new URL(E);for(const[V,F]of Object.entries(w))if(F!==void 0){const N=encodeURIComponent(V),P=encodeURIComponent(F);k.searchParams.set(N,P)}return k.toString()}loadEngineWorker(E){return S(this,void 0,void 0,function*(){try{const w=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.WORKER_PATH,E);this.engineWorker=yield m.loadWorker(w,"VideoFxEngineWorker",{},null),this.logger.info("Successfully loaded the VideoFxProcessor's engine worker"),this.engineWorker.addEventListener("message",k=>this.engineWorkerReceiver(k))}catch(w){throw this.logger.error(w.toString()),new Error("Failed to load the VideoFxProcessor's engine worker")}})}buildEngine(E){return S(this,void 0,void 0,function*(){this.buildEnginePromise=new r.DeferredPromise,this.engineWorker.postMessage({msg:p.WORKER_MSG.BUILD_ENGINE_REQUEST,payload:{cdnBasePath:p.CDN_BASE_PATH,sdkVersioningParams:E}});try{yield this.buildEnginePromise.getPromise()}catch(w){throw this.logger.error(w.toString()),new Error("Failed to instantiate the VideoFxEngine")}})}loadFxLib(E){return S(this,void 0,void 0,function*(){const w=this.getPathFromVideoFxAssetParams(p.CDN_BASE_PATH+p.FXLIB_PATH,E),k={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};try{const V=yield u.fetchWithBehavior(w,k,{});if(!V.ok)throw new Error("Fetch failed.");const F=window.URL.createObjectURL(yield V.blob());yield new Promise((N,P)=>{this.fxLibScript=document.createElement("script"),this.fxLibScript.setAttribute("src",F),this.fxLibScript.setAttribute("type","module"),this.fxLibScript.setAttribute("async","false"),this.fxLibScript.addEventListener("load",N),this.fxLibScript.addEventListener("error",P),document.body.appendChild(this.fxLibScript)})}catch(V){throw this.logger.error(V.toString()),new Error("Failed to load the fxlib")}})}getEffectConfig(){return this.cloneConfigFrom(this.effectConfig)}engineWorkerReceiver(E){const w=E.data;switch(w.msg){case p.WORKER_MSG.BUILD_ENGINE_RESPONSE:this.settleEngineBuildPromise(w.payload);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_RESPONSE:this.settleSegmentationPromise(w.payload.output);break;case p.WORKER_MSG.PERFORM_SEGMENTATION_SAB_RESPONSE:this.settleSegmentationPromiseSAB();break;case p.WORKER_MSG.DESTROY_ASSETS_RESPONSE:this.destroyedAssetsPromise.resolvePromise();break;default:this.logger.info(`VideoFx worker received unknown event msg: ${JSON.stringify(w)}`);break}}settleEngineBuildPromise(E){E!==p.SEGMENTATION_MODEL.LOAD_SUCCESS?this.buildEnginePromise.rejectPromise(new Error("Failed to build VideoFxProcessor's engine")):(this.logger.info("Successfully built the VideoFxEngine"),this.buildEnginePromise.resolvePromise())}settleSegmentationPromise(E){E?this.segmentationRequestPromise.resolveAndReplacePromise(E):this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation on the input image"))}settleSegmentationPromiseSAB(){try{const E=new ImageData(new Uint8ClampedArray(this.sharedImageData),p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS,p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS);this.segmentationRequestPromise.resolveAndReplacePromise(E)}catch{this.segmentationRequestPromise.rejectAndReplacePromise(new Error("Failed to perform a segmentation with a shared array buffer on the input image"))}}setToNoOpProcess(){this.process=this.noOpProcess}static isSupported(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new i.default,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return S(this,void 0,void 0,function*(){let k=!0;const V=o((P,x)=>{P&&(E.info(x),k=!1)},"checkEnv");V(typeof globalThis>"u","Browser does not have globalThis."),V(!a.supportsWorker(globalThis,E),"Browser does not support web workers."),V(!a.supportsWASM(globalThis,E),"Browser does not support wasm."),V(!document.createElement("canvas").getContext("webgl2"),"Browser does not support webgl.");const F=new s.default;V(!F.isVideoFxSupportedBrowser(),"Browser is unsupported for VideoFxProcessor");const N=o(()=>S(this,void 0,void 0,function*(){if(w)try{const P=new _d(E);yield P.loadAssets(),yield P.destroy()}catch{return E.info("Browser environment is unable to access the required external assets."),Promise.resolve(!1)}return Promise.resolve(!0)}),"checkProcessor");return Promise.resolve(k?yield N():!1)})}static create(E,w){let k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME;return S(this,void 0,void 0,function*(){const V=new _d(E,k);try{return yield V.loadAssets(),yield V.setEffectConfig(w),V}catch(F){throw E.error(F.toString()),V.setToNoOpProcess(),new Error("VideoFxProcessor built with support for only NoOp processing")}})}setEventController(E){this.eventController?this.eventController=E:(this.eventController=E,this.publishVideoFxConfigEvent())}publishVideoFxConfigEvent(){const E={backgroundBlurEnabled:this.effectConfig.backgroundBlur.isEnabled.toString(),backgroundBlurStrength:this.effectConfig.backgroundBlur.strength,backgroundReplacementEnabled:this.effectConfig.backgroundReplacement.isEnabled.toString(),backgroundFilterVersion:2};this.eventController.publishEvent("backgroundFilterConfigSelected",E)}sameVideoFxConfig(E,w){return E.backgroundBlur.isEnabled===w.backgroundBlur.isEnabled&&E.backgroundBlur.strength===w.backgroundBlur.strength&&E.backgroundReplacement.backgroundImageURL===w.backgroundReplacement.backgroundImageURL&&E.backgroundReplacement.defaultColor===w.backgroundReplacement.defaultColor&&E.backgroundReplacement.isEnabled===w.backgroundReplacement.isEnabled}constructor(E,w=p.RESOURCE_CONSTRAINTS.DEFAULT_PROCESSING_BUDGET_PER_FRAME,k){this.logger=E,this.outputCanvas=document.createElement("canvas"),this.canvasVideoFrameBuffer=new n.default(this.outputCanvas);try{this.validateProcessingBudgetPerFrame(w)}catch(V){throw this.logger.error(V),new Error(`Cannot instantiate VideoFxProcessor due to invalid processingBudgetPerFrame of ${w}`)}k&&(this.eventController=k),this.effectConfig={backgroundBlur:{isEnabled:!1,strength:"low"},backgroundReplacement:{isEnabled:!1,backgroundImageURL:null,defaultColor:"black"}},this.segmentationRequestPromise=new r.DeferredPromise,this.segmentationRateManager=new g.VideoFxSegmentationRateManager(this.logger,w),this.streamParameters={framerate:p.DEFAULT_STREAM_PARAMETERS.FRAMES_PER_SECOND,width:p.DEFAULT_STREAM_PARAMETERS.WIDTH_IN_PIXEL,height:p.DEFAULT_STREAM_PARAMETERS.HEIGHT_IN_PIXEL,channels:p.DEFAULT_STREAM_PARAMETERS.CHANNEL_COUNT},_d.isSharedArrayBufferSupported&&(this.sharedImageBuffer=new SharedArrayBuffer(p.SEGMENTATION_MODEL.WIDTH_IN_PIXELS*p.SEGMENTATION_MODEL.HEIGHT_IN_PIXELS*this.streamParameters.channels),this.sharedImageData=new Uint8ClampedArray(this.sharedImageBuffer)),this.logger.info(`VideoFx supports Shared Array Buffer: ${_d.isSharedArrayBufferSupported}`),this.canvasOpsManager=new c.VideoFxCanvasOpsManager(this.streamParameters,this.outputCanvas),this.outputCanvas.width=this.streamParameters.width,this.outputCanvas.height=this.streamParameters.height,this.segmentationMask=new ImageData(this.streamParameters.width,this.streamParameters.height),this.logger.info(`VideoFxProcessor instantiated with a processingBudgetPerFrame of ${w}`)}},"VideoFxProcessor");l.default=d,d.isSharedArrayBufferSupported=typeof SharedArrayBuffer<"u"},rU8T:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0})},raQ4:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("CmE0")),m=h(f("3ZJV"));let a=o(class th extends u.default{setImageBlob(i){return S(this,void 0,void 0,function*(){this.replacementBlob=i,this.replacementImage=yield th.loadImage(this.createReplacementObjectUrl())})}initOnFirstExecution(){}drawImageWithMask(i,e){e||(e=new ImageData(this.spec.model.input.width,this.spec.model.input.height)),this.scaledCanvas.getContext("2d").putImageData(e,0,0);const{canvasCtx:n,targetCanvas:r}=this,{width:c,height:p}=r;n.save(),n.clearRect(0,0,c,p),n.drawImage(this.scaledCanvas,0,0,c,p),n.globalCompositeOperation="source-in",n.drawImage(i,0,0,c,p),n.globalCompositeOperation="destination-over",n.drawImage(this.replacementImage,0,0,r.width,r.height),n.restore()}static loadImageExecutor(i,e,t){const n=new Image;n.crossOrigin="Anonymous",n.addEventListener("load",()=>{i(n)},!1),n.addEventListener("error",r=>{e(new Error(`Could not load replacement image ${n.src}: ${r.message}`))},!1),n.src=t}static loadImage(i){return S(this,void 0,void 0,function*(){return new Promise((e,t)=>this.loadImageExecutor(e,t,i))})}revokeReplacementObjectUrl(){this.replacementObjectUrl&&URL.revokeObjectURL(this.replacementObjectUrl)}createReplacementObjectUrl(){return this.revokeReplacementObjectUrl(),this.replacementObjectUrl=URL.createObjectURL(this.replacementBlob),this.replacementObjectUrl}loadAssets(){const i=Object.create(null,{loadAssets:{get:()=>super.loadAssets}});return S(this,void 0,void 0,function*(){this.replacementImage=yield th.loadImage(this.createReplacementObjectUrl()),i.loadAssets.call(this)})}addObserver(i){this.delegate.addObserver(i)}removeObserver(i){this.delegate.removeObserver(i)}destroy(){const i=Object.create(null,{destroy:{get:()=>super.destroy}});return S(this,void 0,void 0,function*(){i.destroy.call(this),this.revokeReplacementObjectUrl()})}setEventController(i){this.eventController?this.eventController=i:(this.eventController=i,this.publishBackgroundFilterEvent())}publishBackgroundFilterEvent(){const i={backgroundBlurEnabled:"false",backgroundBlurStrength:"low",backgroundReplacementEnabled:"true",backgroundFilterVersion:1};this.eventController.publishEvent("backgroundFilterConfigSelected",i)}constructor(i,e){super("background replacement",i,e,new m.default),this.replacementBlob=e.imageBlob,this.logger.info("BackgroundReplacement processor successfully created"),this.logger.info(`BackgroundReplacement spec: ${this.stringify(this.spec)}`),this.logger.info(`BackgroundReplacement options: ${this.stringify(e)}`)}},"BackgroundReplacementFilter");l.default=a},rbNI:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}},"RealtimeAttendeePositionInFrame");l.default=S},rcF0:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("JTre"));let u=o(class{makeTile(a,s,i,e){return new h.default(a,s,i,e)}},"DefaultVideoTileFactory");l.default=u},reWd:function(j,l,f){"use strict";(function(S){var h=this&&this.__awaiter||function(e,t,n,r){function c(p){return p instanceof n?p:new n(function(g){g(p)})}return o(c,"adopt"),new(n||(n=Promise))(function(p,g){function d(w){try{E(r.next(w))}catch(k){g(k)}}o(d,"fulfilled");function y(w){try{E(r.throw(w))}catch(k){g(k)}}o(y,"rejected");function E(w){w.done?p(w.value):c(w.value).then(d,y)}o(E,"step"),E((r=r.apply(e,t||[])).next())})},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(l,"__esModule",{value:!0});const m=u(f("BkFD")),a=u(f("KCGh")),s=u(f("mlaT"));let i=o(class nh{addEventListener(){!this.eventListener||!("window"in S)||!window.addEventListener||window.addEventListener("unload",this.eventListener)}removeEventListener(){!this.eventListener||!("window"in S)||!window.removeEventListener||window.removeEventListener("unload",this.eventListener)}debug(t){s.default.DEBUG<this.logLevel||(typeof t=="string"?this.log(s.default.DEBUG,t):t?this.log(s.default.DEBUG,t()):this.log(s.default.DEBUG,""+t))}info(t){this.log(s.default.INFO,t)}warn(t){this.log(s.default.WARN,t)}error(t){this.log(s.default.ERROR,t)}setLogLevel(t){this.logLevel=t}getLogLevel(){return this.logLevel}getLogCaptureSize(){return this.logCapture.length}start(){this.addEventListener(),this.intervalScheduler=new m.default(this.intervalMs),this.intervalScheduler.start(()=>h(this,void 0,void 0,function*(){if(this.lock===!0||this.getLogCaptureSize()===0)return;this.lock=!0;const t=this.logCapture.slice(0,this.batchSize),n=this.makeRequestBody(t);try{(yield fetch(this.url,Object.assign({method:"POST",body:n},this.headers?{headers:this.headers}:{}))).status===200&&(this.logCapture=this.logCapture.slice(t.length))}catch(r){console.warn("[POSTLogger] "+r.message)}finally{this.lock=!1}}))}stop(){var t;(t=this.intervalScheduler)===null||t===void 0||t.stop(),this.intervalScheduler=void 0,this.removeEventListener();const n=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,n)}destroy(){return h(this,void 0,void 0,function*(){this.stop(),this.metadata=void 0,this.headers=void 0,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.batchSize=0,this.intervalMs=0,this.url=void 0})}makeRequestBody(t){return JSON.stringify(Object.assign(Object.assign({},this.metadata),{logs:t}))}log(t,n){if(t<this.logLevel)return;const r=Date.now();this.logCapture.push(new a.default(this.sequenceNumber,n,r,s.default[t])),this.sequenceNumber+=1}constructor(t){this.logCapture=[],this.lock=!1,this.sequenceNumber=0;const{url:n,batchSize:r=nh.BATCH_SIZE,intervalMs:c=nh.INTERVAL_MS,logLevel:p=s.default.WARN,metadata:g,headers:d}=t;this.url=n,this.batchSize=r,this.intervalMs=c,this.logLevel=p,this.metadata=g,this.headers=d,this.start(),this.eventListener=()=>{this.stop()},this.addEventListener()}},"POSTLogger");l.default=i,i.BATCH_SIZE=85,i.INTERVAL_MS=2e3}).call(this,f("yLpj"))},rhlI:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class Wl{static isTimestampRecent(u,m){return Date.now()<u+m}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(u){return Wl.isTimestampRecent(this.connectionStartTimestampMs,u)}isLastPacketLossRecent(u){return Wl.isTimestampRecent(this.lastPacketLossInboundTimestampMs,u)}isGoodSignalRecent(u){return Wl.isTimestampRecent(this.lastGoodSignalTimestampMs,u)}isWeakSignalRecent(u){return Wl.isTimestampRecent(this.lastWeakSignalTimestampMs,u)}isNoSignalRecent(u){return Wl.isTimestampRecent(this.lastNoSignalTimestampMs,u)}clone(){const u=new Wl;return u.connectionStartTimestampMs=this.connectionStartTimestampMs,u.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,u.consecutiveStatsWithNoAudioPacketsSent=this.consecutiveStatsWithNoAudioPacketsSent,u.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,u.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,u.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,u.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,u.consecutiveMissedPongs=this.consecutiveMissedPongs,u.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),u.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),u.audioSpeakerDelayMs=this.audioSpeakerDelayMs,u}setConsecutiveMissedPongs(u){this.consecutiveMissedPongs=u}setConsecutiveStatsWithNoPackets(u){this.consecutiveStatsWithNoPackets=u}setConsecutiveStatsWithNoAudioPacketsSent(u){this.consecutiveStatsWithNoAudioPacketsSent=u}setLastPacketLossInboundTimestampMs(u){this.lastPacketLossInboundTimestampMs=u}setLastNoSignalTimestampMs(u){this.lastNoSignalTimestampMs=u}setLastWeakSignalTimestampMs(u){this.lastWeakSignalTimestampMs=u}setLastGoodSignalTimestampMs(u){this.lastGoodSignalTimestampMs=u}setAudioSpeakerDelayMs(u){this.audioSpeakerDelayMs=u}constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.consecutiveStatsWithNoAudioPacketsSent=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}},"ConnectionHealthData");l.default=S},riOr:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("OND3"));let m=o(class Qc extends u.default{setEncodingParameters(s){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===u.default.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(u.default.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===u.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(u.default.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(s,i,e){super(s,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let n=0;n<Qc.NAME_ARR_ASCENDING.length;n++){const r=Qc.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:Qc.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},riVe:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(k,V,F,N){function P(x){return x instanceof F?x:new F(function(O){O(x)})}return o(P,"adopt"),new(F||(F=Promise))(function(x,O){function M(q){try{J(N.next(q))}catch($){O($)}}o(M,"fulfilled");function D(q){try{J(N.throw(q))}catch($){O($)}}o(D,"rejected");function J(q){q.done?x(q.value):P(q.value).then(M,D)}o(J,"step"),J((N=N.apply(k,V||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.decideModel=l.measureAndDecideExecutionApproach=void 0;const h=f("GEtQ"),u=f("hlxM"),m=3,a=2.5,s=2.63,i=.6,e=.65,t=.5,n=.7,r={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};let c=o(class{roundtrip(V,F,N){return new Promise((P,x)=>{this.worker.then(O=>{let M;M=o(D=>{const{message:J,key:q}=D.data;J===F&&q===N&&(O.removeEventListener("message",M),P(D.data))},"listener"),O.addEventListener("message",M),O.postMessage(V)}).catch(O=>{var M;(M=this.logger)===null||M===void 0||M.error("Failed to load worker.",O),x(O)})})}supportsSIMD(V){const F="simd",N=V||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,P={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:N,key:F};return this.roundtrip(P,"simd-support",F).then(x=>x.supports)}measure(V,F){const N=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,P=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,x=V?P:N,O=`bench:${V}`,M={message:"measure",fetchBehavior:this.fetchBehavior,budget:F,path:x,key:O};return this.roundtrip(M,"measurement",O).then(D=>{if(D.measurement)return D.measurement;throw new Error("Failed to measure.")})}stop(){this.worker.then(V=>{var F;(F=this.logger)===null||F===void 0||F.debug("Stopping estimator worker."),V.terminate()}).catch(V=>{})}constructor(V,F){this.fetchConfig=V,this.logger=F;const N=`${V.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:V.headers,escapedQueryString:V.escapedQueryString},this.worker=h.loadWorker(N,"VoiceFocusEstimator",this.fetchBehavior,F)}},"Estimator");const p=o((k,V)=>k===1?i:V==="quality"?e*k:t*k,"inlineScoreMultiplier"),g=o(function(k){let{supportsSIMD:V,supportsSAB:F,duration:N,executionPreference:P="auto",simdPreference:x,variantPreference:O="auto",namePreference:M="default",usagePreference:D,executionQuantaPreference:J=m}=k,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r,$=arguments.length>2?arguments[2]:void 0;const Ee=x==="force"||x!=="disable"&&V,_e=N!==-1,ye=_e?(Ee?a:s)/N:0,Be=Ee?q.simd:q.wasm,pt=_e?p(J,D)*ye:0,Ve=_e?n*ye:0,gt=M,dt=o(Et=>({supported:!1,reason:Et}),"unsupported");if(_e){if(ye<Be.noSupport)return dt(`Performance score ${ye} worse than threshold ${Be.noSupport}.`)}else if(P==="auto"||O==="auto")return dt(`Missing explicit execution (${P}) or variant (${O}) preference, but no scoring performed.`);$==null||$.debug(`Bench duration ${N} yields inline score ${pt} and worker score ${Ve}.`);const Je=o((Et,Mt,ze)=>({supported:!0,useSIMD:Ee,processor:Et,executionApproach:Mt,variant:ze,executionQuanta:Mt==="inline"?J:void 0,name:gt}),"succeed"),_t=o((Et,Mt,ze)=>Mt!=="auto"?!_e||Et>ze[Mt]?Mt:"failed":Et>ze.c100?"c100":Et>ze.c50?"c50":Et>ze.c20?"c20":Et>ze.c10?"c10":"failed","resolveVariant"),ot=o(Et=>{switch(Et||"auto"){case"auto":{let Mt=ot("inline"),ze=ot("worker");return $==null||$.debug(`Reducing auto preference: ${JSON.stringify(Mt)} vs ${JSON.stringify(ze)}`),Mt.supported===!1||ze.supported===!1?ze:Mt.variant===ze.variant||Mt.variant==="c50"?Mt:ze}case"worker":return u.supportsSharedArrayBuffer(globalThis,window,$)?ot("worker-sab"):ot("worker-postMessage");case"inline":{const Mt=_t(pt,O,Be.inline);return Mt==="failed"?dt(`Performance score ${pt} not sufficient for inline use with variant preference ${O}.`):Je("voicefocus-inline-processor","inline",Mt)}case"worker-sab":{if(!F){const ze="Requested worker-sab but no SharedArrayBuffer support.";return $==null||$.warn(ze),{supported:!1,reason:ze}}const Mt=_t(Ve,O,Be.worker);return Mt==="failed"?dt(`Performance score ${Ve} not sufficient for worker use with variant preference ${O}.`):Je("voicefocus-worker-sab-processor","worker-sab",Mt)}case"worker-postMessage":{const Mt=_t(Ve,O,Be.worker);if(Mt==="failed")return dt(`Performance score ${Ve} not sufficient for worker use.`);if(gt==="ns_es"){const ze="Requested echo suppression but postMessage executor does not support it.";return $==null||$.warn(ze),{supported:!1,reason:ze}}return Je("voicefocus-worker-postMessage-processor","worker-postMessage",Mt)}}},"reducePreference");return ot(P)},"decideExecutionApproach"),d=o((k,V,F,N)=>S(void 0,void 0,void 0,function*(){const P={supportsSIMD:k,supportsSAB:u.supportsSharedArrayBuffer(globalThis,window,F),duration:-1};if(k)return F==null||F.info("Supports SIMD: true (force)"),P;const x=!N,O=N||new c(V,F);try{const M=!u.isOldChrome(window,F)&&(yield O.supportsSIMD());return F==null||F.info(`Supports SIMD: ${M} (force: ${k})`),P.supportsSIMD=M,P}finally{x&&O.stop()}}),"featureCheck"),y=o((k,V,F,N)=>S(void 0,void 0,void 0,function*(){const P=new c(V,N);try{const x=yield d(k,V,N,P);if(x.supportsSIMD)try{return x.duration=yield P.measure(!0,F),N==null||N.info("SIMD timing:",x.duration),x}catch{N==null||N.warn("Failed SIMD estimation; falling back to non-SIMD."),x.supportsSIMD=!1}return x.duration=yield P.measure(!1,F),N==null||N.info("No-SIMD timing:",x.duration),x}catch(x){throw N==null||N.error("Could not feature check.",x),x}finally{P.stop()}}),"estimateAndFeatureCheck"),E=o(function(k,V,F){let N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;return S(void 0,void 0,void 0,function*(){let P=k.executionPreference;const{usagePreference:x,variantPreference:O,namePreference:M,simdPreference:D,estimatorBudget:J,executionQuantaPreference:q}=k;x==="interactivity"&&P!=="inline"&&(F==null||F.debug(`Overriding execution preference ${P} to reflect interactivity preference.`),P="inline");const $=D==="force",de=O!=="auto",Ee=P!=="auto";let _e;try{de&&Ee?_e=yield d($,V,F):_e=yield y($,V,J,F)}catch(ye){throw F==null||F.error("Could not load estimator.",ye),new Error("Could not load Voice Focus estimator.")}return g(Object.assign(Object.assign({},_e),{simdPreference:D,executionPreference:P,variantPreference:O,namePreference:M,usagePreference:x,executionQuantaPreference:q}),N,F)})},"measureAndDecideExecutionApproach");l.measureAndDecideExecutionApproach=E;const w=o(k=>{let{category:V,name:F,variant:N,simd:P,url:x}=k;return`${V}-${F}-${N}-v1${P?"_simd":""}`},"decideModel");l.decideModel=w},rkwE:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("j+uH"));let m=o(class extends u.default{run(){var s,i;return S(this,void 0,void 0,function*(){if(!(!((i=(s=this.context.meetingSessionConfiguration)===null||s===void 0?void 0:s.urls)===null||i===void 0)&&i.audioHostURL)){this.context.logger.info("No audio connection: not acquiring audio input");return}if(this.context.activeAudioInput){this.context.logger.info("an active audio input exists");return}let e;try{e=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch{this.context.logger.warn("could not acquire audio input from current device")}e?this.context.activeAudioInput=e:this.context.logger.warn("an audio input is not available")})}constructor(s){super(s.logger),this.context=s,this.taskName="ReceiveAudioInputTask"}},"ReceiveAudioInputTask");l.default=m},rw3l:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(r,c,p,g){function d(y){return y instanceof p?y:new p(function(E){E(y)})}return o(d,"adopt"),new(p||(p=Promise))(function(y,E){function w(F){try{V(g.next(F))}catch(N){E(N)}}o(w,"fulfilled");function k(F){try{V(g.throw(F))}catch(N){E(N)}}o(k,"rejected");function V(F){F.done?y(F.value):d(F.value).then(w,k)}o(V,"step"),V((g=g.apply(r,c||[])).next())})},h=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("ZS2b")),m=h(f("ppUg")),a=h(f("CAce")),s=h(f("HbHZ")),i=f("XCDq"),e=f("Aplu"),t=h(f("j+uH"));let n=o(class extends t.default{removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return S(this,void 0,void 0,function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)})}handleSignalingClientEvent(c){if(c.type!==s.default.ReceivedSignalFrame||c.message.type!==i.SdkSignalFrame.Type.INDEX)return;const p=c.message.index;this.context.logger.info(`received new index ${JSON.stringify(p)}`),this.handleIndexFrame(p)}pauseIngestion(){this.isIngestionPaused=!0}resumeIngestion(){this.isIngestionPaused&&(this.isIngestionPaused=!1,this.pendingIndex&&(this.context.logger.info("Resuming index ingestion with pending index"),this.handleIndexFrame(this.pendingIndex)))}handleIndexFrame(c){if(!c)return;if(this.isIngestionPaused){this.context.logger.info("Index ingestion is paused, setting most recent index as pending"),this.pendingIndex=c;return}else this.pendingIndex=null;const p=this.context.audioVideoController.configuration.credentials.attendeeId;c.sources=c.sources.filter(k=>{const V=new m.default(k.attendeeId);return!(V.base()===p&&V.hasModality(m.default.MODALITY_CONTENT))});const{videoStreamIndex:g,videoDownlinkBandwidthPolicy:d,videoUplinkBandwidthPolicy:y}=this.context,E=g.allVideoSendingSourcesExcludingSelf(p);g.integrateIndexFrame(c),d.updateIndex(g),y.updateIndex(g),this.resubscribe(d,y),this.updateVideoAvailability(c),this.handleIndexVideosPausedAtSource(),c.supportedReceiveCodecIntersection.length>0&&this.handleSupportedVideoReceiveCodecIntersection(c);const w=g.allVideoSendingSourcesExcludingSelf(p);this.areVideoSourcesEqual(E,w)||this.context.audioVideoController.forEachObserver(k=>{e.Maybe.of(k.remoteVideoSourcesDidChange).map(V=>V.bind(k)(w))})}areVideoSourcesEqual(c,p){if(c.length!==p.length)return!1;const g=o((E,w)=>E.attendee.attendeeId.localeCompare(w.attendee.attendeeId),"compare"),d=[...c].sort(g),y=[...p].sort(g);for(let E=0;E<d.length;E++)if(d[E].attendee.attendeeId!==y[E].attendee.attendeeId)return!1;return!0}resubscribe(c,p){const g=c.wantsResubscribe(),d=(this.context.videoDuplexMode===i.SdkStreamServiceType.TX||this.context.videoDuplexMode===i.SdkStreamServiceType.DUPLEX)&&p.wantsResubscribe(),y=g||d;if(this.logger.info(`should resubscribe: ${y} (downlink: ${g} uplink: ${d})`),!y)return;const E=c.chooseSubscriptions();this.context.videosToReceive=E.truncate(this.context.videoSubscriptionLimit),E.size()>this.context.videosToReceive.size()&&this.logger.warn(`Video receive limit exceeded. Limiting the videos to ${this.context.videosToReceive.size()}. Please consider using AllHighestVideoBandwidthPolicy or VideoPriorityBasedPolicy along with chooseRemoteVideoSources api to select the video sources to be displayed.`),this.context.videoCaptureAndEncodeParameter=p.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${d} down=${g}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update({needsRenegotiation:!1})}updateVideoAvailability(c){if(!this.context.videosToReceive){this.logger.error("videosToReceive must be set in the meeting context.");return}const p=new u.default;p.remoteVideoAvailable=!this.context.videosToReceive.empty(),p.canStartLocalVideo=!c.atCapacity,(!this.context.lastKnownVideoAvailability||!this.context.lastKnownVideoAvailability.equal(p))&&(this.context.lastKnownVideoAvailability=p.clone(),this.context.audioVideoController.forEachObserver(g=>{e.Maybe.of(g.videoAvailabilityDidChange).map(d=>d.bind(g)(p.clone()))}))}handleSupportedVideoReceiveCodecIntersection(c){if(this.context.videoSendCodecPreferences===void 0)return;const p=[];let g=!1;for(const d of this.context.videoSendCodecPreferences){let y=!1;for(const E of c.supportedReceiveCodecIntersection)if(d.equals(a.default.fromSignaled(E))){y=!0,p.push(d);break}this.context.currentVideoSendCodec!==void 0&&!y&&d.equals(this.context.currentVideoSendCodec)&&(g=!0)}p.length>0?this.context.meetingSupportedVideoSendCodecPreferences=p:(this.logger.warn("Interesection of meeting receive codec support and send codec preferences has no overlap, falling back to just values provided in `setVideoCodecSendPreferences`"),this.context.meetingSupportedVideoSendCodecPreferences=void 0),this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs&&this.context.videoUplinkBandwidthPolicy.setMeetingSupportedVideoSendCodecs(this.context.meetingSupportedVideoSendCodecPreferences,this.context.videoSendCodecPreferences),g&&this.context.audioVideoController.update({needsRenegotiation:!0})}handleIndexVideosPausedAtSource(){const c=this.context.videoStreamIndex.streamsPausedAtSource();for(const p of this.context.videoTileController.getAllVideoTiles()){const g=p.state();c.contain(g.streamId)?p.markPoorConnection()&&this.logger.info(`marks the tile ${g.tileId} as having a poor connection`):p.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${g.tileId} as having a poor connection`)}}constructor(c){super(c.logger),this.context=c,this.taskName="ReceiveVideoStreamIndexTask",this.isIngestionPaused=!1,this.pendingIndex=null}},"ReceiveVideoStreamIndexTask");l.default=n},rwhO:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isDestroyable=void 0;function S(h){return h&&"destroy"in h}o(S,"isDestroyable"),l.isDestroyable=S},s0Ci:function(j,l,f){"use strict";j.exports=s;var S=f("kU+7"),h,u=S.LongBits,m=S.utf8;function a(c,p){return RangeError("index out of range: "+c.pos+" + "+(p||1)+" > "+c.len)}o(a,"indexOutOfRange");function s(c){this.buf=c,this.pos=0,this.len=c.length}o(s,"Reader");var i=typeof Uint8Array<"u"?o(function(p){if(p instanceof Uint8Array||Array.isArray(p))return new s(p);throw Error("illegal buffer")},"create_typed_array"):o(function(p){if(Array.isArray(p))return new s(p);throw Error("illegal buffer")},"create_array"),e=o(function(){return S.Buffer?o(function(g){return(s.create=o(function(y){return S.Buffer.isBuffer(y)?new h(y):i(y)},"create_buffer"))(g)},"create_buffer_setup"):i},"create");s.create=e(),s.prototype._slice=S.Array.prototype.subarray||S.Array.prototype.slice,s.prototype.uint32=o(function(){var p=4294967295;return o(function(){if(p=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(p=(p|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return p;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return p},"read_uint32")},"read_uint32_setup")(),s.prototype.int32=o(function(){return this.uint32()|0},"read_int32"),s.prototype.sint32=o(function(){var p=this.uint32();return p>>>1^-(p&1)|0},"read_sint32");function t(){var c=new u(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c;if(c.lo=(c.lo|(this.buf[this.pos]&127)<<28)>>>0,c.hi=(c.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return c;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw a(this);if(c.lo=(c.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return c}return c.lo=(c.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,c}if(this.len-this.pos>4){for(;p<5;++p)if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}else for(;p<5;++p){if(this.pos>=this.len)throw a(this);if(c.hi=(c.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return c}throw Error("invalid varint encoding")}o(t,"readLongVarint"),s.prototype.bool=o(function(){return this.uint32()!==0},"read_bool");function n(c,p){return(c[p-4]|c[p-3]<<8|c[p-2]<<16|c[p-1]<<24)>>>0}o(n,"readFixed32_end"),s.prototype.fixed32=o(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)},"read_fixed32"),s.prototype.sfixed32=o(function(){if(this.pos+4>this.len)throw a(this,4);return n(this.buf,this.pos+=4)|0},"read_sfixed32");function r(){if(this.pos+8>this.len)throw a(this,8);return new u(n(this.buf,this.pos+=4),n(this.buf,this.pos+=4))}o(r,"readFixed64"),s.prototype.float=o(function(){if(this.pos+4>this.len)throw a(this,4);var p=S.float.readFloatLE(this.buf,this.pos);return this.pos+=4,p},"read_float"),s.prototype.double=o(function(){if(this.pos+8>this.len)throw a(this,4);var p=S.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,p},"read_double"),s.prototype.bytes=o(function(){var p=this.uint32(),g=this.pos,d=this.pos+p;if(d>this.len)throw a(this,p);if(this.pos+=p,Array.isArray(this.buf))return this.buf.slice(g,d);if(g===d){var y=S.Buffer;return y?y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,g,d)},"read_bytes"),s.prototype.string=o(function(){var p=this.bytes();return m.read(p,0,p.length)},"read_string"),s.prototype.skip=o(function(p){if(typeof p=="number"){if(this.pos+p>this.len)throw a(this,p);this.pos+=p}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},"skip"),s.prototype.skipType=function(c){switch(c){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(c=this.uint32()&7)!==4;)this.skipType(c);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+c+" at offset "+this.pos)}return this},s._configure=function(c){h=c,s.create=e(),h._configure();var p=S.Long?"toLong":"toNumber";S.merge(s.prototype,{int64:o(function(){return t.call(this)[p](!1)},"read_int64"),uint64:o(function(){return t.call(this)[p](!0)},"read_uint64"),sint64:o(function(){return t.call(this).zzDecode()[p](!1)},"read_sint64"),fixed64:o(function(){return r.call(this)[p](!0)},"read_fixed64"),sfixed64:o(function(){return r.call(this)[p](!1)},"read_sfixed64")})}},s3Gi:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckContentShareConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed",h[h.PermissionDenied=2]="PermissionDenied",h[h.TimedOut=3]="TimedOut",h[h.ConnectionFailed=4]="ConnectionFailed"})(S=l.CheckContentShareConnectivityFeedback||(l.CheckContentShareConnectivityFeedback={})),l.default=S},sSHp:function(j,l,f){"use strict";f.d(l,"a",function(){return e});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e=Object(a.a)("help.issues.ticketStats generated fetcher",function(){var t=Object(S.coroutine)(function*(n,r,c){try{const p=["reason"],g=Object(u.a)(c,p),d=Object(i.b)(g);return yield n(Object(m.apiCall)({method:"help.issues.ticketStats",args:d,reason:c.reason}))}catch(p){throw Object(s.a)({getState:r}).error(`API call to help.issues.ticketStats
				with reason ${c.reason} failed, initiated by generated fetcher`),p}});return function(n,r,c){return t.apply(this,arguments)}}());e.meta={name:"createFetcher",key:"createFetcherhelpIssuesTicketStatsFetcher",description:"help.issues.ticketStats generated fetcher"}},sTsL:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckVideoConnectivityFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.VideoInputRequestFailed=1]="VideoInputRequestFailed",h[h.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",h[h.ConnectionFailed=3]="ConnectionFailed",h[h.VideoNotSent=4]="VideoNotSent"})(S=l.CheckVideoConnectivityFeedback||(l.CheckVideoConnectivityFeedback={})),l.default=S},sd34:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.numToUint8=void 0;function S(h){return new Uint8Array([(h&4278190080)>>24,(h&16711680)>>16,(h&65280)>>8,h&255])}o(S,"numToUint8"),l.numToUint8=S},sdHd:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{reportEvent(u,m,a){}start(){}stop(){}constructor(){}},"NoOpEventReporter");l.default=S},sf8V:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("KJDN"));let u=o(class extends h.default{constructor(a){super(a),this.name="TypeError"}},"TypeError");l.default=u},sfTB:function(j,l,f){"use strict";(function(S){var h=this&&this.__awaiter||function(n,r,c,p){function g(d){return d instanceof c?d:new c(function(y){y(d)})}return o(g,"adopt"),new(c||(c=Promise))(function(d,y){function E(V){try{k(p.next(V))}catch(F){y(F)}}o(E,"fulfilled");function w(V){try{k(p.throw(V))}catch(F){y(F)}}o(w,"rejected");function k(V){V.done?d(V.value):g(V.value).then(E,w)}o(k,"step"),k((p=p.apply(n,r||[])).next())})},u=this&&this.__rest||function(n,r){var c={};for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&r.indexOf(p)<0&&(c[p]=n[p]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,p=Object.getOwnPropertySymbols(n);g<p.length;g++)r.indexOf(p[g])<0&&Object.prototype.propertyIsEnumerable.call(n,p[g])&&(c[p[g]]=n[p[g]]);return c},m=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const a=m(f("cKqT")),s=m(f("BkFD")),i=m(f("BEtg")),e=f("VCUZ");let t=o(class pl{addEventListeners(){!this.beaconEventListener||!("window"in S)||!window.addEventListener||!("document"in S)||!document.addEventListener||(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - addEventListeners - adding pagehide and visibility change event listeners"),window.addEventListener("pagehide",this.beaconEventListener),document.addEventListener("visibilitychange",this.beaconEventListener))}beaconEventHandler(r){(r.type==="visibilitychange"&&document.visibilityState==="hidden"||r.type==="pagehide")&&(this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - beaconEventHandler is triggered calling sendBeacon"),this.sendBeacon())}removeEventListeners(){!this.beaconEventListener||!("window"in S)||!window.removeEventListener||!("document"in S)||!document.removeEventListener||(window.removeEventListener("pagehide",this.beaconEventListener),document.removeEventListener("visibilitychange",this.beaconEventListener),this.logger.debug("Event Reporting - InMemoryJSONEventBuffer - removeEventListeners - removing pagehide and visibility change event listeners"))}start(){var r;this.removeEventListeners(),this.addEventListeners(),(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=new s.default(this.flushIntervalMs),this.intervalScheduler.start(()=>this.sendEvents())}stop(){var r;(r=this.intervalScheduler)===null||r===void 0||r.stop(),this.intervalScheduler=void 0,this.sendBeacon(),this.removeEventListeners()}addItem(r){return h(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - received event ${JSON.stringify(r)}`);const{name:c,ts:p,attributes:g}=r,d=g&&this.filterAttributes(g,this.attributesToFilter),y=Object.assign({name:c,ts:p},d);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - event after filtering attributes ${JSON.stringify(y)}`);const E=this.getSize(y);if(E>pl.MAX_ITEM_SIZE_BYTES_ALLOWED)throw new Error(`Event Reporting - Item to be added has size ${E} bytes. Item cannot exceed max item size allowed of ${pl.MAX_ITEM_SIZE_BYTES_ALLOWED} bytes.`);if(this.importantEvents.has(c)){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - sending important event ${JSON.stringify(y)}`),this.sendEventImmediately({name:c,ts:p,attributes:d});return}if(this.isFull())throw this.logger.warn("Event Reporting - Event buffer is full"),new Error("Buffer full");if(this.currentIngestionEvent.payloads.push(y),this.ingestionEventSize+=E,this.bufferItemThresholdReached(E)){const w=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);this.buffer.push(w),this.bufferSize+=this.ingestionEventSize,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - addItem - buffer item threshold reached updated buffer ${JSON.stringify(this.buffer)}`)}})}filterAttributes(r,c){const p=new Set(c);return Object.keys(r).filter(d=>p.has(d)).forEach(d=>delete r[d]),r}initializeAndGetCurrentIngestionEvent(){const r={type:this.type,v:this.v,payloads:[]};return this.ingestionEventSize=this.getSize(r),r}bufferItemThresholdReached(r){return r+this.ingestionEventSize>=this.maxBufferItemCapacityBytes||this.currentIngestionEvent.payloads.length===pl.MAX_PAYLOAD_ITEMS}getSize(r){let c=0;if(typeof r=="object")for(const[p,g]of Object.entries(r))c+=this.getPrimitiveSize(p),c+=this.getSize(g);else c+=this.getPrimitiveSize(r);return c}getPrimitiveSize(r){let c=0;return typeof r=="string"?c+=r.length*2:typeof r=="number"&&(c+=8),c}isFull(){return this.bufferSize===this.maxBufferCapacityBytes||this.buffer.length===this.totalBufferItems}isEmpty(){return this.buffer.length===0||this.bufferSize===0}getItems(r){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.isEmpty()?[]:(r=Math.min(this.buffer.length,r+1),this.buffer.splice(c,r))}makeBeaconRequestBody(r){const c={metadata:this.metadata,events:r,authorization:this.authenticationToken};return JSON.stringify(c)}makeRequestBody(r){const c={metadata:this.metadata,events:r};return JSON.stringify(c)}sendEventImmediately(r){return h(this,void 0,void 0,function*(){this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - important event received ${JSON.stringify(r)}`);const{name:c,ts:p,attributes:g}=r,d={type:this.type,v:this.v,payloads:[Object.assign({name:c,ts:p},g)]};let y=!1,E=null;const w=this.makeRequestBody([d]);try{if(E=yield this.send(w),E.ok){try{const k=yield E.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - send successful event: ${w}, message: ${JSON.stringify(k)}`)}catch(k){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Error reading OK response ${k} for event ${w}`)}return}else this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - Failed to send an important event ${w} with response status ${E.status}`),y=!0}catch(k){this.logger.warn(`Event Reporting - There may be a failure in sending an important event ${w} to the ingestion endpoint ${k}.`),y=!0;try{if(this.metadata.browserName.toLowerCase()==="firefox"){const V=this.makeBeaconRequestBody([d]);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - beaconing data out ${V}`),navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,V)?y=!1:y=!0}}catch{this.logger.warn(`Event Reporting - Error sending beacon for an important event ${w}`),y=!0}}y&&(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEventImmediately - pushing to failed events ${w}`),this.failedIngestionEvents.push(d))})}send(r){return h(this,void 0,void 0,function*(){const c=new a.default(pl.RETRY_FIXED_BACKOFF_WAIT_MS,pl.RETRY_SHORT_BACKOFF_MS,pl.RETRY_LONG_BACKOFF_MS);try{let p=0;for(;p<this.retryCountLimit;){const g=yield fetch(this.ingestionURL,{method:"POST",headers:{Authorization:`Bearer ${this.authenticationToken}`},body:r});if(g.ok||!pl.SENDING_FAILURE_CODES.has(g.status))return g;if(this.logger.warn(`Will retry sending failure for ${r} due to status code ${g.status}.`),p++,p<this.retryCountLimit){const d=c.nextBackoffAmountMs();yield e.wait(d)}}if(p===this.retryCountLimit)throw new Error(`Retry count limit reached for ${r}`)}catch(p){throw p}})}sendBeacon(){return h(this,void 0,void 0,function*(){const r=this.buffer;if(this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out buffer events ${JSON.stringify(r)}`),this.buffer=[],this.currentIngestionEvent.payloads.length>0){const p=this.deepCopyCurrentIngestionEvent(this.currentIngestionEvent);r.push(p),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out current ingestion event ${JSON.stringify(p)}`),this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent()}if(this.failedIngestionEvents.length>0){const p=this.failedIngestionEvents.map(g=>this.deepCopyCurrentIngestionEvent(g));r.push(...p),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out any failed ingestion event ${JSON.stringify(p)}`),this.failedIngestionEvents=[]}if(this.cancellableEvents.size>0&&(this.cancellableEvents.forEach(p=>{r.push(...p),this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - clearing out each cancellable event ${JSON.stringify(p)}`)}),this.cancellableEvents.clear()),r.length===0)return;const c=this.makeBeaconRequestBody(r);this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendBeacon - beacon data to send ${c}`);try{navigator.sendBeacon(`${this.ingestionURL}?beacon=1`,c)||this.logger.warn(`Event Reporting - Browser failed to queue beacon data ${c}`)}catch(p){this.logger.warn(`Event Reporting - Sending beacon data ${c} failed with error ${p}`)}})}reset(){this.maxBufferCapacityBytes=0,this.totalBufferItems=0,this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.lock=!1,this.beaconEventListener=void 0,this.cancellableEvents.clear()}destroy(){return h(this,void 0,void 0,function*(){this.stop(),this.reset()})}constructor(r,c,p,g,d){this.buffer=[],this.bufferSize=0,this.maxBufferItemCapacityBytes=0,this.ingestionEventSize=0,this.flushIntervalMs=0,this.flushSize=0,this.failedIngestionEvents=[],this.retryCountLimit=15,this.lock=!1,this.cancellableEvents=new Map,this.attributesToFilter=["externalUserId","externalMeetingId","timestampMs"],this.deepCopyCurrentIngestionEvent=J=>({type:J.type,v:J.v,payloads:[...J.payloads]}),this.sendEvents=()=>h(this,void 0,void 0,function*(){if(this.lock)return;const J=this.getItems(this.flushSize);if(J.length===0)return;this.lock=!0;const q=this.makeRequestBody(J);let $=!1;const de=Date.now();this.metadata.browserName.toLowerCase()==="firefox"&&this.cancellableEvents.set(de,J);try{this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - sending body ${q}`);const Ee=yield this.send(q);if(this.cancellableEvents.delete(de),!Ee.ok)this.logger.error(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Failed to send events ${q} with response status ${Ee.status}`),$=!0;else try{const _e=yield Ee.json();this.logger.debug(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - send successful events: ${q} message: ${JSON.stringify(_e)}`)}catch(_e){this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents error reading OK response ${_e} for events ${q}`)}}catch(Ee){$=!0,this.logger.warn(`Event Reporting - InMemoryJSONEventBuffer - sendEvents - Error in sending events ${q} to the ingestion endpoint ${Ee}`)}finally{this.lock=!1}$&&(this.cancellableEvents.delete(de),this.failedIngestionEvents.push(...J))});const y=new i.default(d).getParserResult(),{browserMajorVersion:E}=y,w=u(y,["browserMajorVersion"]),k=c.toJSON(),{type:V,v:F}=k,N=u(k,["type","v"]);this.authenticationToken=c.getAuthenticationToken(),this.metadata=Object.assign(Object.assign({},w),N),Object.keys(this.metadata).forEach(J=>this.attributesToFilter.push(J)),this.type=V,this.v=F,this.ingestionURL=p,this.logger=d,this.importantEvents=new Set(g);const{maxBufferCapacityKb:P,totalBufferItems:x,flushSize:O,flushIntervalMs:M,retryCountLimit:D}=r;this.maxBufferCapacityBytes=P*1024,this.totalBufferItems=x,this.maxBufferItemCapacityBytes=Math.round(this.maxBufferCapacityBytes/x),this.flushIntervalMs=M,this.flushSize=O,this.retryCountLimit=D,this.currentIngestionEvent=this.initializeAndGetCurrentIngestionEvent(),this.beaconEventListener=J=>this.beaconEventHandler(J),this.addEventListeners()}},"InMemoryJSONEventBuffer");l.default=t,t.SENDING_FAILURE_CODES=new Set([408,429,500,502,503,504]),t.RETRY_FIXED_BACKOFF_WAIT_MS=0,t.RETRY_SHORT_BACKOFF_MS=1e3,t.RETRY_LONG_BACKOFF_MS=15e3,t.MAX_PAYLOAD_ITEMS=2,t.MAX_ITEM_SIZE_BYTES_ALLOWED=3e3}).call(this,f("yLpj"))},sgfj:function(j,l,f){var S=f("v6w+");function h(u,m){if(u==null)return{};var a=S(u,m),s,i;if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(u);for(i=0;i<e.length;i++)s=e[i],!(m.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(u,s)&&(a[s]=u[s])}return a}o(h,"_objectWithoutProperties"),j.exports=h,j.exports.__esModule=!0,j.exports.default=j.exports},sudc:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(O,M,D,J){function q($){return $ instanceof D?$:new D(function(de){de($)})}return o(q,"adopt"),new(D||(D=Promise))(function($,de){function Ee(Be){try{ye(J.next(Be))}catch(pt){de(pt)}}o(Ee,"fulfilled");function _e(Be){try{ye(J.throw(Be))}catch(pt){de(pt)}}o(_e,"rejected");function ye(Be){Be.done?$(Be.value):q(Be.value).then(Ee,_e)}o(ye,"step"),ye((J=J.apply(O,M||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0}),l.getAudioInput=l.createAudioContext=l.VoiceFocus=void 0;const h=f("hxn6"),u=f("o3U+"),m=f("EkyC"),a=f("KvYa"),s=f("tFDz"),i=f("r7zX"),e=f("9AGb"),n={useVoiceFocusAGC:!1,useBuiltInAGC:!0},r="stable-v1",c="https://static.sdkassets.chime.aws",p={processors:`${c}/processors/`,workers:`${c}/workers/`,wasm:`${c}/wasm/`,models:`${c}/wasm/`},g={latencyHint:0},d={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},y=Object.assign(Object.assign({},d),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),E=Object.assign(Object.assign({},d),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),w={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:i.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:e.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:s.default}},k=o((O,M)=>{if(O!==void 0&&!u.isValidAssetGroup(O))throw new Error(`Invalid asset group ${O}`);if(M!==void 0&&!u.isValidRevisionID(M))throw new Error(`Invalid revision ID ${M}`)},"validateAssetSpec"),V=o((O,M)=>{let D;if(M.useBuiltInAGC?D=y:D=E,!O)return{audio:D};if(!O.audio)return O;if(O.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},O),{audio:O.audio===!0?D:Object.assign(Object.assign({},O.audio),D)})},"mungeConstraints"),F=o((O,M)=>`${M.models}${h.decideModel(O)}.wasm`,"urlForModel");let N=o(class NS{static isSupported(M,D){const{fetchBehavior:J,logger:q}=D||{};if(typeof globalThis>"u")return q==null||q.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,q))return q==null||q.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,q))return q==null||q.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,q)||q==null||q.debug("Browser does not support streaming WASM compilation.");const{assetGroup:$=r,revisionID:de,paths:Ee=p}=M||{};k($,de);const _e=de?{revisionID:de}:{assetGroup:$},ye=u.addQueryParams(J,_e),Be=Object.assign(Object.assign({},ye),{paths:Ee});return a.supportsVoiceFocusWorker(globalThis,Be,q)}static mungeExecutionPreference(M,D){const J=M===void 0||M==="auto";if(a.isSafari(globalThis)){if(J||M==="inline")return"inline";if(!J)throw new Error(`Unsupported execution preference ${M}`)}if(M==="worker-sab"&&!a.supportsSharedArrayBuffer(globalThis,globalThis,D))throw new Error(`Unsupported execution preference ${M}`);return M||"auto"}static configure(M,D){return S(this,void 0,void 0,function*(){const{fetchBehavior:J,preResolve:q,logger:$}=D||{},{category:de="voicefocus",name:Ee="default",variant:_e="auto",assetGroup:ye=r,revisionID:Be,simd:pt="detect",executionPreference:Ve="auto",executionQuantaPreference:gt,usagePreference:dt="interactivity",estimatorBudget:Je=100,paths:_t=p,thresholds:ot}=M||{};if($==null||$.debug("Configuring Voice Focus with spec",M),de!==void 0&&de!=="voicefocus")throw new Error(`Unrecognized category ${de}`);if(Ee!==void 0&&Ee!=="default"&&Ee!=="ns_es")throw new Error(`Unrecognized feature name ${Ee}`);if(_e!==void 0&&!["auto","c100","c50","c20","c10"].includes(_e))throw new Error(`Unrecognized feature variant ${_e}`);if(gt!==void 0&&![1,2,3].includes(gt))throw new Error(`Unrecognized execution quanta preference ${gt}`);if(k(ye,Be),pt!==void 0&&!["detect","force","disable"].includes(pt))throw new Error(`Unrecognized SIMD option ${pt}`);if(Ve!==void 0&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(Ve))throw new Error(`Unrecognized execution preference ${Ve}`);if(dt!==void 0&&!["quality","interactivity"].includes(dt))throw new Error(`Unrecognized usage preference ${dt}`);const Et={executionPreference:this.mungeExecutionPreference(Ve,$),usagePreference:dt,executionQuantaPreference:gt,variantPreference:_e,namePreference:Ee,simdPreference:pt,estimatorBudget:Je},Mt=Be?{revisionID:Be}:{assetGroup:ye},ze=u.addQueryParams(J,Mt),$t=Object.assign({paths:_t},ze),Un=yield h.measureAndDecideExecutionApproach(Et,$t,$,ot);if(Un.supported===!1)return{supported:!1,reason:Un.reason};$==null||$.info("Decided execution approach",Un);const{useSIMD:ni,processor:an,variant:Gn,executionQuanta:si}=Un,ri={category:de||"voicefocus",name:Ee||"default",variant:Gn,simd:ni};if(q){const On=F(ri,_t);ri.url=yield u.resolveURL(On,ze)}return{fetchConfig:$t,model:ri,processor:an,executionQuanta:si,supported:!0}})}static init(M,D){let{delegate:J,preload:q=!0,logger:$}=D;return S(this,void 0,void 0,function*(){if(M.supported===!1)throw new Error("Voice Focus not supported. Reason: "+M.reason);const{model:de,processor:Ee,fetchConfig:_e,executionQuanta:ye}=M,{simd:Be,name:pt}=de,{paths:Ve}=_e;if(Ee!=="voicefocus-inline-processor"&&Ee!=="voicefocus-worker-postMessage-processor"&&Ee!=="voicefocus-worker-sab-processor")throw new Error(`Unknown processor ${Ee}`);const gt=de.url||F(de,Ve);$==null||$.debug(`Using model URL ${gt}.`);const dt=`${Ve.wasm}audio_buffer-v1${Be?"_simd":""}.wasm`,Je=`${Ve.wasm}resampler-v1${Be?"_simd":""}.wasm`,_t=`${Ve.workers}worker-v1.js`,{file:ot,node:Et}=w[Ee],Mt=`${Ve.processors}${ot}`,ze=yield m.loadWorker(_t,"VoiceFocusWorker",_e,$);if(q){$==null||$.debug("Preloading",gt);let an=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";ze.postMessage({message:an,preload:!0,key:"model",fetchBehavior:_e,path:gt})}const Un={processor:Ee,worker:ze,audioBufferURL:dt,resamplerURL:Je,fetchBehavior:_e,modelURL:gt,delegate:J,logger:$,numberOfInputs:pt==="ns_es"?2:1},ni=new NS(ze,Mt,Et,Un,ye);return Promise.resolve(ni)})}createNode(M,D){var J;if(this.internal.isDestroyed)throw new Error("Unable to create node because VoiceFocus worker has been destroyed.");const{voiceFocusSampleRate:q=M.sampleRate===16e3?16e3:48e3,enabled:$=!0,agc:de=n}=D||{},Ee=D==null?void 0:D.es,_e={voiceFocusSampleRate:q,enabled:$,sendBufferCount:10,prefill:6,agc:de,executionQuanta:this.executionQuanta,supportFarendStream:Ee},ye=u.withQueryString(this.processorURL,(J=this.nodeOptions)===null||J===void 0?void 0:J.fetchBehavior);return M.audioWorklet.addModule(ye).then(()=>new this.nodeConstructor(M,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:_e})))}applyToStream(M,D,J){return S(this,void 0,void 0,function*(){if(this.internal.isDestroyed)throw new Error("Unable to apply stream because VoiceFocus worker has been destroyed");const q=D.createMediaStreamSource(M),$=yield this.applyToSourceNode(q,D,J),de=D.createMediaStreamDestination();return $.connect(de),{node:$,source:q,destination:de,stream:de.stream}})}applyToSourceNode(M,D,J){return S(this,void 0,void 0,function*(){const q=yield this.createNode(D,J);return M.connect(q),q})}destroy(){this.internal.worker&&this.internal.worker.terminate(),this.internal.isDestroyed=!0}constructor(M,D,J,q,$){this.processorURL=D,this.nodeConstructor=J,this.nodeOptions=q,this.executionQuanta=$,this.internal={worker:M,nodeOptions:q,isDestroyed:!1}}},"VoiceFocus");l.VoiceFocus=N;const P=o(function(){let O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;return new(window.AudioContext||window.webkitAudioContext)(O)},"createAudioContext");l.createAudioContext=P;const x=o((O,M,D)=>S(void 0,void 0,void 0,function*(){var J,q;const{constraints:$,spec:de,delegate:Ee,preload:_e=!0,options:ye}=M,{logger:Be}=D,pt=yield N.configure(de,D);if(!pt.supported)return(J=D.logger)===null||J===void 0||J.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia($);const Ve=yield N.init(pt,{delegate:Ee,preload:_e,logger:Be}),gt=((q=M.options)===null||q===void 0?void 0:q.agc)||n,dt=yield window.navigator.mediaDevices.getUserMedia(V($,gt));return Ve.applyToStream(dt,O,ye).then(Je=>Je.stream)}),"getAudioInput");l.getAudioInput=x},syoQ:function(j){j.exports=JSON.parse('{"partitions":[{"id":"aws","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^(us|eu|ap|sa|ca|me|af)\\\\-\\\\w+\\\\-\\\\d+$","regions":{"af-south-1":{"description":"Africa (Cape Town)"},"ap-east-1":{"description":"Asia Pacific (Hong Kong)"},"ap-northeast-1":{"description":"Asia Pacific (Tokyo)"},"ap-northeast-2":{"description":"Asia Pacific (Seoul)"},"ap-northeast-3":{"description":"Asia Pacific (Osaka)"},"ap-south-1":{"description":"Asia Pacific (Mumbai)"},"ap-south-2":{"description":"Asia Pacific (Hyderabad)"},"ap-southeast-1":{"description":"Asia Pacific (Singapore)"},"ap-southeast-2":{"description":"Asia Pacific (Sydney)"},"ap-southeast-3":{"description":"Asia Pacific (Jakarta)"},"ap-southeast-4":{"description":"Asia Pacific (Melbourne)"},"aws-global":{"description":"AWS Standard global region"},"ca-central-1":{"description":"Canada (Central)"},"eu-central-1":{"description":"Europe (Frankfurt)"},"eu-central-2":{"description":"Europe (Zurich)"},"eu-north-1":{"description":"Europe (Stockholm)"},"eu-south-1":{"description":"Europe (Milan)"},"eu-south-2":{"description":"Europe (Spain)"},"eu-west-1":{"description":"Europe (Ireland)"},"eu-west-2":{"description":"Europe (London)"},"eu-west-3":{"description":"Europe (Paris)"},"me-central-1":{"description":"Middle East (UAE)"},"me-south-1":{"description":"Middle East (Bahrain)"},"sa-east-1":{"description":"South America (Sao Paulo)"},"us-east-1":{"description":"US East (N. Virginia)"},"us-east-2":{"description":"US East (Ohio)"},"us-west-1":{"description":"US West (N. California)"},"us-west-2":{"description":"US West (Oregon)"}}},{"id":"aws-cn","outputs":{"dnsSuffix":"amazonaws.com.cn","dualStackDnsSuffix":"api.amazonwebservices.com.cn","name":"aws-cn","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^cn\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-cn-global":{"description":"AWS China global region"},"cn-north-1":{"description":"China (Beijing)"},"cn-northwest-1":{"description":"China (Ningxia)"}}},{"id":"aws-us-gov","outputs":{"dnsSuffix":"amazonaws.com","dualStackDnsSuffix":"api.aws","name":"aws-us-gov","supportsDualStack":true,"supportsFIPS":true},"regionRegex":"^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-us-gov-global":{"description":"AWS GovCloud (US) global region"},"us-gov-east-1":{"description":"AWS GovCloud (US-East)"},"us-gov-west-1":{"description":"AWS GovCloud (US-West)"}}},{"id":"aws-iso","outputs":{"dnsSuffix":"c2s.ic.gov","dualStackDnsSuffix":"c2s.ic.gov","name":"aws-iso","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-global":{"description":"AWS ISO (US) global region"},"us-iso-east-1":{"description":"US ISO East"},"us-iso-west-1":{"description":"US ISO WEST"}}},{"id":"aws-iso-b","outputs":{"dnsSuffix":"sc2s.sgov.gov","dualStackDnsSuffix":"sc2s.sgov.gov","name":"aws-iso-b","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$","regions":{"aws-iso-b-global":{"description":"AWS ISOB (US) global region"},"us-isob-east-1":{"description":"US ISOB East (Ohio)"}}},{"id":"aws-iso-e","outputs":{"dnsSuffix":"cloud.adc-e.uk","dualStackDnsSuffix":"cloud.adc-e.uk","name":"aws-iso-e","supportsDualStack":false,"supportsFIPS":true},"regionRegex":"^eu\\\\-isoe\\\\-\\\\w+\\\\-\\\\d+$","regions":{}}],"version":"1.1"}')},"t4/s":function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={AuthError:"auth_error"},t=Object(a.a)("search.autocomplete.triggers generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"search.autocomplete.triggers",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to search.autocomplete.triggers
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersearchAutocompleteTriggersFetcher",description:"search.autocomplete.triggers generated fetcher"}},t9Fz:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(u,m,a,s){function i(e){return e instanceof a?e:new a(function(t){t(e)})}return o(i,"adopt"),new(a||(a=Promise))(function(e,t){function n(p){try{c(s.next(p))}catch(g){t(g)}}o(n,"fulfilled");function r(p){try{c(s.throw(p))}catch(g){t(g)}}o(r,"rejected");function c(p){p.done?e(p.value):i(p.value).then(n,r)}o(c,"step"),c((s=s.apply(u,m||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});let h=o(class{destroy(){return S(this,void 0,void 0,function*(){this.mediaQueryList&&(typeof this.mediaQueryList.addEventListener=="function"?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()})}registerObserver(m){this.observerQueue.add(m),m.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(m){this.observerQueue.delete(m)}constructor(m,a){if(this.devicePixelRatioSource=m,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach(i=>{i.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())})},typeof window>"u")return;const s=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);typeof s.addEventListener=="function"?(s.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=s):typeof s.addListener=="function"?(s.addListener(this.mediaQueryListener),this.mediaQueryList=s):a.warn("ignoring DefaultDevicePixelRatioMonitor")}},"DefaultDevicePixelRatioMonitor");l.default=h},tA0R:function(j,l,f){"use strict";var S=this&&this.__importDefault||function($r){return $r&&$r.__esModule?$r:{default:$r}};Object.defineProperty(l,"__esModule",{value:!0}),l.DefaultEventController=l.DefaultDevicePixelRatioMonitor=l.DefaultDeviceController=l.DefaultContentShareController=l.DefaultBrowserBehavior=l.DefaultAudioVideoFacade=l.DefaultAudioVideoController=l.DefaultAudioMixController=l.DefaultActiveSpeakerPolicy=l.DefaultActiveSpeakerDetector=l.DataMessage=l.CreateSDPTask=l.CreatePeerConnectionTask=l.ContentShareMediaStreamBroker=l.ContentShareConstants=l.ConsoleLogger=l.ConnectionHealthPolicyConfiguration=l.ConnectionHealthData=l.ClientVideoStreamReceivingReport=l.ClientMetricReportMediaType=l.ClientMetricReportDirection=l.ClientMetricReport=l.CleanStoppedSessionTask=l.CleanRestartedSessionTask=l.CheckVideoInputFeedback=l.CheckVideoConnectivityFeedback=l.CheckNetworkUDPConnectivityFeedback=l.CheckNetworkTCPConnectivityFeedback=l.CheckContentShareConnectivityFeedback=l.CheckCameraResolutionFeedback=l.CheckAudioOutputFeedback=l.CheckAudioInputFeedback=l.CheckAudioConnectivityFeedback=l.CanvasVideoFrameBuffer=l.CSPMonitor=l.BitrateParameters=l.BaseTask=l.BaseConnectionHealthPolicy=l.BackgroundReplacementVideoFrameProcessor=l.BackgroundFilterVideoFrameProcessor=l.BackgroundBlurVideoFrameProcessor=l.BackgroundBlurStrength=l.AudioVideoControllerState=l.AudioProfile=l.AudioLogEvent=l.Attendee=l.AttachMediaInputTask=l.AsyncScheduler=l.ApplicationMetadata=l.AllHighestVideoBandwidthPolicy=void 0,l.MeetingReadinessCheckerConfiguration=l.MeetingFeatures=l.MeetingEventsClientConfiguration=l.MediaDeviceProxyHandler=l.Maybe=l.LogLevel=l.Log=l.ListenForVolumeIndicatorsTask=l.LeaveAndReceiveLeaveAckTask=l.JoinAndReceiveIndexTask=l.IntervalScheduler=l.InMemoryJSONEventBuffer=l.GlobalMetricReport=l.GetUserMediaError=l.FullJitterLimitedBackoff=l.FullJitterBackoffFactory=l.FullJitterBackoff=l.FinishGatheringICECandidatesTask=l.EventIngestionConfiguration=l.EventBufferConfiguration=l.DeviceSelection=l.DevicePixelRatioWindowSource=l.DefaultWebSocketAdapter=l.DefaultVolumeIndicatorAdapter=l.DefaultVideoTransformDevice=l.DefaultVideoTileFactory=l.DefaultVideoTileController=l.DefaultVideoTile=l.DefaultVideoStreamIndex=l.DefaultVideoStreamIdSet=l.DefaultVideoFrameProcessorTimer=l.DefaultVideoFrameProcessorPipeline=l.DefaultVideoCaptureAndEncodeParameter=l.DefaultUserAgentParser=l.DefaultTranscriptionController=l.DefaultTransceiverController=l.DefaultSimulcastUplinkPolicyForContentShare=l.DefaultSimulcastUplinkPolicy=l.DefaultSignalingClient=l.DefaultSigV4=l.DefaultSessionStateController=l.DefaultReconnectController=l.DefaultRealtimeController=l.DefaultPingPong=l.DefaultModality=l.DefaultMessagingSession=l.DefaultMeetingSession=l.DefaultMeetingReadinessChecker=l.DefaultMeetingEventReporter=l.DefaultMediaDeviceFactory=void 0,l.RedundantAudioEncoder=l.ReconnectionHealthPolicy=l.ReceiveVideoStreamIndexTask=l.ReceiveVideoInputTask=l.ReceiveTURNCredentialsTask=l.ReceiveRemoteVideoPauseResumeTask=l.ReceiveAudioInputTask=l.RealtimeVolumeIndicator=l.RealtimeState=l.RealtimeAttendeePositionInFrame=l.PromoteToPrimaryMeetingTask=l.PromiseQueue=l.PrefetchSortBy=l.PrefetchOn=l.PermissionDeniedError=l.ParallelGroupTask=l.POSTLogger=l.OverconstrainedError=l.OpenSignalingConnectionTask=l.OnceTask=l.NotReadableError=l.NotFoundError=l.None=l.NoVideoUplinkBandwidthPolicy=l.NoVideoDownlinkBandwidthPolicy=l.NoOpVideoFrameProcessor=l.NoOpVideoElementFactory=l.NoOpTask=l.NoOpMediaStreamBroker=l.NoOpLogger=l.NoOpEventReporter=l.NoOpDeviceController=l.NoOpDebugLogger=l.NoOpAudioVideoController=l.NScaleVideoUplinkBandwidthPolicy=l.MutableVideoPreferences=l.MultiLogger=l.MonitorTask=l.ModelSpecBuilder=l.MessagingSessionConfiguration=l.Message=l.MeetingSessionVideoAvailability=l.MeetingSessionURLs=l.MeetingSessionTURNCredentials=l.MeetingSessionStatusCode=l.MeetingSessionStatus=l.MeetingSessionLifecycleEventCondition=l.MeetingSessionLifecycleEvent=l.MeetingSessionCredentials=l.MeetingSessionConfiguration=void 0,l.VideoFxProcessor=l.VideoCodecCapability=l.VideoAdaptiveProbePolicy=l.Versioning=l.UnusableAudioWarningConnectionHealthPolicy=l.TypeError=l.TranscriptionStatusType=l.TranscriptionStatus=l.TranscriptResult=l.TranscriptLanguageWithScore=l.TranscriptItemType=l.TranscriptItem=l.TranscriptEntity=l.TranscriptAlternative=l.Transcript=l.TimeoutTask=l.TimeoutScheduler=l.TaskStatus=l.TargetDisplaySize=l.SubscribeAndReceiveSubscribeAckTask=l.StreamMetricReport=l.Some=l.SingleNodeAudioTransformDevice=l.SimulcastVideoStreamIndex=l.SimulcastTransceiverController=l.SimulcastLayers=l.SimulcastContentShareTransceiverController=l.SignalingClientVideoSubscriptionConfiguration=l.SignalingClientSubscribe=l.SignalingClientJoin=l.SignalingClientEventType=l.SignalingClientEvent=l.SignalingClientConnectionRequest=l.SignalingAndMetricsConnectionMonitor=l.SetRemoteDescriptionTask=l.SetLocalDescriptionTask=l.SessionStateControllerTransitionResult=l.SessionStateControllerState=l.SessionStateControllerDeferPriority=l.SessionStateControllerAction=l.ServerSideNetworkAdaption=l.SerialGroupTask=l.SendingAudioFailureConnectionHealthPolicy=l.SendAndReceiveDataMessagesTask=l.SDPMediaSection=l.SDPCandidateType=l.SDP=l.RunnableTask=l.RedundantAudioRecoveryMetricReport=l.RedundantAudioEncoderWorkerCode=void 0,l.isVideoTransformDevice=l.isDestroyable=l.isAudioTransformDevice=l.ZLIBTextCompressor=l.WebSocketReadyState=l.WaitForAttendeePresenceTask=l.VoiceFocusTransformDevice=l.VoiceFocusDeviceTransformer=l.VideoTileState=l.VideoStreamDescription=l.VideoSource=l.VideoQualitySettings=l.VideoQualityAdaptationPreference=l.VideoPriorityBasedPolicyConfig=l.VideoPriorityBasedPolicy=l.VideoPreferences=l.VideoPreference=l.VideoOnlyTransceiverController=l.VideoLogEvent=void 0;const h=S(f("uTAD"));l.AllHighestVideoBandwidthPolicy=h.default;const u=S(f("DmQM"));l.ApplicationMetadata=u.default;const m=S(f("F7zz"));l.AsyncScheduler=m.default;const a=S(f("nDuE"));l.AttachMediaInputTask=a.default;const s=S(f("beBF"));l.Attendee=s.default;const i=S(f("PPZC"));l.AudioLogEvent=i.default;const e=S(f("f3u9"));l.AudioProfile=e.default;const t=S(f("1uai"));l.AudioVideoControllerState=t.default;const n=S(f("gLI0"));l.BackgroundBlurStrength=n.default;const r=S(f("Obod"));l.BackgroundBlurVideoFrameProcessor=r.default;const c=S(f("IsLT"));l.BackgroundFilterVideoFrameProcessor=c.default;const p=S(f("ySOd"));l.BackgroundReplacementVideoFrameProcessor=p.default;const g=S(f("oHvd"));l.BaseConnectionHealthPolicy=g.default;const d=S(f("j+uH"));l.BaseTask=d.default;const y=S(f("p5Ac"));l.BitrateParameters=y.default;const E=S(f("p7bP"));l.CSPMonitor=E.default;const w=S(f("Xv43"));l.CanvasVideoFrameBuffer=w.default;const k=S(f("PmG3"));l.CheckAudioConnectivityFeedback=k.default;const V=S(f("ig3o"));l.CheckAudioInputFeedback=V.default;const F=S(f("Rx4Y"));l.CheckAudioOutputFeedback=F.default;const N=S(f("nWLk"));l.CheckCameraResolutionFeedback=N.default;const P=S(f("s3Gi"));l.CheckContentShareConnectivityFeedback=P.default;const x=S(f("VKrp"));l.CheckNetworkTCPConnectivityFeedback=x.default;const O=S(f("M1uR"));l.CheckNetworkUDPConnectivityFeedback=O.default;const M=S(f("sTsL"));l.CheckVideoConnectivityFeedback=M.default;const D=S(f("6k9T"));l.CheckVideoInputFeedback=D.default;const J=S(f("7EAL"));l.CleanRestartedSessionTask=J.default;const q=S(f("wjYw"));l.CleanStoppedSessionTask=q.default;const $=S(f("6SO8"));l.ClientMetricReport=$.default;const de=S(f("bjg3"));l.ClientMetricReportDirection=de.default;const Ee=S(f("x8On"));l.ClientMetricReportMediaType=Ee.default;const _e=S(f("7JpI"));l.ClientVideoStreamReceivingReport=_e.default;const ye=S(f("rhlI"));l.ConnectionHealthData=ye.default;const Be=S(f("U++r"));l.ConnectionHealthPolicyConfiguration=Be.default;const pt=S(f("zd8f"));l.ConsoleLogger=pt.default;const Ve=S(f("r3TB"));l.ContentShareConstants=Ve.default;const gt=S(f("InPl"));l.ContentShareMediaStreamBroker=gt.default;const dt=S(f("7UVU"));l.CreatePeerConnectionTask=dt.default;const Je=S(f("lFzH"));l.CreateSDPTask=Je.default;const _t=S(f("3i7i"));l.DataMessage=_t.default;const ot=S(f("HAqy"));l.DefaultActiveSpeakerDetector=ot.default;const Et=S(f("CxCb"));l.DefaultActiveSpeakerPolicy=Et.default;const Mt=S(f("kUL9"));l.DefaultAudioMixController=Mt.default;const ze=S(f("a6MJ"));l.DefaultAudioVideoController=ze.default;const $t=S(f("Fm4y"));l.DefaultAudioVideoFacade=$t.default;const Un=S(f("U9CR"));l.DefaultBrowserBehavior=Un.default;const ni=S(f("egzF"));l.DefaultContentShareController=ni.default;const an=S(f("ZsEg"));l.DefaultDeviceController=an.default;const Gn=S(f("+DE9"));l.DefaultDevicePixelRatioMonitor=Gn.default;const si=S(f("KEX5"));l.DefaultEventController=si.default;const ri=S(f("Gs2/"));l.DefaultMediaDeviceFactory=ri.default;const On=S(f("pewp"));l.DefaultMeetingEventReporter=On.default;const Gi=S(f("PSPT"));l.DefaultMeetingReadinessChecker=Gi.default;const ui=S(f("CWxj"));l.DefaultMeetingSession=ui.default;const Fi=S(f("pacc"));l.DefaultMessagingSession=Fi.default;const Hi=S(f("ppUg"));l.DefaultModality=Hi.default;const Sn=S(f("igcJ"));l.DefaultPingPong=Sn.default;const un=S(f("iRMv"));l.DefaultRealtimeController=un.default;const bn=S(f("l7oq"));l.DefaultReconnectController=bn.default;const Ot=S(f("on9F"));l.DefaultSessionStateController=Ot.default;const En=S(f("dPyZ"));l.DefaultSigV4=En.default;const Lt=S(f("HG8V"));l.DefaultSignalingClient=Lt.default;const Hn=S(f("BGMr"));l.DefaultSimulcastUplinkPolicy=Hn.default;const Ji=S(f("VgUL"));l.DefaultSimulcastUplinkPolicyForContentShare=Ji.default;const $n=S(f("ZdbB"));l.DefaultTransceiverController=$n.default;const Ti=S(f("J5JU"));l.DefaultTranscriptionController=Ti.default;const Ir=S(f("BEtg"));l.DefaultUserAgentParser=Ir.default;const er=S(f("Biyp"));l.DefaultVideoCaptureAndEncodeParameter=er.default;const cr=S(f("eFki"));l.DefaultVideoFrameProcessorPipeline=cr.default;const gi=S(f("h8NR"));l.DefaultVideoFrameProcessorTimer=gi.default;const Yi=S(f("MpTp"));l.DefaultVideoStreamIdSet=Yi.default;const Xi=S(f("0LIx"));l.DefaultVideoStreamIndex=Xi.default;const jt=S(f("Z/hr"));l.DefaultVideoTile=jt.default;const pe=S(f("yS4C"));l.DefaultVideoTileController=pe.default;const Re=S(f("Wnnr"));l.DefaultVideoTileFactory=Re.default;const Fe=S(f("7TH8"));l.DefaultVideoTransformDevice=Fe.default;const qe=S(f("kabN"));l.DefaultVolumeIndicatorAdapter=qe.default;const vt=S(f("3jln"));l.DefaultWebSocketAdapter=vt.default;const lt=S(f("R+jL"));l.DevicePixelRatioWindowSource=lt.default;const Nt=S(f("6DYs"));l.DeviceSelection=Nt.default;const ln=S(f("IKDz"));l.EventBufferConfiguration=ln.default;const fn=S(f("HK1f"));l.EventIngestionConfiguration=fn.default;const Bt=S(f("tMH2"));l.FinishGatheringICECandidatesTask=Bt.default;const Ci=S(f("cKqT"));l.FullJitterBackoff=Ci.default;const Si=S(f("o5nl"));l.FullJitterBackoffFactory=Si.default;const gr=S(f("HCbE"));l.FullJitterLimitedBackoff=gr.default;const tr=S(f("KJDN"));l.GetUserMediaError=tr.default;const ai=S(f("U3GI"));l.GlobalMetricReport=ai.default;const wr=S(f("sfTB"));l.InMemoryJSONEventBuffer=wr.default;const li=S(f("BkFD"));l.IntervalScheduler=li.default;const lr=S(f("Wdtm"));l.JoinAndReceiveIndexTask=lr.default;const Zn=S(f("2vi8"));l.LeaveAndReceiveLeaveAckTask=Zn.default;const Or=S(f("3taG"));l.ListenForVolumeIndicatorsTask=Or.default;const Qi=S(f("KCGh"));l.Log=Qi.default;const zr=S(f("mlaT"));l.LogLevel=zr.default;const _r=S(f("zH6K"));l.MediaDeviceProxyHandler=_r.default;const Zi=S(f("V2kw"));l.MeetingEventsClientConfiguration=Zi.default;const ro=S(f("2M37"));l.MeetingFeatures=ro.default;const yt=S(f("dazq"));l.MeetingReadinessCheckerConfiguration=yt.default;const st=S(f("94P3"));l.MeetingSessionConfiguration=st.default;const dn=S(f("/N6y"));l.MeetingSessionCredentials=dn.default;const Kt=S(f("m/NO"));l.MeetingSessionLifecycleEvent=Kt.default;const wn=S(f("fi20"));l.MeetingSessionLifecycleEventCondition=wn.default;const Jn=S(f("aZba"));l.MeetingSessionStatus=Jn.default;const z=S(f("papz"));l.MeetingSessionStatusCode=z.default;const ue=S(f("42jQ"));l.MeetingSessionTURNCredentials=ue.default;const Me=S(f("GZjp"));l.MeetingSessionURLs=Me.default;const Le=S(f("ZS2b"));l.MeetingSessionVideoAvailability=Le.default;const Ye=S(f("HXIC"));l.Message=Ye.default;const St=S(f("wSXL"));l.MessagingSessionConfiguration=St.default;const Ct=S(f("DE61"));l.ModelSpecBuilder=Ct.default;const Tt=S(f("Hi4k"));l.MonitorTask=Tt.default;const Ke=S(f("N8ne"));l.MultiLogger=Ke.default;const Pt=S(f("P7Xm"));l.NScaleVideoUplinkBandwidthPolicy=Pt.default;const Dt=S(f("4w5z"));l.NoOpAudioVideoController=Dt.default;const Rn=S(f("ZHiL"));l.NoOpDebugLogger=Rn.default;const pn=S(f("9oOt"));l.NoOpDeviceController=pn.default;const zn=S(f("sdHd"));l.NoOpEventReporter=zn.default;const di=S(f("aZJ3"));l.NoOpLogger=di.default;const Ri=S(f("3niY"));l.NoOpMediaStreamBroker=Ri.default;const Pi=S(f("mZDK"));l.NoOpTask=Pi.default;const fi=S(f("9bRS"));l.NoOpVideoElementFactory=fi.default;const hi=S(f("ZZPe"));l.NoOpVideoFrameProcessor=hi.default;const Cn=S(f("1i73"));l.NoVideoDownlinkBandwidthPolicy=Cn.default;const zi=S(f("VWHd"));l.NoVideoUplinkBandwidthPolicy=zi.default;const Vi=S(f("QUzi"));l.NotFoundError=Vi.default;const Ui=S(f("u3ud"));l.NotReadableError=Ui.default;const Rr=S(f("ZnGd"));l.OnceTask=Rr.default;const Ii=S(f("uB5g"));l.OpenSignalingConnectionTask=Ii.default;const Sr=S(f("wJ81"));l.OverconstrainedError=Sr.default;const Xn=S(f("reWd"));l.POSTLogger=Xn.default;const vi=S(f("W+eo"));l.ParallelGroupTask=vi.default;const pi=S(f("wkYg"));l.PermissionDeniedError=pi.default;const _i=S(f("18tZ"));l.PrefetchOn=_i.default;const Yn=S(f("aApz"));l.PrefetchSortBy=Yn.default;const Ht=S(f("FMuk"));l.PromiseQueue=Ht.default;const nr=S(f("hspq"));l.PromoteToPrimaryMeetingTask=nr.default;const Fs=S(f("iA6Z"));l.RealtimeAttendeePositionInFrame=Fs.default;const qr=S(f("9Bli"));l.RealtimeState=qr.default;const dr=S(f("vhVE"));l.RealtimeVolumeIndicator=dr.default;const eo=S(f("rkwE"));l.ReceiveAudioInputTask=eo.default;const to=S(f("5Y0c"));l.ReceiveRemoteVideoPauseResumeTask=to.default;const ur=S(f("uQRK"));l.ReceiveTURNCredentialsTask=ur.default;const Vs=S(f("fxRI"));l.ReceiveVideoInputTask=Vs.default;const Us=S(f("rw3l"));l.ReceiveVideoStreamIndexTask=Us.default;const Li=S(f("Zful"));l.ReconnectionHealthPolicy=Li.default;const kr=S(f("3sEM"));l.RedundantAudioEncoder=kr.default;const xo=S(f("IrJe"));l.RedundantAudioEncoderWorkerCode=xo.default;const Hs=S(f("OcJO"));l.RedundantAudioRecoveryMetricReport=Hs.default;const Jr=S(f("e/M0"));l.RunnableTask=Jr.default;const bo=S(f("wXa7"));l.SDP=bo.default;const uo=S(f("JsnC"));l.SDPCandidateType=uo.default;const Bo=S(f("2wCG"));l.SDPMediaSection=Bo.default;const ys=S(f("D7wJ"));l.SendAndReceiveDataMessagesTask=ys.default;const bs=S(f("1GR6"));l.SendingAudioFailureConnectionHealthPolicy=bs.default;const Zo=S(f("K+bq"));l.SerialGroupTask=Zo.default;const Cs=S(f("/AJg"));l.ServerSideNetworkAdaption=Cs.default;const Es=S(f("K5tc"));l.SessionStateControllerAction=Es.default;const fo=S(f("JOZa"));l.SessionStateControllerDeferPriority=fo.default;const no=S(f("AXyi"));l.SessionStateControllerState=no.default;const oo=S(f("Q2ix"));l.SessionStateControllerTransitionResult=oo.default;const ho=S(f("XzFx"));l.SetLocalDescriptionTask=ho.default;const Co=S(f("fZkv"));l.SetRemoteDescriptionTask=Co.default;const Eo=S(f("da6e"));l.SignalingAndMetricsConnectionMonitor=Eo.default;const Fo=S(f("Sz6V"));l.SignalingClientConnectionRequest=Fo.default;const qo=S(f("0JTw"));l.SignalingClientEvent=qo.default;const vr=S(f("HbHZ"));l.SignalingClientEventType=vr.default;const es=S(f("OV1w"));l.SignalingClientJoin=es.default;const Ts=S(f("VhCr"));l.SignalingClientSubscribe=Ts.default;const ts=S(f("bQ+R"));l.SignalingClientVideoSubscriptionConfiguration=ts.default;const Yr=S(f("wQGL"));l.SimulcastContentShareTransceiverController=Yr.default;const Vo=S(f("ezoW"));l.SimulcastLayers=Vo.default;const Dr=S(f("VYs+"));l.SimulcastTransceiverController=Dr.default;const po=S(f("LIUS"));l.SimulcastVideoStreamIndex=po.default;const mo=S(f("GW5S"));l.SingleNodeAudioTransformDevice=mo.default;const Uo=S(f("Tsvd"));l.StreamMetricReport=Uo.default;const so=S(f("ZISg"));l.SubscribeAndReceiveSubscribeAckTask=so.default;const Wr=S(f("w1x/"));l.TargetDisplaySize=Wr.default;const To=S(f("IGBW"));l.TaskStatus=To.default;const Io=S(f("zcg+"));l.TimeoutScheduler=Io.default;const jr=S(f("iQPr"));l.TimeoutTask=jr.default;const go=S(f("VPK4"));l.Transcript=go.default;const Ho=S(f("Z0UI"));l.TranscriptAlternative=Ho.default;const Is=S(f("XYJD"));l.TranscriptEntity=Is.default;const zs=S(f("epkm"));l.TranscriptItem=zs.default;const Lr=S(f("QPT4"));l.TranscriptItemType=Lr.default;const ns=S(f("Ka3M"));l.TranscriptLanguageWithScore=ns.default;const Gr=S(f("nXJe"));l.TranscriptResult=Gr.default;const Ws=S(f("PbSJ"));l.TranscriptionStatus=Ws.default;const js=S(f("HrOX"));l.TranscriptionStatusType=js.default;const Xr=S(f("sf8V"));l.TypeError=Xr.default;const wo=S(f("I/xa"));l.UnusableAudioWarningConnectionHealthPolicy=wo.default;const is=S(f("ac3q"));l.Versioning=is.default;const zo=S(f("rCkh"));l.VideoAdaptiveProbePolicy=zo.default;const ws=S(f("CAce"));l.VideoCodecCapability=ws.default;const ir=S(f("AtlK"));l.VideoFxProcessor=ir.default;const Wo=S(f("10yS"));l.VideoLogEvent=Wo.default;const Oo=S(f("XJKy"));l.VideoOnlyTransceiverController=Oo.default;const rs=S(f("h96U"));l.VideoPreference=rs.default;const Os=S(f("T44/"));l.VideoPreferences=Os.default;const Qr=S(f("5/lR"));l.VideoPriorityBasedPolicy=Qr.default;const Gs=S(f("BY2i"));l.VideoPriorityBasedPolicyConfig=Gs.default;const jo=S(f("aCJD"));l.VideoQualityAdaptationPreference=jo.default;const fr=S(f("my46"));l.VideoQualitySettings=fr.default;const Go=S(f("7p5e"));l.VideoSource=Go.default;const os=S(f("OEM7"));l.VideoStreamDescription=os.default;const ss=S(f("uQnq"));l.VideoTileState=ss.default;const $o=S(f("eWGP"));l.VoiceFocusDeviceTransformer=$o.default;const Ro=S(f("aMTh"));l.VoiceFocusTransformDevice=Ro.default;const as=S(f("xeHQ"));l.WaitForAttendeePresenceTask=as.default;const ls=S(f("z8+u"));l.WebSocketReadyState=ls.default;const ds=S(f("aTUL"));l.ZLIBTextCompressor=ds.default;const Zr=f("T44/");Object.defineProperty(l,"MutableVideoPreferences",{enumerable:!0,get:function(){return Zr.MutableVideoPreferences}});const ao=f("Aplu");Object.defineProperty(l,"Some",{enumerable:!0,get:function(){return ao.Some}}),Object.defineProperty(l,"None",{enumerable:!0,get:function(){return ao.None}}),Object.defineProperty(l,"Maybe",{enumerable:!0,get:function(){return ao.Maybe}});const Mr=f("6k+I");Object.defineProperty(l,"isAudioTransformDevice",{enumerable:!0,get:function(){return Mr.isAudioTransformDevice}});const cs=f("crgu");Object.defineProperty(l,"isDestroyable",{enumerable:!0,get:function(){return cs.isDestroyable}});const lo=f("0OOd");Object.defineProperty(l,"isVideoTransformDevice",{enumerable:!0,get:function(){return lo.isVideoTransformDevice}})},tFDz:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})};Object.defineProperty(l,"__esModule",{value:!0});const h=f("KvYa"),u=f("nJ1/"),m=5*1e3;let a=o(class extends u.VoiceFocusAudioWorkletNode{onModuleBufferLoaded(i,e){this.port.postMessage({message:"module-buffer",buffer:i,key:e})}onModuleLoaded(i,e){this.port.postMessage({message:"module",module:i,key:e})}enable(){return S(this,void 0,void 0,function*(){this.port.postMessage({message:"enable"})})}disable(){return S(this,void 0,void 0,function*(){this.port.postMessage({message:"disable"})})}stop(){var i;return S(this,void 0,void 0,function*(){this.port.postMessage({message:"stop"});try{(i=this.worker)===null||i===void 0||i.terminate()}catch(e){console.error("failed to terminate worker:",e)}this.disconnect()})}onProcessorMessage(i){var e,t,n;const r=i.data;switch(r.message){case"cpu":this.cpuWarningCount++;const c=Date.now(),p=this.cpuWarningLastTriggered||c,g=Math.abs(c-p);(!this.cpuWarningLastTriggered||g>m)&&((e=this.logger)===null||e===void 0||e.warn(`CPU warning (count: ${this.cpuWarningCount}):`,r.message),this.cpuWarningCount=0,this.cpuWarningLastTriggered=c),(t=this.delegate)===null||t===void 0||t.onCPUWarning();break;default:(n=this.logger)===null||n===void 0||n.debug("Ignoring processor message.")}}onWorkerMessage(i){const e=i.data;switch(e.message){case"module-buffer":if(!e.buffer||!e.key)return;this.onModuleBufferLoaded(e.buffer,e.key);break;case"module":if(!e.module||!e.key)return;this.onModuleLoaded(e.module,e.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}constructor(i,e){super(i,e.processor,e),this.cpuWarningCount=0,this.channelCountMode="explicit",this.channelCount=1;const{modelURL:t,worker:n,fetchBehavior:r,logger:c,delegate:p}=e;this.logger=c,this.port.onmessage=this.onProcessorMessage.bind(this),this.delegate=p,c&&c.debug("VoiceFocusInlineNode:",t),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const g=h.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:g,key:"model",fetchBehavior:r,path:t})}},"VoiceFocusInlineNode");l.default=a},tK6J:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("6/h7")),m=h(f("8wPz"));let a=o(class xS{sortedDeviceList(){return S(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)u.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const n=Reflect.get(i,e,t);return typeof n=="function"?n.bind(i):n},this.patchAddEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,p)=>{if(r==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new m.default(xS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(n,i,[r,c,p])}},this.patchRemoveEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,p)=>{if(r==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(n,i,[r,c,p])}},this.pollDeviceLists=()=>S(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,n)=>t.deviceId!==this.devices[n].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},tMH2:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("papz")),m=h(f("wXa7")),a=h(f("j+uH"));let s=o(class BS extends a.default{removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return S(this,void 0,void 0,function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new m.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines()){this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`);return}}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if((this.context.browserBehavior.hasFirefoxWebRTC()||this.context.peer.iceGatheringState==="complete")&&new m.default(this.context.peer.localDescription.sdp).hasCandidates()){this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering");return}try{yield new Promise((e,t)=>{this.cancelPromise=n=>{this.removeEventListener(),t(n)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if(this.context.peer.iceGatheringState==="complete"){this.removeEventListener(),e(),delete this.cancelPromise;return}},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=n=>{if(this.context.logger.info(`ice candidate: ${n.candidate?n.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),n.candidate&&(m.default.isRTPCandidate(n.candidate.candidate)&&this.context.iceCandidates.push(n.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1)){this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),delete this.cancelPromise;return}this.context.peer.iceGatheringState==="complete"&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),!new m.default(this.context.peer.localDescription.sdp).hasCandidates()||this.context.iceCandidates.length===0?(t(new Error("no ice candidates were gathered")),delete this.cancelPromise):(e(),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()})}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}})}constructor(e,t=BS.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}},"FinishGatheringICECandidatesTask");l.default=s,s.CHROME_VPN_TIMEOUT_MS=5e3},tcc5:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MeetingSessionLifecycleEvent=void 0;var S;(function(h){h[h.Connecting=0]="Connecting",h[h.Started=1]="Started",h[h.Stopped=2]="Stopped"})(S=l.MeetingSessionLifecycleEvent||(l.MeetingSessionLifecycleEvent={})),l.default=S},teem:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("hEYi")),m=h(f("aVV0"));let a=o(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=o(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===u.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(c){this.signalingClient=c}},"Interceptor");const n=new t(this.context.signalingClient);this.taskCanceler=n,this.context.signalingClient.registerObserver(n)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},u3ud:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("KJDN"));let u=o(class extends h.default{constructor(a){super(a),this.name="NotReadableError"}},"NotReadableError");l.default=u},uB5g:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("Sz6V")),m=h(f("HbHZ")),a=h(f("j+uH"));let s=o(class extends a.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new u.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise((n,r)=>{let c=o(class{cancel(){this.signalingClient.removeObserver(this),r(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(d){switch(d.type){case m.default.WebSocketOpen:this.signalingClient.removeObserver(this),n();break;case m.default.WebSocketFailed:this.signalingClient.removeObserver(this),r(new Error("WebSocket connection failed"));break}}constructor(d){this.signalingClient=d}},"WebSocketOpenInterceptor");const p=new c(this.context.signalingClient);this.context.signalingClient.registerObserver(p),this.taskCanceler=p})}catch(n){throw n}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}})}constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}},"OpenSignalingConnectionTask");l.default=s},uCvS:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0});const h=f("f2XL"),u=S(f("LmyK")),m=S(f("mpmV")),a=S(f("2oFa"));let s=o(class FS{getMetricMap(e,t){switch(e){case m.default.AUDIO:switch(t){case u.default.UPSTREAM:return this.audioUpstreamMetricMap;case u.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case m.default.VIDEO:switch(t){case u.default.UPSTREAM:return this.videoUpstreamMetricMap;case u.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getStreamDimensionMap(){return this.streamDimensionMap}getObservableMetricValue(e){if(this.overriddenObservableMetrics.has(e))return this.overriddenObservableMetrics.get(e);const t=this.observableMetricSpec[e],r=this.getMetricMap(t.media,t.dir)[t.source],{transform:c,source:p}=r;if(t.hasOwnProperty("media"))for(const g in this.streamMetricReports){const d=this.streamMetricReports[g];if(d.direction===t.dir&&d.mediaType===t.media)return c(p||t.source,Number(g))}else return c(p||t.source);return 0}getObservableVideoMetricValue(e,t){const n=this.observableVideoMetricSpec[e],c=this.getMetricMap(n.media,n.dir)[n.source],{transform:p,source:g}=c;return p(g||n.source,t)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===m.default.VIDEO){const n={};for(const g in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[g].dir===this.streamMetricReports[t].direction){const d=this.getObservableVideoMetricValue(g,Number(t));isNaN(d)||(n[g]=d)}const r=this.streamMetricReports[t].groupId,c=this.streamMetricReports[t].streamId;let p="";this.videoStreamIndex.attendeeIdForGroupId!==void 0?p=r?this.videoStreamIndex.attendeeIdForGroupId(r):this.selfAttendeeId:p=c?this.videoStreamIndex.attendeeIdForStreamId(c):this.selfAttendeeId,e[p]=e[p]?e[p]:{},e[p][t]=n}return e}getRTCStatsReport(){return this.rtcStatsReport}clone(){const e=new FS(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.rtcStatsReport=this.rtcStatsReport,e.customStatsReports=this.customStatsReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e.overriddenObservableMetrics=this.overriddenObservableMetrics,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug(()=>`Client Metric Report: ${JSON.stringify(e)}`)}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}overrideObservableMetric(e,t){this.overriddenObservableMetrics.set(e,t)}constructor(e,t,n){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=n,this.globalMetricReport=new a.default,this.streamMetricReports={},this.rtcStatsReport={},this.customStatsReports=[],this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.overriddenObservableMetrics=new Map,this.identityValue=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[r])},this.decoderLossPercent=(r,c)=>{const p=this.streamMetricReports[c],g=p.currentMetrics.concealedSamples-(p.previousMetrics.concealedSamples||0),d=p.currentMetrics.totalSamplesReceived-(p.previousMetrics.totalSamplesReceived||0);return d<=0||d-g<=0?0:g/d*100},this.packetLossPercent=(r,c)=>{const p=this.streamMetricReports[c],g=p.currentMetrics[r]-(p.previousMetrics[r]||0),d=p.currentMetrics.packetsLost-(p.previousMetrics.packetsLost||0),y=g+d;return y<=0||d<=0?0:d*100/y},this.jitterBufferMs=(r,c)=>{const p=this.streamMetricReports[c],g=p.currentMetrics.jitterBufferDelay-(p.previousMetrics.jitterBufferDelay||0),d=p.currentMetrics.jitterBufferEmittedCount-(p.previousMetrics.jitterBufferEmittedCount||0);return g<=0||d<=0?0:g/d*1e3},this.countPerSecond=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);const d=p.currentMetrics[r]-(p.previousMetrics[r]||0);return d<=0?0:Math.trunc(d/g)},this.bitsPerSecond=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);const d=(p.currentMetrics[r]-(p.previousMetrics[r]||0))*8;return d<=0?0:Math.trunc(d/g)},this.secondsToMilliseconds=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;return Number(p.currentMetrics[r]*1e3)},this.averageTimeSpentPerSecondInMilliseconds=(r,c)=>{const p=c?this.streamMetricReports[c]:this.globalMetricReport;let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);const d=p.currentMetrics[r]-(p.previousMetrics[r]||0);return d<=0?0:d*1e3/g},this.averageCpuQualityLimitationDurationPerSecondInMilliseconds=(r,c)=>{const p=this.streamMetricReports[c];let g=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(g<=0)return 0;this.previousTimestampMs<=0&&(g=1);let d=0,y=0;for(const[w,k]of Object.entries(p.previousObjectMetrics[r]))w==="cpu"&&(d=k);for(const[w,k]of Object.entries(p.currentObjectMetrics[r]))w==="cpu"&&(y=k);const E=y-d;return E<=0?0:E*1e3/g},this.isHardwareImplementation=(r,c)=>{const p=this.streamMetricReports[c],g=String(p.currentStringMetrics[r]),d=g.includes("ExternalDecoder")||g.includes("ExternalEncoder")||g.includes("EncodeAccelerator")||g.includes("DecodeAccelerator"),y=g.includes("fallback from");return d&&!y?1:0},this.globalMetricMap={retransmittedBytesSent:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},totalEncodedBytesTarget:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},totalPacketSendDelay:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:h.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.STUN_RTT_MS},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_MIC_AUDIO_LEVEL,source:"audioLevel"}},this.audioUpstreamMetricMap={jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_MIC_BITRATE},roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={concealedSamples:{transform:this.countPerSecond},totalSamplesReceived:{transform:this.countPerSecond},decoderLoss:{transform:this.decoderLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT},packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.RTC_SPK_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.RTC_SPK_BITRATE},audioLevel:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_AUDIO_LEVEL},totalAudioPacketsLost:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_LOST},totalAudioPacketsExpected:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_EXPECTED},totalAudioPacketsRecoveredRed:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_RED},totalAudioPacketsRecoveredFec:{transform:this.identityValue,type:h.SdkMetric.Type.RTC_SPK_TOTAL_RECOVERED_FEC}},this.videoUpstreamMetricMap={roundTripTime:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_SENT_RTT_MS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_RECEIVED},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_RECEIVED},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_RECEIVED},framesPerSecond:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_ENCODE_FPS},packetsSent:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_BITRATE},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_SENT_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_ENCODE_WIDTH},jitter:{transform:this.secondsToMilliseconds},totalEncodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_ENCODE_MS},encoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_ENCODER_IS_HARDWARE},qualityLimitationDurations:{transform:this.averageCpuQualityLimitationDurationPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_QUALITY_LIMITATION_DURATION_CPU}},this.videoDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:h.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},framesReceived:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DECODE_FPS},nackCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_NACKS_SENT},firCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FIRS_SENT},pliCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},jitter:{transform:this.secondsToMilliseconds,type:h.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitterBufferDelay:{transform:this.countPerSecond},jitterBufferEmittedCount:{transform:this.countPerSecond},jitterBufferMs:{transform:this.jitterBufferMs,type:h.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},qpSum:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},frameHeight:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:h.SdkMetric.Type.VIDEO_DECODE_WIDTH},totalDecodeTime:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_DECODE_MS},decoderImplementation:{transform:this.isHardwareImplementation,type:h.SdkMetric.Type.VIDEO_DECODER_IS_HARDWARE},totalFreezesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_FREEZE_DURATION},freezeCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_FREEZE_COUNT},totalPausesDuration:{transform:this.averageTimeSpentPerSecondInMilliseconds,type:h.SdkMetric.Type.VIDEO_PAUSE_DURATION},pauseCount:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_PAUSE_COUNT},framesDropped:{transform:this.countPerSecond,type:h.SdkMetric.Type.VIDEO_DROPPED_FPS}},this.streamDimensionMap={encoderImplementation:h.SdkStreamDimension.Type.VIDEO_ENCODER_NAME,decoderImplementation:h.SdkStreamDimension.Type.VIDEO_DECODER_NAME},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamPacketsReceived:{source:"packetsReceived",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamJitterMs:{source:"jitter",media:m.default.VIDEO,dir:u.default.DOWNSTREAM},videoDownstreamDelayMs:{source:"jitterBufferMs",media:m.default.VIDEO,dir:u.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioDecoderLoss:{source:"decoderLoss",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioUpstreamRoundTripTimeMs:{source:"roundTripTime",media:m.default.AUDIO,dir:u.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:m.default.VIDEO,dir:u.default.UPSTREAM},audioSpeakerDelayMs:{source:"jitterBufferMs",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.UPSTREAM},audioDownstreamJitterMs:{source:"jitter",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},nackCountReceivedPerSecond:{source:"nackCount",media:m.default.VIDEO,dir:u.default.UPSTREAM},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},availableIncomingBitrate:{source:"availableIncomingBitrate"},currentRoundTripTimeMs:{source:"currentRoundTripTime"},audioDownstreamLevel:{source:"audioLevel",media:m.default.AUDIO,dir:u.default.DOWNSTREAM},audioUpstreamLevel:{source:"audioLevel"}}}},"ClientMetricReport");l.default=s},uKXT:function(j,l,f){"use strict";var S=f("YBmv"),h=f("eP7z"),u=f("+Xah");function m(a){return a&&a.length?Object(S.a)(a,u.a,h.a):void 0}o(m,"min"),l.a=m},uQRK:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("papz")),m=h(f("42jQ")),a=h(f("ppUg")),s=h(f("ac3q")),i=h(f("j+uH"));let e=o(class extends i.default{cancel(){if(this.cancelPromise){const n=new Error(`canceling ${this.name()}`);this.cancelPromise(n),delete this.cancelPromise}}run(){return S(this,void 0,void 0,function*(){if(this.context.turnCredentials){this.context.logger.info("TURN credentials available, skipping credentials fetch");return}if(this.context.logger.error("missing TURN credentials - falling back to fetch"),!this.url){this.context.logger.info("TURN control url not supplied, skipping credentials fetch");return}const n={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json","X-Chime-Auth-Token":"_aws_wt_session="+new a.default(this.joinToken).base()},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({meetingId:this.meetingId})};this.context.logger.info(`requesting TURN credentials from ${this.url}`);const r=yield new Promise((c,p)=>S(this,void 0,void 0,function*(){this.cancelPromise=g=>{p(g)};try{const g=yield fetch(s.default.urlWithVersion(this.url),n);if(this.context.logger.info("received TURN credentials"),g.status&&g.status===403){p(new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.TURNCredentialsForbidden}`));return}if(g.status&&g.status===404){p(new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.MeetingEnded}`));return}c(yield g.json())}catch(g){p(g)}finally{delete this.cancelPromise}}));this.context.turnCredentials=new m.default,this.context.turnCredentials.password=r.password,this.context.turnCredentials.ttl=r.ttl,this.context.turnCredentials.uris=r.uris.map(c=>this.context.meetingSessionConfiguration.urls.urlRewriter(c)).filter(c=>!!c),this.context.turnCredentials.username=r.username})}constructor(n){super(n.logger),this.context=n,this.taskName="ReceiveTURNCredentialsTask",this.url=n.meetingSessionConfiguration.urls.turnControlURL,this.meetingId=n.meetingSessionConfiguration.meetingId,this.joinToken=n.meetingSessionConfiguration.credentials.joinToken}},"ReceiveTURNCredentialsTask");l.default=e},uQnq:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class VS{clone(){const u=new VS;return u.tileId=this.tileId,u.localTile=this.localTile,u.isContent=this.isContent,u.active=this.active,u.paused=this.paused,u.poorConnection=this.poorConnection,u.boundAttendeeId=this.boundAttendeeId,u.boundExternalUserId=this.boundExternalUserId,u.boundVideoStream=this.boundVideoStream,u.boundVideoElement=this.boundVideoElement,u.nameplate=this.nameplate,u.videoStreamContentWidth=this.videoStreamContentWidth,u.videoStreamContentHeight=this.videoStreamContentHeight,u.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,u.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,u.devicePixelRatio=this.devicePixelRatio,u.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,u.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,u.streamId=this.streamId,u}constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}},"VideoTileState");l.default=S},uTAD:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("MpTp"));let u=o(class US{reset(){this.optimalReceiveSet=new h.default,this.subscribedReceiveSet=new h.default,this.videoSources=void 0}updateIndex(a){this.videoIndex=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(a)}updateMetrics(a){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}chooseRemoteVideoSources(a){this.videoSources=a,this.optimalReceiveSet=this.calculateOptimalReceiveSet(this.videoIndex).clone()}calculateOptimalReceiveSet(a){const s=new h.default;if(!this.videoIndex||this.videoIndex.allStreams().empty())return s;const i=a.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId),e=this.videoSources?this.videoSources:this.videoIndex.allVideoSendingSourcesExcludingSelf(this.selfAttendeeId),t=this.videoIndex.remoteStreamDescriptions(),n=new Map;for(const c of t)i.contain(c.streamId)&&n.set(c.attendeeId,c);let r=0;for(const c of e){const p=c.attendee.attendeeId;if(n.has(p)){const g=n.get(p);if(r+g.maxBitrateKbps<=US.maxReceiveBitrateKbps)s.add(g.streamId),r+=g.maxBitrateKbps;else{console.warn("total bitrate "+(r+g.maxBitrateKbps)+" exceeds maximum limit (15000). Use chooseRemoteVideoSources to select a subset of participants to avoid this.");break}}}return s}constructor(a){this.selfAttendeeId=a,this.reset()}},"AllHighestVideoBandwidthPolicy");l.default=u,u.maxReceiveBitrateKbps=15e3},uaNU:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("Lspx")),u=S(f("NBIk"));let m=o(class kd{partialCompare(s){return this.priority-s.priority}equals(s){return this.attendeeId===s.attendeeId&&this.targetSize===s.targetSize&&this.priority===s.priority&&this.degradationPreference===s.degradationPreference}clone(){return new kd(this.attendeeId,this.priority,this.targetSize,this.degradationPreference)}targetSizeToBitrateKbps(s){switch(s){case h.default.Maximum:return kd.MAXIMUM_BITRATE_KBPS;case h.default.High:return kd.HIGH_BITRATE_KBPS;case h.default.Medium:return kd.MID_BITRATE_KBPS;case h.default.Low:return kd.LOW_BITRATE_KBPS}}constructor(s,i,e,t){this.attendeeId=s,this.priority=i,this.targetSize=e!==void 0?e:h.default.Maximum,this.degradationPreference=t!==void 0?t:u.default.Balanced}},"VideoPreference");l.default=m,m.LOW_BITRATE_KBPS=300,m.MID_BITRATE_KBPS=600,m.HIGH_BITRATE_KBPS=1500,m.MAXIMUM_BITRATE_KBPS=1e4},uctb:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.LogLevel=void 0;var S;(function(h){h[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF"})(S=l.LogLevel||(l.LogLevel={})),l.default=S},ukPp:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{create(){const u={clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,paused:!0,pause:()=>{u.paused=!0},play:()=>(u.paused=!1,Promise.resolve())};return u}},"NoOpVideoElementFactory");l.default=S},v4l7:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=l.numToUint8=l.isEmptyData=l.convertToBuffer=void 0;var S=f("AI3F");Object.defineProperty(l,"convertToBuffer",{enumerable:!0,get:function(){return S.convertToBuffer}});var h=f("N7sO");Object.defineProperty(l,"isEmptyData",{enumerable:!0,get:function(){return h.isEmptyData}});var u=f("sd34");Object.defineProperty(l,"numToUint8",{enumerable:!0,get:function(){return u.numToUint8}});var m=f("eeAN");Object.defineProperty(l,"uint32ArrayFrom",{enumerable:!0,get:function(){return m.uint32ArrayFrom}})},v5L4:function(j,l,f){"use strict";f.d(l,"a",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={InvalidAccess:"invalid_access",EmptyQueryNotSupported:"empty_query_not_supported",InvalidSobjectApiName:"invalid_sobject_api_name",QueryTooShort:"query_too_short",AccessTokenExchangeFailed:"access_token_exchange_failed",TokenNotFound:"token_not_found",SalesforceOrgIdRequired:"salesforce_org_id_required"},t=Object(a.a)("sfdc.searchObjects generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"sfdc.searchObjects",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to sfdc.searchObjects
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetchersfdcSearchObjectsFetcher",description:"sfdc.searchObjects generated fetcher"}},"v6w+":function(j,l){function f(S,h){if(S==null)return{};var u={},m=Object.keys(S),a,s;for(s=0;s<m.length;s++)a=m[s],!(h.indexOf(a)>=0)&&(u[a]=S[a]);return u}o(f,"_objectWithoutPropertiesLoose"),j.exports=f,j.exports.__esModule=!0,j.exports.default=j.exports},v8aG:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class HS{equal(u){return this.remoteVideoAvailable===u.remoteVideoAvailable&&this.canStartLocalVideo===u.canStartLocalVideo}clone(){const u=new HS;return u.remoteVideoAvailable=this.remoteVideoAvailable,u.canStartLocalVideo=this.canStartLocalVideo,u}constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}},"MeetingSessionVideoAvailability");l.default=S},v9PG:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("dWQL"));let u=o(class zS{clone(){return new zS(this.videoMaxResolution,this.contentMaxResolution)}constructor(a=h.default.VideoResolutionHD,s=h.default.VideoResolutionFHD){this.videoMaxResolution=a,this.contentMaxResolution=s}},"MeetingFeatures");l.default=u},vapa:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.RawSha256=void 0;var S=f("9IN5"),h=function(){function u(){this.state=Int32Array.from(S.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return o(u,"RawSha2561"),u.prototype.update=function(m){if(this.finished)throw new Error("Attempted to update an already finished hash.");var a=0,s=m.byteLength;if(this.bytesHashed+=s,this.bytesHashed*8>S.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;s>0;)this.buffer[this.bufferLength++]=m[a++],s--,this.bufferLength===S.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},u.prototype.digest=function(){if(!this.finished){var m=this.bytesHashed*8,a=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),s=this.bufferLength;if(a.setUint8(this.bufferLength++,128),s%S.BLOCK_SIZE>=S.BLOCK_SIZE-8){for(var i=this.bufferLength;i<S.BLOCK_SIZE;i++)a.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<S.BLOCK_SIZE-8;i++)a.setUint8(i,0);a.setUint32(S.BLOCK_SIZE-8,Math.floor(m/4294967296),!0),a.setUint32(S.BLOCK_SIZE-4,m),this.hashBuffer(),this.finished=!0}for(var e=new Uint8Array(S.DIGEST_LENGTH),i=0;i<8;i++)e[i*4]=this.state[i]>>>24&255,e[i*4+1]=this.state[i]>>>16&255,e[i*4+2]=this.state[i]>>>8&255,e[i*4+3]=this.state[i]>>>0&255;return e},u.prototype.hashBuffer=function(){for(var m=this,a=m.buffer,s=m.state,i=s[0],e=s[1],t=s[2],n=s[3],r=s[4],c=s[5],p=s[6],g=s[7],d=0;d<S.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(a[d*4]&255)<<24|(a[d*4+1]&255)<<16|(a[d*4+2]&255)<<8|a[d*4+3]&255;else{var y=this.temp[d-2],E=(y>>>17|y<<15)^(y>>>19|y<<13)^y>>>10;y=this.temp[d-15];var w=(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3;this.temp[d]=(E+this.temp[d-7]|0)+(w+this.temp[d-16]|0)}var k=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&c^~r&p)|0)+(g+(S.KEY[d]+this.temp[d]|0)|0)|0,V=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&e^i&t^e&t)|0;g=p,p=c,c=r,r=n+k|0,n=t,t=e,e=i,i=k+V|0}s[0]+=i,s[1]+=e,s[2]+=t,s[3]+=n,s[4]+=r,s[5]+=c,s[6]+=p,s[7]+=g},u}();l.RawSha256=h},vdHl:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.MAX_HASHABLE_LENGTH=l.INIT=l.KEY=l.DIGEST_LENGTH=l.BLOCK_SIZE=void 0,l.BLOCK_SIZE=64,l.DIGEST_LENGTH=32,l.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},vhAZ:function(j,l,f){"use strict";j.exports=h;var S=f("j4TH");(h.prototype=Object.create(S.EventEmitter.prototype)).constructor=h;function h(u,m,a){if(typeof u!="function")throw TypeError("rpcImpl must be a function");S.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=Boolean(m),this.responseDelimited=Boolean(a)}o(h,"Service"),h.prototype.rpcCall=o(function u(m,a,s,i,e){if(!i)throw TypeError("request must be specified");var t=this;if(!e)return S.asPromise(u,t,m,a,s,i);if(!t.rpcImpl){setTimeout(function(){e(Error("already ended"))},0);return}try{return t.rpcImpl(m,a[t.requestDelimited?"encodeDelimited":"encode"](i).finish(),o(function(r,c){if(r)return t.emit("error",r,m),e(r);if(c===null){t.end(!0);return}if(!(c instanceof s))try{c=s[t.responseDelimited?"decodeDelimited":"decode"](c)}catch(p){return t.emit("error",p,m),e(p)}return t.emit("data",c,m),e(null,c)},"rpcCallback"))}catch(n){t.emit("error",n,m),setTimeout(function(){e(n)},0);return}},"rpcCall"),h.prototype.end=o(function(m){return this.rpcImpl&&(m||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},"end")},vhVE:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}},"RealtimeVolumeIndicator");l.default=S},viNG:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebCryptoSha256=l.Ie11Sha256=void 0;var S=f("D3pN");S.__exportStar(f("ZIxo"),l);var h=f("dFEU");Object.defineProperty(l,"Ie11Sha256",{enumerable:!0,get:function(){return h.Sha256}});var u=f("b4Ml");Object.defineProperty(l,"WebCryptoSha256",{enumerable:!0,get:function(){return u.Sha256}})},vjEy:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.BlurStrengthMapper=void 0;const S={LOW:7,MEDIUM:15,HIGH:30};let h=o(class{static getBlurAmount(m,a){if(m<=0)throw new Error(`invalid value for blur strength: ${m}`);return Math.round(m*a.height/this.BLUR_STRENGTH_DIVISOR)}},"BlurStrengthMapper");l.BlurStrengthMapper=h,h.BLUR_STRENGTH_DIVISOR=540,l.default=S},vvx0:function(j,l,f){"use strict";f.d(l,"a",function(){return e}),f.d(l,"b",function(){return n});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={Unknown:"unknown",UserCannotCreateChannel:"user_cannot_create_channel",IsPendingConnectedToOrg:"is_pending_connected_to_org",HasAlreadyConnectedToOrg:"has_already_connected_to_org",EmailDoesNotMatch:"email_does_not_match",InviteFromSameOrg:"invite_from_same_org",UserIsRestricted:"user_is_restricted",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",GridWorkspaceRequired:"grid_workspace_required",RestrictedAction:"restricted_action",ConnectionLimitExceeded:"connection_limit_exceeded",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot",NotPaid:"not_paid",UpgradeRequiredButUserCannot:"upgrade_required_but_user_cannot",InvalidRecipientTeam:"invalid_recipient_team"},t={InvalidArguments:"invalid_arguments",InviteNotFound:"invite_not_found",TeamNotFound:"team_not_found",UserNotFound:"user_not_found"},n=Object(a.a)("conversations.sharedInviteAcceptanceEligibility generated fetcher",function(){var r=Object(S.coroutine)(function*(c,p,g){try{const d=["reason"],y=Object(u.a)(g,d),E=Object(i.b)(y);return yield c(Object(m.apiCall)({method:"conversations.sharedInviteAcceptanceEligibility",args:E,reason:g.reason}))}catch(d){throw Object(s.a)({getState:p}).error(`API call to conversations.sharedInviteAcceptanceEligibility
				with reason ${g.reason} failed, initiated by generated fetcher`),d}});return function(c,p,g){return r.apply(this,arguments)}}());n.meta={name:"createFetcher",key:"createFetcherconversationsSharedInviteAcceptanceEligibilityFetcher",description:"conversations.sharedInviteAcceptanceEligibility generated fetcher"}},"w1x/":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.TargetDisplaySize=void 0;var S;(function(h){h[h.Low=0]="Low",h[h.Medium=1]="Medium",h[h.High=2]="High",h[h.Maximum=3]="Maximum"})(S=l.TargetDisplaySize||(l.TargetDisplaySize={})),l.default=S},wDi9:function(j,l,f){"use strict";j.exports=t;var S=f("j4TH"),h,u=S.LongBits,m=S.base64,a=S.utf8;function s(E,w,k){this.fn=E,this.len=w,this.next=void 0,this.val=k}o(s,"Op");function i(){}o(i,"noop");function e(E){this.head=E.head,this.tail=E.tail,this.len=E.len,this.next=E.states}o(e,"State");function t(){this.len=0,this.head=new s(i,0,0),this.tail=this.head,this.states=null}o(t,"Writer");var n=o(function(){return S.Buffer?o(function(){return(t.create=o(function(){return new h},"create_buffer"))()},"create_buffer_setup"):o(function(){return new t},"create_array")},"create");t.create=n(),t.alloc=o(function(w){return new S.Array(w)},"alloc"),S.Array!==Array&&(t.alloc=S.pool(t.alloc,S.Array.prototype.subarray)),t.prototype._push=o(function(w,k,V){return this.tail=this.tail.next=new s(w,k,V),this.len+=k,this},"push");function r(E,w,k){w[k]=E&255}o(r,"writeByte");function c(E,w,k){for(;E>127;)w[k++]=E&127|128,E>>>=7;w[k]=E}o(c,"writeVarint32");function p(E,w){this.len=E,this.next=void 0,this.val=w}o(p,"VarintOp"),p.prototype=Object.create(s.prototype),p.prototype.fn=c,t.prototype.uint32=o(function(w){return this.len+=(this.tail=this.tail.next=new p((w=w>>>0)<128?1:w<16384?2:w<2097152?3:w<268435456?4:5,w)).len,this},"write_uint32"),t.prototype.int32=o(function(w){return w<0?this._push(g,10,u.fromNumber(w)):this.uint32(w)},"write_int32"),t.prototype.sint32=o(function(w){return this.uint32((w<<1^w>>31)>>>0)},"write_sint32");function g(E,w,k){for(;E.hi;)w[k++]=E.lo&127|128,E.lo=(E.lo>>>7|E.hi<<25)>>>0,E.hi>>>=7;for(;E.lo>127;)w[k++]=E.lo&127|128,E.lo=E.lo>>>7;w[k++]=E.lo}o(g,"writeVarint64"),t.prototype.uint64=o(function(w){var k=u.from(w);return this._push(g,k.length(),k)},"write_uint64"),t.prototype.int64=t.prototype.uint64,t.prototype.sint64=o(function(w){var k=u.from(w).zzEncode();return this._push(g,k.length(),k)},"write_sint64"),t.prototype.bool=o(function(w){return this._push(r,1,w?1:0)},"write_bool");function d(E,w,k){w[k]=E&255,w[k+1]=E>>>8&255,w[k+2]=E>>>16&255,w[k+3]=E>>>24}o(d,"writeFixed32"),t.prototype.fixed32=o(function(w){return this._push(d,4,w>>>0)},"write_fixed32"),t.prototype.sfixed32=t.prototype.fixed32,t.prototype.fixed64=o(function(w){var k=u.from(w);return this._push(d,4,k.lo)._push(d,4,k.hi)},"write_fixed64"),t.prototype.sfixed64=t.prototype.fixed64,t.prototype.float=o(function(w){return this._push(S.float.writeFloatLE,4,w)},"write_float"),t.prototype.double=o(function(w){return this._push(S.float.writeDoubleLE,8,w)},"write_double");var y=S.Array.prototype.set?o(function(w,k,V){k.set(w,V)},"writeBytes_set"):o(function(w,k,V){for(var F=0;F<w.length;++F)k[V+F]=w[F]},"writeBytes_for");t.prototype.bytes=o(function(w){var k=w.length>>>0;if(!k)return this._push(r,1,0);if(S.isString(w)){var V=t.alloc(k=m.length(w));m.decode(w,V,0),w=V}return this.uint32(k)._push(y,k,w)},"write_bytes"),t.prototype.string=o(function(w){var k=a.length(w);return k?this.uint32(k)._push(a.write,k,w):this._push(r,1,0)},"write_string"),t.prototype.fork=o(function(){return this.states=new e(this),this.head=this.tail=new s(i,0,0),this.len=0,this},"fork"),t.prototype.reset=o(function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(i,0,0),this.len=0),this},"reset"),t.prototype.ldelim=o(function(){var w=this.head,k=this.tail,V=this.len;return this.reset().uint32(V),V&&(this.tail.next=w.next,this.tail=k,this.len+=V),this},"ldelim"),t.prototype.finish=o(function(){for(var w=this.head.next,k=this.constructor.alloc(this.len),V=0;w;)w.fn(w.val,k,V),V+=w.len,w=w.next;return k},"finish"),t._configure=function(E){h=E,t.create=n(),h._configure()}},wJ81:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("KJDN"));let u=o(class extends h.default{constructor(a,s){super(a),this.constraint=s,this.name="OverconstrainedError"}},"OverconstrainedError");l.default=u},wQGL:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("VYs+"));let m=o(class Zc extends u.default{setEncodingParameters(s){return S(this,void 0,void 0,function*(){if(!this._localCameraTransceiver||this._localCameraTransceiver.direction!=="sendrecv")return;const i=this._localCameraTransceiver.sender,e=Array.from(s.values());if(e.length<=0)return;const t=i.getParameters();if(!t.encodings)t.encodings=e;else for(let n=0;n<t.encodings.length;n++)t.encodings[n].rid===u.default.LOW_LEVEL_NAME&&this.copyEncodingParams(s.get(u.default.LOW_LEVEL_NAME),t.encodings[n]),t.encodings[n].rid===u.default.HIGH_LEVEL_NAME&&this.copyEncodingParams(s.get(u.default.HIGH_LEVEL_NAME),t.encodings[n]);yield i.setParameters(t),this.logVideoTransceiverParameters()})}constructor(s,i,e){super(s,i,e);let t=2;this.videoQualityControlParameterMap=new Map;for(let n=0;n<Zc.NAME_ARR_ASCENDING.length;n++){const r=Zc.NAME_ARR_ASCENDING[n];this.videoQualityControlParameterMap.set(r,{rid:r,scaleResolutionDownBy:t,maxBitrate:Zc.BITRATE_ARR_ASCENDING[n]*1e3}),t=t/2}}},"SimulcastContentShareTransceiverController");l.default=m,m.NAME_ARR_ASCENDING=["low","hi"],m.BITRATE_ARR_ASCENDING=[300,1200]},"wR/T":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10,this.sendingAudioFailureSamplesToConsider=2,this.sendingAudioFailureInitialWaitTimeMs=3e3}},"ConnectionHealthPolicyConfiguration");l.default=S},wSXL:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{generateSessionId(){const u=new Uint32Array(1);return window.crypto.getRandomValues(u)[0].toString()}constructor(u,m,a,s){this.userArn=u,this.messagingSessionId=m,this.endpointUrl=a,this.chimeClient=s,this.reconnectTimeoutMs=10*1e3,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1*1e3,this.reconnectLongBackoffMs=5*1e3,this.prefetchOn=void 0,this.prefetchSortBy=void 0,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}},"MessagingSessionConfiguration");l.default=S},wXa7:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("JsnC")),u=S(f("2wCG")),m=S(f("CAce"));let a=o(class Qt{clone(){return new Qt(this.sdp)}static isRTPCandidate(i){const e=/candidate[:](\S+) (\d+)/g.exec(i);return!(e===null||e[2]!=="1")}static linesToSDP(i){return new Qt(i.join(Qt.CRLF))}static candidateTypeFromString(i){switch(i){case h.default.Host:return h.default.Host;case h.default.ServerReflexive:return h.default.ServerReflexive;case h.default.PeerReflexive:return h.default.PeerReflexive;case h.default.Relay:return h.default.Relay}return null}static candidateType(i){const e=/a[=]candidate[:].* typ ([a-z]+) /g.exec(i);return e===null?null:Qt.candidateTypeFromString(e[1])}static mediaType(i){const e=/m=(audio|video)/g.exec(i);if(e!==null)return e[1]}static mid(i){if(i.includes("a=mid:"))return i.replace(/^(a=mid:)/,"")}static direction(i){const e=/a=(sendrecv|sendonly|recvonly|inactive)/g.exec(i);if(e!==null)return e[1]}static splitLines(i){return i.trim().split(`
`).map(e=>e.trim())}static splitSections(i){return i.split(`
m=`).map((t,n)=>(n>0?"m="+t:t).trim()+Qt.CRLF)}static findActiveCameraSection(i){let e=0,t=!1;for(const n of i){if(/^m=video/.test(n)&&(n.indexOf("sendrecv")>-1||n.indexOf("sendonly")===-1&&n.indexOf("recvonly")===-1&&n.indexOf("inactive")===-1)){t=!0;break}e++}return t===!1&&(e=-1),e}static extractSSRCsFromFIDGroupLine(i){return/^a=ssrc-group:FID\s(.+)/.exec(i)[1]}static matchPrefix(i,e){return Qt.splitLines(i).filter(t=>t.indexOf(e)===0)}lines(){return this.sdp.split(Qt.CRLF)}hasVideo(){return/^m=video/gm.exec(this.sdp)!==null}hasCandidates(){return/a[=]candidate[:]/g.exec(this.sdp)!==null}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withoutCandidateType(i){return Qt.linesToSDP(this.lines().filter(e=>Qt.candidateType(e)!==i))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(h.default.ServerReflexive)}withAudioMaxAverageBitrate(i){if(!i)return this.clone();i=Math.trunc(Math.min(Math.max(i,Qt.rfc7587LowestBitrate),Qt.rfc7587HighestBitrate));const e=this.lines(),t=Qt.findOpusFmtpAttributes(e),n=Qt.updateOpusFmtpAttributes(e,t,[`maxaveragebitrate=${i}`]);return Qt.linesToSDP(n)}withStereoAudio(){const i=this.lines(),e=Qt.findOpusFmtpAttributes(i),t=Qt.updateOpusFmtpAttributes(i,e,["stereo=1","sprop-stereo=1"]);return Qt.linesToSDP(t)}static findOpusFmtpAttributes(i){const e=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let t=!1;const n=[];for(const r of i)if(r.startsWith("m=audio")&&(n.push(null),t=!0),r.startsWith("m=video")&&(t=!1),t){const c=e.exec(r);c!==null&&(n[n.length-1]=`a=fmtp:${c[1]} `)}return n}static updateOpusFmtpAttributes(i,e,t){const n=[];let r=0,c=null;for(const p of i)if(p.startsWith("m=audio")&&(c=e[r],r++),p.startsWith("m=video")&&(c=null),c&&p.startsWith(c)){const g=p.slice(c.length).split(";"),d=[];for(const y of g)t.findIndex(w=>w.startsWith(y.split("=")[0]))<0&&d.push(y);for(const y of t)d.push(y);n.push(c+d.join(";"))}else n.push(p);return n}withUnifiedPlanFormat(){let i=this.sdp;return i.includes("mozilla")?this.clone():(i=i.replace("o=-","o=mozilla-chrome"),new Qt(i))}getUniqueRtpHeaderExtensionId(i){const e=[];for(const n of i)if(/^a=extmap:/.test(n.trim())){const c=+n.split("a=extmap:")[1].split(" ")[0];e.includes(c)||e.push(c)}e.sort((n,r)=>n-r);let t=0;for(const n of e){if(n-t>1)return t+1;t=n}return t===14?-1:t+1}withVideoLayersAllocationRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,Qt.videoLayersAllocationRtpHeaderExtensionUrl)}withDependencyDescriptorRtpHeaderExtension(i){return this.withRtpHeaderExtension(i,Qt.dependencyDescriptorRtpHeaderExtensionUrl)}withoutDependencyDescriptorRtpHeaderExtension(){const i=Qt.splitLines(this.sdp).filter(e=>!e.includes(Qt.dependencyDescriptorRtpHeaderExtensionUrl));return new Qt(i.join(Qt.CRLF)+Qt.CRLF)}withRtpHeaderExtension(i,e){const t=i?i.getRtpHeaderExtensionId(e):-1,n=t===-1?this.getUniqueRtpHeaderExtensionId(Qt.splitLines(this.sdp)):t,r=Qt.splitSections(this.sdp),c=[];for(let g of r){if(/^m=video/.test(g)&&Qt.getRtpHeaderExtensionIdInSection(g,e)===-1){const d=Qt.splitLines(g),y=[];if(n===-1||this.hasRtpHeaderExtensionId(n)){c.push(g);continue}for(const E of d)if(y.push(E),/^a=sendrecv/.test(E.trim())){const w="a=extmap:"+n+" "+e;y.push(w)}g=y.join(Qt.CRLF)+Qt.CRLF}else if(t!==-1&&/^m=video/.test(g)&&Qt.getRtpHeaderExtensionIdInSection(g,e)!==t){const d=Qt.splitLines(g),y=[];for(const E of d){if(/^a=extmap:/.test(E.trim())&&E.split("a=extmap:")[1].split(" ")[1]===e){if(!this.hasRtpHeaderExtensionId(t)){const k="a=extmap:"+t+" "+e;y.push(k)}continue}y.push(E)}g=y.join(Qt.CRLF)+Qt.CRLF}c.push(g)}const p=c.join("");return new Qt(p)}ssrcForVideoSendingSection(){const i=this.sdp,e=Qt.splitSections(i);if(e.length<2)return"";const t=Qt.findActiveCameraSection(e);if(t===-1)return"";const n=Qt.matchPrefix(e[t],"a=ssrc-group:FID ");if(n.length<1)return"";const r=Qt.extractSSRCsFromFIDGroupLine(n[0]),[c]=r.split(" ").map(p=>parseInt(p,10));return c.toString()}videoSendSectionHasDifferentSSRC(i){const e=this.ssrcForVideoSendingSection(),t=i.ssrcForVideoSendingSection();if(e===""||t==="")return!1;const n=parseInt(e,10),r=parseInt(t,10);return n!==r}removeH264SupportFromSendSection(){const i=this.sdp,e=Qt.splitSections(i),t=Qt.findActiveCameraSection(e);if(t===-1)return new Qt(this.sdp);const n=e[t],r=Qt.splitLines(n),c=[],p=new Map;r.forEach(E=>{if(/^a=rtpmap:/.test(E)){const w=/^a=rtpmap:([0-9]+)\s/.exec(E);w&&E.toLowerCase().includes("h264")&&c.push(parseInt(w[1],10))}if(/^a=fmtp:/.test(E)){const w=/^a=fmtp:([0-9]+) apt=([0-9]+)/.exec(E);if(w&&w.length===3){const k=parseInt(w[1],10),V=parseInt(w[2],10);p.has(V)?p.get(V).push(k):p.set(V,[k])}}});const g=new Set;for(const E of c){g.add(E);const w=p.get(E);if(w)for(const k of w)g.add(k)}if(c.length>0){const E=r[0].split(" ");r[0]=E.filter(w=>!g.has(parseInt(w))).join(" ")}const d=r.filter(E=>{if(!E.includes("rtpmap")&&!E.includes("rtcp-fb")&&!E.includes("fmtp"))return!0;for(const w of g)if(E.includes(w.toString()))return!1;return!0});e[t]=d.join(Qt.CRLF)+Qt.CRLF;const y=e.join("");return new Qt(y)}mediaSections(){const i=Qt.splitSections(this.sdp);if(i.length<2)return[];const e=[];for(let t=1;t<i.length;t++){const n=new u.default,r=Qt.splitLines(i[t]);for(const c of r){const p=Qt.mediaType(c);if(p!==void 0){n.mediaType=p;continue}const g=Qt.direction(c);if(g!==void 0){n.direction=g;continue}const d=Qt.mid(c);if(d!==void 0){n.mid=d;continue}}e.push(n)}return e}static getRtpHeaderExtensionIdInSection(i,e){const t=Qt.splitLines(i);for(const n of t)if(/^a=extmap:/.test(n.trim())){const r=n.split("a=extmap:")[1].split(" "),c=+r[0];if(r[1]===e)return c}return-1}getRtpHeaderExtensionId(i){const e=Qt.splitSections(this.sdp);for(const t of e)if(/^m=video/.test(t)){const n=Qt.getRtpHeaderExtensionIdInSection(t,i);if(n!==-1)return n}return-1}hasRtpHeaderExtensionId(i){const e=Qt.splitLines(this.sdp);for(const t of e)if(/^a=extmap:/.test(t.trim())&&+t.split("a=extmap:")[1].split(" ")[0]===i)return!0;return!1}withVideoSendCodecPreferences(i){const e=this.sdp,t=Qt.splitSections(e),n=Qt.findActiveCameraSection(t);if(n===-1)return new Qt(this.sdp);t[n]=this.sectionWithCodecPreferences(t[n],i);const r=t.join("");return new Qt(r)}sectionWithCodecPreferences(i,e){const t=new Map,n=Qt.splitLines(i);n.forEach(g=>{if(/^a=rtpmap:/.test(g))for(const d of e){if(!g.includes(`${d.codecName}/${d.codecCapability.clockRate}`))continue;const y=/^a=rtpmap:([0-9]+)\s/.exec(g);let E=!1;if(d.codecCapability.sdpFmtpLine!==void 0){let w=!1;for(const k of n){if(k.startsWith(`a=fmtp:${y[1]} ${d.codecCapability.sdpFmtpLine}`)){E=!0;break}k.startsWith(`a=fmtp:${y[1]} profile-id=`)&&(w=!0)}d.equals(m.default.vp9Profile0())&&!w&&(E=!0)}else E=!0;if(E){t.set(d.codecName,y[1]);break}}});const r=new Set(t.values()),c=n[0].split(" ").filter(g=>!r.has(g)),p=Array.from(t.values()).sort((g,d)=>{const y=e.findIndex(w=>t.get(w.codecName)===g),E=e.findIndex(w=>t.get(w.codecName)===d);return y-E});return c.splice(3,0,...p.values()),n[0]=c.join(" "),n.join(Qt.CRLF)+Qt.CRLF}highestPriorityVideoSendCodec(){const i=this.sdp,e=Qt.splitSections(i),t=Qt.findActiveCameraSection(e);if(t===-1)return;const n=Qt.splitLines(e[t]),r=n[0].split(" ");if(r.length<4)return;const c=r[3];let p,g,d;for(const y of n){const E=/^a=rtpmap:([0-9]+)\s/.exec(y);if(E===null||E.length<2||E[1]!==c)continue;const k=y.split(" ")[1].split("/");if(!(k===void 0||k.length<2)){p=k[0],g=k[1];for(const V of n)if(V.startsWith(`a=fmtp:${c}`)){const F=V.split(" ");if(F===void 0||F.length<2)return;d=F[1];continue}break}}if(p!==void 0)return new m.default(p,{clockRate:parseInt(g),mimeType:`video/${p}`,sdpFmtpLine:d})}getAudioPayloadTypes(){const i=new Map,e=this.sdp,t=Qt.splitSections(e);return i.set("opus",Qt.findAudioPayloadType("opus",t)),i.set("red",Qt.findAudioPayloadType("red",t)),i}static findAudioPayloadType(i,e){const t=`a=rtpmap:\\s*(\\d+)\\s+${i}\\/48000`,n=new RegExp(t);for(const r of e)if(/^m=audio/.test(r)){const c=n.exec(r);if(c!==null)return Number(c[1])}return 0}withStartingVideoSendBitrate(i){const e=Qt.splitSections(this.sdp),t=Qt.findActiveCameraSection(e);if(t===-1)return this;const n=Qt.splitLines(e[t]),r=[];for(const p of n)if(/^a=fmtp:\d*/.test(p)){const g=p+`;x-google-start-bitrate=${i*1e3}`;r.push(g)}else r.push(p);e[t]=r.join(Qt.CRLF)+Qt.CRLF;const c=e.join("");return new Qt(c)}constructor(i){this.sdp=i}},"SDP");l.default=a,a.CRLF=`\r
`,a.rfc7587LowestBitrate=6e3,a.rfc7587HighestBitrate=51e4,a.dependencyDescriptorRtpHeaderExtensionUrl="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension",a.videoLayersAllocationRtpHeaderExtensionUrl="http://www.webrtc.org/experiments/rtp-hdrext/video-layers-allocation00"},wcin:function(j,l){(function(){var f=["user-blocking","user-visible","background"];class S{constructor(){this.channel_=new MessageChannel,this.sendPort_=this.channel_.port2,this.messages_={},this.nextMessageHandle_=1,this.channel_.port1.onmessage=t=>this.onMessageReceived_(t)}queueCallback(t){var n=this.nextMessageHandle_++;return this.messages_[n]=t,this.sendPort_.postMessage(n),n}cancelCallback(t){delete this.messages_[t]}onMessageReceived_(t){var n=t.data;if(n in this.messages_){var r=this.messages_[n];delete this.messages_[n],r()}}}o(S,"t");function h(){return h.instance_||(h.instance_=new S),h.instance_}o(h,"i");class u{constructor(t,n,r){r===void 0&&(r=0),this.callback_=t,this.callbackType_=null,this.handle_=null,this.canceled_=!1,this.schedule_(n,r)}isIdleCallback(){return this.callbackType_===0}isMessageChannelCallback(){return this.callbackType_===2}cancel(){if(!this.canceled_)switch(this.canceled_=!0,this.callbackType_){case 0:cancelIdleCallback(this.handle_);break;case 1:clearTimeout(this.handle_);break;case 2:h().cancelCallback(this.handle_);break;default:throw new TypeError("Unknown CallbackType")}}schedule_(t,n){if(n&&n>0)return this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()},n));if(!f.includes(t))throw new TypeError("Invalid task priority : "+t);return t==="background"&&typeof requestIdleCallback=="function"?(this.callbackType_=0,void(this.handle_=requestIdleCallback(()=>{this.runCallback_()}))):typeof MessageChannel=="function"?(this.callbackType_=2,void(this.handle_=h().queueCallback(()=>{this.runCallback_()}))):(this.callbackType_=1,void(this.handle_=setTimeout(()=>{this.runCallback_()})))}runCallback_(){this.canceled_||this.callback_()}}o(u,"s");var m=0;class a{constructor(){this.head_=null,this.tail_=null}isEmpty(){return this.head_==null}push(t){if(typeof t!="object")throw new TypeError("Task must be an Object");t.tq_sequence_=m++,this.isEmpty()?(t.tq_prev_=null,this.head_=t):(t.tq_prev_=this.tail_,this.tail_.tq_next_=t),t.tq_next_=null,this.tail_=t}takeNextTask(){if(this.isEmpty())return null;var t=this.head_;return this.remove_(t),t}merge(t,n){if(typeof n!="function")throw new TypeError("Must provide a selector function.");if(t==null)throw new Error("sourceQueue cannot be null");for(var r=this.head_,c=null,p=t.head_;p;){var g=p;if(p=p.tq_next_,n(g)){for(t.remove_(g);r&&r.tq_sequence_<g.tq_sequence_;)c=r,r=r.tq_next_;this.insert_(g,c),c=g}}}toArray(){for(var t=this.head_,n=[];t!==null;)n.push(t),t=t.tq_next_;return n}insert_(t,n){if(n!=this.tail_){var r=n?n.tq_next_:this.head_;t.tq_next_=r,r.tq_prev_=t,t.tq_prev_=n,n!=null?n.tq_next_=t:this.head_=t}else this.push(t)}remove_(t){if(t==null)throw new Error("Expected task to be non-null");t===this.head_&&(this.head_=t.tq_next_),t===this.tail_&&(this.tail_=this.tail_.tq_prev_),t.tq_next_&&(t.tq_next_.tq_prev_=t.tq_prev_),t.tq_prev_&&(t.tq_prev_.tq_next_=t.tq_next_)}}o(a,"a");class s extends Event{constructor(t,n){if(!n||!f.includes(n.previousPriority))throw new TypeError("Invalid task priority: '"+n.previousPriority+"'");super(t),this.previousPriority=n.previousPriority}}o(s,"n");class i extends AbortController{constructor(t){if(t===void 0&&(t={}),super(),t==null&&(t={}),typeof t!="object")throw new TypeError("'init' is not an object");var n,r,c=t.priority===void 0?"user-visible":t.priority;if(!f.includes(c))throw new TypeError("Invalid task priority: '"+c+"'");this.priority_=c,this.isPriorityChanging_=!1,r=(n=this).signal,Object.defineProperties(r,{priority:{get:function(){return n.priority_},enumerable:!0},onprioritychange:{value:null,writable:!0,enumerable:!0}}),r.addEventListener("prioritychange",p=>{r.onprioritychange&&r.onprioritychange(p)})}setPriority(t){if(!f.includes(t))throw new TypeError("Invalid task priority: "+t);if(this.isPriorityChanging_)throw new DOMException("","NotAllowedError");if(this.signal.priority!==t){this.isPriorityChanging_=!0;var n=this.priority_;this.priority_=t;var r=new s("prioritychange",{previousPriority:n});this.signal.dispatchEvent(r),this.isPriorityChanging_=!1}}}o(i,"l"),self.scheduler===void 0&&(self.scheduler=new class{constructor(){this.queues_={},f.forEach(e=>{this.queues_[e]=new a}),this.pendingHostCallback_=null,this.signals_=new WeakMap}postTask(e,t){if((t=Object.assign({},t)).signal!==void 0){if(t.signal===null||!("aborted"in t.signal)||typeof t.signal.addEventListener!="function")return Promise.reject(new TypeError("'signal' is not a valid 'AbortSignal'"));if(t.signal&&t.signal.priority&&!f.includes(t.signal.priority))return Promise.reject(new TypeError("Invalid task priority: '"+t.signal.priority+"'"))}if(t.priority!==void 0&&(t.priority===null||!f.includes(t.priority)))return Promise.reject(new TypeError("Invalid task priority: '"+t.priority+"'"));if(t.delay===void 0&&(t.delay=0),t.delay=Number(t.delay),t.delay<0)return Promise.reject(new TypeError("'delay' must be a positive number."));var n={callback:e,options:t,resolve:null,reject:null,hostCallback:null,abortCallback:null,onTaskCompleted:function(){this.options.signal&&this.abortCallback&&(this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null)},onTaskAborted:function(){this.hostCallback&&(this.hostCallback.cancel(),this.hostCallback=null),this.options.signal.removeEventListener("abort",this.abortCallback),this.abortCallback=null,this.reject(this.options.signal.reason)},isAborted:function(){return this.options.signal&&this.options.signal.aborted}},r=new Promise((c,p)=>{n.resolve=c,n.reject=p});return this.schedule_(n),r}schedule_(e){var t=e.options.signal;if(t){if(t.aborted)return void e.reject(t.reason);e.abortCallback=()=>{e.onTaskAborted()},t.addEventListener("abort",e.abortCallback)}e.options.delay>0?e.hostCallback=new u(()=>{e.hostCallback=null,this.onTaskDelayExpired_(e)},null,e.options.delay):(this.pushTask_(e),this.scheduleHostCallbackIfNeeded_())}onTaskDelayExpired_(e){this.pushTask_(e),this.pendingHostCallback_&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.schedulerEntryCallback_()}onPriorityChange_(e){var t=this.signals_.get(e);if(t===void 0)throw new Error("Attempting to change priority on an unregistered signal");t!==e.priority&&(this.queues_[e.priority].merge(this.queues_[t],n=>n.options.signal===e),this.signals_.set(e,e.priority))}schedulerEntryCallback_(){this.pendingHostCallback_=null,this.runNextTask_(),this.scheduleHostCallbackIfNeeded_()}scheduleHostCallbackIfNeeded_(){var e=this.nextTaskPriority_();e!=null&&(e!=="background"&&this.pendingHostCallback_&&this.pendingHostCallback_.isIdleCallback()&&(this.pendingHostCallback_.cancel(),this.pendingHostCallback_=null),this.pendingHostCallback_||(this.pendingHostCallback_=new u(()=>{this.schedulerEntryCallback_()},e,0)))}pushTask_(e){var t;if(!f.includes(t=e.options.priority?e.options.priority:e.options.signal&&e.options.signal.priority?e.options.signal.priority:"user-visible"))throw new TypeError("Invalid task priority: "+t);if(e.options.signal&&e.options.signal.priority){var n=e.options.signal;this.signals_.has(n)||(n.addEventListener("prioritychange",()=>{this.onPriorityChange_(n)}),this.signals_.set(n,n.priority))}this.queues_[t].push(e)}runNextTask_(){var e=null;do{var t=this.nextTaskPriority_();if(t==null)return;e=this.queues_[t].takeNextTask()}while(e.isAborted());try{var n=e.callback();e.resolve(n)}catch(r){e.reject(r)}finally{e.onTaskCompleted()}}nextTaskPriority_(){for(var e=0;e<f.length;e++){var t=f[e];if(!this.queues_[t].isEmpty())return t}return null}},self.TaskController=i,self.TaskPriorityChangeEvent=s)})()},wiFD:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uint32ArrayFrom=void 0;function S(h){if(!Uint32Array.from){for(var u=new Uint32Array(h.length),m=0;m<h.length;)u[m]=h[m],m+=1;return u}return Uint32Array.from(h)}o(S,"uint32ArrayFrom"),l.uint32ArrayFrom=S},wjYw:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("HbHZ")),m=h(f("j+uH"));let a=o(class extends m.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return S(this,void 0,void 0,function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(i){throw i}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.resetConnectionSpecificState(),this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.videoUplinkBandwidthPolicy.setTransceiverController&&this.context.videoUplinkBandwidthPolicy.setTransceiverController(void 0),this.context.videoDownlinkBandwidthPolicy.bindToTileController&&this.context.videoDownlinkBandwidthPolicy.bindToTileController(void 0);const i=this.context.videoTileController.getLocalVideoTile();i&&i.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}})}receiveWebSocketClosedEvent(){return new Promise((i,e)=>{let t=o(class{cancel(){this.signalingClient.removeObserver(this),e(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(c){c.type===u.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),i())}constructor(c){this.signalingClient=c}},"Interceptor");const n=new t(this.context.signalingClient);this.taskCanceler=n,this.context.signalingClient.registerObserver(n)})}constructor(i){super(i.logger),this.context=i,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}},"CleanStoppedSessionTask");l.default=a},wkYg:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("KJDN"));let u=o(class extends h.default{constructor(a,s){super(a,s),this.name="PermissionDeniedError"}},"PermissionDeniedError");l.default=u},wpDl:function(j,l,f){"use strict";var S=f("Ju5/"),h=f("fshX"),u=f("SiRs"),m=f("efZk"),a=S.a.isFinite,s=Math.min;function i(e){var t=Math[e];return function(n,r){if(n=Object(u.a)(n),r=r==null?0:s(Object(h.a)(r),292),r&&a(n)){var c=(Object(m.a)(n)+"e").split("e"),p=t(c[0]+"e"+(+c[1]+r));return c=(Object(m.a)(p)+"e").split("e"),+(c[0]+"e"+(+c[1]-r))}return t(n)}}o(i,"createRound"),l.a=i},ws8j:function(j,l,f){"use strict";f.d(l,"a",function(){return e}),f.d(l,"b",function(){return t});var S=f("9oTK"),h=f.n(S),u=f("m8R6"),m=f("2XU3"),a=f("WCk1"),s=f("s4P+"),i=f("pjW8");const e={ChannelConversionInProgress:"channel_conversion_in_progress",ConnectionLimitExceeded:"connection_limit_exceeded",EmailDoesNotMatch:"email_does_not_match",FailedToStartTrial:"failed_to_start_trial",HasAlreadyConnectedToOrg:"has_already_connected_to_org",InvalidArguments:"invalid_arguments",InvalidEmojiNotAllowed:"invalid_emoji_not_allowed",InvalidHostTeam:"invalid_host_team",InvalidLink:"invalid_link",InvalidName:"invalid_name",InvalidNameMaxlength:"invalid_name_maxlength",InvalidNamePunctuation:"invalid_name_punctuation",InvalidNameRequired:"invalid_name_required",InvalidNameSpecials:"invalid_name_specials",InviteFromSameOrg:"invite_from_same_org",InviteNotFound:"invite_not_found",InvalidPrivacy:"invalid_privacy",InvalidRecipientTeam:"invalid_recipient_team",InvalidTargetTeam:"invalid_target_team",InviteUsed:"invite_used",IsPendingConnectedToOrg:"is_pending_connected_to_org",LegacyConnectionInvalidOrg:"legacy_connection_invalid_org",LegacyConnectionLimitExceeded:"legacy_connection_limit_exceeded",NameTaken:"name_taken",NotAllowedForGridWorkspace:"not_allowed_for_grid_workspace",NotPaid:"not_paid",RestrictedAction:"restricted_action",TeamNotFound:"team_not_found",UserCannotCreateChannel:"user_cannot_create_channel",UserIsRestricted:"user_is_restricted",UserNotFound:"user_not_found",UserRequiredToAcceptAsPrivateButCannot:"user_required_to_accept_as_private_but_cannot"},t=Object(a.a)("conversations.acceptSharedInvite generated fetcher",function(){var n=Object(S.coroutine)(function*(r,c,p){try{const g=["reason"],d=Object(u.a)(p,g),y=Object(i.b)(d);return yield r(Object(m.apiCall)({method:"conversations.acceptSharedInvite",args:y,reason:p.reason}))}catch(g){throw Object(s.a)({getState:c}).error(`API call to conversations.acceptSharedInvite
				with reason ${p.reason} failed, initiated by generated fetcher`),g}});return function(r,c,p){return n.apply(this,arguments)}}());t.meta={name:"createFetcher",key:"createFetcherconversationsAcceptSharedInviteFetcher",description:"conversations.acceptSharedInvite generated fetcher"}},x8On:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.ClientMetricReportMediaType=void 0;var S;(function(h){h[h.AUDIO=0]="AUDIO",h[h.VIDEO=1]="VIDEO"})(S=l.ClientMetricReportMediaType||(l.ClientMetricReportMediaType={})),l.default=S},xGEd:function(j,l,f){"use strict";j.exports=h;var S=f("kU+7");function h(s,i){this.lo=s>>>0,this.hi=i>>>0}o(h,"LongBits");var u=h.zero=new h(0,0);u.toNumber=function(){return 0},u.zzEncode=u.zzDecode=function(){return this},u.length=function(){return 1};var m=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=o(function(i){if(i===0)return u;var e=i<0;e&&(i=-i);var t=i>>>0,n=(i-t)/4294967296>>>0;return e&&(n=~n>>>0,t=~t>>>0,++t>4294967295&&(t=0,++n>4294967295&&(n=0))),new h(t,n)},"fromNumber"),h.from=o(function(i){if(typeof i=="number")return h.fromNumber(i);if(S.isString(i))if(S.Long)i=S.Long.fromString(i);else return h.fromNumber(parseInt(i,10));return i.low||i.high?new h(i.low>>>0,i.high>>>0):u},"from"),h.prototype.toNumber=o(function(i){if(!i&&this.hi>>>31){var e=~this.lo+1>>>0,t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+t*4294967296)}return this.lo+this.hi*4294967296},"toNumber"),h.prototype.toLong=o(function(i){return S.Long?new S.Long(this.lo|0,this.hi|0,Boolean(i)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(i)}},"toLong");var a=String.prototype.charCodeAt;h.fromHash=o(function(i){return i===m?u:new h((a.call(i,0)|a.call(i,1)<<8|a.call(i,2)<<16|a.call(i,3)<<24)>>>0,(a.call(i,4)|a.call(i,5)<<8|a.call(i,6)<<16|a.call(i,7)<<24)>>>0)},"fromHash"),h.prototype.toHash=o(function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},"toHash"),h.prototype.zzEncode=o(function(){var i=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^i)>>>0,this.lo=(this.lo<<1^i)>>>0,this},"zzEncode"),h.prototype.zzDecode=o(function(){var i=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^i)>>>0,this.hi=(this.hi>>>1^i)>>>0,this},"zzDecode"),h.prototype.length=o(function(){var i=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,t=this.hi>>>24;return t===0?e===0?i<16384?i<128?1:2:i<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:t<128?9:10},"length")},xJ9D:function(j,l,f){"use strict";var S=this&&this.__createBinding||(Object.create?function(d,y,E,w){w===void 0&&(w=E),Object.defineProperty(d,w,{enumerable:!0,get:function(){return y[E]}})}:function(d,y,E,w){w===void 0&&(w=E),d[w]=y[E]}),h=this&&this.__setModuleDefault||(Object.create?function(d,y){Object.defineProperty(d,"default",{enumerable:!0,value:y})}:function(d,y){d.default=y}),u=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var y={};if(d!=null)for(var E in d)E!=="default"&&Object.prototype.hasOwnProperty.call(d,E)&&S(y,d,E);return h(y,d),y},m=this&&this.__awaiter||function(d,y,E,w){function k(V){return V instanceof E?V:new E(function(F){F(V)})}return o(k,"adopt"),new(E||(E=Promise))(function(V,F){function N(O){try{x(w.next(O))}catch(M){F(M)}}o(N,"fulfilled");function P(O){try{x(w.throw(O))}catch(M){F(M)}}o(P,"rejected");function x(O){O.done?V(O.value):k(O.value).then(N,P)}o(x,"step"),x((w=w.apply(d,y||[])).next())})},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const s=a(f("6Bxv")),i=a(f("lUhs")),e=a(f("V5IF")),t=u(f("DUgj")),n=a(f("hEYi")),r=a(f("COTZ")),c=f("f2XL"),p=a(f("aVV0"));let g=o(class extends p.default{cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return m(this,void 0,void 0,function*(){const y=yield new Promise((E,w)=>{const k=this.context;k.turnCredentials=null;let V=o(class{cancel(){this.signalingClient.removeObserver(this),w(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(x){if(x.type===n.default.WebSocketClosed){let M=`The signaling connection was closed with code ${x.closeCode} and reason: ${x.closeReason}`;k.logger.warn(M);let D=i.default.SignalingBadRequest;x.closeCode===4410?(M="The meeting already ended.",k.logger.warn(M),D=i.default.MeetingEnded):x.closeCode>=4500&&x.closeCode<4600&&(D=i.default.SignalingInternalServerError),k.audioVideoController.handleMeetingSessionStatus(new s.default(D),new Error(M));return}if(x.type!==n.default.ReceivedSignalFrame)return;if(x.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const M=x.message.joinack;if(M&&M.videoSubscriptionLimit&&(k.videoSubscriptionLimit=M.videoSubscriptionLimit),k.serverSupportsCompression=M==null?void 0:M.wantsCompressedSdp,(M==null?void 0:M.defaultServerSideNetworkAdaption)!==void 0&&M.defaultServerSideNetworkAdaption!==t.default.Default&&k.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption!==void 0){const D=M.defaultServerSideNetworkAdaption;k.logger.info(`Overriding server side network adaption value to ${D}`),k.videoDownlinkBandwidthPolicy.setServerSideNetworkAdaption(t.convertServerSideNetworkAdaptionEnumFromSignaled(D))}M&&M.turnCredentials?(k.turnCredentials=new e.default,k.turnCredentials.username=M.turnCredentials.username,k.turnCredentials.password=M.turnCredentials.password,k.turnCredentials.ttl=M.turnCredentials.ttl,k.turnCredentials.uris=M.turnCredentials.uris.map(D=>k.meetingSessionConfiguration.urls.urlRewriter(D)).filter(D=>!!D)):k.logger.error("missing TURN credentials in JoinAckFrame");return}if(x.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const O=x.message.index;E(O)}constructor(x){this.signalingClient=x}},"IndexFrameInterceptor");const F=new V(this.context.signalingClient);this.context.signalingClient.registerObserver(F),this.taskCanceler=F,this.context.previousSdpAnswerAsString="",this.context.previousSdpOffer=null,this.context.serverSupportsCompression=!1;const N=new r.default(this.context.meetingSessionConfiguration.applicationMetadata);this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption!==void 0&&this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions!==void 0&&(N.serverSideNetworkAdaption=this.context.videoDownlinkBandwidthPolicy.getServerSideNetworkAdaption(),N.supportedServerSideNetworkAdaptions=this.context.videoDownlinkBandwidthPolicy.supportedServerSideNetworkAdaptions()),this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex!==void 0&&(N.wantsAllTemporalLayersInIndex=this.context.videoDownlinkBandwidthPolicy.wantsAllTemporalLayersInIndex()),N.disablePeriodicKeyframeRequestOnContentSender=this.context.meetingSessionConfiguration.disablePeriodicKeyframeRequestOnContentSender,this.context.signalingClient.join(N)});this.context.logger.info(`received first index ${JSON.stringify(y)}`),this.context.indexFrame=y})}constructor(y){super(y.logger),this.context=y,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null}},"JoinAndReceiveIndexTask");l.default=g},xeHQ:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("papz")),m=h(f("j+uH"));let a=o(class extends m.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return S(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const n=o((r,c,p,g,d)=>{i===r&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),e(),delete this.cancelPromise)},"handler");this.cancelPromise=r=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(r)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},xsFo:function(j,l,f){"use strict";(function(S){Object.defineProperty(l,"__esModule",{value:!0}),l.convertToBuffer=void 0;var h=f("f/KM"),u=typeof S<"u"&&S.from?function(a){return S.from(a,"utf8")}:h.fromUtf8;function m(a){return a instanceof Uint8Array?a:typeof a=="string"?u(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}o(m,"convertToBuffer"),l.convertToBuffer=m}).call(this,f("HDXh").Buffer)},xxdO:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var S=f("7JaV");S.__exportStar(f("je3o"),l)},xzjI:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class extends Error{constructor(u,m){super(m||"Error fetching device."),this.cause=u,this.name="GetUserMediaError"}},"GetUserMediaError");l.default=S},yMiq:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(a,s,i,e){function t(n){return n instanceof i?n:new i(function(r){r(n)})}return o(t,"adopt"),new(i||(i=Promise))(function(n,r){function c(d){try{g(e.next(d))}catch(y){r(y)}}o(c,"fulfilled");function p(d){try{g(e.throw(d))}catch(y){r(y)}}o(p,"rejected");function g(d){d.done?n(d.value):t(d.value).then(c,p)}o(g,"step"),g((e=e.apply(a,s||[])).next())})},h=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("aVV0"));let m=o(class extends u.default{run(){return S(this,void 0,void 0,function*(){this.context.resetConnectionSpecificState()})}constructor(s){super(s.logger),this.context=s,this.taskName="CleanRestartedSessionTask"}},"CleanRestartedSessionTask");l.default=m},yQ3g:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{start(u){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),u()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(u){this.timeoutMs=u,this.timer=null}},"TimeoutScheduler");l.default=S},yS4C:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(t,n,r,c){function p(g){return g instanceof r?g:new r(function(d){d(g)})}return o(p,"adopt"),new(r||(r=Promise))(function(g,d){function y(k){try{w(c.next(k))}catch(V){d(V)}}o(y,"fulfilled");function E(k){try{w(c.throw(k))}catch(V){d(V)}}o(E,"rejected");function w(k){k.done?g(k.value):p(k.value).then(y,E)}o(w,"step"),w((c=c.apply(t,n||[])).next())})},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("my46")),m=h(f("+DE9")),a=h(f("R+jL")),s=f("Aplu"),i=h(f("Z/hr"));let e=o(class{createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new m.default(new a.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return S(this,void 0,void 0,function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const n=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,n.destroy()})}bindVideoElement(n,r){const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element binding for unknown tile id ${n}`);return}c.bindVideoElement(r)}unbindVideoElement(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const c=this.getVideoTile(n);if(c===null){this.logger.warn(`Ignoring video element unbinding for unknown tile id ${n}`);return}this.logger.info("Unbinding the video element");const p=c.stateRef().boundVideoElement;c.bindVideoElement(null),r&&(this.logger.info("Cleaning up the video element"),i.default.disconnectVideoStreamFromVideoElement(p,!1))}startLocalVideoTile(){if(this.audioVideoController.configuration.meetingFeatures.videoMaxResolution===u.default.VideoDisabled)return this.logger.warn("Could not start camera video because max video resolution was set to None"),-1;const n=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update({needsRenegotiation:!0}),n.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update({needsRenegotiation:!0}))}hasStartedLocalVideoTile(){return!!(this.currentLocalTile&&this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)||(this.audioVideoController.pauseReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.add(n)),r.pause())}unpauseVideoTile(n){const r=this.getVideoTile(n);r&&(this.currentPausedTilesByIds.has(n)&&(this.audioVideoController.resumeReceivingStream(r.stateRef().streamId),this.currentPausedTilesByIds.delete(n)),r.unpause())}getVideoTile(n){return this.tileMap.has(n)?this.tileMap.get(n):null}getVideoTileArea(n){const r=n.state();let c=0,p=0;return r.boundVideoElement&&(c=r.boundVideoElement.clientHeight*r.devicePixelRatio,p=r.boundVideoElement.clientWidth*r.devicePixelRatio),c*p}getAllRemoteVideoTiles(){const n=new Array;return this.tileMap.forEach((r,c)=>{(!this.currentLocalTile||c!==this.currentLocalTile.id())&&n.push(r)}),n}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const r=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const c=this.tileFactory.makeTile(r,n,this,this.devicePixelRatioMonitor);return this.tileMap.set(r,c),c}removeVideoTile(n){if(!this.tileMap.has(n))return;const r=this.tileMap.get(n);this.currentLocalTile===r&&(this.currentLocalTile=null),r.destroy(),this.tileMap.delete(n),this.audioVideoController.forEachObserver(c=>{s.Maybe.of(c.videoTileWasRemoved).map(p=>p.bind(c)(n))}),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(n){const r=[];for(const c of this.getAllVideoTiles()){const p=c.state();p.boundAttendeeId===n&&(this.removeVideoTile(p.tileId),r.push(p.tileId))}return r}removeAllVideoTiles(){const n=Array.from(this.tileMap.keys());for(const r of n)this.removeVideoTile(r)}sendTileStateUpdate(n){this.audioVideoController.forEachObserver(r=>{s.Maybe.of(r.videoTileDidUpdate).map(c=>c.bind(r)(n))})}haveVideoTilesWithStreams(){for(const n of this.getAllVideoTiles())if(n.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(n){return!!this.getVideoTileForAttendeeId(n)}getVideoTileForAttendeeId(n){for(const r of this.getAllVideoTiles())if(r.state().boundAttendeeId===n)return r}captureVideoTile(n){const r=this.getVideoTile(n);return r?r.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile?this.currentLocalTile:(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.currentLocalTile)}constructor(n,r,c){this.tileFactory=n,this.audioVideoController=r,this.logger=c,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set,this.keepLastFrameWhenPaused=!1,this.keepLastFrameWhenPaused=r.configuration.keepLastFrameWhenPaused}},"DefaultVideoTileController");l.default=e},ySOd:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(n,r,c,p){function g(d){return d instanceof c?d:new c(function(y){y(d)})}return o(g,"adopt"),new(c||(c=Promise))(function(d,y){function E(V){try{k(p.next(V))}catch(F){y(F)}}o(E,"fulfilled");function w(V){try{k(p.throw(V))}catch(F){y(F)}}o(w,"rejected");function k(V){V.done?d(V.value):g(V.value).then(E,w)}o(k,"step"),k((p=p.apply(n,r||[])).next())})},h=this&&this.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("IsLT")),m=h(f("zd8f")),a=h(f("mlaT")),s=h(f("ZZPe")),i=h(f("kud1"));let e=o(class extends s.default{loadAssets(){return S(this,void 0,void 0,function*(){})}addObserver(){}removeObserver(){}setImageBlob(){return S(this,void 0,void 0,function*(){})}},"NoOpBackgroundReplacementProcessor"),t=o(class WS extends u.default{static create(r,c){return S(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const{logger:p}=c;if(!(yield WS.isSupported(r,c)))return p.warn("Using no-op processor because background replacement is not supported"),new e;p.info("Using background replacement filter");const d=new i.default(r,c);return yield d.loadAssets(),d})}static resolveOptions(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const c=Object.assign({},r);return c.logger||(c.logger=new m.default("BackgroundReplacementProcessor",a.default.INFO)),super.resolveOptions(c)}static resolveOptionsAsync(r){return S(this,void 0,void 0,function*(){if(!r.imageBlob){const c=document.createElement("canvas");c.width=100,c.height=100;const p=c.getContext("2d");p.fillStyle="blue",p.fillRect(0,0,100,100);const g=yield new Promise(d=>{c.toBlob(d)});r.imageBlob=g}})}static isSupported(r,c){const p=Object.create(null,{isSupported:{get:()=>super.isSupported}});return S(this,void 0,void 0,function*(){r=this.resolveSpec(r),c=this.resolveOptions(c),yield this.resolveOptionsAsync(c);const g=c.imageBlob,d=URL.createObjectURL(g);try{yield i.default.loadImage(d)}catch(y){return c.logger.info(`Failed to fetch load replacement image ${y.message}`),!1}finally{URL.revokeObjectURL(d)}return p.isSupported.call(this,r,c)})}},"BackgroundReplacementVideoFrameProcessor");l.default=t},ya0l:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{},"ClientVideoStreamReceivingReport");l.default=S},yqyw:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("lUhs")),m=h(f("aVV0"));let a=o(class extends m.default{cancel(){if(this.cancelPromise){const i=new Error(`canceling ${this.name()} due to the meeting status code: ${u.default.NoAttendeePresent}`);this.cancelPromise(i),delete this.cancelPromise}}run(){return S(this,void 0,void 0,function*(){const i=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise((e,t)=>{const n=o((r,c,p,g,d)=>{i===r&&c&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),e(),delete this.cancelPromise)},"handler");this.cancelPromise=r=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(r)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)})})}constructor(i){super(i.logger),this.context=i,this.taskName="WaitForAttendeePresenceTask"}},"WaitForAttendeePresenceTask");l.default=a},yvTz:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(d,y,E,w){function k(V){return V instanceof E?V:new E(function(F){F(V)})}return o(k,"adopt"),new(E||(E=Promise))(function(V,F){function N(O){try{x(w.next(O))}catch(M){F(M)}}o(N,"fulfilled");function P(O){try{x(w.throw(O))}catch(M){F(M)}}o(P,"rejected");function x(O){O.done?V(O.value):k(O.value).then(N,P)}o(x,"step"),x((w=w.apply(d,y||[])).next())})},h=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("2nae")),m=h(f("HLgz")),a=h(f("Np2I")),s=h(f("Sa54")),i=h(f("Lrln")),e=h(f("0NFC")),t=h(f("Q8+J")),n=f("rwhO"),r=h(f("eeYi")),c=h(f("ULlC")),p=h(f("jHTc"));let g=o(class{get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}get eventController(){return this._eventController}destroy(){return S(this,void 0,void 0,function*(){n.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),n.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),n.isDestroyable(this.eventController)&&(yield this.eventController.destroy()),t.default.removeLogger(this._logger),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0,this._eventController=void 0})}checkBrowserSupportAndFeatureConfiguration(){const y=new s.default,E=`${y.name()} ${y.majorVersion()} (${y.version()})`;if(this.logger.info(`browser is ${E}`),y.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${y.supportString()}.`),this._configuration.videoUplinkBandwidthPolicy)if(this.isSimulcastUplinkPolicy(this._configuration.videoUplinkBandwidthPolicy)){if(!y.hasChromiumWebRTC())throw new Error("Simulcast is only supported on Chromium-based browsers");this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!0}else this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1;this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(y.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${y.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast is only supported on Chromium-based browsers")),this._configuration.enableSVC&&(this._configuration.enableSVC=!1,this.logger.info("SVC is not successfully enabled since simulcast is enabled"))),this._configuration.enableSVC&&!y.supportsScalableVideoCoding()&&(this._configuration.enableSVC=!1,this.logger.info("SVC is only supported on Chromium-based browsers with version 111 or above"))}isSimulcastUplinkPolicy(y){return!!(y&&y.addObserver)}constructor(y,E,w,k){this._eventController=k,this._configuration=y,this._logger=E,this.checkBrowserSupportAndFeatureConfiguration(),t.default.addLogger(this._logger),t.default.register(),this._eventController||(this._eventController=new r.default(y,E)),w.eventController||(w.eventController=this.eventController),this.audioVideoController=new u.default(this._configuration,this._logger,new p.default(this._logger),w,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs)),this.eventController),this._deviceController=w,this.logger.info(`MeetingFeatures: ${JSON.stringify(y.meetingFeatures)}`);const V=new i.default(this._logger);this.contentShareController=new e.default(V,new u.default(e.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new p.default(this._logger),V,new c.default(this._configuration.reconnectTimeoutMs,new a.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new m.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}},"DefaultMeetingSession");l.default=g},ywpn:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(c,p,g,d){function y(E){return E instanceof g?E:new g(function(w){w(E)})}return o(y,"adopt"),new(g||(g=Promise))(function(E,w){function k(N){try{F(d.next(N))}catch(P){w(P)}}o(k,"fulfilled");function V(N){try{F(d.throw(N))}catch(P){w(P)}}o(V,"rejected");function F(N){N.done?E(N.value):y(N.value).then(k,V)}o(F,"step"),F((d=d.apply(c,p||[])).next())})},h=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(l,"__esModule",{value:!0});const u=f("GEtQ"),m=f("hlxM"),a=h(f("J93s")),s=h(f("Sa54")),i=h(f("59sL")),e=o(()=>a.default.builder().withSelfieSegmentationDefaults().build(),"CREATE_DEFAULT_MODEL_SPEC"),t="https://static.sdkassets.chime.aws",n={worker:`${t}/bgblur/workers/worker.js`,wasm:`${t}/bgblur/wasm/_cwt-wasm.wasm`,simd:`${t}/bgblur/wasm/_cwt-wasm-simd.wasm`};let r=o(class{static defaultAssetSpec(){const p=i.default.sdkVersionSemVer;return{assetGroup:`sdk-${p.major}.${p.minor}`}}static createUrlWithParams(p,g){const d=new URL(p),y=Object.keys(g);for(const E of y)g[E]!==void 0&&d.searchParams.set(E,g[E]);return d.toString()}static resolveSpec(p){const{paths:g=n,model:d=e(),assetGroup:y=this.defaultAssetSpec().assetGroup,revisionID:E=this.defaultAssetSpec().revisionID}=p||{},w={assetGroup:y,revisionID:E,sdk:encodeURIComponent(i.default.sdkVersion),ua:encodeURIComponent(i.default.sdkUserAgentLowResolution)};return g.worker=this.createUrlWithParams(g.worker,w),g.wasm=this.createUrlWithParams(g.wasm,w),g.simd=this.createUrlWithParams(g.simd,w),d.path=this.createUrlWithParams(d.path,w),{paths:g,model:d,assetGroup:y,revisionID:E}}static resolveOptions(p){p.reportingPeriodMillis||(p.reportingPeriodMillis=1e3);const g=30;return p.filterCPUUtilization?(p.filterCPUUtilization<0||p.filterCPUUtilization>100)&&(p.logger.warn(`filterCPUUtilization must be set to a range between 0 and 100 percent. Falling back to default of ${g} percent`),p.filterCPUUtilization=g):p.filterCPUUtilization=g,p}static isSupported(p,g){const{logger:d}=g;return typeof globalThis>"u"?(d.info("Browser does not have globalThis."),Promise.resolve(!1)):new s.default().supportsBackgroundFilter()?m.supportsWASM(globalThis,d)?this.supportsBackgroundFilter(globalThis,p,d):(d.info("Browser does not support WASM."),Promise.resolve(!1)):(d.info("Browser is not supported."),Promise.resolve(!1))}static supportsBackgroundFilter(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:globalThis,g=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;return S(this,void 0,void 0,function*(){if(!m.supportsWorker(p,d))return d.info("Browser does not support web workers."),!1;const y=g.paths.worker;try{const E=yield u.loadWorker(y,"BackgroundFilterWorker",{},null);try{E.terminate()}catch(w){d.info(`Failed to terminate worker. ${w.message}`)}return!0}catch(E){return d.info(`Failed to fetch and instantiate test worker ${E.message}`),!1}})}},"BackgroundFilterVideoFrameProcessor");l.default=r},yx2K:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(V,F,N,P){function x(O){return O instanceof N?O:new N(function(M){M(O)})}return o(x,"adopt"),new(N||(N=Promise))(function(O,M){function D($){try{q(P.next($))}catch(de){M(de)}}o(D,"fulfilled");function J($){try{q(P.throw($))}catch(de){M(de)}}o(J,"rejected");function q($){$.done?O($.value):x($.value).then(D,J)}o(q,"step"),q((P=P.apply(V,F||[])).next())})},h=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("WHnE")),m=h(f("Sa54")),a=h(f("RUbL")),s=h(f("V4cD")),i=h(f("aVV0")),e=h(f("L+i+")),t=h(f("Yvks")),n=h(f("jmx1")),r=h(f("zN22")),c=h(f("CPHI")),p=h(f("2Bsk")),g=h(f("aSsB")),d=h(f("kph0")),y=h(f("SdmA")),E=h(f("NFcc")),w=h(f("+7ft"));let k=o(class jS{static delay(F){return S(this,void 0,void 0,function*(){return new Promise(N=>setTimeout(N,F))})}checkAudioInput(F){return S(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startAudioInput(F),yield this.meetingSession.audioVideo.stopAudioInput(),n.default.Succeeded}catch(N){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${N}`),N instanceof s.default?n.default.PermissionDenied:n.default.Failed}})}checkAudioOutput(F,N){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return S(this,void 0,void 0,function*(){try{const x=F?a.default.getIntrinsicDeviceId(F):"";return yield this.playTone(x,this.configuration.audioOutputFrequency,P),(yield N())?r.default.Succeeded:r.default.Failed}catch(x){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${x}`),r.default.Failed}finally{this.stopTone()}})}playTone(F,N,P){return S(this,void 0,void 0,function*(){const O=this.configuration.audioOutputGain;this.oscillatorNode&&this.stopTone(),this.audioContext=a.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=N,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const D=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,D),this.gainNode.gain.linearRampToValueAtTime(O,D+.1),this.oscillatorNode.start();const J=new u.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield J.bindAudioDevice({deviceId:F}))}catch(q){this.logger.error(`Failed to bind audio device: ${q}`)}try{yield J.bindAudioElement(P||new Audio)}catch(q){this.logger.error(`Failed to bind audio element: ${q}`)}yield J.bindAudioStream(this.destinationStream.stream)})}stopTone(){if(!this.audioContext||!this.gainNode||!this.oscillatorNode||!this.destinationStream)return;const F=1,N=.1,P=this.configuration.audioOutputGain,x=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(P,x+N+F),this.gainNode.gain.linearRampToValueAtTime(0,x+N*2+F),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(F){return S(this,void 0,void 0,function*(){try{return yield this.meetingSession.audioVideo.startVideoInput(F),yield this.meetingSession.audioVideo.stopVideoInput(),E.default.Succeeded}catch(N){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${N}`),N instanceof s.default?E.default.PermissionDenied:E.default.Failed}})}checkCameraResolution(F,N,P){return S(this,void 0,void 0,function*(){let x;try{const O=a.default.getIntrinsicDeviceId(F),M={video:this.calculateVideoConstraint(O,N,P)};x=yield navigator.mediaDevices.getUserMedia(M)}catch(O){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${N} height ${P} failed with error ${O}`),O&&O.name==="OverconstrainedError"?c.default.ResolutionNotSupported:O&&O.name==="NotAllowedError"?c.default.PermissionDenied:c.default.Failed}finally{x&&x.getTracks().forEach(function(O){O.stop()})}return c.default.Succeeded})}calculateVideoConstraint(F,N,P){const x=this.browserBehavior.requiresResolutionAlignment(N,P),O={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(O.deviceId=F,O.width=N,O.height=P):(O.deviceId={exact:F},O.width={exact:x[0]},O.height={exact:x[1]}),O}checkContentShareConnectivity(F){return S(this,void 0,void 0,function*(){let N=!1,P=!1;const x={contentShareDidStart:()=>{N=!0}},O={audioVideoDidStart:()=>{P=!0}};try{return this.meetingSession.audioVideo.addObserver(O),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(x),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(F),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return P&&N})),P?(yield this.stopMeeting(),N?p.default.Succeeded:p.default.TimedOut):p.default.ConnectionFailed}catch(M){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${M}`),M.name==="NotAllowedError"?p.default.PermissionDenied:p.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(O),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(x)}})}checkAudioConnectivity(F){return S(this,void 0,void 0,function*(){let N=!1;const P={packetsReceived:0},x=this.meetingSession.audioVideo,O={metricsDidReceive(D){D.getRTCStatsReport().forEach(J=>{J.type==="inbound-rtp"&&J.mediaType==="audio"&&(P.packetsReceived=J.packetsReceived)})}},M=o((D,J,q,$)=>{D===this.meetingSession.configuration.credentials.attendeeId&&J&&(N=!0)},"attendeePresenceHandler");try{yield x.startAudioInput(F)}catch(D){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${D}`),D instanceof s.default?t.default.AudioInputPermissionDenied:t.default.AudioInputRequestFailed}return x.realtimeSubscribeToAttendeeIdPresence(M),x.addObserver(O),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return this.isAudioConnectionSuccessful(N,P)})),x.removeObserver(O),x.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.stopMeeting(),yield this.meetingSession.audioVideo.stopAudioInput(),this.isAudioConnectionSuccessful(N,P)?t.default.Succeeded:t.default.AudioNotReceived):(x.removeObserver(O),x.realtimeUnsubscribeToAttendeeIdPresence(M),yield this.meetingSession.audioVideo.stopAudioInput(),t.default.ConnectionFailed)})}checkVideoConnectivity(F){return S(this,void 0,void 0,function*(){const N=this.meetingSession.audioVideo;let P=0;const x={metricsDidReceive(O){O.getRTCStatsReport().forEach(D=>{D.type==="outbound-rtp"&&D.mediaType==="video"&&(P=D.packetsSent)})}};try{yield N.startVideoInput(F)}catch(O){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${O}`),O instanceof s.default?y.default.VideoInputPermissionDenied:y.default.VideoInputRequestFailed}return N.addObserver(x),(yield this.startMeeting())?(N.startLocalVideoTile(),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return P>0})),yield N.stopVideoInput(),yield this.stopMeeting(),N.removeObserver(x),P<=0?y.default.VideoNotSent:y.default.Succeeded):y.default.ConnectionFailed})}checkNetworkUDPConnectivity(){return S(this,void 0,void 0,function*(){let F=!1;const N={metricsDidReceive(x){x.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(F=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(x){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${x}`),d.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=x=>{const O=this.originalURLRewriter(x);return O.includes("transport=tcp")?"":O};const P=this.meetingSession.audioVideo;return P.addObserver(N),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(N),F?d.default.Succeeded:d.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,d.default.ConnectionFailed)})}checkNetworkTCPConnectivity(){return S(this,void 0,void 0,function*(){let F=!1;const N={metricsDidReceive(x){x.getRTCStatsReport().forEach(M=>{M.type==="candidate-pair"&&M.state==="succeeded"&&(F=!0)})}};try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(x){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${x}`),g.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=x=>{const O=this.originalURLRewriter(x);return O.includes("transport=udp")?"":O};const P=this.meetingSession.audioVideo;return P.addObserver(N),(yield this.startMeeting())?(yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),P.removeObserver(N),F?g.default.Succeeded:g.default.ICENegotiationFailed):(this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,g.default.ConnectionFailed)})}startMeeting(){return S(this,void 0,void 0,function*(){let F=!1;const N={audioVideoDidStart:()=>{F=!0}};return this.meetingSession.audioVideo.addObserver(N),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.audioVideo.removeObserver(N),F})}stopMeeting(){return S(this,void 0,void 0,function*(){let F=!1;const N={audioVideoDidStop:P=>{F=!0}};return this.meetingSession.audioVideo.addObserver(N),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask(()=>S(this,void 0,void 0,function*(){return F})),this.meetingSession.audioVideo.removeObserver(N),F})}executeTimeoutTask(F){return S(this,void 0,void 0,function*(){let N=!1,P=o(class extends i.default{cancel(){this.isCancelled=!0}run(){return S(this,void 0,void 0,function*(){for(;!this.isCancelled;){if(yield F()){N=!0;break}yield jS.delay(this.waitDurationMs)}})}constructor(M,D){super(M),this.waitDurationMs=D,this.isCancelled=!1}},"CheckForConditionTask");return yield new e.default(this.logger,new P(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs).run(),N})}isAudioConnectionSuccessful(F,N){return F&&N.packetsReceived>0}constructor(F,N,P=new w.default){this.logger=F,this.meetingSession=N,this.configuration=P,this.browserBehavior=new m.default}},"DefaultMeetingReadinessChecker");l.default=k},"z8+u":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.WebSocketReadyState=void 0;var S;(function(h){h[h.None=0]="None",h[h.Connecting=1]="Connecting",h[h.Open=2]="Open",h[h.Closing=3]="Closing",h[h.Closed=4]="Closed"})(S=l.WebSocketReadyState||(l.WebSocketReadyState={})),l.default=S},zH6K:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(s,i,e,t){function n(r){return r instanceof e?r:new e(function(c){c(r)})}return o(n,"adopt"),new(e||(e=Promise))(function(r,c){function p(y){try{d(t.next(y))}catch(E){c(E)}}o(p,"fulfilled");function g(y){try{d(t.throw(y))}catch(E){c(E)}}o(g,"rejected");function d(y){y.done?r(y.value):n(y.value).then(p,g)}o(d,"step"),d((t=t.apply(s,i||[])).next())})},h=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(l,"__esModule",{value:!0});const u=h(f("F7zz")),m=h(f("BkFD"));let a=o(class GS{sortedDeviceList(){return S(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0)})}handleDeviceChangeEvent(){for(const i of this.deviceChangeListeners)u.default.nextTick(()=>{if(this.deviceChangeListeners.has(i)){const e=new Event("devicechange");typeof i=="function"?i(e):i.handleEvent(e)}})}constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(i,e,t)=>{if(!Reflect.has(i,e))return;if(!("ondevicechange"in navigator.mediaDevices)){if(e==="addEventListener")return this.patchAddEventListener(i,e,t);if(e==="removeEventListener")return this.patchRemoveEventListener(i,e,t)}const n=Reflect.get(i,e,t);return typeof n=="function"?n.bind(i):n},this.patchAddEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,p)=>{if(r==="devicechange")this.deviceChangeListeners.add(c),this.scheduler||(this.scheduler=new m.default(GS.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists));else return Reflect.apply(n,i,[r,c,p])}},this.patchRemoveEventListener=(i,e,t)=>{const n=Reflect.get(i,e,t);return(r,c,p)=>{if(r==="devicechange")this.deviceChangeListeners.delete(c),this.deviceChangeListeners.size===0&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null);else return Reflect.apply(n,i,[r,c,p])}},this.pollDeviceLists=()=>S(this,void 0,void 0,function*(){const i=yield this.sortedDeviceList();this.devices&&(i.length!==this.devices.length||i.some((t,n)=>t.deviceId!==this.devices[n].deviceId))&&this.handleDeviceChangeEvent(),this.devices=i})}},"MediaDeviceProxyHandler");l.default=a,a.INTERVAL_MS=1e3},zN22:function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.CheckAudioOutputFeedback=void 0;var S;(function(h){h[h.Succeeded=0]="Succeeded",h[h.Failed=1]="Failed"})(S=l.CheckAudioOutputFeedback||(l.CheckAudioOutputFeedback={})),l.default=S},zNm1:function(j,l,f){"use strict";var S=this&&this.__awaiter||function(i,e,t,n){function r(c){return c instanceof t?c:new t(function(p){p(c)})}return o(r,"adopt"),new(t||(t=Promise))(function(c,p){function g(E){try{y(n.next(E))}catch(w){p(w)}}o(g,"fulfilled");function d(E){try{y(n.throw(E))}catch(w){p(w)}}o(d,"rejected");function y(E){E.done?c(E.value):r(E.value).then(g,d)}o(y,"step"),y((n=n.apply(i,e||[])).next())})},h=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(l,"__esModule",{value:!0}),l.NoOpDeviceControllerWithEventController=void 0;const u=h(f("r9Lw")),m=h(f("dWQL"));let a=o(class extends u.default{destroy(){return S(this,void 0,void 0,function*(){this.destroyed=!0})}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}startAudioInput(e){return Promise.reject()}stopAudioInput(){return Promise.resolve()}startVideoInput(e){return Promise.reject()}stopVideoInput(){return Promise.resolve()}chooseAudioOutput(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,n){}getVideoInputQualitySettings(){return m.default.VideoDisabled}constructor(e){super(),this.destroyed=!1}},"NoOpDeviceController");l.default=a;let s=o(class extends a{constructor(e){super(),this.eventController=e}},"NoOpDeviceControllerWithEventController");l.NoOpDeviceControllerWithEventController=s},"zW/2":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.isEmptyData=void 0;function S(h){return typeof h=="string"?h.length===0:h.byteLength===0}o(S,"isEmptyData"),l.isEmptyData=S},"zcg+":function(j,l,f){"use strict";Object.defineProperty(l,"__esModule",{value:!0});let S=o(class{start(u){this.stop(),this.timer=setTimeout(()=>{clearTimeout(this.timer),u()},this.timeoutMs)}stop(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)}constructor(u){this.timeoutMs=u,this.timer=null}},"TimeoutScheduler");l.default=S},zd8f:function(j,l,f){"use strict";var S=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(l,"__esModule",{value:!0});const h=S(f("mlaT"));let u=o(class{info(a){this.log(h.default.INFO,a)}warn(a){this.log(h.default.WARN,a)}error(a){this.log(h.default.ERROR,a)}debug(a){h.default.DEBUG<this.level||(typeof a=="string"?this.log(h.default.DEBUG,a):a?this.log(h.default.DEBUG,a()):this.log(h.default.DEBUG,""+a))}setLogLevel(a){this.level=a}getLogLevel(){return this.level}log(a,s){if(a<this.level)return;const e=`${new Date().toISOString()} [${h.default[a]}] ${this.name} - ${s}`;switch(a){case h.default.ERROR:console.error(e);break;case h.default.WARN:console.warn(e);break;case h.default.DEBUG:console.debug(e.replace(/\\r\\n/g,`
`));break;case h.default.INFO:console.info(e);break}}constructor(a,s=h.default.WARN){this.name=a,this.level=s}},"ConsoleLogger");l.default=u}}]);})();
